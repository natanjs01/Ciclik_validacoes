var FPe=Object.defineProperty;var Uee=t=>{throw TypeError(t)};var BPe=(t,e,r)=>e in t?FPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var rr=(t,e,r)=>BPe(t,typeof e!="symbol"?e+"":e,r),d9=(t,e,r)=>e.has(t)||Uee("Cannot "+r);var N=(t,e,r)=>(d9(t,e,"read from private field"),r?r.call(t):e.get(t)),ge=(t,e,r)=>e.has(t)?Uee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ae=(t,e,r,n)=>(d9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ve=(t,e,r)=>(d9(t,e,"access private method"),r);var Eo=(t,e,r,n)=>({set _(i){ae(t,e,i,r)},get _(){return N(t,e,n)}});function Mfe(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lfe={exports:{}},_F={},Ffe={exports:{}},qi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zO=Symbol.for("react.element"),$Pe=Symbol.for("react.portal"),UPe=Symbol.for("react.fragment"),zPe=Symbol.for("react.strict_mode"),VPe=Symbol.for("react.profiler"),qPe=Symbol.for("react.provider"),HPe=Symbol.for("react.context"),WPe=Symbol.for("react.forward_ref"),GPe=Symbol.for("react.suspense"),KPe=Symbol.for("react.memo"),XPe=Symbol.for("react.lazy"),zee=Symbol.iterator;function YPe(t){return t===null||typeof t!="object"?null:(t=zee&&t[zee]||t["@@iterator"],typeof t=="function"?t:null)}var Bfe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$fe=Object.assign,Ufe={};function PC(t,e,r){this.props=t,this.context=e,this.refs=Ufe,this.updater=r||Bfe}PC.prototype.isReactComponent={};PC.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};PC.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zfe(){}zfe.prototype=PC.prototype;function MK(t,e,r){this.props=t,this.context=e,this.refs=Ufe,this.updater=r||Bfe}var LK=MK.prototype=new zfe;LK.constructor=MK;$fe(LK,PC.prototype);LK.isPureReactComponent=!0;var Vee=Array.isArray,Vfe=Object.prototype.hasOwnProperty,FK={current:null},qfe={key:!0,ref:!0,__self:!0,__source:!0};function Hfe(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Vfe.call(e,n)&&!qfe.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:zO,type:t,key:s,ref:o,props:i,_owner:FK.current}}function ZPe(t,e){return{$$typeof:zO,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function BK(t){return typeof t=="object"&&t!==null&&t.$$typeof===zO}function QPe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var qee=/\/+/g;function h9(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QPe(""+t.key):e.toString(36)}function KD(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zO:case $Pe:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+h9(o,0):n,Vee(i)?(r="",t!=null&&(r=t.replace(qee,"$&/")+"/"),KD(i,e,r,"",function(u){return u})):i!=null&&(BK(i)&&(i=ZPe(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qee,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Vee(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+h9(s,l);o+=KD(s,e,r,c,i)}else if(c=YPe(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+h9(s,l++),o+=KD(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hR(t,e,r){if(t==null)return t;var n=[],i=0;return KD(t,n,"","",function(s){return e.call(r,s,i++)}),n}function JPe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Id={current:null},XD={transition:null},eke={ReactCurrentDispatcher:Id,ReactCurrentBatchConfig:XD,ReactCurrentOwner:FK};function Wfe(){throw Error("act(...) is not supported in production builds of React.")}qi.Children={map:hR,forEach:function(t,e,r){hR(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return hR(t,function(){e++}),e},toArray:function(t){return hR(t,function(e){return e})||[]},only:function(t){if(!BK(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qi.Component=PC;qi.Fragment=UPe;qi.Profiler=VPe;qi.PureComponent=MK;qi.StrictMode=zPe;qi.Suspense=GPe;qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eke;qi.act=Wfe;qi.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=$fe({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=FK.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Vfe.call(e,c)&&!qfe.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:zO,type:t.type,key:i,ref:s,props:n,_owner:o}};qi.createContext=function(t){return t={$$typeof:HPe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qPe,_context:t},t.Consumer=t};qi.createElement=Hfe;qi.createFactory=function(t){var e=Hfe.bind(null,t);return e.type=t,e};qi.createRef=function(){return{current:null}};qi.forwardRef=function(t){return{$$typeof:WPe,render:t}};qi.isValidElement=BK;qi.lazy=function(t){return{$$typeof:XPe,_payload:{_status:-1,_result:t},_init:JPe}};qi.memo=function(t,e){return{$$typeof:KPe,type:t,compare:e===void 0?null:e}};qi.startTransition=function(t){var e=XD.transition;XD.transition={};try{t()}finally{XD.transition=e}};qi.unstable_act=Wfe;qi.useCallback=function(t,e){return Id.current.useCallback(t,e)};qi.useContext=function(t){return Id.current.useContext(t)};qi.useDebugValue=function(){};qi.useDeferredValue=function(t){return Id.current.useDeferredValue(t)};qi.useEffect=function(t,e){return Id.current.useEffect(t,e)};qi.useId=function(){return Id.current.useId()};qi.useImperativeHandle=function(t,e,r){return Id.current.useImperativeHandle(t,e,r)};qi.useInsertionEffect=function(t,e){return Id.current.useInsertionEffect(t,e)};qi.useLayoutEffect=function(t,e){return Id.current.useLayoutEffect(t,e)};qi.useMemo=function(t,e){return Id.current.useMemo(t,e)};qi.useReducer=function(t,e,r){return Id.current.useReducer(t,e,r)};qi.useRef=function(t){return Id.current.useRef(t)};qi.useState=function(t){return Id.current.useState(t)};qi.useSyncExternalStore=function(t,e,r){return Id.current.useSyncExternalStore(t,e,r)};qi.useTransition=function(){return Id.current.useTransition()};qi.version="18.3.1";Ffe.exports=qi;var C=Ffe.exports;const be=Vi(C),$K=Mfe({__proto__:null,default:be},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tke=C,rke=Symbol.for("react.element"),nke=Symbol.for("react.fragment"),ike=Object.prototype.hasOwnProperty,ske=tke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ake={key:!0,ref:!0,__self:!0,__source:!0};function Gfe(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ike.call(e,n)&&!ake.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:rke,type:t,key:s,ref:o,props:i,_owner:ske.current}}_F.Fragment=nke;_F.jsx=Gfe;_F.jsxs=Gfe;Lfe.exports=_F;var a=Lfe.exports,Kfe={exports:{}},Mf={},Xfe={exports:{}},Yfe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,Y){var oe=X.length;X.push(Y);e:for(;0<oe;){var xe=oe-1>>>1,H=X[xe];if(0<i(H,Y))X[xe]=Y,X[oe]=H,oe=xe;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Y=X[0],oe=X.pop();if(oe!==Y){X[0]=oe;e:for(var xe=0,H=X.length,J=H>>>1;xe<J;){var ie=2*(xe+1)-1,ce=X[ie],me=ie+1,he=X[me];if(0>i(ce,oe))me<H&&0>i(he,ce)?(X[xe]=he,X[me]=oe,xe=me):(X[xe]=ce,X[ie]=oe,xe=ie);else if(me<H&&0>i(he,oe))X[xe]=he,X[me]=oe,xe=me;else break e}}return Y}function i(X,Y){var oe=X.sortIndex-Y.sortIndex;return oe!==0?oe:X.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,x=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var Y=r(u);Y!==null;){if(Y.callback===null)n(u);else if(Y.startTime<=X)n(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=r(u)}}function j(X){if(g=!1,E(X),!x)if(r(c)!==null)x=!0,se(T);else{var Y=r(u);Y!==null&&K(j,Y.startTime-X)}}function T(X,Y){x=!1,g&&(g=!1,w(M),M=-1),m=!0;var oe=f;try{for(E(Y),h=r(c);h!==null&&(!(h.expirationTime>Y)||X&&!F());){var xe=h.callback;if(typeof xe=="function"){h.callback=null,f=h.priorityLevel;var H=xe(h.expirationTime<=Y);Y=t.unstable_now(),typeof H=="function"?h.callback=H:h===r(c)&&n(c),E(Y)}else n(c);h=r(c)}if(h!==null)var J=!0;else{var ie=r(u);ie!==null&&K(j,ie.startTime-Y),J=!1}return J}finally{h=null,f=oe,m=!1}}var O=!1,I=null,M=-1,D=5,z=-1;function F(){return!(t.unstable_now()-z<D)}function q(){if(I!==null){var X=t.unstable_now();z=X;var Y=!0;try{Y=I(!0,X)}finally{Y?Q():(O=!1,I=null)}}else O=!1}var Q;if(typeof S=="function")Q=function(){S(q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Z=re.port2;re.port1.onmessage=q,Q=function(){Z.postMessage(null)}}else Q=function(){y(q,0)};function se(X){I=X,O||(O=!0,Q())}function K(X,Y){M=y(function(){X(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,se(T))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(X){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var oe=f;f=Y;try{return X()}finally{f=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Y){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=f;f=X;try{return Y()}finally{f=oe}},t.unstable_scheduleCallback=function(X,Y,oe){var xe=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?xe+oe:xe):oe=xe,X){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=oe+H,X={id:d++,callback:Y,priorityLevel:X,startTime:oe,expirationTime:H,sortIndex:-1},oe>xe?(X.sortIndex=oe,e(u,X),r(c)===null&&X===r(u)&&(g?(w(M),M=-1):g=!0,K(j,oe-xe))):(X.sortIndex=H,e(c,X),x||m||(x=!0,se(T))),X},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(X){var Y=f;return function(){var oe=f;f=Y;try{return X.apply(this,arguments)}finally{f=oe}}}})(Yfe);Xfe.exports=Yfe;var oke=Xfe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lke=C,kf=oke;function Ar(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zfe=new Set,Q4={};function oN(t,e){gA(t,e),gA(t+"Capture",e)}function gA(t,e){for(Q4[t]=e,t=0;t<e.length;t++)Zfe.add(e[t])}var gv=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xz=Object.prototype.hasOwnProperty,cke=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hee={},Wee={};function uke(t){return xz.call(Wee,t)?!0:xz.call(Hee,t)?!1:cke.test(t)?Wee[t]=!0:(Hee[t]=!0,!1)}function dke(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hke(t,e,r,n){if(e===null||typeof e>"u"||dke(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rd(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var su={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){su[t]=new Rd(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];su[e]=new Rd(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){su[t]=new Rd(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){su[t]=new Rd(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){su[t]=new Rd(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){su[t]=new Rd(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){su[t]=new Rd(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){su[t]=new Rd(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){su[t]=new Rd(t,5,!1,t.toLowerCase(),null,!1,!1)});var UK=/[\-:]([a-z])/g;function zK(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(UK,zK);su[e]=new Rd(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(UK,zK);su[e]=new Rd(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(UK,zK);su[e]=new Rd(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){su[t]=new Rd(t,1,!1,t.toLowerCase(),null,!1,!1)});su.xlinkHref=new Rd("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){su[t]=new Rd(t,1,!1,t.toLowerCase(),null,!0,!0)});function VK(t,e,r,n){var i=su.hasOwnProperty(e)?su[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hke(e,r,i,n)&&(r=null),n||i===null?uke(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Lv=lke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fR=Symbol.for("react.element"),CS=Symbol.for("react.portal"),TS=Symbol.for("react.fragment"),qK=Symbol.for("react.strict_mode"),vz=Symbol.for("react.profiler"),Qfe=Symbol.for("react.provider"),Jfe=Symbol.for("react.context"),HK=Symbol.for("react.forward_ref"),yz=Symbol.for("react.suspense"),bz=Symbol.for("react.suspense_list"),WK=Symbol.for("react.memo"),g1=Symbol.for("react.lazy"),eme=Symbol.for("react.offscreen"),Gee=Symbol.iterator;function $5(t){return t===null||typeof t!="object"?null:(t=Gee&&t[Gee]||t["@@iterator"],typeof t=="function"?t:null)}var yo=Object.assign,f9;function jT(t){if(f9===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);f9=e&&e[1]||""}return`
`+f9+t}var m9=!1;function p9(t,e){if(!t||m9)return"";m9=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{m9=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?jT(t):""}function fke(t){switch(t.tag){case 5:return jT(t.type);case 16:return jT("Lazy");case 13:return jT("Suspense");case 19:return jT("SuspenseList");case 0:case 2:case 15:return t=p9(t.type,!1),t;case 11:return t=p9(t.type.render,!1),t;case 1:return t=p9(t.type,!0),t;default:return""}}function wz(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case TS:return"Fragment";case CS:return"Portal";case vz:return"Profiler";case qK:return"StrictMode";case yz:return"Suspense";case bz:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jfe:return(t.displayName||"Context")+".Consumer";case Qfe:return(t._context.displayName||"Context")+".Provider";case HK:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case WK:return e=t.displayName||null,e!==null?e:wz(t.type)||"Memo";case g1:e=t._payload,t=t._init;try{return wz(t(e))}catch{}}return null}function mke(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wz(e);case 8:return e===qK?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gb(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tme(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pke(t){var e=tme(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mR(t){t._valueTracker||(t._valueTracker=pke(t))}function rme(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=tme(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function aM(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _z(t,e){var r=e.checked;return yo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Kee(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=gb(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nme(t,e){e=e.checked,e!=null&&VK(t,"checked",e,!1)}function Nz(t,e){nme(t,e);var r=gb(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sz(t,e.type,r):e.hasOwnProperty("defaultValue")&&Sz(t,e.type,gb(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xee(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Sz(t,e,r){(e!=="number"||aM(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var AT=Array.isArray;function aE(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+gb(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ez(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ar(91));return yo({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yee(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ar(92));if(AT(r)){if(1<r.length)throw Error(Ar(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:gb(r)}}function ime(t,e){var r=gb(e.value),n=gb(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Zee(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sme(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jz(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sme(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pR,ame=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pR=pR||document.createElement("div"),pR.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pR.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function J4(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var o4={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gke=["Webkit","ms","Moz","O"];Object.keys(o4).forEach(function(t){gke.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),o4[e]=o4[t]})});function ome(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||o4.hasOwnProperty(t)&&o4[t]?(""+e).trim():e+"px"}function lme(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=ome(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var xke=yo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Az(t,e){if(e){if(xke[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ar(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ar(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ar(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ar(62))}}function Cz(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tz=null;function GK(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pz=null,oE=null,lE=null;function Qee(t){if(t=HO(t)){if(typeof Pz!="function")throw Error(Ar(280));var e=t.stateNode;e&&(e=AF(e),Pz(t.stateNode,t.type,e))}}function cme(t){oE?lE?lE.push(t):lE=[t]:oE=t}function ume(){if(oE){var t=oE,e=lE;if(lE=oE=null,Qee(t),e)for(t=0;t<e.length;t++)Qee(e[t])}}function dme(t,e){return t(e)}function hme(){}var g9=!1;function fme(t,e,r){if(g9)return t(e,r);g9=!0;try{return dme(t,e,r)}finally{g9=!1,(oE!==null||lE!==null)&&(hme(),ume())}}function e3(t,e){var r=t.stateNode;if(r===null)return null;var n=AF(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ar(231,e,typeof r));return r}var kz=!1;if(gv)try{var U5={};Object.defineProperty(U5,"passive",{get:function(){kz=!0}}),window.addEventListener("test",U5,U5),window.removeEventListener("test",U5,U5)}catch{kz=!1}function vke(t,e,r,n,i,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var l4=!1,oM=null,lM=!1,Oz=null,yke={onError:function(t){l4=!0,oM=t}};function bke(t,e,r,n,i,s,o,l,c){l4=!1,oM=null,vke.apply(yke,arguments)}function wke(t,e,r,n,i,s,o,l,c){if(bke.apply(this,arguments),l4){if(l4){var u=oM;l4=!1,oM=null}else throw Error(Ar(198));lM||(lM=!0,Oz=u)}}function lN(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function mme(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jee(t){if(lN(t)!==t)throw Error(Ar(188))}function _ke(t){var e=t.alternate;if(!e){if(e=lN(t),e===null)throw Error(Ar(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Jee(i),t;if(s===n)return Jee(i),e;s=s.sibling}throw Error(Ar(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o)throw Error(Ar(189))}}if(r.alternate!==n)throw Error(Ar(190))}if(r.tag!==3)throw Error(Ar(188));return r.stateNode.current===r?t:e}function pme(t){return t=_ke(t),t!==null?gme(t):null}function gme(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gme(t);if(e!==null)return e;t=t.sibling}return null}var xme=kf.unstable_scheduleCallback,ete=kf.unstable_cancelCallback,Nke=kf.unstable_shouldYield,Ske=kf.unstable_requestPaint,rl=kf.unstable_now,Eke=kf.unstable_getCurrentPriorityLevel,KK=kf.unstable_ImmediatePriority,vme=kf.unstable_UserBlockingPriority,cM=kf.unstable_NormalPriority,jke=kf.unstable_LowPriority,yme=kf.unstable_IdlePriority,NF=null,yg=null;function Ake(t){if(yg&&typeof yg.onCommitFiberRoot=="function")try{yg.onCommitFiberRoot(NF,t,void 0,(t.current.flags&128)===128)}catch{}}var Vp=Math.clz32?Math.clz32:Pke,Cke=Math.log,Tke=Math.LN2;function Pke(t){return t>>>=0,t===0?32:31-(Cke(t)/Tke|0)|0}var gR=64,xR=4194304;function CT(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uM(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=CT(l):(s&=o,s!==0&&(n=CT(s)))}else o=r&~i,o!==0?n=CT(o):s!==0&&(n=CT(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Vp(e),i=1<<r,n|=t[r],e&=~i;return n}function kke(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oke(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vp(s),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=kke(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Iz(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bme(){var t=gR;return gR<<=1,!(gR&4194240)&&(gR=64),t}function x9(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function VO(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vp(e),t[e]=r}function Ike(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Vp(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function XK(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Vp(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Vs=0;function wme(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _me,YK,Nme,Sme,Eme,Rz=!1,vR=[],Hy=null,Wy=null,Gy=null,t3=new Map,r3=new Map,_1=[],Rke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tte(t,e){switch(t){case"focusin":case"focusout":Hy=null;break;case"dragenter":case"dragleave":Wy=null;break;case"mouseover":case"mouseout":Gy=null;break;case"pointerover":case"pointerout":t3.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":r3.delete(e.pointerId)}}function z5(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=HO(e),e!==null&&YK(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Dke(t,e,r,n,i){switch(e){case"focusin":return Hy=z5(Hy,t,e,r,n,i),!0;case"dragenter":return Wy=z5(Wy,t,e,r,n,i),!0;case"mouseover":return Gy=z5(Gy,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return t3.set(s,z5(t3.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,r3.set(s,z5(r3.get(s)||null,t,e,r,n,i)),!0}return!1}function jme(t){var e=Rw(t.target);if(e!==null){var r=lN(e);if(r!==null){if(e=r.tag,e===13){if(e=mme(r),e!==null){t.blockedOn=e,Eme(t.priority,function(){Nme(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function YD(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Dz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Tz=n,r.target.dispatchEvent(n),Tz=null}else return e=HO(r),e!==null&&YK(e),t.blockedOn=r,!1;e.shift()}return!0}function rte(t,e,r){YD(t)&&r.delete(e)}function Mke(){Rz=!1,Hy!==null&&YD(Hy)&&(Hy=null),Wy!==null&&YD(Wy)&&(Wy=null),Gy!==null&&YD(Gy)&&(Gy=null),t3.forEach(rte),r3.forEach(rte)}function V5(t,e){t.blockedOn===e&&(t.blockedOn=null,Rz||(Rz=!0,kf.unstable_scheduleCallback(kf.unstable_NormalPriority,Mke)))}function n3(t){function e(i){return V5(i,t)}if(0<vR.length){V5(vR[0],t);for(var r=1;r<vR.length;r++){var n=vR[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Hy!==null&&V5(Hy,t),Wy!==null&&V5(Wy,t),Gy!==null&&V5(Gy,t),t3.forEach(e),r3.forEach(e),r=0;r<_1.length;r++)n=_1[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<_1.length&&(r=_1[0],r.blockedOn===null);)jme(r),r.blockedOn===null&&_1.shift()}var cE=Lv.ReactCurrentBatchConfig,dM=!0;function Lke(t,e,r,n){var i=Vs,s=cE.transition;cE.transition=null;try{Vs=1,ZK(t,e,r,n)}finally{Vs=i,cE.transition=s}}function Fke(t,e,r,n){var i=Vs,s=cE.transition;cE.transition=null;try{Vs=4,ZK(t,e,r,n)}finally{Vs=i,cE.transition=s}}function ZK(t,e,r,n){if(dM){var i=Dz(t,e,r,n);if(i===null)A9(t,e,n,hM,r),tte(t,n);else if(Dke(i,t,e,r,n))n.stopPropagation();else if(tte(t,n),e&4&&-1<Rke.indexOf(t)){for(;i!==null;){var s=HO(i);if(s!==null&&_me(s),s=Dz(t,e,r,n),s===null&&A9(t,e,n,hM,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else A9(t,e,n,null,r)}}var hM=null;function Dz(t,e,r,n){if(hM=null,t=GK(n),t=Rw(t),t!==null)if(e=lN(t),e===null)t=null;else if(r=e.tag,r===13){if(t=mme(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hM=t,null}function Ame(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eke()){case KK:return 1;case vme:return 4;case cM:case jke:return 16;case yme:return 536870912;default:return 16}default:return 16}}var Iy=null,QK=null,ZD=null;function Cme(){if(ZD)return ZD;var t,e=QK,r=e.length,n,i="value"in Iy?Iy.value:Iy.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return ZD=i.slice(t,1<n?1-n:void 0)}function QD(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yR(){return!0}function nte(){return!1}function Lf(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yR:nte,this.isPropagationStopped=nte,this}return yo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yR)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yR)},persist:function(){},isPersistent:yR}),e}var kC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JK=Lf(kC),qO=yo({},kC,{view:0,detail:0}),Bke=Lf(qO),v9,y9,q5,SF=yo({},qO,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eX,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==q5&&(q5&&t.type==="mousemove"?(v9=t.screenX-q5.screenX,y9=t.screenY-q5.screenY):y9=v9=0,q5=t),v9)},movementY:function(t){return"movementY"in t?t.movementY:y9}}),ite=Lf(SF),$ke=yo({},SF,{dataTransfer:0}),Uke=Lf($ke),zke=yo({},qO,{relatedTarget:0}),b9=Lf(zke),Vke=yo({},kC,{animationName:0,elapsedTime:0,pseudoElement:0}),qke=Lf(Vke),Hke=yo({},kC,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wke=Lf(Hke),Gke=yo({},kC,{data:0}),ste=Lf(Gke),Kke={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zke(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yke[t])?!!e[t]:!1}function eX(){return Zke}var Qke=yo({},qO,{key:function(t){if(t.key){var e=Kke[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=QD(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xke[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eX,charCode:function(t){return t.type==="keypress"?QD(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?QD(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jke=Lf(Qke),eOe=yo({},SF,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ate=Lf(eOe),tOe=yo({},qO,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eX}),rOe=Lf(tOe),nOe=yo({},kC,{propertyName:0,elapsedTime:0,pseudoElement:0}),iOe=Lf(nOe),sOe=yo({},SF,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aOe=Lf(sOe),oOe=[9,13,27,32],tX=gv&&"CompositionEvent"in window,c4=null;gv&&"documentMode"in document&&(c4=document.documentMode);var lOe=gv&&"TextEvent"in window&&!c4,Tme=gv&&(!tX||c4&&8<c4&&11>=c4),ote=" ",lte=!1;function Pme(t,e){switch(t){case"keyup":return oOe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kme(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var PS=!1;function cOe(t,e){switch(t){case"compositionend":return kme(e);case"keypress":return e.which!==32?null:(lte=!0,ote);case"textInput":return t=e.data,t===ote&&lte?null:t;default:return null}}function uOe(t,e){if(PS)return t==="compositionend"||!tX&&Pme(t,e)?(t=Cme(),ZD=QK=Iy=null,PS=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tme&&e.locale!=="ko"?null:e.data;default:return null}}var dOe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cte(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dOe[t.type]:e==="textarea"}function Ome(t,e,r,n){cme(n),e=fM(e,"onChange"),0<e.length&&(r=new JK("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var u4=null,i3=null;function hOe(t){Vme(t,0)}function EF(t){var e=IS(t);if(rme(e))return t}function fOe(t,e){if(t==="change")return e}var Ime=!1;if(gv){var w9;if(gv){var _9="oninput"in document;if(!_9){var ute=document.createElement("div");ute.setAttribute("oninput","return;"),_9=typeof ute.oninput=="function"}w9=_9}else w9=!1;Ime=w9&&(!document.documentMode||9<document.documentMode)}function dte(){u4&&(u4.detachEvent("onpropertychange",Rme),i3=u4=null)}function Rme(t){if(t.propertyName==="value"&&EF(i3)){var e=[];Ome(e,i3,t,GK(t)),fme(hOe,e)}}function mOe(t,e,r){t==="focusin"?(dte(),u4=e,i3=r,u4.attachEvent("onpropertychange",Rme)):t==="focusout"&&dte()}function pOe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return EF(i3)}function gOe(t,e){if(t==="click")return EF(e)}function xOe(t,e){if(t==="input"||t==="change")return EF(e)}function vOe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qp=typeof Object.is=="function"?Object.is:vOe;function s3(t,e){if(Qp(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!xz.call(e,i)||!Qp(t[i],e[i]))return!1}return!0}function hte(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fte(t,e){var r=hte(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hte(r)}}function Dme(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dme(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mme(){for(var t=window,e=aM();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=aM(t.document)}return e}function rX(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yOe(t){var e=Mme(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Dme(r.ownerDocument.documentElement,r)){if(n!==null&&rX(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=fte(r,s);var o=fte(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bOe=gv&&"documentMode"in document&&11>=document.documentMode,kS=null,Mz=null,d4=null,Lz=!1;function mte(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lz||kS==null||kS!==aM(n)||(n=kS,"selectionStart"in n&&rX(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),d4&&s3(d4,n)||(d4=n,n=fM(Mz,"onSelect"),0<n.length&&(e=new JK("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=kS)))}function bR(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var OS={animationend:bR("Animation","AnimationEnd"),animationiteration:bR("Animation","AnimationIteration"),animationstart:bR("Animation","AnimationStart"),transitionend:bR("Transition","TransitionEnd")},N9={},Lme={};gv&&(Lme=document.createElement("div").style,"AnimationEvent"in window||(delete OS.animationend.animation,delete OS.animationiteration.animation,delete OS.animationstart.animation),"TransitionEvent"in window||delete OS.transitionend.transition);function jF(t){if(N9[t])return N9[t];if(!OS[t])return t;var e=OS[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Lme)return N9[t]=e[r];return t}var Fme=jF("animationend"),Bme=jF("animationiteration"),$me=jF("animationstart"),Ume=jF("transitionend"),zme=new Map,pte="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lb(t,e){zme.set(t,e),oN(e,[t])}for(var S9=0;S9<pte.length;S9++){var E9=pte[S9],wOe=E9.toLowerCase(),_Oe=E9[0].toUpperCase()+E9.slice(1);Lb(wOe,"on"+_Oe)}Lb(Fme,"onAnimationEnd");Lb(Bme,"onAnimationIteration");Lb($me,"onAnimationStart");Lb("dblclick","onDoubleClick");Lb("focusin","onFocus");Lb("focusout","onBlur");Lb(Ume,"onTransitionEnd");gA("onMouseEnter",["mouseout","mouseover"]);gA("onMouseLeave",["mouseout","mouseover"]);gA("onPointerEnter",["pointerout","pointerover"]);gA("onPointerLeave",["pointerout","pointerover"]);oN("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oN("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oN("onBeforeInput",["compositionend","keypress","textInput","paste"]);oN("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oN("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oN("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var TT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NOe=new Set("cancel close invalid load scroll toggle".split(" ").concat(TT));function gte(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,wke(n,e,void 0,t),t.currentTarget=null}function Vme(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;gte(i,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;gte(i,l,u),s=c}}}if(lM)throw t=Oz,lM=!1,Oz=null,t}function ja(t,e){var r=e[zz];r===void 0&&(r=e[zz]=new Set);var n=t+"__bubble";r.has(n)||(qme(e,t,2,!1),r.add(n))}function j9(t,e,r){var n=0;e&&(n|=4),qme(r,t,n,e)}var wR="_reactListening"+Math.random().toString(36).slice(2);function a3(t){if(!t[wR]){t[wR]=!0,Zfe.forEach(function(r){r!=="selectionchange"&&(NOe.has(r)||j9(r,!1,t),j9(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wR]||(e[wR]=!0,j9("selectionchange",!1,e))}}function qme(t,e,r,n){switch(Ame(e)){case 1:var i=Lke;break;case 4:i=Fke;break;default:i=ZK}r=i.bind(null,e,r,t),i=void 0,!kz||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function A9(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Rw(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}fme(function(){var u=s,d=GK(r),h=[];e:{var f=zme.get(t);if(f!==void 0){var m=JK,x=t;switch(t){case"keypress":if(QD(r)===0)break e;case"keydown":case"keyup":m=Jke;break;case"focusin":x="focus",m=b9;break;case"focusout":x="blur",m=b9;break;case"beforeblur":case"afterblur":m=b9;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ite;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Uke;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=rOe;break;case Fme:case Bme:case $me:m=qke;break;case Ume:m=iOe;break;case"scroll":m=Bke;break;case"wheel":m=aOe;break;case"copy":case"cut":case"paste":m=Wke;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ate}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?f!==null?f+"Capture":null:f;g=[];for(var S=u,E;S!==null;){E=S;var j=E.stateNode;if(E.tag===5&&j!==null&&(E=j,w!==null&&(j=e3(S,w),j!=null&&g.push(o3(S,j,E)))),y)break;S=S.return}0<g.length&&(f=new m(f,x,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Tz&&(x=r.relatedTarget||r.fromElement)&&(Rw(x)||x[xv]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?Rw(x):null,x!==null&&(y=lN(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(g=ite,j="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(g=ate,j="onPointerLeave",w="onPointerEnter",S="pointer"),y=m==null?f:IS(m),E=x==null?f:IS(x),f=new g(j,S+"leave",m,r,d),f.target=y,f.relatedTarget=E,j=null,Rw(d)===u&&(g=new g(w,S+"enter",x,r,d),g.target=E,g.relatedTarget=y,j=g),y=j,m&&x)t:{for(g=m,w=x,S=0,E=g;E;E=FN(E))S++;for(E=0,j=w;j;j=FN(j))E++;for(;0<S-E;)g=FN(g),S--;for(;0<E-S;)w=FN(w),E--;for(;S--;){if(g===w||w!==null&&g===w.alternate)break t;g=FN(g),w=FN(w)}g=null}else g=null;m!==null&&xte(h,f,m,g,!1),x!==null&&y!==null&&xte(h,y,x,g,!0)}}e:{if(f=u?IS(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=fOe;else if(cte(f))if(Ime)T=xOe;else{T=pOe;var O=mOe}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=gOe);if(T&&(T=T(t,u))){Ome(h,T,r,d);break e}O&&O(t,f,u),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Sz(f,"number",f.value)}switch(O=u?IS(u):window,t){case"focusin":(cte(O)||O.contentEditable==="true")&&(kS=O,Mz=u,d4=null);break;case"focusout":d4=Mz=kS=null;break;case"mousedown":Lz=!0;break;case"contextmenu":case"mouseup":case"dragend":Lz=!1,mte(h,r,d);break;case"selectionchange":if(bOe)break;case"keydown":case"keyup":mte(h,r,d)}var I;if(tX)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else PS?Pme(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(Tme&&r.locale!=="ko"&&(PS||M!=="onCompositionStart"?M==="onCompositionEnd"&&PS&&(I=Cme()):(Iy=d,QK="value"in Iy?Iy.value:Iy.textContent,PS=!0)),O=fM(u,M),0<O.length&&(M=new ste(M,t,null,r,d),h.push({event:M,listeners:O}),I?M.data=I:(I=kme(r),I!==null&&(M.data=I)))),(I=lOe?cOe(t,r):uOe(t,r))&&(u=fM(u,"onBeforeInput"),0<u.length&&(d=new ste("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=I))}Vme(h,e)})}function o3(t,e,r){return{instance:t,listener:e,currentTarget:r}}function fM(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=e3(t,r),s!=null&&n.unshift(o3(t,s,i)),s=e3(t,e),s!=null&&n.push(o3(t,s,i))),t=t.return}return n}function FN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xte(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=e3(r,s),c!=null&&o.unshift(o3(r,c,l))):i||(c=e3(r,s),c!=null&&o.push(o3(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var SOe=/\r\n?/g,EOe=/\u0000|\uFFFD/g;function vte(t){return(typeof t=="string"?t:""+t).replace(SOe,`
`).replace(EOe,"")}function _R(t,e,r){if(e=vte(e),vte(t)!==e&&r)throw Error(Ar(425))}function mM(){}var Fz=null,Bz=null;function $z(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uz=typeof setTimeout=="function"?setTimeout:void 0,jOe=typeof clearTimeout=="function"?clearTimeout:void 0,yte=typeof Promise=="function"?Promise:void 0,AOe=typeof queueMicrotask=="function"?queueMicrotask:typeof yte<"u"?function(t){return yte.resolve(null).then(t).catch(COe)}:Uz;function COe(t){setTimeout(function(){throw t})}function C9(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),n3(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);n3(e)}function Ky(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bte(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var OC=Math.random().toString(36).slice(2),sg="__reactFiber$"+OC,l3="__reactProps$"+OC,xv="__reactContainer$"+OC,zz="__reactEvents$"+OC,TOe="__reactListeners$"+OC,POe="__reactHandles$"+OC;function Rw(t){var e=t[sg];if(e)return e;for(var r=t.parentNode;r;){if(e=r[xv]||r[sg]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bte(t);t!==null;){if(r=t[sg])return r;t=bte(t)}return e}t=r,r=t.parentNode}return null}function HO(t){return t=t[sg]||t[xv],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function IS(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ar(33))}function AF(t){return t[l3]||null}var Vz=[],RS=-1;function Fb(t){return{current:t}}function Da(t){0>RS||(t.current=Vz[RS],Vz[RS]=null,RS--)}function va(t,e){RS++,Vz[RS]=t.current,t.current=e}var xb={},Ku=Fb(xb),dh=Fb(!1),P_=xb;function xA(t,e){var r=t.type.contextTypes;if(!r)return xb;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hh(t){return t=t.childContextTypes,t!=null}function pM(){Da(dh),Da(Ku)}function wte(t,e,r){if(Ku.current!==xb)throw Error(Ar(168));va(Ku,e),va(dh,r)}function Hme(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ar(108,mke(t)||"Unknown",i));return yo({},r,n)}function gM(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xb,P_=Ku.current,va(Ku,t),va(dh,dh.current),!0}function _te(t,e,r){var n=t.stateNode;if(!n)throw Error(Ar(169));r?(t=Hme(t,e,P_),n.__reactInternalMemoizedMergedChildContext=t,Da(dh),Da(Ku),va(Ku,t)):Da(dh),va(dh,r)}var fx=null,CF=!1,T9=!1;function Wme(t){fx===null?fx=[t]:fx.push(t)}function kOe(t){CF=!0,Wme(t)}function Bb(){if(!T9&&fx!==null){T9=!0;var t=0,e=Vs;try{var r=fx;for(Vs=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}fx=null,CF=!1}catch(i){throw fx!==null&&(fx=fx.slice(t+1)),xme(KK,Bb),i}finally{Vs=e,T9=!1}}return null}var DS=[],MS=0,xM=null,vM=0,fm=[],mm=0,k_=null,tv=1,rv="";function mw(t,e){DS[MS++]=vM,DS[MS++]=xM,xM=t,vM=e}function Gme(t,e,r){fm[mm++]=tv,fm[mm++]=rv,fm[mm++]=k_,k_=t;var n=tv;t=rv;var i=32-Vp(n)-1;n&=~(1<<i),r+=1;var s=32-Vp(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,tv=1<<32-Vp(e)+i|r<<i|n,rv=s+t}else tv=1<<s|r<<i|n,rv=t}function nX(t){t.return!==null&&(mw(t,1),Gme(t,1,0))}function iX(t){for(;t===xM;)xM=DS[--MS],DS[MS]=null,vM=DS[--MS],DS[MS]=null;for(;t===k_;)k_=fm[--mm],fm[mm]=null,rv=fm[--mm],fm[mm]=null,tv=fm[--mm],fm[mm]=null}var jf=null,wf=null,Ka=!1,kp=null;function Kme(t,e){var r=wm(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Nte(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jf=t,wf=Ky(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jf=t,wf=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=k_!==null?{id:tv,overflow:rv}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=wm(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,jf=t,wf=null,!0):!1;default:return!1}}function qz(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hz(t){if(Ka){var e=wf;if(e){var r=e;if(!Nte(t,e)){if(qz(t))throw Error(Ar(418));e=Ky(r.nextSibling);var n=jf;e&&Nte(t,e)?Kme(n,r):(t.flags=t.flags&-4097|2,Ka=!1,jf=t)}}else{if(qz(t))throw Error(Ar(418));t.flags=t.flags&-4097|2,Ka=!1,jf=t}}}function Ste(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jf=t}function NR(t){if(t!==jf)return!1;if(!Ka)return Ste(t),Ka=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$z(t.type,t.memoizedProps)),e&&(e=wf)){if(qz(t))throw Xme(),Error(Ar(418));for(;e;)Kme(t,e),e=Ky(e.nextSibling)}if(Ste(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ar(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){wf=Ky(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}wf=null}}else wf=jf?Ky(t.stateNode.nextSibling):null;return!0}function Xme(){for(var t=wf;t;)t=Ky(t.nextSibling)}function vA(){wf=jf=null,Ka=!1}function sX(t){kp===null?kp=[t]:kp.push(t)}var OOe=Lv.ReactCurrentBatchConfig;function H5(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ar(309));var n=r.stateNode}if(!n)throw Error(Ar(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ar(284));if(!r._owner)throw Error(Ar(290,t))}return t}function SR(t,e){throw t=Object.prototype.toString.call(e),Error(Ar(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ete(t){var e=t._init;return e(t._payload)}function Yme(t){function e(w,S){if(t){var E=w.deletions;E===null?(w.deletions=[S],w.flags|=16):E.push(S)}}function r(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=Qy(w,S),w.index=0,w.sibling=null,w}function s(w,S,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<S?(w.flags|=2,S):E):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,S,E,j){return S===null||S.tag!==6?(S=M9(E,w.mode,j),S.return=w,S):(S=i(S,E),S.return=w,S)}function c(w,S,E,j){var T=E.type;return T===TS?d(w,S,E.props.children,j,E.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===g1&&Ete(T)===S.type)?(j=i(S,E.props),j.ref=H5(w,S,E),j.return=w,j):(j=s6(E.type,E.key,E.props,null,w.mode,j),j.ref=H5(w,S,E),j.return=w,j)}function u(w,S,E,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=L9(E,w.mode,j),S.return=w,S):(S=i(S,E.children||[]),S.return=w,S)}function d(w,S,E,j,T){return S===null||S.tag!==7?(S=v_(E,w.mode,j,T),S.return=w,S):(S=i(S,E),S.return=w,S)}function h(w,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=M9(""+S,w.mode,E),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fR:return E=s6(S.type,S.key,S.props,null,w.mode,E),E.ref=H5(w,null,S),E.return=w,E;case CS:return S=L9(S,w.mode,E),S.return=w,S;case g1:var j=S._init;return h(w,j(S._payload),E)}if(AT(S)||$5(S))return S=v_(S,w.mode,E,null),S.return=w,S;SR(w,S)}return null}function f(w,S,E,j){var T=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:l(w,S,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case fR:return E.key===T?c(w,S,E,j):null;case CS:return E.key===T?u(w,S,E,j):null;case g1:return T=E._init,f(w,S,T(E._payload),j)}if(AT(E)||$5(E))return T!==null?null:d(w,S,E,j,null);SR(w,E)}return null}function m(w,S,E,j,T){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(E)||null,l(S,w,""+j,T);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case fR:return w=w.get(j.key===null?E:j.key)||null,c(S,w,j,T);case CS:return w=w.get(j.key===null?E:j.key)||null,u(S,w,j,T);case g1:var O=j._init;return m(w,S,E,O(j._payload),T)}if(AT(j)||$5(j))return w=w.get(E)||null,d(S,w,j,T,null);SR(S,j)}return null}function x(w,S,E,j){for(var T=null,O=null,I=S,M=S=0,D=null;I!==null&&M<E.length;M++){I.index>M?(D=I,I=null):D=I.sibling;var z=f(w,I,E[M],j);if(z===null){I===null&&(I=D);break}t&&I&&z.alternate===null&&e(w,I),S=s(z,S,M),O===null?T=z:O.sibling=z,O=z,I=D}if(M===E.length)return r(w,I),Ka&&mw(w,M),T;if(I===null){for(;M<E.length;M++)I=h(w,E[M],j),I!==null&&(S=s(I,S,M),O===null?T=I:O.sibling=I,O=I);return Ka&&mw(w,M),T}for(I=n(w,I);M<E.length;M++)D=m(I,w,M,E[M],j),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?M:D.key),S=s(D,S,M),O===null?T=D:O.sibling=D,O=D);return t&&I.forEach(function(F){return e(w,F)}),Ka&&mw(w,M),T}function g(w,S,E,j){var T=$5(E);if(typeof T!="function")throw Error(Ar(150));if(E=T.call(E),E==null)throw Error(Ar(151));for(var O=T=null,I=S,M=S=0,D=null,z=E.next();I!==null&&!z.done;M++,z=E.next()){I.index>M?(D=I,I=null):D=I.sibling;var F=f(w,I,z.value,j);if(F===null){I===null&&(I=D);break}t&&I&&F.alternate===null&&e(w,I),S=s(F,S,M),O===null?T=F:O.sibling=F,O=F,I=D}if(z.done)return r(w,I),Ka&&mw(w,M),T;if(I===null){for(;!z.done;M++,z=E.next())z=h(w,z.value,j),z!==null&&(S=s(z,S,M),O===null?T=z:O.sibling=z,O=z);return Ka&&mw(w,M),T}for(I=n(w,I);!z.done;M++,z=E.next())z=m(I,w,M,z.value,j),z!==null&&(t&&z.alternate!==null&&I.delete(z.key===null?M:z.key),S=s(z,S,M),O===null?T=z:O.sibling=z,O=z);return t&&I.forEach(function(q){return e(w,q)}),Ka&&mw(w,M),T}function y(w,S,E,j){if(typeof E=="object"&&E!==null&&E.type===TS&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case fR:e:{for(var T=E.key,O=S;O!==null;){if(O.key===T){if(T=E.type,T===TS){if(O.tag===7){r(w,O.sibling),S=i(O,E.props.children),S.return=w,w=S;break e}}else if(O.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===g1&&Ete(T)===O.type){r(w,O.sibling),S=i(O,E.props),S.ref=H5(w,O,E),S.return=w,w=S;break e}r(w,O);break}else e(w,O);O=O.sibling}E.type===TS?(S=v_(E.props.children,w.mode,j,E.key),S.return=w,w=S):(j=s6(E.type,E.key,E.props,null,w.mode,j),j.ref=H5(w,S,E),j.return=w,w=j)}return o(w);case CS:e:{for(O=E.key;S!==null;){if(S.key===O)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){r(w,S.sibling),S=i(S,E.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else e(w,S);S=S.sibling}S=L9(E,w.mode,j),S.return=w,w=S}return o(w);case g1:return O=E._init,y(w,S,O(E._payload),j)}if(AT(E))return x(w,S,E,j);if($5(E))return g(w,S,E,j);SR(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(r(w,S.sibling),S=i(S,E),S.return=w,w=S):(r(w,S),S=M9(E,w.mode,j),S.return=w,w=S),o(w)):r(w,S)}return y}var yA=Yme(!0),Zme=Yme(!1),yM=Fb(null),bM=null,LS=null,aX=null;function oX(){aX=LS=bM=null}function lX(t){var e=yM.current;Da(yM),t._currentValue=e}function Wz(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function uE(t,e){bM=t,aX=LS=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sh=!0),t.firstContext=null)}function Om(t){var e=t._currentValue;if(aX!==t)if(t={context:t,memoizedValue:e,next:null},LS===null){if(bM===null)throw Error(Ar(308));LS=t,bM.dependencies={lanes:0,firstContext:t}}else LS=LS.next=t;return e}var Dw=null;function cX(t){Dw===null?Dw=[t]:Dw.push(t)}function Qme(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,cX(e)):(r.next=i.next,i.next=r),e.interleaved=r,vv(t,n)}function vv(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var x1=!1;function uX(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jme(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ov(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xy(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ss&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,vv(t,r)}return i=n.interleaved,i===null?(e.next=e,cX(n)):(e.next=i.next,i.next=e),n.interleaved=e,vv(t,r)}function JD(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,XK(t,r)}}function jte(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function wM(t,e,r,n){var i=t.updateQueue;x1=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;o=0,d=u=c=null,l=s;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,g=l;switch(f=e,m=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=yo({},h,f);break e;case 2:x1=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);I_|=o,t.lanes=o,t.memoizedState=h}}function Ate(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ar(191,i));i.call(n)}}}var WO={},bg=Fb(WO),c3=Fb(WO),u3=Fb(WO);function Mw(t){if(t===WO)throw Error(Ar(174));return t}function dX(t,e){switch(va(u3,e),va(c3,t),va(bg,WO),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jz(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jz(e,t)}Da(bg),va(bg,e)}function bA(){Da(bg),Da(c3),Da(u3)}function epe(t){Mw(u3.current);var e=Mw(bg.current),r=jz(e,t.type);e!==r&&(va(c3,t),va(bg,r))}function hX(t){c3.current===t&&(Da(bg),Da(c3))}var fo=Fb(0);function _M(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P9=[];function fX(){for(var t=0;t<P9.length;t++)P9[t]._workInProgressVersionPrimary=null;P9.length=0}var e6=Lv.ReactCurrentDispatcher,k9=Lv.ReactCurrentBatchConfig,O_=0,xo=null,ql=null,uc=null,NM=!1,h4=!1,d3=0,IOe=0;function vu(){throw Error(Ar(321))}function mX(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Qp(t[r],e[r]))return!1;return!0}function pX(t,e,r,n,i,s){if(O_=s,xo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,e6.current=t===null||t.memoizedState===null?LOe:FOe,t=r(n,i),h4){s=0;do{if(h4=!1,d3=0,25<=s)throw Error(Ar(301));s+=1,uc=ql=null,e.updateQueue=null,e6.current=BOe,t=r(n,i)}while(h4)}if(e6.current=SM,e=ql!==null&&ql.next!==null,O_=0,uc=ql=xo=null,NM=!1,e)throw Error(Ar(300));return t}function gX(){var t=d3!==0;return d3=0,t}function C0(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return uc===null?xo.memoizedState=uc=t:uc=uc.next=t,uc}function Im(){if(ql===null){var t=xo.alternate;t=t!==null?t.memoizedState:null}else t=ql.next;var e=uc===null?xo.memoizedState:uc.next;if(e!==null)uc=e,ql=t;else{if(t===null)throw Error(Ar(310));ql=t,t={memoizedState:ql.memoizedState,baseState:ql.baseState,baseQueue:ql.baseQueue,queue:ql.queue,next:null},uc===null?xo.memoizedState=uc=t:uc=uc.next=t}return uc}function h3(t,e){return typeof e=="function"?e(t):e}function O9(t){var e=Im(),r=e.queue;if(r===null)throw Error(Ar(311));r.lastRenderedReducer=t;var n=ql,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((O_&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,xo.lanes|=d,I_|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Qp(n,e.memoizedState)||(sh=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,xo.lanes|=s,I_|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function I9(t){var e=Im(),r=e.queue;if(r===null)throw Error(Ar(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Qp(s,e.memoizedState)||(sh=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function tpe(){}function rpe(t,e){var r=xo,n=Im(),i=e(),s=!Qp(n.memoizedState,i);if(s&&(n.memoizedState=i,sh=!0),n=n.queue,xX(spe.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||uc!==null&&uc.memoizedState.tag&1){if(r.flags|=2048,f3(9,ipe.bind(null,r,n,i,e),void 0,null),xc===null)throw Error(Ar(349));O_&30||npe(r,e,i)}return i}function npe(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=xo.updateQueue,e===null?(e={lastEffect:null,stores:null},xo.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ipe(t,e,r,n){e.value=r,e.getSnapshot=n,ape(e)&&ope(t)}function spe(t,e,r){return r(function(){ape(e)&&ope(t)})}function ape(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Qp(t,r)}catch{return!0}}function ope(t){var e=vv(t,1);e!==null&&qp(e,t,1,-1)}function Cte(t){var e=C0();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h3,lastRenderedState:t},e.queue=t,t=t.dispatch=MOe.bind(null,xo,t),[e.memoizedState,t]}function f3(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=xo.updateQueue,e===null?(e={lastEffect:null,stores:null},xo.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function lpe(){return Im().memoizedState}function t6(t,e,r,n){var i=C0();xo.flags|=t,i.memoizedState=f3(1|e,r,void 0,n===void 0?null:n)}function TF(t,e,r,n){var i=Im();n=n===void 0?null:n;var s=void 0;if(ql!==null){var o=ql.memoizedState;if(s=o.destroy,n!==null&&mX(n,o.deps)){i.memoizedState=f3(e,r,s,n);return}}xo.flags|=t,i.memoizedState=f3(1|e,r,s,n)}function Tte(t,e){return t6(8390656,8,t,e)}function xX(t,e){return TF(2048,8,t,e)}function cpe(t,e){return TF(4,2,t,e)}function upe(t,e){return TF(4,4,t,e)}function dpe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hpe(t,e,r){return r=r!=null?r.concat([t]):null,TF(4,4,dpe.bind(null,e,t),r)}function vX(){}function fpe(t,e){var r=Im();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&mX(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function mpe(t,e){var r=Im();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&mX(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ppe(t,e,r){return O_&21?(Qp(r,e)||(r=bme(),xo.lanes|=r,I_|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sh=!0),t.memoizedState=r)}function ROe(t,e){var r=Vs;Vs=r!==0&&4>r?r:4,t(!0);var n=k9.transition;k9.transition={};try{t(!1),e()}finally{Vs=r,k9.transition=n}}function gpe(){return Im().memoizedState}function DOe(t,e,r){var n=Zy(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},xpe(t))vpe(e,r);else if(r=Qme(t,e,r,n),r!==null){var i=Ad();qp(r,t,n,i),ype(r,e,n)}}function MOe(t,e,r){var n=Zy(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(xpe(t))vpe(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(i.hasEagerState=!0,i.eagerState=l,Qp(l,o)){var c=e.interleaved;c===null?(i.next=i,cX(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=Qme(t,e,i,n),r!==null&&(i=Ad(),qp(r,t,n,i),ype(r,e,n))}}function xpe(t){var e=t.alternate;return t===xo||e!==null&&e===xo}function vpe(t,e){h4=NM=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ype(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,XK(t,r)}}var SM={readContext:Om,useCallback:vu,useContext:vu,useEffect:vu,useImperativeHandle:vu,useInsertionEffect:vu,useLayoutEffect:vu,useMemo:vu,useReducer:vu,useRef:vu,useState:vu,useDebugValue:vu,useDeferredValue:vu,useTransition:vu,useMutableSource:vu,useSyncExternalStore:vu,useId:vu,unstable_isNewReconciler:!1},LOe={readContext:Om,useCallback:function(t,e){return C0().memoizedState=[t,e===void 0?null:e],t},useContext:Om,useEffect:Tte,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,t6(4194308,4,dpe.bind(null,e,t),r)},useLayoutEffect:function(t,e){return t6(4194308,4,t,e)},useInsertionEffect:function(t,e){return t6(4,2,t,e)},useMemo:function(t,e){var r=C0();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=C0();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=DOe.bind(null,xo,t),[n.memoizedState,t]},useRef:function(t){var e=C0();return t={current:t},e.memoizedState=t},useState:Cte,useDebugValue:vX,useDeferredValue:function(t){return C0().memoizedState=t},useTransition:function(){var t=Cte(!1),e=t[0];return t=ROe.bind(null,t[1]),C0().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=xo,i=C0();if(Ka){if(r===void 0)throw Error(Ar(407));r=r()}else{if(r=e(),xc===null)throw Error(Ar(349));O_&30||npe(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Tte(spe.bind(null,n,s,t),[t]),n.flags|=2048,f3(9,ipe.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=C0(),e=xc.identifierPrefix;if(Ka){var r=rv,n=tv;r=(n&~(1<<32-Vp(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=d3++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=IOe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FOe={readContext:Om,useCallback:fpe,useContext:Om,useEffect:xX,useImperativeHandle:hpe,useInsertionEffect:cpe,useLayoutEffect:upe,useMemo:mpe,useReducer:O9,useRef:lpe,useState:function(){return O9(h3)},useDebugValue:vX,useDeferredValue:function(t){var e=Im();return ppe(e,ql.memoizedState,t)},useTransition:function(){var t=O9(h3)[0],e=Im().memoizedState;return[t,e]},useMutableSource:tpe,useSyncExternalStore:rpe,useId:gpe,unstable_isNewReconciler:!1},BOe={readContext:Om,useCallback:fpe,useContext:Om,useEffect:xX,useImperativeHandle:hpe,useInsertionEffect:cpe,useLayoutEffect:upe,useMemo:mpe,useReducer:I9,useRef:lpe,useState:function(){return I9(h3)},useDebugValue:vX,useDeferredValue:function(t){var e=Im();return ql===null?e.memoizedState=t:ppe(e,ql.memoizedState,t)},useTransition:function(){var t=I9(h3)[0],e=Im().memoizedState;return[t,e]},useMutableSource:tpe,useSyncExternalStore:rpe,useId:gpe,unstable_isNewReconciler:!1};function dp(t,e){if(t&&t.defaultProps){e=yo({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Gz(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:yo({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var PF={isMounted:function(t){return(t=t._reactInternals)?lN(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ad(),i=Zy(t),s=ov(n,i);s.payload=e,r!=null&&(s.callback=r),e=Xy(t,s,i),e!==null&&(qp(e,t,i,n),JD(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ad(),i=Zy(t),s=ov(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Xy(t,s,i),e!==null&&(qp(e,t,i,n),JD(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ad(),n=Zy(t),i=ov(r,n);i.tag=2,e!=null&&(i.callback=e),e=Xy(t,i,n),e!==null&&(qp(e,t,n,r),JD(e,t,n))}};function Pte(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!s3(r,n)||!s3(i,s):!0}function bpe(t,e,r){var n=!1,i=xb,s=e.contextType;return typeof s=="object"&&s!==null?s=Om(s):(i=hh(e)?P_:Ku.current,n=e.contextTypes,s=(n=n!=null)?xA(t,i):xb),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=PF,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function kte(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&PF.enqueueReplaceState(e,e.state,null)}function Kz(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},uX(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Om(s):(s=hh(e)?P_:Ku.current,i.context=xA(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gz(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&PF.enqueueReplaceState(i,i.state,null),wM(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wA(t,e){try{var r="",n=e;do r+=fke(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function R9(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Xz(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var $Oe=typeof WeakMap=="function"?WeakMap:Map;function wpe(t,e,r){r=ov(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jM||(jM=!0,sV=n),Xz(t,e)},r}function _pe(t,e,r){r=ov(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Xz(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Xz(t,e),typeof n!="function"&&(Yy===null?Yy=new Set([this]):Yy.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ote(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new $Oe;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=eIe.bind(null,t,e,r),e.then(t,t))}function Ite(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rte(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ov(-1,1),e.tag=2,Xy(r,e,1))),r.lanes|=1),t)}var UOe=Lv.ReactCurrentOwner,sh=!1;function fd(t,e,r,n){e.child=t===null?Zme(e,null,r,n):yA(e,t.child,r,n)}function Dte(t,e,r,n,i){r=r.render;var s=e.ref;return uE(e,i),n=pX(t,e,r,n,s,i),r=gX(),t!==null&&!sh?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yv(t,e,i)):(Ka&&r&&nX(e),e.flags|=1,fd(t,e,n,i),e.child)}function Mte(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!jX(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Npe(t,e,s,n,i)):(t=s6(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:s3,r(o,n)&&t.ref===e.ref)return yv(t,e,i)}return e.flags|=1,t=Qy(s,n),t.ref=e.ref,t.return=e,e.child=t}function Npe(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(s3(s,n)&&t.ref===e.ref)if(sh=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(sh=!0);else return e.lanes=t.lanes,yv(t,e,i)}return Yz(t,e,r,n,i)}function Spe(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},va(BS,cf),cf|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,va(BS,cf),cf|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,va(BS,cf),cf|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,va(BS,cf),cf|=n;return fd(t,e,i,r),e.child}function Epe(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Yz(t,e,r,n,i){var s=hh(r)?P_:Ku.current;return s=xA(e,s),uE(e,i),r=pX(t,e,r,n,s,i),n=gX(),t!==null&&!sh?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yv(t,e,i)):(Ka&&n&&nX(e),e.flags|=1,fd(t,e,r,i),e.child)}function Lte(t,e,r,n,i){if(hh(r)){var s=!0;gM(e)}else s=!1;if(uE(e,i),e.stateNode===null)r6(t,e),bpe(e,r,n),Kz(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Om(u):(u=hh(r)?P_:Ku.current,u=xA(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&kte(e,o,n,u),x1=!1;var f=e.memoizedState;o.state=f,wM(e,n,o,i),c=e.memoizedState,l!==n||f!==c||dh.current||x1?(typeof d=="function"&&(Gz(e,r,d,n),c=e.memoizedState),(l=x1||Pte(e,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Jme(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:dp(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Om(c):(c=hh(r)?P_:Ku.current,c=xA(e,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&kte(e,o,n,c),x1=!1,f=e.memoizedState,o.state=f,wM(e,n,o,i);var x=e.memoizedState;l!==h||f!==x||dh.current||x1?(typeof m=="function"&&(Gz(e,r,m,n),x=e.memoizedState),(u=x1||Pte(e,r,u,n,f,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Zz(t,e,r,n,s,i)}function Zz(t,e,r,n,i,s){Epe(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&_te(e,r,!1),yv(t,e,s);n=e.stateNode,UOe.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=yA(e,t.child,null,s),e.child=yA(e,null,l,s)):fd(t,e,l,s),e.memoizedState=n.state,i&&_te(e,r,!0),e.child}function jpe(t){var e=t.stateNode;e.pendingContext?wte(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wte(t,e.context,!1),dX(t,e.containerInfo)}function Fte(t,e,r,n,i){return vA(),sX(i),e.flags|=256,fd(t,e,r,n),e.child}var Qz={dehydrated:null,treeContext:null,retryLane:0};function Jz(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ape(t,e,r){var n=e.pendingProps,i=fo.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),va(fo,i&1),t===null)return Hz(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=IF(o,n,0,null),t=v_(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jz(r),e.memoizedState=Qz,t):yX(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return zOe(t,e,o,n,l,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Qy(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Qy(l,s):(s=v_(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Jz(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Qz,n}return s=t.child,t=s.sibling,n=Qy(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function yX(t,e){return e=IF({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ER(t,e,r,n){return n!==null&&sX(n),yA(e,t.child,null,r),t=yX(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zOe(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=R9(Error(Ar(422))),ER(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=IF({mode:"visible",children:n.children},i,0,null),s=v_(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&yA(e,t.child,null,o),e.child.memoizedState=Jz(o),e.memoizedState=Qz,s);if(!(e.mode&1))return ER(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Ar(419)),n=R9(s,n,void 0),ER(t,e,o,n)}if(l=(o&t.childLanes)!==0,sh||l){if(n=xc,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vv(t,i),qp(n,t,i,-1))}return EX(),n=R9(Error(Ar(421))),ER(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tIe.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wf=Ky(i.nextSibling),jf=e,Ka=!0,kp=null,t!==null&&(fm[mm++]=tv,fm[mm++]=rv,fm[mm++]=k_,tv=t.id,rv=t.overflow,k_=e),e=yX(e,n.children),e.flags|=4096,e)}function Bte(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Wz(t.return,e,r)}function D9(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Cpe(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(fd(t,e,n.children,r),n=fo.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bte(t,r,e);else if(t.tag===19)Bte(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(va(fo,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&_M(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),D9(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_M(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}D9(e,!0,r,null,s);break;case"together":D9(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function r6(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yv(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),I_|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ar(153));if(e.child!==null){for(t=e.child,r=Qy(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Qy(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function VOe(t,e,r){switch(e.tag){case 3:jpe(e),vA();break;case 5:epe(e);break;case 1:hh(e.type)&&gM(e);break;case 4:dX(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;va(yM,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(va(fo,fo.current&1),e.flags|=128,null):r&e.child.childLanes?Ape(t,e,r):(va(fo,fo.current&1),t=yv(t,e,r),t!==null?t.sibling:null);va(fo,fo.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Cpe(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),va(fo,fo.current),n)break;return null;case 22:case 23:return e.lanes=0,Spe(t,e,r)}return yv(t,e,r)}var Tpe,eV,Ppe,kpe;Tpe=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eV=function(){};Ppe=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Mw(bg.current);var s=null;switch(r){case"input":i=_z(t,i),n=_z(t,n),s=[];break;case"select":i=yo({},i,{value:void 0}),n=yo({},n,{value:void 0}),s=[];break;case"textarea":i=Ez(t,i),n=Ez(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=mM)}Az(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Q4.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Q4.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ja("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};kpe=function(t,e,r,n){r!==n&&(e.flags|=4)};function W5(t,e){if(!Ka)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function yu(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function qOe(t,e,r){var n=e.pendingProps;switch(iX(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yu(e),null;case 1:return hh(e.type)&&pM(),yu(e),null;case 3:return n=e.stateNode,bA(),Da(dh),Da(Ku),fX(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(NR(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kp!==null&&(lV(kp),kp=null))),eV(t,e),yu(e),null;case 5:hX(e);var i=Mw(u3.current);if(r=e.type,t!==null&&e.stateNode!=null)Ppe(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ar(166));return yu(e),null}if(t=Mw(bg.current),NR(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[sg]=e,n[l3]=s,t=(e.mode&1)!==0,r){case"dialog":ja("cancel",n),ja("close",n);break;case"iframe":case"object":case"embed":ja("load",n);break;case"video":case"audio":for(i=0;i<TT.length;i++)ja(TT[i],n);break;case"source":ja("error",n);break;case"img":case"image":case"link":ja("error",n),ja("load",n);break;case"details":ja("toggle",n);break;case"input":Kee(n,s),ja("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ja("invalid",n);break;case"textarea":Yee(n,s),ja("invalid",n)}Az(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&_R(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&_R(n.textContent,l,t),i=["children",""+l]):Q4.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ja("scroll",n)}switch(r){case"input":mR(n),Xee(n,s,!0);break;case"textarea":mR(n),Zee(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=mM)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sme(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[sg]=e,t[l3]=n,Tpe(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cz(r,n),r){case"dialog":ja("cancel",t),ja("close",t),i=n;break;case"iframe":case"object":case"embed":ja("load",t),i=n;break;case"video":case"audio":for(i=0;i<TT.length;i++)ja(TT[i],t);i=n;break;case"source":ja("error",t),i=n;break;case"img":case"image":case"link":ja("error",t),ja("load",t),i=n;break;case"details":ja("toggle",t),i=n;break;case"input":Kee(t,n),i=_z(t,n),ja("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=yo({},n,{value:void 0}),ja("invalid",t);break;case"textarea":Yee(t,n),i=Ez(t,n),ja("invalid",t);break;default:i=n}Az(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?lme(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ame(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&J4(t,c):typeof c=="number"&&J4(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Q4.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ja("scroll",t):c!=null&&VK(t,s,c,o))}switch(r){case"input":mR(t),Xee(t,n,!1);break;case"textarea":mR(t),Zee(t);break;case"option":n.value!=null&&t.setAttribute("value",""+gb(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?aE(t,!!n.multiple,s,!1):n.defaultValue!=null&&aE(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mM)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yu(e),null;case 6:if(t&&e.stateNode!=null)kpe(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ar(166));if(r=Mw(u3.current),Mw(bg.current),NR(e)){if(n=e.stateNode,r=e.memoizedProps,n[sg]=e,(s=n.nodeValue!==r)&&(t=jf,t!==null))switch(t.tag){case 3:_R(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_R(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[sg]=e,e.stateNode=n}return yu(e),null;case 13:if(Da(fo),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ka&&wf!==null&&e.mode&1&&!(e.flags&128))Xme(),vA(),e.flags|=98560,s=!1;else if(s=NR(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Ar(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ar(317));s[sg]=e}else vA(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yu(e),s=!1}else kp!==null&&(lV(kp),kp=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||fo.current&1?Xl===0&&(Xl=3):EX())),e.updateQueue!==null&&(e.flags|=4),yu(e),null);case 4:return bA(),eV(t,e),t===null&&a3(e.stateNode.containerInfo),yu(e),null;case 10:return lX(e.type._context),yu(e),null;case 17:return hh(e.type)&&pM(),yu(e),null;case 19:if(Da(fo),s=e.memoizedState,s===null)return yu(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)W5(s,!1);else{if(Xl!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_M(t),o!==null){for(e.flags|=128,W5(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return va(fo,fo.current&1|2),e.child}t=t.sibling}s.tail!==null&&rl()>_A&&(e.flags|=128,n=!0,W5(s,!1),e.lanes=4194304)}else{if(!n)if(t=_M(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),W5(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ka)return yu(e),null}else 2*rl()-s.renderingStartTime>_A&&r!==1073741824&&(e.flags|=128,n=!0,W5(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rl(),e.sibling=null,r=fo.current,va(fo,n?r&1|2:r&1),e):(yu(e),null);case 22:case 23:return SX(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?cf&1073741824&&(yu(e),e.subtreeFlags&6&&(e.flags|=8192)):yu(e),null;case 24:return null;case 25:return null}throw Error(Ar(156,e.tag))}function HOe(t,e){switch(iX(e),e.tag){case 1:return hh(e.type)&&pM(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bA(),Da(dh),Da(Ku),fX(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hX(e),null;case 13:if(Da(fo),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ar(340));vA()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Da(fo),null;case 4:return bA(),null;case 10:return lX(e.type._context),null;case 22:case 23:return SX(),null;case 24:return null;default:return null}}var jR=!1,Mu=!1,WOe=typeof WeakSet=="function"?WeakSet:Set,an=null;function FS(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Fo(t,e,n)}else r.current=null}function tV(t,e,r){try{r()}catch(n){Fo(t,e,n)}}var $te=!1;function GOe(t,e){if(Fz=dM,t=Mme(),rX(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||i!==0&&h.nodeType!==3||(l=o+i),h!==s||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++u===i&&(l=o),f===s&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bz={focusedElem:t,selectionRange:r},dM=!1,an=e;an!==null;)if(e=an,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,an=t;else for(;an!==null;){e=an;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,y=x.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:dp(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ar(163))}}catch(j){Fo(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,an=t;break}an=e.return}return x=$te,$te=!1,x}function f4(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tV(e,r,s)}i=i.next}while(i!==n)}}function kF(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function rV(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ope(t){var e=t.alternate;e!==null&&(t.alternate=null,Ope(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sg],delete e[l3],delete e[zz],delete e[TOe],delete e[POe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ipe(t){return t.tag===5||t.tag===3||t.tag===4}function Ute(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ipe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nV(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=mM));else if(n!==4&&(t=t.child,t!==null))for(nV(t,e,r),t=t.sibling;t!==null;)nV(t,e,r),t=t.sibling}function iV(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(iV(t,e,r),t=t.sibling;t!==null;)iV(t,e,r),t=t.sibling}var Uc=null,Ap=!1;function t1(t,e,r){for(r=r.child;r!==null;)Rpe(t,e,r),r=r.sibling}function Rpe(t,e,r){if(yg&&typeof yg.onCommitFiberUnmount=="function")try{yg.onCommitFiberUnmount(NF,r)}catch{}switch(r.tag){case 5:Mu||FS(r,e);case 6:var n=Uc,i=Ap;Uc=null,t1(t,e,r),Uc=n,Ap=i,Uc!==null&&(Ap?(t=Uc,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Uc.removeChild(r.stateNode));break;case 18:Uc!==null&&(Ap?(t=Uc,r=r.stateNode,t.nodeType===8?C9(t.parentNode,r):t.nodeType===1&&C9(t,r),n3(t)):C9(Uc,r.stateNode));break;case 4:n=Uc,i=Ap,Uc=r.stateNode.containerInfo,Ap=!0,t1(t,e,r),Uc=n,Ap=i;break;case 0:case 11:case 14:case 15:if(!Mu&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tV(r,e,o),i=i.next}while(i!==n)}t1(t,e,r);break;case 1:if(!Mu&&(FS(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Fo(r,e,l)}t1(t,e,r);break;case 21:t1(t,e,r);break;case 22:r.mode&1?(Mu=(n=Mu)||r.memoizedState!==null,t1(t,e,r),Mu=n):t1(t,e,r);break;default:t1(t,e,r)}}function zte(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new WOe),e.forEach(function(n){var i=rIe.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ep(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Uc=l.stateNode,Ap=!1;break e;case 3:Uc=l.stateNode.containerInfo,Ap=!0;break e;case 4:Uc=l.stateNode.containerInfo,Ap=!0;break e}l=l.return}if(Uc===null)throw Error(Ar(160));Rpe(s,o,i),Uc=null,Ap=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Fo(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dpe(e,t),e=e.sibling}function Dpe(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ep(e,t),b0(t),n&4){try{f4(3,t,t.return),kF(3,t)}catch(g){Fo(t,t.return,g)}try{f4(5,t,t.return)}catch(g){Fo(t,t.return,g)}}break;case 1:ep(e,t),b0(t),n&512&&r!==null&&FS(r,r.return);break;case 5:if(ep(e,t),b0(t),n&512&&r!==null&&FS(r,r.return),t.flags&32){var i=t.stateNode;try{J4(i,"")}catch(g){Fo(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&nme(i,s),Cz(l,o);var u=Cz(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?lme(i,h):d==="dangerouslySetInnerHTML"?ame(i,h):d==="children"?J4(i,h):VK(i,d,h,u)}switch(l){case"input":Nz(i,s);break;case"textarea":ime(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?aE(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?aE(i,!!s.multiple,s.defaultValue,!0):aE(i,!!s.multiple,s.multiple?[]:"",!1))}i[l3]=s}catch(g){Fo(t,t.return,g)}}break;case 6:if(ep(e,t),b0(t),n&4){if(t.stateNode===null)throw Error(Ar(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Fo(t,t.return,g)}}break;case 3:if(ep(e,t),b0(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{n3(e.containerInfo)}catch(g){Fo(t,t.return,g)}break;case 4:ep(e,t),b0(t);break;case 13:ep(e,t),b0(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_X=rl())),n&4&&zte(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Mu=(u=Mu)||d,ep(e,t),Mu=u):ep(e,t),b0(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(an=t,d=t.child;d!==null;){for(h=an=d;an!==null;){switch(f=an,m=f.child,f.tag){case 0:case 11:case 14:case 15:f4(4,f,f.return);break;case 1:FS(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){Fo(n,r,g)}}break;case 5:FS(f,f.return);break;case 22:if(f.memoizedState!==null){qte(h);continue}}m!==null?(m.return=f,an=m):qte(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ome("display",o))}catch(g){Fo(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Fo(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ep(e,t),b0(t),n&4&&zte(t);break;case 21:break;default:ep(e,t),b0(t)}}function b0(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ipe(r)){var n=r;break e}r=r.return}throw Error(Ar(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(J4(i,""),n.flags&=-33);var s=Ute(t);iV(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ute(t);nV(t,l,o);break;default:throw Error(Ar(161))}}catch(c){Fo(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KOe(t,e,r){an=t,Mpe(t)}function Mpe(t,e,r){for(var n=(t.mode&1)!==0;an!==null;){var i=an,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||jR;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Mu;l=jR;var u=Mu;if(jR=o,(Mu=c)&&!u)for(an=i;an!==null;)o=an,c=o.child,o.tag===22&&o.memoizedState!==null?Hte(i):c!==null?(c.return=o,an=c):Hte(i);for(;s!==null;)an=s,Mpe(s),s=s.sibling;an=i,jR=l,Mu=u}Vte(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,an=s):Vte(t)}}function Vte(t){for(;an!==null;){var e=an;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mu||kF(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Mu)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:dp(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ate(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ate(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&n3(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ar(163))}Mu||e.flags&512&&rV(e)}catch(f){Fo(e,e.return,f)}}if(e===t){an=null;break}if(r=e.sibling,r!==null){r.return=e.return,an=r;break}an=e.return}}function qte(t){for(;an!==null;){var e=an;if(e===t){an=null;break}var r=e.sibling;if(r!==null){r.return=e.return,an=r;break}an=e.return}}function Hte(t){for(;an!==null;){var e=an;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{kF(4,e)}catch(c){Fo(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Fo(e,i,c)}}var s=e.return;try{rV(e)}catch(c){Fo(e,s,c)}break;case 5:var o=e.return;try{rV(e)}catch(c){Fo(e,o,c)}}}catch(c){Fo(e,e.return,c)}if(e===t){an=null;break}var l=e.sibling;if(l!==null){l.return=e.return,an=l;break}an=e.return}}var XOe=Math.ceil,EM=Lv.ReactCurrentDispatcher,bX=Lv.ReactCurrentOwner,jm=Lv.ReactCurrentBatchConfig,ss=0,xc=null,gl=null,tu=0,cf=0,BS=Fb(0),Xl=0,m3=null,I_=0,OF=0,wX=0,m4=null,ih=null,_X=0,_A=1/0,lx=null,jM=!1,sV=null,Yy=null,AR=!1,Ry=null,AM=0,p4=0,aV=null,n6=-1,i6=0;function Ad(){return ss&6?rl():n6!==-1?n6:n6=rl()}function Zy(t){return t.mode&1?ss&2&&tu!==0?tu&-tu:OOe.transition!==null?(i6===0&&(i6=bme()),i6):(t=Vs,t!==0||(t=window.event,t=t===void 0?16:Ame(t.type)),t):1}function qp(t,e,r,n){if(50<p4)throw p4=0,aV=null,Error(Ar(185));VO(t,r,n),(!(ss&2)||t!==xc)&&(t===xc&&(!(ss&2)&&(OF|=r),Xl===4&&N1(t,tu)),fh(t,n),r===1&&ss===0&&!(e.mode&1)&&(_A=rl()+500,CF&&Bb()))}function fh(t,e){var r=t.callbackNode;Oke(t,e);var n=uM(t,t===xc?tu:0);if(n===0)r!==null&&ete(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&ete(r),e===1)t.tag===0?kOe(Wte.bind(null,t)):Wme(Wte.bind(null,t)),AOe(function(){!(ss&6)&&Bb()}),r=null;else{switch(wme(n)){case 1:r=KK;break;case 4:r=vme;break;case 16:r=cM;break;case 536870912:r=yme;break;default:r=cM}r=qpe(r,Lpe.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Lpe(t,e){if(n6=-1,i6=0,ss&6)throw Error(Ar(327));var r=t.callbackNode;if(dE()&&t.callbackNode!==r)return null;var n=uM(t,t===xc?tu:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=CM(t,n);else{e=n;var i=ss;ss|=2;var s=Bpe();(xc!==t||tu!==e)&&(lx=null,_A=rl()+500,x_(t,e));do try{QOe();break}catch(l){Fpe(t,l)}while(!0);oX(),EM.current=s,ss=i,gl!==null?e=0:(xc=null,tu=0,e=Xl)}if(e!==0){if(e===2&&(i=Iz(t),i!==0&&(n=i,e=oV(t,i))),e===1)throw r=m3,x_(t,0),N1(t,n),fh(t,rl()),r;if(e===6)N1(t,n);else{if(i=t.current.alternate,!(n&30)&&!YOe(i)&&(e=CM(t,n),e===2&&(s=Iz(t),s!==0&&(n=s,e=oV(t,s))),e===1))throw r=m3,x_(t,0),N1(t,n),fh(t,rl()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Ar(345));case 2:pw(t,ih,lx);break;case 3:if(N1(t,n),(n&130023424)===n&&(e=_X+500-rl(),10<e)){if(uM(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Ad(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uz(pw.bind(null,t,ih,lx),e);break}pw(t,ih,lx);break;case 4:if(N1(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Vp(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=rl()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*XOe(n/1960))-n,10<n){t.timeoutHandle=Uz(pw.bind(null,t,ih,lx),n);break}pw(t,ih,lx);break;case 5:pw(t,ih,lx);break;default:throw Error(Ar(329))}}}return fh(t,rl()),t.callbackNode===r?Lpe.bind(null,t):null}function oV(t,e){var r=m4;return t.current.memoizedState.isDehydrated&&(x_(t,e).flags|=256),t=CM(t,e),t!==2&&(e=ih,ih=r,e!==null&&lV(e)),t}function lV(t){ih===null?ih=t:ih.push.apply(ih,t)}function YOe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Qp(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function N1(t,e){for(e&=~wX,e&=~OF,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vp(e),n=1<<r;t[r]=-1,e&=~n}}function Wte(t){if(ss&6)throw Error(Ar(327));dE();var e=uM(t,0);if(!(e&1))return fh(t,rl()),null;var r=CM(t,e);if(t.tag!==0&&r===2){var n=Iz(t);n!==0&&(e=n,r=oV(t,n))}if(r===1)throw r=m3,x_(t,0),N1(t,e),fh(t,rl()),r;if(r===6)throw Error(Ar(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pw(t,ih,lx),fh(t,rl()),null}function NX(t,e){var r=ss;ss|=1;try{return t(e)}finally{ss=r,ss===0&&(_A=rl()+500,CF&&Bb())}}function R_(t){Ry!==null&&Ry.tag===0&&!(ss&6)&&dE();var e=ss;ss|=1;var r=jm.transition,n=Vs;try{if(jm.transition=null,Vs=1,t)return t()}finally{Vs=n,jm.transition=r,ss=e,!(ss&6)&&Bb()}}function SX(){cf=BS.current,Da(BS)}function x_(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,jOe(r)),gl!==null)for(r=gl.return;r!==null;){var n=r;switch(iX(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&pM();break;case 3:bA(),Da(dh),Da(Ku),fX();break;case 5:hX(n);break;case 4:bA();break;case 13:Da(fo);break;case 19:Da(fo);break;case 10:lX(n.type._context);break;case 22:case 23:SX()}r=r.return}if(xc=t,gl=t=Qy(t.current,null),tu=cf=e,Xl=0,m3=null,wX=OF=I_=0,ih=m4=null,Dw!==null){for(e=0;e<Dw.length;e++)if(r=Dw[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Dw=null}return t}function Fpe(t,e){do{var r=gl;try{if(oX(),e6.current=SM,NM){for(var n=xo.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}NM=!1}if(O_=0,uc=ql=xo=null,h4=!1,d3=0,bX.current=null,r===null||r.return===null){Xl=1,m3=e,gl=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=tu,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Ite(o);if(m!==null){m.flags&=-257,Rte(m,o,l,s,e),m.mode&1&&Ote(s,u,e),e=m,c=u;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){Ote(s,u,e),EX();break e}c=Error(Ar(426))}}else if(Ka&&l.mode&1){var y=Ite(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Rte(y,o,l,s,e),sX(wA(c,l));break e}}s=c=wA(c,l),Xl!==4&&(Xl=2),m4===null?m4=[s]:m4.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=wpe(s,c,e);jte(s,w);break e;case 1:l=c;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Yy===null||!Yy.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=_pe(s,l,e);jte(s,j);break e}}s=s.return}while(s!==null)}Upe(r)}catch(T){e=T,gl===r&&r!==null&&(gl=r=r.return);continue}break}while(!0)}function Bpe(){var t=EM.current;return EM.current=SM,t===null?SM:t}function EX(){(Xl===0||Xl===3||Xl===2)&&(Xl=4),xc===null||!(I_&268435455)&&!(OF&268435455)||N1(xc,tu)}function CM(t,e){var r=ss;ss|=2;var n=Bpe();(xc!==t||tu!==e)&&(lx=null,x_(t,e));do try{ZOe();break}catch(i){Fpe(t,i)}while(!0);if(oX(),ss=r,EM.current=n,gl!==null)throw Error(Ar(261));return xc=null,tu=0,Xl}function ZOe(){for(;gl!==null;)$pe(gl)}function QOe(){for(;gl!==null&&!Nke();)$pe(gl)}function $pe(t){var e=Vpe(t.alternate,t,cf);t.memoizedProps=t.pendingProps,e===null?Upe(t):gl=e,bX.current=null}function Upe(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=HOe(r,e),r!==null){r.flags&=32767,gl=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xl=6,gl=null;return}}else if(r=qOe(r,e,cf),r!==null){gl=r;return}if(e=e.sibling,e!==null){gl=e;return}gl=e=t}while(e!==null);Xl===0&&(Xl=5)}function pw(t,e,r){var n=Vs,i=jm.transition;try{jm.transition=null,Vs=1,JOe(t,e,r,n)}finally{jm.transition=i,Vs=n}return null}function JOe(t,e,r,n){do dE();while(Ry!==null);if(ss&6)throw Error(Ar(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ar(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Ike(t,s),t===xc&&(gl=xc=null,tu=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||AR||(AR=!0,qpe(cM,function(){return dE(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=jm.transition,jm.transition=null;var o=Vs;Vs=1;var l=ss;ss|=4,bX.current=null,GOe(t,r),Dpe(r,t),yOe(Bz),dM=!!Fz,Bz=Fz=null,t.current=r,KOe(r),Ske(),ss=l,Vs=o,jm.transition=s}else t.current=r;if(AR&&(AR=!1,Ry=t,AM=i),s=t.pendingLanes,s===0&&(Yy=null),Ake(r.stateNode),fh(t,rl()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jM)throw jM=!1,t=sV,sV=null,t;return AM&1&&t.tag!==0&&dE(),s=t.pendingLanes,s&1?t===aV?p4++:(p4=0,aV=t):p4=0,Bb(),null}function dE(){if(Ry!==null){var t=wme(AM),e=jm.transition,r=Vs;try{if(jm.transition=null,Vs=16>t?16:t,Ry===null)var n=!1;else{if(t=Ry,Ry=null,AM=0,ss&6)throw Error(Ar(331));var i=ss;for(ss|=4,an=t.current;an!==null;){var s=an,o=s.child;if(an.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(an=u;an!==null;){var d=an;switch(d.tag){case 0:case 11:case 15:f4(8,d,s)}var h=d.child;if(h!==null)h.return=d,an=h;else for(;an!==null;){d=an;var f=d.sibling,m=d.return;if(Ope(d),d===u){an=null;break}if(f!==null){f.return=m,an=f;break}an=m}}}var x=s.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}an=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,an=o;else e:for(;an!==null;){if(s=an,s.flags&2048)switch(s.tag){case 0:case 11:case 15:f4(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,an=w;break e}an=s.return}}var S=t.current;for(an=S;an!==null;){o=an;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,an=E;else e:for(o=S;an!==null;){if(l=an,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kF(9,l)}}catch(T){Fo(l,l.return,T)}if(l===o){an=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,an=j;break e}an=l.return}}if(ss=i,Bb(),yg&&typeof yg.onPostCommitFiberRoot=="function")try{yg.onPostCommitFiberRoot(NF,t)}catch{}n=!0}return n}finally{Vs=r,jm.transition=e}}return!1}function Gte(t,e,r){e=wA(r,e),e=wpe(t,e,1),t=Xy(t,e,1),e=Ad(),t!==null&&(VO(t,1,e),fh(t,e))}function Fo(t,e,r){if(t.tag===3)Gte(t,t,r);else for(;e!==null;){if(e.tag===3){Gte(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Yy===null||!Yy.has(n))){t=wA(r,t),t=_pe(e,t,1),e=Xy(e,t,1),t=Ad(),e!==null&&(VO(e,1,t),fh(e,t));break}}e=e.return}}function eIe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ad(),t.pingedLanes|=t.suspendedLanes&r,xc===t&&(tu&r)===r&&(Xl===4||Xl===3&&(tu&130023424)===tu&&500>rl()-_X?x_(t,0):wX|=r),fh(t,e)}function zpe(t,e){e===0&&(t.mode&1?(e=xR,xR<<=1,!(xR&130023424)&&(xR=4194304)):e=1);var r=Ad();t=vv(t,e),t!==null&&(VO(t,e,r),fh(t,r))}function tIe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),zpe(t,r)}function rIe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ar(314))}n!==null&&n.delete(e),zpe(t,r)}var Vpe;Vpe=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||dh.current)sh=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return sh=!1,VOe(t,e,r);sh=!!(t.flags&131072)}else sh=!1,Ka&&e.flags&1048576&&Gme(e,vM,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;r6(t,e),t=e.pendingProps;var i=xA(e,Ku.current);uE(e,r),i=pX(null,e,n,t,i,r);var s=gX();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hh(n)?(s=!0,gM(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uX(e),i.updater=PF,e.stateNode=i,i._reactInternals=e,Kz(e,n,t,r),e=Zz(null,e,n,!0,s,r)):(e.tag=0,Ka&&s&&nX(e),fd(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(r6(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=iIe(n),t=dp(n,t),i){case 0:e=Yz(null,e,n,t,r);break e;case 1:e=Lte(null,e,n,t,r);break e;case 11:e=Dte(null,e,n,t,r);break e;case 14:e=Mte(null,e,n,dp(n.type,t),r);break e}throw Error(Ar(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dp(n,i),Yz(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dp(n,i),Lte(t,e,n,i,r);case 3:e:{if(jpe(e),t===null)throw Error(Ar(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Jme(t,e),wM(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wA(Error(Ar(423)),e),e=Fte(t,e,n,r,i);break e}else if(n!==i){i=wA(Error(Ar(424)),e),e=Fte(t,e,n,r,i);break e}else for(wf=Ky(e.stateNode.containerInfo.firstChild),jf=e,Ka=!0,kp=null,r=Zme(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vA(),n===i){e=yv(t,e,r);break e}fd(t,e,n,r)}e=e.child}return e;case 5:return epe(e),t===null&&Hz(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$z(n,i)?o=null:s!==null&&$z(n,s)&&(e.flags|=32),Epe(t,e),fd(t,e,o,r),e.child;case 6:return t===null&&Hz(e),null;case 13:return Ape(t,e,r);case 4:return dX(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=yA(e,null,n,r):fd(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dp(n,i),Dte(t,e,n,i,r);case 7:return fd(t,e,e.pendingProps,r),e.child;case 8:return fd(t,e,e.pendingProps.children,r),e.child;case 12:return fd(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,va(yM,n._currentValue),n._currentValue=o,s!==null)if(Qp(s.value,o)){if(s.children===i.children&&!dh.current){e=yv(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=ov(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Wz(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ar(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Wz(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fd(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,uE(e,r),i=Om(i),n=n(i),e.flags|=1,fd(t,e,n,r),e.child;case 14:return n=e.type,i=dp(n,e.pendingProps),i=dp(n.type,i),Mte(t,e,n,i,r);case 15:return Npe(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dp(n,i),r6(t,e),e.tag=1,hh(n)?(t=!0,gM(e)):t=!1,uE(e,r),bpe(e,n,i),Kz(e,n,i,r),Zz(null,e,n,!0,t,r);case 19:return Cpe(t,e,r);case 22:return Spe(t,e,r)}throw Error(Ar(156,e.tag))};function qpe(t,e){return xme(t,e)}function nIe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wm(t,e,r,n){return new nIe(t,e,r,n)}function jX(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iIe(t){if(typeof t=="function")return jX(t)?1:0;if(t!=null){if(t=t.$$typeof,t===HK)return 11;if(t===WK)return 14}return 2}function Qy(t,e){var r=t.alternate;return r===null?(r=wm(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function s6(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")jX(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case TS:return v_(r.children,i,s,e);case qK:o=8,i|=8;break;case vz:return t=wm(12,r,e,i|2),t.elementType=vz,t.lanes=s,t;case yz:return t=wm(13,r,e,i),t.elementType=yz,t.lanes=s,t;case bz:return t=wm(19,r,e,i),t.elementType=bz,t.lanes=s,t;case eme:return IF(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qfe:o=10;break e;case Jfe:o=9;break e;case HK:o=11;break e;case WK:o=14;break e;case g1:o=16,n=null;break e}throw Error(Ar(130,t==null?t:typeof t,""))}return e=wm(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function v_(t,e,r,n){return t=wm(7,t,n,e),t.lanes=r,t}function IF(t,e,r,n){return t=wm(22,t,n,e),t.elementType=eme,t.lanes=r,t.stateNode={isHidden:!1},t}function M9(t,e,r){return t=wm(6,t,null,e),t.lanes=r,t}function L9(t,e,r){return e=wm(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sIe(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x9(0),this.expirationTimes=x9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x9(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function AX(t,e,r,n,i,s,o,l,c){return t=new sIe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wm(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uX(s),t}function aIe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:CS,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Hpe(t){if(!t)return xb;t=t._reactInternals;e:{if(lN(t)!==t||t.tag!==1)throw Error(Ar(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hh(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ar(171))}if(t.tag===1){var r=t.type;if(hh(r))return Hme(t,r,e)}return e}function Wpe(t,e,r,n,i,s,o,l,c){return t=AX(r,n,!0,t,i,s,o,l,c),t.context=Hpe(null),r=t.current,n=Ad(),i=Zy(r),s=ov(n,i),s.callback=e??null,Xy(r,s,i),t.current.lanes=i,VO(t,i,n),fh(t,n),t}function RF(t,e,r,n){var i=e.current,s=Ad(),o=Zy(i);return r=Hpe(r),e.context===null?e.context=r:e.pendingContext=r,e=ov(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xy(i,e,o),t!==null&&(qp(t,i,o,s),JD(t,i,o)),o}function TM(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kte(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function CX(t,e){Kte(t,e),(t=t.alternate)&&Kte(t,e)}function oIe(){return null}var Gpe=typeof reportError=="function"?reportError:function(t){console.error(t)};function TX(t){this._internalRoot=t}DF.prototype.render=TX.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ar(409));RF(t,e,null,null)};DF.prototype.unmount=TX.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;R_(function(){RF(null,t,null,null)}),e[xv]=null}};function DF(t){this._internalRoot=t}DF.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sme();t={blockedOn:null,target:t,priority:e};for(var r=0;r<_1.length&&e!==0&&e<_1[r].priority;r++);_1.splice(r,0,t),r===0&&jme(t)}};function PX(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function MF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xte(){}function lIe(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=TM(o);s.call(u)}}var o=Wpe(e,n,t,0,null,!1,!1,"",Xte);return t._reactRootContainer=o,t[xv]=o.current,a3(t.nodeType===8?t.parentNode:t),R_(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=TM(c);l.call(u)}}var c=AX(t,0,!1,null,null,!1,!1,"",Xte);return t._reactRootContainer=c,t[xv]=c.current,a3(t.nodeType===8?t.parentNode:t),R_(function(){RF(e,c,r,n)}),c}function LF(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=TM(o);l.call(c)}}RF(e,o,t,i)}else o=lIe(r,e,t,i,n);return TM(o)}_me=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=CT(e.pendingLanes);r!==0&&(XK(e,r|1),fh(e,rl()),!(ss&6)&&(_A=rl()+500,Bb()))}break;case 13:R_(function(){var n=vv(t,1);if(n!==null){var i=Ad();qp(n,t,1,i)}}),CX(t,1)}};YK=function(t){if(t.tag===13){var e=vv(t,134217728);if(e!==null){var r=Ad();qp(e,t,134217728,r)}CX(t,134217728)}};Nme=function(t){if(t.tag===13){var e=Zy(t),r=vv(t,e);if(r!==null){var n=Ad();qp(r,t,e,n)}CX(t,e)}};Sme=function(){return Vs};Eme=function(t,e){var r=Vs;try{return Vs=t,e()}finally{Vs=r}};Pz=function(t,e,r){switch(e){case"input":if(Nz(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=AF(n);if(!i)throw Error(Ar(90));rme(n),Nz(n,i)}}}break;case"textarea":ime(t,r);break;case"select":e=r.value,e!=null&&aE(t,!!r.multiple,e,!1)}};dme=NX;hme=R_;var cIe={usingClientEntryPoint:!1,Events:[HO,IS,AF,cme,ume,NX]},G5={findFiberByHostInstance:Rw,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uIe={bundleType:G5.bundleType,version:G5.version,rendererPackageName:G5.rendererPackageName,rendererConfig:G5.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lv.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pme(t),t===null?null:t.stateNode},findFiberByHostInstance:G5.findFiberByHostInstance||oIe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CR.isDisabled&&CR.supportsFiber)try{NF=CR.inject(uIe),yg=CR}catch{}}Mf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cIe;Mf.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PX(e))throw Error(Ar(200));return aIe(t,e,null,r)};Mf.createRoot=function(t,e){if(!PX(t))throw Error(Ar(299));var r=!1,n="",i=Gpe;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=AX(t,1,!1,null,null,r,!1,n,i),t[xv]=e.current,a3(t.nodeType===8?t.parentNode:t),new TX(e)};Mf.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ar(188)):(t=Object.keys(t).join(","),Error(Ar(268,t)));return t=pme(e),t=t===null?null:t.stateNode,t};Mf.flushSync=function(t){return R_(t)};Mf.hydrate=function(t,e,r){if(!MF(e))throw Error(Ar(200));return LF(null,t,e,!0,r)};Mf.hydrateRoot=function(t,e,r){if(!PX(t))throw Error(Ar(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Gpe;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Wpe(e,null,t,1,r??null,i,!1,s,o),t[xv]=e.current,a3(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new DF(e)};Mf.render=function(t,e,r){if(!MF(e))throw Error(Ar(200));return LF(null,t,e,!1,r)};Mf.unmountComponentAtNode=function(t){if(!MF(t))throw Error(Ar(40));return t._reactRootContainer?(R_(function(){LF(null,null,t,!1,function(){t._reactRootContainer=null,t[xv]=null})}),!0):!1};Mf.unstable_batchedUpdates=NX;Mf.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!MF(r))throw Error(Ar(200));if(t==null||t._reactInternals===void 0)throw Error(Ar(38));return LF(t,e,r,!1,n)};Mf.version="18.3.1-next-f1338f8080-20240426";function Kpe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kpe)}catch(t){console.error(t)}}Kpe(),Kfe.exports=Mf;var Hp=Kfe.exports;const hE=Vi(Hp);var Xpe,Yte=Hp;Xpe=Yte.createRoot,Yte.hydrateRoot;const dIe=1,hIe=1e6;let F9=0;function fIe(){return F9=(F9+1)%Number.MAX_SAFE_INTEGER,F9.toString()}const B9=new Map,Zte=t=>{if(B9.has(t))return;const e=setTimeout(()=>{B9.delete(t),g4({type:"REMOVE_TOAST",toastId:t})},hIe);B9.set(t,e)},mIe=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,dIe)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Zte(r):t.toasts.forEach(n=>{Zte(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},a6=[];let o6={toasts:[]};function g4(t){o6=mIe(o6,t),a6.forEach(e=>{e(o6)})}function pIe({...t}){const e=fIe(),r=i=>g4({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>g4({type:"DISMISS_TOAST",toastId:e});return g4({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function Qi(){const[t,e]=C.useState(o6);return C.useEffect(()=>(a6.push(e),()=>{const r=a6.indexOf(e);r>-1&&a6.splice(r,1)}),[t]),{...t,toast:pIe,dismiss:r=>g4({type:"DISMISS_TOAST",toastId:r})}}function wr(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Qte(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function bv(...t){return e=>{let r=!1;const n=t.map(i=>{const s=Qte(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():Qte(t[i],null)}}}}function An(...t){return C.useCallback(bv(...t),t)}function gIe(t,e){const r=C.createContext(e),n=s=>{const{children:o,...l}=s,c=C.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function i(s){const o=C.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[n,i]}function qo(t,e=[]){let r=[];function n(s,o){const l=C.createContext(o),c=r.length;r=[...r,o];const u=h=>{var w;const{scope:f,children:m,...x}=h,g=((w=f==null?void 0:f[t])==null?void 0:w[c])||l,y=C.useMemo(()=>x,Object.values(x));return a.jsx(g.Provider,{value:y,children:m})};u.displayName=s+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,x=C.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=r.map(o=>C.createContext(o));return function(l){const c=(l==null?void 0:l[t])||s;return C.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,xIe(i,...e)]}function xIe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(s)[`__scope${u}`];return{...l,...h}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function vb(t){const e=yIe(t),r=C.forwardRef((n,i)=>{const{children:s,...o}=n,l=C.Children.toArray(s),c=l.find(bIe);if(c){const u=c.props.children,d=l.map(h=>h===c?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...o,ref:i,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:i,children:s})});return r.displayName=`${t}.Slot`,r}var vIe=vb("Slot");function yIe(t){const e=C.forwardRef((r,n)=>{const{children:i,...s}=r;if(C.isValidElement(i)){const o=_Ie(i),l=wIe(s,i.props);return i.type!==C.Fragment&&(l.ref=n?bv(n,o):o),C.cloneElement(i,l)}return C.Children.count(i)>1?C.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ype=Symbol("radix.slottable");function Zpe(t){const e=({children:r})=>a.jsx(a.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Ype,e}function bIe(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ype}function wIe(t,e){const r={...e};for(const n in e){const i=t[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...l)=>{const c=s(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...t,...r}}function _Ie(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function IC(t){const e=t+"CollectionProvider",[r,n]=qo(e),[i,s]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:w}=g,S=be.useRef(null),E=be.useRef(new Map).current;return a.jsx(i,{scope:y,itemMap:E,collectionRef:S,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=vb(l),u=be.forwardRef((g,y)=>{const{scope:w,children:S}=g,E=s(l,w),j=An(y,E.collectionRef);return a.jsx(c,{ref:j,children:S})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=vb(d),m=be.forwardRef((g,y)=>{const{scope:w,children:S,...E}=g,j=be.useRef(null),T=An(y,j),O=s(d,w);return be.useEffect(()=>(O.itemMap.set(j,{ref:j,...E}),()=>void O.itemMap.delete(j))),a.jsx(f,{[h]:"",ref:T,children:S})});m.displayName=d;function x(g){const y=s(t+"CollectionConsumer",g);return be.useCallback(()=>{const S=y.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((O,I)=>E.indexOf(O.ref.current)-E.indexOf(I.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},x,n]}var NIe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dr=NIe.reduce((t,e)=>{const r=vb(`Primitive.${e}`),n=C.forwardRef((i,s)=>{const{asChild:o,...l}=i,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function kX(t,e){t&&Hp.flushSync(()=>t.dispatchEvent(e))}function Uo(t){const e=C.useRef(t);return C.useEffect(()=>{e.current=t}),C.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function SIe(t,e=globalThis==null?void 0:globalThis.document){const r=Uo(t);C.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var EIe="DismissableLayer",cV="dismissableLayer.update",jIe="dismissableLayer.pointerDownOutside",AIe="dismissableLayer.focusOutside",Jte,Qpe=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cN=C.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=t,u=C.useContext(Qpe),[d,h]=C.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=C.useState({}),x=An(e,I=>h(I)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(y),S=d?g.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,j=S>=w,T=TIe(I=>{const M=I.target,D=[...u.branches].some(z=>z.contains(M));!j||D||(i==null||i(I),o==null||o(I),I.defaultPrevented||l==null||l())},f),O=PIe(I=>{const M=I.target;[...u.branches].some(z=>z.contains(M))||(s==null||s(I),o==null||o(I),I.defaultPrevented||l==null||l())},f);return SIe(I=>{S===u.layers.size-1&&(n==null||n(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},f),C.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Jte=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ere(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Jte)}},[d,f,r,u]),C.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ere())},[d,u]),C.useEffect(()=>{const I=()=>m({});return document.addEventListener(cV,I),()=>document.removeEventListener(cV,I)},[]),a.jsx(Dr.div,{...c,ref:x,style:{pointerEvents:E?j?"auto":"none":void 0,...t.style},onFocusCapture:wr(t.onFocusCapture,O.onFocusCapture),onBlurCapture:wr(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:wr(t.onPointerDownCapture,T.onPointerDownCapture)})});cN.displayName=EIe;var CIe="DismissableLayerBranch",Jpe=C.forwardRef((t,e)=>{const r=C.useContext(Qpe),n=C.useRef(null),i=An(e,n);return C.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),a.jsx(Dr.div,{...t,ref:i})});Jpe.displayName=CIe;function TIe(t,e=globalThis==null?void 0:globalThis.document){const r=Uo(t),n=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let c=function(){e0e(jIe,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function PIe(t,e=globalThis==null?void 0:globalThis.document){const r=Uo(t),n=C.useRef(!1);return C.useEffect(()=>{const i=s=>{s.target&&!n.current&&e0e(AIe,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ere(){const t=new CustomEvent(cV);document.dispatchEvent(t)}function e0e(t,e,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?kX(i,s):i.dispatchEvent(s)}var kIe=cN,OIe=Jpe,Vo=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},IIe="Portal",RC=C.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[i,s]=C.useState(!1);Vo(()=>s(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?hE.createPortal(a.jsx(Dr.div,{...n,ref:e}),o):null});RC.displayName=IIe;function RIe(t,e){return C.useReducer((r,n)=>e[r][n]??r,t)}var El=t=>{const{present:e,children:r}=t,n=DIe(e),i=typeof r=="function"?r({present:n.isPresent}):C.Children.only(r),s=An(n.ref,MIe(i));return typeof r=="function"||n.isPresent?C.cloneElement(i,{ref:s}):null};El.displayName="Presence";function DIe(t){const[e,r]=C.useState(),n=C.useRef(null),i=C.useRef(t),s=C.useRef("none"),o=t?"mounted":"unmounted",[l,c]=RIe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=TR(n.current);s.current=l==="mounted"?u:"none"},[l]),Vo(()=>{const u=n.current,d=i.current;if(d!==t){const f=s.current,m=TR(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Vo(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=TR(n.current).includes(m.animationName);if(m.target===e&&g&&(c("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(s.current=TR(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:C.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function TR(t){return(t==null?void 0:t.animationName)||"none"}function MIe(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var LIe=$K[" useInsertionEffect ".trim().toString()]||Vo;function Xu({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,s,o]=FIe({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:i;{const d=C.useRef(t!==void 0);C.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=C.useCallback(d=>{var h;if(l){const f=BIe(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else s(d)},[l,t,s,o]);return[c,u]}function FIe({defaultProp:t,onChange:e}){const[r,n]=C.useState(t),i=C.useRef(r),s=C.useRef(e);return LIe(()=>{s.current=e},[e]),C.useEffect(()=>{var o;i.current!==r&&((o=s.current)==null||o.call(s,r),i.current=r)},[r,i]),[r,n,s]}function BIe(t){return typeof t=="function"}var t0e=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$Ie="VisuallyHidden",FF=C.forwardRef((t,e)=>a.jsx(Dr.span,{...t,ref:e,style:{...t0e,...t.style}}));FF.displayName=$Ie;var UIe=FF,OX="ToastProvider",[IX,zIe,VIe]=IC("Toast"),[r0e,Z9t]=qo("Toast",[VIe]),[qIe,BF]=r0e(OX),n0e=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[l,c]=C.useState(null),[u,d]=C.useState(0),h=C.useRef(!1),f=C.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${OX}\`. Expected non-empty \`string\`.`),a.jsx(IX.Provider,{scope:e,children:a.jsx(qIe,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:C.useCallback(()=>d(m=>m+1),[]),onToastRemove:C.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};n0e.displayName=OX;var i0e="ToastViewport",HIe=["F8"],uV="toast.viewportPause",dV="toast.viewportResume",s0e=C.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=HIe,label:i="Notifications ({hotkey})",...s}=t,o=BF(i0e,r),l=zIe(r),c=C.useRef(null),u=C.useRef(null),d=C.useRef(null),h=C.useRef(null),f=An(e,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;C.useEffect(()=>{const y=w=>{var E;n.length!==0&&n.every(j=>w[j]||w.code===j)&&((E=h.current)==null||E.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),C.useEffect(()=>{const y=c.current,w=h.current;if(x&&y&&w){const S=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(uV);w.dispatchEvent(O),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(dV);w.dispatchEvent(O),o.isClosePausedRef.current=!1}},j=O=>{!y.contains(O.relatedTarget)&&E()},T=()=>{y.contains(document.activeElement)||E()};return y.addEventListener("focusin",S),y.addEventListener("focusout",j),y.addEventListener("pointermove",S),y.addEventListener("pointerleave",T),window.addEventListener("blur",S),window.addEventListener("focus",E),()=>{y.removeEventListener("focusin",S),y.removeEventListener("focusout",j),y.removeEventListener("pointermove",S),y.removeEventListener("pointerleave",T),window.removeEventListener("blur",S),window.removeEventListener("focus",E)}}},[x,o.isClosePausedRef]);const g=C.useCallback(({tabbingDirection:y})=>{const S=l().map(E=>{const j=E.ref.current,T=[j,...iRe(j)];return y==="forwards"?T:T.reverse()});return(y==="forwards"?S.reverse():S).flat()},[l]);return C.useEffect(()=>{const y=h.current;if(y){const w=S=>{var T,O,I;const E=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!E){const M=document.activeElement,D=S.shiftKey;if(S.target===y&&D){(T=u.current)==null||T.focus();return}const q=g({tabbingDirection:D?"backwards":"forwards"}),Q=q.findIndex(re=>re===M);$9(q.slice(Q+1))?S.preventDefault():D?(O=u.current)==null||O.focus():(I=d.current)==null||I.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[l,g]),a.jsxs(OIe,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&a.jsx(hV,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});$9(y)}}),a.jsx(IX.Slot,{scope:r,children:a.jsx(Dr.ol,{tabIndex:-1,...s,ref:f})}),x&&a.jsx(hV,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});$9(y)}})]})});s0e.displayName=i0e;var a0e="ToastFocusProxy",hV=C.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,s=BF(a0e,r);return a.jsx(FF,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&n()}})});hV.displayName=a0e;var GO="Toast",WIe="toast.swipeStart",GIe="toast.swipeMove",KIe="toast.swipeCancel",XIe="toast.swipeEnd",o0e=C.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...o}=t,[l,c]=Xu({prop:n,defaultProp:i??!0,onChange:s,caller:GO});return a.jsx(El,{present:r||l,children:a.jsx(QIe,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Uo(t.onPause),onResume:Uo(t.onResume),onSwipeStart:wr(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:wr(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:wr(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:wr(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});o0e.displayName=GO;var[YIe,ZIe]=r0e(GO,{onClose(){}}),QIe=C.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...x}=t,g=BF(GO,r),[y,w]=C.useState(null),S=An(e,re=>w(re)),E=C.useRef(null),j=C.useRef(null),T=i||g.duration,O=C.useRef(0),I=C.useRef(T),M=C.useRef(0),{onToastAdd:D,onToastRemove:z}=g,F=Uo(()=>{var Z;(y==null?void 0:y.contains(document.activeElement))&&((Z=g.viewport)==null||Z.focus()),o()}),q=C.useCallback(re=>{!re||re===1/0||(window.clearTimeout(M.current),O.current=new Date().getTime(),M.current=window.setTimeout(F,re))},[F]);C.useEffect(()=>{const re=g.viewport;if(re){const Z=()=>{q(I.current),u==null||u()},se=()=>{const K=new Date().getTime()-O.current;I.current=I.current-K,window.clearTimeout(M.current),c==null||c()};return re.addEventListener(uV,se),re.addEventListener(dV,Z),()=>{re.removeEventListener(uV,se),re.removeEventListener(dV,Z)}}},[g.viewport,T,c,u,q]),C.useEffect(()=>{s&&!g.isClosePausedRef.current&&q(T)},[s,T,g.isClosePausedRef,q]),C.useEffect(()=>(D(),()=>z()),[D,z]);const Q=C.useMemo(()=>y?m0e(y):null,[y]);return g.viewport?a.jsxs(a.Fragment,{children:[Q&&a.jsx(JIe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Q}),a.jsx(YIe,{scope:r,onClose:F,children:Hp.createPortal(a.jsx(IX.ItemSlot,{scope:r,children:a.jsx(kIe,{asChild:!0,onEscapeKeyDown:wr(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Dr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:wr(t.onKeyDown,re=>{re.key==="Escape"&&(l==null||l(re.nativeEvent),re.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:wr(t.onPointerDown,re=>{re.button===0&&(E.current={x:re.clientX,y:re.clientY})}),onPointerMove:wr(t.onPointerMove,re=>{if(!E.current)return;const Z=re.clientX-E.current.x,se=re.clientY-E.current.y,K=!!j.current,X=["left","right"].includes(g.swipeDirection),Y=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,oe=X?Y(0,Z):0,xe=X?0:Y(0,se),H=re.pointerType==="touch"?10:2,J={x:oe,y:xe},ie={originalEvent:re,delta:J};K?(j.current=J,PR(GIe,h,ie,{discrete:!1})):tre(J,g.swipeDirection,H)?(j.current=J,PR(WIe,d,ie,{discrete:!1}),re.target.setPointerCapture(re.pointerId)):(Math.abs(Z)>H||Math.abs(se)>H)&&(E.current=null)}),onPointerUp:wr(t.onPointerUp,re=>{const Z=j.current,se=re.target;if(se.hasPointerCapture(re.pointerId)&&se.releasePointerCapture(re.pointerId),j.current=null,E.current=null,Z){const K=re.currentTarget,X={originalEvent:re,delta:Z};tre(Z,g.swipeDirection,g.swipeThreshold)?PR(XIe,m,X,{discrete:!0}):PR(KIe,f,X,{discrete:!0}),K.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),JIe=t=>{const{__scopeToast:e,children:r,...n}=t,i=BF(GO,e),[s,o]=C.useState(!1),[l,c]=C.useState(!1);return rRe(()=>o(!0)),C.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(RC,{asChild:!0,children:a.jsx(FF,{...n,children:s&&a.jsxs(a.Fragment,{children:[i.label," ",r]})})})},eRe="ToastTitle",l0e=C.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(Dr.div,{...n,ref:e})});l0e.displayName=eRe;var tRe="ToastDescription",c0e=C.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(Dr.div,{...n,ref:e})});c0e.displayName=tRe;var u0e="ToastAction",d0e=C.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?a.jsx(f0e,{altText:r,asChild:!0,children:a.jsx(RX,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${u0e}\`. Expected non-empty \`string\`.`),null)});d0e.displayName=u0e;var h0e="ToastClose",RX=C.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=ZIe(h0e,r);return a.jsx(f0e,{asChild:!0,children:a.jsx(Dr.button,{type:"button",...n,ref:e,onClick:wr(t.onClick,i.onClose)})})});RX.displayName=h0e;var f0e=C.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return a.jsx(Dr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function m0e(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),nRe(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...m0e(n))}}),e}function PR(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?kX(i,s):i.dispatchEvent(s)}var tre=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),s=n>i;return e==="left"||e==="right"?s&&n>r:!s&&i>r};function rRe(t=()=>{}){const e=Uo(t);Vo(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function nRe(t){return t.nodeType===t.ELEMENT_NODE}function iRe(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function $9(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var sRe=n0e,p0e=s0e,g0e=o0e,x0e=l0e,v0e=c0e,y0e=d0e,b0e=RX;function w0e(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=w0e(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Gn(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=w0e(t))&&(n&&(n+=" "),n+=e);return n}const rre=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nre=Gn,DC=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return nre(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],h=s==null?void 0:s[u];if(d===null)return null;const f=rre(d)||rre(h);return i[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...s,...l}[g]):{...s,...l}[g]===y})?[...u,h,f]:u},[]);return nre(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aRe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_0e=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oRe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lRe=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...l},c)=>C.createElement("svg",{ref:c,...oRe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:_0e("lucide",i),...l},[...o.map(([u,d])=>C.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=(t,e)=>{const r=C.forwardRef(({className:n,...i},s)=>C.createElement(lRe,{ref:s,iconNode:e,className:_0e(`lucide-${aRe(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cRe=hr("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=hr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=hr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uRe=hr("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=hr("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dRe=hr("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hRe=hr("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=hr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=hr("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=hr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fRe=hr("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mRe=hr("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=hr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=hr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=hr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pRe=hr("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0e=hr("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gRe=hr("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=hr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=hr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0e=hr("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=hr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xRe=hr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=hr("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=hr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=hr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=hr("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=hr("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=hr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0e=hr("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=hr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0e=hr("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=hr("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=hr("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=hr("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=hr("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=hr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=hr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0e=hr("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0e=hr("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=hr("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=hr("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=hr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vRe=hr("FileChartColumnIncreasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=hr("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yRe=hr("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=hr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=hr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=hr("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=hr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=hr("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bRe=hr("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wRe=hr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=hr("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0e=hr("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=hr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Re=hr("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=hr("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NRe=hr("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=hr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SRe=hr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=hr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=hr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=hr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ERe=hr("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=hr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jRe=hr("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ARe=hr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CRe=hr("Navigation2",[["polygon",{points:"12 2 19 21 12 17 5 21 12 2",key:"x8c0qg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TRe=hr("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PRe=hr("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=hr("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kRe=hr("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=hr("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0e=hr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const are=hr("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=hr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=hr("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=hr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=hr("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=hr("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=hr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=hr("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=hr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=hr("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ORe=hr("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IRe=hr("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=hr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=hr("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=hr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=hr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=hr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=hr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=hr("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=hr("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=hr("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=hr("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=hr("TicketPercent",[["path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"1l48ns"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=hr("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=hr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RRe=hr("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0e=hr("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=hr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=hr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=hr("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=hr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=hr("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=hr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=hr("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=hr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=hr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=hr("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=hr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=hr("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),$X="-",DRe=t=>{const e=LRe(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split($X);return l[0]===""&&l.length!==1&&l.shift(),O0e(l,e)||MRe(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},O0e=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?O0e(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join($X);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},ure=/^\[(.+)\]$/,MRe=t=>{if(ure.test(t)){const e=ure.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},LRe=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return BRe(Object.entries(t.classGroups),r).forEach(([s,o])=>{gV(o,n,s,e)}),n},gV=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:dre(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(FRe(i)){gV(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{gV(o,dre(e,s),r,n)})})},dre=(t,e)=>{let r=t;return e.split($X).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},FRe=t=>t.isThemeGetter,BRe=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[r,i]}):t,$Re=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},I0e="!",URe=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===i&&(n||l.slice(y,y+s)===e)){c.push(l.slice(d,y)),d=y+s;continue}if(w==="/"){h=y;continue}}w==="["?u++:w==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(I0e),x=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},zRe=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},VRe=t=>({cache:$Re(t.cacheSize),parseClassName:URe(t),...DRe(t)}),qRe=/\s+/,HRe=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(qRe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let x=!!m,g=n(x?f.substring(0,m):f);if(!g){if(!x){l=u+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=u+(l.length>0?" "+l:l);continue}x=!1}const y=zRe(d).join(":"),w=h?y+I0e:y,S=w+g;if(s.includes(S))continue;s.push(S);const E=i(g,x);for(let j=0;j<E.length;++j){const T=E[j];s.push(w+T)}l=u+(l.length>0?" "+l:l)}return l};function WRe(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=R0e(e))&&(n&&(n+=" "),n+=r);return n}const R0e=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=R0e(t[n]))&&(r&&(r+=" "),r+=e);return r};function GRe(t,...e){let r,n,i,s=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return r=VRe(u),n=r.cache.get,i=r.cache.set,s=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=HRe(c,r);return i(c,d),d}return function(){return s(WRe.apply(null,arguments))}}const Ea=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},D0e=/^\[(?:([a-z-]+):)?(.+)\]$/i,KRe=/^\d+\/\d+$/,XRe=new Set(["px","full","screen"]),YRe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZRe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QRe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,JRe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eDe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yg=t=>fE(t)||XRe.has(t)||KRe.test(t),r1=t=>$C(t,"length",lDe),fE=t=>!!t&&!Number.isNaN(Number(t)),V9=t=>$C(t,"number",fE),X5=t=>!!t&&Number.isInteger(Number(t)),tDe=t=>t.endsWith("%")&&fE(t.slice(0,-1)),Ai=t=>D0e.test(t),n1=t=>YRe.test(t),rDe=new Set(["length","size","percentage"]),nDe=t=>$C(t,rDe,M0e),iDe=t=>$C(t,"position",M0e),sDe=new Set(["image","url"]),aDe=t=>$C(t,sDe,uDe),oDe=t=>$C(t,"",cDe),Y5=()=>!0,$C=(t,e,r)=>{const n=D0e.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},lDe=t=>ZRe.test(t)&&!QRe.test(t),M0e=()=>!1,cDe=t=>JRe.test(t),uDe=t=>eDe.test(t),dDe=()=>{const t=Ea("colors"),e=Ea("spacing"),r=Ea("blur"),n=Ea("brightness"),i=Ea("borderColor"),s=Ea("borderRadius"),o=Ea("borderSpacing"),l=Ea("borderWidth"),c=Ea("contrast"),u=Ea("grayscale"),d=Ea("hueRotate"),h=Ea("invert"),f=Ea("gap"),m=Ea("gradientColorStops"),x=Ea("gradientColorStopPositions"),g=Ea("inset"),y=Ea("margin"),w=Ea("opacity"),S=Ea("padding"),E=Ea("saturate"),j=Ea("scale"),T=Ea("sepia"),O=Ea("skew"),I=Ea("space"),M=Ea("translate"),D=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Ai,e],q=()=>[Ai,e],Q=()=>["",Yg,r1],re=()=>["auto",fE,Ai],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Ai],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>[fE,Ai];return{cacheSize:500,separator:":",theme:{colors:[Y5],spacing:[Yg,r1],blur:["none","",n1,Ai],brightness:xe(),borderColor:[t],borderRadius:["none","","full",n1,Ai],borderSpacing:q(),borderWidth:Q(),contrast:xe(),grayscale:Y(),hueRotate:xe(),invert:Y(),gap:q(),gradientColorStops:[t],gradientColorStopPositions:[tDe,r1],inset:F(),margin:F(),opacity:xe(),padding:q(),saturate:xe(),scale:xe(),sepia:Y(),skew:xe(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Ai]}],container:["container"],columns:[{columns:[n1]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Ai]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",X5,Ai]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ai]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",X5,Ai]}],"grid-cols":[{"grid-cols":[Y5]}],"col-start-end":[{col:["auto",{span:["full",X5,Ai]},Ai]}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":[Y5]}],"row-start-end":[{row:["auto",{span:[X5,Ai]},Ai]}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ai]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ai]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ai,e]}],"min-w":[{"min-w":[Ai,e,"min","max","fit"]}],"max-w":[{"max-w":[Ai,e,"none","full","min","max","fit","prose",{screen:[n1]},n1]}],h:[{h:[Ai,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ai,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ai,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ai,e,"auto","min","max","fit"]}],"font-size":[{text:["base",n1,r1]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",V9]}],"font-family":[{font:[Y5]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ai]}],"line-clamp":[{"line-clamp":["none",fE,V9]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Yg,Ai]}],"list-image":[{"list-image":["none",Ai]}],"list-style-type":[{list:["none","disc","decimal",Ai]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Yg,r1]}],"underline-offset":[{"underline-offset":["auto",Yg,Ai]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ai]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ai]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),iDe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nDe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aDe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[Yg,Ai]}],"outline-w":[{outline:[Yg,r1]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Yg,r1]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",n1,oDe]}],"shadow-color":[{shadow:[Y5]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",n1,Ai]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ai]}],duration:[{duration:xe()}],ease:[{ease:["linear","in","out","in-out",Ai]}],delay:[{delay:xe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ai]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[X5,Ai]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ai]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ai]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ai]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Yg,r1,V9]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hDe=GRe(dDe);function Ut(...t){return hDe(Gn(t))}const fDe=sRe,L0e=C.forwardRef(({className:t,...e},r)=>a.jsx(p0e,{ref:r,className:Ut("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));L0e.displayName=p0e.displayName;const mDe=DC("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),F0e=C.forwardRef(({className:t,variant:e,...r},n)=>a.jsx(g0e,{ref:n,className:Ut(mDe({variant:e}),t),...r}));F0e.displayName=g0e.displayName;const pDe=C.forwardRef(({className:t,...e},r)=>a.jsx(y0e,{ref:r,className:Ut("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));pDe.displayName=y0e.displayName;const B0e=C.forwardRef(({className:t,...e},r)=>a.jsx(b0e,{ref:r,className:Ut("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Xa,{className:"h-4 w-4"})}));B0e.displayName=b0e.displayName;const $0e=C.forwardRef(({className:t,...e},r)=>a.jsx(x0e,{ref:r,className:Ut("text-sm font-semibold",t),...e}));$0e.displayName=x0e.displayName;const U0e=C.forwardRef(({className:t,...e},r)=>a.jsx(v0e,{ref:r,className:Ut("text-sm opacity-90",t),...e}));U0e.displayName=v0e.displayName;function gDe(){const{toasts:t}=Qi();return a.jsxs(fDe,{children:[t.map(function({id:e,title:r,description:n,action:i,...s}){return a.jsxs(F0e,{...s,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx($0e,{children:r}),n&&a.jsx(U0e,{children:n})]}),i,a.jsx(B0e,{})]},e)}),a.jsx(L0e,{})]})}var hre=["light","dark"],xDe="(prefers-color-scheme: dark)",vDe=C.createContext(void 0),yDe={setTheme:t=>{},themes:[]},bDe=()=>{var t;return(t=C.useContext(vDe))!=null?t:yDe};C.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=i?hre.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,g=!1,y=!0)=>{let w=o?o[x]:x,S=g?x+"|| ''":`'${w}'`,E="";return i&&y&&!g&&hre.includes(x)&&(E+=`d.style.colorScheme = '${x}';`),r==="class"?g||w?E+=`c.add(${S})`:E+="null":w&&(E+=`d[s](n,${S})`),E},m=t?`!function(){${d}${f(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${xDe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${h}}catch(t){}}();`;return C.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var wDe=t=>{switch(t){case"success":return SDe;case"info":return jDe;case"warning":return EDe;case"error":return ADe;default:return null}},_De=Array(12).fill(0),NDe=({visible:t,className:e})=>be.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},be.createElement("div",{className:"sonner-spinner"},_De.map((r,n)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),SDe=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),EDe=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jDe=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ADe=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CDe=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),TDe=()=>{let[t,e]=be.useState(document.hidden);return be.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},xV=1,PDe=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:xV++,o=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:n}),{...c,...e,id:s,dismissible:l,title:n}):c):this.addToast({title:n,...i,dismissible:l,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=e instanceof Promise?e:e(),s=n!==void 0,o,l=i.then(async u=>{if(o=["resolve",u],be.isValidElement(u))s=!1,this.create({id:n,type:"default",message:u});else if(ODe(u)&&!u.ok){s=!1;let d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description;this.create({id:n,type:"error",message:d,description:h})}else if(r.success!==void 0){s=!1;let d=typeof r.success=="function"?await r.success(u):r.success,h=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"success",message:d,description:h})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){s=!1;let d=typeof r.error=="function"?await r.error(u):r.error,h=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"error",message:d,description:h})}}).finally(()=>{var u;s&&(this.dismiss(n),n=void 0),(u=r.finally)==null||u.call(r)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||xV++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},th=new PDe,kDe=(t,e)=>{let r=(e==null?void 0:e.id)||xV++;return th.addToast({title:t,...e,id:r}),r},ODe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",IDe=kDe,RDe=()=>th.toasts,DDe=()=>th.getActiveToasts(),cr=Object.assign(IDe,{success:th.success,info:th.info,warning:th.warning,error:th.error,custom:th.custom,message:th.message,promise:th.promise,dismiss:th.dismiss,loading:th.loading},{getHistory:RDe,getToasts:DDe});function MDe(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}MDe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function OR(t){return t.label!==void 0}var LDe=3,FDe="32px",BDe="16px",fre=4e3,$De=356,UDe=14,zDe=20,VDe=200;function tp(...t){return t.filter(Boolean).join(" ")}function qDe(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var HDe=t=>{var e,r,n,i,s,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:x,interacting:g,setHeights:y,visibleToasts:w,heights:S,index:E,toasts:j,expanded:T,removeToast:O,defaultRichColors:I,closeButton:M,style:D,cancelButtonStyle:z,actionButtonStyle:F,className:q="",descriptionClassName:Q="",duration:re,position:Z,gap:se,loadingIcon:K,expandByDefault:X,classNames:Y,icons:oe,closeButtonAriaLabel:xe="Close toast",pauseWhenPageIsHidden:H}=t,[J,ie]=be.useState(null),[ce,me]=be.useState(null),[he,_e]=be.useState(!1),[ue,je]=be.useState(!1),[ye,Le]=be.useState(!1),[Ge,Be]=be.useState(!1),[Te,ze]=be.useState(!1),[tt,Re]=be.useState(0),[Ue,xt]=be.useState(0),st=be.useRef(m.duration||re||fre),Xt=be.useRef(null),Jt=be.useRef(null),_r=E===0,lt=E+1<=w,pt=m.type,er=m.dismissible!==!1,Vt=m.className||"",Kt=m.descriptionClassName||"",ur=be.useMemo(()=>S.findIndex(Tr=>Tr.toastId===m.id)||0,[S,m.id]),rt=be.useMemo(()=>{var Tr;return(Tr=m.closeButton)!=null?Tr:M},[m.closeButton,M]),Lt=be.useMemo(()=>m.duration||re||fre,[m.duration,re]),Dt=be.useRef(0),Fe=be.useRef(0),ut=be.useRef(0),Mt=be.useRef(null),[Ht,Wt]=Z.split("-"),zt=be.useMemo(()=>S.reduce((Tr,Gr,ln)=>ln>=ur?Tr:Tr+Gr.height,0),[S,ur]),Rr=TDe(),vr=m.invert||f,Cr=pt==="loading";Fe.current=be.useMemo(()=>ur*se+zt,[ur,zt]),be.useEffect(()=>{st.current=Lt},[Lt]),be.useEffect(()=>{_e(!0)},[]),be.useEffect(()=>{let Tr=Jt.current;if(Tr){let Gr=Tr.getBoundingClientRect().height;return xt(Gr),y(ln=>[{toastId:m.id,height:Gr,position:m.position},...ln]),()=>y(ln=>ln.filter(vi=>vi.toastId!==m.id))}},[y,m.id]),be.useLayoutEffect(()=>{if(!he)return;let Tr=Jt.current,Gr=Tr.style.height;Tr.style.height="auto";let ln=Tr.getBoundingClientRect().height;Tr.style.height=Gr,xt(ln),y(vi=>vi.find(Fr=>Fr.toastId===m.id)?vi.map(Fr=>Fr.toastId===m.id?{...Fr,height:ln}:Fr):[{toastId:m.id,height:ln,position:m.position},...vi])},[he,m.title,m.description,y,m.id]);let Pr=be.useCallback(()=>{je(!0),Re(Fe.current),y(Tr=>Tr.filter(Gr=>Gr.toastId!==m.id)),setTimeout(()=>{O(m)},VDe)},[m,O,y,Fe]);be.useEffect(()=>{if(m.promise&&pt==="loading"||m.duration===1/0||m.type==="loading")return;let Tr;return T||g||H&&Rr?(()=>{if(ut.current<Dt.current){let Gr=new Date().getTime()-Dt.current;st.current=st.current-Gr}ut.current=new Date().getTime()})():st.current!==1/0&&(Dt.current=new Date().getTime(),Tr=setTimeout(()=>{var Gr;(Gr=m.onAutoClose)==null||Gr.call(m,m),Pr()},st.current)),()=>clearTimeout(Tr)},[T,g,m,pt,H,Rr,Pr]),be.useEffect(()=>{m.delete&&Pr()},[Pr,m.delete]);function Qr(){var Tr,Gr,ln;return oe!=null&&oe.loading?be.createElement("div",{className:tp(Y==null?void 0:Y.loader,(Tr=m==null?void 0:m.classNames)==null?void 0:Tr.loader,"sonner-loader"),"data-visible":pt==="loading"},oe.loading):K?be.createElement("div",{className:tp(Y==null?void 0:Y.loader,(Gr=m==null?void 0:m.classNames)==null?void 0:Gr.loader,"sonner-loader"),"data-visible":pt==="loading"},K):be.createElement(NDe,{className:tp(Y==null?void 0:Y.loader,(ln=m==null?void 0:m.classNames)==null?void 0:ln.loader),visible:pt==="loading"})}return be.createElement("li",{tabIndex:0,ref:Jt,className:tp(q,Vt,Y==null?void 0:Y.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,Y==null?void 0:Y.default,Y==null?void 0:Y[pt],(r=m==null?void 0:m.classNames)==null?void 0:r[pt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:I,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":he,"data-promise":!!m.promise,"data-swiped":Te,"data-removed":ue,"data-visible":lt,"data-y-position":Ht,"data-x-position":Wt,"data-index":E,"data-front":_r,"data-swiping":ye,"data-dismissible":er,"data-type":pt,"data-invert":vr,"data-swipe-out":Ge,"data-swipe-direction":ce,"data-expanded":!!(T||X&&he),style:{"--index":E,"--toasts-before":E,"--z-index":j.length-E,"--offset":`${ue?tt:Fe.current}px`,"--initial-height":X?"auto":`${Ue}px`,...D,...m.style},onDragEnd:()=>{Le(!1),ie(null),Mt.current=null},onPointerDown:Tr=>{Cr||!er||(Xt.current=new Date,Re(Fe.current),Tr.target.setPointerCapture(Tr.pointerId),Tr.target.tagName!=="BUTTON"&&(Le(!0),Mt.current={x:Tr.clientX,y:Tr.clientY}))},onPointerUp:()=>{var Tr,Gr,ln,vi;if(Ge||!er)return;Mt.current=null;let Fr=Number(((Tr=Jt.current)==null?void 0:Tr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Bi=Number(((Gr=Jt.current)==null?void 0:Gr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),da=new Date().getTime()-((ln=Xt.current)==null?void 0:ln.getTime()),$i=J==="x"?Fr:Bi,ks=Math.abs($i)/da;if(Math.abs($i)>=zDe||ks>.11){Re(Fe.current),(vi=m.onDismiss)==null||vi.call(m,m),me(J==="x"?Fr>0?"right":"left":Bi>0?"down":"up"),Pr(),Be(!0),ze(!1);return}Le(!1),ie(null)},onPointerMove:Tr=>{var Gr,ln,vi,Fr;if(!Mt.current||!er||((Gr=window.getSelection())==null?void 0:Gr.toString().length)>0)return;let Bi=Tr.clientY-Mt.current.y,da=Tr.clientX-Mt.current.x,$i=(ln=t.swipeDirections)!=null?ln:qDe(Z);!J&&(Math.abs(da)>1||Math.abs(Bi)>1)&&ie(Math.abs(da)>Math.abs(Bi)?"x":"y");let ks={x:0,y:0};J==="y"?($i.includes("top")||$i.includes("bottom"))&&($i.includes("top")&&Bi<0||$i.includes("bottom")&&Bi>0)&&(ks.y=Bi):J==="x"&&($i.includes("left")||$i.includes("right"))&&($i.includes("left")&&da<0||$i.includes("right")&&da>0)&&(ks.x=da),(Math.abs(ks.x)>0||Math.abs(ks.y)>0)&&ze(!0),(vi=Jt.current)==null||vi.style.setProperty("--swipe-amount-x",`${ks.x}px`),(Fr=Jt.current)==null||Fr.style.setProperty("--swipe-amount-y",`${ks.y}px`)}},rt&&!m.jsx?be.createElement("button",{"aria-label":xe,"data-disabled":Cr,"data-close-button":!0,onClick:Cr||!er?()=>{}:()=>{var Tr;Pr(),(Tr=m.onDismiss)==null||Tr.call(m,m)},className:tp(Y==null?void 0:Y.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=oe==null?void 0:oe.close)!=null?s:CDe):null,m.jsx||C.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:be.createElement(be.Fragment,null,pt||m.icon||m.promise?be.createElement("div",{"data-icon":"",className:tp(Y==null?void 0:Y.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Qr():null,m.type!=="loading"?m.icon||(oe==null?void 0:oe[pt])||wDe(pt):null):null,be.createElement("div",{"data-content":"",className:tp(Y==null?void 0:Y.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},be.createElement("div",{"data-title":"",className:tp(Y==null?void 0:Y.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?be.createElement("div",{"data-description":"",className:tp(Q,Kt,Y==null?void 0:Y.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),C.isValidElement(m.cancel)?m.cancel:m.cancel&&OR(m.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||z,onClick:Tr=>{var Gr,ln;OR(m.cancel)&&er&&((ln=(Gr=m.cancel).onClick)==null||ln.call(Gr,Tr),Pr())},className:tp(Y==null?void 0:Y.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,C.isValidElement(m.action)?m.action:m.action&&OR(m.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||F,onClick:Tr=>{var Gr,ln;OR(m.action)&&((ln=(Gr=m.action).onClick)==null||ln.call(Gr,Tr),!Tr.defaultPrevented&&Pr())},className:tp(Y==null?void 0:Y.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function mre(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function WDe(t,e){let r={};return[t,e].forEach((n,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",l=s?BDe:FDe;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var GDe=C.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:x=LDe,toastOptions:g,dir:y=mre(),gap:w=UDe,loadingIcon:S,icons:E,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:T}=t,[O,I]=be.useState([]),M=be.useMemo(()=>Array.from(new Set([n].concat(O.filter(H=>H.position).map(H=>H.position)))),[O,n]),[D,z]=be.useState([]),[F,q]=be.useState(!1),[Q,re]=be.useState(!1),[Z,se]=be.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=be.useRef(null),X=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=be.useRef(null),oe=be.useRef(!1),xe=be.useCallback(H=>{I(J=>{var ie;return(ie=J.find(ce=>ce.id===H.id))!=null&&ie.delete||th.dismiss(H.id),J.filter(({id:ce})=>ce!==H.id)})},[]);return be.useEffect(()=>th.subscribe(H=>{if(H.dismiss){I(J=>J.map(ie=>ie.id===H.id?{...ie,delete:!0}:ie));return}setTimeout(()=>{hE.flushSync(()=>{I(J=>{let ie=J.findIndex(ce=>ce.id===H.id);return ie!==-1?[...J.slice(0,ie),{...J[ie],...H},...J.slice(ie+1)]:[H,...J]})})})}),[]),be.useEffect(()=>{if(d!=="system"){se(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:J})=>{se(J?"dark":"light")})}catch{H.addListener(({matches:ie})=>{try{se(ie?"dark":"light")}catch(ce){console.error(ce)}})}},[d]),be.useEffect(()=>{O.length<=1&&q(!1)},[O]),be.useEffect(()=>{let H=J=>{var ie,ce;i.every(me=>J[me]||J.code===me)&&(q(!0),(ie=K.current)==null||ie.focus()),J.code==="Escape"&&(document.activeElement===K.current||(ce=K.current)!=null&&ce.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[i]),be.useEffect(()=>{if(K.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,oe.current=!1)}},[K.current]),be.createElement("section",{ref:e,"aria-label":`${j} ${X}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((H,J)=>{var ie;let[ce,me]=H.split("-");return O.length?be.createElement("ol",{key:H,dir:y==="auto"?mre():y,tabIndex:-1,ref:K,className:l,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":ce,"data-lifted":F&&O.length>1&&!s,"data-x-position":me,style:{"--front-toast-height":`${((ie=D[0])==null?void 0:ie.height)||0}px`,"--width":`${$De}px`,"--gap":`${w}px`,...m,...WDe(c,u)},onBlur:he=>{oe.current&&!he.currentTarget.contains(he.relatedTarget)&&(oe.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,Y.current=he.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{Q||q(!1)},onDragEnd:()=>q(!1),onPointerDown:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},O.filter(he=>!he.position&&J===0||he.position===H).map((he,_e)=>{var ue,je;return be.createElement(HDe,{key:he.id,icons:E,index:_e,toast:he,defaultRichColors:h,duration:(ue=g==null?void 0:g.duration)!=null?ue:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:x,closeButton:(je=g==null?void 0:g.closeButton)!=null?je:o,interacting:Q,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:xe,toasts:O.filter(ye=>ye.position==he.position),heights:D.filter(ye=>ye.position==he.position),setHeights:z,expandByDefault:s,gap:w,loadingIcon:S,expanded:F,pauseWhenPageIsHidden:T,swipeDirections:t.swipeDirections})})):null}))});const KDe=({...t})=>{const{theme:e="system"}=bDe();return a.jsx(GDe,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var XDe=$K[" useId ".trim().toString()]||(()=>{}),YDe=0;function bl(t){const[e,r]=C.useState(XDe());return Vo(()=>{t||r(n=>n??String(YDe++))},[t]),t||(e?`radix-${e}`:"")}const ZDe=["top","right","bottom","left"],yb=Math.min,ff=Math.max,MM=Math.round,IR=Math.floor,wg=t=>({x:t,y:t}),QDe={left:"right",right:"left",bottom:"top",top:"bottom"},JDe={start:"end",end:"start"};function vV(t,e,r){return ff(t,yb(e,r))}function Nv(t,e){return typeof t=="function"?t(e):t}function Sv(t){return t.split("-")[0]}function UC(t){return t.split("-")[1]}function UX(t){return t==="x"?"y":"x"}function zX(t){return t==="y"?"height":"width"}const e6e=new Set(["top","bottom"]);function hg(t){return e6e.has(Sv(t))?"y":"x"}function VX(t){return UX(hg(t))}function t6e(t,e,r){r===void 0&&(r=!1);const n=UC(t),i=VX(t),s=zX(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=LM(o)),[o,LM(o)]}function r6e(t){const e=LM(t);return[yV(t),e,yV(e)]}function yV(t){return t.replace(/start|end/g,e=>JDe[e])}const pre=["left","right"],gre=["right","left"],n6e=["top","bottom"],i6e=["bottom","top"];function s6e(t,e,r){switch(t){case"top":case"bottom":return r?e?gre:pre:e?pre:gre;case"left":case"right":return e?n6e:i6e;default:return[]}}function a6e(t,e,r,n){const i=UC(t);let s=s6e(Sv(t),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(yV)))),s}function LM(t){return t.replace(/left|right|bottom|top/g,e=>QDe[e])}function o6e(t){return{top:0,right:0,bottom:0,left:0,...t}}function z0e(t){return typeof t!="number"?o6e(t):{top:t,right:t,bottom:t,left:t}}function FM(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function xre(t,e,r){let{reference:n,floating:i}=t;const s=hg(e),o=VX(e),l=zX(o),c=Sv(e),u=s==="y",d=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,f=n[l]/2-i[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-i.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-i.width,y:h};break;default:m={x:n.x,y:n.y}}switch(UC(e)){case"start":m[o]-=f*(r&&u?-1:1);break;case"end":m[o]+=f*(r&&u?-1:1);break}return m}const l6e=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=xre(u,n,c),f=n,m={},x=0;for(let g=0;g<l.length;g++){const{name:y,fn:w}=l[g],{x:S,y:E,data:j,reset:T}=await w({x:d,y:h,initialPlacement:n,placement:f,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=S??d,h=E??h,m={...m,[y]:{...m[y],...j}},T&&x<=50&&(x++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:d,y:h}=xre(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:m}};async function v3(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Nv(e,t),x=z0e(m),y=l[f?h==="floating"?"reference":"floating":h],w=FM(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(y)))==null||r?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),S=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},T=FM(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:E,strategy:c}):S);return{top:(w.top-T.top+x.top)/j.y,bottom:(T.bottom-w.bottom+x.bottom)/j.y,left:(w.left-T.left+x.left)/j.x,right:(T.right-w.right+x.right)/j.x}}const c6e=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Nv(t,e)||{};if(u==null)return{};const h=z0e(d),f={x:r,y:n},m=VX(i),x=zX(m),g=await o.getDimensions(u),y=m==="y",w=y?"top":"left",S=y?"bottom":"right",E=y?"clientHeight":"clientWidth",j=s.reference[x]+s.reference[m]-f[m]-s.floating[x],T=f[m]-s.reference[m],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let I=O?O[E]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=l.floating[E]||s.floating[x]);const M=j/2-T/2,D=I/2-g[x]/2-1,z=yb(h[w],D),F=yb(h[S],D),q=z,Q=I-g[x]-F,re=I/2-g[x]/2+M,Z=vV(q,re,Q),se=!c.arrow&&UC(i)!=null&&re!==Z&&s.reference[x]/2-(re<q?z:F)-g[x]/2<0,K=se?re<q?re-q:re-Q:0;return{[m]:f[m]+K,data:{[m]:Z,centerOffset:re-Z-K,...se&&{alignmentOffset:K}},reset:se}}}),u6e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...y}=Nv(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const w=Sv(i),S=hg(l),E=Sv(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),T=f||(E||!g?[LM(l)]:r6e(l)),O=x!=="none";!f&&O&&T.push(...a6e(l,g,x,j));const I=[l,...T],M=await v3(e,y),D=[];let z=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&D.push(M[w]),h){const re=t6e(i,o,j);D.push(M[re[0]],M[re[1]])}if(z=[...z,{placement:i,overflows:D}],!D.every(re=>re<=0)){var F,q;const re=(((F=s.flip)==null?void 0:F.index)||0)+1,Z=I[re];if(Z&&(!(h==="alignment"?S!==hg(Z):!1)||z.every(X=>X.overflows[0]>0&&hg(X.placement)===S)))return{data:{index:re,overflows:z},reset:{placement:Z}};let se=(q=z.filter(K=>K.overflows[0]<=0).sort((K,X)=>K.overflows[1]-X.overflows[1])[0])==null?void 0:q.placement;if(!se)switch(m){case"bestFit":{var Q;const K=(Q=z.filter(X=>{if(O){const Y=hg(X.placement);return Y===S||Y==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(Y=>Y>0).reduce((Y,oe)=>Y+oe,0)]).sort((X,Y)=>X[1]-Y[1])[0])==null?void 0:Q[0];K&&(se=K);break}case"initialPlacement":se=l;break}if(i!==se)return{reset:{placement:se}}}return{}}}};function vre(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function yre(t){return ZDe.some(e=>t[e]>=0)}const d6e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=Nv(t,e);switch(n){case"referenceHidden":{const s=await v3(e,{...i,elementContext:"reference"}),o=vre(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:yre(o)}}}case"escaped":{const s=await v3(e,{...i,altBoundary:!0}),o=vre(s,r.floating);return{data:{escapedOffsets:o,escaped:yre(o)}}}default:return{}}}}},V0e=new Set(["left","top"]);async function h6e(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Sv(r),l=UC(r),c=hg(r)==="y",u=V0e.has(o)?-1:1,d=s&&c?-1:1,h=Nv(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(m=l==="end"?x*-1:x),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const f6e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:o,middlewareData:l}=e,c=await h6e(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},m6e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:w,y:S}=y;return{x:w,y:S}}},...c}=Nv(t,e),u={x:r,y:n},d=await v3(e,c),h=hg(Sv(i)),f=UX(h);let m=u[f],x=u[h];if(s){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",S=m+d[y],E=m-d[w];m=vV(S,m,E)}if(o){const y=h==="y"?"top":"left",w=h==="y"?"bottom":"right",S=x+d[y],E=x-d[w];x=vV(S,x,E)}const g=l.fn({...e,[f]:m,[h]:x});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:s,[h]:o}}}}}},p6e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Nv(t,e),d={x:r,y:n},h=hg(i),f=UX(h);let m=d[f],x=d[h];const g=Nv(l,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const E=f==="y"?"height":"width",j=s.reference[f]-s.floating[E]+y.mainAxis,T=s.reference[f]+s.reference[E]-y.mainAxis;m<j?m=j:m>T&&(m=T)}if(u){var w,S;const E=f==="y"?"width":"height",j=V0e.has(Sv(i)),T=s.reference[h]-s.floating[E]+(j&&((w=o.offset)==null?void 0:w[h])||0)+(j?0:y.crossAxis),O=s.reference[h]+s.reference[E]+(j?0:((S=o.offset)==null?void 0:S[h])||0)-(j?y.crossAxis:0);x<T?x=T:x>O&&(x=O)}return{[f]:m,[h]:x}}}},g6e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Nv(t,e),d=await v3(e,u),h=Sv(i),f=UC(i),m=hg(i)==="y",{width:x,height:g}=s.floating;let y,w;h==="top"||h==="bottom"?(y=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,y=f==="end"?"top":"bottom");const S=g-d.top-d.bottom,E=x-d.left-d.right,j=yb(g-d[y],S),T=yb(x-d[w],E),O=!e.middlewareData.shift;let I=j,M=T;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(M=E),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=S),O&&!f){const z=ff(d.left,0),F=ff(d.right,0),q=ff(d.top,0),Q=ff(d.bottom,0);m?M=x-2*(z!==0||F!==0?z+F:ff(d.left,d.right)):I=g-2*(q!==0||Q!==0?q+Q:ff(d.top,d.bottom))}await c({...e,availableWidth:M,availableHeight:I});const D=await o.getDimensions(l.floating);return x!==D.width||g!==D.height?{reset:{rects:!0}}:{}}}};function $F(){return typeof window<"u"}function zC(t){return q0e(t)?(t.nodeName||"").toLowerCase():"#document"}function Af(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fg(t){var e;return(e=(q0e(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function q0e(t){return $F()?t instanceof Node||t instanceof Af(t).Node:!1}function e0(t){return $F()?t instanceof Element||t instanceof Af(t).Element:!1}function kg(t){return $F()?t instanceof HTMLElement||t instanceof Af(t).HTMLElement:!1}function bre(t){return!$F()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Af(t).ShadowRoot}const x6e=new Set(["inline","contents"]);function XO(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=t0(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!x6e.has(i)}const v6e=new Set(["table","td","th"]);function y6e(t){return v6e.has(zC(t))}const b6e=[":popover-open",":modal"];function UF(t){return b6e.some(e=>{try{return t.matches(e)}catch{return!1}})}const w6e=["transform","translate","scale","rotate","perspective"],_6e=["transform","translate","scale","rotate","perspective","filter"],N6e=["paint","layout","strict","content"];function qX(t){const e=HX(),r=e0(t)?t0(t):t;return w6e.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||_6e.some(n=>(r.willChange||"").includes(n))||N6e.some(n=>(r.contain||"").includes(n))}function S6e(t){let e=bb(t);for(;kg(e)&&!SA(e);){if(qX(e))return e;if(UF(e))return null;e=bb(e)}return null}function HX(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const E6e=new Set(["html","body","#document"]);function SA(t){return E6e.has(zC(t))}function t0(t){return Af(t).getComputedStyle(t)}function zF(t){return e0(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bb(t){if(zC(t)==="html")return t;const e=t.assignedSlot||t.parentNode||bre(t)&&t.host||Fg(t);return bre(e)?e.host:e}function H0e(t){const e=bb(t);return SA(e)?t.ownerDocument?t.ownerDocument.body:t.body:kg(e)&&XO(e)?e:H0e(e)}function y3(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=H0e(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=Af(i);if(s){const l=bV(o);return e.concat(o,o.visualViewport||[],XO(i)?i:[],l&&r?y3(l):[])}return e.concat(i,y3(i,[],r))}function bV(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function W0e(t){const e=t0(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=kg(t),s=i?t.offsetWidth:r,o=i?t.offsetHeight:n,l=MM(r)!==s||MM(n)!==o;return l&&(r=s,n=o),{width:r,height:n,$:l}}function WX(t){return e0(t)?t:t.contextElement}function mE(t){const e=WX(t);if(!kg(e))return wg(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=W0e(e);let o=(s?MM(r.width):r.width)/n,l=(s?MM(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const j6e=wg(0);function G0e(t){const e=Af(t);return!HX()||!e.visualViewport?j6e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function A6e(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Af(t)?!1:e}function M_(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=WX(t);let o=wg(1);e&&(n?e0(n)&&(o=mE(n)):o=mE(t));const l=A6e(s,r,n)?G0e(s):wg(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const f=Af(s),m=n&&e0(n)?Af(n):n;let x=f,g=bV(x);for(;g&&n&&m!==x;){const y=mE(g),w=g.getBoundingClientRect(),S=t0(g),E=w.left+(g.clientLeft+parseFloat(S.paddingLeft))*y.x,j=w.top+(g.clientTop+parseFloat(S.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=E,u+=j,x=Af(g),g=bV(x)}}return FM({width:d,height:h,x:c,y:u})}function GX(t,e){const r=zF(t).scrollLeft;return e?e.left+r:M_(Fg(t)).left+r}function K0e(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:GX(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function C6e(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",o=Fg(n),l=e?UF(e.floating):!1;if(n===o||l&&s)return r;let c={scrollLeft:0,scrollTop:0},u=wg(1);const d=wg(0),h=kg(n);if((h||!h&&!s)&&((zC(n)!=="body"||XO(o))&&(c=zF(n)),kg(n))){const m=M_(n);u=mE(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const f=o&&!h&&!s?K0e(o,c,!0):wg(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function T6e(t){return Array.from(t.getClientRects())}function P6e(t){const e=Fg(t),r=zF(t),n=t.ownerDocument.body,i=ff(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=ff(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+GX(t);const l=-r.scrollTop;return t0(n).direction==="rtl"&&(o+=ff(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:l}}function k6e(t,e){const r=Af(t),n=Fg(t),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;const u=HX();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:l,y:c}}const O6e=new Set(["absolute","fixed"]);function I6e(t,e){const r=M_(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=kg(t)?mE(t):wg(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,c=i*s.x,u=n*s.y;return{width:o,height:l,x:c,y:u}}function wre(t,e,r){let n;if(e==="viewport")n=k6e(t,r);else if(e==="document")n=P6e(Fg(t));else if(e0(e))n=I6e(e,r);else{const i=G0e(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return FM(n)}function X0e(t,e){const r=bb(t);return r===e||!e0(r)||SA(r)?!1:t0(r).position==="fixed"||X0e(r,e)}function R6e(t,e){const r=e.get(t);if(r)return r;let n=y3(t,[],!1).filter(l=>e0(l)&&zC(l)!=="body"),i=null;const s=t0(t).position==="fixed";let o=s?bb(t):t;for(;e0(o)&&!SA(o);){const l=t0(o),c=qX(o);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&O6e.has(i.position)||XO(o)&&!c&&X0e(t,o))?n=n.filter(d=>d!==o):i=l,o=bb(o)}return e.set(t,n),n}function D6e(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?UF(e)?[]:R6e(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=wre(e,d,i);return u.top=ff(h.top,u.top),u.right=yb(h.right,u.right),u.bottom=yb(h.bottom,u.bottom),u.left=ff(h.left,u.left),u},wre(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function M6e(t){const{width:e,height:r}=W0e(t);return{width:e,height:r}}function L6e(t,e,r){const n=kg(e),i=Fg(e),s=r==="fixed",o=M_(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=wg(0);function u(){c.x=GX(i)}if(n||!n&&!s)if((zC(e)!=="body"||XO(i))&&(l=zF(e)),n){const m=M_(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&u();s&&!n&&i&&u();const d=i&&!n&&!s?K0e(i,l):wg(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function q9(t){return t0(t).position==="static"}function _re(t,e){if(!kg(t)||t0(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Fg(t)===r&&(r=r.ownerDocument.body),r}function Y0e(t,e){const r=Af(t);if(UF(t))return r;if(!kg(t)){let i=bb(t);for(;i&&!SA(i);){if(e0(i)&&!q9(i))return i;i=bb(i)}return r}let n=_re(t,e);for(;n&&y6e(n)&&q9(n);)n=_re(n,e);return n&&SA(n)&&q9(n)&&!qX(n)?r:n||S6e(t)||r}const F6e=async function(t){const e=this.getOffsetParent||Y0e,r=this.getDimensions,n=await r(t.floating);return{reference:L6e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function B6e(t){return t0(t).direction==="rtl"}const $6e={convertOffsetParentRelativeRectToViewportRelativeRect:C6e,getDocumentElement:Fg,getClippingRect:D6e,getOffsetParent:Y0e,getElementRects:F6e,getClientRects:T6e,getDimensions:M6e,getScale:mE,isElement:e0,isRTL:B6e};function Z0e(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function U6e(t,e){let r=null,n;const i=Fg(t);function s(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const x=IR(h),g=IR(i.clientWidth-(d+f)),y=IR(i.clientHeight-(h+m)),w=IR(d),E={rootMargin:-x+"px "+-g+"px "+-y+"px "+-w+"px",threshold:ff(0,yb(1,c))||1};let j=!0;function T(O){const I=O[0].intersectionRatio;if(I!==c){if(!j)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!Z0e(u,t.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(T,{...E,root:i.ownerDocument})}catch{r=new IntersectionObserver(T,E)}r.observe(t)}return o(!0),s}function z6e(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=WX(t),d=i||s?[...u?y3(u):[],...y3(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",r,{passive:!0}),s&&w.addEventListener("resize",r)});const h=u&&l?U6e(u,r):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[S]=w;S&&S.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let x,g=c?M_(t):null;c&&y();function y(){const w=M_(t);g&&!Z0e(g,w)&&r(),g=w,x=requestAnimationFrame(y)}return r(),()=>{var w;d.forEach(S=>{i&&S.removeEventListener("scroll",r),s&&S.removeEventListener("resize",r)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(x)}}const V6e=f6e,q6e=m6e,H6e=u6e,W6e=g6e,G6e=d6e,Nre=c6e,K6e=p6e,X6e=(t,e,r)=>{const n=new Map,i={platform:$6e,...r},s={...i.platform,_c:n};return l6e(t,e,{...i,platform:s})};var Y6e=typeof document<"u",Z6e=function(){},u6=Y6e?C.useLayoutEffect:Z6e;function BM(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!BM(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!BM(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Q0e(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Sre(t,e){const r=Q0e(t);return Math.round(e*r)/r}function H9(t){const e=C.useRef(t);return u6(()=>{e.current=t}),e}function Q6e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=C.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=C.useState(n);BM(f,n)||m(n);const[x,g]=C.useState(null),[y,w]=C.useState(null),S=C.useCallback(X=>{X!==O.current&&(O.current=X,g(X))},[]),E=C.useCallback(X=>{X!==I.current&&(I.current=X,w(X))},[]),j=s||x,T=o||y,O=C.useRef(null),I=C.useRef(null),M=C.useRef(d),D=c!=null,z=H9(c),F=H9(i),q=H9(u),Q=C.useCallback(()=>{if(!O.current||!I.current)return;const X={placement:e,strategy:r,middleware:f};F.current&&(X.platform=F.current),X6e(O.current,I.current,X).then(Y=>{const oe={...Y,isPositioned:q.current!==!1};re.current&&!BM(M.current,oe)&&(M.current=oe,Hp.flushSync(()=>{h(oe)}))})},[f,e,r,F,q]);u6(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const re=C.useRef(!1);u6(()=>(re.current=!0,()=>{re.current=!1}),[]),u6(()=>{if(j&&(O.current=j),T&&(I.current=T),j&&T){if(z.current)return z.current(j,T,Q);Q()}},[j,T,Q,z,D]);const Z=C.useMemo(()=>({reference:O,floating:I,setReference:S,setFloating:E}),[S,E]),se=C.useMemo(()=>({reference:j,floating:T}),[j,T]),K=C.useMemo(()=>{const X={position:r,left:0,top:0};if(!se.floating)return X;const Y=Sre(se.floating,d.x),oe=Sre(se.floating,d.y);return l?{...X,transform:"translate("+Y+"px, "+oe+"px)",...Q0e(se.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:oe}},[r,l,se.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:Q,refs:Z,elements:se,floatingStyles:K}),[d,Q,Z,se,K])}const J6e=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Nre({element:n.current,padding:i}).fn(r):{}:n?Nre({element:n,padding:i}).fn(r):{}}}},eMe=(t,e)=>({...V6e(t),options:[t,e]}),tMe=(t,e)=>({...q6e(t),options:[t,e]}),rMe=(t,e)=>({...K6e(t),options:[t,e]}),nMe=(t,e)=>({...H6e(t),options:[t,e]}),iMe=(t,e)=>({...W6e(t),options:[t,e]}),sMe=(t,e)=>({...G6e(t),options:[t,e]}),aMe=(t,e)=>({...J6e(t),options:[t,e]});var oMe="Arrow",J0e=C.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...s}=t;return a.jsx(Dr.svg,{...s,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});J0e.displayName=oMe;var lMe=J0e;function YO(t){const[e,r]=C.useState(void 0);return Vo(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var KX="Popper",[ege,Ub]=qo(KX),[cMe,tge]=ege(KX),rge=t=>{const{__scopePopper:e,children:r}=t,[n,i]=C.useState(null);return a.jsx(cMe,{scope:e,anchor:n,onAnchorChange:i,children:r})};rge.displayName=KX;var nge="PopperAnchor",ige=C.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,s=tge(nge,r),o=C.useRef(null),l=An(e,o);return C.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(Dr.div,{...i,ref:l})});ige.displayName=nge;var XX="PopperContent",[uMe,dMe]=ege(XX),sge=C.forwardRef((t,e)=>{var he,_e,ue,je,ye,Le;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:x,...g}=t,y=tge(XX,r),[w,S]=C.useState(null),E=An(e,Ge=>S(Ge)),[j,T]=C.useState(null),O=YO(j),I=(O==null?void 0:O.width)??0,M=(O==null?void 0:O.height)??0,D=n+(s!=="center"?"-"+s:""),z=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},F=Array.isArray(u)?u:[u],q=F.length>0,Q={padding:z,boundary:F.filter(fMe),altBoundary:q},{refs:re,floatingStyles:Z,placement:se,isPositioned:K,middlewareData:X}=Q6e({strategy:"fixed",placement:D,whileElementsMounted:(...Ge)=>z6e(...Ge,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[eMe({mainAxis:i+M,alignmentAxis:o}),c&&tMe({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?rMe():void 0,...Q}),c&&nMe({...Q}),iMe({...Q,apply:({elements:Ge,rects:Be,availableWidth:Te,availableHeight:ze})=>{const{width:tt,height:Re}=Be.reference,Ue=Ge.floating.style;Ue.setProperty("--radix-popper-available-width",`${Te}px`),Ue.setProperty("--radix-popper-available-height",`${ze}px`),Ue.setProperty("--radix-popper-anchor-width",`${tt}px`),Ue.setProperty("--radix-popper-anchor-height",`${Re}px`)}}),j&&aMe({element:j,padding:l}),mMe({arrowWidth:I,arrowHeight:M}),f&&sMe({strategy:"referenceHidden",...Q})]}),[Y,oe]=lge(se),xe=Uo(x);Vo(()=>{K&&(xe==null||xe())},[K,xe]);const H=(he=X.arrow)==null?void 0:he.x,J=(_e=X.arrow)==null?void 0:_e.y,ie=((ue=X.arrow)==null?void 0:ue.centerOffset)!==0,[ce,me]=C.useState();return Vo(()=>{w&&me(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:K?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(je=X.transformOrigin)==null?void 0:je.x,(ye=X.transformOrigin)==null?void 0:ye.y].join(" "),...((Le=X.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(uMe,{scope:r,placedSide:Y,onArrowChange:T,arrowX:H,arrowY:J,shouldHideArrow:ie,children:a.jsx(Dr.div,{"data-side":Y,"data-align":oe,...g,ref:E,style:{...g.style,animation:K?void 0:"none"}})})})});sge.displayName=XX;var age="PopperArrow",hMe={top:"bottom",right:"left",bottom:"top",left:"right"},oge=C.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,s=dMe(age,n),o=hMe[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(lMe,{...i,ref:r,style:{...i.style,display:"block"}})})});oge.displayName=age;function fMe(t){return t!==null}var mMe=t=>({name:"transformOrigin",options:t,fn(e){var y,w,S;const{placement:r,rects:n,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=lge(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=i.arrow)==null?void 0:w.x)??0)+l/2,m=(((S=i.arrow)==null?void 0:S.y)??0)+c/2;let x="",g="";return u==="bottom"?(x=o?h:`${f}px`,g=`${-c}px`):u==="top"?(x=o?h:`${f}px`,g=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,g=o?h:`${m}px`):u==="left"&&(x=`${n.floating.width+c}px`,g=o?h:`${m}px`),{data:{x,y:g}}}});function lge(t){const[e,r="center"]=t.split("-");return[e,r]}var VF=rge,ZO=ige,qF=sge,HF=oge,[WF,J9t]=qo("Tooltip",[Ub]),GF=Ub(),cge="TooltipProvider",pMe=700,wV="tooltip.open",[gMe,YX]=WF(cge),uge=t=>{const{__scopeTooltip:e,delayDuration:r=pMe,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=t,o=C.useRef(!0),l=C.useRef(!1),c=C.useRef(0);return C.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(gMe,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:C.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:C.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};uge.displayName=cge;var b3="Tooltip",[xMe,KF]=WF(b3),dge=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=t,c=YX(b3,t.__scopeTooltip),u=GF(e),[d,h]=C.useState(null),f=bl(),m=C.useRef(0),x=o??c.disableHoverableContent,g=l??c.delayDuration,y=C.useRef(!1),[w,S]=Xu({prop:n,defaultProp:i??!1,onChange:I=>{I?(c.onOpen(),document.dispatchEvent(new CustomEvent(wV))):c.onClose(),s==null||s(I)},caller:b3}),E=C.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),j=C.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,S(!0)},[S]),T=C.useCallback(()=>{window.clearTimeout(m.current),m.current=0,S(!1)},[S]),O=C.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,S(!0),m.current=0},g)},[g,S]);return C.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),a.jsx(VF,{...u,children:a.jsx(xMe,{scope:e,contentId:f,open:w,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:C.useCallback(()=>{c.isOpenDelayedRef.current?O():j()},[c.isOpenDelayedRef,O,j]),onTriggerLeave:C.useCallback(()=>{x?T():(window.clearTimeout(m.current),m.current=0)},[T,x]),onOpen:j,onClose:T,disableHoverableContent:x,children:r})})};dge.displayName=b3;var _V="TooltipTrigger",hge=C.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=KF(_V,r),s=YX(_V,r),o=GF(r),l=C.useRef(null),c=An(e,l,i.onTriggerChange),u=C.useRef(!1),d=C.useRef(!1),h=C.useCallback(()=>u.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(ZO,{asChild:!0,...o,children:a.jsx(Dr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:wr(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:wr(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:wr(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:wr(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:wr(t.onBlur,i.onClose),onClick:wr(t.onClick,i.onClose)})})});hge.displayName=_V;var vMe="TooltipPortal",[e$t,yMe]=WF(vMe,{forceMount:void 0}),EA="TooltipContent",fge=C.forwardRef((t,e)=>{const r=yMe(EA,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=t,o=KF(EA,t.__scopeTooltip);return a.jsx(El,{present:n||o.open,children:o.disableHoverableContent?a.jsx(mge,{side:i,...s,ref:e}):a.jsx(bMe,{side:i,...s,ref:e})})}),bMe=C.forwardRef((t,e)=>{const r=KF(EA,t.__scopeTooltip),n=YX(EA,t.__scopeTooltip),i=C.useRef(null),s=An(e,i),[o,l]=C.useState(null),{trigger:c,onClose:u}=r,d=i.current,{onPointerInTransitChange:h}=n,f=C.useCallback(()=>{l(null),h(!1)},[h]),m=C.useCallback((x,g)=>{const y=x.currentTarget,w={x:x.clientX,y:x.clientY},S=EMe(w,y.getBoundingClientRect()),E=jMe(w,S),j=AMe(g.getBoundingClientRect()),T=TMe([...E,...j]);l(T),h(!0)},[h]);return C.useEffect(()=>()=>f(),[f]),C.useEffect(()=>{if(c&&d){const x=y=>m(y,d),g=y=>m(y,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),C.useEffect(()=>{if(o){const x=g=>{const y=g.target,w={x:g.clientX,y:g.clientY},S=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),E=!CMe(w,o);S?f():E&&(f(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,o,u,f]),a.jsx(mge,{...t,ref:s})}),[wMe,_Me]=WF(b3,{isInside:!1}),NMe=Zpe("TooltipContent"),mge=C.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=t,c=KF(EA,r),u=GF(r),{onClose:d}=c;return C.useEffect(()=>(document.addEventListener(wV,d),()=>document.removeEventListener(wV,d)),[d]),C.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(cN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(qF,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(NMe,{children:n}),a.jsx(wMe,{scope:r,isInside:!0,children:a.jsx(UIe,{id:c.contentId,role:"tooltip",children:i||n})})]})})});fge.displayName=EA;var pge="TooltipArrow",SMe=C.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=GF(r);return _Me(pge,r).isInside?null:a.jsx(HF,{...i,...n,ref:e})});SMe.displayName=pge;function EMe(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function jMe(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function AMe(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function CMe(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(i=!i)}return i}function TMe(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),PMe(e)}function PMe(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var kMe=uge,OMe=dge,IMe=hge,gge=fge;const Dp=kMe,Bu=OMe,$u=IMe,Gc=C.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(gge,{ref:n,sideOffset:e,className:Ut("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Gc.displayName=gge.displayName;var VC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},L_=typeof window>"u"||"Deno"in globalThis;function md(){}function RMe(t,e){return typeof t=="function"?t(e):t}function NV(t){return typeof t=="number"&&t>=0&&t!==1/0}function xge(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Jy(t,e){return typeof t=="function"?t(e):t}function hm(t,e){return typeof t=="function"?t(e):t}function Ere(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==ZX(o,e.options))return!1}else if(!w3(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function jre(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(F_(e.options.mutationKey)!==F_(s))return!1}else if(!w3(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function ZX(t,e){return((e==null?void 0:e.queryKeyHashFn)||F_)(t)}function F_(t){return JSON.stringify(t,(e,r)=>SV(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function w3(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>w3(t[r],e[r])):!1}function vge(t,e){if(t===e)return t;const r=Are(t)&&Are(e);if(r||SV(t)&&SV(e)){const n=r?t:Object.keys(t),i=n.length,s=r?e:Object.keys(e),o=s.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const h=r?d:s[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=vge(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function $M(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Are(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function SV(t){if(!Cre(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Cre(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Cre(t){return Object.prototype.toString.call(t)==="[object Object]"}function DMe(t){return new Promise(e=>{setTimeout(e,t)})}function EV(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?vge(t,e):e}function MMe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function LMe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var QX=Symbol();function yge(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===QX?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function bge(t,e){return typeof t=="function"?t(...e):!!t}var Yw,T1,OE,Sfe,FMe=(Sfe=class extends VC{constructor(){super();ge(this,Yw);ge(this,T1);ge(this,OE);ae(this,OE,e=>{if(!L_&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){N(this,T1)||this.setEventListener(N(this,OE))}onUnsubscribe(){var e;this.hasListeners()||((e=N(this,T1))==null||e.call(this),ae(this,T1,void 0))}setEventListener(e){var r;ae(this,OE,e),(r=N(this,T1))==null||r.call(this),ae(this,T1,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){N(this,Yw)!==e&&(ae(this,Yw,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof N(this,Yw)=="boolean"?N(this,Yw):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Yw=new WeakMap,T1=new WeakMap,OE=new WeakMap,Sfe),JX=new FMe,IE,P1,RE,Efe,BMe=(Efe=class extends VC{constructor(){super();ge(this,IE,!0);ge(this,P1);ge(this,RE);ae(this,RE,e=>{if(!L_&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){N(this,P1)||this.setEventListener(N(this,RE))}onUnsubscribe(){var e;this.hasListeners()||((e=N(this,P1))==null||e.call(this),ae(this,P1,void 0))}setEventListener(e){var r;ae(this,RE,e),(r=N(this,P1))==null||r.call(this),ae(this,P1,e(this.setOnline.bind(this)))}setOnline(e){N(this,IE)!==e&&(ae(this,IE,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return N(this,IE)}},IE=new WeakMap,P1=new WeakMap,RE=new WeakMap,Efe),UM=new BMe;function jV(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function $Me(t){return Math.min(1e3*2**t,3e4)}function wge(t){return(t??"online")==="online"?UM.isOnline():!0}var _ge=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function W9(t){return t instanceof _ge}function Nge(t){let e=!1,r=0,n=!1,i;const s=jV(),o=g=>{var y;n||(f(new _ge(g)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>JX.isFocused()&&(t.networkMode==="always"||UM.isOnline())&&t.canRun(),d=()=>wge(t.networkMode)&&t.canRun(),h=g=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,g),i==null||i(),s.resolve(g))},f=g=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,g),i==null||i(),s.reject(g))},m=()=>new Promise(g=>{var y;i=w=>{(n||u())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),x=()=>{if(n)return;let g;const y=r===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var O;if(n)return;const S=t.retry??(L_?0:3),E=t.retryDelay??$Me,j=typeof E=="function"?E(r,w):E,T=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,w);if(e||!T){f(w);return}r++,(O=t.onFail)==null||O.call(t,r,w),DMe(j).then(()=>u()?void 0:m()).then(()=>{e?f(w):x()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():m().then(x),s)}}var UMe=t=>setTimeout(t,0);function zMe(){let t=[],e=0,r=l=>{l()},n=l=>{l()},i=UMe;const s=l=>{e?t.push(l):i(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var Kl=zMe(),Zw,jfe,Sge=(jfe=class{constructor(){ge(this,Zw)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),NV(this.gcTime)&&ae(this,Zw,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(L_?1/0:5*60*1e3))}clearGcTimeout(){N(this,Zw)&&(clearTimeout(N(this,Zw)),ae(this,Zw,void 0))}},Zw=new WeakMap,jfe),DE,Qw,Jf,Jw,Eu,ik,e2,fp,rx,Afe,VMe=(Afe=class extends Sge{constructor(e){super();ge(this,fp);ge(this,DE);ge(this,Qw);ge(this,Jf);ge(this,Jw);ge(this,Eu);ge(this,ik);ge(this,e2);ae(this,e2,!1),ae(this,ik,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,Jw,e.client),ae(this,Jf,N(this,Jw).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,DE,qMe(this.options)),this.state=e.state??N(this,DE),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=N(this,Eu))==null?void 0:e.promise}setOptions(e){this.options={...N(this,ik),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,Jf).remove(this)}setData(e,r){const n=EV(this.state.data,e,this.options);return ve(this,fp,rx).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){ve(this,fp,rx).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=N(this,Eu))==null?void 0:n.promise;return(i=N(this,Eu))==null||i.cancel(e),r?r.then(md).catch(md):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,DE))}isActive(){return this.observers.some(e=>hm(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===QX||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Jy(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!xge(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=N(this,Eu))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=N(this,Eu))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),N(this,Jf).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(N(this,Eu)&&(N(this,e2)?N(this,Eu).cancel({revert:!0}):N(this,Eu).cancelRetry()),this.scheduleGc()),N(this,Jf).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,fp,rx).call(this,{type:"invalidate"})}fetch(e,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(N(this,Eu))return N(this,Eu).continueRetry(),N(this,Eu).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ae(this,e2,!0),n.signal)})},s=()=>{const f=yge(this.options,r),x=(()=>{const g={client:N(this,Jw),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return ae(this,e2,!1),this.options.persister?this.options.persister(f,x,this):f(x)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:N(this,Jw),state:this.state,fetchFn:s};return i(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),ae(this,Qw,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&ve(this,fp,rx).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var m,x,g,y;W9(f)&&f.silent||ve(this,fp,rx).call(this,{type:"error",error:f}),W9(f)||((x=(m=N(this,Jf).config).onError)==null||x.call(m,f,this),(y=(g=N(this,Jf).config).onSettled)==null||y.call(g,this.state.data,f,this)),this.scheduleGc()};return ae(this,Eu,Nge({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,x,g,y;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(w){c(w);return}(x=(m=N(this,Jf).config).onSuccess)==null||x.call(m,f,this),(y=(g=N(this,Jf).config).onSettled)==null||y.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{ve(this,fp,rx).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{ve(this,fp,rx).call(this,{type:"pause"})},onContinue:()=>{ve(this,fp,rx).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),N(this,Eu).start()}},DE=new WeakMap,Qw=new WeakMap,Jf=new WeakMap,Jw=new WeakMap,Eu=new WeakMap,ik=new WeakMap,e2=new WeakMap,fp=new WeakSet,rx=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Ege(n.data,this.options),fetchMeta:e.meta??null};case"success":return ae(this,Qw,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return W9(i)&&i.revert&&N(this,Qw)?{...N(this,Qw),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Kl.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),N(this,Jf).notify({query:this,type:"updated",action:e})})},Afe);function Ege(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wge(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function qMe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var T0,Cfe,HMe=(Cfe=class extends VC{constructor(e={}){super();ge(this,T0);this.config=e,ae(this,T0,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??ZX(i,r);let o=this.get(s);return o||(o=new VMe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){N(this,T0).has(e.queryHash)||(N(this,T0).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=N(this,T0).get(e.queryHash);r&&(e.destroy(),r===e&&N(this,T0).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Kl.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return N(this,T0).get(e)}getAll(){return[...N(this,T0).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Ere(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Ere(e,n)):r}notify(e){Kl.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Kl.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Kl.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},T0=new WeakMap,Cfe),P0,od,t2,k0,d1,Tfe,WMe=(Tfe=class extends Sge{constructor(e){super();ge(this,k0);ge(this,P0);ge(this,od);ge(this,t2);this.mutationId=e.mutationId,ae(this,od,e.mutationCache),ae(this,P0,[]),this.state=e.state||jge(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){N(this,P0).includes(e)||(N(this,P0).push(e),this.clearGcTimeout(),N(this,od).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,P0,N(this,P0).filter(r=>r!==e)),this.scheduleGc(),N(this,od).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){N(this,P0).length||(this.state.status==="pending"?this.scheduleGc():N(this,od).remove(this))}continue(){var e;return((e=N(this,t2))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,l,c,u,d,h,f,m,x,g,y,w,S,E,j,T,O,I,M;const r=()=>{ve(this,k0,d1).call(this,{type:"continue"})};ae(this,t2,Nge({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,z)=>{ve(this,k0,d1).call(this,{type:"failed",failureCount:D,error:z})},onPause:()=>{ve(this,k0,d1).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,od).canRun(this)}));const n=this.state.status==="pending",i=!N(this,t2).canStart();try{if(n)r();else{ve(this,k0,d1).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=N(this,od).config).onMutate)==null?void 0:o.call(s,e,this));const z=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));z!==this.state.context&&ve(this,k0,d1).call(this,{type:"pending",context:z,variables:e,isPaused:i})}const D=await N(this,t2).start();return await((d=(u=N(this,od).config).onSuccess)==null?void 0:d.call(u,D,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,D,e,this.state.context)),await((x=(m=N(this,od).config).onSettled)==null?void 0:x.call(m,D,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,D,null,e,this.state.context)),ve(this,k0,d1).call(this,{type:"success",data:D}),D}catch(D){try{throw await((S=(w=N(this,od).config).onError)==null?void 0:S.call(w,D,e,this.state.context,this)),await((j=(E=this.options).onError)==null?void 0:j.call(E,D,e,this.state.context)),await((O=(T=N(this,od).config).onSettled)==null?void 0:O.call(T,void 0,D,this.state.variables,this.state.context,this)),await((M=(I=this.options).onSettled)==null?void 0:M.call(I,void 0,D,e,this.state.context)),D}finally{ve(this,k0,d1).call(this,{type:"error",error:D})}}finally{N(this,od).runNext(this)}}},P0=new WeakMap,od=new WeakMap,t2=new WeakMap,k0=new WeakSet,d1=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Kl.batch(()=>{N(this,P0).forEach(n=>{n.onMutationUpdate(e)}),N(this,od).notify({mutation:this,type:"updated",action:e})})},Tfe);function jge(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vx,mp,sk,Pfe,GMe=(Pfe=class extends VC{constructor(e={}){super();ge(this,vx);ge(this,mp);ge(this,sk);this.config=e,ae(this,vx,new Set),ae(this,mp,new Map),ae(this,sk,0)}build(e,r,n){const i=new WMe({mutationCache:this,mutationId:++Eo(this,sk)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){N(this,vx).add(e);const r=RR(e);if(typeof r=="string"){const n=N(this,mp).get(r);n?n.push(e):N(this,mp).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(N(this,vx).delete(e)){const r=RR(e);if(typeof r=="string"){const n=N(this,mp).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&N(this,mp).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=RR(e);if(typeof r=="string"){const n=N(this,mp).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=RR(e);if(typeof r=="string"){const i=(n=N(this,mp).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kl.batch(()=>{N(this,vx).forEach(e=>{this.notify({type:"removed",mutation:e})}),N(this,vx).clear(),N(this,mp).clear()})}getAll(){return Array.from(N(this,vx))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>jre(r,n))}findAll(e={}){return this.getAll().filter(r=>jre(e,r))}notify(e){Kl.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Kl.batch(()=>Promise.all(e.map(r=>r.continue().catch(md))))}},vx=new WeakMap,mp=new WeakMap,sk=new WeakMap,Pfe);function RR(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Tre(t){return{onFetch:(e,r)=>{var d,h,f,m,x;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=yge(e.options,e.fetchOptions),S=async(E,j,T)=>{if(g)return Promise.reject();if(j==null&&E.pages.length)return Promise.resolve(E);const I=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:j,direction:T?"backward":"forward",meta:e.options.meta};return y(F),F})(),M=await w(I),{maxPages:D}=e.options,z=T?LMe:MMe;return{pages:z(E.pages,M,D),pageParams:z(E.pageParams,j,D)}};if(i&&s.length){const E=i==="backward",j=E?KMe:Pre,T={pages:s,pageParams:o},O=j(n,T);l=await S(T,O,E)}else{const E=t??s.length;do{const j=c===0?o[0]??n.initialPageParam:Pre(n,l);if(c>0&&j==null)break;l=await S(l,j),c++}while(c<E)}return l};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Pre(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function KMe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Ao,k1,O1,ME,LE,I1,FE,BE,kfe,XMe=(kfe=class{constructor(t={}){ge(this,Ao);ge(this,k1);ge(this,O1);ge(this,ME);ge(this,LE);ge(this,I1);ge(this,FE);ge(this,BE);ae(this,Ao,t.queryCache||new HMe),ae(this,k1,t.mutationCache||new GMe),ae(this,O1,t.defaultOptions||{}),ae(this,ME,new Map),ae(this,LE,new Map),ae(this,I1,0)}mount(){Eo(this,I1)._++,N(this,I1)===1&&(ae(this,FE,JX.subscribe(async t=>{t&&(await this.resumePausedMutations(),N(this,Ao).onFocus())})),ae(this,BE,UM.subscribe(async t=>{t&&(await this.resumePausedMutations(),N(this,Ao).onOnline())})))}unmount(){var t,e;Eo(this,I1)._--,N(this,I1)===0&&((t=N(this,FE))==null||t.call(this),ae(this,FE,void 0),(e=N(this,BE))==null||e.call(this),ae(this,BE,void 0))}isFetching(t){return N(this,Ao).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return N(this,k1).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=N(this,Ao).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=N(this,Ao).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Jy(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return N(this,Ao).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=N(this,Ao).get(n.queryHash),s=i==null?void 0:i.state.data,o=RMe(e,s);if(o!==void 0)return N(this,Ao).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Kl.batch(()=>N(this,Ao).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=N(this,Ao).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=N(this,Ao);Kl.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=N(this,Ao);return Kl.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Kl.batch(()=>N(this,Ao).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(md).catch(md)}invalidateQueries(t,e={}){return Kl.batch(()=>(N(this,Ao).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Kl.batch(()=>N(this,Ao).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(md)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(md)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=N(this,Ao).build(this,e);return r.isStaleByTime(Jy(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(md).catch(md)}fetchInfiniteQuery(t){return t.behavior=Tre(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(md).catch(md)}ensureInfiniteQueryData(t){return t.behavior=Tre(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return UM.isOnline()?N(this,k1).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,Ao)}getMutationCache(){return N(this,k1)}getDefaultOptions(){return N(this,O1)}setDefaultOptions(t){ae(this,O1,t)}setQueryDefaults(t,e){N(this,ME).set(F_(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...N(this,ME).values()],r={};return e.forEach(n=>{w3(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){N(this,LE).set(F_(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...N(this,LE).values()],r={};return e.forEach(n=>{w3(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...N(this,O1).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ZX(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===QX&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...N(this,O1).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){N(this,Ao).clear(),N(this,k1).clear()}},Ao=new WeakMap,k1=new WeakMap,O1=new WeakMap,ME=new WeakMap,LE=new WeakMap,I1=new WeakMap,FE=new WeakMap,BE=new WeakMap,kfe),Wd,Xi,ak,ld,r2,$E,R1,D1,ok,UE,zE,n2,i2,M1,VE,Ts,PT,AV,CV,TV,PV,kV,OV,IV,Age,Ofe,YMe=(Ofe=class extends VC{constructor(e,r){super();ge(this,Ts);ge(this,Wd);ge(this,Xi);ge(this,ak);ge(this,ld);ge(this,r2);ge(this,$E);ge(this,R1);ge(this,D1);ge(this,ok);ge(this,UE);ge(this,zE);ge(this,n2);ge(this,i2);ge(this,M1);ge(this,VE,new Set);this.options=r,ae(this,Wd,e),ae(this,D1,null),ae(this,R1,jV()),this.options.experimental_prefetchInRender||N(this,R1).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,Xi).addObserver(this),kre(N(this,Xi),this.options)?ve(this,Ts,PT).call(this):this.updateResult(),ve(this,Ts,PV).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return RV(N(this,Xi),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return RV(N(this,Xi),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ve(this,Ts,kV).call(this),ve(this,Ts,OV).call(this),N(this,Xi).removeObserver(this)}setOptions(e){const r=this.options,n=N(this,Xi);if(this.options=N(this,Wd).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hm(this.options.enabled,N(this,Xi))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ve(this,Ts,IV).call(this),N(this,Xi).setOptions(this.options),r._defaulted&&!$M(this.options,r)&&N(this,Wd).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,Xi),observer:this});const i=this.hasListeners();i&&Ore(N(this,Xi),n,this.options,r)&&ve(this,Ts,PT).call(this),this.updateResult(),i&&(N(this,Xi)!==n||hm(this.options.enabled,N(this,Xi))!==hm(r.enabled,N(this,Xi))||Jy(this.options.staleTime,N(this,Xi))!==Jy(r.staleTime,N(this,Xi)))&&ve(this,Ts,AV).call(this);const s=ve(this,Ts,CV).call(this);i&&(N(this,Xi)!==n||hm(this.options.enabled,N(this,Xi))!==hm(r.enabled,N(this,Xi))||s!==N(this,M1))&&ve(this,Ts,TV).call(this,s)}getOptimisticResult(e){const r=N(this,Wd).getQueryCache().build(N(this,Wd),e),n=this.createResult(r,e);return QMe(this,n)&&(ae(this,ld,n),ae(this,$E,this.options),ae(this,r2,N(this,Xi).state)),n}getCurrentResult(){return N(this,ld)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),Reflect.get(n,i))})}trackProp(e){N(this,VE).add(e)}getCurrentQuery(){return N(this,Xi)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=N(this,Wd).defaultQueryOptions(e),n=N(this,Wd).getQueryCache().build(N(this,Wd),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return ve(this,Ts,PT).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,ld)))}createResult(e,r){var D;const n=N(this,Xi),i=this.options,s=N(this,ld),o=N(this,r2),l=N(this,$E),u=e!==n?e.state:N(this,ak),{state:d}=e;let h={...d},f=!1,m;if(r._optimisticResults){const z=this.hasListeners(),F=!z&&kre(e,r),q=z&&Ore(e,n,r,i);(F||q)&&(h={...h,...Ege(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:y}=h;m=h.data;let w=!1;if(r.placeholderData!==void 0&&m===void 0&&y==="pending"){let z;s!=null&&s.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(z=s.data,w=!0):z=typeof r.placeholderData=="function"?r.placeholderData((D=N(this,zE))==null?void 0:D.state.data,N(this,zE)):r.placeholderData,z!==void 0&&(y="success",m=EV(s==null?void 0:s.data,z,r),f=!0)}if(r.select&&m!==void 0&&!w)if(s&&m===(o==null?void 0:o.data)&&r.select===N(this,ok))m=N(this,UE);else try{ae(this,ok,r.select),m=r.select(m),m=EV(s==null?void 0:s.data,m,r),ae(this,UE,m),ae(this,D1,null)}catch(z){ae(this,D1,z)}N(this,D1)&&(x=N(this,D1),m=N(this,UE),g=Date.now(),y="error");const S=h.fetchStatus==="fetching",E=y==="pending",j=y==="error",T=E&&S,O=m!==void 0,M={status:y,fetchStatus:h.fetchStatus,isPending:E,isSuccess:y==="success",isError:j,isInitialLoading:T,isLoading:T,data:m,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!E,isLoadingError:j&&!O,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&O,isStale:eY(e,r),refetch:this.refetch,promise:N(this,R1),isEnabled:hm(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const z=Q=>{M.status==="error"?Q.reject(M.error):M.data!==void 0&&Q.resolve(M.data)},F=()=>{const Q=ae(this,R1,M.promise=jV());z(Q)},q=N(this,R1);switch(q.status){case"pending":e.queryHash===n.queryHash&&z(q);break;case"fulfilled":(M.status==="error"||M.data!==q.value)&&F();break;case"rejected":(M.status!=="error"||M.error!==q.reason)&&F();break}}return M}updateResult(){const e=N(this,ld),r=this.createResult(N(this,Xi),this.options);if(ae(this,r2,N(this,Xi).state),ae(this,$E,this.options),N(this,r2).data!==void 0&&ae(this,zE,N(this,Xi)),$M(r,e))return;ae(this,ld,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!N(this,VE).size)return!0;const o=new Set(s??N(this,VE));return this.options.throwOnError&&o.add("error"),Object.keys(N(this,ld)).some(l=>{const c=l;return N(this,ld)[c]!==e[c]&&o.has(c)})};ve(this,Ts,Age).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ve(this,Ts,PV).call(this)}},Wd=new WeakMap,Xi=new WeakMap,ak=new WeakMap,ld=new WeakMap,r2=new WeakMap,$E=new WeakMap,R1=new WeakMap,D1=new WeakMap,ok=new WeakMap,UE=new WeakMap,zE=new WeakMap,n2=new WeakMap,i2=new WeakMap,M1=new WeakMap,VE=new WeakMap,Ts=new WeakSet,PT=function(e){ve(this,Ts,IV).call(this);let r=N(this,Xi).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(md)),r},AV=function(){ve(this,Ts,kV).call(this);const e=Jy(this.options.staleTime,N(this,Xi));if(L_||N(this,ld).isStale||!NV(e))return;const n=xge(N(this,ld).dataUpdatedAt,e)+1;ae(this,n2,setTimeout(()=>{N(this,ld).isStale||this.updateResult()},n))},CV=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,Xi)):this.options.refetchInterval)??!1},TV=function(e){ve(this,Ts,OV).call(this),ae(this,M1,e),!(L_||hm(this.options.enabled,N(this,Xi))===!1||!NV(N(this,M1))||N(this,M1)===0)&&ae(this,i2,setInterval(()=>{(this.options.refetchIntervalInBackground||JX.isFocused())&&ve(this,Ts,PT).call(this)},N(this,M1)))},PV=function(){ve(this,Ts,AV).call(this),ve(this,Ts,TV).call(this,ve(this,Ts,CV).call(this))},kV=function(){N(this,n2)&&(clearTimeout(N(this,n2)),ae(this,n2,void 0))},OV=function(){N(this,i2)&&(clearInterval(N(this,i2)),ae(this,i2,void 0))},IV=function(){const e=N(this,Wd).getQueryCache().build(N(this,Wd),this.options);if(e===N(this,Xi))return;const r=N(this,Xi);ae(this,Xi,e),ae(this,ak,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Age=function(e){Kl.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(N(this,ld))}),N(this,Wd).getQueryCache().notify({query:N(this,Xi),type:"observerResultsUpdated"})})},Ofe);function ZMe(t,e){return hm(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function kre(t,e){return ZMe(t,e)||t.state.data!==void 0&&RV(t,e,e.refetchOnMount)}function RV(t,e,r){if(hm(e.enabled,t)!==!1&&Jy(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&eY(t,e)}return!1}function Ore(t,e,r,n){return(t!==e||hm(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&eY(t,r)}function eY(t,e){return hm(e.enabled,t)!==!1&&t.isStaleByTime(Jy(e.staleTime,t))}function QMe(t,e){return!$M(t.getCurrentResult(),e)}var L1,F1,Gd,yx,fv,d6,DV,Ife,JMe=(Ife=class extends VC{constructor(r,n){super();ge(this,fv);ge(this,L1);ge(this,F1);ge(this,Gd);ge(this,yx);ae(this,L1,r),this.setOptions(n),this.bindMethods(),ve(this,fv,d6).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=N(this,L1).defaultMutationOptions(r),$M(this.options,n)||N(this,L1).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,Gd),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&F_(n.mutationKey)!==F_(this.options.mutationKey)?this.reset():((i=N(this,Gd))==null?void 0:i.state.status)==="pending"&&N(this,Gd).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=N(this,Gd))==null||r.removeObserver(this)}onMutationUpdate(r){ve(this,fv,d6).call(this),ve(this,fv,DV).call(this,r)}getCurrentResult(){return N(this,F1)}reset(){var r;(r=N(this,Gd))==null||r.removeObserver(this),ae(this,Gd,void 0),ve(this,fv,d6).call(this),ve(this,fv,DV).call(this)}mutate(r,n){var i;return ae(this,yx,n),(i=N(this,Gd))==null||i.removeObserver(this),ae(this,Gd,N(this,L1).getMutationCache().build(N(this,L1),this.options)),N(this,Gd).addObserver(this),N(this,Gd).execute(r)}},L1=new WeakMap,F1=new WeakMap,Gd=new WeakMap,yx=new WeakMap,fv=new WeakSet,d6=function(){var n;const r=((n=N(this,Gd))==null?void 0:n.state)??jge();ae(this,F1,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},DV=function(r){Kl.batch(()=>{var n,i,s,o,l,c,u,d;if(N(this,yx)&&this.hasListeners()){const h=N(this,F1).variables,f=N(this,F1).context;(r==null?void 0:r.type)==="success"?((i=(n=N(this,yx)).onSuccess)==null||i.call(n,r.data,h,f),(o=(s=N(this,yx)).onSettled)==null||o.call(s,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((c=(l=N(this,yx)).onError)==null||c.call(l,r.error,h,f),(d=(u=N(this,yx)).onSettled)==null||d.call(u,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(N(this,F1))})})},Ife),Cge=C.createContext(void 0),tY=t=>{const e=C.useContext(Cge);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},e8e=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(Cge.Provider,{value:t,children:e})),Tge=C.createContext(!1),t8e=()=>C.useContext(Tge);Tge.Provider;function r8e(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var n8e=C.createContext(r8e()),i8e=()=>C.useContext(n8e),s8e=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},a8e=t=>{C.useEffect(()=>{t.clearReset()},[t])},o8e=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||bge(r,[t.error,n])),l8e=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},c8e=(t,e)=>t.isLoading&&t.isFetching&&!e,u8e=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ire=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function d8e(t,e,r){var h,f,m,x,g;const n=t8e(),i=i8e(),s=tY(),o=s.defaultQueryOptions(t);(f=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",l8e(o),s8e(o,i),a8e(i);const l=!s.getQueryCache().get(o.queryHash),[c]=C.useState(()=>new e(s,o)),u=c.getOptimisticResult(o),d=!n&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(y=>{const w=d?c.subscribe(Kl.batchCalls(y)):md;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),C.useEffect(()=>{c.setOptions(o)},[o,c]),u8e(o,u))throw Ire(o,c,i);if(o8e({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((x=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,o,u),o.experimental_prefetchInRender&&!L_&&c8e(u,n)){const y=l?Ire(o,c,i):(g=s.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(md).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function h8e(t,e){return d8e(t,YMe)}function G9(t,e){const r=tY(),[n]=C.useState(()=>new JMe(r,t));C.useEffect(()=>{n.setOptions(t)},[n,t]);const i=C.useSyncExternalStore(C.useCallback(o=>n.subscribe(Kl.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=C.useCallback((o,l)=>{n.mutate(o,l).catch(md)},[n]);if(i.error&&bge(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _3(){return _3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_3.apply(this,arguments)}var Dy;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dy||(Dy={}));const Rre="popstate";function f8e(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:l}=n.location;return MV("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:zM(i)}return p8e(e,r,null,t)}function ol(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pge(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m8e(){return Math.random().toString(36).substr(2,8)}function Dre(t,e){return{usr:t.state,key:t.key,idx:e}}function MV(t,e,r,n){return r===void 0&&(r=null),_3({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qC(e):e,{state:r,key:e&&e.key||n||m8e()})}function zM(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function qC(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function p8e(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,l=Dy.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(_3({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Dy.Pop;let y=d(),w=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:w})}function f(y,w){l=Dy.Push;let S=MV(g.location,y,w);u=d()+1;let E=Dre(S,u),j=g.createHref(S);try{o.pushState(E,"",j)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(j)}s&&c&&c({action:l,location:g.location,delta:1})}function m(y,w){l=Dy.Replace;let S=MV(g.location,y,w);u=d();let E=Dre(S,u),j=g.createHref(S);o.replaceState(E,"",j),s&&c&&c({action:l,location:g.location,delta:0})}function x(y){let w=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof y=="string"?y:zM(y);return S=S.replace(/ $/,"%20"),ol(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let g={get action(){return l},get location(){return t(i,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Rre,h),c=y,()=>{i.removeEventListener(Rre,h),c=null}},createHref(y){return e(i,y)},createURL:x,encodeLocation(y){let w=x(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(y){return o.go(y)}};return g}var Mre;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mre||(Mre={}));function g8e(t,e,r){return r===void 0&&(r="/"),x8e(t,e,r,!1)}function x8e(t,e,r,n){let i=typeof e=="string"?qC(e):e,s=rY(i.pathname||"/",r);if(s==null)return null;let o=kge(t);v8e(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=T8e(s);l=A8e(o[c],u,n)}return l}function kge(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(ol(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=eb([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(ol(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),kge(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:E8e(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of Oge(s.path))i(s,o,c)}),e}function Oge(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Oge(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function v8e(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:j8e(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const y8e=/^:[\w-]+$/,b8e=3,w8e=2,_8e=1,N8e=10,S8e=-2,Lre=t=>t==="*";function E8e(t,e){let r=t.split("/"),n=r.length;return r.some(Lre)&&(n+=S8e),e&&(n+=w8e),r.filter(i=>!Lre(i)).reduce((i,s)=>i+(y8e.test(s)?b8e:s===""?_8e:N8e),n)}function j8e(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function A8e(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Fre({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Fre({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:eb([s,h.pathname]),pathnameBase:I8e(eb([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=eb([s,h.pathnameBase]))}return o}function Fre(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=C8e(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[h];return m&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function C8e(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Pge(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function T8e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pge(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rY(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function P8e(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?qC(t):t;return{pathname:r?r.startsWith("/")?r:k8e(r,e):e,search:R8e(n),hash:D8e(i)}}function k8e(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function K9(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function O8e(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nY(t,e){let r=O8e(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function iY(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=qC(t):(i=_3({},t),ol(!i.pathname||!i.pathname.includes("?"),K9("?","pathname","search",i)),ol(!i.pathname||!i.pathname.includes("#"),K9("#","pathname","hash",i)),ol(!i.search||!i.search.includes("#"),K9("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=P8e(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const eb=t=>t.join("/").replace(/\/\/+/g,"/"),I8e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R8e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,D8e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M8e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ige=["post","put","patch","delete"];new Set(Ige);const L8e=["get",...Ige];new Set(L8e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N3(){return N3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N3.apply(this,arguments)}const sY=C.createContext(null),F8e=C.createContext(null),zb=C.createContext(null),XF=C.createContext(null),Fv=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Rge=C.createContext(null);function B8e(t,e){let{relative:r}=e===void 0?{}:e;HC()||ol(!1);let{basename:n,navigator:i}=C.useContext(zb),{hash:s,pathname:o,search:l}=Mge(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:eb([n,o])),i.createHref({pathname:c,search:l,hash:s})}function HC(){return C.useContext(XF)!=null}function Bg(){return HC()||ol(!1),C.useContext(XF).location}function Dge(t){C.useContext(zb).static||C.useLayoutEffect(t)}function nn(){let{isDataRoute:t}=C.useContext(Fv);return t?Q8e():$8e()}function $8e(){HC()||ol(!1);let t=C.useContext(sY),{basename:e,future:r,navigator:n}=C.useContext(zb),{matches:i}=C.useContext(Fv),{pathname:s}=Bg(),o=JSON.stringify(nY(i,r.v7_relativeSplatPath)),l=C.useRef(!1);return Dge(()=>{l.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=iY(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:eb([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function o0(){let{matches:t}=C.useContext(Fv),e=t[t.length-1];return e?e.params:{}}function Mge(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=C.useContext(zb),{matches:i}=C.useContext(Fv),{pathname:s}=Bg(),o=JSON.stringify(nY(i,n.v7_relativeSplatPath));return C.useMemo(()=>iY(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function U8e(t,e){return z8e(t,e)}function z8e(t,e,r,n){HC()||ol(!1);let{navigator:i}=C.useContext(zb),{matches:s}=C.useContext(Fv),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Bg(),d;if(e){var h;let y=typeof e=="string"?qC(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ol(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=g8e(t,{pathname:m}),g=G8e(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:eb([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:eb([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?C.createElement(XF.Provider,{value:{location:N3({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Dy.Pop}},g):g}function V8e(){let t=Z8e(),e=M8e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:i},r):null,null)}const q8e=C.createElement(V8e,null);class H8e extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?C.createElement(Fv.Provider,{value:this.props.routeContext},C.createElement(Rge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function W8e(t){let{routeContext:e,match:r,children:n}=t,i=C.useContext(sY);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Fv.Provider,{value:e},n)}function G8e(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ol(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=r,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,x=!1,g=null,y=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||q8e,c&&(u<0&&f===0?(x=!0,y=null):u===f&&(x=!0,y=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),S=()=>{let E;return m?E=g:x?E=y:h.route.Component?E=C.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,C.createElement(W8e,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:E})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?C.createElement(H8e,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var Lge=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Lge||{}),VM=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(VM||{});function K8e(t){let e=C.useContext(sY);return e||ol(!1),e}function X8e(t){let e=C.useContext(F8e);return e||ol(!1),e}function Y8e(t){let e=C.useContext(Fv);return e||ol(!1),e}function Fge(t){let e=Y8e(),r=e.matches[e.matches.length-1];return r.route.id||ol(!1),r.route.id}function Z8e(){var t;let e=C.useContext(Rge),r=X8e(VM.UseRouteError),n=Fge(VM.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Q8e(){let{router:t}=K8e(Lge.UseNavigateStable),e=Fge(VM.UseNavigateStable),r=C.useRef(!1);return Dge(()=>{r.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,N3({fromRouteId:e},s)))},[t,e])}function J8e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mx(t){let{to:e,replace:r,state:n,relative:i}=t;HC()||ol(!1);let{future:s,static:o}=C.useContext(zb),{matches:l}=C.useContext(Fv),{pathname:c}=Bg(),u=nn(),d=iY(e,nY(l,s.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function un(t){ol(!1)}function eLe(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Dy.Pop,navigator:s,static:o=!1,future:l}=t;HC()&&ol(!1);let c=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:c,navigator:s,static:o,future:N3({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=qC(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:x="default"}=n,g=C.useMemo(()=>{let y=rY(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:x},navigationType:i}},[c,d,h,f,m,x,i]);return g==null?null:C.createElement(zb.Provider,{value:u},C.createElement(XF.Provider,{children:r,value:g}))}function tLe(t){let{children:e,location:r}=t;return U8e(LV(e),r)}new Promise(()=>{});function LV(t,e){e===void 0&&(e=[]);let r=[];return C.Children.forEach(t,(n,i)=>{if(!C.isValidElement(n))return;let s=[...e,i];if(n.type===C.Fragment){r.push.apply(r,LV(n.props.children,s));return}n.type!==un&&ol(!1),!n.props.index||!n.props.children||ol(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=LV(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function FV(){return FV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FV.apply(this,arguments)}function rLe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function nLe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iLe(t,e){return t.button===0&&(!e||e==="_self")&&!nLe(t)}function BV(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function sLe(t,e){let r=BV(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const aLe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oLe="6";try{window.__reactRouterVersion=oLe}catch{}const lLe="startTransition",Bre=$K[lLe];function cLe(t){let{basename:e,children:r,future:n,window:i}=t,s=C.useRef();s.current==null&&(s.current=f8e({window:i,v5Compat:!0}));let o=s.current,[l,c]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=C.useCallback(h=>{u&&Bre?Bre(()=>c(h)):c(h)},[c,u]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>J8e(n),[n]),C.createElement(eLe,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const uLe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dLe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bge=C.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=rLe(e,aLe),{basename:m}=C.useContext(zb),x,g=!1;if(typeof u=="string"&&dLe.test(u)&&(x=u,uLe))try{let E=new URL(window.location.href),j=u.startsWith("//")?new URL(E.protocol+u):new URL(u),T=rY(j.pathname,m);j.origin===E.origin&&T!=null?u=T+j.search+j.hash:g=!0}catch{}let y=B8e(u,{relative:i}),w=hLe(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});function S(E){n&&n(E),E.defaultPrevented||w(E)}return C.createElement("a",FV({},f,{href:x||y,onClick:g||s?n:S,ref:r,target:c}))});var $re;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($re||($re={}));var Ure;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ure||(Ure={}));function hLe(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=nn(),u=Bg(),d=Mge(t,{relative:o});return C.useCallback(h=>{if(iLe(h,r)){h.preventDefault();let f=n!==void 0?n:zM(u)===zM(d);c(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,n,i,r,t,s,o,l])}function $ge(t){let e=C.useRef(BV(t)),r=C.useRef(!1),n=Bg(),i=C.useMemo(()=>sLe(n.search,r.current?null:e.current),[n.search]),s=nn(),o=C.useCallback((l,c)=>{const u=BV(typeof l=="function"?l(i):l);r.current=!0,s("?"+u,c)},[s,i]);return[i,o]}var ag=function(){return ag=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ag.apply(this,arguments)};function WC(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function fLe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function mLe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}const pLe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class aY extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class gLe extends aY{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zre extends aY{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vre extends aY{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $V;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})($V||($V={}));class xLe{constructor(e,{headers:r={},customFetch:n,region:i=$V.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=pLe(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fLe(this,arguments,void 0,function*(r,n={}){var i;let s,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const x=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,x.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let y=d;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),d?(y=o.signal,d.addEventListener("abort",()=>o.abort())):y=o.signal);const w=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:y}).catch(T=>{throw new gLe(T)}),S=w.headers.get("x-relay-error");if(S&&S==="true")throw new zre(w);if(!w.ok)throw new Vre(w);let E=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return E==="application/json"?j=yield w.json():E==="application/octet-stream"||E==="application/pdf"?j=yield w.blob():E==="text/event-stream"?j=w:E==="multipart/form-data"?j=yield w.formData():j=yield w.text(),{data:j,error:null,response:w}}catch(l){return{data:null,error:l,response:l instanceof Vre||l instanceof zre?l.context:void 0}}finally{s&&clearTimeout(s)}})}}var vLe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},yLe=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,l=null,c=null,u=s.status,d=s.statusText;if(s.ok){var h,f;if(r.method!=="HEAD"){var m;const w=await s.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=w:l=JSON.parse(w))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),y=(f=s.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&y&&y.length>1&&(c=parseInt(y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var x;const g=await s.text();try{o=JSON.parse(g),Array.isArray(o)&&s.status===404&&(l=[],o=null,u=200,d="OK")}catch{s.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(x=o.details)===null||x===void 0)&&x.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new vLe(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let l="";const c=s==null?void 0:s.cause;if(c){var u,d,h,f;const x=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${x}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=s==null?void 0:s.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},bLe=class extends yLe{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const qre=new RegExp("[,()]");var uS=class extends bLe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&qre.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&qre.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},wLe=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new uS({method:i,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);s.searchParams.set("columns",c.join(","))}}return new uS({method:i,url:s,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var s;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),n&&c.append("Prefer",`count=${n}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new uS({method:o,url:l,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new uS({method:n,url:i,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new uS({method:r,url:n,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},_Le=class Uge{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new wLe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Uge(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:s}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||i?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,x])=>x!==void 0).map(([m,x])=>[m,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([m,x])=>{c.searchParams.append(m,x)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&f.set("Prefer",`count=${s}`),new uS({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class NLe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const SLe="2.90.1",ELe=`realtime-js/${SLe}`,zge="1.0.0",jLe="2.0.0",Hre=zge,UV=1e4,ALe=1e3,CLe=100;var v1;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(v1||(v1={}));var Ml;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ml||(Ml={}));var Cp;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Cp||(Cp={}));var zV;(function(t){t.websocket="websocket"})(zV||(zV={}));var jw;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jw||(jw={}));class TLe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,s;const o=e.topic,l=(i=e.ref)!==null&&i!==void 0?i:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let x=new DataView(m),g=0;x.setUint8(g++,this.KINDS.userBroadcastPush),x.setUint8(g++,c.length),x.setUint8(g++,l.length),x.setUint8(g++,o.length),x.setUint8(g++,u.length),x.setUint8(g++,h.length),x.setUint8(g++,r),Array.from(c,w=>x.setUint8(g++,w.charCodeAt(0))),Array.from(l,w=>x.setUint8(g++,w.charCodeAt(0))),Array.from(o,w=>x.setUint8(g++,w.charCodeAt(0))),Array.from(u,w=>x.setUint8(g++,w.charCodeAt(0))),Array.from(h,w=>x.setUint8(g++,w.charCodeAt(0)));var y=new Uint8Array(m.byteLength+n.byteLength);return y.set(new Uint8Array(m),0),y.set(new Uint8Array(n),m.byteLength),y.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,o,l,c]=n;return r({join_ref:i,ref:s,topic:o,event:l,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(e.slice(c,c+i));c=c+i;const d=n.decode(e.slice(c,c+s));c=c+s;const h=n.decode(e.slice(c,c+o));c=c+o;const f=e.slice(c,e.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,x={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(x.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Vge{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ma;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ma||(ma={}));const Wre=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=PLe(o,t,e,i),s),{}):{}},PLe=(t,e,r,n)=>{const i=e.find(l=>l.name===t),s=i==null?void 0:i.type,o=r[t];return s&&!n.includes(s)?qge(s,o):VV(o)},qge=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return RLe(e,r)}switch(t){case ma.bool:return kLe(e);case ma.float4:case ma.float8:case ma.int2:case ma.int4:case ma.int8:case ma.numeric:case ma.oid:return OLe(e);case ma.json:case ma.jsonb:return ILe(e);case ma.timestamp:return DLe(e);case ma.abstime:case ma.date:case ma.daterange:case ma.int4range:case ma.int8range:case ma.money:case ma.reltime:case ma.text:case ma.time:case ma.timestamptz:case ma.timetz:case ma.tsrange:case ma.tstzrange:return VV(e);default:return VV(e)}},VV=t=>t,kLe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},OLe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ILe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},RLe=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>qge(e,l))}return t},DLe=t=>typeof t=="string"?t.replace(" ","T"):t,Hge=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class X9{constructor(e,r,n={},i=UV){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gre;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gre||(Gre={}));class v4{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=v4.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=v4.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=v4.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(s,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=s[u];if(h){const f=d.map(y=>y.presence_ref),m=h.map(y=>y.presence_ref),x=d.filter(y=>m.indexOf(y.presence_ref)<0),g=h.filter(y=>f.indexOf(y.presence_ref)<0);x.length>0&&(l[u]=x),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Kre;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Kre||(Kre={}));var y4;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(y4||(y4={}));var cx;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cx||(cx={}));class US{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ml.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new X9(this,Cp.join,this.params,this.timeout),this.rejoinTimer=new Vge(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ml.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ml.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ml.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ml.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ml.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cp.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new v4(this),this.broadcastEndpointURL=Hge(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ml.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[y4.PRESENCE]&&this.bindings[y4.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(cx.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(cx.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(cx.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,w=[];for(let S=0;S<y;S++){const E=g[S],{filter:{event:j,schema:T,table:O,filter:I}}=E,M=m&&m[S];if(M&&M.event===j&&US.isFilterValueEqual(M.schema,T)&&US.isFilterValueEqual(M.table,O)&&US.isFilterValueEqual(M.filter,I))w.push(Object.assign(Object.assign({},E),{id:M.id}));else{this.unsubscribe(),this.state=Ml.errored,e==null||e(cx.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(cx.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ml.errored,e==null||e(cx.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cx.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ml.joined&&e===y4.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ml.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cp.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new X9(this,Cp.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ml.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new X9(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>CLe){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Cp;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var x,g,y;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var x,g,y,w,S,E,j,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const O=m.id,I=(x=m.filter)===null||x===void 0?void 0:x.event;return O&&((g=r.ids)===null||g===void 0?void 0:g.includes(O))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))&&(!(!((w=m.filter)===null||w===void 0)&&w.table)||m.filter.table===((S=r.data)===null||S===void 0?void 0:S.table))}else{const O=(j=(E=m==null?void 0:m.filter)===null||E===void 0?void 0:E.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return O==="*"||O===((T=r==null?void 0:r.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:y,commit_timestamp:w,type:S,errors:E}=x;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:S,new:{},old:{},errors:E}),this._getPayloadRecords(x))}m.callback(f,n)})}_isClosed(){return this.state===Ml.closed}_isJoined(){return this.state===Ml.joined}_isJoining(){return this.state===Ml.joining}_isLeaving(){return this.state===Ml.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&US.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Cp.close,{},e)}_onError(e){this._on(Cp.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ml.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Wre(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Wre(e.columns,e.old_record)),r}}const Y9=()=>{},DR={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},MLe=[1e3,2e3,5e3,1e4],LLe=1e4,FLe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class BLe{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=UV,this.transport=null,this.heartbeatIntervalMs=DR.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Y9,this.ref=0,this.reconnectTimer=null,this.vsn=Hre,this.logger=Y9,this.conn=null,this.sendBuffer=[],this.serializer=new TLe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${zV.websocket}`,this.httpEndpoint=Hge(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=NLe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case v1.connecting:return jw.Connecting;case v1.open:return jw.Open;case v1.closing:return jw.Closing;default:return jw.Closed}}isConnected(){return this.connectionState()===jw.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new US(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ALe,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},DR.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:s,ref:o}=r,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===v1.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===v1.open||this.conn.readyState===v1.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Cp.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([FLe],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const s={access_token:r,version:ELe};r&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Cp.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vge(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},DR.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,l,c,u,d,h,f,m;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:UV,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:DR.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Y9,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:Hre,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:x=>MLe[x-1]||LLe,this.vsn){case zge:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(x,g)=>g(JSON.stringify(x)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(x,g)=>g(JSON.parse(x));break;case jLe:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var S3=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $Le(t,e,r){const n=new URL(e,t);if(r)for(const[i,s]of Object.entries(r))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function ULe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function zLe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:o}){const l=$Le(t.baseUrl,n,i),c=await ULe(t.auth),u=await e(l,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...c,...o},body:s?JSON.stringify(s):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,x=m==null?void 0:m.error;throw new S3((x==null?void 0:x.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function MR(t){return t.join("")}var VLe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:MR(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${MR(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${MR(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${MR(t.namespace)}`}),!0}catch(e){if(e instanceof S3&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof S3&&r.status===409)return;throw r}}};function BN(t){return t.join("")}var qLe=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${BN(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${BN(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${BN(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${BN(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${BN(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${BN(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof S3&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof S3&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},HLe=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=zLe({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new VLe(this.client,e),this.tableOps=new qLe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},YF=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function uo(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var WLe=class extends YF{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qV=class extends YF{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const oY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),GLe=()=>Response,HV=t=>{if(Array.isArray(t))return t.map(r=>HV(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=HV(n)}),e},KLe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},XLe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function E3(t){"@babel/helpers - typeof";return E3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E3(t)}function YLe(t,e){if(E3(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(E3(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZLe(t){var e=YLe(t,"string");return E3(e)=="symbol"?e:e+""}function QLe(t,e,r){return(e=ZLe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xre(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xre(Object(r),!0).forEach(function(n){QLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xre(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Z9=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},JLe=async(t,e,r)=>{t instanceof await GLe()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const i=t.status||500,s=(n==null?void 0:n.statusCode)||i+"";e(new WLe(Z9(n),i,s))}).catch(n=>{e(new qV(Z9(n),n))}):e(new qV(Z9(t),t))},eFe=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(KLe(n)?(i.headers=Wn({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Wn(Wn({},i),r))};async function QO(t,e,r,n,i,s){return new Promise((o,l)=>{t(r,eFe(e,n,i,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>JLe(c,l,n))})}async function j3(t,e,r,n){return QO(t,"GET",e,r,n)}async function hp(t,e,r,n,i){return QO(t,"POST",e,n,i,r)}async function WV(t,e,r,n,i){return QO(t,"PUT",e,n,i,r)}async function tFe(t,e,r,n){return QO(t,"HEAD",e,Wn(Wn({},r),{},{noResolveJson:!0}),n)}async function lY(t,e,r,n,i){return QO(t,"DELETE",e,n,i,r)}var rFe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(uo(e))return{data:null,error:e};throw e}}};let Wge;Wge=Symbol.toStringTag;var nFe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Wge]="BlobDownloadBuilder",this.promise=null}asStream(){return new rFe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(uo(e))return{data:null,error:e};throw e}}};const iFe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yre={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var sFe=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=oY(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var i=this;try{let s;const o=Wn(Wn({},Yre),n);let l=Wn(Wn({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",i.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),c&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=Wn(Wn({},l),n.headers));const u=i._removeEmptyFolders(e),d=i._getFinalPath(u),h=await(t=="PUT"?WV:hp)(i.fetch,`${i.url}/object/${d}`,s,Wn({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(uo(s))return{data:null,error:s};throw s}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),l=new URL(i.url+`/object/upload/sign/${o}`);l.searchParams.set("token",e);try{let c;const u=Wn({upsert:Yre.upsert},n),d=Wn(Wn({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:s,fullPath:(await WV(i.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(uo(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const i=Wn({},r.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await hp(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(r.url+s.url),l=o.searchParams.get("token");if(!l)throw new YF("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(uo(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await hp(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(uo(i))return{data:null,error:i};throw i}}async copy(t,e,r){var n=this;try{return{data:{path:(await hp(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(uo(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,r){var n=this;try{let i=n._getFinalPath(t),s=await hp(n.fetch,`${n.url}/object/sign/${i}`,Wn({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${n.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(uo(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,r){var n=this;try{const i=await hp(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Wn(Wn({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(uo(i))return{data:null,error:i};throw i}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=n?`?${n}`:"",s=this._getFinalPath(t),o=()=>j3(this.fetch,`${this.url}/${r}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new nFe(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:HV(await j3(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(uo(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await tFe(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(uo(n)&&n instanceof qV){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${l}`)}}}async remove(t){var e=this;try{return{data:await lY(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const i=Wn(Wn(Wn({},iFe),e),{},{prefix:t||""});return{data:await hp(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(uo(i))return{data:null,error:i};throw i}}async listV2(t,e){var r=this;try{const n=Wn({},t);return{data:await hp(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(uo(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Gge="2.90.1",Kge={"X-Client-Info":`storage-js/${Gge}`};var aFe=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Wn(Wn({},Kge),e),this.fetch=oY(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await j3(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await j3(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await hp(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(uo(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await WV(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(uo(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await hp(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await lY(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},oFe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Wn(Wn({},Kge),e),this.fetch=oY(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await hp(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await j3(e.fetch,i,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await lY(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uo(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!XLe(t))throw new YF("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new HLe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(i,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const cY={"X-Client-Info":`storage-js/${Gge}`,"Content-Type":"application/json"};var Xge=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function xf(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Q9=class extends Xge{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},lFe=class extends Xge{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const uY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cFe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zre=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),uFe=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||n+"";e(new Q9(Zre(s),n,o))}).catch(()=>{const s=n+"";e(new Q9(i.statusText||`HTTP ${n} error`,n,s))});else{const s=n+"";e(new Q9(i.statusText||`HTTP ${n} error`,n,s))}}else e(new lFe(Zre(t),t))},dFe=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(cFe(n)?(i.headers=Wn({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Wn(Wn({},i),r)):i};async function hFe(t,e,r,n,i,s){return new Promise((o,l)=>{t(r,dFe(e,n,i,s)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>uFe(c,l,n))})}async function vf(t,e,r,n,i){return hFe(t,"POST",e,n,i,r)}var fFe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Wn(Wn({},cY),e),this.fetch=uY(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await vf(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xf(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await vf(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xf(n))return{data:null,error:n};throw n}}},mFe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Wn(Wn({},cY),e),this.fetch=uY(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await vf(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await vf(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await vf(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}},pFe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Wn(Wn({},cY),e),this.fetch=uY(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await vf(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await vf(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xf(r))return{data:null,error:r};throw r}}},gFe=class extends pFe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new xFe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},xFe=class extends fFe{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new vFe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},vFe=class extends mFe{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Wn(Wn({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},yFe=class extends aFe{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new sFe(this.url,this.headers,t,this.fetch)}get vectors(){return new gFe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oFe(this.url+"/iceberg",this.headers,this.fetch)}};const Yge="2.90.1",dS=30*1e3,GV=3,J9=GV*dS,bFe="http://localhost:9999",wFe="supabase.auth.token",_Fe={"X-Client-Info":`gotrue-js/${Yge}`},KV="X-Supabase-Api-Version",Zge={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},NFe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,SFe=10*60*1e3;class A3 extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function En(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class EFe extends A3{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function jFe(t){return En(t)&&t.name==="AuthApiError"}class Aw extends A3{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Bv extends A3{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Lh extends Bv{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function AFe(t){return En(t)&&t.name==="AuthSessionMissingError"}class $N extends Bv{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class LR extends Bv{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class FR extends Bv{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CFe(t){return En(t)&&t.name==="AuthImplicitGrantRedirectError"}class Qre extends Bv{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class TFe extends Bv{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class XV extends Bv{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function e$(t){return En(t)&&t.name==="AuthRetryableFetchError"}class Jre extends Bv{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class YV extends Bv{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ene=` 	
\r=`.split(""),PFe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ene.length;e+=1)t[ene[e].charCodeAt(0)]=-2;for(let e=0;e<qM.length;e+=1)t[qM[e].charCodeAt(0)]=e;return t})();function tne(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(qM[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(qM[n]),e.queuedBits-=6}}function Qge(t,e,r){const n=PFe[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rne(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{IFe(o,n,r)};for(let o=0;o<t.length;o+=1)Qge(t.charCodeAt(o),i,s);return e.join("")}function kFe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function OFe(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}kFe(n,e)}}function IFe(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function pE(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Qge(t.charCodeAt(i),r,n);return new Uint8Array(e)}function RFe(t){const e=[];return OFe(t,r=>e.push(r)),new Uint8Array(e)}function Lw(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>tne(i,r,n)),tne(null,r,n),e.join("")}function DFe(t){return Math.round(Date.now()/1e3)+t}function MFe(){return Symbol("auth-callback")}const Ic=()=>typeof window<"u"&&typeof document<"u",sw={tested:!1,writable:!1},Jge=()=>{if(!Ic())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sw.tested)return sw.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),sw.tested=!0,sw.writable=!0}catch{sw.tested=!0,sw.writable=!1}return sw.writable};function LFe(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const exe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),FFe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",hS=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},aw=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},kc=async(t,e)=>{await t.removeItem(e)};class ZF{constructor(){this.promise=new ZF.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ZF.promiseConstructor=Promise;function t$(t){const e=t.split(".");if(e.length!==3)throw new YV("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!NFe.test(e[n]))throw new YV("JWT not in base64url format");return{header:JSON.parse(rne(e[0])),payload:JSON.parse(rne(e[1])),signature:pE(e[2]),raw:{header:e[0],payload:e[1]}}}async function BFe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function $Fe(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function UFe(t){return("0"+t.toString(16)).substr(-2)}function zFe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,UFe).join("")}async function VFe(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function qFe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await VFe(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function UN(t,e,r=!1){const n=zFe();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await hS(t,`${e}-code-verifier`,i);const s=await qFe(n);return[s,n===s?"plain":"s256"]}const HFe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function WFe(t){const e=t.headers.get(KV);if(!e||!e.match(HFe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function GFe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function KFe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const XFe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zN(t){if(!XFe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function r$(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function YFe(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function nne(t){return JSON.parse(JSON.stringify(t))}const gw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ZFe=[502,503,504];async function ine(t){var e;if(!FFe(t))throw new XV(gw(t),0);if(ZFe.includes(t.status))throw new XV(gw(t),t.status);let r;try{r=await t.json()}catch(s){throw new Aw(gw(s),s)}let n;const i=WFe(t);if(i&&i.getTime()>=Zge["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Jre(gw(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Lh}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Jre(gw(r),t.status,r.weak_password.reasons);throw new EFe(gw(r),t.status||500,n)}const QFe=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Hn(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[KV]||(s[KV]=Zge["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await JFe(t,e,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function JFe(t,e,r,n,i,s){const o=QFe(e,n,i,s);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new XV(gw(c),0)}if(l.ok||await ine(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ine(c)}}function ap(t){var e;let r=null;r7e(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=DFe(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function sne(t){const e=ap(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function S1(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function e7e(t){return{data:t,error:null}}function t7e(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=WC(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function ane(t){return t}function r7e(t){return t.access_token&&t.refresh_token&&t.expires_in}const n$=["global","local","others"];class n7e{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=exe(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=n$[0]){if(n$.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${n$.join(", ")}`);try{return await Hn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(En(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Hn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:S1})}catch(n){if(En(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=WC(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Hn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:t7e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(En(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Hn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:S1})}catch(r){if(En(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Hn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ane});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(En(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){zN(e);try{return await Hn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:S1})}catch(r){if(En(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){zN(e);try{return await Hn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:S1})}catch(n){if(En(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){zN(e);try{return await Hn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:S1})}catch(n){if(En(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){zN(e.userId);try{const{data:r,error:n}=await Hn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(En(r))return{data:null,error:r};throw r}}async _deleteFactor(e){zN(e.userId),zN(e.id);try{return{data:await Hn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(En(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Hn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ane});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(En(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Hn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(En(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Hn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(En(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Hn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(En(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Hn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(En(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Hn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(En(r))return{data:null,error:r};throw r}}}function one(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const VN={debug:!!(globalThis&&Jge()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class txe extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class i7e extends txe{}async function s7e(t,e,r){VN.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),VN.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){VN.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{VN.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw VN.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new i7e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(VN.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function a7e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rxe(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function o7e(t){return parseInt(t,16)}function l7e(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function c7e(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=rxe(t.address),x=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",y=`${x} wants you to sign in with your Ethereum account:
${m}

${g}`;let w=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let S=`
Resources:`;for(const E of u){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);S+=`
- ${E}`}w+=S}return`${y}
${w}`}class ml extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class HM extends ml{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function u7e({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ml({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ml({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ml({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ml({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ml({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ml({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ml({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ml({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(nxe(o)){if(s.rp.id!==o)return new ml({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ml({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ml({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ml({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ml({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function d7e({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ml({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ml({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(nxe(n)){if(r.rpId!==n)return new ml({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ml({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ml({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ml({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class h7e{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const f7e=new h7e;function m7e(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=WC(t,["challenge","user","excludeCredentials"]),s=pE(e).buffer,o=Object.assign(Object.assign({},r),{id:pE(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:pE(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function p7e(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=WC(t,["challenge","allowCredentials"]),i=pE(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},l),{id:pE(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function g7e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Lw(new Uint8Array(t.response.attestationObject)),clientDataJSON:Lw(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function x7e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Lw(new Uint8Array(i.authenticatorData)),clientDataJSON:Lw(new Uint8Array(i.clientDataJSON)),signature:Lw(new Uint8Array(i.signature)),userHandle:i.userHandle?Lw(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nxe(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function lne(){var t,e;return!!(Ic()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function v7e(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new HM("Browser returned unexpected credential type",e)}:{data:null,error:new HM("Empty credential response",e)}}catch(e){return{data:null,error:u7e({error:e,options:t})}}}async function y7e(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new HM("Browser returned unexpected credential type",e)}:{data:null,error:new HM("Empty credential response",e)}}catch(e){return{data:null,error:d7e({error:e,options:t})}}}const b7e={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},w7e={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function WM(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(e(o)){const l=n[s];e(l)?n[s]=WM(l,o):n[s]=WM(o)}else n[s]=o}return n}function _7e(t,e){return WM(b7e,t,e||{})}function N7e(t,e){return WM(w7e,t,e||{})}class S7e{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const c=i??f7e.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=_7e(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:h}=await v7e({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=N7e(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:h}=await y7e(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return En(o)?{data:null,error:o}:{data:null,error:new Aw("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new A3("rpId is required for WebAuthn authentication")};try{if(!lne())return{data:null,error:new Aw("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return En(o)?{data:null,error:o}:{data:null,error:new Aw("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new A3("rpId is required for WebAuthn registration")};try{if(!lne())return{data:null,error:new Aw("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return En(o)?{data:null,error:o}:{data:null,error:new Aw("Unexpected error in register",o)}}}}a7e();const E7e={url:bFe,storageKey:wFe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_Fe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function cne(t,e,r){return await r()}const qN={};class C3{get jwks(){var e,r;return(r=(e=qN[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){qN[this.storageKey]=Object.assign(Object.assign({},qN[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=qN[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){qN[this.storageKey]=Object.assign(Object.assign({},qN[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},E7e),e);if(this.storageKey=s.storageKey,this.instanceID=(r=C3.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,C3.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ic()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new n7e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=exe(s.fetch),this.lock=s.lock||cne,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Ic()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=s7e:this.lock=cne,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new S7e(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Jge()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=one(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=one(this.memoryStorage)),Ic()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Yge}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Ic()&&(r=LFe(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ic()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),CFe(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return En(r)?this._returnResult({error:r}):this._returnResult({error:new Aw("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await Hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ap}),{data:o,error:l}=s;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(En(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await UN(this.storage,this.storageKey)),s=await Hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:ap})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ap})}else throw new LR("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return await kc(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:l}=e;r=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sne})}else if("phone"in e){const{phone:s,password:o,options:l}=e;r=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sne})}else throw new LR("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new $N;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(En(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,o,l,c,u,d,h,f;let m,x;if("message"in e)m=e.message,x=e.signature;else{const{chain:g,wallet:y,statement:w,options:S}=e;let E;if(Ic())if(typeof y=="object")E=y;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")E=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const j=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href),T=await E.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=rxe(T[0]);let I=(n=S==null?void 0:S.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const D=await E.request({method:"eth_chainId"});I=o7e(D)}const M={domain:j.host,address:O,statement:w,uri:j.href,version:"1",chainId:I,nonce:(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=S==null?void 0:S.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=S==null?void 0:S.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=S==null?void 0:S.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=S==null?void 0:S.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=c7e(M),x=await E.request({method:"personal_sign",params:[l7e(m),O]})}try{const{data:g,error:y}=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ap});if(y)throw y;if(!g||!g.session||!g.user){const w=new $N;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(En(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,n,i,s,o,l,c,u,d,h,f,m;let x,g;if("message"in e)x=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:S,options:E}=e;let j;if(Ic())if(typeof w=="object")j=w;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))j=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const T=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const O=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),S?{statement:S}:null));let I;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")I=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)I=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)x=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),g=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${T.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=E==null?void 0:E.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((h=(d=E==null?void 0:E.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...E.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const O=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=O}}try{const{data:y,error:w}=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Lw(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ap});if(w)throw w;if(!y||!y.session||!y.user){const S=new $N;return this._returnResult({data:{user:null,session:null},error:S})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(En(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const r=await aw(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new TFe;const{data:s,error:o}=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ap});if(await kc(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const l=new $N;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,l=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ap}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new $N;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(En(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await UN(this.storage,this.storageKey));const{error:h}=await Hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new LR("You must provide either an email or phone number.")}catch(l){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Hn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ap});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(En(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,s,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await UN(this.storage,this.storageKey));const u=await Hn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:e7e});return!((s=u.data)===null||s===void 0)&&s.url&&Ic()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Lh;const{error:i}=await Hn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(En(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await Hn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:l}=await Hn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new LR("You must provide either an email or phone number and a type")}catch(r){if(En(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await aw(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<J9:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await aw(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=r$()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=YFe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:S1}):await this._useSession(async r=>{var n,i,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lh}:await Hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:S1})})}catch(r){if(En(r))return AFe(r)&&(await this._removeSession(),await kc(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Lh;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await UN(this.storage,this.storageKey));const{data:u,error:d}=await Hn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:S1});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lh;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=t$(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(En(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Lh;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(En(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ic())throw new FR("No browser detected.");if(e.error||e.error_description||e.error_code)throw new FR(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qre("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new FR("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qre("No code detected.");const{data:S,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!s||!l||!o||!u)throw new FR("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=dS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:g,error:y}=await this._getUser(s);if(y)throw y;const w={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(n){if(En(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await aw(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(jFe(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await kc(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=MFe(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await UN(this.storage,this.storageKey,!0));try{return await Hn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,l,c,u,d;const{data:h,error:f}=s;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Hn(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ic()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(En(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:l,token:c,access_token:u,nonce:d}=e,h=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ap}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new $N}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(i){if(await kc(this.storage,`${this.storageKey}-code-verifier`),En(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await Hn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await $Fe(async i=>(i>0&&await BFe(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Hn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ap})),(i,s)=>{const o=200*Math.pow(2,i);return s&&e$(s)&&Date.now()+o-n<dS})}catch(n){if(this._debug(r,"error",n),En(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ic()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await aw(this.storage,this.storageKey);if(i&&this.userStorage){let o=await aw(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await hS(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:r$()}else if(i&&!i.user&&!i.user){const o=await aw(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await kc(this.storage,this.storageKey+"-user"),await hS(this.storage,this.storageKey,i)):i.user=r$()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<J9;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${J9}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),e$(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Lh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ZF;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Lh;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),En(s)){const o={data:null,error:s};return e$(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await kc(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await hS(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=nne(i);await hS(this.storage,this.storageKey,s)}else{const i=nne(r);await hS(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await kc(this.storage,this.storageKey),await kc(this.storage,this.storageKey+"-code-verifier"),await kc(this.storage,this.storageKey+"-user"),this.userStorage&&await kc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ic()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/dS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${dS}ms, refresh threshold is ${GV} ticks`),i<=GV&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof txe)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ic()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await UN(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await Hn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await Hn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?g7e(e.webauthn.credential_response):x7e(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Hn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=await Hn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m7e(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p7e(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=t$(n.access_token);let o=null;s.aal&&(o=s.aal);let l=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Hn(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Lh})})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Lh});const o=await Hn(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ic()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(En(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Lh});const o=await Hn(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ic()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(En(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Hn(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Lh})})}catch(e){if(En(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Hn(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Lh})})}catch(r){if(En(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+SFe>i)return n;const{data:s,error:o}=await Hn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return this._returnResult({data:null,error:x});n=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:c}}=t$(n);r!=null&&r.allowExpired||GFe(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const d=KFe(i.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,RFe(`${l}.${c}`)))throw new YV("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(En(n))return this._returnResult({data:null,error:n});throw n}}}C3.nextInstanceID={};const j7e=C3,A7e="2.90.1";let kT="";typeof Deno<"u"?kT="deno":typeof document<"u"?kT="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kT="react-native":kT="node";const C7e={"X-Client-Info":`supabase-js-${kT}/${A7e}`},T7e={headers:C7e},P7e={schema:"public"},k7e={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O7e={};function T3(t){"@babel/helpers - typeof";return T3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T3(t)}function I7e(t,e){if(T3(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(T3(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R7e(t){var e=I7e(t,"string");return T3(e)=="symbol"?e:e+""}function D7e(t,e,r){return(e=R7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function une(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Io(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?une(Object(r),!0).forEach(function(n){D7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):une(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const M7e=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),L7e=()=>Headers,F7e=(t,e,r)=>{const n=M7e(r),i=L7e();return async(s,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(s,Io(Io({},o),{},{headers:u}))}};function B7e(t){return t.endsWith("/")?t:t+"/"}function $7e(t,e){var r,n;const{db:i,auth:s,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Io(Io({},c),i),auth:Io(Io({},u),s),realtime:Io(Io({},d),o),storage:{},global:Io(Io(Io({},h),l),{},{headers:Io(Io({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function U7e(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(B7e(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var z7e=class extends j7e{constructor(t){super(t)}},V7e=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const s=U7e(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,l={db:P7e,realtime:O7e,auth:Io(Io({},k7e),{},{storageKey:o}),global:T7e},c=$7e(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=F7e(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Io({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new _Le(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new yFe(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new xLe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:s,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z7e({url:this.authUrl.href,headers:Io(Io({},f),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new BLe(this.realtimeUrl.href,Io(Io({},t),{},{params:Io(Io({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const q7e=(t,e,r)=>new V7e(t,e,r);function H7e(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}H7e()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const W7e="https://yfoqehkemzxbwzrbfubq.supabase.co",G7e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlmb3FlaGtlbXp4Ynd6cmJmdWJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1ODM1MzgsImV4cCI6MjA4MjE1OTUzOH0.oxSWr4UN-8ruOpsih5gYqU3qtoaNY6HI02-HFc3Rk-I",Ee=q7e(W7e,G7e,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),K7e=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ee},Symbol.toStringTag,{value:"Module"})),ixe=C.createContext(void 0);function X7e({children:t}){const[e,r]=C.useState(null),[n,i]=C.useState(null),[s,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(!0),h=nn(),f=async y=>{const{data:w,error:S}=await Ee.from("user_roles").select("role").eq("user_id",y);if(S)return console.error("Erro ao buscar role do usurio",S),null;if(!w||w.length===0)return null;if(w.length===1)return w[0].role;const E=["admin","investidor","cooperativa","empresa","vendedor","usuario"];for(const j of E)if(w.some(T=>T.role===j))return j;return w[0].role},m=async y=>{const{data:w,error:S}=await Ee.from("profiles").select("*").eq("id",y).maybeSingle();return S?(console.error("Erro ao buscar perfil do usurio",S),null):w},x=async()=>{if(e){const y=await m(e.id);c(y)}};C.useEffect(()=>{let y=!1,w=null;const{data:{subscription:S}}=Ee.auth.onAuthStateChange((E,j)=>{var I;const T=E==="SIGNED_IN"||E==="SIGNED_OUT"||E==="USER_UPDATED",O=((I=j==null?void 0:j.user)==null?void 0:I.id)!==w;if(i(j),r((j==null?void 0:j.user)??null),j!=null&&j.user){if(T||O||!y){const D=!y;y=!0,w=j.user.id,D&&d(!0),setTimeout(async()=>{try{const[z,F]=await Promise.all([f(j.user.id),m(j.user.id)]);o(z),c(F)}catch(z){console.error("Erro ao carregar dados de autenticao (onAuthStateChange)",z)}finally{d(!1)}},0)}}else y=!1,w=null,o(null),c(null),d(!1)});return Ee.auth.getSession().then(async({data:{session:E}})=>{if(i(E),r((E==null?void 0:E.user)??null),E!=null&&E.user)try{const[j,T]=await Promise.all([f(E.user.id),m(E.user.id)]);o(j),c(T)}catch(j){console.error("Erro ao carregar dados de autenticao (getSession)",j)}finally{d(!1)}else d(!1)}),()=>S.unsubscribe()},[]);const g=async()=>{try{r(null),i(null),o(null),c(null);const{error:y}=await Ee.auth.signOut();y&&(console.error(" [LOGOUT] Erro ao fazer logout no servidor:",y),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear()),h("/auth",{replace:!0})}catch(y){console.error(" [LOGOUT] Erro crtico ao fazer logout:",y),r(null),i(null),o(null),c(null),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear(),h("/auth",{replace:!0})}};return a.jsx(ixe.Provider,{value:{user:e,session:n,userRole:s,profile:l,loading:u,signOut:g,refreshProfile:x},children:t})}function Si(){const t=C.useContext(ixe);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const sxe=C.createContext(void 0);function Y7e({children:t}){const{user:e}=Si(),[r,n]=C.useState([]),[i,s]=C.useState(null),[o,l]=C.useState(!0),c=r.filter(S=>!S.read).length,u=C.useCallback(async()=>{if(!e){n([]),l(!1);return}try{const{data:S,error:E}=await Ee.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(E)throw E;n(S||[])}catch(S){console.error("Erro ao buscar notificaes:",S)}finally{l(!1)}},[e]),d=C.useCallback(async()=>{if(!e){s(null);return}try{const{data:S,error:E}=await Ee.from("notification_preferences").select("*").eq("user_id",e.id).maybeSingle();if(E&&E.code!=="PGRST116")throw E;if(S)s(S);else{const{data:j,error:T}=await Ee.from("notification_preferences").insert({user_id:e.id}).select().single();if(T)throw T;s(j)}}catch(S){console.error("Erro ao buscar preferncias:",S)}},[e]),h=C.useCallback(async S=>{try{const{error:E}=await Ee.rpc("mark_notification_as_read",{notification_id:S});if(E)throw E;n(j=>j.map(T=>T.id===S?{...T,read:!0,read_at:new Date().toISOString()}:T))}catch(E){console.error("Erro ao marcar notificao como lida:",E)}},[]),f=C.useCallback(async()=>{if(e)try{const{error:S}=await Ee.rpc("mark_all_notifications_as_read",{target_user_id:e.id});if(S)throw S;const E=new Date().toISOString();n(j=>j.map(T=>({...T,read:!0,read_at:E})))}catch(S){console.error("Erro ao marcar todas como lidas:",S)}},[e]),m=C.useCallback(async S=>{try{const{error:E}=await Ee.from("notifications").delete().eq("id",S);if(E)throw E;n(j=>j.filter(T=>T.id!==S))}catch(E){console.error("Erro ao deletar notificao:",E)}},[]),x=C.useCallback(async S=>{if(e)try{const{data:E,error:j}=await Ee.from("notification_preferences").update(S).eq("user_id",e.id).select().single();if(j)throw j;s(E)}catch(E){console.error("Erro ao atualizar preferncias:",E)}},[e]),g=C.useCallback(async()=>{if(!("Notification"in window))return console.warn("Este navegador no suporta notificaes"),!1;if(!("serviceWorker"in navigator))return console.warn("Este navegador no suporta Service Workers"),!1;try{if(await Notification.requestPermission()==="granted"){const E=await navigator.serviceWorker.ready;return await x({enable_push:!0}),!0}return!1}catch(S){return console.error("Erro ao solicitar permisso de push:",S),!1}},[x]),y=C.useCallback(async()=>{await u()},[u]);C.useEffect(()=>{if(!e)return;u(),d();const S=Ee.channel("notifications_changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},E=>{if(E.eventType==="INSERT"){if(n(j=>[E.new,...j]),i!=null&&i.enable_push&&"Notification"in window&&Notification.permission==="granted"){const j=E.new;new Notification(j.title,{body:j.message,icon:"/icon-192-white.png",badge:"/icon-192-white.png",tag:j.id})}}else E.eventType==="UPDATE"?n(j=>j.map(T=>T.id===E.new.id?E.new:T)):E.eventType==="DELETE"&&n(j=>j.filter(T=>T.id!==E.old.id))}).subscribe();return()=>{Ee.removeChannel(S)}},[e,u,d,i==null?void 0:i.enable_push]);const w={notifications:r,unreadCount:c,loading:o,preferences:i,markAsRead:h,markAllAsRead:f,deleteNotification:m,updatePreferences:x,requestPushPermission:g,refreshNotifications:y};return a.jsx(sxe.Provider,{value:w,children:t})}function Z7e(){const t=C.useContext(sxe);if(t===void 0)throw new Error("useNotifications deve ser usado dentro de NotificationProvider");return t}const Q7e={termos_uso:"Termos de Uso",politica_privacidade:"Poltica de Privacidade",contrato_cooperado:"Contrato de Cooperado",contrato_investidor:"Contrato de Investidor",termo_lgpd:"Termo LGPD",outros:"Outros"},i$={TAMANHO_MAX_PDF_MB:10,TAMANHO_MAX_PDF_BYTES:10*1024*1024,FORMATO_VERSAO_REGEX:/^[0-9]+\.[0-9]+$/,PDF_NAME_PATTERN:/^[a-zA-Z0-9_-]+\.pdf$/,MIN_LENGTH_TITULO:5,MAX_LENGTH_TITULO:255,MIN_LENGTH_VERSAO:1,MAX_LENGTH_VERSAO:20};async function J7e(t){try{const{data:e,error:r}=await Ee.rpc("buscar_termos_pendentes",{p_user_id:t});if(r)throw console.error("Erro ao buscar termos pendentes:",r),new Error("No foi possvel carregar os termos pendentes");const n=(e||[]).map(i=>({id:i.id,tipo:i.tipo,tipoLabel:Q7e[i.tipo],versao:i.versao,titulo:i.titulo,pdf_url:i.pdf_url,conteudo_html:i.conteudo_html,resumo:i.resumo,obrigatorio:i.obrigatorio,aceito:!1}));return{termos:n,total:n.length,todos_aceitos:n.length===0}}catch(e){throw console.error("Erro em buscarTermosPendentes:",e),e}}async function axe(t){try{const{data:e,error:r}=await Ee.rpc("tem_termos_pendentes",{p_user_id:t});return r?(console.error(" Erro ao verificar termos pendentes:",r),!1):e===!0}catch(e){return console.error(" Erro ao verificar termos pendentes:",e),!1}}async function eBe(){try{const t=await fetch("https://api.ipify.org?format=json",{signal:AbortSignal.timeout(2e3)});if(t.ok)return(await t.json()).ip||null}catch(t){console.warn("No foi possvel capturar IP:",t)}return null}function tBe(){return navigator.userAgent||null}async function oxe(t,e){try{if(!t||e.length===0)throw new Error("userId e termosIds so obrigatrios");const r=await eBe(),n=tBe(),{data:i,error:s}=await Ee.from("termos_uso").select("id, tipo, versao").in("id",e);if(s)throw console.error("Erro ao buscar dados dos termos:",s),new Error("No foi possvel buscar informaes dos termos");if(!i||i.length===0)throw new Error("Nenhum termo vlido encontrado");const o=i.map(c=>({user_id:t,termo_id:c.id,tipo_termo:c.tipo,versao_aceita:c.versao,ip_aceite:r,user_agent:n})),{error:l}=await Ee.from("aceites_termos").insert(o);if(l)throw console.error("Erro ao registrar aceites:",l),l.code==="23505"?new Error("Um ou mais termos j foram aceitos anteriormente"):new Error("No foi possvel registrar os aceites");console.log(` ${o.length} aceite(s) registrado(s) com sucesso`)}catch(r){throw console.error("Erro em registrarAceites:",r),r}}async function rBe(t,e){return oxe(t,[e])}async function nBe(t,e=1,r=50){try{const{data:{user:n}}=await Ee.auth.getUser();if(!n)throw new Error("Usurio no autenticado");const{data:i,error:s}=await Ee.from("user_roles").select("role").eq("user_id",n.id).single();if(s||i.role!=="admin")throw new Error("Apenas administradores podem visualizar aceites de termos");const o=(e-1)*r,{data:l,error:c,count:u}=await Ee.from("aceites_termos").select("*",{count:"exact"}).eq("termo_id",t).order("aceito_em",{ascending:!1}).range(o,o+r-1);if(c)throw console.error("Erro ao buscar aceites do termo:",c),new Error("No foi possvel carregar os aceites");return{aceites:l||[],total:u||0,pagina:e,totalPaginas:Math.ceil((u||0)/r)}}catch(n){throw console.error("Erro em buscarAceitesTermo:",n),n}}async function iBe(t){try{const{data:{user:e}}=await Ee.auth.getUser();if(!e)throw new Error("Usurio no autenticado");const{data:r,error:n}=await Ee.from("user_roles").select("role").eq("user_id",e.id).single();if(n||r.role!=="admin")throw new Error("Apenas administradores podem visualizar estatsticas");const{data:i,error:s}=await Ee.rpc("estatisticas_aceites_termo",{p_termo_id:t});if(s)throw console.error("Erro ao buscar estatsticas:",s),new Error("No foi possvel carregar as estatsticas");const o=i&&i.length>0?i[0]:null;return o?{total_usuarios:o.total_usuarios||0,total_aceites:o.total_aceites||0,percentual_aceites:o.percentual_aceites||0,pendentes:o.pendentes||0}:{total_usuarios:0,total_aceites:0,percentual_aceites:0,pendentes:0}}catch(e){throw console.error("Erro em buscarEstatisticasAceites:",e),e}}async function sBe(t){try{const{data:{user:e}}=await Ee.auth.getUser();if(!e)throw new Error("Usurio no autenticado");const{data:r,error:n}=await Ee.from("user_roles").select("role").eq("user_id",e.id).single();if(n||r.role!=="admin")throw new Error("Apenas administradores podem gerar relatrios");let i=Ee.from("aceites_termos").select(`
        user_id,
        tipo_termo,
        versao_aceita,
        aceito_em,
        ip_aceite,
        termos_uso!inner (
          tipo,
          versao,
          titulo
        ),
        profiles!inner (
          nome,
          email
        ),
        user_roles!inner (
          role
        )
      `);t!=null&&t.tipo&&(i=i.eq("tipo_termo",t.tipo)),t!=null&&t.dataInicio&&(i=i.gte("aceito_em",t.dataInicio)),t!=null&&t.dataFim&&(i=i.lte("aceito_em",t.dataFim)),i=i.order("aceito_em",{ascending:!1});const{data:s,error:o}=await i;if(o)throw console.error("Erro ao gerar relatrio:",o),new Error("No foi possvel gerar o relatrio");return(s||[]).map(l=>{var c,u,d,h;return{usuario_id:l.user_id,usuario_nome:((c=l.profiles)==null?void 0:c.nome)||"N/A",usuario_email:((u=l.profiles)==null?void 0:u.email)||"N/A",usuario_role:((d=l.user_roles)==null?void 0:d.role)||"N/A",termo_tipo:l.tipo_termo,termo_versao:l.versao_aceita,termo_titulo:((h=l.termos_uso)==null?void 0:h.titulo)||"N/A",aceito_em:l.aceito_em,ip_aceite:l.ip_aceite}})}catch(e){throw console.error("Erro em gerarRelatorioAceites:",e),e}}function aBe(t=!0,e=null){const{user:r}=Si(),[n,i]=C.useState([]),[s,o]=C.useState(0),[l,c]=C.useState(!0),[u,d]=C.useState(t),[h,f]=C.useState(null),m=C.useCallback(async()=>{if(!(r!=null&&r.id)){i([]),o(0),c(!0),d(!1);return}try{d(!0),f(null);const g=await J7e(r.id);i(g.termos),o(g.total),c(g.todos_aceitos)}catch(g){const y=g instanceof Error?g.message:"Erro ao verificar termos pendentes";f(y),console.error("Erro em useTermosPendentes:",g),i([]),o(0),c(!0)}finally{d(!1)}},[r==null?void 0:r.id]),x=C.useCallback(async()=>{if(!(r!=null&&r.id))return!1;try{return await axe(r.id)}catch(g){return console.error("Erro em verificao rpida:",g),!1}},[r==null?void 0:r.id]);return C.useEffect(()=>{t&&m()},[t,m]),C.useEffect(()=>{if(!e||e<=0)return;const g=setInterval(()=>{m()},e);return()=>{clearInterval(g)}},[e,m]),{termosPendentes:n,totalPendentes:s,todosAceitos:l,loading:u,error:h,verificar:m,verificarRapido:x}}function oBe(t=!0){const{user:e}=Si(),[r,n]=C.useState(!1),[i,s]=C.useState(t),o=C.useCallback(async()=>{if(!(e!=null&&e.id)){n(!1),s(!1);return}try{s(!0);const l=await axe(e.id);n(l)}catch(l){console.error(" Erro ao verificar termos pendentes:",l),n(!1)}finally{s(!1)}},[e==null?void 0:e.id]);return C.useEffect(()=>{t&&o()},[t,o]),{temPendentes:r,loading:i,verificar:o}}function Vn({children:t,allowedRoles:e,skipTermosCheck:r=!1}){const{user:n,userRole:i,loading:s}=Si(),o=Bg(),{temPendentes:l,loading:c}=oBe(!0);if(s&&!n)return a.jsx("div",{className:"flex min-h-screen items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verificando autenticao..."})]})});if(!n)return a.jsx(mx,{to:"/auth",replace:!0});if(e&&i&&!e.includes(i))return a.jsx(mx,{to:"/",replace:!0});const u=i==="admin",d=o.pathname==="/termos-pendentes";if(!r&&!u&&!d){if(c)return a.jsx("div",{className:"flex min-h-screen items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verificando termos de uso..."})]})});if(l)return a.jsx(mx,{to:"/termos-pendentes",replace:!0})}return a.jsx(a.Fragment,{children:t})}const P3=DC("inline-flex items-center justify-center gap-2 whitespace-nowrap font-display font-semibold transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98] [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:brightness-105 shadow-sm hover:shadow-[0_0_24px_hsl(76_72%_44%_/_0.35)]",accent:"bg-accent text-accent-foreground hover:brightness-105 shadow-sm hover:shadow-[0_0_24px_hsl(43_97%_54%_/_0.35)]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/10","outline-accent":"border-2 border-accent bg-transparent text-accent hover:bg-accent/10",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-muted text-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-6 py-2 rounded-xl text-sm",sm:"h-9 px-4 py-1.5 rounded-lg text-sm",lg:"h-12 px-8 py-3 rounded-xl text-base",xl:"h-14 px-10 py-4 rounded-2xl text-lg",icon:"h-10 w-10 rounded-xl","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),Oe=C.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},s)=>{const o=n?vIe:"button";return a.jsx(o,{className:Ut(P3({variant:e,size:r,className:t})),ref:s,...i})});Oe.displayName="Button";const it=C.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Ut("rounded-2xl border border-border/60 bg-card text-card-foreground shadow-sm transition-all duration-300","hover:shadow-md hover:-translate-y-0.5",t),...e}));it.displayName="Card";const At=C.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Ut("flex flex-col space-y-2 p-6",t),...e}));At.displayName="CardHeader";const Ct=C.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:Ut("font-display text-xl font-semibold leading-tight tracking-tight text-foreground",t),...e}));Ct.displayName="CardTitle";const gr=C.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:Ut("text-sm text-muted-foreground font-body",t),...e}));gr.displayName="CardDescription";const ht=C.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Ut("p-6 pt-0",t),...e}));ht.displayName="CardContent";const lBe=C.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Ut("flex items-center p-6 pt-0",t),...e}));lBe.displayName="CardFooter";const cBe=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!1),[i,s]=C.useState(!1);C.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){s(!0);return}"serviceWorker"in navigator&&navigator.serviceWorker.register("/Ciclik_validacoes/service-worker.js").then(d=>{}).catch(d=>{});const c=u=>{u.preventDefault(),e(u),n(!0)};return window.addEventListener("beforeinstallprompt",c),window.addEventListener("appinstalled",()=>{s(!0),n(!1),e(null)}),()=>{window.removeEventListener("beforeinstallprompt",c)}},[]);const o=async()=>{if(!t)return;t.prompt();const{outcome:c}=await t.userChoice;e(null),n(!1),c==="accepted"&&s(!0)},l=()=>{n(!1),localStorage.setItem("pwa-install-dismissed","true")};return C.useEffect(()=>{localStorage.getItem("pwa-install-dismissed")==="true"&&n(!1)},[]),i||!r?null:a.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm animate-in slide-in-from-bottom-5",children:a.jsxs(it,{className:"shadow-lg border-2 border-primary/20",children:[a.jsxs(At,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ou,{className:"h-5 w-5 text-primary"}),a.jsx(Ct,{className:"text-lg",children:"Instalar Aplicativo"})]}),a.jsx(Oe,{variant:"ghost",size:"icon",className:"h-6 w-6 -mt-1 -mr-2",onClick:l,children:a.jsx(Xa,{className:"h-4 w-4"})})]}),a.jsx(gr,{children:"Instale o Ciclik em seu dispositivo para acesso rpido e fcil"})]}),a.jsxs(ht,{className:"flex gap-2",children:[a.jsxs(Oe,{onClick:o,className:"flex-1",children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Instalar"]}),a.jsx(Oe,{variant:"outline",onClick:l,children:"Agora no"})]})]})})},mt=C.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:Ut("flex h-11 w-full rounded-xl border border-input bg-background px-4 py-2","font-body text-base text-foreground","placeholder:text-muted-foreground","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground","md:text-sm",t),ref:n,...r}));mt.displayName="Input";var uBe="Label",lxe=C.forwardRef((t,e)=>a.jsx(Dr.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));lxe.displayName=uBe;var cxe=lxe;const dBe=DC("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),nt=C.forwardRef(({className:t,...e},r)=>a.jsx(cxe,{ref:r,className:Ut(dBe(),t),...e}));nt.displayName=cxe.displayName;var hBe=C.createContext(void 0);function Vb(t){const e=C.useContext(hBe);return t||e||"ltr"}var s$="rovingFocusGroup.onEntryFocus",fBe={bubbles:!1,cancelable:!0},JO="RovingFocusGroup",[ZV,uxe,mBe]=IC(JO),[pBe,GC]=qo(JO,[mBe]),[gBe,xBe]=pBe(JO),dxe=C.forwardRef((t,e)=>a.jsx(ZV.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(ZV.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(vBe,{...t,ref:e})})}));dxe.displayName=JO;var vBe=C.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=C.useRef(null),m=An(e,f),x=Vb(s),[g,y]=Xu({prop:o,defaultProp:l??null,onChange:c,caller:JO}),[w,S]=C.useState(!1),E=Uo(u),j=uxe(r),T=C.useRef(!1),[O,I]=C.useState(0);return C.useEffect(()=>{const M=f.current;if(M)return M.addEventListener(s$,E),()=>M.removeEventListener(s$,E)},[E]),a.jsx(gBe,{scope:r,orientation:n,dir:x,loop:i,currentTabStopId:g,onItemFocus:C.useCallback(M=>y(M),[y]),onItemShiftTab:C.useCallback(()=>S(!0),[]),onFocusableItemAdd:C.useCallback(()=>I(M=>M+1),[]),onFocusableItemRemove:C.useCallback(()=>I(M=>M-1),[]),children:a.jsx(Dr.div,{tabIndex:w||O===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:wr(t.onMouseDown,()=>{T.current=!0}),onFocus:wr(t.onFocus,M=>{const D=!T.current;if(M.target===M.currentTarget&&D&&!w){const z=new CustomEvent(s$,fBe);if(M.currentTarget.dispatchEvent(z),!z.defaultPrevented){const F=j().filter(se=>se.focusable),q=F.find(se=>se.active),Q=F.find(se=>se.id===g),Z=[q,Q,...F].filter(Boolean).map(se=>se.ref.current);mxe(Z,d)}}T.current=!1}),onBlur:wr(t.onBlur,()=>S(!1))})})}),hxe="RovingFocusGroupItem",fxe=C.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:o,...l}=t,c=bl(),u=s||c,d=xBe(hxe,r),h=d.currentTabStopId===u,f=uxe(r),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:g}=d;return C.useEffect(()=>{if(n)return m(),()=>x()},[n,m,x]),a.jsx(ZV.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:a.jsx(Dr.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:wr(t.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:wr(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:wr(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=wBe(y,d.orientation,d.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let E=f().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const j=E.indexOf(y.currentTarget);E=d.loop?_Be(E,j+1):E.slice(j+1)}setTimeout(()=>mxe(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});fxe.displayName=hxe;var yBe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bBe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function wBe(t,e,r){const n=bBe(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return yBe[n]}function mxe(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function _Be(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var dY=dxe,hY=fxe,QF="Tabs",[NBe,r$t]=qo(QF,[GC]),pxe=GC(),[SBe,fY]=NBe(QF),gxe=C.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Vb(l),[h,f]=Xu({prop:n,onChange:i,defaultProp:s??"",caller:QF});return a.jsx(SBe,{scope:r,baseId:bl(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:a.jsx(Dr.div,{dir:d,"data-orientation":o,...u,ref:e})})});gxe.displayName=QF;var xxe="TabsList",vxe=C.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,s=fY(xxe,r),o=pxe(r);return a.jsx(dY,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:a.jsx(Dr.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});vxe.displayName=xxe;var yxe="TabsTrigger",bxe=C.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=t,o=fY(yxe,r),l=pxe(r),c=Nxe(o.baseId,n),u=Sxe(o.baseId,n),d=n===o.value;return a.jsx(hY,{asChild:!0,...l,focusable:!i,active:d,children:a.jsx(Dr.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:wr(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:wr(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:wr(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(n)})})})});bxe.displayName=yxe;var wxe="TabsContent",_xe=C.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...o}=t,l=fY(wxe,r),c=Nxe(l.baseId,n),u=Sxe(l.baseId,n),d=n===l.value,h=C.useRef(d);return C.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(El,{present:i||d,children:({present:f})=>a.jsx(Dr.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});_xe.displayName=wxe;function Nxe(t,e){return`${t}-trigger-${e}`}function Sxe(t,e){return`${t}-content-${e}`}var EBe=gxe,Exe=vxe,jxe=bxe,Axe=_xe;const yc=EBe,Jl=C.forwardRef(({className:t,...e},r)=>a.jsx(Exe,{ref:r,className:Ut("inline-flex h-11 items-center justify-center rounded-xl bg-muted p-1 text-muted-foreground",t),...e}));Jl.displayName=Exe.displayName;const ri=C.forwardRef(({className:t,...e},r)=>a.jsx(jxe,{ref:r,className:Ut("relative inline-flex items-center justify-center whitespace-nowrap rounded-lg px-4 py-2","font-display text-sm font-medium","ring-offset-background transition-all duration-200","text-muted-foreground hover:text-foreground/80","data-[state=active]:bg-primary/10 data-[state=active]:text-primary data-[state=active]:font-semibold data-[state=active]:shadow-sm","data-[state=active]:after:absolute data-[state=active]:after:bottom-0 data-[state=active]:after:left-1/2 data-[state=active]:after:-translate-x-1/2","data-[state=active]:after:w-2/3 data-[state=active]:after:h-0.5 data-[state=active]:after:bg-primary data-[state=active]:after:rounded-full","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",t),...e}));ri.displayName=jxe.displayName;const Ti=C.forwardRef(({className:t,...e},r)=>a.jsx(Axe,{ref:r,className:Ut("mt-4 ring-offset-background","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ti.displayName=Axe.displayName;function k3(t,[e,r]){return Math.min(r,Math.max(e,t))}var a$=0;function JF(){C.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??dne()),document.body.insertAdjacentElement("beforeend",t[1]??dne()),a$++,()=>{a$===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),a$--}},[])}function dne(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var o$="focusScope.autoFocusOnMount",l$="focusScope.autoFocusOnUnmount",hne={bubbles:!1,cancelable:!0},jBe="FocusScope",eI=C.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[l,c]=C.useState(null),u=Uo(i),d=Uo(s),h=C.useRef(null),f=An(e,g=>c(g)),m=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(n){let g=function(E){if(m.paused||!l)return;const j=E.target;l.contains(j)?h.current=j:h1(h.current,{select:!0})},y=function(E){if(m.paused||!l)return;const j=E.relatedTarget;j!==null&&(l.contains(j)||h1(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const T of E)T.removedNodes.length>0&&h1(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const S=new MutationObserver(w);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),S.disconnect()}}},[n,l,m.paused]),C.useEffect(()=>{if(l){mne.add(m);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(o$,hne);l.addEventListener(o$,u),l.dispatchEvent(w),w.defaultPrevented||(ABe(OBe(Cxe(l)),{select:!0}),document.activeElement===g&&h1(l))}return()=>{l.removeEventListener(o$,u),setTimeout(()=>{const w=new CustomEvent(l$,hne);l.addEventListener(l$,d),l.dispatchEvent(w),w.defaultPrevented||h1(g??document.body,{select:!0}),l.removeEventListener(l$,d),mne.remove(m)},0)}}},[l,u,d,m]);const x=C.useCallback(g=>{if(!r&&!n||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(y&&w){const S=g.currentTarget,[E,j]=CBe(S);E&&j?!g.shiftKey&&w===j?(g.preventDefault(),r&&h1(E,{select:!0})):g.shiftKey&&w===E&&(g.preventDefault(),r&&h1(j,{select:!0})):w===S&&g.preventDefault()}},[r,n,m.paused]);return a.jsx(Dr.div,{tabIndex:-1,...o,ref:f,onKeyDown:x})});eI.displayName=jBe;function ABe(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(h1(n,{select:e}),document.activeElement!==r)return}function CBe(t){const e=Cxe(t),r=fne(e,t),n=fne(e.reverse(),t);return[r,n]}function Cxe(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function fne(t,e){for(const r of t)if(!TBe(r,{upTo:e}))return r}function TBe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function PBe(t){return t instanceof HTMLInputElement&&"select"in t}function h1(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&PBe(t)&&e&&t.select()}}var mne=kBe();function kBe(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=pne(t,e),t.unshift(e)},remove(e){var r;t=pne(t,e),(r=t[0])==null||r.resume()}}}function pne(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function OBe(t){return t.filter(e=>e.tagName!=="A")}function tI(t){const e=C.useRef({value:t,previous:t});return C.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var IBe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},HN=new WeakMap,BR=new WeakMap,$R={},c$=0,Txe=function(t){return t&&(t.host||Txe(t.parentNode))},RBe=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=Txe(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},DBe=function(t,e,r,n){var i=RBe(e,Array.isArray(t)?t:[t]);$R[r]||($R[r]=new WeakMap);var s=$R[r],o=[],l=new Set,c=new Set(i),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(n),x=m!==null&&m!=="false",g=(HN.get(f)||0)+1,y=(s.get(f)||0)+1;HN.set(f,g),s.set(f,y),o.push(f),g===1&&x&&BR.set(f,!0),y===1&&f.setAttribute(r,"true"),x||f.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),l.clear(),c$++,function(){o.forEach(function(h){var f=HN.get(h)-1,m=s.get(h)-1;HN.set(h,f),s.set(h,m),f||(BR.has(h)||h.removeAttribute(n),BR.delete(h)),m||h.removeAttribute(r)}),c$--,c$||(HN=new WeakMap,HN=new WeakMap,BR=new WeakMap,$R={})}},e7=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=IBe(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),DBe(n,i,r,"aria-hidden")):function(){return null}},h6="right-scroll-bar-position",f6="width-before-scroll-bar",MBe="with-scroll-bars-hidden",LBe="--removed-body-scroll-bar-size";function u$(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function FBe(t,e){var r=C.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var BBe=typeof window<"u"?C.useLayoutEffect:C.useEffect,gne=new WeakMap;function $Be(t,e){var r=FBe(null,function(n){return t.forEach(function(i){return u$(i,n)})});return BBe(function(){var n=gne.get(r);if(n){var i=new Set(n),s=new Set(t),o=r.current;i.forEach(function(l){s.has(l)||u$(l,null)}),s.forEach(function(l){i.has(l)||u$(l,o)})}gne.set(r,t)},[t]),r}function UBe(t){return t}function zBe(t,e){e===void 0&&(e=UBe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var o=e(s,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(l){return s(l)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(s),o=r}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return i}function VBe(t){t===void 0&&(t={});var e=zBe(null);return e.options=ag({async:!0,ssr:!1},t),e}var Pxe=function(t){var e=t.sideCar,r=WC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return C.createElement(n,ag({},r))};Pxe.isSideCarExport=!0;function qBe(t,e){return t.useMedium(e),Pxe}var kxe=VBe(),d$=function(){},t7=C.forwardRef(function(t,e){var r=C.useRef(null),n=C.useState({onScrollCapture:d$,onWheelCapture:d$,onTouchMoveCapture:d$}),i=n[0],s=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,x=t.noIsolation,g=t.inert,y=t.allowPinchZoom,w=t.as,S=w===void 0?"div":w,E=t.gapMode,j=WC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=f,O=$Be([r,e]),I=ag(ag({},j),i);return C.createElement(C.Fragment,null,d&&C.createElement(T,{sideCar:kxe,removeScrollBar:u,shards:h,noRelative:m,noIsolation:x,inert:g,setCallbacks:s,allowPinchZoom:!!y,lockRef:r,gapMode:E}),o?C.cloneElement(C.Children.only(l),ag(ag({},I),{ref:O})):C.createElement(S,ag({},I,{className:c,ref:O}),l))});t7.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};t7.classNames={fullWidth:f6,zeroRight:h6};var HBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WBe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=HBe();return e&&t.setAttribute("nonce",e),t}function GBe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function KBe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var XBe=function(){var t=0,e=null;return{add:function(r){t==0&&(e=WBe())&&(GBe(e,r),KBe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},YBe=function(){var t=XBe();return function(e,r){C.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},Oxe=function(){var t=YBe(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},ZBe={left:0,top:0,right:0,gap:0},h$=function(t){return parseInt(t||"",10)||0},QBe=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[h$(r),h$(n),h$(i)]},JBe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ZBe;var e=QBe(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},e9e=Oxe(),gE="data-scroll-locked",t9e=function(t,e,r,n){var i=t.left,s=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(MBe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(gE,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(h6,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(f6,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(h6," .").concat(h6,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(f6," .").concat(f6,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(gE,`] {
    `).concat(LBe,": ").concat(l,`px;
  }
`)},xne=function(){var t=parseInt(document.body.getAttribute(gE)||"0",10);return isFinite(t)?t:0},r9e=function(){C.useEffect(function(){return document.body.setAttribute(gE,(xne()+1).toString()),function(){var t=xne()-1;t<=0?document.body.removeAttribute(gE):document.body.setAttribute(gE,t.toString())}},[])},n9e=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;r9e();var s=C.useMemo(function(){return JBe(i)},[i]);return C.createElement(e9e,{styles:t9e(s,!e,i,r?"":"!important")})},QV=!1;if(typeof window<"u")try{var UR=Object.defineProperty({},"passive",{get:function(){return QV=!0,!0}});window.addEventListener("test",UR,UR),window.removeEventListener("test",UR,UR)}catch{QV=!1}var WN=QV?{passive:!1}:!1,i9e=function(t){return t.tagName==="TEXTAREA"},Ixe=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!i9e(t)&&r[e]==="visible")},s9e=function(t){return Ixe(t,"overflowY")},a9e=function(t){return Ixe(t,"overflowX")},vne=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=Rxe(t,n);if(i){var s=Dxe(t,n),o=s[1],l=s[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},o9e=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},l9e=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},Rxe=function(t,e){return t==="v"?s9e(e):a9e(e)},Dxe=function(t,e){return t==="v"?o9e(e):l9e(e)},c9e=function(t,e){return t==="h"&&e==="rtl"?-1:1},u9e=function(t,e,r,n,i){var s=c9e(t,window.getComputedStyle(e).direction),o=s*n,l=r.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=Dxe(t,l),x=m[0],g=m[1],y=m[2],w=g-y-s*x;(x||w)&&Rxe(t,l)&&(h+=w,f+=x);var S=l.parentNode;l=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!i)||!d&&(Math.abs(f)<1||!i))&&(u=!0),u},zR=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yne=function(t){return[t.deltaX,t.deltaY]},bne=function(t){return t&&"current"in t?t.current:t},d9e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},h9e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},f9e=0,GN=[];function m9e(t){var e=C.useRef([]),r=C.useRef([0,0]),n=C.useRef(),i=C.useState(f9e++)[0],s=C.useState(Oxe)[0],o=C.useRef(t);C.useEffect(function(){o.current=t},[t]),C.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=mLe([t.lockRef.current],(t.shards||[]).map(bne),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=C.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=zR(g),S=r.current,E="deltaX"in g?g.deltaX:S[0]-w[0],j="deltaY"in g?g.deltaY:S[1]-w[1],T,O=g.target,I=Math.abs(E)>Math.abs(j)?"h":"v";if("touches"in g&&I==="h"&&O.type==="range")return!1;var M=vne(I,O);if(!M)return!0;if(M?T=I:(T=I==="v"?"h":"v",M=vne(I,O)),!M)return!1;if(!n.current&&"changedTouches"in g&&(E||j)&&(n.current=T),!T)return!0;var D=n.current||T;return u9e(D,y,g,D==="h"?E:j,!0)},[]),c=C.useCallback(function(g){var y=g;if(!(!GN.length||GN[GN.length-1]!==s)){var w="deltaY"in y?yne(y):zR(y),S=e.current.filter(function(T){return T.name===y.type&&(T.target===y.target||y.target===T.shadowParent)&&d9e(T.delta,w)})[0];if(S&&S.should){y.cancelable&&y.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(bne).filter(Boolean).filter(function(T){return T.contains(y.target)}),j=E.length>0?l(y,E[0]):!o.current.noIsolation;j&&y.cancelable&&y.preventDefault()}}},[]),u=C.useCallback(function(g,y,w,S){var E={name:g,delta:y,target:w,should:S,shadowParent:p9e(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(j){return j!==E})},1)},[]),d=C.useCallback(function(g){r.current=zR(g),n.current=void 0},[]),h=C.useCallback(function(g){u(g.type,yne(g),g.target,l(g,t.lockRef.current))},[]),f=C.useCallback(function(g){u(g.type,zR(g),g.target,l(g,t.lockRef.current))},[]);C.useEffect(function(){return GN.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,WN),document.addEventListener("touchmove",c,WN),document.addEventListener("touchstart",d,WN),function(){GN=GN.filter(function(g){return g!==s}),document.removeEventListener("wheel",c,WN),document.removeEventListener("touchmove",c,WN),document.removeEventListener("touchstart",d,WN)}},[]);var m=t.removeScrollBar,x=t.inert;return C.createElement(C.Fragment,null,x?C.createElement(s,{styles:h9e(i)}):null,m?C.createElement(n9e,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function p9e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const g9e=qBe(kxe,m9e);var rI=C.forwardRef(function(t,e){return C.createElement(t7,ag({},t,{ref:e,sideCar:g9e}))});rI.classNames=t7.classNames;var x9e=[" ","Enter","ArrowUp","ArrowDown"],v9e=[" ","Enter"],B_="Select",[r7,n7,y9e]=IC(B_),[KC,n$t]=qo(B_,[y9e,Ub]),i7=Ub(),[b9e,qb]=KC(B_),[w9e,_9e]=KC(B_),Mxe=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:x}=t,g=i7(e),[y,w]=C.useState(null),[S,E]=C.useState(null),[j,T]=C.useState(!1),O=Vb(u),[I,M]=Xu({prop:n,defaultProp:i??!1,onChange:s,caller:B_}),[D,z]=Xu({prop:o,defaultProp:l,onChange:c,caller:B_}),F=C.useRef(null),q=y?x||!!y.closest("form"):!0,[Q,re]=C.useState(new Set),Z=Array.from(Q).map(se=>se.props.value).join(";");return a.jsx(VF,{...g,children:a.jsxs(b9e,{required:m,scope:e,trigger:y,onTriggerChange:w,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:j,onValueNodeHasChildrenChange:T,contentId:bl(),value:D,onValueChange:z,open:I,onOpenChange:M,dir:O,triggerPointerDownPosRef:F,disabled:f,children:[a.jsx(r7.Provider,{scope:e,children:a.jsx(w9e,{scope:t.__scopeSelect,onNativeOptionAdd:C.useCallback(se=>{re(K=>new Set(K).add(se))},[]),onNativeOptionRemove:C.useCallback(se=>{re(K=>{const X=new Set(K);return X.delete(se),X})},[]),children:r})}),q?a.jsxs(ave,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:D,onChange:se=>z(se.target.value),disabled:f,form:x,children:[D===void 0?a.jsx("option",{value:""}):null,Array.from(Q)]},Z):null]})})};Mxe.displayName=B_;var Lxe="SelectTrigger",Fxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,s=i7(r),o=qb(Lxe,r),l=o.disabled||n,c=An(e,o.onTriggerChange),u=n7(r),d=C.useRef("touch"),[h,f,m]=lve(g=>{const y=u().filter(E=>!E.disabled),w=y.find(E=>E.value===o.value),S=cve(y,g,w);S!==void 0&&o.onValueChange(S.value)}),x=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(ZO,{asChild:!0,...s,children:a.jsx(Dr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ove(o.value)?"":void 0,...i,ref:c,onClick:wr(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&x(g)}),onPointerDown:wr(i.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:wr(i.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&x9e.includes(g.key)&&(x(),g.preventDefault())})})})});Fxe.displayName=Lxe;var Bxe="SelectValue",$xe=C.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...l}=t,c=qb(Bxe,r),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,h=An(e,c.onValueNodeChange);return Vo(()=>{u(d)},[u,d]),a.jsx(Dr.span,{...l,ref:h,style:{pointerEvents:"none"},children:ove(c.value)?a.jsx(a.Fragment,{children:o}):s})});$xe.displayName=Bxe;var N9e="SelectIcon",Uxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return a.jsx(Dr.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});Uxe.displayName=N9e;var S9e="SelectPortal",zxe=t=>a.jsx(RC,{asChild:!0,...t});zxe.displayName=S9e;var $_="SelectContent",Vxe=C.forwardRef((t,e)=>{const r=qb($_,t.__scopeSelect),[n,i]=C.useState();if(Vo(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?Hp.createPortal(a.jsx(qxe,{scope:t.__scopeSelect,children:a.jsx(r7.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),s):null}return a.jsx(Hxe,{...t,ref:e})});Vxe.displayName=$_;var lp=10,[qxe,Hb]=KC($_),E9e="SelectContentImpl",j9e=vb("SelectContent.RemoveScroll"),Hxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:y,...w}=t,S=qb($_,r),[E,j]=C.useState(null),[T,O]=C.useState(null),I=An(e,he=>j(he)),[M,D]=C.useState(null),[z,F]=C.useState(null),q=n7(r),[Q,re]=C.useState(!1),Z=C.useRef(!1);C.useEffect(()=>{if(E)return e7(E)},[E]),JF();const se=C.useCallback(he=>{const[_e,...ue]=q().map(Le=>Le.ref.current),[je]=ue.slice(-1),ye=document.activeElement;for(const Le of he)if(Le===ye||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===_e&&T&&(T.scrollTop=0),Le===je&&T&&(T.scrollTop=T.scrollHeight),Le==null||Le.focus(),document.activeElement!==ye))return},[q,T]),K=C.useCallback(()=>se([M,E]),[se,M,E]);C.useEffect(()=>{Q&&K()},[Q,K]);const{onOpenChange:X,triggerPointerDownPosRef:Y}=S;C.useEffect(()=>{if(E){let he={x:0,y:0};const _e=je=>{var ye,Le;he={x:Math.abs(Math.round(je.pageX)-(((ye=Y.current)==null?void 0:ye.x)??0)),y:Math.abs(Math.round(je.pageY)-(((Le=Y.current)==null?void 0:Le.y)??0))}},ue=je=>{he.x<=10&&he.y<=10?je.preventDefault():E.contains(je.target)||X(!1),document.removeEventListener("pointermove",_e),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",ue,{capture:!0})}}},[E,X,Y]),C.useEffect(()=>{const he=()=>X(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[X]);const[oe,xe]=lve(he=>{const _e=q().filter(ye=>!ye.disabled),ue=_e.find(ye=>ye.ref.current===document.activeElement),je=cve(_e,he,ue);je&&setTimeout(()=>je.ref.current.focus())}),H=C.useCallback((he,_e,ue)=>{const je=!Z.current&&!ue;(S.value!==void 0&&S.value===_e||je)&&(D(he),je&&(Z.current=!0))},[S.value]),J=C.useCallback(()=>E==null?void 0:E.focus(),[E]),ie=C.useCallback((he,_e,ue)=>{const je=!Z.current&&!ue;(S.value!==void 0&&S.value===_e||je)&&F(he)},[S.value]),ce=n==="popper"?JV:Wxe,me=ce===JV?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:y}:{};return a.jsx(qxe,{scope:r,content:E,viewport:T,onViewportChange:O,itemRefCallback:H,selectedItem:M,onItemLeave:J,itemTextRefCallback:ie,focusSelectedItem:K,selectedItemText:z,position:n,isPositioned:Q,searchRef:oe,children:a.jsx(rI,{as:j9e,allowPinchZoom:!0,children:a.jsx(eI,{asChild:!0,trapped:S.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:wr(i,he=>{var _e;(_e=S.trigger)==null||_e.focus({preventScroll:!0}),he.preventDefault()}),children:a.jsx(cN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:a.jsx(ce,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:he=>he.preventDefault(),...w,...me,onPlaced:()=>re(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:wr(w.onKeyDown,he=>{const _e=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!_e&&he.key.length===1&&xe(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let je=q().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(he.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const ye=he.target,Le=je.indexOf(ye);je=je.slice(Le+1)}setTimeout(()=>se(je)),he.preventDefault()}})})})})})})});Hxe.displayName=E9e;var A9e="SelectItemAlignedPosition",Wxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,s=qb($_,r),o=Hb($_,r),[l,c]=C.useState(null),[u,d]=C.useState(null),h=An(e,I=>d(I)),f=n7(r),m=C.useRef(!1),x=C.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:w,focusSelectedItem:S}=o,E=C.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&g&&y&&w){const I=s.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),D=s.valueNode.getBoundingClientRect(),z=w.getBoundingClientRect();if(s.dir!=="rtl"){const ye=z.left-M.left,Le=D.left-ye,Ge=I.left-Le,Be=I.width+Ge,Te=Math.max(Be,M.width),ze=window.innerWidth-lp,tt=k3(Le,[lp,Math.max(lp,ze-Te)]);l.style.minWidth=Be+"px",l.style.left=tt+"px"}else{const ye=M.right-z.right,Le=window.innerWidth-D.right-ye,Ge=window.innerWidth-I.right-Le,Be=I.width+Ge,Te=Math.max(Be,M.width),ze=window.innerWidth-lp,tt=k3(Le,[lp,Math.max(lp,ze-Te)]);l.style.minWidth=Be+"px",l.style.right=tt+"px"}const F=f(),q=window.innerHeight-lp*2,Q=g.scrollHeight,re=window.getComputedStyle(u),Z=parseInt(re.borderTopWidth,10),se=parseInt(re.paddingTop,10),K=parseInt(re.borderBottomWidth,10),X=parseInt(re.paddingBottom,10),Y=Z+se+Q+X+K,oe=Math.min(y.offsetHeight*5,Y),xe=window.getComputedStyle(g),H=parseInt(xe.paddingTop,10),J=parseInt(xe.paddingBottom,10),ie=I.top+I.height/2-lp,ce=q-ie,me=y.offsetHeight/2,he=y.offsetTop+me,_e=Z+se+he,ue=Y-_e;if(_e<=ie){const ye=F.length>0&&y===F[F.length-1].ref.current;l.style.bottom="0px";const Le=u.clientHeight-g.offsetTop-g.offsetHeight,Ge=Math.max(ce,me+(ye?J:0)+Le+K),Be=_e+Ge;l.style.height=Be+"px"}else{const ye=F.length>0&&y===F[0].ref.current;l.style.top="0px";const Ge=Math.max(ie,Z+g.offsetTop+(ye?H:0)+me)+ue;l.style.height=Ge+"px",g.scrollTop=_e-ie+g.offsetTop}l.style.margin=`${lp}px 0`,l.style.minHeight=oe+"px",l.style.maxHeight=q+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,s.trigger,s.valueNode,l,u,g,y,w,s.dir,n]);Vo(()=>E(),[E]);const[j,T]=C.useState();Vo(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const O=C.useCallback(I=>{I&&x.current===!0&&(E(),S==null||S(),x.current=!1)},[E,S]);return a.jsx(T9e,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:O,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:a.jsx(Dr.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Wxe.displayName=A9e;var C9e="SelectPopperPosition",JV=C.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=lp,...s}=t,o=i7(r);return a.jsx(qF,{...o,...s,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});JV.displayName=C9e;var[T9e,mY]=KC($_,{}),eq="SelectViewport",Gxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,s=Hb(eq,r),o=mY(eq,r),l=An(e,s.onViewportChange),c=C.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(r7.Slot,{scope:r,children:a.jsx(Dr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:wr(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const x=window.innerHeight-lp*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),w=Math.max(g,y);if(w<x){const S=w+m,E=Math.min(x,S),j=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Gxe.displayName=eq;var Kxe="SelectGroup",[P9e,k9e]=KC(Kxe),O9e=C.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=bl();return a.jsx(P9e,{scope:r,id:i,children:a.jsx(Dr.div,{role:"group","aria-labelledby":i,...n,ref:e})})});O9e.displayName=Kxe;var Xxe="SelectLabel",Yxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=k9e(Xxe,r);return a.jsx(Dr.div,{id:i.id,...n,ref:e})});Yxe.displayName=Xxe;var GM="SelectItem",[I9e,Zxe]=KC(GM),Qxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=t,l=qb(GM,r),c=Hb(GM,r),u=l.value===n,[d,h]=C.useState(s??""),[f,m]=C.useState(!1),x=An(e,S=>{var E;return(E=c.itemRefCallback)==null?void 0:E.call(c,S,n,i)}),g=bl(),y=C.useRef("touch"),w=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(I9e,{scope:r,value:n,disabled:i,textId:g,isSelected:u,onItemTextChange:C.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:a.jsx(r7.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:a.jsx(Dr.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:wr(o.onFocus,()=>m(!0)),onBlur:wr(o.onBlur,()=>m(!1)),onClick:wr(o.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:wr(o.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:wr(o.onPointerDown,S=>{y.current=S.pointerType}),onPointerMove:wr(o.onPointerMove,S=>{var E;y.current=S.pointerType,i?(E=c.onItemLeave)==null||E.call(c):y.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:wr(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=c.onItemLeave)==null||E.call(c))}),onKeyDown:wr(o.onKeyDown,S=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&S.key===" "||(v9e.includes(S.key)&&w(),S.key===" "&&S.preventDefault())})})})})});Qxe.displayName=GM;var OT="SelectItemText",Jxe=C.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...s}=t,o=qb(OT,r),l=Hb(OT,r),c=Zxe(OT,r),u=_9e(OT,r),[d,h]=C.useState(null),f=An(e,w=>h(w),c.onItemTextChange,w=>{var S;return(S=l.itemTextRefCallback)==null?void 0:S.call(l,w,c.value,c.disabled)}),m=d==null?void 0:d.textContent,x=C.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return Vo(()=>(g(x),()=>y(x)),[g,y,x]),a.jsxs(a.Fragment,{children:[a.jsx(Dr.span,{id:c.textId,...s,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hp.createPortal(s.children,o.valueNode):null]})});Jxe.displayName=OT;var eve="SelectItemIndicator",tve=C.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return Zxe(eve,r).isSelected?a.jsx(Dr.span,{"aria-hidden":!0,...n,ref:e}):null});tve.displayName=eve;var tq="SelectScrollUpButton",rve=C.forwardRef((t,e)=>{const r=Hb(tq,t.__scopeSelect),n=mY(tq,t.__scopeSelect),[i,s]=C.useState(!1),o=An(e,n.onScrollButtonChange);return Vo(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(ive,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});rve.displayName=tq;var rq="SelectScrollDownButton",nve=C.forwardRef((t,e)=>{const r=Hb(rq,t.__scopeSelect),n=mY(rq,t.__scopeSelect),[i,s]=C.useState(!1),o=An(e,n.onScrollButtonChange);return Vo(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(ive,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});nve.displayName=rq;var ive=C.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,s=Hb("SelectScrollButton",r),o=C.useRef(null),l=n7(r),c=C.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return C.useEffect(()=>()=>c(),[c]),Vo(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(Dr.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:wr(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:wr(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:wr(i.onPointerLeave,()=>{c()})})}),R9e="SelectSeparator",sve=C.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(Dr.div,{"aria-hidden":!0,...n,ref:e})});sve.displayName=R9e;var nq="SelectArrow",D9e=C.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=i7(r),s=qb(nq,r),o=Hb(nq,r);return s.open&&o.position==="popper"?a.jsx(HF,{...i,...n,ref:e}):null});D9e.displayName=nq;var M9e="SelectBubbleInput",ave=C.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const i=C.useRef(null),s=An(n,i),o=tI(e);return C.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),a.jsx(Dr.select,{...r,style:{...t0e,...r.style},ref:s,defaultValue:e})});ave.displayName=M9e;function ove(t){return t===""||t===void 0}function lve(t){const e=Uo(t),r=C.useRef(""),n=C.useRef(0),i=C.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),s=C.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function cve(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let o=L9e(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function L9e(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var F9e=Mxe,uve=Fxe,B9e=$xe,$9e=Uxe,U9e=zxe,dve=Vxe,z9e=Gxe,hve=Yxe,fve=Qxe,V9e=Jxe,q9e=tve,mve=rve,pve=nve,gve=sve;const wi=F9e,_i=B9e,gi=C.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(uve,{ref:n,className:Ut("flex h-11 w-full items-center justify-between rounded-xl border border-input bg-background px-4 py-2","font-body text-sm text-foreground","ring-offset-background placeholder:text-muted-foreground","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary","disabled:cursor-not-allowed disabled:opacity-50","[&>span]:line-clamp-1",t),...r,children:[e,a.jsx($9e,{asChild:!0,children:a.jsx(MC,{className:"h-4 w-4 opacity-50"})})]}));gi.displayName=uve.displayName;const xve=C.forwardRef(({className:t,...e},r)=>a.jsx(mve,{ref:r,className:Ut("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(xRe,{className:"h-4 w-4"})}));xve.displayName=mve.displayName;const vve=C.forwardRef(({className:t,...e},r)=>a.jsx(pve,{ref:r,className:Ut("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(MC,{className:"h-4 w-4"})}));vve.displayName=pve.displayName;const xi=C.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>a.jsx(U9e,{children:a.jsxs(dve,{ref:i,className:Ut("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-xl border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(xve,{}),a.jsx(z9e,{className:Ut("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(vve,{})]})}));xi.displayName=dve.displayName;const H9e=C.forwardRef(({className:t,...e},r)=>a.jsx(hve,{ref:r,className:Ut("py-1.5 pl-8 pr-2 font-display text-sm font-semibold",t),...e}));H9e.displayName=hve.displayName;const or=C.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(fve,{ref:n,className:Ut("relative flex w-full cursor-default select-none items-center rounded-lg py-2 pl-8 pr-2","font-body text-sm","outline-none transition-colors duration-150","focus:bg-primary/10 focus:text-primary","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(q9e,{children:a.jsx(xl,{className:"h-4 w-4 text-primary"})})}),a.jsx(V9e,{children:e})]}));or.displayName=fve.displayName;const W9e=C.forwardRef(({className:t,...e},r)=>a.jsx(gve,{ref:r,className:Ut("-mx-1 my-1 h-px bg-border",t),...e}));W9e.displayName=gve.displayName;var ds;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ds||(ds={}));var wne;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(wne||(wne={}));const pn=ds.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),y1=t=>{switch(typeof t){case"undefined":return pn.undefined;case"string":return pn.string;case"number":return Number.isNaN(t)?pn.nan:pn.number;case"boolean":return pn.boolean;case"function":return pn.function;case"bigint":return pn.bigint;case"symbol":return pn.symbol;case"object":return Array.isArray(t)?pn.array:t===null?pn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pn.promise:typeof Map<"u"&&t instanceof Map?pn.map:typeof Set<"u"&&t instanceof Set?pn.set:typeof Date<"u"&&t instanceof Date?pn.date:pn.object;default:return pn.unknown}},Ir=ds.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Og extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),n}static assert(e){if(!(e instanceof Og))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ds.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];r[s]=r[s]||[],r[s].push(e(i))}else n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Og.create=t=>new Og(t);const iq=(t,e)=>{let r;switch(t.code){case Ir.invalid_type:t.received===pn.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ir.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ds.jsonStringifyReplacer)}`;break;case Ir.unrecognized_keys:r=`Unrecognized key(s) in object: ${ds.joinValues(t.keys,", ")}`;break;case Ir.invalid_union:r="Invalid input";break;case Ir.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ds.joinValues(t.options)}`;break;case Ir.invalid_enum_value:r=`Invalid enum value. Expected ${ds.joinValues(t.options)}, received '${t.received}'`;break;case Ir.invalid_arguments:r="Invalid function arguments";break;case Ir.invalid_return_type:r="Invalid function return type";break;case Ir.invalid_date:r="Invalid date";break;case Ir.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ds.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ir.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ir.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ir.custom:r="Invalid input";break;case Ir.invalid_intersection_types:r="Intersection results could not be merged";break;case Ir.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ir.not_finite:r="Number must be finite";break;default:r=e.defaultError,ds.assertNever(t)}return{message:r}};let G9e=iq;function K9e(){return G9e}const X9e=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}};function Zr(t,e){const r=K9e(),n=X9e({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===iq?void 0:iq].filter(i=>!!i)});t.common.issues.push(n)}class Of{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return ui;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const s=await i.key,o=await i.value;n.push({key:s,value:o})}return Of.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return ui;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const ui=Object.freeze({status:"aborted"}),IT=t=>({status:"dirty",value:t}),$m=t=>({status:"valid",value:t}),_ne=t=>t.status==="aborted",Nne=t=>t.status==="dirty",jA=t=>t.status==="valid",KM=t=>typeof Promise<"u"&&t instanceof Promise;var _n;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_n||(_n={}));class wb{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sne=(t,e)=>{if(jA(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Og(t.common.issues);return this._error=r,this._error}}};function zi(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:i}}class cs{get description(){return this._def.description}_getType(e){return y1(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:y1(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Of,ctx:{common:e.parent.common,data:e.data,parsedType:y1(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(KM(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:y1(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Sne(n,i)}"~validate"(e){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:y1(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:r});return jA(s)?{value:s.value}:{issues:r.common.issues}}catch(s){(i=(n=s==null?void 0:s.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>jA(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:y1(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(KM(i)?i:Promise.resolve(i));return Sne(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:Ir.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new CA({schema:this,typeName:di.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return tb.create(this,this._def)}nullable(){return TA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _g.create(this)}promise(){return QM.create(this,this._def)}or(e){return YM.create([this,e],this._def)}and(e){return ZM.create(this,e,this._def)}transform(e){return new CA({...zi(this._def),schema:this,typeName:di.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new oq({...zi(this._def),innerType:this,defaultValue:r,typeName:di.ZodDefault})}brand(){return new v$e({typeName:di.ZodBranded,type:this,...zi(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new lq({...zi(this._def),innerType:this,catchValue:r,typeName:di.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return pY.create(this,e)}readonly(){return cq.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Y9e=/^c[^\s-]{8,}$/i,Z9e=/^[0-9a-z]+$/,Q9e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,J9e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,e$e=/^[a-z0-9_-]{21}$/i,t$e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,r$e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,n$e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,i$e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let f$;const s$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,o$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,l$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,c$e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,u$e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yve="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",d$e=new RegExp(`^${yve}$`);function bve(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function h$e(t){return new RegExp(`^${bve(t)}$`)}function f$e(t){let e=`${yve}T${bve(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function m$e(t,e){return!!((e==="v4"||!e)&&s$e.test(t)||(e==="v6"||!e)&&o$e.test(t))}function p$e(t,e){if(!t$e.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function g$e(t,e){return!!((e==="v4"||!e)&&a$e.test(t)||(e==="v6"||!e)&&l$e.test(t))}class My extends cs{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pn.string){const s=this._getOrReturnCtx(e);return Zr(s,{code:Ir.invalid_type,expected:pn.string,received:s.parsedType}),ui}const n=new Of;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Zr(i,{code:Ir.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Zr(i,{code:Ir.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")n$e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"email",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")f$||(f$=new RegExp(i$e,"u")),f$.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"emoji",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")J9e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"uuid",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")e$e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"nanoid",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Y9e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"cuid",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Z9e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"cuid2",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Q9e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"ulid",code:Ir.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Zr(i,{validation:"url",code:Ir.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"regex",code:Ir.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?f$e(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?d$e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?h$e(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?r$e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"duration",code:Ir.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?m$e(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"ip",code:Ir.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?p$e(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"jwt",code:Ir.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?g$e(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"cidr",code:Ir.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?c$e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"base64",code:Ir.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?u$e.test(e.data)||(i=this._getOrReturnCtx(e,i),Zr(i,{validation:"base64url",code:Ir.invalid_string,message:s.message}),n.dirty()):ds.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Ir.invalid_string,..._n.errToObj(n)})}_addCheck(e){return new My({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._n.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._n.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._n.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._n.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._n.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._n.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._n.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._n.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._n.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._n.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._n.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._n.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._n.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._n.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._n.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._n.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,..._n.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,..._n.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,..._n.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,..._n.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,..._n.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,..._n.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,..._n.errToObj(r)})}nonempty(e){return this.min(1,_n.errToObj(e))}trim(){return new My({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new My({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new My({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}My.create=t=>new My({checks:[],typeName:di.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...zi(t)});function x$e(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class O3 extends cs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pn.number){const s=this._getOrReturnCtx(e);return Zr(s,{code:Ir.invalid_type,expected:pn.number,received:s.parsedType}),ui}let n;const i=new Of;for(const s of this._def.checks)s.kind==="int"?ds.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?x$e(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.not_finite,message:s.message}),i.dirty()):ds.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,_n.toString(r))}gt(e,r){return this.setLimit("min",e,!1,_n.toString(r))}lte(e,r){return this.setLimit("max",e,!0,_n.toString(r))}lt(e,r){return this.setLimit("max",e,!1,_n.toString(r))}setLimit(e,r,n,i){return new O3({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:_n.toString(i)}]})}_addCheck(e){return new O3({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_n.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_n.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:_n.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:_n.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_n.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_n.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ds.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}O3.create=t=>new O3({checks:[],typeName:di.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...zi(t)});class I3 extends cs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pn.bigint)return this._getInvalidInput(e);let n;const i=new Of;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Zr(n,{code:Ir.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ds.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Zr(r,{code:Ir.invalid_type,expected:pn.bigint,received:r.parsedType}),ui}gte(e,r){return this.setLimit("min",e,!0,_n.toString(r))}gt(e,r){return this.setLimit("min",e,!1,_n.toString(r))}lte(e,r){return this.setLimit("max",e,!0,_n.toString(r))}lt(e,r){return this.setLimit("max",e,!1,_n.toString(r))}setLimit(e,r,n,i){return new I3({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:_n.toString(i)}]})}_addCheck(e){return new I3({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_n.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:_n.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}I3.create=t=>new I3({checks:[],typeName:di.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...zi(t)});class Ene extends cs{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pn.boolean){const n=this._getOrReturnCtx(e);return Zr(n,{code:Ir.invalid_type,expected:pn.boolean,received:n.parsedType}),ui}return $m(e.data)}}Ene.create=t=>new Ene({typeName:di.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...zi(t)});class XM extends cs{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pn.date){const s=this._getOrReturnCtx(e);return Zr(s,{code:Ir.invalid_type,expected:pn.date,received:s.parsedType}),ui}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Zr(s,{code:Ir.invalid_date}),ui}const n=new Of;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Zr(i,{code:Ir.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):ds.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new XM({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:_n.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:_n.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}XM.create=t=>new XM({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:di.ZodDate,...zi(t)});class jne extends cs{_parse(e){if(this._getType(e)!==pn.symbol){const n=this._getOrReturnCtx(e);return Zr(n,{code:Ir.invalid_type,expected:pn.symbol,received:n.parsedType}),ui}return $m(e.data)}}jne.create=t=>new jne({typeName:di.ZodSymbol,...zi(t)});class Ane extends cs{_parse(e){if(this._getType(e)!==pn.undefined){const n=this._getOrReturnCtx(e);return Zr(n,{code:Ir.invalid_type,expected:pn.undefined,received:n.parsedType}),ui}return $m(e.data)}}Ane.create=t=>new Ane({typeName:di.ZodUndefined,...zi(t)});class Cne extends cs{_parse(e){if(this._getType(e)!==pn.null){const n=this._getOrReturnCtx(e);return Zr(n,{code:Ir.invalid_type,expected:pn.null,received:n.parsedType}),ui}return $m(e.data)}}Cne.create=t=>new Cne({typeName:di.ZodNull,...zi(t)});class Tne extends cs{constructor(){super(...arguments),this._any=!0}_parse(e){return $m(e.data)}}Tne.create=t=>new Tne({typeName:di.ZodAny,...zi(t)});class Pne extends cs{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $m(e.data)}}Pne.create=t=>new Pne({typeName:di.ZodUnknown,...zi(t)});class _b extends cs{_parse(e){const r=this._getOrReturnCtx(e);return Zr(r,{code:Ir.invalid_type,expected:pn.never,received:r.parsedType}),ui}}_b.create=t=>new _b({typeName:di.ZodNever,...zi(t)});class kne extends cs{_parse(e){if(this._getType(e)!==pn.undefined){const n=this._getOrReturnCtx(e);return Zr(n,{code:Ir.invalid_type,expected:pn.void,received:n.parsedType}),ui}return $m(e.data)}}kne.create=t=>new kne({typeName:di.ZodVoid,...zi(t)});class _g extends cs{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==pn.array)return Zr(r,{code:Ir.invalid_type,expected:pn.array,received:r.parsedType}),ui;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(Zr(r,{code:o?Ir.too_big:Ir.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Zr(r,{code:Ir.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Zr(r,{code:Ir.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new wb(r,o,r.path,l)))).then(o=>Of.mergeArray(n,o));const s=[...r.data].map((o,l)=>i.type._parseSync(new wb(r,o,r.path,l)));return Of.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new _g({...this._def,minLength:{value:e,message:_n.toString(r)}})}max(e,r){return new _g({...this._def,maxLength:{value:e,message:_n.toString(r)}})}length(e,r){return new _g({...this._def,exactLength:{value:e,message:_n.toString(r)}})}nonempty(e){return this.min(1,e)}}_g.create=(t,e)=>new _g({type:t,minLength:null,maxLength:null,exactLength:null,typeName:di.ZodArray,...zi(e)});function fS(t){if(t instanceof Do){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=tb.create(fS(n))}return new Do({...t._def,shape:()=>e})}else return t instanceof _g?new _g({...t._def,type:fS(t.element)}):t instanceof tb?tb.create(fS(t.unwrap())):t instanceof TA?TA.create(fS(t.unwrap())):t instanceof U_?U_.create(t.items.map(e=>fS(e))):t}class Do extends cs{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ds.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==pn.object){const u=this._getOrReturnCtx(e);return Zr(u,{code:Ir.invalid_type,expected:pn.object,received:u.parsedType}),ui}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof _b&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=s[u],h=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new wb(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof _b){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(Zr(i,{code:Ir.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new wb(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Of.mergeObjectSync(n,u)):Of.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return _n.errToObj,new Do({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:_n.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Do({...this._def,unknownKeys:"strip"})}passthrough(){return new Do({...this._def,unknownKeys:"passthrough"})}extend(e){return new Do({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Do({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:di.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Do({...this._def,catchall:e})}pick(e){const r={};for(const n of ds.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Do({...this._def,shape:()=>r})}omit(e){const r={};for(const n of ds.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new Do({...this._def,shape:()=>r})}deepPartial(){return fS(this)}partial(e){const r={};for(const n of ds.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new Do({...this._def,shape:()=>r})}required(e){const r={};for(const n of ds.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof tb;)s=s._def.innerType;r[n]=s}return new Do({...this._def,shape:()=>r})}keyof(){return wve(ds.objectKeys(this.shape))}}Do.create=(t,e)=>new Do({shape:()=>t,unknownKeys:"strip",catchall:_b.create(),typeName:di.ZodObject,...zi(e)});Do.strictCreate=(t,e)=>new Do({shape:()=>t,unknownKeys:"strict",catchall:_b.create(),typeName:di.ZodObject,...zi(e)});Do.lazycreate=(t,e)=>new Do({shape:t,unknownKeys:"strip",catchall:_b.create(),typeName:di.ZodObject,...zi(e)});class YM extends cs{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Og(l.ctx.common.issues));return Zr(r,{code:Ir.invalid_union,unionErrors:o}),ui}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new Og(c));return Zr(r,{code:Ir.invalid_union,unionErrors:l}),ui}}get options(){return this._def.options}}YM.create=(t,e)=>new YM({options:t,typeName:di.ZodUnion,...zi(e)});function sq(t,e){const r=y1(t),n=y1(e);if(t===e)return{valid:!0,data:t};if(r===pn.object&&n===pn.object){const i=ds.objectKeys(e),s=ds.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const c=sq(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===pn.array&&n===pn.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],c=sq(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===pn.date&&n===pn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZM extends cs{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(_ne(s)||_ne(o))return ui;const l=sq(s.value,o.value);return l.valid?((Nne(s)||Nne(o))&&r.dirty(),{status:r.value,value:l.data}):(Zr(n,{code:Ir.invalid_intersection_types}),ui)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ZM.create=(t,e,r)=>new ZM({left:t,right:e,typeName:di.ZodIntersection,...zi(r)});class U_ extends cs{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.array)return Zr(n,{code:Ir.invalid_type,expected:pn.array,received:n.parsedType}),ui;if(n.data.length<this._def.items.length)return Zr(n,{code:Ir.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ui;!this._def.rest&&n.data.length>this._def.items.length&&(Zr(n,{code:Ir.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new wb(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Of.mergeArray(r,o)):Of.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new U_({...this._def,rest:e})}}U_.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new U_({items:t,typeName:di.ZodTuple,rest:null,...zi(e)})};class One extends cs{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.map)return Zr(n,{code:Ir.invalid_type,expected:pn.map,received:n.parsedType}),ui;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new wb(n,l,n.path,[u,"key"])),value:s._parse(new wb(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return ui;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return ui;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}One.create=(t,e,r)=>new One({valueType:e,keyType:t,typeName:di.ZodMap,...zi(r)});class R3 extends cs{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.set)return Zr(n,{code:Ir.invalid_type,expected:pn.set,received:n.parsedType}),ui;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Zr(n,{code:Ir.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Zr(n,{code:Ir.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return ui;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>s._parse(new wb(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,r){return new R3({...this._def,minSize:{value:e,message:_n.toString(r)}})}max(e,r){return new R3({...this._def,maxSize:{value:e,message:_n.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}R3.create=(t,e)=>new R3({valueType:t,minSize:null,maxSize:null,typeName:di.ZodSet,...zi(e)});class Ine extends cs{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Ine.create=(t,e)=>new Ine({getter:t,typeName:di.ZodLazy,...zi(e)});class aq extends cs{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Zr(r,{received:r.data,code:Ir.invalid_literal,expected:this._def.value}),ui}return{status:"valid",value:e.data}}get value(){return this._def.value}}aq.create=(t,e)=>new aq({value:t,typeName:di.ZodLiteral,...zi(e)});function wve(t,e){return new AA({values:t,typeName:di.ZodEnum,...zi(e)})}class AA extends cs{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Zr(r,{expected:ds.joinValues(n),received:r.parsedType,code:Ir.invalid_type}),ui}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Zr(r,{received:r.data,code:Ir.invalid_enum_value,options:n}),ui}return $m(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return AA.create(e,{...this._def,...r})}exclude(e,r=this._def){return AA.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}AA.create=wve;class Rne extends cs{_parse(e){const r=ds.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==pn.string&&n.parsedType!==pn.number){const i=ds.objectValues(r);return Zr(n,{expected:ds.joinValues(i),received:n.parsedType,code:Ir.invalid_type}),ui}if(this._cache||(this._cache=new Set(ds.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ds.objectValues(r);return Zr(n,{received:n.data,code:Ir.invalid_enum_value,options:i}),ui}return $m(e.data)}get enum(){return this._def.values}}Rne.create=(t,e)=>new Rne({values:t,typeName:di.ZodNativeEnum,...zi(e)});class QM extends cs{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.promise&&r.common.async===!1)return Zr(r,{code:Ir.invalid_type,expected:pn.promise,received:r.parsedType}),ui;const n=r.parsedType===pn.promise?r.data:Promise.resolve(r.data);return $m(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}QM.create=(t,e)=>new QM({type:t,typeName:di.ZodPromise,...zi(e)});class CA extends cs{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===di.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Zr(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(n.data,s);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return ui;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?ui:c.status==="dirty"||r.value==="dirty"?IT(c.value):c});{if(r.value==="aborted")return ui;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?ui:l.status==="dirty"||r.value==="dirty"?IT(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ui:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ui:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!jA(o))return ui;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>jA(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:r.value,value:l})):ui);ds.assertNever(i)}}CA.create=(t,e,r)=>new CA({schema:t,typeName:di.ZodEffects,effect:e,...zi(r)});CA.createWithPreprocess=(t,e,r)=>new CA({schema:e,effect:{type:"preprocess",transform:t},typeName:di.ZodEffects,...zi(r)});class tb extends cs{_parse(e){return this._getType(e)===pn.undefined?$m(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tb.create=(t,e)=>new tb({innerType:t,typeName:di.ZodOptional,...zi(e)});class TA extends cs{_parse(e){return this._getType(e)===pn.null?$m(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}TA.create=(t,e)=>new TA({innerType:t,typeName:di.ZodNullable,...zi(e)});class oq extends cs{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===pn.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}oq.create=(t,e)=>new oq({innerType:t,typeName:di.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...zi(e)});class lq extends cs{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return KM(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Og(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Og(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}lq.create=(t,e)=>new lq({innerType:t,typeName:di.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...zi(e)});class Dne extends cs{_parse(e){if(this._getType(e)!==pn.nan){const n=this._getOrReturnCtx(e);return Zr(n,{code:Ir.invalid_type,expected:pn.nan,received:n.parsedType}),ui}return{status:"valid",value:e.data}}}Dne.create=t=>new Dne({typeName:di.ZodNaN,...zi(t)});class v$e extends cs{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class pY extends cs{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ui:s.status==="dirty"?(r.dirty(),IT(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ui:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new pY({in:e,out:r,typeName:di.ZodPipeline})}}class cq extends cs{_parse(e){const r=this._def.innerType._parse(e),n=i=>(jA(i)&&(i.value=Object.freeze(i.value)),i);return KM(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}cq.create=(t,e)=>new cq({innerType:t,typeName:di.ZodReadonly,...zi(e)});Do.lazycreate;var di;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(di||(di={}));const Ru=My.create;_b.create;_g.create;const _ve=Do.create;Do.strictCreate;YM.create;ZM.create;U_.create;const y$e=aq.create,uq=AA.create;QM.create;tb.create;TA.create;const dq=t=>{const e=t.replace(/\D/g,"");if(e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let r=0;for(let i=0;i<9;i++)r+=parseInt(e.charAt(i))*(10-i);let n=11-r%11;if(n>=10&&(n=0),n!==parseInt(e.charAt(9)))return!1;r=0;for(let i=0;i<10;i++)r+=parseInt(e.charAt(i))*(11-i);return n=11-r%11,n>=10&&(n=0),n===parseInt(e.charAt(10))},PA=t=>{const e=t.replace(/\D/g,"");if(e.length!==14||/^(\d)\1{13}$/.test(e))return!1;let r=0,n=5;for(let s=0;s<12;s++)r+=parseInt(e.charAt(s))*n,n=n===2?9:n-1;let i=r%11<2?0:11-r%11;if(i!==parseInt(e.charAt(12)))return!1;r=0,n=6;for(let s=0;s<13;s++)r+=parseInt(e.charAt(s))*n,n=n===2?9:n-1;return i=r%11<2?0:11-r%11,i===parseInt(e.charAt(13))},Nve=t=>{const e=t.replace(/\D/g,"");return e.length<=3?e:e.length<=6?`${e.slice(0,3)}.${e.slice(3)}`:e.length<=9?`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6)}`:`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6,9)}-${e.slice(9,11)}`},D3=t=>{const e=t.replace(/\D/g,"");return e.length<=2?e:e.length<=5?`${e.slice(0,2)}.${e.slice(2)}`:e.length<=8?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5)}`:e.length<=12?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8)}`:`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12,14)}`},M3=t=>{const e=t.replace(/\D/g,"");return e.length<=2?e:e.length<=6?`(${e.slice(0,2)}) ${e.slice(2)}`:e.length<=10?`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7,11)}`},L3=t=>{const e=t.replace(/\D/g,"");return e.length<=5?e:`${e.slice(0,5)}-${e.slice(5,8)}`};function Ng(t){const r="/Ciclik_validacoes/".replace(/\/+$|^$/g,"").replace(/\/$/,""),n=r==="/"||r===""?"":r,i=t.startsWith("/")?t:`/${t}`;return`${window.location.origin}${n}${i}`}const Bp=t=>{const e="/Ciclik_validacoes/",r=t.startsWith("/")?t.slice(1):t;return`${e}${r}`},b$e=_ve({nome:Ru().min(3,"Nome deve ter no mnimo 3 caracteres"),email:Ru().email("Email invlido"),password:Ru().min(6,"Senha deve ter no mnimo 6 caracteres"),telefone:Ru().min(10,"Telefone invlido"),tipo_pessoa:uq(["PF","PJ"]),cpf:Ru().optional(),cnpj:Ru().optional(),tipo_pj:Ru().optional(),cep:Ru().min(8,"CEP invlido"),codigo_indicador:Ru().trim().toUpperCase().max(8).optional().or(y$e(""))}),KN=t=>{let e=0;return t.length>=6&&(e+=1),t.length>=8&&(e+=1),/[a-z]/.test(t)&&(e+=1),/[A-Z]/.test(t)&&(e+=1),/[0-9]/.test(t)&&(e+=1),/[^a-zA-Z0-9]/.test(t)&&(e+=1),e<=2?{score:25,label:"Fraca",color:"bg-destructive"}:e<=4?{score:50,label:"Mdia",color:"bg-yellow-500"}:e<=5?{score:75,label:"Boa",color:"bg-blue-500"}:{score:100,label:"Forte",color:"bg-green-500"}};function w$e(){const[t]=$ge(),[e,r]=C.useState(!0),[n,i]=C.useState(!1),[s,o]=C.useState("PF"),[l,c]=C.useState(!1),[u,d]=C.useState(""),[h,f]=C.useState(!1),[m,x]=C.useState(!1),g=nn(),{toast:y}=Qi(),{user:w}=Si(),[S,E]=C.useState({nome:"",email:"",password:"",confirmPassword:"",telefone:"",cpf:"",cnpj:"",tipo_pj:"",cep:"",logradouro:"",bairro:"",cidade:"",uf:"",numero:"",complemento:"",codigo_indicador:""});C.useEffect(()=>{const I=setTimeout(()=>{w&&!m&&g("/")},100);return()=>clearTimeout(I)},[w,g,m]),C.useEffect(()=>{(async()=>{const M=new URLSearchParams(window.location.hash.substring(1)),D=M.get("access_token"),z=M.get("refresh_token"),F=M.get("type"),q=t.get("invited")==="true";if(D&&(F==="invite"||F==="magiclink"||F==="signup")){x(!0);try{const{data:re,error:Z}=await Ee.auth.setSession({access_token:D,refresh_token:z||""});if(Z){console.error("Erro ao estabelecer sesso:",Z),y({title:"Erro no convite",description:"No foi possvel processar o convite. Tente novamente.",variant:"destructive"}),x(!1);return}if(re.session){const{data:se}=await Ee.from("user_roles").select("role").eq("user_id",re.session.user.id);(se==null?void 0:se.some(X=>X.role==="investidor"))&&y({title:"Bem-vindo!",description:"Voc est logado como investidor."}),g("/")}}catch(re){console.error("Erro ao processar convite:",re),x(!1)}return}q&&f(!0);const Q=t.get("ref");Q&&(E(re=>({...re,codigo_indicador:Q.toUpperCase()})),y({title:"Cdigo de indicao detectado!",description:`Voc est sendo indicado com o cdigo: ${Q.toUpperCase()}`}))})()},[t,g,y]);const j=async I=>{try{const M=I.replace(/\D/g,"");if(M.length!==8)return;const z=await(await fetch(`https://viacep.com.br/ws/${M}/json/`)).json();z.erro||E(F=>({...F,logradouro:z.logradouro||"",bairro:z.bairro||"",cidade:z.localidade||"",uf:z.uf||""}))}catch(M){console.error("Erro ao buscar CEP:",M)}},T=async I=>{I.preventDefault(),i(!0);try{if(S.password!==S.confirmPassword)throw new Error("As senhas no coincidem");const M=b$e.parse({...S,tipo_pessoa:s});if(s==="PF"){if(!S.cpf)throw new Error("CPF  obrigatrio para Pessoa Fsica");if(!dq(S.cpf))throw new Error("CPF invlido")}if(s==="PJ"){if(!S.cnpj)throw new Error("CNPJ  obrigatrio para Pessoa Jurdica");if(!PA(S.cnpj))throw new Error("CNPJ invlido");if(!S.tipo_pj)throw new Error("Tipo de PJ  obrigatrio")}const{data:D,error:z}=await Ee.auth.signUp({email:M.email,password:M.password,options:{emailRedirectTo:Ng("/auth/confirm"),data:{nome:M.nome,email:M.email,telefone:M.telefone,tipo_pessoa:s,cpf:s==="PF"?S.cpf:null,cnpj:s==="PJ"?S.cnpj:null,tipo_pj:s==="PJ"?S.tipo_pj:null,cep:M.cep,logradouro:S.logradouro||null,bairro:S.bairro||null,cidade:S.cidade||null,uf:S.uf||null,numero:S.numero||null,complemento:S.complemento||null,codigo_indicador:S.codigo_indicador||null,role:"usuario"}}});if(z)throw console.error(" [CADASTRO] Erro ao criar usurio:",z),z;if(!D.user)throw new Error("Usurio no foi criado");y({title:" Verifique seu Email!",description:`Cadastro realizado! Enviamos um link de confirmao para ${M.email}. Confirme seu email para fazer login.`}),g("/auth/confirm")}catch(M){console.error(" [CADASTRO] Erro capturado:",M);const D=M.message==="User already registered"?"Este e-mail j est cadastrado. Faa login ou use outro e-mail.":M.message;y({title:"Erro no cadastro",description:D,variant:"destructive"})}finally{i(!1)}},O=async I=>{I.preventDefault(),i(!0);try{const{data:M,error:D}=await Ee.auth.signInWithPassword({email:S.email,password:S.password});if(D)throw D;if(M.user&&!M.user.email_confirmed_at){const{data:z,error:F}=await Ee.from("user_roles").select("role").eq("user_id",M.user.id);if(!(z==null?void 0:z.some(Q=>Q.role==="admin")))throw await Ee.auth.signOut(),new Error("Por favor, confirme seu email antes de fazer login. Verifique sua caixa de entrada e spam.")}if(M.session){const{data:z,error:F}=await Ee.from("user_roles").select("role").eq("user_id",M.session.user.id);F&&console.error("Erro ao buscar roles:",F),g("/")}}catch(M){console.error("Erro no login:",M),y({title:"Erro no login",description:M.message,variant:"destructive"})}finally{i(!1)}};return m?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:a.jsx(it,{className:"w-full max-w-md shadow-xl rounded-3xl border-0 p-8",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(jn,{className:"h-12 w-12 animate-spin text-primary"}),a.jsx("p",{className:"text-lg font-medium text-foreground",children:"Processando seu acesso..."}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Aguarde enquanto configuramos sua conta."})]})})}):a.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:[a.jsx("div",{className:"fixed top-4 left-4 z-50",children:a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>{window.scrollTo(0,1),setTimeout(()=>{window.scrollTo(0,0),g("/apresentacao")},10)},className:"font-display font-medium bg-white/90 backdrop-blur-sm hover:bg-white shadow-md rounded-full gap-2",children:[a.jsx(Kn,{className:"w-4 h-4"}),"Voltar"]})}),a.jsxs(it,{className:"w-full max-w-md shadow-xl rounded-3xl border-0 overflow-hidden",children:[a.jsxs("div",{className:"pt-8 pb-6 px-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:Bp("ciclik-logo-full.png"),alt:"Ciclik - Recicle e Ganhe",className:"h-24 w-auto object-contain"})}),a.jsx("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"Recicle, acumule pontos e ganhe prmios"})]}),a.jsx(ht,{className:"p-6 pt-4",children:a.jsxs(yc,{value:e?"login":"signup",onValueChange:I=>r(I==="login"),children:[a.jsxs(Jl,{className:"grid w-full grid-cols-2 mb-6 h-12 rounded-xl bg-muted/50",children:[a.jsx(ri,{value:"login",className:"rounded-lg data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium",children:"Entrar"}),a.jsx(ri,{value:"signup",className:"rounded-lg data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium",children:"Cadastrar"})]}),a.jsx(Ti,{value:"login",children:a.jsxs("form",{onSubmit:O,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"email",className:"text-foreground font-medium text-sm",children:"Email"}),a.jsx(mt,{id:"email",type:"email",placeholder:"Digite seu email",value:S.email,onChange:I=>E({...S,email:I.target.value}),required:!0,autoComplete:"email",className:"h-12 rounded-xl bg-muted/30 border-muted focus:border-primary"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"password",className:"text-foreground font-medium text-sm",children:"Senha"}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{id:"password",type:l?"text":"password",placeholder:"Digite sua senha",value:S.password,onChange:I=>E({...S,password:I.target.value}),required:!0,autoComplete:"current-password",className:"h-12 pr-12 rounded-xl bg-muted/30 border-muted focus:border-primary"}),a.jsx(Oe,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-10 w-10 rounded-lg hover:bg-muted",onClick:()=>c(!l),tabIndex:-1,children:l?a.jsx(x4,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Am,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx(Bge,{to:"/forgot-password",className:"text-sm text-primary hover:text-primary/80 block text-right font-medium",children:"Esqueceu a senha?"})]}),a.jsxs(Oe,{type:"submit",className:"w-full h-12 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl font-semibold shadow-lg shadow-primary/25 transition-all hover:shadow-xl hover:shadow-primary/30",disabled:n,children:[n&&a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Entrar"]})]})}),a.jsx(Ti,{value:"signup",children:a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"0ms"},children:[a.jsx(nt,{children:"Tipo de Pessoa"}),a.jsxs(wi,{value:s,onValueChange:I=>o(I),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"PF",children:"Pessoa Fsica"}),a.jsx(or,{value:"PJ",children:"Pessoa Jurdica"})]})]})]}),s==="PJ"&&a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"50ms"},children:[a.jsx(nt,{children:"Tipo de Empresa"}),a.jsxs(wi,{value:S.tipo_pj,onValueChange:I=>E({...S,tipo_pj:I}),children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"Condominio",children:"Condomnio"}),a.jsx(or,{value:"Restaurante",children:"Restaurante"}),a.jsx(or,{value:"Comercio",children:"Comrcio"}),a.jsx(or,{value:"Servico",children:"Servio"}),a.jsx(or,{value:"Industria",children:"Indstria"}),a.jsx(or,{value:"Outro",children:"Outro"})]})]})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"50ms"},children:[a.jsxs(nt,{children:["Nome ",s==="PJ"&&"da Empresa"]}),a.jsx(mt,{value:S.nome,onChange:I=>E({...S,nome:I.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"100ms"},children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(nt,{children:"Email"}),a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{type:"button",tabIndex:-1,children:a.jsx(Nf,{className:"h-4 w-4 text-muted-foreground hover:text-primary transition-colors"})}),a.jsx(Gc,{className:"max-w-[250px] text-center",children:a.jsx("p",{children:"Usamos seu email para validar sua conta e enviar informaes importantes sobre suas entregas e pontos."})})]})})]}),a.jsx(mt,{type:"email",value:S.email,onChange:I=>E({...S,email:I.target.value}),required:!0,autoComplete:"email",placeholder:"seu@email.com"})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"150ms"},children:[a.jsx(nt,{children:"Senha (mnimo 6 caracteres)"}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{type:l?"text":"password",value:S.password,onChange:I=>E({...S,password:I.target.value}),required:!0,minLength:6,autoComplete:"new-password",className:"pr-10"}),a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>c(!l),tabIndex:-1,children:l?a.jsx(x4,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Am,{className:"h-4 w-4 text-muted-foreground"})})]}),S.password&&a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"Fora da senha:"}),a.jsx("span",{className:`font-medium ${KN(S.password).label==="Fraca"?"text-destructive":KN(S.password).label==="Mdia"?"text-yellow-600":KN(S.password).label==="Boa"?"text-blue-600":"text-green-600"}`,children:KN(S.password).label})]}),a.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${KN(S.password).color}`,style:{width:`${KN(S.password).score}%`}})}),a.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[S.password.length>=6?a.jsx(xl,{className:"h-3 w-3 text-green-500"}):a.jsx(Xa,{className:"h-3 w-3 text-destructive"}),a.jsx("span",{children:"Mnimo 6 caracteres"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[/[A-Z]/.test(S.password)?a.jsx(xl,{className:"h-3 w-3 text-green-500"}):a.jsx(Xa,{className:"h-3 w-3 text-muted-foreground/50"}),a.jsx("span",{children:"Letra maiscula"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[/[0-9]/.test(S.password)?a.jsx(xl,{className:"h-3 w-3 text-green-500"}):a.jsx(Xa,{className:"h-3 w-3 text-muted-foreground/50"}),a.jsx("span",{children:"Nmero"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[/[^a-zA-Z0-9]/.test(S.password)?a.jsx(xl,{className:"h-3 w-3 text-green-500"}):a.jsx(Xa,{className:"h-3 w-3 text-muted-foreground/50"}),a.jsx("span",{children:"Caractere especial"})]})]})]})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"200ms"},children:[a.jsx(nt,{children:"Confirmar Senha"}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{type:l?"text":"password",value:S.confirmPassword,onChange:I=>E({...S,confirmPassword:I.target.value}),required:!0,minLength:6,autoComplete:"new-password",placeholder:"Digite a senha novamente",className:"pr-10"}),a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>c(!l),tabIndex:-1,children:l?a.jsx(x4,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Am,{className:"h-4 w-4 text-muted-foreground"})})]}),S.confirmPassword&&S.password!==S.confirmPassword&&a.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[a.jsx(Xa,{className:"h-3 w-3"}),"As senhas no coincidem"]}),S.confirmPassword&&S.password===S.confirmPassword&&S.password.length>=6&&a.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[a.jsx(xl,{className:"h-3 w-3"}),"Senhas coincidem"]})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"250ms"},children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(nt,{children:"Telefone"}),a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{type:"button",tabIndex:-1,children:a.jsx(Nf,{className:"h-4 w-4 text-muted-foreground hover:text-primary transition-colors"})}),a.jsx(Gc,{className:"max-w-[250px] text-center",children:a.jsx("p",{children:"No enviamos propaganda. Seu telefone  usado apenas para identificao nas entregas de reciclveis."})})]})})]}),a.jsx(mt,{value:S.telefone,onChange:I=>{const M=M3(I.target.value);E({...S,telefone:M})},placeholder:"(00) 00000-0000",maxLength:15,required:!0})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"300ms"},children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(nt,{children:s==="PF"?"CPF":"CNPJ"}),s==="PF"&&a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{type:"button",tabIndex:-1,children:a.jsx(Nf,{className:"h-4 w-4 text-muted-foreground hover:text-primary transition-colors"})}),a.jsx(Gc,{className:"max-w-[250px] text-center",children:a.jsx("p",{children:"Pedimos seu CPF para garantir que seus benefcios e cashback vo diretamente para voc, com segurana."})})]})})]}),a.jsx(mt,{value:s==="PF"?S.cpf:S.cnpj,onChange:I=>{const M=s==="PF"?"cpf":"cnpj",D=s==="PF"?Nve(I.target.value):D3(I.target.value);E({...S,[M]:D});const z=I.target.value.replace(/\D/g,"");s==="PF"&&z.length===11?d(dq(I.target.value)?"":"CPF invlido"):s==="PJ"&&z.length===14?d(PA(I.target.value)?"":"CNPJ invlido"):d("")},maxLength:s==="PF"?14:18,className:u?"border-destructive":"",required:!0}),u&&a.jsx("p",{className:"text-sm text-destructive",children:u})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"350ms"},children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(nt,{children:"CEP"}),a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{type:"button",tabIndex:-1,children:a.jsx(Nf,{className:"h-4 w-4 text-muted-foreground hover:text-primary transition-colors"})}),a.jsx(Gc,{className:"max-w-[250px] text-center",children:a.jsx("p",{children:"Usamos seu CEP para encontrar o operador logstico mais prximo para suas entregas de reciclveis."})})]})})]}),a.jsx(mt,{value:S.cep,onChange:I=>{const M=L3(I.target.value);E({...S,cep:M}),I.target.value.replace(/\D/g,"").length===8&&j(I.target.value)},placeholder:"00000-000",maxLength:9,required:!0})]}),S.logradouro&&a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"400ms"},children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Cidade"}),a.jsx(mt,{value:S.cidade,disabled:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"UF"}),a.jsx(mt,{value:S.uf,disabled:!0})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx(nt,{children:"Logradouro"}),a.jsx(mt,{value:S.logradouro,disabled:!0})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx(nt,{children:"Bairro"}),a.jsx(mt,{value:S.bairro,disabled:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Nmero"}),a.jsx(mt,{value:S.numero,onChange:I=>E({...S,numero:I.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Complemento"}),a.jsx(mt,{value:S.complemento,onChange:I=>E({...S,complemento:I.target.value})})]})]})]}),a.jsxs("div",{className:"space-y-2 animate-fade-in",style:{animationDelay:"450ms"},children:[a.jsx(nt,{children:"Cdigo de Indicao (opcional)"}),a.jsx(mt,{value:S.codigo_indicador,onChange:I=>E({...S,codigo_indicador:I.target.value.toUpperCase()}),placeholder:"Ex: ABC12345",maxLength:8,className:"font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Tem um cdigo de indicao? Insira aqui para voc e seu amigo ganharem pontos!"})]}),a.jsxs(Oe,{type:"submit",className:"w-full animate-fade-in",style:{animationDelay:"500ms"},disabled:n,children:[n&&a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Criar Conta"]})]})})]})})]})]})}function _$e(){const[t,e]=C.useState(""),[r,n]=C.useState(!1),[i,s]=C.useState(!1),{toast:o}=Qi(),l=async c=>{c.preventDefault(),n(!0);try{const{error:u}=await Ee.auth.resetPasswordForEmail(t,{redirectTo:Ng("/reset-password")});if(u)throw u;s(!0),o({title:"E-mail enviado!",description:"Verifique sua caixa de entrada para redefinir sua senha."})}catch(u){o({title:"Erro ao enviar e-mail",description:u.message,variant:"destructive"})}finally{n(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-green-50 via-white to-green-50",children:a.jsxs(it,{className:"w-full max-w-md",children:[a.jsxs(At,{className:"space-y-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:a.jsx(ps,{className:"w-6 h-6 text-primary"})}),a.jsx(Ct,{className:"text-2xl font-bold text-center",children:"Recuperar Senha"}),a.jsx(gr,{className:"text-center",children:i?"E-mail enviado! Verifique sua caixa de entrada.":"Digite seu e-mail para receber o link de recuperao"})]}),a.jsxs(ht,{children:[i?a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enviamos um e-mail para ",a.jsx("strong",{children:t})," com instrues para redefinir sua senha."]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"No recebeu o e-mail? Verifique sua pasta de spam ou tente novamente em alguns minutos."}),a.jsx(Oe,{variant:"outline",className:"w-full",onClick:()=>{s(!1),e("")},children:"Tentar outro e-mail"})]}):a.jsxs("form",{onSubmit:l,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"email",children:"Email"}),a.jsx(mt,{id:"email",type:"email",placeholder:"seu@email.com",value:t,onChange:c=>e(c.target.value),required:!0,autoComplete:"email"})]}),a.jsx(Oe,{type:"submit",className:"w-full",disabled:r,children:r?"Enviando...":"Enviar Link de Recuperao"})]}),a.jsx("div",{className:"mt-6",children:a.jsx(Bge,{to:"/auth",children:a.jsxs(Oe,{variant:"ghost",className:"w-full",children:[a.jsx(Kn,{className:"mr-2 h-4 w-4"}),"Voltar para o login"]})})})]})]})})}function N$e(){const[t,e]=C.useState(""),[r,n]=C.useState(""),[i,s]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[d,h]=C.useState(!0),f=nn(),{toast:m}=Qi();C.useEffect(()=>{(async()=>{const y=new URLSearchParams(window.location.hash.substring(1)),w=new URLSearchParams(window.location.search),S=y.get("access_token")||w.get("access_token"),E=y.get("refresh_token")||w.get("refresh_token"),j=y.get("type")||w.get("type");if(S&&j==="recovery"){const{data:{session:I}}=await Ee.auth.getSession();I&&(await Ee.auth.signOut(),m({title:"Preparando redefinio de senha",description:"Sesso anterior encerrada para garantir segurana."}));const{data:M,error:D}=await Ee.auth.setSession({access_token:S,refresh_token:E||""});D?(console.error("Erro ao estabelecer sesso:",D),m({title:"Erro",description:"Link de recuperao invlido ou expirado.",variant:"destructive"}),u(!1)):M.session&&u(!0),h(!1);return}const{data:{subscription:T}}=Ee.auth.onAuthStateChange((I,M)=>{I==="PASSWORD_RECOVERY"||I==="SIGNED_IN"?(u(!0),h(!1)):I==="SIGNED_OUT"&&u(!1)}),{data:{session:O}}=await Ee.auth.getSession();return O&&u(!0),h(!1),()=>T.unsubscribe()})()},[]);const x=async g=>{if(g.preventDefault(),t!==r){m({title:"Erro",description:"As senhas no coincidem.",variant:"destructive"});return}if(t.length<6){m({title:"Erro",description:"A senha deve ter no mnimo 6 caracteres.",variant:"destructive"});return}s(!0);try{const{data:{session:y}}=await Ee.auth.getSession(),{error:w}=await Ee.auth.updateUser({password:t});if(w)throw w;m({title:"Senha definida com sucesso!",description:"Voc ser redirecionado para a pgina de login."}),await Ee.auth.signOut(),setTimeout(()=>{f("/auth")},2e3)}catch(y){console.error("Erro ao definir senha:",y),m({title:"Erro ao definir senha",description:y.message,variant:"destructive"})}finally{s(!1)}};return d?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-green-50 via-white to-green-50",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(jn,{className:"w-8 h-8 animate-spin text-primary"}),a.jsx("p",{className:"text-muted-foreground",children:"Verificando seu acesso..."})]})}):c?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-green-50 via-white to-green-50",children:a.jsxs(it,{className:"w-full max-w-md",children:[a.jsxs(At,{className:"space-y-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:a.jsx(ps,{className:"w-6 h-6 text-primary"})}),a.jsx(Ct,{className:"text-2xl font-bold text-center",children:"Bem-vindo ao Ciclik!"}),a.jsx(gr,{className:"text-center",children:"Defina sua senha para acessar o sistema"})]}),a.jsx(ht,{children:a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"password",children:"Senha"}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{id:"password",type:o?"text":"password",placeholder:"",value:t,onChange:g=>e(g.target.value),required:!0,minLength:6,autoComplete:"new-password",className:"pr-10"}),a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>l(!o),tabIndex:-1,children:o?a.jsx(x4,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Am,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"confirmPassword",children:"Confirmar Senha"}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{id:"confirmPassword",type:o?"text":"password",placeholder:"",value:r,onChange:g=>n(g.target.value),required:!0,minLength:6,autoComplete:"new-password",className:"pr-10"}),a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>l(!o),tabIndex:-1,children:o?a.jsx(x4,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Am,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsx(Oe,{type:"submit",className:"w-full",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Definir Senha e Entrar"})]})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-green-50 via-white to-green-50",children:a.jsxs(it,{className:"w-full max-w-md",children:[a.jsxs(At,{className:"space-y-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mb-2",children:a.jsx(ps,{className:"w-6 h-6 text-destructive"})}),a.jsx(Ct,{className:"text-2xl font-bold text-center",children:"Link Invlido ou Expirado"}),a.jsx(gr,{className:"text-center",children:"Este link de acesso no  mais vlido. Solicite um novo convite ao administrador."})]}),a.jsx(ht,{children:a.jsx(Oe,{className:"w-full",onClick:()=>f("/auth"),children:"Ir para Login"})})]})})}function gY(){const{user:t}=Si(),[e,r]=C.useState(0),[n,i]=C.useState(!0),[s,o]=C.useState({missoes:0,notasFiscais:0,materiaisCadastrados:0,entregasValidadas:0,indicacoes:0,cuponsResgatados:0}),l=C.useCallback(async()=>{if(!t){i(!1);return}try{i(!0);const{data:c}=await Ee.from("configuracoes_sistema").select("chave, valor").like("chave","pontos_%"),u={};c==null||c.forEach(z=>{u[z.chave]=parseInt(z.valor)});let d=0;const h={missoes:0,notasFiscais:0,materiaisCadastrados:0,entregasValidadas:0,indicacoes:0,cuponsResgatados:0},{data:f}=await Ee.from("missoes_usuarios").select("id").eq("id_usuario",t.id),m=u.pontos_missao_completa??0;h.missoes=((f==null?void 0:f.length)||0)*m,d+=h.missoes;const{data:x}=await Ee.from("notas_fiscais").select("id").eq("id_usuario",t.id).eq("status_validacao","validada"),g=u.pontos_nota_fiscal_validada??0;h.notasFiscais=((x==null?void 0:x.length)||0)*g,d+=h.notasFiscais;const{data:y}=await Ee.from("materiais_reciclaveis_usuario").select("id, origem_cadastro").eq("id_usuario",t.id),w=u.pontos_material_cadastro_nota??0,S=u.pontos_material_cadastro_manual??0;y==null||y.forEach(z=>{const F=z.origem_cadastro==="nota_fiscal"?w:S;h.materiaisCadastrados+=F}),d+=h.materiaisCadastrados;const{data:E}=await Ee.from("entregas_reciclaveis").select("peso_validado, tipo_material").eq("id_usuario",t.id).eq("status","validada"),j=u.pontos_entrega_6kg??10;let T=0;E==null||E.forEach(z=>{z.peso_validado&&z.peso_validado>0&&(T+=z.peso_validado)}),h.entregasValidadas=Math.floor(T/6)*j,d+=h.entregasValidadas;const{data:O}=await Ee.from("indicacoes").select("pontos_cadastro_concedidos, pontos_primeira_missao_concedidos").eq("id_indicador",t.id),I=u.pontos_indicacao_cadastro??0,M=u.pontos_indicacao_primeira_missao??0;O==null||O.forEach(z=>{z.pontos_cadastro_concedidos&&(h.indicacoes+=I),z.pontos_primeira_missao_concedidos&&(h.indicacoes+=M)}),d+=h.indicacoes;const{data:D}=await Ee.from("cupons_resgates").select("pontos_utilizados").eq("id_usuario",t.id);D==null||D.forEach(z=>{h.cuponsResgatados+=z.pontos_utilizados}),d-=h.cuponsResgatados,r(d),o(h)}catch(c){console.error("Erro ao calcular pontos:",c)}finally{i(!1)}},[t]);return C.useEffect(()=>{l()},[l]),{pontos:e,loading:n,breakdown:s,refetch:l}}const As=(t,e=2)=>t.toLocaleString("pt-BR",{minimumFractionDigits:e,maximumFractionDigits:e}),xY=t=>t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),m$=(t,e=1)=>`${As(t,e)}%`,po=(t,e=2)=>`${As(t,e)} kg`;var vY="Progress",yY=100,[S$e,i$t]=qo(vY),[E$e,j$e]=S$e(vY),Sve=C.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:s=A$e,...o}=t;(i||i===0)&&!Mne(i)&&console.error(C$e(`${i}`,"Progress"));const l=Mne(i)?i:yY;n!==null&&!Lne(n,l)&&console.error(T$e(`${n}`,"Progress"));const c=Lne(n,l)?n:null,u=JM(c)?s(c,l):void 0;return a.jsx(E$e,{scope:r,value:c,max:l,children:a.jsx(Dr.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":JM(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Ave(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});Sve.displayName=vY;var Eve="ProgressIndicator",jve=C.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,i=j$e(Eve,r);return a.jsx(Dr.div,{"data-state":Ave(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});jve.displayName=Eve;function A$e(t,e){return`${Math.round(t/e*100)}%`}function Ave(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function JM(t){return typeof t=="number"}function Mne(t){return JM(t)&&!isNaN(t)&&t>0}function Lne(t,e){return JM(t)&&!isNaN(t)&&t<=e&&t>=0}function C$e(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${yY}\`.`}function T$e(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${yY} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Cve=Sve,P$e=jve;const fc=C.forwardRef(({className:t,value:e,variant:r="default",...n},i)=>a.jsx(Cve,{ref:i,className:Ut("relative h-3 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(P$e,{className:Ut("h-full w-full flex-1 rounded-full transition-all duration-500 ease-out",r==="default"&&"bg-primary",r==="accent"&&"bg-accent"),style:{transform:`translateX(-${100-(e||0)}%)`}})}));fc.displayName=Cve.displayName;const k$e=DC("inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-xs font-display font-medium transition-colors",{variants:{variant:{default:"bg-primary/15 text-primary",accent:"bg-accent/20 text-accent-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",secondary:"bg-secondary text-secondary-foreground",muted:"bg-muted text-muted-foreground",destructive:"bg-destructive/15 text-destructive",outline:"border border-primary text-primary bg-transparent","outline-accent":"border border-accent text-accent bg-transparent"}},defaultVariants:{variant:"default"}});function Bt({className:t,variant:e,...r}){return a.jsx("div",{className:Ut(k$e({variant:e}),t),...r})}const bY=C.createContext({});function nI(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const wY=typeof window<"u",_Y=wY?C.useLayoutEffect:C.useEffect,s7=C.createContext(null);function NY(t,e){t.indexOf(e)===-1&&t.push(e)}function a7(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Ev=(t,e,r)=>r>e?e:r<t?t:r;let e8=()=>{};const jv={},Tve=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Pve(t){return typeof t=="object"&&t!==null}const kve=t=>/^0[^.\s]+$/u.test(t);function SY(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cm=t=>t,O$e=(t,e)=>r=>e(t(r)),iI=(...t)=>t.reduce(O$e),kA=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class EY{constructor(){this.subscriptions=[]}add(e){return NY(this.subscriptions,e),()=>a7(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kp=t=>t*1e3,Nm=t=>t/1e3;function Ove(t,e){return e?t*(1e3/e):0}const I$e=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t},Ive=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,R$e=1e-7,D$e=12;function M$e(t,e,r,n,i){let s,o,l=0;do o=e+(r-e)/2,s=Ive(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>R$e&&++l<D$e);return o}function sI(t,e,r,n){if(t===e&&r===n)return Cm;const i=s=>M$e(s,0,1,t,r);return s=>s===0||s===1?s:Ive(i(s),e,n)}const Rve=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Dve=t=>e=>1-t(1-e),Mve=sI(.33,1.53,.69,.99),jY=Dve(Mve),Lve=Rve(jY),Fve=t=>(t*=2)<1?.5*jY(t):.5*(2-Math.pow(2,-10*(t-1))),AY=t=>1-Math.sin(Math.acos(t)),Bve=Dve(AY),$ve=Rve(AY),L$e=sI(.42,0,1,1),F$e=sI(0,0,.58,1),Uve=sI(.42,0,.58,1),zve=t=>Array.isArray(t)&&typeof t[0]!="number";function Vve(t,e){return zve(t)?t[I$e(0,t.length,e)]:t}const qve=t=>Array.isArray(t)&&typeof t[0]=="number",Fne={linear:Cm,easeIn:L$e,easeInOut:Uve,easeOut:F$e,circIn:AY,circInOut:$ve,circOut:Bve,backIn:jY,backInOut:Lve,backOut:Mve,anticipate:Fve},B$e=t=>typeof t=="string",Bne=t=>{if(qve(t)){e8(t.length===4);const[e,r,n,i]=t;return sI(e,r,n,i)}else if(B$e(t))return e8(Fne[t]!==void 0),Fne[t];return t},VR=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],$ne={value:null,addProjectionMetrics:null};function $$e(t,e){let r=new Set,n=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const g=m&&i?r:n;return f&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(u),e&&$ne.value&&$ne.value.frameloop[e].push(c),c=0,r.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const U$e=40;function Hve(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=VR.reduce((E,j)=>(E[j]=$$e(s,e?j:void 0),E),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:x}=o,g=()=>{const E=jv.useManualTiming?i.timestamp:performance.now();r=!1,jv.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(E-i.timestamp,U$e),1)),i.timestamp=E,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),m.process(i),x.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(g))},y=()=>{r=!0,n=!0,i.isProcessing||t(g)};return{schedule:VR.reduce((E,j)=>{const T=o[j];return E[j]=(O,I=!1,M=!1)=>(r||y(),T.schedule(O,I,M)),E},{}),cancel:E=>{for(let j=0;j<VR.length;j++)o[VR[j]].cancel(E)},state:i,steps:o}}const{schedule:Ma,cancel:Av,state:Vc,steps:p$}=Hve(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cm,!0);let m6;function z$e(){m6=void 0}const oh={now:()=>(m6===void 0&&oh.set(Vc.isProcessing||jv.useManualTiming?Vc.timestamp:performance.now()),m6),set:t=>{m6=t,queueMicrotask(z$e)}},Wve=t=>e=>typeof e=="string"&&e.startsWith(t),CY=Wve("--"),V$e=Wve("var(--"),TY=t=>V$e(t)?q$e.test(t.split("/*")[0].trim()):!1,q$e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,XC={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},F3={...XC,transform:t=>Ev(0,1,t)},qR={...XC,default:1},b4=t=>Math.round(t*1e5)/1e5,PY=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function H$e(t){return t==null}const W$e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kY=(t,e)=>r=>!!(typeof r=="string"&&W$e.test(r)&&r.startsWith(t)||e&&!H$e(r)&&Object.prototype.hasOwnProperty.call(r,e)),Gve=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,s,o,l]=n.match(PY);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},G$e=t=>Ev(0,255,t),g$={...XC,transform:t=>Math.round(G$e(t))},Fw={test:kY("rgb","red"),parse:Gve("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+g$.transform(t)+", "+g$.transform(e)+", "+g$.transform(r)+", "+b4(F3.transform(n))+")"};function K$e(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const hq={test:kY("#"),parse:K$e,transform:Fw.transform},aI=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),f1=aI("deg"),Sg=aI("%"),Zn=aI("px"),X$e=aI("vh"),Y$e=aI("vw"),Une={...Sg,parse:t=>Sg.parse(t)/100,transform:t=>Sg.transform(t*100)},zS={test:kY("hsl","hue"),parse:Gve("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Sg.transform(b4(e))+", "+Sg.transform(b4(r))+", "+b4(F3.transform(n))+")"},pl={test:t=>Fw.test(t)||hq.test(t)||zS.test(t),parse:t=>Fw.test(t)?Fw.parse(t):zS.test(t)?zS.parse(t):hq.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fw.transform(t):zS.transform(t),getAnimatableNone:t=>{const e=pl.parse(t);return e.alpha=0,pl.transform(e)}},Z$e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q$e(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(PY))==null?void 0:e.length)||0)+(((r=t.match(Z$e))==null?void 0:r.length)||0)>0}const Kve="number",Xve="color",J$e="var",eUe="var(",zne="${}",tUe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function B3(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(tUe,c=>(pl.test(c)?(n.color.push(s),i.push(Xve),r.push(pl.parse(c))):c.startsWith(eUe)?(n.var.push(s),i.push(J$e),r.push(c)):(n.number.push(s),i.push(Kve),r.push(parseFloat(c))),++s,zne)).split(zne);return{values:r,split:l,indexes:n,types:i}}function Yve(t){return B3(t).values}function Zve(t){const{split:e,types:r}=B3(t),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const l=r[o];l===Kve?s+=b4(i[o]):l===Xve?s+=pl.transform(i[o]):s+=i[o]}return s}}const rUe=t=>typeof t=="number"?0:pl.test(t)?pl.getAnimatableNone(t):t;function nUe(t){const e=Yve(t);return Zve(t)(e.map(rUe))}const Nb={test:Q$e,parse:Yve,createTransformer:Zve,getAnimatableNone:nUe};function x$(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function iUe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,o=0;if(!e)i=s=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=x$(c,l,t+1/3),s=x$(c,l,t),o=x$(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function t8(t,e){return r=>r>0?e:t}const Ya=(t,e,r)=>t+(e-t)*r,v$=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},sUe=[hq,Fw,zS],aUe=t=>sUe.find(e=>e.test(t));function Vne(t){const e=aUe(t);if(!e)return!1;let r=e.parse(t);return e===zS&&(r=iUe(r)),r}const qne=(t,e)=>{const r=Vne(t),n=Vne(e);if(!r||!n)return t8(t,e);const i={...r};return s=>(i.red=v$(r.red,n.red,s),i.green=v$(r.green,n.green,s),i.blue=v$(r.blue,n.blue,s),i.alpha=Ya(r.alpha,n.alpha,s),Fw.transform(i))},fq=new Set(["none","hidden"]);function oUe(t,e){return fq.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function lUe(t,e){return r=>Ya(t,e,r)}function OY(t){return typeof t=="number"?lUe:typeof t=="string"?TY(t)?t8:pl.test(t)?qne:dUe:Array.isArray(t)?Qve:typeof t=="object"?pl.test(t)?qne:cUe:t8}function Qve(t,e){const r=[...t],n=r.length,i=t.map((s,o)=>OY(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=i[o](s);return r}}function cUe(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=OY(t[i])(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function uUe(t,e){const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][n[s]],l=t.values[o]??0;r[i]=l,n[s]++}return r}const dUe=(t,e)=>{const r=Nb.createTransformer(e),n=B3(t),i=B3(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?fq.has(t)&&!i.values.length||fq.has(e)&&!n.values.length?oUe(t,e):iI(Qve(uUe(n,i),i.values),r):t8(t,e)};function Jve(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Ya(t,e,r):OY(t)(t,e)}const hUe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>Ma.update(e,r),stop:()=>Av(e),now:()=>Vc.isProcessing?Vc.timestamp:oh.now()}},e1e=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let s=0;s<i;s++)n+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},r8=2e4;function IY(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<r8;)e+=r,n=t.next(e);return e>=r8?1/0:e}function t1e(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(IY(n),r8);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:Nm(i)}}const fUe=5;function r1e(t,e,r){const n=Math.max(e-fUe,0);return Ove(r-t(n),e-n)}const Mo={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},y$=.001;function mUe({duration:t=Mo.duration,bounce:e=Mo.bounce,velocity:r=Mo.velocity,mass:n=Mo.mass}){let i,s,o=1-e;o=Ev(Mo.minDamping,Mo.maxDamping,o),t=Ev(Mo.minDuration,Mo.maxDuration,Nm(t)),o<1?(i=u=>{const d=u*o,h=d*t,f=d-r,m=mq(u,o),x=Math.exp(-h);return y$-f/m*x},s=u=>{const h=u*o*t,f=h*r+r,m=Math.pow(o,2)*Math.pow(u,2)*t,x=Math.exp(-h),g=mq(Math.pow(u,2),o);return(-i(u)+y$>0?-1:1)*((f-m)*x)/g}):(i=u=>{const d=Math.exp(-u*t),h=(u-r)*t+1;return-y$+d*h},s=u=>{const d=Math.exp(-u*t),h=(r-u)*(t*t);return d*h});const l=5/t,c=gUe(i,s,l);if(t=Kp(t),isNaN(c))return{stiffness:Mo.stiffness,damping:Mo.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const pUe=12;function gUe(t,e,r){let n=r;for(let i=1;i<pUe;i++)n=n-t(n)/e(n);return n}function mq(t,e){return t*Math.sqrt(1-e*e)}const xUe=["duration","bounce"],vUe=["stiffness","damping","mass"];function Hne(t,e){return e.some(r=>t[r]!==void 0)}function yUe(t){let e={velocity:Mo.velocity,stiffness:Mo.stiffness,damping:Mo.damping,mass:Mo.mass,isResolvedFromDuration:!1,...t};if(!Hne(t,vUe)&&Hne(t,xUe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,s=2*Ev(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Mo.mass,stiffness:i,damping:s}}else{const r=mUe(t);e={...e,...r,mass:Mo.mass},e.isResolvedFromDuration=!0}return e}function $3(t=Mo.visualDuration,e=Mo.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=yUe({...r,velocity:-Nm(r.velocity||0)}),x=f||0,g=u/(2*Math.sqrt(c*d)),y=o-s,w=Nm(Math.sqrt(c/d)),S=Math.abs(y)<5;n||(n=S?Mo.restSpeed.granular:Mo.restSpeed.default),i||(i=S?Mo.restDelta.granular:Mo.restDelta.default);let E;if(g<1){const T=mq(w,g);E=O=>{const I=Math.exp(-g*w*O);return o-I*((x+g*w*y)/T*Math.sin(T*O)+y*Math.cos(T*O))}}else if(g===1)E=T=>o-Math.exp(-w*T)*(y+(x+w*y)*T);else{const T=w*Math.sqrt(g*g-1);E=O=>{const I=Math.exp(-g*w*O),M=Math.min(T*O,300);return o-I*((x+g*w*y)*Math.sinh(M)+T*y*Math.cosh(M))/T}}const j={calculatedDuration:m&&h||null,next:T=>{const O=E(T);if(m)l.done=T>=h;else{let I=T===0?x:0;g<1&&(I=T===0?Kp(x):r1e(E,T,O));const M=Math.abs(I)<=n,D=Math.abs(o-O)<=i;l.done=M&&D}return l.value=l.done?o:O,l},toString:()=>{const T=Math.min(IY(j),r8),O=e1e(I=>j.next(T*I).value,T,30);return T+"ms "+O},toTransition:()=>{}};return j}$3.applyToOptions=t=>{const e=t1e(t,100,$3);return t.ease=e.ease,t.duration=Kp(e.duration),t.type="keyframes",t};function pq({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=M=>l!==void 0&&M<l||c!==void 0&&M>c,x=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let g=r*e;const y=h+g,w=o===void 0?y:o(y);w!==y&&(g=w-h);const S=M=>-g*Math.exp(-M/n),E=M=>w+S(M),j=M=>{const D=S(M),z=E(M);f.done=Math.abs(D)<=u,f.value=f.done?w:z};let T,O;const I=M=>{m(f.value)&&(T=M,O=$3({keyframes:[f.value,x(f.value)],velocity:r1e(E,M,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return I(0),{calculatedDuration:null,next:M=>{let D=!1;return!O&&T===void 0&&(D=!0,j(M),I(M)),T!==void 0&&M>=T?O.next(M-T):(!D&&j(M),f)}}}function bUe(t,e,r){const n=[],i=r||jv.mix||Jve,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Cm:e;l=iI(c,l)}n.push(l)}return n}function n1e(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(e8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=bUe(e,n,i),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=kA(t[h],t[h+1],d);return l[h](f)};return r?d=>u(Ev(t[0],t[s-1],d)):u}function i1e(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=kA(0,e,n);t.push(Ya(r,1,i))}}function s1e(t){const e=[0];return i1e(e,t.length-1),e}function wUe(t,e){return t.map(r=>r*e)}function _Ue(t,e){return t.map(()=>e||Uve).splice(0,t.length-1)}function w4({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=zve(n)?n.map(Bne):Bne(n),s={done:!1,value:e[0]},o=wUe(r&&r.length===e.length?r:s1e(e),t),l=n1e(o,e,{ease:Array.isArray(i)?i:_Ue(e,i)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const NUe=t=>t!==null;function RY(t,{repeat:e,repeatType:r="loop"},n,i=1){const s=t.filter(NUe),l=i<0||e&&r!=="loop"&&e%2===1?0:s.length-1;return!l||n===void 0?s[l]:n}const SUe={decay:pq,inertia:pq,tween:w4,keyframes:w4,spring:$3};function a1e(t){typeof t.type=="string"&&(t.type=SUe[t.type])}class DY{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const EUe=t=>t/100;class MY extends DY{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:r}=this.options;r&&r.updatedAt!==oh.now()&&this.tick(oh.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;a1e(e);const{type:r=w4,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const c=r||w4;c!==w4&&typeof l[0]!="number"&&(this.mixKeyframes=iI(EUe,Jve(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=IY(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:x,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,j=n;if(h){const M=Math.min(this.currentTime,i)/l;let D=Math.floor(M),z=M%1;!z&&M>=1&&(z=1),z===1&&D--,D=Math.min(D,h+1),!!(D%2)&&(f==="reverse"?(z=1-z,m&&(z-=m/l)):f==="mirror"&&(j=o)),E=Ev(0,1,z)*l}const T=S?{done:!1,value:d[0]}:j.next(E);s&&(T.value=s(T.value));let{done:O}=T;!S&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&x!==pq&&(T.value=RY(d,this.options,y,this.speed)),g&&g(T.value),I&&this.finish(),T}then(e,r){return this.finished.then(e,r)}get duration(){return Nm(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Nm(e)}get time(){return Nm(this.currentTime)}set time(e){var r;e=Kp(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(oh.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Nm(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=hUe,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(oh.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function jUe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Bw=t=>t*180/Math.PI,gq=t=>{const e=Bw(Math.atan2(t[1],t[0]));return xq(e)},AUe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:gq,rotateZ:gq,skewX:t=>Bw(Math.atan(t[1])),skewY:t=>Bw(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xq=t=>(t=t%360,t<0&&(t+=360),t),Wne=gq,Gne=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Kne=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),CUe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gne,scaleY:Kne,scale:t=>(Gne(t)+Kne(t))/2,rotateX:t=>xq(Bw(Math.atan2(t[6],t[5]))),rotateY:t=>xq(Bw(Math.atan2(-t[2],t[0]))),rotateZ:Wne,rotate:Wne,skewX:t=>Bw(Math.atan(t[4])),skewY:t=>Bw(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vq(t){return t.includes("scale")?1:0}function yq(t,e){if(!t||t==="none")return vq(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=CUe,i=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=AUe,i=l}if(!i)return vq(e);const s=n[e],o=i[1].split(",").map(PUe);return typeof s=="function"?s(o):o[s]}const TUe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return yq(r,e)};function PUe(t){return parseFloat(t.trim())}const YC=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ZC=new Set(YC),Xne=t=>t===XC||t===Zn,kUe=new Set(["x","y","z"]),OUe=YC.filter(t=>!kUe.has(t));function IUe(t){const e=[];return OUe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const y_={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>yq(e,"x"),y:(t,{transform:e})=>yq(e,"y")};y_.translateX=y_.x;y_.translateY=y_.y;const b_=new Set;let bq=!1,wq=!1,_q=!1;function o1e(){if(wq){const t=Array.from(b_).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=IUe(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,o])=>{var l;(l=n.getValue(s))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}wq=!1,bq=!1,b_.forEach(t=>t.complete(_q)),b_.clear()}function l1e(){b_.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wq=!0)})}function RUe(){_q=!0,l1e(),o1e(),_q=!1}class LY{constructor(e,r,n,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(b_.add(this),bq||(bq=!0,Ma.read(l1e),Ma.resolveKeyframes(o1e))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}jUe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),b_.delete(this)}cancel(){this.state==="scheduled"&&(b_.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DUe=t=>t.startsWith("--");function MUe(t,e,r){DUe(e)?t.style.setProperty(e,r):t.style[e]=r}const LUe=SY(()=>window.ScrollTimeline!==void 0),FUe={};function BUe(t,e){const r=SY(t);return()=>FUe[e]??r()}const c1e=BUe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),RT=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Yne={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:RT([0,.65,.55,1]),circOut:RT([.55,0,1,.45]),backIn:RT([.31,.01,.66,-.59]),backOut:RT([.33,1.53,.69,.99])};function u1e(t,e){if(t)return typeof t=="function"?c1e()?e1e(t,e):"ease-out":qve(t)?RT(t):Array.isArray(t)?t.map(r=>u1e(r,e)||Yne.easeOut):Yne[t]}function $Ue(t,e,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:r};c&&(d.offset=c);const h=u1e(l,i);Array.isArray(h)&&(d.easing=h);const f={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function FY(t){return typeof t=="function"&&"applyToOptions"in t}function UUe({type:t,...e}){return FY(t)&&c1e()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zUe extends DY{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,e8(typeof e.type!="string");const u=UUe(e);this.animation=$Ue(r,n,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=RY(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):MUe(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return Nm(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Nm(e)}get time(){return Nm(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Kp(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&LUe()?(this.animation.timeline=e,Cm):r(this)}}const d1e={anticipate:Fve,backInOut:Lve,circInOut:$ve};function VUe(t){return t in d1e}function qUe(t){typeof t.ease=="string"&&VUe(t.ease)&&(t.ease=d1e[t.ease])}const Zne=10;class HUe extends zUe{constructor(e){qUe(e),a1e(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:i,element:s,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new MY({...o,autoplay:!1}),c=Kp(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Zne).value,l.sample(c).value,Zne),l.stop()}}const Qne=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Nb.test(t)||t==="0")&&!t.startsWith("url("));function WUe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function GUe(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Qne(i,e),l=Qne(s,e);return!o||!l?!1:WUe(t)||(r==="spring"||FY(r))&&n}function Nq(t){t.duration=0,t.type="keyframes"}const KUe=new Set(["opacity","clipPath","filter","transform"]),XUe=SY(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function YUe(t){var d;const{motionValue:e,name:r,repeatDelay:n,repeatType:i,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return XUe()&&r&&KUe.has(r)&&(r!=="transform"||!u)&&!c&&!n&&i!=="mirror"&&s!==0&&o!=="inertia"}const ZUe=40;class QUe extends DY{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var x;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=oh.now();const f={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||LY;this.keyframeResolver=new m(l,(g,y,w)=>this.onKeyframesResolved(g,y,f,!w),c,u,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,r,n,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=oh.now(),GUe(e,s,o,l)||((jv.instantAnimations||!c)&&(d==null||d(RY(e,n,r))),e[0]=e[e.length-1],Nq(n),n.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ZUe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},m=!u&&YUe(f)?new HUe({...f,element:f.motionValue.owner.current}):new MY(f);m.finished.then(()=>this.notifyFinished()).catch(Cm),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),RUe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}class JUe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e){const r=this.animations.map(n=>n.attachTimeline(e));return()=>{r.forEach((n,i)=>{n&&n(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return Jne(this.animations,"duration")}get iterationDuration(){return Jne(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(r=>r[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Jne(t,e){let r=0;for(let n=0;n<t.length;n++){const i=t[n][e];i!==null&&i>r&&(r=i)}return r}class eze extends JUe{then(e,r){return this.finished.finally(e).then(()=>{})}}const tze=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rze(t){const e=tze.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function h1e(t,e,r=1){const[n,i]=rze(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return Tve(o)?parseFloat(o):o}return TY(i)?h1e(i,e,r+1):i}function BY(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const f1e=new Set(["width","height","top","left","right","bottom",...YC]),nze={test:t=>t==="auto",parse:t=>t},m1e=t=>e=>e.test(t),p1e=[XC,Zn,Sg,f1,Y$e,X$e,nze],eie=t=>p1e.find(m1e(t));function ize(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||kve(t):!0}const sze=new Set(["brightness","contrast","saturate","opacity"]);function aze(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(PY)||[];if(!n)return t;const i=r.replace(n,"");let s=sze.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const oze=/\b([a-z-]*)\(.*?\)/gu,Sq={...Nb,getAnimatableNone:t=>{const e=t.match(oze);return e?e.map(aze).join(" "):t}},tie={...XC,transform:Math.round},lze={rotate:f1,rotateX:f1,rotateY:f1,rotateZ:f1,scale:qR,scaleX:qR,scaleY:qR,scaleZ:qR,skew:f1,skewX:f1,skewY:f1,distance:Zn,translateX:Zn,translateY:Zn,translateZ:Zn,x:Zn,y:Zn,z:Zn,perspective:Zn,transformPerspective:Zn,opacity:F3,originX:Une,originY:Une,originZ:Zn},$Y={borderWidth:Zn,borderTopWidth:Zn,borderRightWidth:Zn,borderBottomWidth:Zn,borderLeftWidth:Zn,borderRadius:Zn,radius:Zn,borderTopLeftRadius:Zn,borderTopRightRadius:Zn,borderBottomRightRadius:Zn,borderBottomLeftRadius:Zn,width:Zn,maxWidth:Zn,height:Zn,maxHeight:Zn,top:Zn,right:Zn,bottom:Zn,left:Zn,padding:Zn,paddingTop:Zn,paddingRight:Zn,paddingBottom:Zn,paddingLeft:Zn,margin:Zn,marginTop:Zn,marginRight:Zn,marginBottom:Zn,marginLeft:Zn,backgroundPositionX:Zn,backgroundPositionY:Zn,...lze,zIndex:tie,fillOpacity:F3,strokeOpacity:F3,numOctaves:tie},cze={...$Y,color:pl,backgroundColor:pl,outlineColor:pl,fill:pl,stroke:pl,borderColor:pl,borderTopColor:pl,borderRightColor:pl,borderBottomColor:pl,borderLeftColor:pl,filter:Sq,WebkitFilter:Sq},g1e=t=>cze[t];function x1e(t,e){let r=g1e(t);return r!==Sq&&(r=Nb),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const uze=new Set(["auto","none","0"]);function dze(t,e,r){let n=0,i;for(;n<t.length&&!i;){const s=t[n];typeof s=="string"&&!uze.has(s)&&B3(s).values.length&&(i=t[n]),n++}if(i&&r)for(const s of e)t[s]=x1e(r,i)}class hze extends LY{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),TY(u))){const d=h1e(u,r.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!f1e.has(n)||e.length!==2)return;const[i,s]=e,o=eie(i),l=eie(s);if(o!==l)if(Xne(o)&&Xne(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else y_[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||ize(e[i]))&&n.push(i);n.length&&dze(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=y_[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=y_[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function UY(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=(r==null?void 0:r[t])??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const v1e=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function y1e(t){return Pve(t)&&"offsetHeight"in t}const rie=30,fze=t=>!isNaN(parseFloat(t)),_4={current:void 0};class mze{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=oh.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=oh.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fze(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new EY);const n=this.events[e].add(r);return e==="change"?()=>{n(),Ma.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return _4.current&&_4.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=oh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rie)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,rie);return Ove(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function z_(t,e){return new mze(t,e)}const{schedule:zY,cancel:s$t}=Hve(queueMicrotask,!1),cp={x:!1,y:!1};function b1e(){return cp.x||cp.y}function pze(t){return t==="x"||t==="y"?cp[t]?null:(cp[t]=!0,()=>{cp[t]=!1}):cp.x||cp.y?null:(cp.x=cp.y=!0,()=>{cp.x=cp.y=!1})}function w1e(t,e){const r=UY(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[r,i,()=>n.abort()]}function nie(t){return!(t.pointerType==="touch"||b1e())}function gze(t,e,r={}){const[n,i,s]=w1e(t,r),o=l=>{if(!nie(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{nie(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return n.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const _1e=(t,e)=>e?t===e?!0:_1e(t,e.parentElement):!1,VY=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xze=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vze(t){return xze.has(t.tagName)||t.tabIndex!==-1}const p6=new WeakSet;function iie(t){return e=>{e.key==="Enter"&&t(e)}}function b$(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yze=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=iie(()=>{if(p6.has(r))return;b$(r,"down");const i=iie(()=>{b$(r,"up")}),s=()=>b$(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",s,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function sie(t){return VY(t)&&!b1e()}function bze(t,e,r={}){const[n,i,s]=w1e(t,r),o=l=>{const c=l.currentTarget;if(!sie(l))return;p6.add(c);const u=e(c,l),d=(m,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),p6.has(c)&&p6.delete(c),sie(m)&&typeof u=="function"&&u(m,{success:x})},h=m=>{d(m,c===window||c===document||r.useGlobalTarget||_1e(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),y1e(l)&&(l.addEventListener("focus",u=>yze(u,i)),!vze(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function qY(t){return Pve(t)&&"ownerSVGElement"in t}function N1e(t){return qY(t)&&t.tagName==="svg"}function wze(...t){const e=!Array.isArray(t[0]),r=e?0:-1,n=t[0+r],i=t[1+r],s=t[2+r],o=t[3+r],l=n1e(i,s,o);return e?l(n):l}const mc=t=>!!(t&&t.getVelocity),_ze=[...p1e,pl,Nb],Nze=t=>_ze.find(m1e(t)),o7=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function aie(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Sze(...t){return e=>{let r=!1;const n=t.map(i=>{const s=aie(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():aie(t[i],null)}}}}function Eze(...t){return C.useCallback(Sze(...t),t)}class jze extends C.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,i=y1e(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Aze({children:t,isPresent:e,anchorX:r,root:n}){const i=C.useId(),s=C.useRef(null),o=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=C.useContext(o7),c=Eze(s,t==null?void 0:t.ref);return C.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:m}=o.current;if(e||!s.current||!u||!d)return;const x=r==="left"?`left: ${f}`:`right: ${m}`;s.current.dataset.motionPopId=i;const g=document.createElement("style");l&&(g.nonce=l);const y=n??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[e]),a.jsx(jze,{isPresent:e,childRef:s,sizeRef:o,children:C.cloneElement(t,{ref:c})})}const Cze=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:c})=>{const u=nI(Tze),d=C.useId();let h=!0,f=C.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:r,custom:i,onExitComplete:m=>{u.set(m,!0);for(const x of u.values())if(!x)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,n]);return s&&h&&(f={...f}),C.useMemo(()=>{u.forEach((m,x)=>u.set(x,!1))},[r]),C.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(t=a.jsx(Aze,{isPresent:r,anchorX:l,root:c,children:t})),a.jsx(s7.Provider,{value:f,children:t})};function Tze(){return new Map}function S1e(t=!0){const e=C.useContext(s7);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,s=C.useId();C.useEffect(()=>{if(t)return i(s)},[t]);const o=C.useCallback(()=>t&&n&&n(s),[s,n,t]);return!r&&n?[!1,o]:[!0]}const HR=t=>t.key||"";function oie(t){const e=[];return C.Children.forEach(t,r=>{C.isValidElement(r)&&e.push(r)}),e}const Cf=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=S1e(o),h=C.useMemo(()=>oie(t),[t]),f=o&&!u?[]:h.map(HR),m=C.useRef(!0),x=C.useRef(h),g=nI(()=>new Map),[y,w]=C.useState(h),[S,E]=C.useState(h);_Y(()=>{m.current=!1,x.current=h;for(let O=0;O<S.length;O++){const I=HR(S[O]);f.includes(I)?g.delete(I):g.get(I)!==!0&&g.set(I,!1)}},[S,f.length,f.join("-")]);const j=[];if(h!==y){let O=[...h];for(let I=0;I<S.length;I++){const M=S[I],D=HR(M);f.includes(D)||(O.splice(I,0,M),j.push(M))}return s==="wait"&&j.length&&(O=j),E(oie(O)),w(h),null}const{forceRender:T}=C.useContext(bY);return a.jsx(a.Fragment,{children:S.map(O=>{const I=HR(O),M=o&&!u?!1:h===S||f.includes(I),D=()=>{if(g.has(I))g.set(I,!0);else return;let z=!0;g.forEach(F=>{F||(z=!1)}),z&&(T==null||T(),E(x.current),o&&(d==null||d()),n&&n())};return a.jsx(Cze,{isPresent:M,initial:!m.current||r?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:M?void 0:D,anchorX:l,children:O},I)})})},E1e=C.createContext({strict:!1}),lie={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},OA={};for(const t in lie)OA[t]={isEnabled:e=>lie[t].some(r=>!!e[r])};function Pze(t){for(const e in t)OA[e]={...OA[e],...t[e]}}const kze=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function n8(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kze.has(t)}let j1e=t=>!n8(t);function Oze(t){typeof t=="function"&&(j1e=e=>e.startsWith("on")?!n8(e):t(e))}try{Oze(require("@emotion/is-prop-valid").default)}catch{}function Ize(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(j1e(i)||r===!0&&n8(i)||!e&&!n8(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const l7=C.createContext({});function c7(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function U3(t){return typeof t=="string"||Array.isArray(t)}const HY=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],WY=["initial",...HY];function u7(t){return c7(t.animate)||WY.some(e=>U3(t[e]))}function A1e(t){return!!(u7(t)||t.variants)}function Rze(t,e){if(u7(t)){const{initial:r,animate:n}=t;return{initial:r===!1||U3(r)?r:void 0,animate:U3(n)?n:void 0}}return t.inherit!==!1?e:{}}function Dze(t){const{initial:e,animate:r}=Rze(t,C.useContext(l7));return C.useMemo(()=>({initial:e,animate:r}),[cie(e),cie(r)])}function cie(t){return Array.isArray(t)?t.join(" "):t}const z3={};function Mze(t){for(const e in t)z3[e]=t[e],CY(e)&&(z3[e].isCSSVariable=!0)}function C1e(t,{layout:e,layoutId:r}){return ZC.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!z3[t]||t==="opacity")}const Lze={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fze=YC.length;function Bze(t,e,r){let n="",i=!0;for(let s=0;s<Fze;s++){const o=YC[s],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=v1e(l,$Y[o]);if(!c){i=!1;const d=Lze[o]||o;n+=`${d}(${u}) `}r&&(e[o]=u)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function GY(t,e,r){const{style:n,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(ZC.has(c)){o=!0;continue}else if(CY(c)){i[c]=u;continue}else{const d=v1e(u,$Y[c]);c.startsWith("origin")?(l=!0,s[c]=d):n[c]=d}}if(e.transform||(o||r?n.transform=Bze(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;n.transformOrigin=`${c} ${u} ${d}`}}const KY=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function T1e(t,e,r){for(const n in e)!mc(e[n])&&!C1e(n,r)&&(t[n]=e[n])}function $ze({transformTemplate:t},e){return C.useMemo(()=>{const r=KY();return GY(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Uze(t,e){const r=t.style||{},n={};return T1e(n,r,t),Object.assign(n,$ze(t,e)),n}function zze(t,e){const r={},n=Uze(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const Vze={offset:"stroke-dashoffset",array:"stroke-dasharray"},qze={offset:"strokeDashoffset",array:"strokeDasharray"};function Hze(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?Vze:qze;t[s.offset]=Zn.transform(-n);const o=Zn.transform(e),l=Zn.transform(r);t[s.array]=`${o} ${l}`}function P1e(t,{attrX:e,attrY:r,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},c,u,d){if(GY(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),i!==void 0&&Hze(h,i,s,o,!1)}const k1e=()=>({...KY(),attrs:{}}),O1e=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Wze(t,e,r,n){const i=C.useMemo(()=>{const s=k1e();return P1e(s,e,O1e(n),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};T1e(s,t.style,t),i.style={...s,...i.style}}return i}const Gze=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function XY(t){return typeof t!="string"||t.includes("-")?!1:!!(Gze.indexOf(t)>-1||/[A-Z]/u.test(t))}function Kze(t,e,r,{latestValues:n},i,s=!1){const l=(XY(t)?Wze:zze)(e,n,i,t),c=Ize(e,typeof t=="string",s),u=t!==C.Fragment?{...c,...l,ref:r}:{},{children:d}=e,h=C.useMemo(()=>mc(d)?d.get():d,[d]);return C.createElement(t,{...u,children:h})}function uie(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function YY(t,e,r,n){if(typeof e=="function"){const[i,s]=uie(n);e=e(r!==void 0?r:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=uie(n);e=e(r!==void 0?r:t.custom,i,s)}return e}function g6(t){return mc(t)?t.get():t}function Xze({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,i){return{latestValues:Yze(r,n,i,t),renderState:e()}}function Yze(t,e,r,n){const i={},s=n(t,{});for(const f in s)i[f]=g6(s[f]);let{initial:o,animate:l}=t;const c=u7(t),u=A1e(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!c7(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const x=YY(t,f[m]);if(x){const{transitionEnd:g,transition:y,...w}=x;for(const S in w){let E=w[S];if(Array.isArray(E)){const j=d?E.length-1:0;E=E[j]}E!==null&&(i[S]=E)}for(const S in g)i[S]=g[S]}}}return i}const I1e=t=>(e,r)=>{const n=C.useContext(l7),i=C.useContext(s7),s=()=>Xze(t,e,n,i);return r?s():nI(s)};function ZY(t,e,r){var s;const{style:n}=t,i={};for(const o in n)(mc(n[o])||e.style&&mc(e.style[o])||C1e(o,t)||((s=r==null?void 0:r.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=n[o]);return i}const Zze=I1e({scrapeMotionValuesFromProps:ZY,createRenderState:KY});function R1e(t,e,r){const n=ZY(t,e,r);for(const i in t)if(mc(t[i])||mc(e[i])){const s=YC.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=t[i]}return n}const Qze=I1e({scrapeMotionValuesFromProps:R1e,createRenderState:k1e}),Jze=Symbol.for("motionComponentSymbol");function VS(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eVe(t,e,r){return C.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):VS(r)&&(r.current=n))},[e])}const QY=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tVe="framerAppearId",D1e="data-"+QY(tVe),M1e=C.createContext({});function rVe(t,e,r,n,i){var g,y;const{visualElement:s}=C.useContext(l7),o=C.useContext(E1e),l=C.useContext(s7),c=C.useContext(o7).reducedMotion,u=C.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:s,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=C.useContext(M1e);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&nVe(u.current,r,i,h);const f=C.useRef(!1);C.useInsertionEffect(()=>{d&&f.current&&d.update(r,l)});const m=r[D1e],x=C.useRef(!!m&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,m))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,m)));return _Y(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),C.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,m)}),x.current=!1),d.enteringChildren=void 0)}),d}function nVe(t,e,r,n){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:L1e(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&VS(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function L1e(t){if(t)return t.options.allowProjection!==!1?t.projection:L1e(t.parent)}function w$(t,{forwardMotionProps:e=!1}={},r,n){r&&Pze(r);const i=XY(t)?Qze:Zze;function s(l,c){let u;const d={...C.useContext(o7),...l,layoutId:iVe(l)},{isStatic:h}=d,f=Dze(l),m=i(l,h);if(!h&&wY){sVe();const x=aVe(d);u=x.MeasureLayout,f.visualElement=rVe(t,m,d,n,x.ProjectionNode)}return a.jsxs(l7.Provider,{value:f,children:[u&&f.visualElement?a.jsx(u,{visualElement:f.visualElement,...d}):null,Kze(t,l,eVe(m,f.visualElement,c),m,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=C.forwardRef(s);return o[Jze]=t,o}function iVe({layoutId:t}){const e=C.useContext(bY).id;return e&&t!==void 0?e+"-"+t:t}function sVe(t,e){C.useContext(E1e).strict}function aVe(t){const{drag:e,layout:r}=OA;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function oVe(t,e){if(typeof Proxy>"u")return w$;const r=new Map,n=(s,o)=>w$(s,o,t,e),i=(s,o)=>n(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?n:(r.has(o)||r.set(o,w$(o,void 0,t,e)),r.get(o))})}function F1e({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function lVe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cVe(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function _$(t){return t===void 0||t===1}function Eq({scale:t,scaleX:e,scaleY:r}){return!_$(t)||!_$(e)||!_$(r)}function xw(t){return Eq(t)||B1e(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function B1e(t){return die(t.x)||die(t.y)}function die(t){return t&&t!=="0%"}function i8(t,e,r){const n=t-r,i=e*n;return r+i}function hie(t,e,r,n,i){return i!==void 0&&(t=i8(t,i,n)),i8(t,r,n)+e}function jq(t,e=0,r=1,n,i){t.min=hie(t.min,e,r,n,i),t.max=hie(t.max,e,r,n,i)}function $1e(t,{x:e,y:r}){jq(t.x,e.translate,e.scale,e.originPoint),jq(t.y,r.translate,r.scale,r.originPoint)}const fie=.999999999999,mie=1.0000000000001;function uVe(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=r[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&HS(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,$1e(t,o)),n&&xw(s.latestValues)&&HS(t,s.latestValues))}e.x<mie&&e.x>fie&&(e.x=1),e.y<mie&&e.y>fie&&(e.y=1)}function qS(t,e){t.min=t.min+e,t.max=t.max+e}function pie(t,e,r,n,i=.5){const s=Ya(t.min,t.max,i);jq(t,e,r,s,n)}function HS(t,e){pie(t.x,e.x,e.scaleX,e.scale,e.originX),pie(t.y,e.y,e.scaleY,e.scale,e.originY)}function U1e(t,e){return F1e(cVe(t.getBoundingClientRect(),e))}function dVe(t,e,r){const n=U1e(t,r),{scroll:i}=e;return i&&(qS(n.x,i.offset.x),qS(n.y,i.offset.y)),n}const gie=()=>({translate:0,scale:1,origin:0,originPoint:0}),WS=()=>({x:gie(),y:gie()}),xie=()=>({min:0,max:0}),ko=()=>({x:xie(),y:xie()}),Aq={current:null},z1e={current:!1};function hVe(){if(z1e.current=!0,!!wY)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Aq.current=t.matches;t.addEventListener("change",e),e()}else Aq.current=!1}const V3=new WeakMap;function fVe(t,e,r){for(const n in e){const i=e[n],s=r[n];if(mc(i))t.addValue(n,i);else if(mc(s))t.addValue(n,z_(i,{owner:t}));else if(s!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,z_(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const vie=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class V1e{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=LY,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=oh.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ma.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=u7(r),this.isVariantNode=A1e(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&mc(m)&&m.set(c[f])}}mount(e){var r;this.current=e,V3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),z1e.current||hVe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Aq.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Av(this.notifyUpdate),Av(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ZC.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ma.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in OA){const r=OA[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ko()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<vie.length;n++){const i=vie[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=fVe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=z_(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Tve(n)||kve(n))?n=parseFloat(n):!Nze(n)&&Nb.test(r)&&(n=x1e(e,r)),this.setBaseTarget(e,mc(n)?n.get():n)),mc(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var s;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=YY(this.props,r,(s=this.presenceContext)==null?void 0:s.custom);o&&(n=o[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mc(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new EY),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){zY.render(this.render)}}class q1e extends V1e{constructor(){super(...arguments),this.KeyframeResolver=hze}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mc(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function H1e(t,{style:e,vars:r},n,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,n);for(o in r)s.setProperty(o,r[o])}function mVe(t){return window.getComputedStyle(t)}class W1e extends q1e{constructor(){super(...arguments),this.type="html",this.renderInstance=H1e}readValueFromInstance(e,r){var n;if(ZC.has(r))return(n=this.projection)!=null&&n.isProjecting?vq(r):TUe(e,r);{const i=mVe(e),s=(CY(r)?i.getPropertyValue(r):i[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return U1e(e,r)}build(e,r,n){GY(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return ZY(e,r,n)}}const G1e=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pVe(t,e,r,n){H1e(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(G1e.has(i)?i:QY(i),e.attrs[i])}class K1e extends q1e{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ko}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(ZC.has(r)){const n=g1e(r);return n&&n.default||0}return r=G1e.has(r)?r:QY(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return R1e(e,r,n)}build(e,r,n){P1e(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,i){pVe(e,r,n,i)}mount(e){this.isSVGTag=O1e(e.tagName),super.mount(e)}}const gVe=(t,e)=>XY(t)?new K1e(e):new W1e(e,{allowProjection:t!==C.Fragment});function xE(t,e,r){const n=t.getProps();return YY(n,e,r!==void 0?r:n.custom,t)}const Cq=t=>Array.isArray(t);function xVe(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,z_(r))}function vVe(t){return Cq(t)?t[t.length-1]||0:t}function yVe(t,e){const r=xE(t,e);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s){const l=vVe(s[o]);xVe(t,o,l)}}function bVe(t){return!!(mc(t)&&t.add)}function Tq(t,e){const r=t.getValue("willChange");if(bVe(r))return r.add(e);if(!r&&jv.WillChange){const n=new jv.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function X1e(t){return t.props[D1e]}const wVe=t=>t!==null;function _Ve(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(wVe),s=e&&r!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const NVe={type:"spring",stiffness:500,damping:25,restSpeed:10},SVe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),EVe={type:"keyframes",duration:.8},jVe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AVe=(t,{keyframes:e})=>e.length>2?EVe:ZC.has(t)?t.startsWith("scale")?SVe(e[1]):NVe:jVe;function CVe({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const JY=(t,e,r,n={},i,s)=>o=>{const l=BY(n,t)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Kp(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};CVe(l)||Object.assign(d,AVe(t,d)),d.duration&&(d.duration=Kp(d.duration)),d.repeatDelay&&(d.repeatDelay=Kp(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Nq(d),d.delay===0&&(h=!0)),(jv.instantAnimations||jv.skipAnimations)&&(h=!0,Nq(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!s&&e.get()!==void 0){const f=_Ve(d.keyframes,l);if(f!==void 0){Ma.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new MY(d):new QUe(d)};function TVe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function eZ(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(s=n);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),f=l[d];if(f===void 0||u&&TVe(u,d))continue;const m={delay:r,...BY(s||{},d)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===x&&!m.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const w=X1e(t);if(w){const S=window.MotionHandoffAnimation(w,d,Ma);S!==null&&(m.startTime=S,g=!0)}}Tq(t,d),h.start(JY(d,h,f,t.shouldReduceMotion&&f1e.has(d)?{type:!1}:m,t,g));const y=h.animation;y&&c.push(y)}return o&&Promise.all(c).then(()=>{Ma.update(()=>{o&&yVe(t,o)})}),c}function Y1e(t,e,r,n=0,i=1){const s=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*n;return typeof r=="function"?r(s,o):i===1?s*n:l-s*n}function Pq(t,e,r={}){var c;const n=xE(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const s=n?()=>Promise.all(eZ(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return PVe(t,e,u,d,h,f,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(r.delay)])}function PVe(t,e,r=0,n=0,i=0,s=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Pq(c,e,{...o,delay:r+(typeof n=="function"?0:n)+Y1e(t.variantChildren,c,n,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function kVe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>Pq(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=Pq(t,e,r);else{const i=typeof e=="function"?xE(t,e,r.custom):e;n=Promise.all(eZ(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Z1e(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const OVe=WY.length;function Q1e(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Q1e(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<OVe;r++){const n=WY[r],i=t.props[n];(U3(i)||i===!1)&&(e[n]=i)}return e}const IVe=[...HY].reverse(),RVe=HY.length;function DVe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>kVe(t,r,n)))}function MVe(t){let e=DVe(t),r=yie(),n=!0;const i=c=>(u,d)=>{var f;const h=xE(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:x,...g}=h;u={...u,...g,...x}}return u};function s(c){e=c(t)}function o(c){const{props:u}=t,d=Q1e(t.parent)||{},h=[],f=new Set;let m={},x=1/0;for(let y=0;y<RVe;y++){const w=IVe[y],S=r[w],E=u[w]!==void 0?u[w]:d[w],j=U3(E),T=w===c?S.isActive:null;T===!1&&(x=y);let O=E===d[w]&&E!==u[w]&&j;if(O&&n&&t.manuallyAnimateOnMount&&(O=!1),S.protectedKeys={...m},!S.isActive&&T===null||!E&&!S.prevProp||c7(E)||typeof E=="boolean")continue;const I=LVe(S.prevProp,E);let M=I||w===c&&S.isActive&&!O&&j||y>x&&j,D=!1;const z=Array.isArray(E)?E:[E];let F=z.reduce(i(w),{});T===!1&&(F={});const{prevResolvedValues:q={}}=S,Q={...q,...F},re=K=>{M=!0,f.has(K)&&(D=!0,f.delete(K)),S.needsAnimating[K]=!0;const X=t.getValue(K);X&&(X.liveStyle=!1)};for(const K in Q){const X=F[K],Y=q[K];if(m.hasOwnProperty(K))continue;let oe=!1;Cq(X)&&Cq(Y)?oe=!Z1e(X,Y):oe=X!==Y,oe?X!=null?re(K):f.add(K):X!==void 0&&f.has(K)?re(K):S.protectedKeys[K]=!0}S.prevProp=E,S.prevResolvedValues=F,S.isActive&&(m={...m,...F}),n&&t.blockInitialAnimation&&(M=!1);const Z=O&&I;M&&(!Z||D)&&h.push(...z.map(K=>{const X={type:w};if(typeof K=="string"&&n&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,oe=xE(Y,K);if(Y.enteringChildren&&oe){const{delayChildren:xe}=oe.transition||{};X.delay=Y1e(Y.enteringChildren,t,xe)}}return{animation:K,options:X}}))}if(f.size){const y={};if(typeof u.initial!="boolean"){const w=xE(t,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(y.transition=w.transition)}f.forEach(w=>{const S=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),y[w]=S??null}),h.push({animation:y})}let g=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>r,reset:()=>{r=yie()}}}function LVe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Z1e(e,t):!1}function ow(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yie(){return{animate:ow(!0),whileInView:ow(),whileHover:ow(),whileTap:ow(),whileDrag:ow(),whileFocus:ow(),exit:ow()}}class Wb{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FVe extends Wb{constructor(e){super(e),e.animationState||(e.animationState=MVe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();c7(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let BVe=0;class $Ve extends Wb{constructor(){super(...arguments),this.id=BVe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const UVe={animation:{Feature:FVe},exit:{Feature:$Ve}};function q3(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function oI(t){return{point:{x:t.pageX,y:t.pageY}}}const zVe=t=>e=>VY(e)&&t(e,oI(e));function N4(t,e,r,n){return q3(t,e,zVe(r),n)}const J1e=1e-4,VVe=1-J1e,qVe=1+J1e,eye=.01,HVe=0-eye,WVe=0+eye;function yd(t){return t.max-t.min}function GVe(t,e,r){return Math.abs(t-e)<=r}function bie(t,e,r,n=.5){t.origin=n,t.originPoint=Ya(e.min,e.max,t.origin),t.scale=yd(r)/yd(e),t.translate=Ya(r.min,r.max,t.origin)-t.originPoint,(t.scale>=VVe&&t.scale<=qVe||isNaN(t.scale))&&(t.scale=1),(t.translate>=HVe&&t.translate<=WVe||isNaN(t.translate))&&(t.translate=0)}function S4(t,e,r,n){bie(t.x,e.x,r.x,n?n.originX:void 0),bie(t.y,e.y,r.y,n?n.originY:void 0)}function wie(t,e,r){t.min=r.min+e.min,t.max=t.min+yd(e)}function KVe(t,e,r){wie(t.x,e.x,r.x),wie(t.y,e.y,r.y)}function _ie(t,e,r){t.min=e.min-r.min,t.max=t.min+yd(e)}function E4(t,e,r){_ie(t.x,e.x,r.x),_ie(t.y,e.y,r.y)}function Zf(t){return[t("x"),t("y")]}const tye=({current:t})=>t?t.ownerDocument.defaultView:null,Nie=(t,e)=>Math.abs(t-e);function XVe(t,e){const r=Nie(t.x,e.x),n=Nie(t.y,e.y);return Math.sqrt(r**2+n**2)}class rye{constructor(e,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=S$(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=XVe(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!x)return;const{point:g}=f,{timestamp:y}=Vc;this.history.push({...g,timestamp:y});const{onStart:w,onMove:S}=this.handlers;m||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=N$(m,this.transformPagePoint),Ma.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=S$(f.type==="pointercancel"?this.lastMoveEventInfo:N$(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,w),g&&g(f,w)},!VY(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const l=oI(e),c=N$(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Vc;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(e,S$(c,this.history)),this.removeListeners=iI(N4(this.contextWindow,"pointermove",this.handlePointerMove),N4(this.contextWindow,"pointerup",this.handlePointerUp),N4(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Av(this.updatePoint)}}function N$(t,e){return e?{point:e(t.point)}:t}function Sie(t,e){return{x:t.x-e.x,y:t.y-e.y}}function S$({point:t},e){return{point:t,delta:Sie(t,nye(e)),offset:Sie(t,YVe(e)),velocity:ZVe(e,.1)}}function YVe(t){return t[0]}function nye(t){return t[t.length-1]}function ZVe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=nye(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Kp(e)));)r--;if(!n)return{x:0,y:0};const s=Nm(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function QVe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Ya(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Ya(r,t,n.max):Math.min(t,r)),t}function Eie(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function JVe(t,{top:e,left:r,bottom:n,right:i}){return{x:Eie(t.x,r,i),y:Eie(t.y,e,n)}}function jie(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function eqe(t,e){return{x:jie(t.x,e.x),y:jie(t.y,e.y)}}function tqe(t,e){let r=.5;const n=yd(t),i=yd(e);return i>n?r=kA(e.min,e.max-n,t.min):n>i&&(r=kA(t.min,t.max-i,e.min)),Ev(0,1,r)}function rqe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const kq=.35;function nqe(t=kq){return t===!1?t=0:t===!0&&(t=kq),{x:Aie(t,"left","right"),y:Aie(t,"top","bottom")}}function Aie(t,e,r){return{min:Cie(t,e),max:Cie(t,r)}}function Cie(t,e){return typeof t=="number"?t:t[e]||0}const iqe=new WeakMap;class sqe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ko(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(oI(h).point)},o=(h,f)=>{const{drag:m,dragPropagation:x,onDragStart:g}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pze(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zf(w=>{let S=this.getAxisMotionValue(w).get()||0;if(Sg.test(S)){const{projection:E}=this.visualElement;if(E&&E.layout){const j=E.layout.layoutBox[w];j&&(S=yd(j)*(parseFloat(S)/100))}}this.originPoint[w]=S}),g&&Ma.postRender(()=>g(h,f)),Tq(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:g,onDrag:y}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=f;if(x&&this.currentDirection===null){this.currentDirection=aqe(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),y&&y(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Zf(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new rye(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:tye(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,i=r||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ma.postRender(()=>l(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!WR(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=QVe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&VS(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=JVe(n.layoutBox,e):this.constraints=!1,this.elastic=nqe(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Zf(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rqe(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!VS(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=dVe(n,i.root,this.visualElement.getTransformPagePoint());let o=eqe(i.layout.layoutBox,s);if(r){const l=r(lVe(o));this.hasMutatedConstraints=!!l,l&&(o=F1e(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Zf(d=>{if(!WR(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,x={type:"inertia",velocity:n?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return Tq(this.visualElement,e),n.start(JY(e,n,0,r,this.visualElement,!1))}stopAnimation(){Zf(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zf(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Zf(r=>{const{drag:n}=this.getProps();if(!WR(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[r];s.set(e[r]-Ya(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!VS(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zf(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=tqe({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Zf(o=>{if(!WR(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Ya(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;iqe.set(this.visualElement,this);const e=this.visualElement.current,r=N4(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();VS(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ma.read(n);const o=q3(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zf(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=kq,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function WR(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function aqe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class oqe extends Wb{constructor(e){super(e),this.removeGroupControls=Cm,this.removeListeners=Cm,this.controls=new sqe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cm}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tie=t=>(e,r)=>{t&&Ma.postRender(()=>t(e,r))};class lqe extends Wb{constructor(){super(...arguments),this.removePointerDownListener=Cm}onPointerDown(e){this.session=new rye(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tye(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Tie(e),onStart:Tie(r),onMove:n,onEnd:(s,o)=>{delete this.session,i&&Ma.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=N4(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const x6={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pie(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Z5={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Zn.test(t))t=parseFloat(t);else return t;const r=Pie(t,e.target.x),n=Pie(t,e.target.y);return`${r}% ${n}%`}},cqe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=Nb.parse(t);if(i.length>5)return n;const s=Nb.createTransformer(t),o=typeof i[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const u=Ya(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};let E$=!1;class uqe extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Mze(dqe),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),E$&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),x6.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,E$=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ma.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zY.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;E$=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iye(t){const[e,r]=S1e(),n=C.useContext(bY);return a.jsx(uqe,{...t,layoutGroup:n,switchLayoutGroup:C.useContext(M1e),isPresent:e,safeToRemove:r})}const dqe={borderRadius:{...Z5,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Z5,borderTopRightRadius:Z5,borderBottomLeftRadius:Z5,borderBottomRightRadius:Z5,boxShadow:cqe};function sye(t,e,r){const n=mc(t)?t:z_(t);return n.start(JY("",n,e,r)),n.animation}const hqe=(t,e)=>t.depth-e.depth;class fqe{constructor(){this.children=[],this.isDirty=!1}add(e){NY(this.children,e),this.isDirty=!0}remove(e){a7(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hqe),this.isDirty=!1,this.children.forEach(e)}}function mqe(t,e){const r=oh.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(Av(n),t(s-e))};return Ma.setup(n,!0),()=>Av(n)}const aye=["TopLeft","TopRight","BottomLeft","BottomRight"],pqe=aye.length,kie=t=>typeof t=="string"?parseFloat(t):t,Oie=t=>typeof t=="number"||Zn.test(t);function gqe(t,e,r,n,i,s){i?(t.opacity=Ya(0,r.opacity??1,xqe(n)),t.opacityExit=Ya(e.opacity??1,0,vqe(n))):s&&(t.opacity=Ya(e.opacity??1,r.opacity??1,n));for(let o=0;o<pqe;o++){const l=`border${aye[o]}Radius`;let c=Iie(e,l),u=Iie(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Oie(c)===Oie(u)?(t[l]=Math.max(Ya(kie(c),kie(u),n),0),(Sg.test(u)||Sg.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||r.rotate)&&(t.rotate=Ya(e.rotate||0,r.rotate||0,n))}function Iie(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xqe=oye(0,.5,Bve),vqe=oye(.5,.95,Cm);function oye(t,e,r){return n=>n<t?0:n>e?1:r(kA(t,e,n))}function Rie(t,e){t.min=e.min,t.max=e.max}function qf(t,e){Rie(t.x,e.x),Rie(t.y,e.y)}function Die(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Mie(t,e,r,n,i){return t-=e,t=i8(t,1/r,n),i!==void 0&&(t=i8(t,1/i,n)),t}function yqe(t,e=0,r=1,n=.5,i,s=t,o=t){if(Sg.test(e)&&(e=parseFloat(e),e=Ya(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Ya(s.min,s.max,n);t===s&&(l-=e),t.min=Mie(t.min,e,r,l,i),t.max=Mie(t.max,e,r,l,i)}function Lie(t,e,[r,n,i],s,o){yqe(t,e[r],e[n],e[i],e.scale,s,o)}const bqe=["x","scaleX","originX"],wqe=["y","scaleY","originY"];function Fie(t,e,r,n){Lie(t.x,e,bqe,r?r.x:void 0,n?n.x:void 0),Lie(t.y,e,wqe,r?r.y:void 0,n?n.y:void 0)}function Bie(t){return t.translate===0&&t.scale===1}function lye(t){return Bie(t.x)&&Bie(t.y)}function $ie(t,e){return t.min===e.min&&t.max===e.max}function _qe(t,e){return $ie(t.x,e.x)&&$ie(t.y,e.y)}function Uie(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function cye(t,e){return Uie(t.x,e.x)&&Uie(t.y,e.y)}function zie(t){return yd(t.x)/yd(t.y)}function Vie(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Nqe{constructor(){this.members=[]}add(e){NY(this.members,e),e.scheduleRender()}remove(e){if(a7(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sqe(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),x&&(n+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const j$=["","X","Y","Z"],Eqe=1e3;let jqe=0;function A$(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function uye(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=X1e(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Ma,!(i||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&uye(n)}function dye({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=jqe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Tqe),this.nodes.forEach(Iqe),this.nodes.forEach(Rqe),this.nodes.forEach(Pqe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new fqe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new EY),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=qY(o)&&!N1e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ma.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=mqe(f,250),x6.hasAnimatedSinceResize&&(x6.hasAnimatedSinceResize=!1,this.nodes.forEach(Wie)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Bqe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),w=!this.targetLayout||!cye(this.targetLayout,m),S=!h&&f;if(this.options.layoutRoot||this.resumeFrom||S||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...BY(x,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(d,S)}else h||Wie(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Av(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Dqe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uye(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qie);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hie);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Oqe),this.nodes.forEach(Aqe),this.nodes.forEach(Cqe)):this.nodes.forEach(Hie),this.clearAllSnapshots();const l=oh.now();Vc.delta=Ev(0,1e3/60,l-Vc.timestamp),Vc.timestamp=l,Vc.isProcessing=!0,p$.update.process(Vc),p$.preRender.process(Vc),p$.render.process(Vc),Vc.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zY.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kqe),this.sharedNodes.forEach(Mqe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ma.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ma.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yd(this.snapshot.measuredBox.x)&&!yd(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ko(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!lye(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||xw(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),$qe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ko();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Uqe))){const{scroll:d}=this.root;d&&(qS(l.x,d.offset.x),qS(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=ko();if(qf(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&qf(l,o),qS(l.x,h.offset.x),qS(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=ko();qf(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&HS(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),xw(d.latestValues)&&HS(c,d.latestValues)}return xw(this.latestValues)&&HS(c,this.latestValues),c}removeTransform(o){const l=ko();qf(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!xw(u.latestValues))continue;Eq(u.latestValues)&&u.updateSnapshot();const d=ko(),h=u.measurePageBox();qf(d,h),Fie(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return xw(this.latestValues)&&Fie(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vc.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Vc.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ko(),this.relativeTargetOrigin=ko(),E4(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),qf(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ko(),this.targetWithTransforms=ko()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KVe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qf(this.target,this.layout.layoutBox),$1e(this.target,this.targetDelta)):qf(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ko(),this.relativeTargetOrigin=ko(),E4(this.relativeTargetOrigin,this.target,m.target),qf(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Eq(this.parent.latestValues)||B1e(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Vc.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;qf(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;uVe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ko());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Die(this.prevProjectionDelta.x,this.projectionDelta.x),Die(this.prevProjectionDelta.y,this.projectionDelta.y)),S4(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Vie(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vie(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=WS(),this.projectionDelta=WS(),this.projectionDeltaWithTransform=WS()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=WS();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ko(),m=c?c.source:void 0,x=this.layout?this.layout.source:void 0,g=m!==x,y=this.getStack(),w=!y||y.members.length<=1,S=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(Fqe));this.animationProgress=0;let E;this.mixTargetDelta=j=>{const T=j/1e3;Gie(h.x,o.x,T),Gie(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(E4(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lqe(this.relativeTarget,this.relativeTargetOrigin,f,T),E&&_qe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ko()),qf(E,this.relativeTarget)),g&&(this.animationValues=d,gqe(d,u,this.latestValues,T,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Av(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ma.update(()=>{x6.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=z_(0)),this.currentAnimation=sye(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Eqe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&hye(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ko();const h=yd(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=yd(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}qf(l,c),HS(l,d),S4(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Nqe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&A$("z",o,u,this.animationValues);for(let d=0;d<j$.length;d++)A$(`rotate${j$[d]}`,o,u,this.animationValues),A$(`skew${j$[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=g6(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=g6(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!xw(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Sqe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in z3){if(d[x]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:w}=z3[x],S=h==="none"?d[x]:g(d[x],u);if(y){const E=y.length;for(let j=0;j<E;j++)o[y[j]]=S}else w?this.options.visualElement.renderState.vars[x]=S:o[x]=S}this.options.layoutId&&(o.pointerEvents=u===this?g6(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(qie),this.root.sharedNodes.clear()}}}function Aqe(t){t.updateLayout()}function Cqe(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Zf(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=yd(f);f.min=n[h].min,f.max=f.min+m}):hye(s,e.layoutBox,n)&&Zf(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=yd(n[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=WS();S4(l,n,e.layoutBox);const c=WS();o?S4(c,t.applyTransform(i,!0),e.measuredBox):S4(c,n,e.layoutBox);const u=!lye(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const x=ko();E4(x,e.layoutBox,f.layoutBox);const g=ko();E4(g,n,m.layoutBox),cye(x,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Tqe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Pqe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kqe(t){t.clearSnapshot()}function qie(t){t.clearMeasurements()}function Hie(t){t.isLayoutDirty=!1}function Oqe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Wie(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Iqe(t){t.resolveTargetDelta()}function Rqe(t){t.calcProjection()}function Dqe(t){t.resetSkewAndRotation()}function Mqe(t){t.removeLeadSnapshot()}function Gie(t,e,r){t.translate=Ya(e.translate,0,r),t.scale=Ya(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Kie(t,e,r,n){t.min=Ya(e.min,r.min,n),t.max=Ya(e.max,r.max,n)}function Lqe(t,e,r,n){Kie(t.x,e.x,r.x,n),Kie(t.y,e.y,r.y,n)}function Fqe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Bqe={duration:.45,ease:[.4,0,.1,1]},Xie=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Yie=Xie("applewebkit/")&&!Xie("chrome/")?Math.round:Cm;function Zie(t){t.min=Yie(t.min),t.max=Yie(t.max)}function $qe(t){Zie(t.x),Zie(t.y)}function hye(t,e,r){return t==="position"||t==="preserve-aspect"&&!GVe(zie(e),zie(r),.2)}function Uqe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const zqe=dye({attachResizeListener:(t,e)=>q3(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),C$={current:void 0},fye=dye({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!C$.current){const t=new zqe({});t.mount(window),t.setOptions({layoutScroll:!0}),C$.current=t}return C$.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Vqe={pan:{Feature:lqe},drag:{Feature:oqe,ProjectionNode:fye,MeasureLayout:iye}};function Qie(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,s=n[i];s&&Ma.postRender(()=>s(e,oI(e)))}class qqe extends Wb{mount(){const{current:e}=this.node;e&&(this.unmount=gze(e,(r,n)=>(Qie(this.node,n,"Start"),i=>Qie(this.node,i,"End"))))}unmount(){}}class Hqe extends Wb{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iI(q3(this.node.current,"focus",()=>this.onFocus()),q3(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Jie(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),s=n[i];s&&Ma.postRender(()=>s(e,oI(e)))}class Wqe extends Wb{mount(){const{current:e}=this.node;e&&(this.unmount=bze(e,(r,n)=>(Jie(this.node,n,"Start"),(i,{success:s})=>Jie(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Oq=new WeakMap,T$=new WeakMap,Gqe=t=>{const e=Oq.get(t.target);e&&e(t)},Kqe=t=>{t.forEach(Gqe)};function Xqe({root:t,...e}){const r=t||document;T$.has(r)||T$.set(r,{});const n=T$.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Kqe,{root:t,...e})),n[i]}function Yqe(t,e,r){const n=Xqe(e);return Oq.set(t,r),n.observe(t),()=>{Oq.delete(t),n.unobserve(t)}}const Zqe={some:0,all:1};class Qqe extends Wb{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Zqe[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return Yqe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Jqe(e,r))&&this.startObserver()}unmount(){}}function Jqe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const eHe={inView:{Feature:Qqe},tap:{Feature:Wqe},focus:{Feature:Hqe},hover:{Feature:qqe}},tHe={layout:{ProjectionNode:fye,MeasureLayout:iye}},rHe={...UVe,...eHe,...Vqe,...tHe},Ke=oVe(rHe,gVe);function mye(t){const e=nI(()=>z_(t)),{isStatic:r}=C.useContext(o7);if(r){const[,n]=C.useState(t);C.useEffect(()=>e.on("change",n),[])}return e}function pye(t,e){const r=mye(e()),n=()=>r.set(e());return n(),_Y(()=>{const i=()=>Ma.preRender(n,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Av(n)}}),r}function nHe(t){_4.current=[],t();const e=pye(_4.current,t);return _4.current=void 0,e}function iHe(t,e,r,n){if(typeof t=="function")return nHe(t);const i=typeof e=="function"?e:wze(e,r,n);return Array.isArray(t)?ese(t,i):ese([t],([s])=>i(s))}function ese(t,e){const r=nI(()=>[]);return pye(t,()=>{r.length=0;const n=t.length;for(let i=0;i<n;i++)r[i]=t[i].get();return e(r)})}function tZ(t){return typeof t=="object"&&!Array.isArray(t)}function gye(t,e,r,n){return typeof t=="string"&&tZ(e)?UY(t,r,n):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function sHe(t,e,r){return t*(e+1)}function tse(t,e,r,n){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?r:e.startsWith("<")?Math.max(0,r+parseFloat(e.slice(1))):n.get(e)??t}function aHe(t,e,r){for(let n=0;n<t.length;n++){const i=t[n];i.at>e&&i.at<r&&(a7(t,i),n--)}}function oHe(t,e,r,n,i,s){aHe(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Ya(i,s,n[o]),easing:Vve(r,o)})}function lHe(t,e){for(let r=0;r<t.length;r++)t[r]=t[r]/(e+1)}function cHe(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const uHe="easeInOut";function dHe(t,{defaultTransition:e={},...r}={},n,i){const s=e.duration||.3,o=new Map,l=new Map,c={},u=new Map;let d=0,h=0,f=0;for(let m=0;m<t.length;m++){const x=t[m];if(typeof x=="string"){u.set(x,h);continue}else if(!Array.isArray(x)){u.set(x.name,tse(h,x.at,d,u));continue}let[g,y,w={}]=x;w.at!==void 0&&(h=tse(h,w.at,d,u));let S=0;const E=(j,T,O,I=0,M=0)=>{const D=hHe(j),{delay:z=0,times:F=s1e(D),type:q="keyframes",repeat:Q,repeatType:re,repeatDelay:Z=0,...se}=T;let{ease:K=e.ease||"easeOut",duration:X}=T;const Y=typeof z=="function"?z(I,M):z,oe=D.length,xe=FY(q)?q:i==null?void 0:i[q||"keyframes"];if(oe<=2&&xe){let ce=100;if(oe===2&&pHe(D)){const _e=D[1]-D[0];ce=Math.abs(_e)}const me={...se};X!==void 0&&(me.duration=Kp(X));const he=t1e(me,ce,xe);K=he.ease,X=he.duration}X??(X=s);const H=h+Y;F.length===1&&F[0]===0&&(F[1]=1);const J=F.length-D.length;if(J>0&&i1e(F,J),D.length===1&&D.unshift(null),Q){X=sHe(X,Q);const ce=[...D],me=[...F];K=Array.isArray(K)?[...K]:[K];const he=[...K];for(let _e=0;_e<Q;_e++){D.push(...ce);for(let ue=0;ue<ce.length;ue++)F.push(me[ue]+(_e+1)),K.push(ue===0?"linear":Vve(he,ue-1))}lHe(F,Q)}const ie=H+X;oHe(O,D,K,F,H,ie),S=Math.max(Y+X,S),f=Math.max(ie,f)};if(mc(g)){const j=rse(g,l);E(y,w,nse("default",j))}else{const j=gye(g,y,n,c),T=j.length;for(let O=0;O<T;O++){y=y,w=w;const I=j[O],M=rse(I,l);for(const D in y)E(y[D],fHe(w,D),nse(D,M),O,T)}}d=h,h+=S}return l.forEach((m,x)=>{for(const g in m){const y=m[g];y.sort(cHe);const w=[],S=[],E=[];for(let T=0;T<y.length;T++){const{at:O,value:I,easing:M}=y[T];w.push(I),S.push(kA(0,f,O)),E.push(M||"easeOut")}S[0]!==0&&(S.unshift(0),w.unshift(w[0]),E.unshift(uHe)),S[S.length-1]!==1&&(S.push(1),w.push(null)),o.has(x)||o.set(x,{keyframes:{},transition:{}});const j=o.get(x);j.keyframes[g]=w,j.transition[g]={...e,duration:f,ease:E,times:S,...r}}}),o}function rse(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function nse(t,e){return e[t]||(e[t]=[]),e[t]}function hHe(t){return Array.isArray(t)?t:[t]}function fHe(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const mHe=t=>typeof t=="number",pHe=t=>t.every(mHe);function gHe(t,e){return t in e}class xHe extends V1e{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,r){if(gHe(r,e)){const n=e[r];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,r){delete r.output[e]}measureInstanceViewportBox(){return ko()}build(e,r){Object.assign(e.output,r)}renderInstance(e,{output:r}){Object.assign(e,r)}sortInstanceNodePosition(){return 0}}function vHe(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},r=qY(t)&&!N1e(t)?new K1e(e):new W1e(e);r.mount(t),V3.set(t,r)}function yHe(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},r=new xHe(e);r.mount(t),V3.set(t,r)}function bHe(t,e){return mc(t)||typeof t=="number"||typeof t=="string"&&!tZ(e)}function xye(t,e,r,n){const i=[];if(bHe(t,e))i.push(sye(t,tZ(e)&&e.default||e,r&&(r.default||r)));else{const s=gye(t,e,n),o=s.length;for(let l=0;l<o;l++){const c=s[l],u=c instanceof Element?vHe:yHe;V3.has(c)||u(c);const d=V3.get(c),h={...r};"delay"in h&&typeof h.delay=="function"&&(h.delay=h.delay(l,o)),i.push(...eZ(d,{...e,transition:h},{}))}}return i}function wHe(t,e,r){const n=[];return dHe(t,e,r,{spring:$3}).forEach(({keyframes:s,transition:o},l)=>{n.push(...xye(l,s,o))}),n}function _He(t){return Array.isArray(t)&&t.some(Array.isArray)}function NHe(t){function e(r,n,i){let s=[],o;if(_He(r))s=wHe(r,n,t);else{const{onComplete:c,...u}=i||{};typeof c=="function"&&(o=c),s=xye(r,n,u,t)}const l=new eze(s);return o&&l.finished.then(o),l}return e}const SHe=NHe(),EHe={some:0,all:1};function jHe(t,e,{root:r,margin:n,amount:i="some"}={}){const s=UY(t),o=new WeakMap,l=u=>{u.forEach(d=>{const h=o.get(d.target);if(d.isIntersecting!==!!h)if(d.isIntersecting){const f=e(d.target,d);typeof f=="function"?o.set(d.target,f):c.unobserve(d.target)}else typeof h=="function"&&(h(d),o.delete(d.target))})},c=new IntersectionObserver(l,{root:r,rootMargin:n,threshold:typeof i=="number"?i:EHe[i]});return s.forEach(u=>c.observe(u)),()=>c.disconnect()}function rZ(t,{root:e,margin:r,amount:n,once:i=!1,initial:s=!1}={}){const[o,l]=C.useState(s);return C.useEffect(()=>{if(!t.current||i&&o)return;const c=()=>(l(!0),i?void 0:()=>l(!1)),u={root:e&&e.current||void 0,margin:r,amount:n};return jHe(t.current,c,u)},[e,t,r,i,n]),o}var d7="Dialog",[vye,yye]=qo(d7),[AHe,l0]=vye(d7),bye=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,l=C.useRef(null),c=C.useRef(null),[u,d]=Xu({prop:n,defaultProp:i??!1,onChange:s,caller:d7});return a.jsx(AHe,{scope:e,triggerRef:l,contentRef:c,contentId:bl(),titleId:bl(),descriptionId:bl(),open:u,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};bye.displayName=d7;var wye="DialogTrigger",_ye=C.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=l0(wye,r),s=An(e,i.triggerRef);return a.jsx(Dr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":sZ(i.open),...n,ref:s,onClick:wr(t.onClick,i.onOpenToggle)})});_ye.displayName=wye;var nZ="DialogPortal",[CHe,Nye]=vye(nZ,{forceMount:void 0}),Sye=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,s=l0(nZ,e);return a.jsx(CHe,{scope:e,forceMount:r,children:C.Children.map(n,o=>a.jsx(El,{present:r||s.open,children:a.jsx(RC,{asChild:!0,container:i,children:o})}))})};Sye.displayName=nZ;var s8="DialogOverlay",Eye=C.forwardRef((t,e)=>{const r=Nye(s8,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=l0(s8,t.__scopeDialog);return s.modal?a.jsx(El,{present:n||s.open,children:a.jsx(PHe,{...i,ref:e})}):null});Eye.displayName=s8;var THe=vb("DialogOverlay.RemoveScroll"),PHe=C.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=l0(s8,r);return a.jsx(rI,{as:THe,allowPinchZoom:!0,shards:[i.contentRef],children:a.jsx(Dr.div,{"data-state":sZ(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),V_="DialogContent",jye=C.forwardRef((t,e)=>{const r=Nye(V_,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=l0(V_,t.__scopeDialog);return a.jsx(El,{present:n||s.open,children:s.modal?a.jsx(kHe,{...i,ref:e}):a.jsx(OHe,{...i,ref:e})})});jye.displayName=V_;var kHe=C.forwardRef((t,e)=>{const r=l0(V_,t.__scopeDialog),n=C.useRef(null),i=An(e,r.contentRef,n);return C.useEffect(()=>{const s=n.current;if(s)return e7(s)},[]),a.jsx(Aye,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wr(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:wr(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:wr(t.onFocusOutside,s=>s.preventDefault())})}),OHe=C.forwardRef((t,e)=>{const r=l0(V_,t.__scopeDialog),n=C.useRef(!1),i=C.useRef(!1);return a.jsx(Aye,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Aye=C.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,l=l0(V_,r),c=C.useRef(null),u=An(e,c);return JF(),a.jsxs(a.Fragment,{children:[a.jsx(eI,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(cN,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":sZ(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(RHe,{titleId:l.titleId}),a.jsx(MHe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),iZ="DialogTitle",Cye=C.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=l0(iZ,r);return a.jsx(Dr.h2,{id:i.titleId,...n,ref:e})});Cye.displayName=iZ;var Tye="DialogDescription",Pye=C.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=l0(Tye,r);return a.jsx(Dr.p,{id:i.descriptionId,...n,ref:e})});Pye.displayName=Tye;var kye="DialogClose",Oye=C.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=l0(kye,r);return a.jsx(Dr.button,{type:"button",...n,ref:e,onClick:wr(t.onClick,()=>i.onOpenChange(!1))})});Oye.displayName=kye;function sZ(t){return t?"open":"closed"}var Iye="DialogTitleWarning",[IHe,Rye]=gIe(Iye,{contentName:V_,titleName:iZ,docsSlug:"dialog"}),RHe=({titleId:t})=>{const e=Rye(Iye),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return C.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},DHe="DialogDescriptionWarning",MHe=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Rye(DHe).contentName}}.`;return C.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},lI=bye,h7=_ye,cI=Sye,uN=Eye,dN=jye,QC=Cye,JC=Pye,uI=Oye;const Dye=lI,Mye=h7,LHe=cI,Lye=C.forwardRef(({className:t,...e},r)=>a.jsx(uN,{className:Ut("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));Lye.displayName=uN.displayName;const FHe=DC("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),aZ=C.forwardRef(({side:t="right",className:e,children:r,...n},i)=>a.jsxs(LHe,{children:[a.jsx(Lye,{}),a.jsxs(dN,{ref:i,className:Ut(FHe({side:t}),e),...n,children:[r,a.jsxs(uI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(Xa,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));aZ.displayName=dN.displayName;const oZ=({className:t,...e})=>a.jsx("div",{className:Ut("flex flex-col space-y-2 text-center sm:text-left",t),...e});oZ.displayName="SheetHeader";const lZ=C.forwardRef(({className:t,...e},r)=>a.jsx(QC,{ref:r,className:Ut("text-lg font-semibold text-foreground",t),...e}));lZ.displayName=QC.displayName;const BHe=C.forwardRef(({className:t,...e},r)=>a.jsx(JC,{ref:r,className:Ut("text-sm text-muted-foreground",t),...e}));BHe.displayName=JC.displayName;var $He="Separator",ise="horizontal",UHe=["horizontal","vertical"],Fye=C.forwardRef((t,e)=>{const{decorative:r,orientation:n=ise,...i}=t,s=zHe(n)?n:ise,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx(Dr.div,{"data-orientation":s,...l,...i,ref:e})});Fye.displayName=$He;function zHe(t){return UHe.includes(t)}var Bye=Fye;const r0=C.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>a.jsx(Bye,{ref:i,decorative:r,orientation:e,className:Ut("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));r0.displayName=Bye.displayName;const VHe={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}};function $v({children:t,className:e=""}){return a.jsx(Ke.div,{initial:"initial",animate:"animate",exit:"exit",variants:VHe,transition:{duration:.3},className:e,children:t})}function $ye(t){return e=>typeof e===t}var qHe=$ye("function"),HHe=t=>t===null,sse=t=>Object.prototype.toString.call(t).slice(8,-1)==="RegExp",ase=t=>!WHe(t)&&!HHe(t)&&(qHe(t)||typeof t=="object"),WHe=$ye("undefined");function GHe(t,e){const{length:r}=t;if(r!==e.length)return!1;for(let n=r;n--!==0;)if(!bd(t[n],e[n]))return!1;return!0}function KHe(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new DataView(t.buffer),n=new DataView(e.buffer);let i=t.byteLength;for(;i--;)if(r.getUint8(i)!==n.getUint8(i))return!1;return!0}function XHe(t,e){if(t.size!==e.size)return!1;for(const r of t.entries())if(!e.has(r[0]))return!1;for(const r of t.entries())if(!bd(r[1],e.get(r[0])))return!1;return!0}function YHe(t,e){if(t.size!==e.size)return!1;for(const r of t.entries())if(!e.has(r[0]))return!1;return!0}function bd(t,e){if(t===e)return!0;if(t&&ase(t)&&e&&ase(e)){if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)&&Array.isArray(e))return GHe(t,e);if(t instanceof Map&&e instanceof Map)return XHe(t,e);if(t instanceof Set&&e instanceof Set)return YHe(t,e);if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return KHe(t,e);if(sse(t)&&sse(e))return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=r.length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(let i=r.length;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!bd(t[s],e[s]))return!1}return!0}return Number.isNaN(t)&&Number.isNaN(e)?!0:t===e}var ZHe=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],QHe=["bigint","boolean","null","number","string","symbol","undefined"];function f7(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e))return"HTMLElement";if(JHe(e))return e}function c0(t){return e=>f7(e)===t}function JHe(t){return ZHe.includes(t)}function e5(t){return e=>typeof e===t}function eWe(t){return QHe.includes(t)}var tWe=["innerHTML","ownerDocument","style","attributes","nodeValue"];function en(t){if(t===null)return"null";switch(typeof t){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(en.array(t))return"Array";if(en.plainFunction(t))return"Function";const e=f7(t);return e||"Object"}en.array=Array.isArray;en.arrayOf=(t,e)=>!en.array(t)&&!en.function(e)?!1:t.every(r=>e(r));en.asyncGeneratorFunction=t=>f7(t)==="AsyncGeneratorFunction";en.asyncFunction=c0("AsyncFunction");en.bigint=e5("bigint");en.boolean=t=>t===!0||t===!1;en.date=c0("Date");en.defined=t=>!en.undefined(t);en.domElement=t=>en.object(t)&&!en.plainObject(t)&&t.nodeType===1&&en.string(t.nodeName)&&tWe.every(e=>e in t);en.empty=t=>en.string(t)&&t.length===0||en.array(t)&&t.length===0||en.object(t)&&!en.map(t)&&!en.set(t)&&Object.keys(t).length===0||en.set(t)&&t.size===0||en.map(t)&&t.size===0;en.error=c0("Error");en.function=e5("function");en.generator=t=>en.iterable(t)&&en.function(t.next)&&en.function(t.throw);en.generatorFunction=c0("GeneratorFunction");en.instanceOf=(t,e)=>!t||!e?!1:Object.getPrototypeOf(t)===e.prototype;en.iterable=t=>!en.nullOrUndefined(t)&&en.function(t[Symbol.iterator]);en.map=c0("Map");en.nan=t=>Number.isNaN(t);en.null=t=>t===null;en.nullOrUndefined=t=>en.null(t)||en.undefined(t);en.number=t=>e5("number")(t)&&!en.nan(t);en.numericString=t=>en.string(t)&&t.length>0&&!Number.isNaN(Number(t));en.object=t=>!en.nullOrUndefined(t)&&(en.function(t)||typeof t=="object");en.oneOf=(t,e)=>en.array(t)?t.indexOf(e)>-1:!1;en.plainFunction=c0("Function");en.plainObject=t=>{if(f7(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};en.primitive=t=>en.null(t)||eWe(typeof t);en.promise=c0("Promise");en.propertyOf=(t,e,r)=>{if(!en.object(t)||!e)return!1;const n=t[e];return en.function(r)?r(n):en.defined(n)};en.regexp=c0("RegExp");en.set=c0("Set");en.string=e5("string");en.symbol=e5("symbol");en.undefined=e5("undefined");en.weakMap=c0("WeakMap");en.weakSet=c0("WeakSet");var fn=en;function rWe(...t){return t.every(e=>fn.string(e)||fn.array(e)||fn.plainObject(e))}function nWe(t,e,r){return Uye(t,e)?[t,e].every(fn.array)?!t.some(dse(r))&&e.some(dse(r)):[t,e].every(fn.plainObject)?!Object.entries(t).some(use(r))&&Object.entries(e).some(use(r)):e===r:!1}function ose(t,e,r){const{actual:n,key:i,previous:s,type:o}=r,l=fg(t,i),c=fg(e,i);let u=[l,c].every(fn.number)&&(o==="increased"?l<c:l>c);return fn.undefined(n)||(u=u&&c===n),fn.undefined(s)||(u=u&&l===s),u}function lse(t,e,r){const{key:n,type:i,value:s}=r,o=fg(t,n),l=fg(e,n),c=i==="added"?o:l,u=i==="added"?l:o;if(!fn.nullOrUndefined(s)){if(fn.defined(c)){if(fn.array(c)||fn.plainObject(c))return nWe(c,u,s)}else return bd(u,s);return!1}return[o,l].every(fn.array)?!u.every(cZ(c)):[o,l].every(fn.plainObject)?iWe(Object.keys(c),Object.keys(u)):![o,l].every(d=>fn.primitive(d)&&fn.defined(d))&&(i==="added"?!fn.defined(o)&&fn.defined(l):fn.defined(o)&&!fn.defined(l))}function cse(t,e,{key:r}={}){let n=fg(t,r),i=fg(e,r);if(!Uye(n,i))throw new TypeError("Inputs have different types");if(!rWe(n,i))throw new TypeError("Inputs don't have length");return[n,i].every(fn.plainObject)&&(n=Object.keys(n),i=Object.keys(i)),[n,i]}function use(t){return([e,r])=>fn.array(t)?bd(t,r)||t.some(n=>bd(n,r)||fn.array(r)&&cZ(r)(n)):fn.plainObject(t)&&t[e]?!!t[e]&&bd(t[e],r):bd(t,r)}function iWe(t,e){return e.some(r=>!t.includes(r))}function dse(t){return e=>fn.array(t)?t.some(r=>bd(r,e)||fn.array(e)&&cZ(e)(r)):bd(t,e)}function Q5(t,e){return fn.array(t)?t.some(r=>bd(r,e)):bd(t,e)}function cZ(t){return e=>t.some(r=>bd(r,e))}function Uye(...t){return t.every(fn.array)||t.every(fn.number)||t.every(fn.plainObject)||t.every(fn.string)}function fg(t,e){return fn.plainObject(t)||fn.array(t)?fn.string(e)?e.split(".").reduce((n,i)=>n&&n[i],t):fn.number(e)?t[e]:t:t}function a8(t,e){if([t,e].some(fn.nullOrUndefined))throw new Error("Missing required parameters");if(![t,e].every(d=>fn.plainObject(d)||fn.array(d)))throw new Error("Expected plain objects or array");return{added:(d,h)=>{try{return lse(t,e,{key:d,type:"added",value:h})}catch{return!1}},changed:(d,h,f)=>{try{const m=fg(t,d),x=fg(e,d),g=fn.defined(h),y=fn.defined(f);if(g||y){const w=y?Q5(f,m):!Q5(h,m),S=Q5(h,x);return w&&S}return[m,x].every(fn.array)||[m,x].every(fn.plainObject)?!bd(m,x):m!==x}catch{return!1}},changedFrom:(d,h,f)=>{if(!fn.defined(d))return!1;try{const m=fg(t,d),x=fg(e,d),g=fn.defined(f);return Q5(h,m)&&(g?Q5(f,x):!g)}catch{return!1}},decreased:(d,h,f)=>{if(!fn.defined(d))return!1;try{return ose(t,e,{key:d,actual:h,previous:f,type:"decreased"})}catch{return!1}},emptied:d=>{try{const[h,f]=cse(t,e,{key:d});return!!h.length&&!f.length}catch{return!1}},filled:d=>{try{const[h,f]=cse(t,e,{key:d});return!h.length&&!!f.length}catch{return!1}},increased:(d,h,f)=>{if(!fn.defined(d))return!1;try{return ose(t,e,{key:d,actual:h,previous:f,type:"increased"})}catch{return!1}},removed:(d,h)=>{try{return lse(t,e,{key:d,type:"removed",value:h})}catch{return!1}}}}var sWe=new Error("Element already at target scroll position"),aWe=new Error("Scroll cancelled"),oWe=Math.min,hse=Date.now,lWe={left:fse("scrollLeft"),top:fse("scrollTop")};function fse(t){return function(r,n,i,s){i=i||{},typeof i=="function"&&(s=i,i={}),typeof s!="function"&&(s=uWe);var o=hse(),l=r[t],c=i.ease||cWe,u=isNaN(i.duration)?350:+i.duration,d=!1;return l===n?s(sWe,r[t]):requestAnimationFrame(f),h;function h(){d=!0}function f(m){if(d)return s(aWe,r[t]);var x=hse(),g=oWe(1,(x-o)/u),y=c(g);r[t]=y*(n-l)+l,g<1?requestAnimationFrame(f):requestAnimationFrame(function(){s(null,r[t])})}}}function cWe(t){return .5*(1-Math.cos(Math.PI*t))}function uWe(){}const dWe=Vi(lWe);var zye={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.Scrollparent=r()})(pm,function(){function e(n){var i=getComputedStyle(n,null).getPropertyValue("overflow");return i.indexOf("scroll")>-1||i.indexOf("auto")>-1}function r(n){if(n instanceof HTMLElement||n instanceof SVGElement){for(var i=n.parentNode;i.parentNode;){if(e(i))return i;i=i.parentNode}return document.scrollingElement||document.documentElement}}return r})})(zye);var hWe=zye.exports;const Vye=Vi(hWe);var fWe=function(t){return Object.prototype.hasOwnProperty.call(t,"props")},mWe=function(t,e){return t+H3(e)},H3=function(t){return t===null||typeof t=="boolean"||typeof t>"u"?"":typeof t=="number"?t.toString():typeof t=="string"?t:Array.isArray(t)?t.reduce(mWe,""):fWe(t)&&Object.prototype.hasOwnProperty.call(t.props,"children")?H3(t.props.children):""};H3.default=H3;var pWe=H3;const mse=Vi(pWe);var gWe=function(e){return xWe(e)&&!vWe(e)};function xWe(t){return!!t&&typeof t=="object"}function vWe(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||wWe(t)}var yWe=typeof Symbol=="function"&&Symbol.for,bWe=yWe?Symbol.for("react.element"):60103;function wWe(t){return t.$$typeof===bWe}function _We(t){return Array.isArray(t)?[]:{}}function W3(t,e){return e.clone!==!1&&e.isMergeableObject(t)?IA(_We(t),t,e):t}function NWe(t,e,r){return t.concat(e).map(function(n){return W3(n,r)})}function SWe(t,e){if(!e.customMerge)return IA;var r=e.customMerge(t);return typeof r=="function"?r:IA}function EWe(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function pse(t){return Object.keys(t).concat(EWe(t))}function qye(t,e){try{return e in t}catch{return!1}}function jWe(t,e){return qye(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function AWe(t,e,r){var n={};return r.isMergeableObject(t)&&pse(t).forEach(function(i){n[i]=W3(t[i],r)}),pse(e).forEach(function(i){jWe(t,i)||(qye(t,i)&&r.isMergeableObject(e[i])?n[i]=SWe(i,r)(t[i],e[i],r):n[i]=W3(e[i],r))}),n}function IA(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||NWe,r.isMergeableObject=r.isMergeableObject||gWe,r.cloneUnlessOtherwiseSpecified=W3;var n=Array.isArray(e),i=Array.isArray(t),s=n===i;return s?n?r.arrayMerge(t,e,r):AWe(t,e,r):W3(e,r)}IA.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return IA(n,i,r)},{})};var CWe=IA,TWe=CWe;const $p=Vi(TWe);var Hye={exports:{}},PWe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kWe=PWe,OWe=kWe;function Wye(){}function Gye(){}Gye.resetWarningCache=Wye;var IWe=function(){function t(n,i,s,o,l,c){if(c!==OWe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Gye,resetWarningCache:Wye};return r.PropTypes=r,r};Hye.exports=IWe();var RWe=Hye.exports;const dr=Vi(RWe);/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var dI=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",DWe=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(dI&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();function MWe(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}function LWe(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},DWe))}}var FWe=dI&&window.Promise,BWe=FWe?MWe:LWe;function Kye(t){var e={};return t&&e.toString.call(t)==="[object Function]"}function hN(t,e){if(t.nodeType!==1)return[];var r=t.ownerDocument.defaultView,n=r.getComputedStyle(t,null);return e?n[e]:n}function uZ(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function hI(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=hN(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(r+i+n)?t:hI(uZ(t))}function Xye(t){return t&&t.referenceNode?t.referenceNode:t}var gse=dI&&!!(window.MSInputMethodContext&&document.documentMode),xse=dI&&/MSIE 10/.test(navigator.userAgent);function t5(t){return t===11?gse:t===10?xse:gse||xse}function RA(t){if(!t)return document.documentElement;for(var e=t5(10)?document.body:null,r=t.offsetParent||null;r===e&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var n=r&&r.nodeName;return!n||n==="BODY"||n==="HTML"?t?t.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(r.nodeName)!==-1&&hN(r,"position")==="static"?RA(r):r}function $We(t){var e=t.nodeName;return e==="BODY"?!1:e==="HTML"||RA(t.firstElementChild)===t}function Iq(t){return t.parentNode!==null?Iq(t.parentNode):t}function o8(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;var r=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=r?t:e,i=r?e:t,s=document.createRange();s.setStart(n,0),s.setEnd(i,0);var o=s.commonAncestorContainer;if(t!==o&&e!==o||n.contains(i))return $We(o)?o:RA(o);var l=Iq(t);return l.host?o8(l.host,e):o8(t,Iq(e).host)}function DA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",r=e==="top"?"scrollTop":"scrollLeft",n=t.nodeName;if(n==="BODY"||n==="HTML"){var i=t.ownerDocument.documentElement,s=t.ownerDocument.scrollingElement||i;return s[r]}return t[r]}function UWe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=DA(e,"top"),i=DA(e,"left"),s=r?-1:1;return t.top+=n*s,t.bottom+=n*s,t.left+=i*s,t.right+=i*s,t}function vse(t,e){var r=e==="x"?"Left":"Top",n=r==="Left"?"Right":"Bottom";return parseFloat(t["border"+r+"Width"])+parseFloat(t["border"+n+"Width"])}function yse(t,e,r,n){return Math.max(e["offset"+t],e["scroll"+t],r["client"+t],r["offset"+t],r["scroll"+t],t5(10)?parseInt(r["offset"+t])+parseInt(n["margin"+(t==="Height"?"Top":"Left")])+parseInt(n["margin"+(t==="Height"?"Bottom":"Right")]):0)}function Yye(t){var e=t.body,r=t.documentElement,n=t5(10)&&getComputedStyle(r);return{height:yse("Height",e,r,n),width:yse("Width",e,r,n)}}var zWe=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},VWe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),MA=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},Sm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function Sb(t){return Sm({},t,{right:t.left+t.width,bottom:t.top+t.height})}function Rq(t){var e={};try{if(t5(10)){e=t.getBoundingClientRect();var r=DA(t,"top"),n=DA(t,"left");e.top+=r,e.left+=n,e.bottom+=r,e.right+=n}else e=t.getBoundingClientRect()}catch{}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},s=t.nodeName==="HTML"?Yye(t.ownerDocument):{},o=s.width||t.clientWidth||i.width,l=s.height||t.clientHeight||i.height,c=t.offsetWidth-o,u=t.offsetHeight-l;if(c||u){var d=hN(t);c-=vse(d,"x"),u-=vse(d,"y"),i.width-=c,i.height-=u}return Sb(i)}function dZ(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t5(10),i=e.nodeName==="HTML",s=Rq(t),o=Rq(e),l=hI(t),c=hN(e),u=parseFloat(c.borderTopWidth),d=parseFloat(c.borderLeftWidth);r&&i&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var h=Sb({top:s.top-o.top-u,left:s.left-o.left-d,width:s.width,height:s.height});if(h.marginTop=0,h.marginLeft=0,!n&&i){var f=parseFloat(c.marginTop),m=parseFloat(c.marginLeft);h.top-=u-f,h.bottom-=u-f,h.left-=d-m,h.right-=d-m,h.marginTop=f,h.marginLeft=m}return(n&&!r?e.contains(l):e===l&&l.nodeName!=="BODY")&&(h=UWe(h,e)),h}function qWe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=t.ownerDocument.documentElement,n=dZ(t,r),i=Math.max(r.clientWidth,window.innerWidth||0),s=Math.max(r.clientHeight,window.innerHeight||0),o=e?0:DA(r),l=e?0:DA(r,"left"),c={top:o-n.top+n.marginTop,left:l-n.left+n.marginLeft,width:i,height:s};return Sb(c)}function Zye(t){var e=t.nodeName;if(e==="BODY"||e==="HTML")return!1;if(hN(t,"position")==="fixed")return!0;var r=uZ(t);return r?Zye(r):!1}function Qye(t){if(!t||!t.parentElement||t5())return document.documentElement;for(var e=t.parentElement;e&&hN(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function hZ(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s={top:0,left:0},o=i?Qye(t):o8(t,Xye(e));if(n==="viewport")s=qWe(o,i);else{var l=void 0;n==="scrollParent"?(l=hI(uZ(e)),l.nodeName==="BODY"&&(l=t.ownerDocument.documentElement)):n==="window"?l=t.ownerDocument.documentElement:l=n;var c=dZ(l,o,i);if(l.nodeName==="HTML"&&!Zye(o)){var u=Yye(t.ownerDocument),d=u.height,h=u.width;s.top+=c.top-c.marginTop,s.bottom=d+c.top,s.left+=c.left-c.marginLeft,s.right=h+c.left}else s=c}r=r||0;var f=typeof r=="number";return s.left+=f?r:r.left||0,s.top+=f?r:r.top||0,s.right-=f?r:r.right||0,s.bottom-=f?r:r.bottom||0,s}function HWe(t){var e=t.width,r=t.height;return e*r}function Jye(t,e,r,n,i){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(t.indexOf("auto")===-1)return t;var o=hZ(r,n,s,i),l={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},c=Object.keys(l).map(function(f){return Sm({key:f},l[f],{area:HWe(l[f])})}).sort(function(f,m){return m.area-f.area}),u=c.filter(function(f){var m=f.width,x=f.height;return m>=r.clientWidth&&x>=r.clientHeight}),d=u.length>0?u[0].key:c[0].key,h=t.split("-")[1];return d+(h?"-"+h:"")}function ebe(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=n?Qye(e):o8(e,Xye(r));return dZ(r,i,n)}function tbe(t){var e=t.ownerDocument.defaultView,r=e.getComputedStyle(t),n=parseFloat(r.marginTop||0)+parseFloat(r.marginBottom||0),i=parseFloat(r.marginLeft||0)+parseFloat(r.marginRight||0),s={width:t.offsetWidth+i,height:t.offsetHeight+n};return s}function l8(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(r){return e[r]})}function rbe(t,e,r){r=r.split("-")[0];var n=tbe(t),i={width:n.width,height:n.height},s=["right","left"].indexOf(r)!==-1,o=s?"top":"left",l=s?"left":"top",c=s?"height":"width",u=s?"width":"height";return i[o]=e[o]+e[c]/2-n[c]/2,r===l?i[l]=e[l]-n[u]:i[l]=e[l8(l)],i}function fI(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function WWe(t,e,r){if(Array.prototype.findIndex)return t.findIndex(function(i){return i[e]===r});var n=fI(t,function(i){return i[e]===r});return t.indexOf(n)}function nbe(t,e,r){var n=r===void 0?t:t.slice(0,WWe(t,"name",r));return n.forEach(function(i){i.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var s=i.function||i.fn;i.enabled&&Kye(s)&&(e.offsets.popper=Sb(e.offsets.popper),e.offsets.reference=Sb(e.offsets.reference),e=s(e,i))}),e}function GWe(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=ebe(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=Jye(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=rbe(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=nbe(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function ibe(t,e){return t.some(function(r){var n=r.name,i=r.enabled;return i&&n===e})}function fZ(t){for(var e=[!1,"ms","Webkit","Moz","O"],r=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var i=e[n],s=i?""+i+r:t;if(typeof document.body.style[s]<"u")return s}return null}function KWe(){return this.state.isDestroyed=!0,ibe(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[fZ("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function sbe(t){var e=t.ownerDocument;return e?e.defaultView:window}function abe(t,e,r,n){var i=t.nodeName==="BODY",s=i?t.ownerDocument.defaultView:t;s.addEventListener(e,r,{passive:!0}),i||abe(hI(s.parentNode),e,r,n),n.push(s)}function XWe(t,e,r,n){r.updateBound=n,sbe(t).addEventListener("resize",r.updateBound,{passive:!0});var i=hI(t);return abe(i,"scroll",r.updateBound,r.scrollParents),r.scrollElement=i,r.eventsEnabled=!0,r}function YWe(){this.state.eventsEnabled||(this.state=XWe(this.reference,this.options,this.state,this.scheduleUpdate))}function ZWe(t,e){return sbe(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(r){r.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function QWe(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=ZWe(this.reference,this.state))}function mZ(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(t)}function Dq(t,e){Object.keys(e).forEach(function(r){var n="";["width","height","top","right","bottom","left"].indexOf(r)!==-1&&mZ(e[r])&&(n="px"),t.style[r]=e[r]+n})}function JWe(t,e){Object.keys(e).forEach(function(r){var n=e[r];n!==!1?t.setAttribute(r,e[r]):t.removeAttribute(r)})}function eGe(t){return Dq(t.instance.popper,t.styles),JWe(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&Dq(t.arrowElement,t.arrowStyles),t}function tGe(t,e,r,n,i){var s=ebe(i,e,t,r.positionFixed),o=Jye(r.placement,s,e,t,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return e.setAttribute("x-placement",o),Dq(e,{position:r.positionFixed?"fixed":"absolute"}),r}function rGe(t,e){var r=t.offsets,n=r.popper,i=r.reference,s=Math.round,o=Math.floor,l=function(w){return w},c=s(i.width),u=s(n.width),d=["left","right"].indexOf(t.placement)!==-1,h=t.placement.indexOf("-")!==-1,f=c%2===u%2,m=c%2===1&&u%2===1,x=e?d||h||f?s:o:l,g=e?s:l;return{left:x(m&&!h&&e?n.left-1:n.left),top:g(n.top),bottom:g(n.bottom),right:x(n.right)}}var nGe=dI&&/Firefox/i.test(navigator.userAgent);function iGe(t,e){var r=e.x,n=e.y,i=t.offsets.popper,s=fI(t.instance.modifiers,function(E){return E.name==="applyStyle"}).gpuAcceleration;s!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=s!==void 0?s:e.gpuAcceleration,l=RA(t.instance.popper),c=Rq(l),u={position:i.position},d=rGe(t,window.devicePixelRatio<2||!nGe),h=r==="bottom"?"top":"bottom",f=n==="right"?"left":"right",m=fZ("transform"),x=void 0,g=void 0;if(h==="bottom"?l.nodeName==="HTML"?g=-l.clientHeight+d.bottom:g=-c.height+d.bottom:g=d.top,f==="right"?l.nodeName==="HTML"?x=-l.clientWidth+d.right:x=-c.width+d.right:x=d.left,o&&m)u[m]="translate3d("+x+"px, "+g+"px, 0)",u[h]=0,u[f]=0,u.willChange="transform";else{var y=h==="bottom"?-1:1,w=f==="right"?-1:1;u[h]=g*y,u[f]=x*w,u.willChange=h+", "+f}var S={"x-placement":t.placement};return t.attributes=Sm({},S,t.attributes),t.styles=Sm({},u,t.styles),t.arrowStyles=Sm({},t.offsets.arrow,t.arrowStyles),t}function obe(t,e,r){var n=fI(t,function(l){var c=l.name;return c===e}),i=!!n&&t.some(function(l){return l.name===r&&l.enabled&&l.order<n.order});if(!i){var s="`"+e+"`",o="`"+r+"`";console.warn(o+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return i}function sGe(t,e){var r;if(!obe(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if(typeof n=="string"){if(n=t.instance.popper.querySelector(n),!n)return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],s=t.offsets,o=s.popper,l=s.reference,c=["left","right"].indexOf(i)!==-1,u=c?"height":"width",d=c?"Top":"Left",h=d.toLowerCase(),f=c?"left":"top",m=c?"bottom":"right",x=tbe(n)[u];l[m]-x<o[h]&&(t.offsets.popper[h]-=o[h]-(l[m]-x)),l[h]+x>o[m]&&(t.offsets.popper[h]+=l[h]+x-o[m]),t.offsets.popper=Sb(t.offsets.popper);var g=l[h]+l[u]/2-x/2,y=hN(t.instance.popper),w=parseFloat(y["margin"+d]),S=parseFloat(y["border"+d+"Width"]),E=g-t.offsets.popper[h]-w-S;return E=Math.max(Math.min(o[u]-x,E),0),t.arrowElement=n,t.offsets.arrow=(r={},MA(r,h,Math.round(E)),MA(r,f,""),r),t}function aGe(t){return t==="end"?"start":t==="start"?"end":t}var lbe=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],P$=lbe.slice(3);function bse(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=P$.indexOf(t),n=P$.slice(r+1).concat(P$.slice(0,r));return e?n.reverse():n}var k$={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function oGe(t,e){if(ibe(t.instance.modifiers,"inner")||t.flipped&&t.placement===t.originalPlacement)return t;var r=hZ(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],i=l8(n),s=t.placement.split("-")[1]||"",o=[];switch(e.behavior){case k$.FLIP:o=[n,i];break;case k$.CLOCKWISE:o=bse(n);break;case k$.COUNTERCLOCKWISE:o=bse(n,!0);break;default:o=e.behavior}return o.forEach(function(l,c){if(n!==l||o.length===c+1)return t;n=t.placement.split("-")[0],i=l8(n);var u=t.offsets.popper,d=t.offsets.reference,h=Math.floor,f=n==="left"&&h(u.right)>h(d.left)||n==="right"&&h(u.left)<h(d.right)||n==="top"&&h(u.bottom)>h(d.top)||n==="bottom"&&h(u.top)<h(d.bottom),m=h(u.left)<h(r.left),x=h(u.right)>h(r.right),g=h(u.top)<h(r.top),y=h(u.bottom)>h(r.bottom),w=n==="left"&&m||n==="right"&&x||n==="top"&&g||n==="bottom"&&y,S=["top","bottom"].indexOf(n)!==-1,E=!!e.flipVariations&&(S&&s==="start"&&m||S&&s==="end"&&x||!S&&s==="start"&&g||!S&&s==="end"&&y),j=!!e.flipVariationsByContent&&(S&&s==="start"&&x||S&&s==="end"&&m||!S&&s==="start"&&y||!S&&s==="end"&&g),T=E||j;(f||w||T)&&(t.flipped=!0,(f||w)&&(n=o[c+1]),T&&(s=aGe(s)),t.placement=n+(s?"-"+s:""),t.offsets.popper=Sm({},t.offsets.popper,rbe(t.instance.popper,t.offsets.reference,t.placement)),t=nbe(t.instance.modifiers,t,"flip"))}),t}function lGe(t){var e=t.offsets,r=e.popper,n=e.reference,i=t.placement.split("-")[0],s=Math.floor,o=["top","bottom"].indexOf(i)!==-1,l=o?"right":"bottom",c=o?"left":"top",u=o?"width":"height";return r[l]<s(n[c])&&(t.offsets.popper[c]=s(n[c])-r[u]),r[c]>s(n[l])&&(t.offsets.popper[c]=s(n[l])),t}function cGe(t,e,r,n){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+i[1],o=i[2];if(!s)return t;if(o.indexOf("%")===0){var l=void 0;switch(o){case"%p":l=r;break;case"%":case"%r":default:l=n}var c=Sb(l);return c[e]/100*s}else if(o==="vh"||o==="vw"){var u=void 0;return o==="vh"?u=Math.max(document.documentElement.clientHeight,window.innerHeight||0):u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),u/100*s}else return s}function uGe(t,e,r,n){var i=[0,0],s=["right","left"].indexOf(n)!==-1,o=t.split(/(\+|\-)/).map(function(d){return d.trim()}),l=o.indexOf(fI(o,function(d){return d.search(/,|\s/)!==-1}));o[l]&&o[l].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=l!==-1?[o.slice(0,l).concat([o[l].split(c)[0]]),[o[l].split(c)[1]].concat(o.slice(l+1))]:[o];return u=u.map(function(d,h){var f=(h===1?!s:s)?"height":"width",m=!1;return d.reduce(function(x,g){return x[x.length-1]===""&&["+","-"].indexOf(g)!==-1?(x[x.length-1]=g,m=!0,x):m?(x[x.length-1]+=g,m=!1,x):x.concat(g)},[]).map(function(x){return cGe(x,f,e,r)})}),u.forEach(function(d,h){d.forEach(function(f,m){mZ(f)&&(i[h]+=f*(d[m-1]==="-"?-1:1))})}),i}function dGe(t,e){var r=e.offset,n=t.placement,i=t.offsets,s=i.popper,o=i.reference,l=n.split("-")[0],c=void 0;return mZ(+r)?c=[+r,0]:c=uGe(r,s,o,l),l==="left"?(s.top+=c[0],s.left-=c[1]):l==="right"?(s.top+=c[0],s.left+=c[1]):l==="top"?(s.left+=c[0],s.top-=c[1]):l==="bottom"&&(s.left+=c[0],s.top+=c[1]),t.popper=s,t}function hGe(t,e){var r=e.boundariesElement||RA(t.instance.popper);t.instance.reference===r&&(r=RA(r));var n=fZ("transform"),i=t.instance.popper.style,s=i.top,o=i.left,l=i[n];i.top="",i.left="",i[n]="";var c=hZ(t.instance.popper,t.instance.reference,e.padding,r,t.positionFixed);i.top=s,i.left=o,i[n]=l,e.boundaries=c;var u=e.priority,d=t.offsets.popper,h={primary:function(m){var x=d[m];return d[m]<c[m]&&!e.escapeWithReference&&(x=Math.max(d[m],c[m])),MA({},m,x)},secondary:function(m){var x=m==="right"?"left":"top",g=d[x];return d[m]>c[m]&&!e.escapeWithReference&&(g=Math.min(d[x],c[m]-(m==="right"?d.width:d.height))),MA({},x,g)}};return u.forEach(function(f){var m=["left","top"].indexOf(f)!==-1?"primary":"secondary";d=Sm({},d,h[m](f))}),t.offsets.popper=d,t}function fGe(t){var e=t.placement,r=e.split("-")[0],n=e.split("-")[1];if(n){var i=t.offsets,s=i.reference,o=i.popper,l=["bottom","top"].indexOf(r)!==-1,c=l?"left":"top",u=l?"width":"height",d={start:MA({},c,s[c]),end:MA({},c,s[c]+s[u]-o[u])};t.offsets.popper=Sm({},o,d[n])}return t}function mGe(t){if(!obe(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,r=fI(t.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(e.bottom<r.top||e.left>r.right||e.top>r.bottom||e.right<r.left){if(t.hide===!0)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(t.hide===!1)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}function pGe(t){var e=t.placement,r=e.split("-")[0],n=t.offsets,i=n.popper,s=n.reference,o=["left","right"].indexOf(r)!==-1,l=["top","left"].indexOf(r)===-1;return i[o?"left":"top"]=s[r]-(l?i[o?"width":"height"]:0),t.placement=l8(e),t.offsets.popper=Sb(i),t}var gGe={shift:{order:100,enabled:!0,fn:fGe},offset:{order:200,enabled:!0,fn:dGe,offset:0},preventOverflow:{order:300,enabled:!0,fn:hGe,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:lGe},arrow:{order:500,enabled:!0,fn:sGe,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:oGe,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:pGe},hide:{order:800,enabled:!0,fn:mGe},computeStyle:{order:850,enabled:!0,fn:iGe,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:eGe,onLoad:tGe,gpuAcceleration:void 0}},xGe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:gGe},G3=function(){function t(e,r){var n=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};zWe(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=BWe(this.update.bind(this)),this.options=Sm({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(Sm({},t.Defaults.modifiers,i.modifiers)).forEach(function(o){n.options.modifiers[o]=Sm({},t.Defaults.modifiers[o]||{},i.modifiers?i.modifiers[o]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(o){return Sm({name:o},n.options.modifiers[o])}).sort(function(o,l){return o.order-l.order}),this.modifiers.forEach(function(o){o.enabled&&Kye(o.onLoad)&&o.onLoad(n.reference,n.popper,n.options,o,n.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return VWe(t,[{key:"update",value:function(){return GWe.call(this)}},{key:"destroy",value:function(){return KWe.call(this)}},{key:"enableEventListeners",value:function(){return YWe.call(this)}},{key:"disableEventListeners",value:function(){return QWe.call(this)}}]),t}();G3.Utils=(typeof window<"u"?window:global).PopperUtils;G3.placements=lbe;G3.Defaults=xGe;var vGe=["innerHTML","ownerDocument","style","attributes","nodeValue"],yGe=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],bGe=["bigint","boolean","null","number","string","symbol","undefined"];function m7(t){var e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e))return"HTMLElement";if(wGe(e))return e}function u0(t){return function(e){return m7(e)===t}}function wGe(t){return yGe.includes(t)}function r5(t){return function(e){return typeof e===t}}function _Ge(t){return bGe.includes(t)}function Qt(t){if(t===null)return"null";switch(typeof t){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Qt.array(t))return"Array";if(Qt.plainFunction(t))return"Function";var e=m7(t);return e||"Object"}Qt.array=Array.isArray;Qt.arrayOf=function(t,e){return!Qt.array(t)&&!Qt.function(e)?!1:t.every(function(r){return e(r)})};Qt.asyncGeneratorFunction=function(t){return m7(t)==="AsyncGeneratorFunction"};Qt.asyncFunction=u0("AsyncFunction");Qt.bigint=r5("bigint");Qt.boolean=function(t){return t===!0||t===!1};Qt.date=u0("Date");Qt.defined=function(t){return!Qt.undefined(t)};Qt.domElement=function(t){return Qt.object(t)&&!Qt.plainObject(t)&&t.nodeType===1&&Qt.string(t.nodeName)&&vGe.every(function(e){return e in t})};Qt.empty=function(t){return Qt.string(t)&&t.length===0||Qt.array(t)&&t.length===0||Qt.object(t)&&!Qt.map(t)&&!Qt.set(t)&&Object.keys(t).length===0||Qt.set(t)&&t.size===0||Qt.map(t)&&t.size===0};Qt.error=u0("Error");Qt.function=r5("function");Qt.generator=function(t){return Qt.iterable(t)&&Qt.function(t.next)&&Qt.function(t.throw)};Qt.generatorFunction=u0("GeneratorFunction");Qt.instanceOf=function(t,e){return!t||!e?!1:Object.getPrototypeOf(t)===e.prototype};Qt.iterable=function(t){return!Qt.nullOrUndefined(t)&&Qt.function(t[Symbol.iterator])};Qt.map=u0("Map");Qt.nan=function(t){return Number.isNaN(t)};Qt.null=function(t){return t===null};Qt.nullOrUndefined=function(t){return Qt.null(t)||Qt.undefined(t)};Qt.number=function(t){return r5("number")(t)&&!Qt.nan(t)};Qt.numericString=function(t){return Qt.string(t)&&t.length>0&&!Number.isNaN(Number(t))};Qt.object=function(t){return!Qt.nullOrUndefined(t)&&(Qt.function(t)||typeof t=="object")};Qt.oneOf=function(t,e){return Qt.array(t)?t.indexOf(e)>-1:!1};Qt.plainFunction=u0("Function");Qt.plainObject=function(t){if(m7(t)!=="Object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};Qt.primitive=function(t){return Qt.null(t)||_Ge(typeof t)};Qt.promise=u0("Promise");Qt.propertyOf=function(t,e,r){if(!Qt.object(t)||!e)return!1;var n=t[e];return Qt.function(r)?r(n):Qt.defined(n)};Qt.regexp=u0("RegExp");Qt.set=u0("Set");Qt.string=r5("string");Qt.symbol=r5("symbol");Qt.undefined=r5("undefined");Qt.weakMap=u0("WeakMap");Qt.weakSet=u0("WeakSet");function cbe(t){return function(e){return typeof e===t}}var NGe=cbe("function"),SGe=function(t){return t===null},wse=function(t){return Object.prototype.toString.call(t).slice(8,-1)==="RegExp"},_se=function(t){return!EGe(t)&&!SGe(t)&&(NGe(t)||typeof t=="object")},EGe=cbe("undefined"),Mq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function jGe(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=r;n--!==0;)if(!lh(t[n],e[n]))return!1;return!0}function AGe(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=new DataView(t.buffer),n=new DataView(e.buffer),i=t.byteLength;i--;)if(r.getUint8(i)!==n.getUint8(i))return!1;return!0}function CGe(t,e){var r,n,i,s;if(t.size!==e.size)return!1;try{for(var o=Mq(t.entries()),l=o.next();!l.done;l=o.next()){var c=l.value;if(!e.has(c[0]))return!1}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}try{for(var u=Mq(t.entries()),d=u.next();!d.done;d=u.next()){var c=d.value;if(!lh(c[1],e.get(c[0])))return!1}}catch(h){i={error:h}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return!0}function TGe(t,e){var r,n;if(t.size!==e.size)return!1;try{for(var i=Mq(t.entries()),s=i.next();!s.done;s=i.next()){var o=s.value;if(!e.has(o[0]))return!1}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!0}function lh(t,e){if(t===e)return!0;if(t&&_se(t)&&e&&_se(e)){if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)&&Array.isArray(e))return jGe(t,e);if(t instanceof Map&&e instanceof Map)return CGe(t,e);if(t instanceof Set&&e instanceof Set)return TGe(t,e);if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return AGe(t,e);if(wse(t)&&wse(e))return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var i=r.length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(var i=r.length;i--!==0;){var s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!lh(t[s],e[s]))return!1}return!0}return Number.isNaN(t)&&Number.isNaN(e)?!0:t===e}function PGe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every(function(r){return Qt.string(r)||Qt.array(r)||Qt.plainObject(r)})}function kGe(t,e,r){return ube(t,e)?[t,e].every(Qt.array)?!t.some(Ase(r))&&e.some(Ase(r)):[t,e].every(Qt.plainObject)?!Object.entries(t).some(jse(r))&&Object.entries(e).some(jse(r)):e===r:!1}function Nse(t,e,r){var n=r.actual,i=r.key,s=r.previous,o=r.type,l=mg(t,i),c=mg(e,i),u=[l,c].every(Qt.number)&&(o==="increased"?l<c:l>c);return Qt.undefined(n)||(u=u&&c===n),Qt.undefined(s)||(u=u&&l===s),u}function Sse(t,e,r){var n=r.key,i=r.type,s=r.value,o=mg(t,n),l=mg(e,n),c=i==="added"?o:l,u=i==="added"?l:o;if(!Qt.nullOrUndefined(s)){if(Qt.defined(c)){if(Qt.array(c)||Qt.plainObject(c))return kGe(c,u,s)}else return lh(u,s);return!1}return[o,l].every(Qt.array)?!u.every(pZ(c)):[o,l].every(Qt.plainObject)?OGe(Object.keys(c),Object.keys(u)):![o,l].every(function(d){return Qt.primitive(d)&&Qt.defined(d)})&&(i==="added"?!Qt.defined(o)&&Qt.defined(l):Qt.defined(o)&&!Qt.defined(l))}function Ese(t,e,r){var n=r===void 0?{}:r,i=n.key,s=mg(t,i),o=mg(e,i);if(!ube(s,o))throw new TypeError("Inputs have different types");if(!PGe(s,o))throw new TypeError("Inputs don't have length");return[s,o].every(Qt.plainObject)&&(s=Object.keys(s),o=Object.keys(o)),[s,o]}function jse(t){return function(e){var r=e[0],n=e[1];return Qt.array(t)?lh(t,n)||t.some(function(i){return lh(i,n)||Qt.array(n)&&pZ(n)(i)}):Qt.plainObject(t)&&t[r]?!!t[r]&&lh(t[r],n):lh(t,n)}}function OGe(t,e){return e.some(function(r){return!t.includes(r)})}function Ase(t){return function(e){return Qt.array(t)?t.some(function(r){return lh(r,e)||Qt.array(e)&&pZ(e)(r)}):lh(t,e)}}function J5(t,e){return Qt.array(t)?t.some(function(r){return lh(r,e)}):lh(t,e)}function pZ(t){return function(e){return t.some(function(r){return lh(r,e)})}}function ube(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every(Qt.array)||t.every(Qt.number)||t.every(Qt.plainObject)||t.every(Qt.string)}function mg(t,e){if(Qt.plainObject(t)||Qt.array(t)){if(Qt.string(e)){var r=e.split(".");return r.reduce(function(n,i){return n&&n[i]},t)}return Qt.number(e)?t[e]:t}return t}function IGe(t,e){if([t,e].some(Qt.nullOrUndefined))throw new Error("Missing required parameters");if(![t,e].every(function(h){return Qt.plainObject(h)||Qt.array(h)}))throw new Error("Expected plain objects or array");var r=function(h,f){try{return Sse(t,e,{key:h,type:"added",value:f})}catch{return!1}},n=function(h,f,m){try{var x=mg(t,h),g=mg(e,h),y=Qt.defined(f),w=Qt.defined(m);if(y||w){var S=w?J5(m,x):!J5(f,x),E=J5(f,g);return S&&E}return[x,g].every(Qt.array)||[x,g].every(Qt.plainObject)?!lh(x,g):x!==g}catch{return!1}},i=function(h,f,m){if(!Qt.defined(h))return!1;try{var x=mg(t,h),g=mg(e,h),y=Qt.defined(m);return J5(f,x)&&(y?J5(m,g):!y)}catch{return!1}},s=function(h,f){return Qt.defined(h)?n(h,f):!1},o=function(h,f,m){if(!Qt.defined(h))return!1;try{return Nse(t,e,{key:h,actual:f,previous:m,type:"decreased"})}catch{return!1}},l=function(h){try{var f=Ese(t,e,{key:h}),m=f[0],x=f[1];return!!m.length&&!x.length}catch{return!1}},c=function(h){try{var f=Ese(t,e,{key:h}),m=f[0],x=f[1];return!m.length&&!!x.length}catch{return!1}},u=function(h,f,m){if(!Qt.defined(h))return!1;try{return Nse(t,e,{key:h,actual:f,previous:m,type:"increased"})}catch{return!1}},d=function(h,f){try{return Sse(t,e,{key:h,type:"removed",value:f})}catch{return!1}};return{added:r,changed:n,changedFrom:i,changedTo:s,decreased:o,emptied:l,filled:c,increased:u,removed:d}}function Cse(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ha(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cse(Object(r),!0).forEach(function(n){Du(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cse(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RGe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hbe(n.key),n)}}function pI(t,e,r){return e&&RGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Du(t,e,r){return e=hbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lq(t,e)}function c8(t){return c8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c8(t)}function Lq(t,e){return Lq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Lq(t,e)}function DGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function MGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function dbe(t,e){if(t==null)return{};var r=MGe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nx(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LGe(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nx(t)}function xI(t){var e=DGe();return function(){var n=c8(t),i;if(e){var s=c8(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return LGe(this,i)}}function FGe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hbe(t){var e=FGe(t,"string");return typeof e=="symbol"?e:String(e)}var BGe={flip:{padding:20},preventOverflow:{padding:10}},$Ge="The typeValidator argument must be a function with the signature function(props, propName, componentName).",UGe="The error message is optional, but must be a string if provided.";function zGe(t,e,r,n){return typeof t=="boolean"?t:typeof t=="function"?t(e,r,n):t?!!t:!1}function VGe(t,e){return Object.hasOwnProperty.call(t,e)}function qGe(t,e,r,n){return new Error("Required ".concat(t[e]," `").concat(e,"` was not specified in `").concat(r,"`."))}function HGe(t,e){if(typeof t!="function")throw new TypeError($Ge);if(e&&typeof e!="string")throw new TypeError(UGe)}function Tse(t,e,r){return HGe(t,r),function(n,i,s){for(var o=arguments.length,l=new Array(o>3?o-3:0),c=3;c<o;c++)l[c-3]=arguments[c];return zGe(e,n,i,s)?VGe(n,i)?t.apply(void 0,[n,i,s].concat(l)):qGe(n,i,s):t.apply(void 0,[n,i,s].concat(l))}}var es={INIT:"init",IDLE:"idle",OPENING:"opening",OPEN:"open",CLOSING:"closing",ERROR:"error"},eT=hE.createPortal!==void 0;function tg(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function O$(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function GR(t){var e=t.title,r=t.data,n=t.warn,i=n===void 0?!1:n,s=t.debug,o=s===void 0?!1:s,l=i?console.warn||console.error:console.log;o&&e&&r&&(console.groupCollapsed("%creact-floater: ".concat(e),"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(r)?r.forEach(function(c){Qt.plainObject(c)&&c.key?l.apply(console,[c.key,c.value]):l.apply(console,[c])}):l.apply(console,[r]),console.groupEnd())}function WGe(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;t.addEventListener(e,r,n)}function GGe(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;t.removeEventListener(e,r,n)}function KGe(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i;i=function(o){r(o),GGe(t,e,i)},WGe(t,e,i,n)}function Pse(){}var fbe=function(t){gI(r,t);var e=xI(r);function r(){return mI(this,r),e.apply(this,arguments)}return pI(r,[{key:"componentDidMount",value:function(){tg()&&(this.node||this.appendNode(),eT||this.renderPortal())}},{key:"componentDidUpdate",value:function(){tg()&&(eT||this.renderPortal())}},{key:"componentWillUnmount",value:function(){!tg()||!this.node||(eT||hE.unmountComponentAtNode(this.node),this.node&&this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=void 0))}},{key:"appendNode",value:function(){var i=this.props,s=i.id,o=i.zIndex;this.node||(this.node=document.createElement("div"),s&&(this.node.id=s),o&&(this.node.style.zIndex=o),document.body.appendChild(this.node))}},{key:"renderPortal",value:function(){if(!tg())return null;var i=this.props,s=i.children,o=i.setRef;if(this.node||this.appendNode(),eT)return hE.createPortal(s,this.node);var l=hE.unstable_renderSubtreeIntoContainer(this,s.length>1?be.createElement("div",null,s):s[0],this.node);return o(l),null}},{key:"renderReact16",value:function(){var i=this.props,s=i.hasChildren,o=i.placement,l=i.target;return s?this.renderPortal():l||o==="center"?this.renderPortal():null}},{key:"render",value:function(){return eT?this.renderReact16():null}}]),r}(be.Component);Du(fbe,"propTypes",{children:dr.oneOfType([dr.element,dr.array]),hasChildren:dr.bool,id:dr.oneOfType([dr.string,dr.number]),placement:dr.string,setRef:dr.func.isRequired,target:dr.oneOfType([dr.object,dr.string]),zIndex:dr.number});var mbe=function(t){gI(r,t);var e=xI(r);function r(){return mI(this,r),e.apply(this,arguments)}return pI(r,[{key:"parentStyle",get:function(){var i=this.props,s=i.placement,o=i.styles,l=o.arrow.length,c={pointerEvents:"none",position:"absolute",width:"100%"};return s.startsWith("top")?(c.bottom=0,c.left=0,c.right=0,c.height=l):s.startsWith("bottom")?(c.left=0,c.right=0,c.top=0,c.height=l):s.startsWith("left")?(c.right=0,c.top=0,c.bottom=0):s.startsWith("right")&&(c.left=0,c.top=0),c}},{key:"render",value:function(){var i=this.props,s=i.placement,o=i.setArrowRef,l=i.styles,c=l.arrow,u=c.color,d=c.display,h=c.length,f=c.margin,m=c.position,x=c.spread,g={display:d,position:m},y,w=x,S=h;return s.startsWith("top")?(y="0,0 ".concat(w/2,",").concat(S," ").concat(w,",0"),g.bottom=0,g.marginLeft=f,g.marginRight=f):s.startsWith("bottom")?(y="".concat(w,",").concat(S," ").concat(w/2,",0 0,").concat(S),g.top=0,g.marginLeft=f,g.marginRight=f):s.startsWith("left")?(S=x,w=h,y="0,0 ".concat(w,",").concat(S/2," 0,").concat(S),g.right=0,g.marginTop=f,g.marginBottom=f):s.startsWith("right")&&(S=x,w=h,y="".concat(w,",").concat(S," ").concat(w,",0 0,").concat(S/2),g.left=0,g.marginTop=f,g.marginBottom=f),be.createElement("div",{className:"__floater__arrow",style:this.parentStyle},be.createElement("span",{ref:o,style:g},be.createElement("svg",{width:w,height:S,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},be.createElement("polygon",{points:y,fill:u}))))}}]),r}(be.Component);Du(mbe,"propTypes",{placement:dr.string.isRequired,setArrowRef:dr.func.isRequired,styles:dr.object.isRequired});var XGe=["color","height","width"];function pbe(t){var e=t.handleClick,r=t.styles,n=r.color,i=r.height,s=r.width,o=dbe(r,XGe);return be.createElement("button",{"aria-label":"close",onClick:e,style:o,type:"button"},be.createElement("svg",{width:"".concat(s,"px"),height:"".concat(i,"px"),viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},be.createElement("g",null,be.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:n}))))}pbe.propTypes={handleClick:dr.func.isRequired,styles:dr.object.isRequired};function gbe(t){var e=t.content,r=t.footer,n=t.handleClick,i=t.open,s=t.positionWrapper,o=t.showCloseButton,l=t.title,c=t.styles,u={content:be.isValidElement(e)?e:be.createElement("div",{className:"__floater__content",style:c.content},e)};return l&&(u.title=be.isValidElement(l)?l:be.createElement("div",{className:"__floater__title",style:c.title},l)),r&&(u.footer=be.isValidElement(r)?r:be.createElement("div",{className:"__floater__footer",style:c.footer},r)),(o||s)&&!Qt.boolean(i)&&(u.close=be.createElement(pbe,{styles:c.close,handleClick:n})),be.createElement("div",{className:"__floater__container",style:c.container},u.close,u.title,u.content,u.footer)}gbe.propTypes={content:dr.node.isRequired,footer:dr.node,handleClick:dr.func.isRequired,open:dr.bool,positionWrapper:dr.bool.isRequired,showCloseButton:dr.bool.isRequired,styles:dr.object.isRequired,title:dr.node};var xbe=function(t){gI(r,t);var e=xI(r);function r(){return mI(this,r),e.apply(this,arguments)}return pI(r,[{key:"style",get:function(){var i=this.props,s=i.disableAnimation,o=i.component,l=i.placement,c=i.hideArrow,u=i.status,d=i.styles,h=d.arrow.length,f=d.floater,m=d.floaterCentered,x=d.floaterClosing,g=d.floaterOpening,y=d.floaterWithAnimation,w=d.floaterWithComponent,S={};return c||(l.startsWith("top")?S.padding="0 0 ".concat(h,"px"):l.startsWith("bottom")?S.padding="".concat(h,"px 0 0"):l.startsWith("left")?S.padding="0 ".concat(h,"px 0 0"):l.startsWith("right")&&(S.padding="0 0 0 ".concat(h,"px"))),[es.OPENING,es.OPEN].indexOf(u)!==-1&&(S=Ha(Ha({},S),g)),u===es.CLOSING&&(S=Ha(Ha({},S),x)),u===es.OPEN&&!s&&(S=Ha(Ha({},S),y)),l==="center"&&(S=Ha(Ha({},S),m)),o&&(S=Ha(Ha({},S),w)),Ha(Ha({},f),S)}},{key:"render",value:function(){var i=this.props,s=i.component,o=i.handleClick,l=i.hideArrow,c=i.setFloaterRef,u=i.status,d={},h=["__floater"];return s?be.isValidElement(s)?d.content=be.cloneElement(s,{closeFn:o}):d.content=s({closeFn:o}):d.content=be.createElement(gbe,this.props),u===es.OPEN&&h.push("__floater__open"),l||(d.arrow=be.createElement(mbe,this.props)),be.createElement("div",{ref:c,className:h.join(" "),style:this.style},be.createElement("div",{className:"__floater__body"},d.content,d.arrow))}}]),r}(be.Component);Du(xbe,"propTypes",{component:dr.oneOfType([dr.func,dr.element]),content:dr.node,disableAnimation:dr.bool.isRequired,footer:dr.node,handleClick:dr.func.isRequired,hideArrow:dr.bool.isRequired,open:dr.bool,placement:dr.string.isRequired,positionWrapper:dr.bool.isRequired,setArrowRef:dr.func.isRequired,setFloaterRef:dr.func.isRequired,showCloseButton:dr.bool,status:dr.string.isRequired,styles:dr.object.isRequired,title:dr.node});var vbe=function(t){gI(r,t);var e=xI(r);function r(){return mI(this,r),e.apply(this,arguments)}return pI(r,[{key:"render",value:function(){var i=this.props,s=i.children,o=i.handleClick,l=i.handleMouseEnter,c=i.handleMouseLeave,u=i.setChildRef,d=i.setWrapperRef,h=i.style,f=i.styles,m;if(s)if(be.Children.count(s)===1)if(!be.isValidElement(s))m=be.createElement("span",null,s);else{var x=Qt.function(s.type)?"innerRef":"ref";m=be.cloneElement(be.Children.only(s),Du({},x,u))}else m=s;return m?be.createElement("span",{ref:d,style:Ha(Ha({},f),h),onClick:o,onMouseEnter:l,onMouseLeave:c},m):null}}]),r}(be.Component);Du(vbe,"propTypes",{children:dr.node,handleClick:dr.func.isRequired,handleMouseEnter:dr.func.isRequired,handleMouseLeave:dr.func.isRequired,setChildRef:dr.func.isRequired,setWrapperRef:dr.func.isRequired,style:dr.object,styles:dr.object.isRequired});var YGe={zIndex:100};function ZGe(t){var e=$p(YGe,t.options||{});return{wrapper:{cursor:"help",display:"inline-flex",flexDirection:"column",zIndex:e.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:e.zIndex},floaterOpening:{opacity:1,visibility:"visible"},floaterWithAnimation:{opacity:1,transition:"opacity 0.3s, transform 0.2s",visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},floaterClosing:{opacity:0,visibility:"visible"},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},arrow:{color:"#fff",display:"inline-flex",length:16,margin:8,position:"absolute",spread:32},options:e}}var QGe=["arrow","flip","offset"],JGe=["position","top","right","bottom","left"],gZ=function(t){gI(r,t);var e=xI(r);function r(n){var i;return mI(this,r),i=e.call(this,n),Du(nx(i),"setArrowRef",function(s){i.arrowRef=s}),Du(nx(i),"setChildRef",function(s){i.childRef=s}),Du(nx(i),"setFloaterRef",function(s){i.floaterRef=s}),Du(nx(i),"setWrapperRef",function(s){i.wrapperRef=s}),Du(nx(i),"handleTransitionEnd",function(){var s=i.state.status,o=i.props.callback;i.wrapperPopper&&i.wrapperPopper.instance.update(),i.setState({status:s===es.OPENING?es.OPEN:es.IDLE},function(){var l=i.state.status;o(l===es.OPEN?"open":"close",i.props)})}),Du(nx(i),"handleClick",function(){var s=i.props,o=s.event,l=s.open;if(!Qt.boolean(l)){var c=i.state,u=c.positionWrapper,d=c.status;(i.event==="click"||i.event==="hover"&&u)&&(GR({title:"click",data:[{event:o,status:d===es.OPEN?"closing":"opening"}],debug:i.debug}),i.toggle())}}),Du(nx(i),"handleMouseEnter",function(){var s=i.props,o=s.event,l=s.open;if(!(Qt.boolean(l)||O$())){var c=i.state.status;i.event==="hover"&&c===es.IDLE&&(GR({title:"mouseEnter",data:[{key:"originalEvent",value:o}],debug:i.debug}),clearTimeout(i.eventDelayTimeout),i.toggle())}}),Du(nx(i),"handleMouseLeave",function(){var s=i.props,o=s.event,l=s.eventDelay,c=s.open;if(!(Qt.boolean(c)||O$())){var u=i.state,d=u.status,h=u.positionWrapper;i.event==="hover"&&(GR({title:"mouseLeave",data:[{key:"originalEvent",value:o}],debug:i.debug}),l?[es.OPENING,es.OPEN].indexOf(d)!==-1&&!h&&!i.eventDelayTimeout&&(i.eventDelayTimeout=setTimeout(function(){delete i.eventDelayTimeout,i.toggle()},l*1e3)):i.toggle(es.IDLE))}}),i.state={currentPlacement:n.placement,needsUpdate:!1,positionWrapper:n.wrapperOptions.position&&!!n.target,status:es.INIT,statusWrapper:es.INIT},i._isMounted=!1,i.hasMounted=!1,tg()&&window.addEventListener("load",function(){i.popper&&i.popper.instance.update(),i.wrapperPopper&&i.wrapperPopper.instance.update()}),i}return pI(r,[{key:"componentDidMount",value:function(){if(tg()){var i=this.state.positionWrapper,s=this.props,o=s.children,l=s.open,c=s.target;this._isMounted=!0,GR({title:"init",data:{hasChildren:!!o,hasTarget:!!c,isControlled:Qt.boolean(l),positionWrapper:i,target:this.target,floater:this.floaterRef},debug:this.debug}),this.hasMounted||(this.initPopper(),this.hasMounted=!0),!o&&c&&Qt.boolean(l)}}},{key:"componentDidUpdate",value:function(i,s){if(tg()){var o=this.props,l=o.autoOpen,c=o.open,u=o.target,d=o.wrapperOptions,h=IGe(s,this.state),f=h.changedFrom,m=h.changed;if(i.open!==c){var x;Qt.boolean(c)&&(x=c?es.OPENING:es.CLOSING),this.toggle(x)}(i.wrapperOptions.position!==d.position||i.target!==u)&&this.changeWrapperPosition(this.props),m("status",es.IDLE)&&c?this.toggle(es.OPEN):f("status",es.INIT,es.IDLE)&&l&&this.toggle(es.OPEN),this.popper&&m("status",es.OPENING)&&this.popper.instance.update(),this.floaterRef&&(m("status",es.OPENING)||m("status",es.CLOSING))&&KGe(this.floaterRef,"transitionend",this.handleTransitionEnd),m("needsUpdate",!0)&&this.rebuildPopper()}}},{key:"componentWillUnmount",value:function(){tg()&&(this._isMounted=!1,this.popper&&this.popper.instance.destroy(),this.wrapperPopper&&this.wrapperPopper.instance.destroy())}},{key:"initPopper",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.target,o=this.state.positionWrapper,l=this.props,c=l.disableFlip,u=l.getPopper,d=l.hideArrow,h=l.offset,f=l.placement,m=l.wrapperOptions,x=f==="top"||f==="bottom"?"flip":["right","bottom-end","top-end","left","top-start","bottom-start"];if(f==="center")this.setState({status:es.IDLE});else if(s&&this.floaterRef){var g=this.options,y=g.arrow,w=g.flip,S=g.offset,E=dbe(g,QGe);new G3(s,this.floaterRef,{placement:f,modifiers:Ha({arrow:Ha({enabled:!d,element:this.arrowRef},y),flip:Ha({enabled:!c,behavior:x},w),offset:Ha({offset:"0, ".concat(h,"px")},S)},E),onCreate:function(O){var I;if(i.popper=O,!((I=i.floaterRef)!==null&&I!==void 0&&I.isConnected)){i.setState({needsUpdate:!0});return}u(O,"floater"),i._isMounted&&i.setState({currentPlacement:O.placement,status:es.IDLE}),f!==O.placement&&setTimeout(function(){O.instance.update()},1)},onUpdate:function(O){i.popper=O;var I=i.state.currentPlacement;i._isMounted&&O.placement!==I&&i.setState({currentPlacement:O.placement})}})}if(o){var j=Qt.undefined(m.offset)?0:m.offset;new G3(this.target,this.wrapperRef,{placement:m.placement||f,modifiers:{arrow:{enabled:!1},offset:{offset:"0, ".concat(j,"px")},flip:{enabled:!1}},onCreate:function(O){i.wrapperPopper=O,i._isMounted&&i.setState({statusWrapper:es.IDLE}),u(O,"wrapper"),f!==O.placement&&setTimeout(function(){O.instance.update()},1)}})}}},{key:"rebuildPopper",value:function(){var i=this;this.floaterRefInterval=setInterval(function(){var s;(s=i.floaterRef)!==null&&s!==void 0&&s.isConnected&&(clearInterval(i.floaterRefInterval),i.setState({needsUpdate:!1}),i.initPopper())},50)}},{key:"changeWrapperPosition",value:function(i){var s=i.target,o=i.wrapperOptions;this.setState({positionWrapper:o.position&&!!s})}},{key:"toggle",value:function(i){var s=this.state.status,o=s===es.OPEN?es.CLOSING:es.OPENING;Qt.undefined(i)||(o=i),this.setState({status:o})}},{key:"debug",get:function(){var i=this.props.debug;return i||tg()&&"ReactFloaterDebug"in window&&!!window.ReactFloaterDebug}},{key:"event",get:function(){var i=this.props,s=i.disableHoverToClick,o=i.event;return o==="hover"&&O$()&&!s?"click":o}},{key:"options",get:function(){var i=this.props.options;return $p(BGe,i||{})}},{key:"styles",get:function(){var i=this,s=this.state,o=s.status,l=s.positionWrapper,c=s.statusWrapper,u=this.props.styles,d=$p(ZGe(u),u);if(l){var h;[es.IDLE].indexOf(o)===-1||[es.IDLE].indexOf(c)===-1?h=d.wrapperPosition:h=this.wrapperPopper.styles,d.wrapper=Ha(Ha({},d.wrapper),h)}if(this.target){var f=window.getComputedStyle(this.target);this.wrapperStyles?d.wrapper=Ha(Ha({},d.wrapper),this.wrapperStyles):["relative","static"].indexOf(f.position)===-1&&(this.wrapperStyles={},l||(JGe.forEach(function(m){i.wrapperStyles[m]=f[m]}),d.wrapper=Ha(Ha({},d.wrapper),this.wrapperStyles),this.target.style.position="relative",this.target.style.top="auto",this.target.style.right="auto",this.target.style.bottom="auto",this.target.style.left="auto"))}return d}},{key:"target",get:function(){if(!tg())return null;var i=this.props.target;return i?Qt.domElement(i)?i:document.querySelector(i):this.childRef||this.wrapperRef}},{key:"render",value:function(){var i=this.state,s=i.currentPlacement,o=i.positionWrapper,l=i.status,c=this.props,u=c.children,d=c.component,h=c.content,f=c.disableAnimation,m=c.footer,x=c.hideArrow,g=c.id,y=c.open,w=c.showCloseButton,S=c.style,E=c.target,j=c.title,T=be.createElement(vbe,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:S,styles:this.styles.wrapper},u),O={};return o?O.wrapperInPortal=T:O.wrapperAsChildren=T,be.createElement("span",null,be.createElement(fbe,{hasChildren:!!u,id:g,placement:s,setRef:this.setFloaterRef,target:E,zIndex:this.styles.options.zIndex},be.createElement(xbe,{component:d,content:h,disableAnimation:f,footer:m,handleClick:this.handleClick,hideArrow:x||s==="center",open:y,placement:s,positionWrapper:o,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:w,status:l,styles:this.styles,title:j}),O.wrapperInPortal),O.wrapperAsChildren)}}]),r}(be.Component);Du(gZ,"propTypes",{autoOpen:dr.bool,callback:dr.func,children:dr.node,component:Tse(dr.oneOfType([dr.func,dr.element]),function(t){return!t.content}),content:Tse(dr.node,function(t){return!t.component}),debug:dr.bool,disableAnimation:dr.bool,disableFlip:dr.bool,disableHoverToClick:dr.bool,event:dr.oneOf(["hover","click"]),eventDelay:dr.number,footer:dr.node,getPopper:dr.func,hideArrow:dr.bool,id:dr.oneOfType([dr.string,dr.number]),offset:dr.number,open:dr.bool,options:dr.object,placement:dr.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto","center"]),showCloseButton:dr.bool,style:dr.object,styles:dr.object,target:dr.oneOfType([dr.object,dr.string]),title:dr.node,wrapperOptions:dr.shape({offset:dr.number,placement:dr.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto"]),position:dr.bool})});Du(gZ,"defaultProps",{autoOpen:!1,callback:Pse,debug:!1,disableAnimation:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,getPopper:Pse,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1}});var eKe=Object.defineProperty,tKe=(t,e,r)=>e in t?eKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mn=(t,e,r)=>tKe(t,typeof e!="symbol"?e+"":e,r),js={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},Op={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found",ERROR:"error"},pi={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},Fi={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"};function E1(){var t;return!!(typeof window<"u"&&((t=window.document)!=null&&t.createElement))}function ybe(t){return t?t.getBoundingClientRect():null}function rKe(t=!1){const{body:e,documentElement:r}=document;if(!e||!r)return 0;if(t){const n=[e.scrollHeight,e.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight].sort((s,o)=>s-o),i=Math.floor(n.length/2);return n.length%2===0?(n[i-1]+n[i])/2:n[i]}return Math.max(e.scrollHeight,e.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)}function nv(t){if(typeof t=="string")try{return document.querySelector(t)}catch{return null}return t}function nKe(t){return!t||t.nodeType!==1?null:getComputedStyle(t)}function K3(t,e,r){if(!t)return $w();const n=Vye(t);if(n){if(n.isSameNode($w()))return r?document:$w();if(!(n.scrollHeight>n.offsetHeight)&&!e)return n.style.overflow="initial",$w()}return n}function p7(t,e){if(!t)return!1;const r=K3(t,e);return r?!r.isSameNode($w()):!1}function iKe(t){return t.offsetParent!==document.body}function LA(t,e="fixed"){if(!t||!(t instanceof HTMLElement))return!1;const{nodeName:r}=t,n=nKe(t);return r==="BODY"||r==="HTML"?!1:n&&n.position===e?!0:t.parentNode?LA(t.parentNode,e):!1}function sKe(t){var e;if(!t)return!1;let r=t;for(;r&&r!==document.body;){if(r instanceof HTMLElement){const{display:n,visibility:i}=getComputedStyle(r);if(n==="none"||i==="hidden")return!1}r=(e=r.parentElement)!=null?e:null}return!0}function aKe(t,e,r){var n,i,s;const o=ybe(t),l=K3(t,r),c=p7(t,r),u=LA(t);let d=0,h=(n=o==null?void 0:o.top)!=null?n:0;if(c&&u){const f=(i=t==null?void 0:t.offsetTop)!=null?i:0,m=(s=l==null?void 0:l.scrollTop)!=null?s:0;h=f-m}else l instanceof HTMLElement&&(d=l.scrollTop,!c&&!LA(t)&&(h+=d),l.isSameNode($w())||(h+=$w().scrollTop));return Math.floor(h-e)}function oKe(t,e,r){var n;if(!t)return 0;const{offsetTop:i=0,scrollTop:s=0}=(n=Vye(t))!=null?n:{};let o=t.getBoundingClientRect().top+s;i&&(p7(t,r)||iKe(t))&&(o-=i);const l=Math.floor(o-e);return l<0?0:l}function $w(){var t;return(t=document.scrollingElement)!=null?t:document.documentElement}function lKe(t,e){const{duration:r,element:n}=e;return new Promise((i,s)=>{const{scrollTop:o}=n,l=t>o?t-o:o-t;dWe.top(n,t,{duration:l<100?50:r},c=>c&&c.message!=="Element already at target scroll position"?s(c):i())})}var tT=Hp.createPortal!==void 0;function bbe(t=navigator.userAgent){let e=t;return typeof window>"u"?e="node":document.documentMode?e="ie":/Edge/.test(t)?e="edge":window.opera||t.includes(" OPR/")?e="opera":typeof window.InstallTrigger<"u"?e="firefox":window.chrome?e="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(t)&&(e="safari"),e}function v6(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function rg(t,e={}){const{defaultValue:r,step:n,steps:i}=e;let s=mse(t);if(s)(s.includes("{step}")||s.includes("{steps}"))&&n&&i&&(s=s.replace("{step}",n.toString()).replace("{steps}",i.toString()));else if(C.isValidElement(t)&&!Object.values(t.props).length&&v6(t.type)==="function"){const o=t.type({});s=rg(o,e)}else s=mse(r);return s}function cKe(t,e){return!fn.plainObject(t)||!fn.array(e)?!1:Object.keys(t).every(r=>e.includes(r))}function uKe(t){const e=/^#?([\da-f])([\da-f])([\da-f])$/i,r=t.replace(e,(i,s,o,l)=>s+s+o+o+l+l),n=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(r);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}function kse(t){return t.disableBeacon||t.placement==="center"}function Ose(){return!["chrome","safari","firefox","opera"].includes(bbe())}function q_({data:t,debug:e=!1,title:r,warn:n=!1}){const i=n?console.warn||console.error:console.log;e&&(r&&t?(console.groupCollapsed(`%creact-joyride: ${r}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(t)?t.forEach(s=>{fn.plainObject(s)&&s.key?i.apply(console,[s.key,s.value]):i.apply(console,[s])}):i.apply(console,[t]),console.groupEnd()):console.error("Missing title or data props"))}function dKe(t){return Object.keys(t)}function wbe(t,...e){if(!fn.plainObject(t))throw new TypeError("Expected an object");const r={};for(const n in t)({}).hasOwnProperty.call(t,n)&&(e.includes(n)||(r[n]=t[n]));return r}function hKe(t,...e){if(!fn.plainObject(t))throw new TypeError("Expected an object");if(!e.length)return t;const r={};for(const n in t)({}).hasOwnProperty.call(t,n)&&e.includes(n)&&(r[n]=t[n]);return r}function Fq(t,e,r){const n=s=>s.replace("{step}",String(e)).replace("{steps}",String(r));if(v6(t)==="string")return n(t);if(!C.isValidElement(t))return t;const{children:i}=t.props;if(v6(i)==="string"&&i.includes("{step}"))return C.cloneElement(t,{children:n(i)});if(Array.isArray(i))return C.cloneElement(t,{children:i.map(s=>typeof s=="string"?n(s):Fq(s,e,r))});if(v6(t.type)==="function"&&!Object.values(t.props).length){const s=t.type({});return Fq(s,e,r)}return t}function fKe(t){const{isFirstStep:e,lifecycle:r,previousLifecycle:n,scrollToFirstStep:i,step:s,target:o}=t;return!s.disableScrolling&&(!e||i||r===pi.TOOLTIP)&&s.placement!=="center"&&(!s.isFixed||!LA(o))&&n!==r&&[pi.BEACON,pi.TOOLTIP].includes(r)}var mKe={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},_be={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},pKe={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:_be,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},gKe={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},xKe={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},rT={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},Ise={borderRadius:4,position:"absolute"};function vKe(t,e){var r,n,i,s,o;const{floaterProps:l,styles:c}=t,u=$p((r=e.floaterProps)!=null?r:{},l??{}),d=$p(c??{},(n=e.styles)!=null?n:{}),h=$p(xKe,d.options||{}),f=e.placement==="center"||e.disableBeacon;let{width:m}=h;window.innerWidth>480&&(m=380),"width"in h&&(m=typeof h.width=="number"&&window.innerWidth<h.width?window.innerWidth-30:h.width);const x={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:h.zIndex},g={beacon:{...rT,display:f?"none":"inline-block",height:h.beaconSize,position:"relative",width:h.beaconSize,zIndex:h.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:h.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${uKe(h.primaryColor).join(",")}, 0.2)`,border:`2px solid ${h.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:h.backgroundColor,borderRadius:5,boxSizing:"border-box",color:h.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:m},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...rT,backgroundColor:h.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...rT,color:h.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...rT,color:h.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...rT,color:h.textColor,fontSize:14},overlay:{...x,backgroundColor:h.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...x},overlayLegacyCenter:{...x,backgroundColor:h.overlayColor},spotlight:{...Ise,backgroundColor:"gray"},spotlightLegacy:{...Ise,boxShadow:`0 0 0 9999px ${h.overlayColor}, ${h.spotlightShadow}`},floaterStyles:{arrow:{color:(o=(s=(i=u==null?void 0:u.styles)==null?void 0:i.arrow)==null?void 0:s.color)!=null?o:h.arrowColor},options:{zIndex:h.zIndex+100}},options:h};return $p(g,d)}function yKe(t){return hKe(t,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function XN(t,e){var r,n,i,s,o,l;const c=e??{},u=$p.all([pKe,yKe(t),c],{isMergeableObject:fn.plainObject}),d=vKe(t,u),h=p7(nv(u.target),u.disableScrollParentFix),f=$p.all([mKe,(r=t.floaterProps)!=null?r:{},(n=u.floaterProps)!=null?n:{}]);return f.offset=u.offset,f.styles=$p((i=f.styles)!=null?i:{},d.floaterStyles),f.offset+=(o=(s=t.spotlightPadding)!=null?s:u.spotlightPadding)!=null?o:0,u.placementBeacon&&f.wrapperOptions&&(f.wrapperOptions.placement=u.placementBeacon),h&&f.options.preventOverflow&&(f.options.preventOverflow.boundariesElement="window"),{...u,locale:$p.all([_be,(l=t.locale)!=null?l:{},u.locale||{}]),floaterProps:f,styles:wbe(d,"floaterStyles")}}function Nbe(t,e=!1){return fn.plainObject(t)?t.target?!0:(q_({title:"validateStep",data:"target is missing from the step",warn:!0,debug:e}),!1):(q_({title:"validateStep",data:"step must be an object",warn:!0,debug:e}),!1)}function Rse(t,e=!1){return fn.array(t)?t.every(r=>Nbe(r,e)):(q_({title:"validateSteps",data:"steps must be an array",warn:!0,debug:e}),!1)}var Sbe={action:"init",controlled:!1,index:0,lifecycle:pi.INIT,origin:null,size:0,status:Fi.IDLE},Dse=dKe(wbe(Sbe,"controlled","size")),bKe=class{constructor(t){mn(this,"beaconPopper"),mn(this,"tooltipPopper"),mn(this,"data",new Map),mn(this,"listener"),mn(this,"store",new Map),mn(this,"addListener",i=>{this.listener=i}),mn(this,"setSteps",i=>{const{size:s,status:o}=this.getState(),l={size:i.length,status:o};this.data.set("steps",i),o===Fi.WAITING&&!s&&i.length&&(l.status=Fi.RUNNING),this.setState(l)}),mn(this,"getPopper",i=>i==="beacon"?this.beaconPopper:this.tooltipPopper),mn(this,"setPopper",(i,s)=>{i==="beacon"?this.beaconPopper=s:this.tooltipPopper=s}),mn(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),mn(this,"close",(i=null)=>{const{index:s,status:o}=this.getState();o===Fi.RUNNING&&this.setState({...this.getNextState({action:js.CLOSE,index:s+1,origin:i})})}),mn(this,"go",i=>{const{controlled:s,status:o}=this.getState();if(s||o!==Fi.RUNNING)return;const l=this.getSteps()[i];this.setState({...this.getNextState({action:js.GO,index:i}),status:l?o:Fi.FINISHED})}),mn(this,"info",()=>this.getState()),mn(this,"next",()=>{const{index:i,status:s}=this.getState();s===Fi.RUNNING&&this.setState(this.getNextState({action:js.NEXT,index:i+1}))}),mn(this,"open",()=>{const{status:i}=this.getState();i===Fi.RUNNING&&this.setState({...this.getNextState({action:js.UPDATE,lifecycle:pi.TOOLTIP})})}),mn(this,"prev",()=>{const{index:i,status:s}=this.getState();s===Fi.RUNNING&&this.setState({...this.getNextState({action:js.PREV,index:i-1})})}),mn(this,"reset",(i=!1)=>{const{controlled:s}=this.getState();s||this.setState({...this.getNextState({action:js.RESET,index:0}),status:i?Fi.RUNNING:Fi.READY})}),mn(this,"skip",()=>{const{status:i}=this.getState();i===Fi.RUNNING&&this.setState({action:js.SKIP,lifecycle:pi.INIT,status:Fi.SKIPPED})}),mn(this,"start",i=>{const{index:s,size:o}=this.getState();this.setState({...this.getNextState({action:js.START,index:fn.number(i)?i:s},!0),status:o?Fi.RUNNING:Fi.WAITING})}),mn(this,"stop",(i=!1)=>{const{index:s,status:o}=this.getState();[Fi.FINISHED,Fi.SKIPPED].includes(o)||this.setState({...this.getNextState({action:js.STOP,index:s+(i?1:0)}),status:Fi.PAUSED})}),mn(this,"update",i=>{var s,o;if(!cKe(i,Dse))throw new Error(`State is not valid. Valid keys: ${Dse.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...i,action:(s=i.action)!=null?s:js.UPDATE,origin:(o=i.origin)!=null?o:null},!0)})});const{continuous:e=!1,stepIndex:r,steps:n=[]}=t??{};this.setState({action:js.INIT,controlled:fn.number(r),continuous:e,index:fn.number(r)?r:0,lifecycle:pi.INIT,origin:null,status:n.length?Fi.READY:Fi.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(n)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...Sbe}}getNextState(t,e=!1){var r,n,i,s,o;const{action:l,controlled:c,index:u,size:d,status:h}=this.getState(),f=fn.number(t.index)?t.index:u,m=c&&!e?u:Math.min(Math.max(f,0),d);return{action:(r=t.action)!=null?r:l,controlled:c,index:m,lifecycle:(n=t.lifecycle)!=null?n:pi.INIT,origin:(i=t.origin)!=null?i:null,size:(s=t.size)!=null?s:d,status:m===d?Fi.FINISHED:(o=t.status)!=null?o:h}}getSteps(){const t=this.data.get("steps");return Array.isArray(t)?t:[]}hasUpdatedState(t){const e=JSON.stringify(t),r=JSON.stringify(this.getState());return e!==r}setState(t,e=!1){const r=this.getState(),{action:n,index:i,lifecycle:s,origin:o=null,size:l,status:c}={...r,...t};this.store.set("action",n),this.store.set("index",i),this.store.set("lifecycle",s),this.store.set("origin",o),this.store.set("size",l),this.store.set("status",c),e&&(this.store.set("controlled",t.controlled),this.store.set("continuous",t.continuous)),this.listener&&this.hasUpdatedState(r)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function wKe(t){return new bKe(t)}function _Ke({styles:t}){return C.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:t})}var NKe=_Ke,SKe=class extends C.Component{constructor(){super(...arguments),mn(this,"isActive",!1),mn(this,"resizeTimeout"),mn(this,"scrollTimeout"),mn(this,"scrollParent"),mn(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),mn(this,"hideSpotlight",()=>{const{continuous:t,disableOverlay:e,lifecycle:r}=this.props,n=[pi.INIT,pi.BEACON,pi.COMPLETE,pi.ERROR];return e||(t?n.includes(r):r!==pi.TOOLTIP)}),mn(this,"handleMouseMove",t=>{const{mouseOverSpotlight:e}=this.state,{height:r,left:n,position:i,top:s,width:o}=this.spotlightStyles,l=i==="fixed"?t.clientY:t.pageY,c=i==="fixed"?t.clientX:t.pageX,u=l>=s&&l<=s+r,h=c>=n&&c<=n+o&&u;h!==e&&this.updateState({mouseOverSpotlight:h})}),mn(this,"handleScroll",()=>{const{target:t}=this.props,e=nv(t);if(this.scrollParent!==document){const{isScrolling:r}=this.state;r||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else LA(e,"sticky")&&this.updateState({})}),mn(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:t,disableScrolling:e,disableScrollParentFix:r=!1,target:n}=this.props,i=nv(n);this.scrollParent=K3(i??document.body,r,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(t){var e;const{disableScrollParentFix:r,lifecycle:n,spotlightClicks:i,target:s}=this.props,{changed:o}=a8(t,this.props);if(o("target")||o("disableScrollParentFix")){const l=nv(s);this.scrollParent=K3(l??document.body,r,!0)}o("lifecycle",pi.TOOLTIP)&&((e=this.scrollParent)==null||e.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:l}=this.state;l||this.updateState({showSpotlight:!0})},100)),(o("spotlightClicks")||o("disableOverlay")||o("lifecycle"))&&(i&&n===pi.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):n!==pi.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var t;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),(t=this.scrollParent)==null||t.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:t}=this.state,{disableOverlayClose:e,placement:r,styles:n}=this.props;let i=n.overlay;return Ose()&&(i=r==="center"?n.overlayLegacyCenter:n.overlayLegacy),{cursor:e?"default":"pointer",height:rKe(),pointerEvents:t?"none":"auto",...i}}get spotlightStyles(){var t,e,r;const{showSpotlight:n}=this.state,{disableScrollParentFix:i=!1,spotlightClicks:s,spotlightPadding:o=0,styles:l,target:c}=this.props,u=nv(c),d=ybe(u),h=LA(u),f=aKe(u,o,i);return{...Ose()?l.spotlightLegacy:l.spotlight,height:Math.round(((t=d==null?void 0:d.height)!=null?t:0)+o*2),left:Math.round(((e=d==null?void 0:d.left)!=null?e:0)-o),opacity:n?1:0,pointerEvents:s?"none":"auto",position:h?"fixed":"absolute",top:f,transition:"opacity 0.2s",width:Math.round(((r=d==null?void 0:d.width)!=null?r:0)+o*2)}}updateState(t){this.isActive&&this.setState(e=>({...e,...t}))}render(){const{showSpotlight:t}=this.state,{onClickOverlay:e,placement:r}=this.props,{hideSpotlight:n,overlayStyles:i,spotlightStyles:s}=this;if(n())return null;let o=r!=="center"&&t&&C.createElement(NKe,{styles:s});if(bbe()==="safari"){const{mixBlendMode:l,zIndex:c,...u}=i;o=C.createElement("div",{style:{...u}},o),delete i.backgroundColor}return C.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:e,role:"presentation",style:i},o)}},EKe=class extends C.Component{constructor(){super(...arguments),mn(this,"node",null)}componentDidMount(){const{id:t}=this.props;E1()&&(this.node=document.createElement("div"),this.node.id=t,document.body.appendChild(this.node),tT||this.renderReact15())}componentDidUpdate(){E1()&&(tT||this.renderReact15())}componentWillUnmount(){!E1()||!this.node||(tT||Hp.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!E1())return;const{children:t}=this.props;this.node&&Hp.unstable_renderSubtreeIntoContainer(this,t,this.node)}renderReact16(){if(!E1()||!tT)return null;const{children:t}=this.props;return this.node?Hp.createPortal(t,this.node):null}render(){return tT?this.renderReact16():null}},jKe=class{constructor(t,e){if(mn(this,"element"),mn(this,"options"),mn(this,"canBeTabbed",r=>{const{tabIndex:n}=r;return n===null||n<0?!1:this.canHaveFocus(r)}),mn(this,"canHaveFocus",r=>{const n=/input|select|textarea|button|object/,i=r.nodeName.toLowerCase();return(n.test(i)&&!r.getAttribute("disabled")||i==="a"&&!!r.getAttribute("href"))&&this.isVisible(r)}),mn(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),mn(this,"handleKeyDown",r=>{const{code:n="Tab"}=this.options;r.code===n&&this.interceptTab(r)}),mn(this,"interceptTab",r=>{r.preventDefault();const n=this.findValidTabElements(),{shiftKey:i}=r;if(!n.length)return;let s=document.activeElement?n.indexOf(document.activeElement):0;s===-1||!i&&s+1===n.length?s=0:i&&s===0?s=n.length-1:s+=i?-1:1,n[s].focus()}),mn(this,"isHidden",r=>{const n=r.offsetWidth<=0&&r.offsetHeight<=0,i=window.getComputedStyle(r);return n&&!r.innerHTML?!0:n&&i.getPropertyValue("overflow")!=="visible"||i.getPropertyValue("display")==="none"}),mn(this,"isVisible",r=>{let n=r;for(;n;)if(n instanceof HTMLElement){if(n===document.body)break;if(this.isHidden(n))return!1;n=n.parentNode}return!0}),mn(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),mn(this,"checkFocus",r=>{document.activeElement!==r&&(r.focus(),window.requestAnimationFrame(()=>this.checkFocus(r)))}),mn(this,"setFocus",()=>{const{selector:r}=this.options;if(!r)return;const n=this.element.querySelector(r);n&&window.requestAnimationFrame(()=>this.checkFocus(n))}),!(t instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=t,this.options=e,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},AKe=class extends C.Component{constructor(t){if(super(t),mn(this,"beacon",null),mn(this,"setBeaconRef",i=>{this.beacon=i}),t.beaconComponent)return;const e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.id="joyride-beacon-animation",t.nonce&&r.setAttribute("nonce",t.nonce),r.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),e.appendChild(r)}componentDidMount(){const{shouldFocus:t}=this.props;setTimeout(()=>{fn.domElement(this.beacon)&&t&&this.beacon.focus()},0)}componentWillUnmount(){const t=document.getElementById("joyride-beacon-animation");t!=null&&t.parentNode&&t.parentNode.removeChild(t)}render(){const{beaconComponent:t,continuous:e,index:r,isLastStep:n,locale:i,onClickOrHover:s,size:o,step:l,styles:c}=this.props,u=rg(i.open),d={"aria-label":u,onClick:s,onMouseEnter:s,ref:this.setBeaconRef,title:u};let h;if(t){const f=t;h=C.createElement(f,{continuous:e,index:r,isLastStep:n,size:o,step:l,...d})}else h=C.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:c.beacon,type:"button",...d},C.createElement("span",{style:c.beaconInner}),C.createElement("span",{style:c.beaconOuter}));return h}};function CKe({styles:t,...e}){const{color:r,height:n,width:i,...s}=t;return be.createElement("button",{style:s,type:"button",...e},be.createElement("svg",{height:typeof n=="number"?`${n}px`:n,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof i=="number"?`${i}px`:i,xmlns:"http://www.w3.org/2000/svg"},be.createElement("g",null,be.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:r}))))}var TKe=CKe;function PKe(t){const{backProps:e,closeProps:r,index:n,isLastStep:i,primaryProps:s,skipProps:o,step:l,tooltipProps:c}=t,{content:u,hideBackButton:d,hideCloseButton:h,hideFooter:f,showSkipButton:m,styles:x,title:g}=l,y={};return y.primary=C.createElement("button",{"data-test-id":"button-primary",style:x.buttonNext,type:"button",...s}),m&&!i&&(y.skip=C.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:x.buttonSkip,type:"button",...o})),!d&&n>0&&(y.back=C.createElement("button",{"data-test-id":"button-back",style:x.buttonBack,type:"button",...e})),y.close=!h&&C.createElement(TKe,{"data-test-id":"button-close",styles:x.buttonClose,...r}),C.createElement("div",{key:"JoyrideTooltip","aria-label":rg(g??u),className:"react-joyride__tooltip",style:x.tooltip,...c},C.createElement("div",{style:x.tooltipContainer},g&&C.createElement("h1",{"aria-label":rg(g),style:x.tooltipTitle},g),C.createElement("div",{style:x.tooltipContent},u)),!f&&C.createElement("div",{style:x.tooltipFooter},C.createElement("div",{style:x.tooltipFooterSpacer},y.skip),y.back,y.primary),y.close)}var kKe=PKe,OKe=class extends C.Component{constructor(){super(...arguments),mn(this,"handleClickBack",t=>{t.preventDefault();const{helpers:e}=this.props;e.prev()}),mn(this,"handleClickClose",t=>{t.preventDefault();const{helpers:e}=this.props;e.close("button_close")}),mn(this,"handleClickPrimary",t=>{t.preventDefault();const{continuous:e,helpers:r}=this.props;if(!e){r.close("button_primary");return}r.next()}),mn(this,"handleClickSkip",t=>{t.preventDefault();const{helpers:e}=this.props;e.skip()}),mn(this,"getElementsProps",()=>{const{continuous:t,index:e,isLastStep:r,setTooltipRef:n,size:i,step:s}=this.props,{back:o,close:l,last:c,next:u,nextLabelWithProgress:d,skip:h}=s.locale,f=rg(o),m=rg(l),x=rg(c),g=rg(u),y=rg(h);let w=l,S=m;if(t){if(w=u,S=g,s.showProgress&&!r){const E=rg(d,{step:e+1,steps:i});w=Fq(d,e+1,i),S=E}r&&(w=c,S=x)}return{backProps:{"aria-label":f,children:o,"data-action":"back",onClick:this.handleClickBack,role:"button",title:f},closeProps:{"aria-label":m,children:l,"data-action":"close",onClick:this.handleClickClose,role:"button",title:m},primaryProps:{"aria-label":S,children:w,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:S},skipProps:{"aria-label":y,children:h,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:y},tooltipProps:{"aria-modal":!0,ref:n,role:"alertdialog"}}})}render(){const{continuous:t,index:e,isLastStep:r,setTooltipRef:n,size:i,step:s}=this.props,{beaconComponent:o,tooltipComponent:l,...c}=s;let u;if(l){const d={...this.getElementsProps(),continuous:t,index:e,isLastStep:r,size:i,step:c,setTooltipRef:n},h=l;u=C.createElement(h,{...d})}else u=C.createElement(kKe,{...this.getElementsProps(),continuous:t,index:e,isLastStep:r,size:i,step:s});return u}},IKe=class extends C.Component{constructor(){super(...arguments),mn(this,"scope",null),mn(this,"tooltip",null),mn(this,"handleClickHoverBeacon",t=>{const{step:e,store:r}=this.props;t.type==="mouseenter"&&e.event!=="hover"||r.update({lifecycle:pi.TOOLTIP})}),mn(this,"setTooltipRef",t=>{this.tooltip=t}),mn(this,"setPopper",(t,e)=>{var r;const{action:n,lifecycle:i,step:s,store:o}=this.props;e==="wrapper"?o.setPopper("beacon",t):o.setPopper("tooltip",t),o.getPopper("beacon")&&(o.getPopper("tooltip")||s.placement==="center")&&i===pi.INIT&&o.update({action:n,lifecycle:pi.READY}),(r=s.floaterProps)!=null&&r.getPopper&&s.floaterProps.getPopper(t,e)}),mn(this,"renderTooltip",t=>{const{continuous:e,helpers:r,index:n,size:i,step:s}=this.props;return C.createElement(OKe,{continuous:e,helpers:r,index:n,isLastStep:n+1===i,setTooltipRef:this.setTooltipRef,size:i,step:s,...t})})}componentDidMount(){const{debug:t,index:e}=this.props;q_({title:`step:${e}`,data:[{key:"props",value:this.props}],debug:t})}componentDidUpdate(t){var e;const{action:r,callback:n,continuous:i,controlled:s,debug:o,helpers:l,index:c,lifecycle:u,shouldScroll:d,status:h,step:f,store:m}=this.props,{changed:x,changedFrom:g}=a8(t,this.props),y=l.info(),w=i&&r!==js.CLOSE&&(c>0||r===js.PREV),S=x("action")||x("index")||x("lifecycle")||x("status"),E=g("lifecycle",[pi.TOOLTIP,pi.INIT],pi.INIT),j=x("action",[js.NEXT,js.PREV,js.SKIP,js.CLOSE]),T=s&&c===t.index;if(j&&(E||T)&&n({...y,index:t.index,lifecycle:pi.COMPLETE,step:t.step,type:Op.STEP_AFTER}),f.placement==="center"&&h===Fi.RUNNING&&x("index")&&r!==js.START&&u===pi.INIT&&m.update({lifecycle:pi.READY}),S){const O=nv(f.target),I=!!O;I&&sKe(O)?(g("status",Fi.READY,Fi.RUNNING)||g("lifecycle",pi.INIT,pi.READY))&&n({...y,step:f,type:Op.STEP_BEFORE}):(console.warn(I?"Target not visible":"Target not mounted",f),n({...y,type:Op.TARGET_NOT_FOUND,step:f}),s||m.update({index:c+(r===js.PREV?-1:1)}))}g("lifecycle",pi.INIT,pi.READY)&&m.update({lifecycle:kse(f)||w?pi.TOOLTIP:pi.BEACON}),x("index")&&q_({title:`step:${u}`,data:[{key:"props",value:this.props}],debug:o}),x("lifecycle",pi.BEACON)&&n({...y,step:f,type:Op.BEACON}),x("lifecycle",pi.TOOLTIP)&&(n({...y,step:f,type:Op.TOOLTIP}),d&&this.tooltip&&(this.scope=new jKe(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),g("lifecycle",[pi.TOOLTIP,pi.INIT],pi.INIT)&&((e=this.scope)==null||e.removeScope(),m.cleanupPoppers())}componentWillUnmount(){var t;(t=this.scope)==null||t.removeScope()}get open(){const{lifecycle:t,step:e}=this.props;return kse(e)||t===pi.TOOLTIP}render(){const{continuous:t,debug:e,index:r,nonce:n,shouldScroll:i,size:s,step:o}=this.props,l=nv(o.target);return!Nbe(o)||!fn.domElement(l)?null:C.createElement("div",{key:`JoyrideStep-${r}`,className:"react-joyride__step"},C.createElement(gZ,{...o.floaterProps,component:this.renderTooltip,debug:e,getPopper:this.setPopper,id:`react-joyride-step-${r}`,open:this.open,placement:o.placement,target:o.target},C.createElement(AKe,{beaconComponent:o.beaconComponent,continuous:t,index:r,isLastStep:r+1===s,locale:o.locale,nonce:n,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:i,size:s,step:o,styles:o.styles})))}},Ebe=class extends C.Component{constructor(t){super(t),mn(this,"helpers"),mn(this,"store"),mn(this,"callback",o=>{const{callback:l}=this.props;fn.function(l)&&l(o)}),mn(this,"handleKeyboard",o=>{const{index:l,lifecycle:c}=this.state,{steps:u}=this.props,d=u[l];c===pi.TOOLTIP&&o.code==="Escape"&&d&&!d.disableCloseOnEsc&&this.store.close("keyboard")}),mn(this,"handleClickOverlay",()=>{const{index:o}=this.state,{steps:l}=this.props;XN(this.props,l[o]).disableOverlayClose||this.helpers.close("overlay")}),mn(this,"syncState",o=>{this.setState(o)});const{debug:e,getHelpers:r,run:n=!0,stepIndex:i}=t;this.store=wKe({...t,controlled:n&&fn.number(i)}),this.helpers=this.store.getHelpers();const{addListener:s}=this.store;q_({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:e}),s(this.syncState),r&&r(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!E1())return;const{debug:t,disableCloseOnEsc:e,run:r,steps:n}=this.props,{start:i}=this.store;Rse(n,t)&&r&&i(),e||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(t,e){if(!E1())return;const{action:r,controlled:n,index:i,status:s}=this.state,{debug:o,run:l,stepIndex:c,steps:u}=this.props,{stepIndex:d,steps:h}=t,{reset:f,setSteps:m,start:x,stop:g,update:y}=this.store,{changed:w}=a8(t,this.props),{changed:S,changedFrom:E}=a8(e,this.state),j=XN(this.props,u[i]),T=!bd(h,u),O=fn.number(c)&&w("stepIndex"),I=nv(j.target);if(T&&(Rse(u,o)?m(u):console.warn("Steps are not valid",u)),w("run")&&(l?x(c):g()),O){let z=fn.number(d)&&d<c?js.NEXT:js.PREV;r===js.STOP&&(z=js.START),[Fi.FINISHED,Fi.SKIPPED].includes(s)||y({action:r===js.CLOSE?js.CLOSE:z,index:c,lifecycle:pi.INIT})}!n&&s===Fi.RUNNING&&i===0&&!I&&(this.store.update({index:i+1}),this.callback({...this.state,type:Op.TARGET_NOT_FOUND,step:j}));const M={...this.state,index:i,step:j};if(S("action",[js.NEXT,js.PREV,js.SKIP,js.CLOSE])&&S("status",Fi.PAUSED)){const z=XN(this.props,u[e.index]);this.callback({...M,index:e.index,lifecycle:pi.COMPLETE,step:z,type:Op.STEP_AFTER})}if(S("status",[Fi.FINISHED,Fi.SKIPPED])){const z=XN(this.props,u[e.index]);n||this.callback({...M,index:e.index,lifecycle:pi.COMPLETE,step:z,type:Op.STEP_AFTER}),this.callback({...M,type:Op.TOUR_END,step:z,index:e.index}),f()}else E("status",[Fi.IDLE,Fi.READY],Fi.RUNNING)?this.callback({...M,type:Op.TOUR_START}):(S("status")||S("action",js.RESET))&&this.callback({...M,type:Op.TOUR_STATUS});this.scrollToStep(e)}componentWillUnmount(){const{disableCloseOnEsc:t}=this.props;t||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(t){const{index:e,lifecycle:r,status:n}=this.state,{debug:i,disableScrollParentFix:s=!1,scrollDuration:o,scrollOffset:l=20,scrollToFirstStep:c=!1,steps:u}=this.props,d=XN(this.props,u[e]),h=nv(d.target),f=fKe({isFirstStep:e===0,lifecycle:r,previousLifecycle:t.lifecycle,scrollToFirstStep:c,step:d,target:h});if(n===Fi.RUNNING&&f){const m=p7(h,s),x=K3(h,s);let g=Math.floor(oKe(h,l,s))||0;q_({title:"scrollToStep",data:[{key:"index",value:e},{key:"lifecycle",value:r},{key:"status",value:n}],debug:i});const y=this.store.getPopper("beacon"),w=this.store.getPopper("tooltip");if(r===pi.BEACON&&y){const{offsets:S,placement:E}=y;!["bottom"].includes(E)&&!m&&(g=Math.floor(S.popper.top-l))}else if(r===pi.TOOLTIP&&w){const{flipped:S,offsets:E,placement:j}=w;["top","right","left"].includes(j)&&!S&&!m?g=Math.floor(E.popper.top-l):g-=d.spotlightPadding}g=g>=0?g:0,n===Fi.RUNNING&&lKe(g,{element:x,duration:o}).then(()=>{setTimeout(()=>{var S;(S=this.store.getPopper("tooltip"))==null||S.instance.update()},10)})}}render(){if(!E1())return null;const{index:t,lifecycle:e,status:r}=this.state,{continuous:n=!1,debug:i=!1,nonce:s,scrollToFirstStep:o=!1,steps:l}=this.props,c=r===Fi.RUNNING,u={};if(c&&l[t]){const d=XN(this.props,l[t]);u.step=C.createElement(IKe,{...this.state,callback:this.callback,continuous:n,debug:i,helpers:this.helpers,nonce:s,shouldScroll:!d.disableScrolling&&(t!==0||o),step:d,store:this.store}),u.overlay=C.createElement(EKe,{id:"react-joyride-portal"},C.createElement(SKe,{...d,continuous:n,debug:i,lifecycle:e,onClickOverlay:this.handleClickOverlay}))}return C.createElement("div",{className:"react-joyride"},u.step,u.overlay)}};mn(Ebe,"defaultProps",gKe);var RKe=Ebe;const xZ=({steps:t,run:e,onComplete:r,onSkip:n})=>{const i=s=>{const{status:o}=s;(o===Fi.FINISHED||o===Fi.SKIPPED)&&(o===Fi.FINISHED?r():n())};return a.jsx(RKe,{steps:t,run:e,continuous:!0,showProgress:!0,showSkipButton:!0,scrollToFirstStep:!0,disableScrolling:!1,callback:i,styles:{options:{primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)",arrowColor:"hsl(var(--background))",zIndex:1e4},tooltip:{borderRadius:"12px",padding:"20px"},tooltipContent:{padding:"10px 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",borderRadius:"8px",padding:"8px 16px",fontSize:"14px"},buttonBack:{color:"hsl(var(--muted-foreground))",marginRight:"10px"},buttonSkip:{color:"hsl(var(--muted-foreground))"}},locale:{back:"Voltar",close:"Fechar",last:"Finalizar",next:"Prximo",skip:"Pular Tour"}})},hs=lI,X3=h7,DKe=cI,jbe=C.forwardRef(({className:t,...e},r)=>a.jsx(uN,{ref:r,className:Ut("fixed inset-0 z-50 bg-foreground/60 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));jbe.displayName=uN.displayName;const as=C.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(DKe,{children:[a.jsx(jbe,{}),a.jsxs(dN,{ref:n,className:Ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%]","gap-4 border border-border/60 bg-card p-6 shadow-lg","rounded-2xl","duration-200","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",t),...r,children:[e,a.jsxs(uI,{className:Ut("absolute right-4 top-4 rounded-lg p-1.5","opacity-70 transition-all duration-200","hover:opacity-100 hover:bg-muted","focus:outline-none focus:ring-2 focus:ring-primary/30","disabled:pointer-events-none"),children:[a.jsx(Xa,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Fechar"})]})]})]}));as.displayName=dN.displayName;const fs=({className:t,...e})=>a.jsx("div",{className:Ut("flex flex-col space-y-2 text-center sm:text-left",t),...e});fs.displayName="DialogHeader";const If=({className:t,...e})=>a.jsx("div",{className:Ut("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e});If.displayName="DialogFooter";const ms=C.forwardRef(({className:t,...e},r)=>a.jsx(QC,{ref:r,className:Ut("font-display text-xl font-semibold leading-none tracking-tight text-foreground",t),...e}));ms.displayName=QC.displayName;const Sl=C.forwardRef(({className:t,...e},r)=>a.jsx(JC,{ref:r,className:Ut("font-body text-sm text-muted-foreground",t),...e}));Sl.displayName=JC.displayName;function Ln(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function kd(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function pd(t,e){const r=Ln(t);return isNaN(e)?kd(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Mm(t,e){const r=Ln(t);if(isNaN(e))return kd(t,NaN);if(!e)return r;const n=r.getDate(),i=kd(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const s=i.getDate();return n>=s?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}function MKe(t,e){const r=+Ln(t);return kd(t,r+e)}const vZ=6048e5,LKe=864e5,Abe=36e5,KR=43200,Mse=1440;function FKe(t,e){return MKe(t,e*Abe)}let BKe={};function n5(){return BKe}function Ig(t,e){var l,c,u,d;const r=n5(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ln(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function H_(t){return Ig(t,{weekStartsOn:1})}function Cbe(t){const e=Ln(t),r=e.getFullYear(),n=kd(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=H_(n),s=kd(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=H_(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function W_(t){const e=Ln(t);return e.setHours(0,0,0,0),e}function FA(t){const e=Ln(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function pg(t,e){const r=W_(t),n=W_(e),i=+r-FA(r),s=+n-FA(n);return Math.round((i-s)/LKe)}function $Ke(t){const e=Cbe(t),r=kd(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),H_(r)}function Bq(t,e){const r=e*7;return pd(t,r)}function UKe(t,e){return Mm(t,e*12)}function zKe(t){let e;return t.forEach(function(r){const n=Ln(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function VKe(t){let e;return t.forEach(r=>{const n=Ln(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function y6(t,e){const r=Ln(t),n=Ln(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function yZ(t){return kd(t,Date.now())}function Vu(t,e){const r=W_(t),n=W_(e);return+r==+n}function bZ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qKe(t){if(!bZ(t)&&typeof t!="number")return!1;const e=Ln(t);return!isNaN(Number(e))}function BA(t,e){const r=Ln(t),n=Ln(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function HKe(t,e,r){const n=Ig(t,r),i=Ig(e,r),s=+n-FA(n),o=+i-FA(i);return Math.round((s-o)/vZ)}function Tbe(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Pbe(t,e){return+Ln(t)-+Ln(e)}function WKe(t,e,r){const n=Pbe(t,e)/Abe;return Tbe(r==null?void 0:r.roundingMethod)(n)}function $q(t){const e=Ln(t);return e.setHours(23,59,59,999),e}function G_(t){const e=Ln(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function GKe(t){const e=Ln(t);return+$q(e)==+G_(e)}function KKe(t,e){const r=Ln(t),n=Ln(e),i=y6(r,n),s=Math.abs(BA(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let l=y6(r,n)===-i;GKe(Ln(t))&&s===1&&y6(t,n)===1&&(l=!1),o=i*(s-Number(l))}return o===0?0:o}function XKe(t,e,r){const n=Pbe(t,e)/1e3;return Tbe(r==null?void 0:r.roundingMethod)(n)}function ru(t){const e=Ln(t);return e.setDate(1),e.setHours(0,0,0,0),e}function kbe(t){const e=Ln(t),r=kd(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function wZ(t,e){var l,c,u,d;const r=n5(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ln(t),s=i.getDay(),o=(s<n?-7:0)+6-(s-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Obe(t){return wZ(t,{weekStartsOn:1})}const YKe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ZKe=(t,e,r)=>{let n;const i=YKe[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function vE(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const QKe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JKe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eXe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tXe={date:vE({formats:QKe,defaultWidth:"full"}),time:vE({formats:JKe,defaultWidth:"full"}),dateTime:vE({formats:eXe,defaultWidth:"full"})},rXe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nXe=(t,e,r,n)=>rXe[t];function og(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const iXe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sXe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aXe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oXe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lXe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cXe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uXe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},dXe={ordinalNumber:uXe,era:og({values:iXe,defaultWidth:"wide"}),quarter:og({values:sXe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:og({values:aXe,defaultWidth:"wide"}),day:og({values:oXe,defaultWidth:"wide"}),dayPeriod:og({values:lXe,defaultWidth:"wide",formattingValues:cXe,defaultFormattingWidth:"wide"})};function lg(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?fXe(l,h=>h.test(o)):hXe(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function hXe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function fXe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Ibe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const mXe=/^(\d+)(th|st|nd|rd)?/i,pXe=/\d+/i,gXe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xXe={any:[/^b/i,/^(a|c)/i]},vXe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yXe={any:[/1/i,/2/i,/3/i,/4/i]},bXe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wXe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_Xe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},NXe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SXe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},EXe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jXe={ordinalNumber:Ibe({matchPattern:mXe,parsePattern:pXe,valueCallback:t=>parseInt(t,10)}),era:lg({matchPatterns:gXe,defaultMatchWidth:"wide",parsePatterns:xXe,defaultParseWidth:"any"}),quarter:lg({matchPatterns:vXe,defaultMatchWidth:"wide",parsePatterns:yXe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lg({matchPatterns:bXe,defaultMatchWidth:"wide",parsePatterns:wXe,defaultParseWidth:"any"}),day:lg({matchPatterns:_Xe,defaultMatchWidth:"wide",parsePatterns:NXe,defaultParseWidth:"any"}),dayPeriod:lg({matchPatterns:SXe,defaultMatchWidth:"any",parsePatterns:EXe,defaultParseWidth:"any"})},_Z={code:"en-US",formatDistance:ZKe,formatLong:tXe,formatRelative:nXe,localize:dXe,match:jXe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AXe(t){const e=Ln(t);return pg(e,kbe(e))+1}function Rbe(t){const e=Ln(t),r=+H_(e)-+$Ke(e);return Math.round(r/vZ)+1}function Dbe(t,e){var d,h,f,m;const r=Ln(t),n=r.getFullYear(),i=n5(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(f=i.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=kd(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=Ig(o,e),c=kd(t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Ig(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function CXe(t,e){var l,c,u,d;const r=n5(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Dbe(t,e),s=kd(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Ig(s,e)}function Mbe(t,e){const r=Ln(t),n=+Ig(r,e)-+CXe(r,e);return Math.round(n/vZ)+1}function Bs(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const i1={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Bs(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Bs(r+1,2)},d(t,e){return Bs(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Bs(t.getHours()%12||12,e.length)},H(t,e){return Bs(t.getHours(),e.length)},m(t,e){return Bs(t.getMinutes(),e.length)},s(t,e){return Bs(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Bs(i,e.length)}},YN={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lse={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return i1.y(t,e)},Y:function(t,e,r,n){const i=Dbe(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Bs(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Bs(s,e.length)},R:function(t,e){const r=Cbe(t);return Bs(r,e.length)},u:function(t,e){const r=t.getFullYear();return Bs(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Bs(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Bs(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return i1.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Bs(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=Mbe(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Bs(i,e.length)},I:function(t,e,r){const n=Rbe(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Bs(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):i1.d(t,e)},D:function(t,e,r){const n=AXe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Bs(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Bs(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Bs(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Bs(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=YN.noon:n===0?i=YN.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=YN.evening:n>=12?i=YN.afternoon:n>=4?i=YN.morning:i=YN.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return i1.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):i1.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Bs(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Bs(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):i1.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):i1.s(t,e)},S:function(t,e){return i1.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Bse(n);case"XXXX":case"XX":return vw(n);case"XXXXX":case"XXX":default:return vw(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Bse(n);case"xxxx":case"xx":return vw(n);case"xxxxx":case"xxx":default:return vw(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Fse(n,":");case"OOOO":default:return"GMT"+vw(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Fse(n,":");case"zzzz":default:return"GMT"+vw(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Bs(n,e.length)},T:function(t,e,r){const n=t.getTime();return Bs(n,e.length)}};function Fse(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+Bs(s,2)}function Bse(t,e){return t%60===0?(t>0?"-":"+")+Bs(Math.abs(t)/60,2):vw(t,e)}function vw(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Bs(Math.trunc(n/60),2),s=Bs(n%60,2);return r+i+e+s}const $se=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Lbe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},TXe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return $se(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",$se(n,e)).replace("{{time}}",Lbe(i,e))},PXe={p:Lbe,P:TXe},kXe=/^D+$/,OXe=/^Y+$/,IXe=["D","DD","YY","YYYY"];function RXe(t){return kXe.test(t)}function DXe(t){return OXe.test(t)}function MXe(t,e,r){const n=LXe(t,e,r);if(console.warn(n),IXe.includes(t))throw new RangeError(n)}function LXe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FXe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BXe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$Xe=/^'([^]*?)'?$/,UXe=/''/g,zXe=/[a-zA-Z]/;function Mi(t,e,r){var d,h,f,m,x,g,y,w;const n=n5(),i=(r==null?void 0:r.locale)??n.locale??_Z,s=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,l=Ln(t);if(!qKe(l))throw new RangeError("Invalid time value");let c=e.match(BXe).map(S=>{const E=S[0];if(E==="p"||E==="P"){const j=PXe[E];return j(S,i.formatLong)}return S}).join("").match(FXe).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const E=S[0];if(E==="'")return{isToken:!1,value:VXe(S)};if(Lse[E])return{isToken:!0,value:S};if(E.match(zXe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const E=S.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&DXe(E)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&RXe(E))&&MXe(E,e,String(t));const j=Lse[E[0]];return j(l,E,i.localize,u)}).join("")}function VXe(t){const e=t.match($Xe);return e?e[1].replace(UXe,"'"):t}function qXe(t,e,r){const n=n5(),i=(r==null?void 0:r.locale)??n.locale??_Z,s=2520,o=y6(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ln(e),u=Ln(t)):(c=Ln(t),u=Ln(e));const d=XKe(u,c),h=(FA(u)-FA(c))/1e3,f=Math.round((d-h)/60);let m;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):f===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",f,l);if(f<45)return i.formatDistance("xMinutes",f,l);if(f<90)return i.formatDistance("aboutXHours",1,l);if(f<Mse){const x=Math.round(f/60);return i.formatDistance("aboutXHours",x,l)}else{if(f<s)return i.formatDistance("xDays",1,l);if(f<KR){const x=Math.round(f/Mse);return i.formatDistance("xDays",x,l)}else if(f<KR*2)return m=Math.round(f/KR),i.formatDistance("aboutXMonths",m,l)}if(m=KKe(u,c),m<12){const x=Math.round(f/KR);return i.formatDistance("xMonths",x,l)}else{const x=m%12,g=Math.trunc(m/12);return x<3?i.formatDistance("aboutXYears",g,l):x<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function $A(t,e){return qXe(t,yZ(t),e)}function HXe(t){const e=Ln(t),r=e.getFullYear(),n=e.getMonth(),i=kd(t,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function WXe(t){return Ln(t).getMonth()}function GXe(t){return Math.trunc(+Ln(t)/1e3)}function KXe(t){const e=Ln(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function XXe(t,e){return HKe(KXe(t),ru(t),e)+1}function YXe(t){return Ln(t).getFullYear()}function Uq(t,e){const r=Ln(t),n=Ln(e);return r.getTime()>n.getTime()}function Fbe(t,e){const r=Ln(t),n=Ln(e);return+r<+n}function NZ(t,e){const r=Ln(t),n=Ln(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function ZXe(t,e){const r=Ln(t),n=Ln(e);return r.getFullYear()===n.getFullYear()}function Bbe(t){return Vu(t,yZ(t))}function QXe(t,e){const r=+Ln(t),[n,i]=[+Ln(e.start),+Ln(e.end)].sort((s,o)=>s-o);return r>=n&&r<=i}function zl(t,e){return pd(t,-e)}function $be(t){return Vu(t,zl(yZ(t),1))}function I$(t,e){const r=Ln(t),n=r.getFullYear(),i=r.getDate(),s=kd(t,0);s.setFullYear(n,e,15),s.setHours(0,0,0,0);const o=HXe(s);return r.setMonth(e,Math.min(i,o)),r}function Use(t,e){const r=Ln(t);return isNaN(+r)?kd(t,NaN):(r.setFullYear(e),r)}function j4(t,e){return Mm(t,-e)}function JXe(t,e){return FKe(t,-e)}const eYe={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},tYe=(t,e,r)=>{let n;const i=eYe[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+n:"h "+n:n},rYe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},nYe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},iYe={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sYe={date:vE({formats:rYe,defaultWidth:"full"}),time:vE({formats:nYe,defaultWidth:"full"}),dateTime:vE({formats:iYe,defaultWidth:"full"})},aYe={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},oYe=(t,e,r,n)=>{const i=aYe[t];return typeof i=="function"?i(e):i},lYe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},cYe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},uYe={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},dYe={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},hYe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},fYe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},mYe=(t,e)=>{const r=Number(t);return(e==null?void 0:e.unit)==="week"?r+"":r+""},pYe={ordinalNumber:mYe,era:og({values:lYe,defaultWidth:"wide"}),quarter:og({values:cYe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:og({values:uYe,defaultWidth:"wide"}),day:og({values:dYe,defaultWidth:"wide"}),dayPeriod:og({values:hYe,defaultWidth:"wide",formattingValues:fYe,defaultFormattingWidth:"wide"})},gYe=/^(\d+)[o]?/i,xYe=/\d+/i,vYe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},yYe={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},bYe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},wYe={any:[/1/i,/2/i,/3/i,/4/i]},_Ye={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},NYe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},SYe={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},EYe={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},jYe={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},AYe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},CYe={ordinalNumber:Ibe({matchPattern:gYe,parsePattern:xYe,valueCallback:t=>parseInt(t,10)}),era:lg({matchPatterns:vYe,defaultMatchWidth:"wide",parsePatterns:yYe,defaultParseWidth:"any"}),quarter:lg({matchPatterns:bYe,defaultMatchWidth:"wide",parsePatterns:wYe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lg({matchPatterns:_Ye,defaultMatchWidth:"wide",parsePatterns:NYe,defaultParseWidth:"any"}),day:lg({matchPatterns:SYe,defaultMatchWidth:"wide",parsePatterns:EYe,defaultParseWidth:"any"}),dayPeriod:lg({matchPatterns:jYe,defaultMatchWidth:"any",parsePatterns:AYe,defaultParseWidth:"any"})},Wi={code:"pt-BR",formatDistance:tYe,formatLong:sYe,formatRelative:oYe,localize:pYe,match:CYe,options:{weekStartsOn:0,firstWeekContainsDate:1}},s1={co2PerKg:1.5,waterPerKg:15,energyPerKg:3.5,treesPerTon:17};function TYe({open:t,onOpenChange:e}){const{user:r}=Si(),[n,i]=C.useState(!0),[s,o]=C.useState(!1),[l,c]=C.useState({notas:0,entregas:0,kgEntregue:0,kgNotas:0}),[u,d]=C.useState({notas:0,entregas:0,kgEntregue:0,kgNotas:0}),[h,f]=C.useState({totalKg:0,totalNotas:0,totalEntregas:0}),[m,x]=C.useState(""),g=async()=>{o(!0);try{const T=document.createElement("canvas"),O=T.getContext("2d");if(!O)throw new Error("Canvas no suportado");T.width=1080,T.height=1080,O.fillStyle="#FFFFFF",O.fillRect(0,0,T.width,T.height),O.strokeStyle="#22c55e",O.lineWidth=12,O.strokeRect(30,30,T.width-60,T.height-60);const I=new Image;I.crossOrigin="anonymous",I.src="/ciclik-logo-full.png",await new Promise((oe,xe)=>{I.onload=()=>oe(),I.onerror=()=>xe(new Error("Erro ao carregar logo"))});const M=280,D=I.height/I.width*M;O.drawImage(I,(T.width-M)/2,45,M,D),O.fillStyle="#166534",O.font="bold 42px Arial, sans-serif",O.textAlign="center",O.fillText("CERTIFICADO DE IMPACTO",T.width/2,250),O.fillStyle="#15803d",O.font="bold 36px Arial, sans-serif",O.fillText(m||"Guardio Verde",T.width/2,310),O.beginPath(),O.moveTo(200,350),O.lineTo(880,350),O.strokeStyle="#22c55e",O.lineWidth=3,O.stroke();const z=[{icon:"",value:po(h.totalKg),label:"Reciclados"},{icon:"",value:`${h.totalNotas}`,label:"Notas Fiscais"},{icon:"",value:`${h.totalEntregas}`,label:"Entregas"},{icon:"",value:`${(h.totalKg*s1.co2PerKg).toLocaleString("pt-BR",{maximumFractionDigits:1})}kg`,label:"CO Evitado"}],F=400,q=300,Q=140,re=T.width/2-q/2-100,Z=T.width/2+q/2-50;z.forEach((oe,xe)=>{const H=xe%2,J=Math.floor(xe/2),ie=H===0?re:Z,ce=F+J*Q;O.font="48px Arial",O.textAlign="center",O.fillText(oe.icon,ie,ce),O.fillStyle="#166534",O.font="bold 40px Arial, sans-serif",O.textAlign="center",O.fillText(oe.value,ie+120,ce),O.fillStyle="#4ade80",O.font="22px Arial, sans-serif",O.textAlign="center",O.fillText(oe.label,ie+120,ce+30)}),O.textAlign="center",O.fillStyle="#166534",O.font="bold 28px Arial, sans-serif",O.fillText("IMPACTO AMBIENTAL GERADO",T.width/2,720);const se=[` ${(h.totalKg*s1.waterPerKg).toLocaleString("pt-BR",{maximumFractionDigits:0})}L gua economizada`,` ${(h.totalKg*s1.energyPerKg).toLocaleString("pt-BR",{maximumFractionDigits:1})}kWh energia economizada`,` ${(h.totalKg/1e3*s1.treesPerTon).toLocaleString("pt-BR",{maximumFractionDigits:2})} rvores preservadas`];O.fillStyle="#15803d",O.font="26px Arial, sans-serif",O.textAlign="center",se.forEach((oe,xe)=>{O.fillText(oe,T.width/2,770+xe*40)}),O.textAlign="center",O.fillStyle="#86efac",O.font="20px Arial, sans-serif",O.fillText(`Gerado em ${Mi(new Date,"dd 'de' MMMM 'de' yyyy",{locale:Wi})}`,T.width/2,930),O.fillStyle="#22c55e",O.font="22px Arial, sans-serif",O.fillText("#Ciclik #Sustentabilidade #RecicleEGanhe",T.width/2,970),O.globalAlpha=.05;const K=400;O.drawImage(I,(T.width-K)/2,(T.height-K)/2,K,K),O.globalAlpha=1;const X=T.toDataURL("image/png"),Y=document.createElement("a");Y.download=`certificado-ciclik-${Mi(new Date,"yyyy-MM-dd")}.png`,Y.href=X,Y.click(),cr.success("Certificado gerado! Compartilhe nas redes sociais.")}catch(T){console.error("Erro ao gerar certificado:",T),cr.error("Erro ao gerar certificado")}finally{o(!1)}};C.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{var T,O,I,M,D,z;if(r){i(!0);try{const F=new Date,q=ru(F),Q=G_(F),re=ru(j4(F,1)),Z=G_(j4(F,1)),{data:se}=await Ee.from("profiles").select("nome").eq("id",r.id).single();se&&x(se.nome.split(" ")[0]);const[K,X]=await Promise.all([Ee.from("notas_fiscais").select("id",{count:"exact"}).eq("id_usuario",r.id).gte("data_envio",q.toISOString()).lte("data_envio",Q.toISOString()),Ee.from("entregas_reciclaveis").select("id").eq("id_usuario",r.id).eq("status_promessa","finalizada").gte("data_validacao",q.toISOString()).lte("data_validacao",Q.toISOString())]),[Y,oe]=await Promise.all([Ee.from("notas_fiscais").select("id",{count:"exact"}).eq("id_usuario",r.id).gte("data_envio",re.toISOString()).lte("data_envio",Z.toISOString()),Ee.from("entregas_reciclaveis").select("id").eq("id_usuario",r.id).eq("status_promessa","finalizada").gte("data_validacao",re.toISOString()).lte("data_validacao",Z.toISOString())]),[xe,H]=await Promise.all([Ee.from("notas_fiscais").select("id",{count:"exact"}).eq("id_usuario",r.id),Ee.from("entregas_reciclaveis").select("id").eq("id_usuario",r.id).eq("status_promessa","finalizada")]),J=((T=X.data)==null?void 0:T.map(ue=>ue.id))||[],ie=((O=oe.data)==null?void 0:O.map(ue=>ue.id))||[],ce=((I=H.data)==null?void 0:I.map(ue=>ue.id))||[];let me=0,he=0,_e=0;if(J.length>0){const{data:ue}=await Ee.from("materiais_coletados_detalhado").select("peso_kg").in("id_entrega",J).neq("subtipo_material","REJEITO");me=(ue==null?void 0:ue.reduce((je,ye)=>je+(ye.peso_kg||0),0))||0}if(ie.length>0){const{data:ue}=await Ee.from("materiais_coletados_detalhado").select("peso_kg").in("id_entrega",ie).neq("subtipo_material","REJEITO");he=(ue==null?void 0:ue.reduce((je,ye)=>je+(ye.peso_kg||0),0))||0}if(ce.length>0){const{data:ue}=await Ee.from("materiais_coletados_detalhado").select("peso_kg").in("id_entrega",ce).neq("subtipo_material","REJEITO");_e=(ue==null?void 0:ue.reduce((je,ye)=>je+(ye.peso_kg||0),0))||0}c({notas:K.count||0,entregas:((M=X.data)==null?void 0:M.length)||0,kgEntregue:me,kgNotas:0}),d({notas:Y.count||0,entregas:((D=oe.data)==null?void 0:D.length)||0,kgEntregue:he,kgNotas:0}),f({totalKg:_e,totalNotas:xe.count||0,totalEntregas:((z=H.data)==null?void 0:z.length)||0})}catch(F){console.error("Erro ao carregar relatrio:",F)}finally{i(!1)}}},w=(T,O)=>O===0?T>0?100:0:Math.round((T-O)/O*100),S=C.useMemo(()=>[{label:"Notas Fiscais",current:l.notas,previous:u.notas,growth:w(l.notas,u.notas),unit:"",icon:Ql},{label:"Entregas",current:l.entregas,previous:u.entregas,growth:w(l.entregas,u.entregas),unit:"",icon:Gp},{label:"Kg Reciclados",current:l.kgEntregue,previous:u.kgEntregue,growth:w(l.kgEntregue,u.kgEntregue),unit:"kg",icon:Cs}],[l,u]),E=C.useMemo(()=>({co2Avoided:h.totalKg*s1.co2PerKg,waterSaved:h.totalKg*s1.waterPerKg,energySaved:h.totalKg*s1.energyPerKg,treesSaved:h.totalKg/1e3*s1.treesPerTon}),[h.totalKg]);Mi(new Date,"MMMM yyyy",{locale:Wi});const j=({growth:T})=>T>0?a.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full bg-[#22c55e]/10 text-[#22c55e] text-xs font-semibold",children:[a.jsx(Hs,{className:"h-3 w-3"}),"+",T,"%"]}):T<0?a.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full bg-red-500/10 text-red-500 text-xs font-semibold",children:[a.jsx(BX,{className:"h-3 w-3"}),T,"%"]}):a.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 text-xs font-semibold",children:[a.jsx(ARe,{className:"h-3 w-3"}),"0%"]});return a.jsx(hs,{open:t,onOpenChange:e,children:a.jsx(as,{className:"max-w-md max-h-[90vh] p-0 bg-white border-0 shadow-2xl overflow-hidden flex flex-col",children:n?a.jsx("div",{className:"flex items-center justify-center py-24 bg-white flex-shrink-0",children:a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:a.jsx(ps,{className:"h-10 w-10 text-[#22c55e]"})})}):a.jsxs("div",{className:"bg-white flex flex-col max-h-[90vh] relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-0 overflow-hidden",children:a.jsx("img",{src:Bp("ciclik-logo.png"),alt:"",className:"w-72 h-72 opacity-[0.04] object-contain"})}),a.jsx("div",{className:"bg-white border-b border-gray-100 px-6 py-4 flex-shrink-0 relative z-20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:Bp("ciclik-logo.png"),alt:"Ciclik",className:"h-10 w-10"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Relatrio de Impacto"}),a.jsx("p",{className:"text-xs text-gray-500",children:m?`Ol ${m}, veja seu impacto ambiental`:"Seu impacto ambiental"})]}),a.jsx("span",{className:"text-[10px] font-medium text-gray-400 uppercase tracking-wider bg-gray-100 px-2.5 py-1 rounded-full",children:Mi(new Date,"MMM yyyy",{locale:Wi})})]})}),a.jsxs("div",{className:"px-6 py-5 space-y-6 overflow-y-auto flex-1 relative z-10",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[11px] font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Seus nmeros totais"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex-1 bg-gray-50 rounded-2xl p-4 text-center",children:[a.jsx("div",{className:"w-10 h-10 bg-[#22c55e]/10 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx(Ql,{className:"h-5 w-5 text-[#22c55e]"})}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.totalNotas}),a.jsx("p",{className:"text-[11px] text-gray-500 font-medium",children:"Notas"})]}),a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"flex-1 bg-gray-50 rounded-2xl p-4 text-center",children:[a.jsx("div",{className:"w-10 h-10 bg-[#22c55e]/10 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx(Gp,{className:"h-5 w-5 text-[#22c55e]"})}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.totalEntregas}),a.jsx("p",{className:"text-[11px] text-gray-500 font-medium",children:"Entregas"})]}),a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex-1 bg-gray-50 rounded-2xl p-4 text-center",children:[a.jsx("div",{className:"w-10 h-10 bg-[#22c55e]/10 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx(Cs,{className:"h-5 w-5 text-[#22c55e]"})}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:po(h.totalKg)}),a.jsx("p",{className:"text-[11px] text-gray-500 font-medium",children:"Reciclados"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-[11px] font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Evoluo mensal"}),a.jsx("div",{className:"bg-gray-50 rounded-2xl divide-y divide-gray-100",children:S.map((T,O)=>a.jsxs(Ke.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.25+O*.05},className:"flex items-center justify-between px-4 py-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(T.icon,{className:"h-4 w-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:T.label}),a.jsxs("p",{className:"text-xs text-gray-500",children:[T.current,T.unit," ",a.jsx("span",{className:"text-gray-300",children:""})," ant. ",T.previous,T.unit]})]})]}),a.jsx(j,{growth:T.growth})]},T.label))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-[11px] font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Impacto ambiental gerado"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-4 border border-emerald-100",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:a.jsx(j0e,{className:"h-4 w-4 text-emerald-600"})})}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[E.co2Avoided.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1}),a.jsx("span",{className:"text-sm font-medium text-gray-500 ml-1",children:"kg"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"CO evitado"})]}),a.jsxs(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.45},className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-4 border border-blue-100",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:a.jsx(A0e,{className:"h-4 w-4 text-blue-600"})})}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[E.waterSaved.toLocaleString("pt-BR",{maximumFractionDigits:0}),a.jsx("span",{className:"text-sm font-medium text-gray-500 ml-1",children:"L"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"gua economizada"})]}),a.jsxs(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},className:"bg-gradient-to-br from-amber-50 to-yellow-50 rounded-2xl p-4 border border-amber-100",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:a.jsx(KO,{className:"h-4 w-4 text-amber-600"})})}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[E.energySaved.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1}),a.jsx("span",{className:"text-sm font-medium text-gray-500 ml-1",children:"kWh"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Energia economizada"})]}),a.jsxs(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.55},className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-2xl p-4 border border-green-100",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:a.jsx(k0e,{className:"h-4 w-4 text-green-600"})})}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:E.treesSaved.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"rvores preservadas"})]})]})]}),a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"pt-4 space-y-3",children:[a.jsxs(Ke.button,{onClick:g,disabled:s,whileHover:{scale:1.02,boxShadow:"0 20px 40px -10px rgba(34, 197, 94, 0.4)"},whileTap:{scale:.98},className:"relative w-full h-16 rounded-2xl bg-gradient-to-r from-[#8BC34A] via-[#7CB342] to-[#689F38] text-white font-semibold text-lg shadow-xl shadow-[#8BC34A]/30 flex items-center justify-center gap-3 overflow-hidden disabled:opacity-70 disabled:cursor-not-allowed",children:[a.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}}),a.jsx(Ke.div,{className:"absolute inset-0 rounded-2xl bg-green-400/20",animate:{opacity:[0,.5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),a.jsxs("span",{className:"relative flex items-center gap-3",children:[s?a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(ps,{className:"h-6 w-6"})}):a.jsx(Ke.div,{animate:{rotate:[0,-10,10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:2},children:a.jsx(qu,{className:"h-6 w-6"})}),a.jsx("span",{children:s?"Gerando...":"Gerar Certificado"})]})]}),a.jsx("p",{className:"text-center text-[10px] text-gray-400",children:"Gera uma imagem para compartilhar no Instagram e WhatsApp"})]})]})]})})})}const PYe=({percentage:t,size:e=180,strokeWidth:r=12,color:n,children:i})=>{const s=(e-r)/2,o=s*2*Math.PI,l=o-Math.min(t,100)/100*o;return a.jsxs("div",{className:"relative",style:{width:e,height:e},children:[a.jsxs("svg",{width:e,height:e,className:"transform -rotate-90",children:[a.jsx("circle",{cx:e/2,cy:e/2,r:s,fill:"none",stroke:"hsl(var(--muted))",strokeWidth:r}),a.jsx(Ke.circle,{cx:e/2,cy:e/2,r:s,fill:"none",stroke:n,strokeWidth:r,strokeLinecap:"round",strokeDasharray:o,initial:{strokeDashoffset:o},animate:{strokeDashoffset:l},transition:{duration:1.5,ease:"easeOut",delay:.3}})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i})]})},R$=({icon:t,label:e,value:r,color:n,delay:i=0})=>{const s={primary:"bg-primary/10 text-primary border-primary/20",success:"bg-success/10 text-success border-success/20",destructive:"bg-destructive/10 text-destructive border-destructive/20",warning:"bg-warning/10 text-warning border-warning/20"};return a.jsxs(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i,duration:.4},className:`flex items-center gap-3 px-4 py-3 rounded-2xl border backdrop-blur-sm ${s[n]}`,children:[a.jsx(t,{className:"h-5 w-5 flex-shrink-0"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-medium opacity-80",children:e}),a.jsx("span",{className:"text-lg font-bold",children:r})]})]})};function kYe(){const{user:t}=Si(),e=nn(),[r,n]=C.useState({totalNotasFiscais:0,pesoTotalNotas:0,totalEntregasFinalizadas:0,pesoTotalEntregue:0,pesoRejeito:0,percentualEntregue:0}),[i,s]=C.useState(!0),[o,l]=C.useState(!1);C.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t){s(!0);try{const{count:f}=await Ee.from("notas_fiscais").select("id",{count:"exact"}).eq("id_usuario",t.id),{data:m}=await Ee.from("materiais_reciclaveis_usuario").select("peso_total_estimado_gramas, peso_unitario_gramas, quantidade").eq("id_usuario",t.id).not("id_nota_fiscal","is",null),x=(m==null?void 0:m.reduce((O,I)=>O+(I.peso_total_estimado_gramas||(I.peso_unitario_gramas||0)*(I.quantidade||1)),0))||0,{data:g}=await Ee.from("entregas_reciclaveis").select("id").eq("id_usuario",t.id).eq("status_promessa","finalizada");let y=0,w=0;if(g&&g.length>0){const O=g.map(D=>D.id),{data:I}=await Ee.from("materiais_coletados_detalhado").select("peso_kg").in("id_entrega",O).neq("subtipo_material","REJEITO");y=(I==null?void 0:I.reduce((D,z)=>D+(z.peso_kg||0),0))||0;const{data:M}=await Ee.from("materiais_coletados_detalhado").select("peso_kg").in("id_entrega",O).eq("subtipo_material","REJEITO");w=(M==null?void 0:M.reduce((D,z)=>D+(z.peso_kg||0),0))||0}const S=Math.round(x/1e3*1e3)/1e3,E=Math.round(y*1e3)/1e3,j=Math.round(w*1e3)/1e3,T=S>0?Math.round(E/S*100):0;n({totalNotasFiscais:f||0,pesoTotalNotas:S,totalEntregasFinalizadas:(g==null?void 0:g.length)||0,pesoTotalEntregue:E,pesoRejeito:j,percentualEntregue:T})}catch(f){console.error("Erro ao carregar estatsticas:",f)}finally{s(!1)}}};if(i)return a.jsx("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-success/5 via-background to-primary/5 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"p-3 rounded-2xl bg-success/20",children:a.jsx(ps,{className:"h-6 w-6 text-success"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-foreground",children:"Impacto Ambiental"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]})});if(r.totalNotasFiscais===0&&r.totalEntregasFinalizadas===0)return a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-3xl border-2 border-dashed border-muted p-8 text-center",children:[a.jsx(Ke.div,{animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0},className:"inline-flex p-4 rounded-full bg-muted/50 mb-4",children:a.jsx(ps,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Impacto Ambiental"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"Envie notas fiscais e finalize entregas para acompanhar seu impacto positivo"})]});const u=()=>r.percentualEntregue>=80?"hsl(var(--success))":r.percentualEntregue>=50?"hsl(var(--warning))":"hsl(var(--destructive))",d=r.percentualEntregue>80?{title:"Excelente!",message:"Voc est fazendo a diferena!",color:"success"}:r.percentualEntregue>=50?{title:"Bom trabalho!",message:"Continue assim!",color:"warning"}:{title:"Vamos melhorar!",message:"Entregue mais materiais",color:"destructive"},h=r.pesoTotalNotas-r.pesoTotalEntregue;return a.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[a.jsxs(Ke.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100},className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-success/10 via-background to-primary/10 border border-success/20",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-success/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-primary/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),a.jsxs("div",{className:"relative p-6 md:p-8",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ke.div,{className:"p-3 rounded-2xl bg-gradient-to-br from-success to-success/70 shadow-lg shadow-success/25",whileHover:{scale:1.05,rotate:5},children:a.jsx(ps,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Impacto Ambiental"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seu ciclo de reciclagem"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ke.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>l(!0),className:"rounded-full gap-1.5 border-success/30 text-success hover:bg-success/10 hover:text-success",children:[a.jsx(vRe,{className:"h-4 w-4"}),"Relatrio"]})}),r.percentualEntregue>0&&a.jsxs(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-success/20 text-success text-sm font-medium",children:[a.jsx($b,{className:"h-4 w-4"}),a.jsx("span",{children:"Ativo"})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(PYe,{percentage:r.percentualEntregue,color:u(),children:a.jsxs("div",{className:"text-center",children:[a.jsxs(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.8},className:"text-4xl font-bold text-foreground",children:[r.percentualEntregue,"%"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Taxa de Entrega"})]})}),a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1},className:`mt-4 px-4 py-2 rounded-full text-sm font-medium ${d.color==="success"?"bg-success/20 text-success":d.color==="warning"?"bg-warning/20 text-warning":"bg-destructive/20 text-destructive"}`,children:[d.title," ",d.message]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(R$,{icon:Ql,label:"Registrado em Notas",value:po(r.pesoTotalNotas),color:"primary",delay:.2}),a.jsx(R$,{icon:Gp,label:"Entregue s Cooperativas",value:po(r.pesoTotalEntregue),color:"success",delay:.3}),r.pesoRejeito>0&&a.jsx(R$,{icon:Pg,label:"Rejeito",value:po(r.pesoRejeito),color:"destructive",delay:.4}),h>0&&a.jsxs(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.4},className:"flex flex-col gap-3 px-4 py-4 rounded-2xl border backdrop-blur-sm bg-warning/10 text-warning border-warning/20 cursor-pointer hover:bg-warning/20 transition-colors",onClick:()=>e("/select-materials"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Dm,{className:"h-6 w-6 flex-shrink-0"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-medium opacity-80",children:"Falta Entregar"}),a.jsx("span",{className:"text-xl font-bold",children:po(h)})]})]}),a.jsxs(Oe,{size:"default",className:"w-full rounded-full bg-warning hover:bg-warning/90 text-warning-foreground shadow-lg shadow-warning/25 gap-2 justify-center font-semibold",onClick:f=>{f.stopPropagation(),e("/select-materials")},children:["Entregar",a.jsx(Lu,{className:"h-4 w-4"})]})]})]})]}),a.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"grid grid-cols-2 gap-4 mt-8 pt-6 border-t border-border/50",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.6},className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-primary/10 mb-2",children:a.jsx(Ql,{className:"h-5 w-5 text-primary"})}),a.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.totalNotasFiscais}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notas Fiscais"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.7},className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-success/10 mb-2",children:a.jsx(Cs,{className:"h-5 w-5 text-success"})}),a.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.totalEntregasFinalizadas}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Entregas Finalizadas"})]})]})]})]}),a.jsx(TYe,{open:o,onOpenChange:l})]})}var OYe=Array.isArray,xh=OYe,IYe=typeof pm=="object"&&pm&&pm.Object===Object&&pm,Ube=IYe,RYe=Ube,DYe=typeof self=="object"&&self&&self.Object===Object&&self,MYe=RYe||DYe||Function("return this")(),$g=MYe,LYe=$g,FYe=LYe.Symbol,vI=FYe,zse=vI,zbe=Object.prototype,BYe=zbe.hasOwnProperty,$Ye=zbe.toString,nT=zse?zse.toStringTag:void 0;function UYe(t){var e=BYe.call(t,nT),r=t[nT];try{t[nT]=void 0;var n=!0}catch{}var i=$Ye.call(t);return n&&(e?t[nT]=r:delete t[nT]),i}var zYe=UYe,VYe=Object.prototype,qYe=VYe.toString;function HYe(t){return qYe.call(t)}var WYe=HYe,Vse=vI,GYe=zYe,KYe=WYe,XYe="[object Null]",YYe="[object Undefined]",qse=Vse?Vse.toStringTag:void 0;function ZYe(t){return t==null?t===void 0?YYe:XYe:qse&&qse in Object(t)?GYe(t):KYe(t)}var Uv=ZYe;function QYe(t){return t!=null&&typeof t=="object"}var zv=QYe,JYe=Uv,eZe=zv,tZe="[object Symbol]";function rZe(t){return typeof t=="symbol"||eZe(t)&&JYe(t)==tZe}var i5=rZe,nZe=xh,iZe=i5,sZe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aZe=/^\w*$/;function oZe(t,e){if(nZe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||iZe(t)?!0:aZe.test(t)||!sZe.test(t)||e!=null&&t in Object(e)}var SZ=oZe;function lZe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Gb=lZe;const s5=Vi(Gb);var cZe=Uv,uZe=Gb,dZe="[object AsyncFunction]",hZe="[object Function]",fZe="[object GeneratorFunction]",mZe="[object Proxy]";function pZe(t){if(!uZe(t))return!1;var e=cZe(t);return e==hZe||e==fZe||e==dZe||e==mZe}var EZ=pZe;const Fn=Vi(EZ);var gZe=$g,xZe=gZe["__core-js_shared__"],vZe=xZe,D$=vZe,Hse=function(){var t=/[^.]+$/.exec(D$&&D$.keys&&D$.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yZe(t){return!!Hse&&Hse in t}var bZe=yZe,wZe=Function.prototype,_Ze=wZe.toString;function NZe(t){if(t!=null){try{return _Ze.call(t)}catch{}try{return t+""}catch{}}return""}var Vbe=NZe,SZe=EZ,EZe=bZe,jZe=Gb,AZe=Vbe,CZe=/[\\^$.*+?()[\]{}|]/g,TZe=/^\[object .+?Constructor\]$/,PZe=Function.prototype,kZe=Object.prototype,OZe=PZe.toString,IZe=kZe.hasOwnProperty,RZe=RegExp("^"+OZe.call(IZe).replace(CZe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DZe(t){if(!jZe(t)||EZe(t))return!1;var e=SZe(t)?RZe:TZe;return e.test(AZe(t))}var MZe=DZe;function LZe(t,e){return t==null?void 0:t[e]}var FZe=LZe,BZe=MZe,$Ze=FZe;function UZe(t,e){var r=$Ze(t,e);return BZe(r)?r:void 0}var fN=UZe,zZe=fN,VZe=zZe(Object,"create"),g7=VZe,Wse=g7;function qZe(){this.__data__=Wse?Wse(null):{},this.size=0}var HZe=qZe;function WZe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var GZe=WZe,KZe=g7,XZe="__lodash_hash_undefined__",YZe=Object.prototype,ZZe=YZe.hasOwnProperty;function QZe(t){var e=this.__data__;if(KZe){var r=e[t];return r===XZe?void 0:r}return ZZe.call(e,t)?e[t]:void 0}var JZe=QZe,eQe=g7,tQe=Object.prototype,rQe=tQe.hasOwnProperty;function nQe(t){var e=this.__data__;return eQe?e[t]!==void 0:rQe.call(e,t)}var iQe=nQe,sQe=g7,aQe="__lodash_hash_undefined__";function oQe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=sQe&&e===void 0?aQe:e,this}var lQe=oQe,cQe=HZe,uQe=GZe,dQe=JZe,hQe=iQe,fQe=lQe;function a5(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}a5.prototype.clear=cQe;a5.prototype.delete=uQe;a5.prototype.get=dQe;a5.prototype.has=hQe;a5.prototype.set=fQe;var mQe=a5;function pQe(){this.__data__=[],this.size=0}var gQe=pQe;function xQe(t,e){return t===e||t!==t&&e!==e}var jZ=xQe,vQe=jZ;function yQe(t,e){for(var r=t.length;r--;)if(vQe(t[r][0],e))return r;return-1}var x7=yQe,bQe=x7,wQe=Array.prototype,_Qe=wQe.splice;function NQe(t){var e=this.__data__,r=bQe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():_Qe.call(e,r,1),--this.size,!0}var SQe=NQe,EQe=x7;function jQe(t){var e=this.__data__,r=EQe(e,t);return r<0?void 0:e[r][1]}var AQe=jQe,CQe=x7;function TQe(t){return CQe(this.__data__,t)>-1}var PQe=TQe,kQe=x7;function OQe(t,e){var r=this.__data__,n=kQe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var IQe=OQe,RQe=gQe,DQe=SQe,MQe=AQe,LQe=PQe,FQe=IQe;function o5(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}o5.prototype.clear=RQe;o5.prototype.delete=DQe;o5.prototype.get=MQe;o5.prototype.has=LQe;o5.prototype.set=FQe;var v7=o5,BQe=fN,$Qe=$g,UQe=BQe($Qe,"Map"),AZ=UQe,Gse=mQe,zQe=v7,VQe=AZ;function qQe(){this.size=0,this.__data__={hash:new Gse,map:new(VQe||zQe),string:new Gse}}var HQe=qQe;function WQe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var GQe=WQe,KQe=GQe;function XQe(t,e){var r=t.__data__;return KQe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var y7=XQe,YQe=y7;function ZQe(t){var e=YQe(this,t).delete(t);return this.size-=e?1:0,e}var QQe=ZQe,JQe=y7;function eJe(t){return JQe(this,t).get(t)}var tJe=eJe,rJe=y7;function nJe(t){return rJe(this,t).has(t)}var iJe=nJe,sJe=y7;function aJe(t,e){var r=sJe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var oJe=aJe,lJe=HQe,cJe=QQe,uJe=tJe,dJe=iJe,hJe=oJe;function l5(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l5.prototype.clear=lJe;l5.prototype.delete=cJe;l5.prototype.get=uJe;l5.prototype.has=dJe;l5.prototype.set=hJe;var CZ=l5,qbe=CZ,fJe="Expected a function";function TZ(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(fJe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(TZ.Cache||qbe),r}TZ.Cache=qbe;var Hbe=TZ;const mJe=Vi(Hbe);var pJe=Hbe,gJe=500;function xJe(t){var e=pJe(t,function(n){return r.size===gJe&&r.clear(),n}),r=e.cache;return e}var vJe=xJe,yJe=vJe,bJe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wJe=/\\(\\)?/g,_Je=yJe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bJe,function(r,n,i,s){e.push(i?s.replace(wJe,"$1"):n||r)}),e}),NJe=_Je;function SJe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var PZ=SJe,Kse=vI,EJe=PZ,jJe=xh,AJe=i5,CJe=1/0,Xse=Kse?Kse.prototype:void 0,Yse=Xse?Xse.toString:void 0;function Wbe(t){if(typeof t=="string")return t;if(jJe(t))return EJe(t,Wbe)+"";if(AJe(t))return Yse?Yse.call(t):"";var e=t+"";return e=="0"&&1/t==-CJe?"-0":e}var TJe=Wbe,PJe=TJe;function kJe(t){return t==null?"":PJe(t)}var Gbe=kJe,OJe=xh,IJe=SZ,RJe=NJe,DJe=Gbe;function MJe(t,e){return OJe(t)?t:IJe(t,e)?[t]:RJe(DJe(t))}var Kbe=MJe,LJe=i5,FJe=1/0;function BJe(t){if(typeof t=="string"||LJe(t))return t;var e=t+"";return e=="0"&&1/t==-FJe?"-0":e}var b7=BJe,$Je=Kbe,UJe=b7;function zJe(t,e){e=$Je(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[UJe(e[r++])];return r&&r==n?t:void 0}var kZ=zJe,VJe=kZ;function qJe(t,e,r){var n=t==null?void 0:VJe(t,e);return n===void 0?r:n}var Xbe=qJe;const Tf=Vi(Xbe);function HJe(t){return t==null}var WJe=HJe;const Mn=Vi(WJe);var GJe=Uv,KJe=xh,XJe=zv,YJe="[object String]";function ZJe(t){return typeof t=="string"||!KJe(t)&&XJe(t)&&GJe(t)==YJe}var QJe=ZJe;const K_=Vi(QJe);var Ybe={exports:{}},Ws={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OZ=Symbol.for("react.element"),IZ=Symbol.for("react.portal"),w7=Symbol.for("react.fragment"),_7=Symbol.for("react.strict_mode"),N7=Symbol.for("react.profiler"),S7=Symbol.for("react.provider"),E7=Symbol.for("react.context"),JJe=Symbol.for("react.server_context"),j7=Symbol.for("react.forward_ref"),A7=Symbol.for("react.suspense"),C7=Symbol.for("react.suspense_list"),T7=Symbol.for("react.memo"),P7=Symbol.for("react.lazy"),eet=Symbol.for("react.offscreen"),Zbe;Zbe=Symbol.for("react.module.reference");function Um(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case OZ:switch(t=t.type,t){case w7:case N7:case _7:case A7:case C7:return t;default:switch(t=t&&t.$$typeof,t){case JJe:case E7:case j7:case P7:case T7:case S7:return t;default:return e}}case IZ:return e}}}Ws.ContextConsumer=E7;Ws.ContextProvider=S7;Ws.Element=OZ;Ws.ForwardRef=j7;Ws.Fragment=w7;Ws.Lazy=P7;Ws.Memo=T7;Ws.Portal=IZ;Ws.Profiler=N7;Ws.StrictMode=_7;Ws.Suspense=A7;Ws.SuspenseList=C7;Ws.isAsyncMode=function(){return!1};Ws.isConcurrentMode=function(){return!1};Ws.isContextConsumer=function(t){return Um(t)===E7};Ws.isContextProvider=function(t){return Um(t)===S7};Ws.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===OZ};Ws.isForwardRef=function(t){return Um(t)===j7};Ws.isFragment=function(t){return Um(t)===w7};Ws.isLazy=function(t){return Um(t)===P7};Ws.isMemo=function(t){return Um(t)===T7};Ws.isPortal=function(t){return Um(t)===IZ};Ws.isProfiler=function(t){return Um(t)===N7};Ws.isStrictMode=function(t){return Um(t)===_7};Ws.isSuspense=function(t){return Um(t)===A7};Ws.isSuspenseList=function(t){return Um(t)===C7};Ws.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===w7||t===N7||t===_7||t===A7||t===C7||t===eet||typeof t=="object"&&t!==null&&(t.$$typeof===P7||t.$$typeof===T7||t.$$typeof===S7||t.$$typeof===E7||t.$$typeof===j7||t.$$typeof===Zbe||t.getModuleId!==void 0)};Ws.typeOf=Um;Ybe.exports=Ws;var tet=Ybe.exports,ret=Uv,net=zv,iet="[object Number]";function set(t){return typeof t=="number"||net(t)&&ret(t)==iet}var Qbe=set;const aet=Vi(Qbe);var oet=Qbe;function cet(t){return oet(t)&&t!=+t}var uet=cet;const c5=Vi(uet);var wd=function(e){return e===0?0:e>0?1:-1},Uw=function(e){return K_(e)&&e.indexOf("%")===e.length-1},jr=function(e){return aet(e)&&!c5(e)},det=function(e){return Mn(e)},Yl=function(e){return jr(e)||K_(e)},het=0,Kb=function(e){var r=++het;return"".concat(e||"").concat(r)},_d=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!jr(e)&&!K_(e))return n;var s;if(Uw(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return c5(s)&&(s=n),i&&s>r&&(s=r),s},j1=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},fet=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},go=function(e,r){return jr(e)&&jr(r)?function(n){return e+n*(r-e)}:function(){return r}};function u8(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Tf(n,e))===r})}var met=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,i=0,s=0,o=0,l=1/0,c=-1/0,u=0,d=0,h=0;h<r;h++)u=e[h].cx||0,d=e[h].cy||0,n+=u,i+=d,s+=u*d,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var f=r*o!==n*n?(r*s-n*i)/(r*o-n*n):0;return{xmin:l,xmax:c,a:f,b:(i-f*n)/r}},pet=function(e,r){return jr(e)&&jr(r)?e-r:K_(e)&&K_(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function yE(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function zq(t){"@babel/helpers - typeof";return zq=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zq(t)}var get=["viewBox","children"],xet=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Zse=["points","pathLength"],M$={svg:get,polygon:Zse,polyline:Zse},RZ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],d8=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),!s5(n))return null;var i={};return Object.keys(n).forEach(function(s){RZ.includes(s)&&(i[s]=r||function(o){return n[s](n,o)})}),i},vet=function(e,r,n){return function(i){return e(r,n,i),null}},Eb=function(e,r,n){if(!s5(e)||zq(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];RZ.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=vet(o,r,n))}),i},yet=["children"],bet=["children"];function Qse(t,e){if(t==null)return{};var r=wet(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wet(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vq(t){"@babel/helpers - typeof";return Vq=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vq(t)}var Jse={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},lv=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},eae=null,L$=null,DZ=function t(e){if(e===eae&&Array.isArray(L$))return L$;var r=[];return C.Children.forEach(e,function(n){Mn(n)||(tet.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),L$=r,eae=e,r};function Cd(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return lv(i)}):n=[lv(e)],DZ(t).forEach(function(i){var s=Tf(i,"type.displayName")||Tf(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function uf(t,e){var r=Cd(t,e);return r&&r[0]}var tae=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!jr(n)||n<=0||!jr(i)||i<=0)},_et=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Net=function(e){return e&&e.type&&K_(e.type)&&_et.indexOf(e.type)>=0},Jbe=function(e){return e&&Vq(e)==="object"&&"clipDot"in e},Eet=function(e,r,n,i){var s,o=(s=M$==null?void 0:M$[i])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Fn(e)&&(i&&o.includes(r)||xet.includes(r))||n&&RZ.includes(r)},bn=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(C.isValidElement(e)&&(i=e.props),!s5(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;Eet((l=i)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=i[o])}),s},qq=function t(e,r){if(e===r)return!0;var n=C.Children.count(e);if(n!==C.Children.count(r))return!1;if(n===0)return!0;if(n===1)return rae(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=e[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!rae(s,o))return!1}return!0},rae=function(e,r){if(Mn(e)&&Mn(r))return!0;if(!Mn(e)&&!Mn(r)){var n=e.props||{},i=n.children,s=Qse(n,yet),o=r.props||{},l=o.children,c=Qse(o,bet);return i&&l?yE(s,c)&&qq(i,l):!i&&!l?yE(s,c):!1}return!1},nae=function(e,r){var n=[],i={};return DZ(e).forEach(function(s,o){if(Net(s))n.push(s);else if(s){var l=lv(s.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var h=u(s,l,o);n.push(h),i[l]=!0}}}),n},jet=function(e){var r=e&&e.type;return r&&Jse[r]?Jse[r]:null},Aet=function(e,r){return DZ(r).indexOf(e)},Cet=["children","width","height","viewBox","className","style","title","desc"];function Hq(){return Hq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hq.apply(this,arguments)}function Tet(t,e){if(t==null)return{};var r=Pet(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pet(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wq(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=Tet(t,Cet),d=i||{width:r,height:n,x:0,y:0},h=Gn("recharts-surface",s);return be.createElement("svg",Hq({},bn(u,!0,"svg"),{className:h,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),be.createElement("title",null,l),be.createElement("desc",null,c),e)}var ket=["children","className"];function Gq(){return Gq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gq.apply(this,arguments)}function Oet(t,e){if(t==null)return{};var r=Iet(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Iet(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ni=be.forwardRef(function(t,e){var r=t.children,n=t.className,i=Oet(t,ket),s=Gn("recharts-layer",n);return be.createElement("g",Gq({className:s},bn(i,!0),{ref:e}),r)}),Xp=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function Ret(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}var Det=Ret,Met=Det;function Let(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Met(t,e,r)}var Fet=Let,Bet="\\ud800-\\udfff",$et="\\u0300-\\u036f",Uet="\\ufe20-\\ufe2f",zet="\\u20d0-\\u20ff",Vet=$et+Uet+zet,qet="\\ufe0e\\ufe0f",Het="\\u200d",Wet=RegExp("["+Het+Bet+Vet+qet+"]");function Get(t){return Wet.test(t)}var ewe=Get;function Ket(t){return t.split("")}var Xet=Ket,twe="\\ud800-\\udfff",Yet="\\u0300-\\u036f",Zet="\\ufe20-\\ufe2f",Qet="\\u20d0-\\u20ff",Jet=Yet+Zet+Qet,ett="\\ufe0e\\ufe0f",ttt="["+twe+"]",Kq="["+Jet+"]",Xq="\\ud83c[\\udffb-\\udfff]",rtt="(?:"+Kq+"|"+Xq+")",rwe="[^"+twe+"]",nwe="(?:\\ud83c[\\udde6-\\uddff]){2}",iwe="[\\ud800-\\udbff][\\udc00-\\udfff]",ntt="\\u200d",swe=rtt+"?",awe="["+ett+"]?",itt="(?:"+ntt+"(?:"+[rwe,nwe,iwe].join("|")+")"+awe+swe+")*",stt=awe+swe+itt,att="(?:"+[rwe+Kq+"?",Kq,nwe,iwe,ttt].join("|")+")",ott=RegExp(Xq+"(?="+Xq+")|"+att+stt,"g");function ltt(t){return t.match(ott)||[]}var ctt=ltt,utt=Xet,dtt=ewe,htt=ctt;function ftt(t){return dtt(t)?htt(t):utt(t)}var mtt=ftt,ptt=Fet,gtt=ewe,xtt=mtt,vtt=Gbe;function ytt(t){return function(e){e=vtt(e);var r=gtt(e)?xtt(e):void 0,n=r?r[0]:e.charAt(0),i=r?ptt(r,1).join(""):e.slice(1);return n[t]()+i}}var btt=ytt,wtt=btt,_tt=wtt("toUpperCase"),Ntt=_tt;const k7=Vi(Ntt);function xa(t){return function(){return t}}const owe=Math.cos,h8=Math.sin,d0=Math.sqrt,f8=Math.PI,O7=2*f8,Yq=Math.PI,Zq=2*Yq,yw=1e-6,Stt=Zq-yw;function lwe(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Ett(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return lwe;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class jtt{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?lwe:Ett(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=i-r,d=o-e,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>yw)if(!(Math.abs(h*c-u*d)>yw)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,x=i-l,g=c*c+u*u,y=m*m+x*x,w=Math.sqrt(g),S=Math.sqrt(f),E=s*Math.tan((Yq-Math.acos((g+f-y)/(2*w*S)))/2),j=E/S,T=E/w;Math.abs(j-1)>yw&&this._append`L${e+j*d},${r+j*h}`,this._append`A${s},${s},0,0,${+(h*m>d*x)},${this._x1=e+T*c},${this._y1=r+T*u}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=e+l,d=r+c,h=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>yw||Math.abs(this._y1-d)>yw)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%Zq+Zq),f>Stt?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:f>yw&&this._append`A${n},${n},0,${+(f>=Yq)},${h},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function MZ(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new jtt(e)}function LZ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function cwe(t){this._context=t}cwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function I7(t){return new cwe(t)}function uwe(t){return t[0]}function dwe(t){return t[1]}function hwe(t,e){var r=xa(!0),n=null,i=I7,s=null,o=MZ(l);t=typeof t=="function"?t:t===void 0?uwe:xa(t),e=typeof e=="function"?e:e===void 0?dwe:xa(e);function l(c){var u,d=(c=LZ(c)).length,h,f=!1,m;for(n==null&&(s=i(m=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,u,c),+e(h,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:xa(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:xa(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:xa(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),l):n},l}function XR(t,e,r){var n=null,i=xa(!0),s=null,o=I7,l=null,c=MZ(u);t=typeof t=="function"?t:t===void 0?uwe:xa(+t),e=typeof e=="function"?e:xa(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?dwe:xa(+r);function u(h){var f,m,x,g=(h=LZ(h)).length,y,w=!1,S,E=new Array(g),j=new Array(g);for(s==null&&(l=o(S=c())),f=0;f<=g;++f){if(!(f<g&&i(y=h[f],f,h))===w)if(w=!w)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=f-1;x>=m;--x)l.point(E[x],j[x]);l.lineEnd(),l.areaEnd()}w&&(E[f]=+t(y,f,h),j[f]=+e(y,f,h),l.point(n?+n(y,f,h):E[f],r?+r(y,f,h):j[f]))}if(S)return l=null,S+""||null}function d(){return hwe().defined(i).curve(o).context(s)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:xa(+h),n=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:xa(+h),u):t},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:xa(+h),u):n},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:xa(+h),r=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:xa(+h),u):e},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:xa(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:xa(!!h),u):i},u.curve=function(h){return arguments.length?(o=h,s!=null&&(l=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=l=null:l=o(s=h),u):s},u}class fwe{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Att(t){return new fwe(t,!0)}function Ctt(t){return new fwe(t,!1)}const FZ={draw(t,e){const r=d0(e/f8);t.moveTo(r,0),t.arc(0,0,r,0,O7)}},Ttt={draw(t,e){const r=d0(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},mwe=d0(1/3),Ptt=mwe*2,ktt={draw(t,e){const r=d0(e/Ptt),n=r*mwe;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Ott={draw(t,e){const r=d0(e),n=-r/2;t.rect(n,n,r,r)}},Itt=.8908130915292852,pwe=h8(f8/10)/h8(7*f8/10),Rtt=h8(O7/10)*pwe,Dtt=-owe(O7/10)*pwe,Mtt={draw(t,e){const r=d0(e*Itt),n=Rtt*r,i=Dtt*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const o=O7*s/5,l=owe(o),c=h8(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*i,c*n+l*i)}t.closePath()}},F$=d0(3),Ltt={draw(t,e){const r=-d0(e/(F$*3));t.moveTo(0,r*2),t.lineTo(-F$*r,-r),t.lineTo(F$*r,-r),t.closePath()}},Hf=-.5,Wf=d0(3)/2,Qq=1/d0(12),Ftt=(Qq/2+1)*3,Btt={draw(t,e){const r=d0(e/Ftt),n=r/2,i=r*Qq,s=n,o=r*Qq+r,l=-s,c=o;t.moveTo(n,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Hf*n-Wf*i,Wf*n+Hf*i),t.lineTo(Hf*s-Wf*o,Wf*s+Hf*o),t.lineTo(Hf*l-Wf*c,Wf*l+Hf*c),t.lineTo(Hf*n+Wf*i,Hf*i-Wf*n),t.lineTo(Hf*s+Wf*o,Hf*o-Wf*s),t.lineTo(Hf*l+Wf*c,Hf*c-Wf*l),t.closePath()}};function $tt(t,e){let r=null,n=MZ(i);t=typeof t=="function"?t:xa(t||FZ),e=typeof e=="function"?e:xa(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:xa(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:xa(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function m8(){}function p8(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function gwe(t){this._context=t}gwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p8(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p8(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Utt(t){return new gwe(t)}function xwe(t){this._context=t}xwe.prototype={areaStart:m8,areaEnd:m8,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:p8(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ztt(t){return new xwe(t)}function vwe(t){this._context=t}vwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:p8(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vtt(t){return new vwe(t)}function ywe(t){this._context=t}ywe.prototype={areaStart:m8,areaEnd:m8,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qtt(t){return new ywe(t)}function iae(t){return t<0?-1:1}function sae(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),l=(s*i+o*n)/(n+i);return(iae(s)+iae(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function aae(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function B$(t,e,r){var n=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,i+l*e,s-l,o-l*r,s,o)}function g8(t){this._context=t}g8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:B$(this,this._t0,aae(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,B$(this,aae(this,r=sae(this,t,e)),r);break;default:B$(this,this._t0,r=sae(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function bwe(t){this._context=new wwe(t)}(bwe.prototype=Object.create(g8.prototype)).point=function(t,e){g8.prototype.point.call(this,e,t)};function wwe(t){this._context=t}wwe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function Htt(t){return new g8(t)}function Wtt(t){return new bwe(t)}function _we(t){this._context=t}_we.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=oae(t),i=oae(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function oae(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Gtt(t){return new _we(t)}function R7(t,e){this._context=t,this._t=e}R7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Ktt(t){return new R7(t,.5)}function Xtt(t){return new R7(t,0)}function Ytt(t){return new R7(t,1)}function UA(t,e){if((o=t.length)>1)for(var r=1,n,i,s=t[e[0]],o,l=s.length;r<o;++r)for(i=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Jq(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ztt(t,e){return t[e]}function Qtt(t){const e=[];return e.key=t,e}function Jtt(){var t=xa([]),e=Jq,r=UA,n=Ztt;function i(s){var o=Array.from(t.apply(this,arguments),Qtt),l,c=o.length,u=-1,d;for(const h of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,s)]).data=h;for(l=0,d=LZ(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:xa(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:xa(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?Jq:typeof s=="function"?s:xa(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??UA,i):r},i}function ert(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}UA(t,e)}}function trt(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var o=0,l=0;o<i;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}UA(t,e)}}function rrt(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[n][1]||0,f=d[n-1][1]||0,m=(h-f)/2,x=0;x<l;++x){var g=t[e[x]],y=g[n][1]||0,w=g[n-1][1]||0;m+=y-w}c+=h,u+=m*h}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,UA(t,e)}}function Y3(t){"@babel/helpers - typeof";return Y3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y3(t)}var nrt=["type","size","sizeType"];function eH(){return eH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eH.apply(this,arguments)}function lae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lae(Object(r),!0).forEach(function(n){irt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function irt(t,e,r){return e=srt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function srt(t){var e=art(t,"string");return Y3(e)=="symbol"?e:e+""}function art(t,e){if(Y3(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Y3(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ort(t,e){if(t==null)return{};var r=lrt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lrt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Nwe={symbolCircle:FZ,symbolCross:Ttt,symbolDiamond:ktt,symbolSquare:Ott,symbolStar:Mtt,symbolTriangle:Ltt,symbolWye:Btt},crt=Math.PI/180,urt=function(e){var r="symbol".concat(k7(e));return Nwe[r]||FZ},drt=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*crt;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hrt=function(e,r){Nwe["symbol".concat(k7(e))]=r},D7=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=ort(e,nrt),u=cae(cae({},c),{},{type:n,size:s,sizeType:l}),d=function(){var y=urt(n),w=$tt().type(y).size(drt(s,l,n));return w()},h=u.className,f=u.cx,m=u.cy,x=bn(u,!0);return f===+f&&m===+m&&s===+s?be.createElement("path",eH({},x,{className:Gn("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};D7.registerSymbol=hrt;function zA(t){"@babel/helpers - typeof";return zA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zA(t)}function tH(){return tH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tH.apply(this,arguments)}function uae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function frt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uae(Object(r),!0).forEach(function(n){Z3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mrt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function prt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ewe(n.key),n)}}function grt(t,e,r){return e&&prt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xrt(t,e,r){return e=x8(e),vrt(t,Swe()?Reflect.construct(e,r||[],x8(t).constructor):e.apply(t,r))}function vrt(t,e){if(e&&(zA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yrt(t)}function yrt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Swe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Swe=function(){return!!t})()}function x8(t){return x8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x8(t)}function brt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rH(t,e)}function rH(t,e){return rH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rH(t,e)}function Z3(t,e,r){return e=Ewe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ewe(t){var e=wrt(t,"string");return zA(e)=="symbol"?e:e+""}function wrt(t,e){if(zA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gf=32,BZ=function(t){function e(){return mrt(this,e),xrt(this,e,arguments)}return brt(e,t),grt(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=Gf/2,o=Gf/6,l=Gf/3,c=n.inactive?i:n.color;if(n.type==="plainline")return be.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Gf,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return be.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Gf,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return be.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gf/8,"h").concat(Gf,"v").concat(Gf*3/4,"h").concat(-Gf,"z"),className:"recharts-legend-icon"});if(be.isValidElement(n.legendIcon)){var u=frt({},n);return delete u.legendIcon,be.cloneElement(n.legendIcon,u)}return be.createElement(D7,{fill:c,cx:s,cy:s,size:Gf,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Gf,height:Gf},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,x){var g=m.formatter||c,y=Gn(Z3(Z3({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=Fn(m.value)?null:m.value;Xp(!Fn(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=m.inactive?u:m.color;return be.createElement("li",tH({className:y,style:h,key:"legend-item-".concat(x)},Eb(n.props,m,x)),be.createElement(Wq,{width:o,height:o,viewBox:d,style:f},n.renderIcon(m)),be.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},g?g(w,m,x):w))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,o=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return be.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(C.PureComponent);Z3(BZ,"displayName","Legend");Z3(BZ,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _rt=v7;function Nrt(){this.__data__=new _rt,this.size=0}var Srt=Nrt;function Ert(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var jrt=Ert;function Art(t){return this.__data__.get(t)}var Crt=Art;function Trt(t){return this.__data__.has(t)}var Prt=Trt,krt=v7,Ort=AZ,Irt=CZ,Rrt=200;function Drt(t,e){var r=this.__data__;if(r instanceof krt){var n=r.__data__;if(!Ort||n.length<Rrt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Irt(n)}return r.set(t,e),this.size=r.size,this}var Mrt=Drt,Lrt=v7,Frt=Srt,Brt=jrt,$rt=Crt,Urt=Prt,zrt=Mrt;function u5(t){var e=this.__data__=new Lrt(t);this.size=e.size}u5.prototype.clear=Frt;u5.prototype.delete=Brt;u5.prototype.get=$rt;u5.prototype.has=Urt;u5.prototype.set=zrt;var jwe=u5,Vrt="__lodash_hash_undefined__";function qrt(t){return this.__data__.set(t,Vrt),this}var Hrt=qrt;function Wrt(t){return this.__data__.has(t)}var Grt=Wrt,Krt=CZ,Xrt=Hrt,Yrt=Grt;function v8(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Krt;++e<r;)this.add(t[e])}v8.prototype.add=v8.prototype.push=Xrt;v8.prototype.has=Yrt;var Awe=v8;function Zrt(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Cwe=Zrt;function Qrt(t,e){return t.has(e)}var Twe=Qrt,Jrt=Awe,ent=Cwe,tnt=Twe,rnt=1,nnt=2;function int(t,e,r,n,i,s){var o=r&rnt,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,m=r&nnt?new Jrt:void 0;for(s.set(t,e),s.set(e,t);++h<l;){var x=t[h],g=e[h];if(n)var y=o?n(g,x,h,e,t,s):n(x,g,h,t,e,s);if(y!==void 0){if(y)continue;f=!1;break}if(m){if(!ent(e,function(w,S){if(!tnt(m,S)&&(x===w||i(x,w,r,n,s)))return m.push(S)})){f=!1;break}}else if(!(x===g||i(x,g,r,n,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var Pwe=int,snt=$g,ant=snt.Uint8Array,ont=ant;function lnt(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var cnt=lnt;function unt(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var $Z=unt,dae=vI,hae=ont,dnt=jZ,hnt=Pwe,fnt=cnt,mnt=$Z,pnt=1,gnt=2,xnt="[object Boolean]",vnt="[object Date]",ynt="[object Error]",bnt="[object Map]",wnt="[object Number]",_nt="[object RegExp]",Nnt="[object Set]",Snt="[object String]",Ent="[object Symbol]",jnt="[object ArrayBuffer]",Ant="[object DataView]",fae=dae?dae.prototype:void 0,$$=fae?fae.valueOf:void 0;function Cnt(t,e,r,n,i,s,o){switch(r){case Ant:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case jnt:return!(t.byteLength!=e.byteLength||!s(new hae(t),new hae(e)));case xnt:case vnt:case wnt:return dnt(+t,+e);case ynt:return t.name==e.name&&t.message==e.message;case _nt:case Snt:return t==e+"";case bnt:var l=fnt;case Nnt:var c=n&pnt;if(l||(l=mnt),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=gnt,o.set(t,e);var d=hnt(l(t),l(e),n,i,s,o);return o.delete(t),d;case Ent:if($$)return $$.call(t)==$$.call(e)}return!1}var Tnt=Cnt;function Pnt(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var kwe=Pnt,knt=kwe,Ont=xh;function Int(t,e,r){var n=e(t);return Ont(t)?n:knt(n,r(t))}var Rnt=Int;function Dnt(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}var Mnt=Dnt;function Lnt(){return[]}var Fnt=Lnt,Bnt=Mnt,$nt=Fnt,Unt=Object.prototype,znt=Unt.propertyIsEnumerable,mae=Object.getOwnPropertySymbols,Vnt=mae?function(t){return t==null?[]:(t=Object(t),Bnt(mae(t),function(e){return znt.call(t,e)}))}:$nt,qnt=Vnt;function Hnt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Wnt=Hnt,Gnt=Uv,Knt=zv,Xnt="[object Arguments]";function Ynt(t){return Knt(t)&&Gnt(t)==Xnt}var Znt=Ynt,pae=Znt,Qnt=zv,Owe=Object.prototype,Jnt=Owe.hasOwnProperty,eit=Owe.propertyIsEnumerable,tit=pae(function(){return arguments}())?pae:function(t){return Qnt(t)&&Jnt.call(t,"callee")&&!eit.call(t,"callee")},UZ=tit,y8={exports:{}};function rit(){return!1}var nit=rit;y8.exports;(function(t,e){var r=$g,n=nit,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(y8,y8.exports);var Iwe=y8.exports,iit=9007199254740991,sit=/^(?:0|[1-9]\d*)$/;function ait(t,e){var r=typeof t;return e=e??iit,!!e&&(r=="number"||r!="symbol"&&sit.test(t))&&t>-1&&t%1==0&&t<e}var zZ=ait,oit=9007199254740991;function lit(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=oit}var VZ=lit,cit=Uv,uit=VZ,dit=zv,hit="[object Arguments]",fit="[object Array]",mit="[object Boolean]",pit="[object Date]",git="[object Error]",xit="[object Function]",vit="[object Map]",yit="[object Number]",bit="[object Object]",wit="[object RegExp]",_it="[object Set]",Nit="[object String]",Sit="[object WeakMap]",Eit="[object ArrayBuffer]",jit="[object DataView]",Ait="[object Float32Array]",Cit="[object Float64Array]",Tit="[object Int8Array]",Pit="[object Int16Array]",kit="[object Int32Array]",Oit="[object Uint8Array]",Iit="[object Uint8ClampedArray]",Rit="[object Uint16Array]",Dit="[object Uint32Array]",Ta={};Ta[Ait]=Ta[Cit]=Ta[Tit]=Ta[Pit]=Ta[kit]=Ta[Oit]=Ta[Iit]=Ta[Rit]=Ta[Dit]=!0;Ta[hit]=Ta[fit]=Ta[Eit]=Ta[mit]=Ta[jit]=Ta[pit]=Ta[git]=Ta[xit]=Ta[vit]=Ta[yit]=Ta[bit]=Ta[wit]=Ta[_it]=Ta[Nit]=Ta[Sit]=!1;function Mit(t){return dit(t)&&uit(t.length)&&!!Ta[cit(t)]}var Lit=Mit;function Fit(t){return function(e){return t(e)}}var Rwe=Fit,b8={exports:{}};b8.exports;(function(t,e){var r=Ube,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(b8,b8.exports);var Bit=b8.exports,$it=Lit,Uit=Rwe,gae=Bit,xae=gae&&gae.isTypedArray,zit=xae?Uit(xae):$it,Dwe=zit,Vit=Wnt,qit=UZ,Hit=xh,Wit=Iwe,Git=zZ,Kit=Dwe,Xit=Object.prototype,Yit=Xit.hasOwnProperty;function Zit(t,e){var r=Hit(t),n=!r&&qit(t),i=!r&&!n&&Wit(t),s=!r&&!n&&!i&&Kit(t),o=r||n||i||s,l=o?Vit(t.length,String):[],c=l.length;for(var u in t)(e||Yit.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Git(u,c)))&&l.push(u);return l}var Qit=Zit,Jit=Object.prototype;function est(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Jit;return t===r}var tst=est;function rst(t,e){return function(r){return t(e(r))}}var Mwe=rst,nst=Mwe,ist=nst(Object.keys,Object),sst=ist,ast=tst,ost=sst,lst=Object.prototype,cst=lst.hasOwnProperty;function ust(t){if(!ast(t))return ost(t);var e=[];for(var r in Object(t))cst.call(t,r)&&r!="constructor"&&e.push(r);return e}var dst=ust,hst=EZ,fst=VZ;function mst(t){return t!=null&&fst(t.length)&&!hst(t)}var yI=mst,pst=Qit,gst=dst,xst=yI;function vst(t){return xst(t)?pst(t):gst(t)}var M7=vst,yst=Rnt,bst=qnt,wst=M7;function _st(t){return yst(t,wst,bst)}var Nst=_st,vae=Nst,Sst=1,Est=Object.prototype,jst=Est.hasOwnProperty;function Ast(t,e,r,n,i,s){var o=r&Sst,l=vae(t),c=l.length,u=vae(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:jst.call(e,f)))return!1}var m=s.get(t),x=s.get(e);if(m&&x)return m==e&&x==t;var g=!0;s.set(t,e),s.set(e,t);for(var y=o;++h<c;){f=l[h];var w=t[f],S=e[f];if(n)var E=o?n(S,w,f,e,t,s):n(w,S,f,t,e,s);if(!(E===void 0?w===S||i(w,S,r,n,s):E)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var j=t.constructor,T=e.constructor;j!=T&&"constructor"in t&&"constructor"in e&&!(typeof j=="function"&&j instanceof j&&typeof T=="function"&&T instanceof T)&&(g=!1)}return s.delete(t),s.delete(e),g}var Cst=Ast,Tst=fN,Pst=$g,kst=Tst(Pst,"DataView"),Ost=kst,Ist=fN,Rst=$g,Dst=Ist(Rst,"Promise"),Mst=Dst,Lst=fN,Fst=$g,Bst=Lst(Fst,"Set"),Lwe=Bst,$st=fN,Ust=$g,zst=$st(Ust,"WeakMap"),Vst=zst,nH=Ost,iH=AZ,sH=Mst,aH=Lwe,oH=Vst,Fwe=Uv,d5=Vbe,yae="[object Map]",qst="[object Object]",bae="[object Promise]",wae="[object Set]",_ae="[object WeakMap]",Nae="[object DataView]",Hst=d5(nH),Wst=d5(iH),Gst=d5(sH),Kst=d5(aH),Xst=d5(oH),bw=Fwe;(nH&&bw(new nH(new ArrayBuffer(1)))!=Nae||iH&&bw(new iH)!=yae||sH&&bw(sH.resolve())!=bae||aH&&bw(new aH)!=wae||oH&&bw(new oH)!=_ae)&&(bw=function(t){var e=Fwe(t),r=e==qst?t.constructor:void 0,n=r?d5(r):"";if(n)switch(n){case Hst:return Nae;case Wst:return yae;case Gst:return bae;case Kst:return wae;case Xst:return _ae}return e});var Yst=bw,U$=jwe,Zst=Pwe,Qst=Tnt,Jst=Cst,Sae=Yst,Eae=xh,jae=Iwe,eat=Dwe,tat=1,Aae="[object Arguments]",Cae="[object Array]",YR="[object Object]",rat=Object.prototype,Tae=rat.hasOwnProperty;function nat(t,e,r,n,i,s){var o=Eae(t),l=Eae(e),c=o?Cae:Sae(t),u=l?Cae:Sae(e);c=c==Aae?YR:c,u=u==Aae?YR:u;var d=c==YR,h=u==YR,f=c==u;if(f&&jae(t)){if(!jae(e))return!1;o=!0,d=!1}if(f&&!d)return s||(s=new U$),o||eat(t)?Zst(t,e,r,n,i,s):Qst(t,e,c,r,n,i,s);if(!(r&tat)){var m=d&&Tae.call(t,"__wrapped__"),x=h&&Tae.call(e,"__wrapped__");if(m||x){var g=m?t.value():t,y=x?e.value():e;return s||(s=new U$),i(g,y,r,n,s)}}return f?(s||(s=new U$),Jst(t,e,r,n,i,s)):!1}var iat=nat,sat=iat,Pae=zv;function Bwe(t,e,r,n,i){return t===e?!0:t==null||e==null||!Pae(t)&&!Pae(e)?t!==t&&e!==e:sat(t,e,r,n,Bwe,i)}var qZ=Bwe,aat=jwe,oat=qZ,lat=1,cat=2;function uat(t,e,r,n){var i=r.length,s=i,o=!n;if(t==null)return!s;for(t=Object(t);i--;){var l=r[i];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<s;){l=r[i];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new aat;if(n)var f=n(u,d,c,t,e,h);if(!(f===void 0?oat(d,u,lat|cat,n,h):f))return!1}}return!0}var dat=uat,hat=Gb;function fat(t){return t===t&&!hat(t)}var $we=fat,mat=$we,pat=M7;function gat(t){for(var e=pat(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,mat(i)]}return e}var xat=gat;function vat(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Uwe=vat,yat=dat,bat=xat,wat=Uwe;function _at(t){var e=bat(t);return e.length==1&&e[0][2]?wat(e[0][0],e[0][1]):function(r){return r===t||yat(r,t,e)}}var Nat=_at;function Sat(t,e){return t!=null&&e in Object(t)}var Eat=Sat,jat=Kbe,Aat=UZ,Cat=xh,Tat=zZ,Pat=VZ,kat=b7;function Oat(t,e,r){e=jat(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var o=kat(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&Pat(i)&&Tat(o,i)&&(Cat(t)||Aat(t)))}var Iat=Oat,Rat=Eat,Dat=Iat;function Mat(t,e){return t!=null&&Dat(t,e,Rat)}var Lat=Mat,Fat=qZ,Bat=Xbe,$at=Lat,Uat=SZ,zat=$we,Vat=Uwe,qat=b7,Hat=1,Wat=2;function Gat(t,e){return Uat(t)&&zat(e)?Vat(qat(t),e):function(r){var n=Bat(r,t);return n===void 0&&n===e?$at(r,t):Fat(e,n,Hat|Wat)}}var Kat=Gat;function Xat(t){return t}var h5=Xat;function Yat(t){return function(e){return e==null?void 0:e[t]}}var Zat=Yat,Qat=kZ;function Jat(t){return function(e){return Qat(e,t)}}var eot=Jat,tot=Zat,rot=eot,not=SZ,iot=b7;function sot(t){return not(t)?tot(iot(t)):rot(t)}var aot=sot,oot=Nat,lot=Kat,cot=h5,uot=xh,dot=aot;function hot(t){return typeof t=="function"?t:t==null?cot:typeof t=="object"?uot(t)?lot(t[0],t[1]):oot(t):dot(t)}var Ug=hot;function fot(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var zwe=fot;function mot(t){return t!==t}var pot=mot;function got(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var xot=got,vot=zwe,yot=pot,bot=xot;function wot(t,e,r){return e===e?bot(t,e,r):vot(t,yot,r)}var _ot=wot,Not=_ot;function Sot(t,e){var r=t==null?0:t.length;return!!r&&Not(t,e,0)>-1}var Eot=Sot;function jot(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Aot=jot;function Cot(){}var Tot=Cot,z$=Lwe,Pot=Tot,kot=$Z,Oot=1/0,Iot=z$&&1/kot(new z$([,-0]))[1]==Oot?function(t){return new z$(t)}:Pot,Rot=Iot,Dot=Awe,Mot=Eot,Lot=Aot,Fot=Twe,Bot=Rot,$ot=$Z,Uot=200;function zot(t,e,r){var n=-1,i=Mot,s=t.length,o=!0,l=[],c=l;if(r)o=!1,i=Lot;else if(s>=Uot){var u=e?null:Bot(t);if(u)return $ot(u);o=!1,i=Fot,c=new Dot}else c=e?[]:l;e:for(;++n<s;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else i(c,h,r)||(c!==l&&c.push(h),l.push(d))}return l}var Vot=zot,qot=Ug,Hot=Vot;function Wot(t,e){return t&&t.length?Hot(t,qot(e)):[]}var Got=Wot;const kae=Vi(Got);function Vwe(t,e,r){return e===!0?kae(t,r):Fn(e)?kae(t,e):t}function VA(t){"@babel/helpers - typeof";return VA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VA(t)}var Kot=["ref"];function Oae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oae(Object(r),!0).forEach(function(n){L7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Iae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hwe(n.key),n)}}function Yot(t,e,r){return e&&Iae(t.prototype,e),r&&Iae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zot(t,e,r){return e=w8(e),Qot(t,qwe()?Reflect.construct(e,r||[],w8(t).constructor):e.apply(t,r))}function Qot(t,e){if(e&&(VA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jot(t)}function Jot(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qwe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qwe=function(){return!!t})()}function w8(t){return w8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w8(t)}function elt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lH(t,e)}function lH(t,e){return lH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lH(t,e)}function L7(t,e,r){return e=Hwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hwe(t){var e=tlt(t,"string");return VA(e)=="symbol"?e:e+""}function tlt(t,e){if(VA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(VA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rlt(t,e){if(t==null)return{};var r=nlt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nlt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ilt(t){return t.value}function slt(t,e){if(be.isValidElement(t))return be.cloneElement(t,e);if(typeof t=="function")return be.createElement(t,e);e.ref;var r=rlt(e,Kot);return be.createElement(BZ,r)}var Rae=1,Kc=function(t){function e(){var r;Xot(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Zot(this,e,[].concat(i)),L7(r,"lastBoundingBox",{width:-1,height:-1}),r}return elt(e,t),Yot(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Rae||Math.abs(i.height-this.lastBoundingBox.height)>Rae)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Zg({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();f={top:((d||0)-x.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Zg(Zg({},h),f)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=Zg(Zg({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return be.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){n.wrapperNode=m}},slt(s,Zg(Zg({},this.props),{},{payload:Vwe(d,u,ilt)})))}}],[{key:"getWithHeight",value:function(n,i){var s=Zg(Zg({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&jr(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])}(C.PureComponent);L7(Kc,"displayName","Legend");L7(Kc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Dae=vI,alt=UZ,olt=xh,Mae=Dae?Dae.isConcatSpreadable:void 0;function llt(t){return olt(t)||alt(t)||!!(Mae&&t&&t[Mae])}var clt=llt,ult=kwe,dlt=clt;function Wwe(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=dlt),i||(i=[]);++s<o;){var l=t[s];e>0&&r(l)?e>1?Wwe(l,e-1,r,n,i):ult(i,l):n||(i[i.length]=l)}return i}var Gwe=Wwe;function hlt(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++i];if(r(s[c],c,s)===!1)break}return e}}var flt=hlt,mlt=flt,plt=mlt(),glt=plt,xlt=glt,vlt=M7;function ylt(t,e){return t&&xlt(t,e,vlt)}var Kwe=ylt,blt=yI;function wlt(t,e){return function(r,n){if(r==null)return r;if(!blt(r))return t(r,n);for(var i=r.length,s=e?i:-1,o=Object(r);(e?s--:++s<i)&&n(o[s],s,o)!==!1;);return r}}var _lt=wlt,Nlt=Kwe,Slt=_lt,Elt=Slt(Nlt),HZ=Elt,jlt=HZ,Alt=yI;function Clt(t,e){var r=-1,n=Alt(t)?Array(t.length):[];return jlt(t,function(i,s,o){n[++r]=e(i,s,o)}),n}var Xwe=Clt;function Tlt(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Plt=Tlt,Lae=i5;function klt(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,s=Lae(t),o=e!==void 0,l=e===null,c=e===e,u=Lae(e);if(!l&&!u&&!s&&t>e||s&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!i)return 1;if(!n&&!s&&!u&&t<e||u&&r&&i&&!n&&!s||l&&r&&i||!o&&i||!c)return-1}return 0}var Olt=klt,Ilt=Olt;function Rlt(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,o=i.length,l=r.length;++n<o;){var c=Ilt(i[n],s[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return t.index-e.index}var Dlt=Rlt,V$=PZ,Mlt=kZ,Llt=Ug,Flt=Xwe,Blt=Plt,$lt=Rwe,Ult=Dlt,zlt=h5,Vlt=xh;function qlt(t,e,r){e.length?e=V$(e,function(s){return Vlt(s)?function(o){return Mlt(o,s.length===1?s[0]:s)}:s}):e=[zlt];var n=-1;e=V$(e,$lt(Llt));var i=Flt(t,function(s,o,l){var c=V$(e,function(u){return u(s)});return{criteria:c,index:++n,value:s}});return Blt(i,function(s,o){return Ult(s,o,r)})}var Hlt=qlt;function Wlt(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Glt=Wlt,Klt=Glt,Fae=Math.max;function Xlt(t,e,r){return e=Fae(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=Fae(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(o),Klt(t,this,l)}}var Ylt=Xlt;function Zlt(t){return function(){return t}}var Qlt=Zlt,Jlt=fN,ect=function(){try{var t=Jlt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ywe=ect,tct=Qlt,Bae=Ywe,rct=h5,nct=Bae?function(t,e){return Bae(t,"toString",{configurable:!0,enumerable:!1,value:tct(e),writable:!0})}:rct,ict=nct,sct=800,act=16,oct=Date.now;function lct(t){var e=0,r=0;return function(){var n=oct(),i=act-(n-r);if(r=n,i>0){if(++e>=sct)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var cct=lct,uct=ict,dct=cct,hct=dct(uct),fct=hct,mct=h5,pct=Ylt,gct=fct;function xct(t,e){return gct(pct(t,e,mct),t+"")}var vct=xct,yct=jZ,bct=yI,wct=zZ,_ct=Gb;function Nct(t,e,r){if(!_ct(r))return!1;var n=typeof e;return(n=="number"?bct(r)&&wct(e,r.length):n=="string"&&e in r)?yct(r[e],t):!1}var F7=Nct,Sct=Gwe,Ect=Hlt,jct=vct,$ae=F7,Act=jct(function(t,e){if(t==null)return[];var r=e.length;return r>1&&$ae(t,e[0],e[1])?e=[]:r>2&&$ae(e[0],e[1],e[2])&&(e=[e[0]]),Ect(t,Sct(e,1),[])}),Cct=Act;const WZ=Vi(Cct);function Q3(t){"@babel/helpers - typeof";return Q3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q3(t)}function cH(){return cH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cH.apply(this,arguments)}function Tct(t,e){return Ict(t)||Oct(t,e)||kct(t,e)||Pct()}function Pct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kct(t,e){if(t){if(typeof t=="string")return Uae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uae(t,e)}}function Uae(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Oct(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Ict(t){if(Array.isArray(t))return t}function zae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function q$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zae(Object(r),!0).forEach(function(n){Rct(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rct(t,e,r){return e=Dct(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dct(t){var e=Mct(t,"string");return Q3(e)=="symbol"?e:e+""}function Mct(t,e){if(Q3(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Q3(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lct(t){return Array.isArray(t)&&Yl(t[0])&&Yl(t[1])?t.join(" ~ "):t}var Fct=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,x=e.labelClassName,g=e.label,y=e.labelFormatter,w=e.accessibilityLayer,S=w===void 0?!1:w,E=function(){if(d&&d.length){var q={padding:0,margin:0},Q=(f?WZ(d,f):d).map(function(re,Z){if(re.type==="none")return null;var se=q$({display:"block",paddingTop:4,paddingBottom:4,color:re.color||"#000"},l),K=re.formatter||h||Lct,X=re.value,Y=re.name,oe=X,xe=Y;if(K&&oe!=null&&xe!=null){var H=K(X,Y,re,Z,d);if(Array.isArray(H)){var J=Tct(H,2);oe=J[0],xe=J[1]}else oe=H}return be.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:se},Yl(xe)?be.createElement("span",{className:"recharts-tooltip-item-name"},xe):null,Yl(xe)?be.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,be.createElement("span",{className:"recharts-tooltip-item-value"},oe),be.createElement("span",{className:"recharts-tooltip-item-unit"},re.unit||""))});return be.createElement("ul",{className:"recharts-tooltip-item-list",style:q},Q)}return null},j=q$({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),T=q$({margin:0},u),O=!Mn(g),I=O?g:"",M=Gn("recharts-default-tooltip",m),D=Gn("recharts-tooltip-label",x);O&&y&&d!==void 0&&d!==null&&(I=y(g,d));var z=S?{role:"status","aria-live":"assertive"}:{};return be.createElement("div",cH({className:M,style:j},z),be.createElement("p",{className:D,style:T},be.isValidElement(I)?I:"".concat(I)),E())};function J3(t){"@babel/helpers - typeof";return J3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J3(t)}function ZR(t,e,r){return e=Bct(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bct(t){var e=$ct(t,"string");return J3(e)=="symbol"?e:e+""}function $ct(t,e){if(J3(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(J3(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iT="recharts-tooltip-wrapper",Uct={visibility:"hidden"};function zct(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Gn(iT,ZR(ZR(ZR(ZR({},"".concat(iT,"-right"),jr(r)&&e&&jr(e.x)&&r>=e.x),"".concat(iT,"-left"),jr(r)&&e&&jr(e.x)&&r<e.x),"".concat(iT,"-bottom"),jr(n)&&e&&jr(e.y)&&n>=e.y),"".concat(iT,"-top"),jr(n)&&e&&jr(e.y)&&n<e.y))}function Vae(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&jr(s[n]))return s[n];var d=r[n]-l-i,h=r[n]+i;if(e[n])return o[n]?d:h;if(o[n]){var f=d,m=c[n];return f<m?Math.max(h,c[n]):Math.max(d,c[n])}var x=h+l,g=c[n]+u;return x>g?Math.max(d,c[n]):Math.max(h,c[n])}function Vct(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function qct(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&r?(d=Vae({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=Vae({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Vct({translateX:d,translateY:h,useTranslate3d:l})):u=Uct,{cssProperties:u,cssClasses:zct({translateX:d,translateY:h,coordinate:r})}}function qA(t){"@babel/helpers - typeof";return qA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qA(t)}function qae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qae(Object(r),!0).forEach(function(n){dH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qwe(n.key),n)}}function Gct(t,e,r){return e&&Wct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kct(t,e,r){return e=_8(e),Xct(t,Zwe()?Reflect.construct(e,r||[],_8(t).constructor):e.apply(t,r))}function Xct(t,e){if(e&&(qA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yct(t)}function Yct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zwe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zwe=function(){return!!t})()}function _8(t){return _8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_8(t)}function Zct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uH(t,e)}function uH(t,e){return uH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uH(t,e)}function dH(t,e,r){return e=Qwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qwe(t){var e=Qct(t,"string");return qA(e)=="symbol"?e:e+""}function Qct(t,e){if(qA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wae=1,Jct=function(t){function e(){var r;Hct(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Kct(this,e,[].concat(i)),dH(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),dH(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Zct(e,t),Gct(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Wae||Math.abs(n.height-this.state.lastBoundingBox.height)>Wae)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,m=i.offset,x=i.position,g=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,E=qct({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:x,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),j=E.cssClasses,T=E.cssProperties,O=Hae(Hae({transition:f&&s?"transform ".concat(l,"ms ").concat(c):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},S);return be.createElement("div",{tabIndex:-1,className:j,style:O,ref:function(M){n.wrapperNode=M}},u)}}])}(C.PureComponent),eut=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Tm={isSsr:eut(),get:function(e){return Tm[e]},set:function(e,r){if(typeof e=="string")Tm[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){Tm[i]=e[i]})}}};function HA(t){"@babel/helpers - typeof";return HA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HA(t)}function Gae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gae(Object(r),!0).forEach(function(n){GZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e2e(n.key),n)}}function nut(t,e,r){return e&&rut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iut(t,e,r){return e=N8(e),sut(t,Jwe()?Reflect.construct(e,r||[],N8(t).constructor):e.apply(t,r))}function sut(t,e){if(e&&(HA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aut(t)}function aut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jwe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jwe=function(){return!!t})()}function N8(t){return N8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N8(t)}function out(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hH(t,e)}function hH(t,e){return hH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hH(t,e)}function GZ(t,e,r){return e=e2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e2e(t){var e=lut(t,"string");return HA(e)=="symbol"?e:e+""}function lut(t,e){if(HA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(HA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cut(t){return t.dataKey}function uut(t,e){return be.isValidElement(t)?be.cloneElement(t,e):typeof t=="function"?be.createElement(t,e):be.createElement(Fct,e)}var Ga=function(t){function e(){return tut(this,e),iut(this,e,arguments)}return out(e,t),nut(e,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,f=i.isAnimationActive,m=i.offset,x=i.payload,g=i.payloadUniqBy,y=i.position,w=i.reverseDirection,S=i.useTranslate3d,E=i.viewBox,j=i.wrapperStyle,T=x??[];h&&T.length&&(T=Vwe(x.filter(function(I){return I.value!=null&&(I.hide!==!0||n.props.includeHidden)}),g,cut));var O=T.length>0;return be.createElement(Jct,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:s,coordinate:d,hasPayload:O,offset:m,position:y,reverseDirection:w,useTranslate3d:S,viewBox:E,wrapperStyle:j},uut(u,Kae(Kae({},this.props),{},{payload:T})))}}])}(C.PureComponent);GZ(Ga,"displayName","Tooltip");GZ(Ga,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Tm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var dut=$g,hut=function(){return dut.Date.now()},fut=hut,mut=/\s/;function put(t){for(var e=t.length;e--&&mut.test(t.charAt(e)););return e}var gut=put,xut=gut,vut=/^\s+/;function yut(t){return t&&t.slice(0,xut(t)+1).replace(vut,"")}var but=yut,wut=but,Xae=Gb,_ut=i5,Yae=NaN,Nut=/^[-+]0x[0-9a-f]+$/i,Sut=/^0b[01]+$/i,Eut=/^0o[0-7]+$/i,jut=parseInt;function Aut(t){if(typeof t=="number")return t;if(_ut(t))return Yae;if(Xae(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Xae(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=wut(t);var r=Sut.test(t);return r||Eut.test(t)?jut(t.slice(2),r?2:8):Nut.test(t)?Yae:+t}var t2e=Aut,Cut=Gb,H$=fut,Zae=t2e,Tut="Expected a function",Put=Math.max,kut=Math.min;function Out(t,e,r){var n,i,s,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(Tut);e=Zae(e)||0,Cut(r)&&(d=!!r.leading,h="maxWait"in r,s=h?Put(Zae(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function m(O){var I=n,M=i;return n=i=void 0,u=O,o=t.apply(M,I),o}function x(O){return u=O,l=setTimeout(w,e),d?m(O):o}function g(O){var I=O-c,M=O-u,D=e-I;return h?kut(D,s-M):D}function y(O){var I=O-c,M=O-u;return c===void 0||I>=e||I<0||h&&M>=s}function w(){var O=H$();if(y(O))return S(O);l=setTimeout(w,g(O))}function S(O){return l=void 0,f&&n?m(O):(n=i=void 0,o)}function E(){l!==void 0&&clearTimeout(l),u=0,n=c=i=l=void 0}function j(){return l===void 0?o:S(H$())}function T(){var O=H$(),I=y(O);if(n=arguments,i=this,c=O,I){if(l===void 0)return x(c);if(h)return clearTimeout(l),l=setTimeout(w,e),m(c)}return l===void 0&&(l=setTimeout(w,e)),o}return T.cancel=E,T.flush=j,T}var Iut=Out,Rut=Iut,Dut=Gb,Mut="Expected a function";function Lut(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Mut);return Dut(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Rut(t,e,{leading:n,maxWait:e,trailing:i})}var Fut=Lut;const r2e=Vi(Fut);function eP(t){"@babel/helpers - typeof";return eP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eP(t)}function Qae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qae(Object(r),!0).forEach(function(n){But(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qae(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function But(t,e,r){return e=$ut(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $ut(t){var e=Uut(t,"string");return eP(e)=="symbol"?e:e+""}function Uut(t,e){if(eP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(eP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zut(t,e){return Wut(t)||Hut(t,e)||qut(t,e)||Vut()}function Vut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qut(t,e){if(t){if(typeof t=="string")return Jae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jae(t,e)}}function Jae(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hut(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Wut(t){if(Array.isArray(t))return t}var vd=C.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,m=t.children,x=t.debounce,g=x===void 0?0:x,y=t.id,w=t.className,S=t.onResize,E=t.style,j=E===void 0?{}:E,T=C.useRef(null),O=C.useRef();O.current=S,C.useImperativeHandle(e,function(){return Object.defineProperty(T.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),T.current},configurable:!0})});var I=C.useState({containerWidth:i.width,containerHeight:i.height}),M=zut(I,2),D=M[0],z=M[1],F=C.useCallback(function(Q,re){z(function(Z){var se=Math.round(Q),K=Math.round(re);return Z.containerWidth===se&&Z.containerHeight===K?Z:{containerWidth:se,containerHeight:K}})},[]);C.useEffect(function(){var Q=function(Y){var oe,xe=Y[0].contentRect,H=xe.width,J=xe.height;F(H,J),(oe=O.current)===null||oe===void 0||oe.call(O,H,J)};g>0&&(Q=r2e(Q,g,{trailing:!0,leading:!1}));var re=new ResizeObserver(Q),Z=T.current.getBoundingClientRect(),se=Z.width,K=Z.height;return F(se,K),re.observe(T.current),function(){re.disconnect()}},[F,g]);var q=C.useMemo(function(){var Q=D.containerWidth,re=D.containerHeight;if(Q<0||re<0)return null;Xp(Uw(o)||Uw(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Xp(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Z=Uw(o)?Q:o,se=Uw(c)?re:c;r&&r>0&&(Z?se=Z/r:se&&(Z=se*r),f&&se>f&&(se=f)),Xp(Z>0||se>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,se,o,c,d,h,r);var K=!Array.isArray(m)&&lv(m.type).endsWith("Chart");return be.Children.map(m,function(X){return be.isValidElement(X)?C.cloneElement(X,QR({width:Z,height:se},K?{style:QR({height:"100%",width:"100%",maxHeight:se,maxWidth:Z},X.props.style)}:{})):X})},[r,m,c,f,h,d,D,o]);return be.createElement("div",{id:y?"".concat(y):void 0,className:Gn("recharts-responsive-container",w),style:QR(QR({},j),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:T},q)}),mN=function(e){return null};mN.displayName="Cell";function tP(t){"@babel/helpers - typeof";return tP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(t)}function eoe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eoe(Object(r),!0).forEach(function(n){Gut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eoe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gut(t,e,r){return e=Kut(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kut(t){var e=Xut(t,"string");return tP(e)=="symbol"?e:e+""}function Xut(t,e){if(tP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZN={widthCache:{},cacheCount:0},Yut=2e3,Zut={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},toe="recharts_measurement_span";function Qut(t){var e=fH({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var A4=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Tm.isSsr)return{width:0,height:0};var n=Qut(r),i=JSON.stringify({text:e,copyStyle:n});if(ZN.widthCache[i])return ZN.widthCache[i];try{var s=document.getElementById(toe);s||(s=document.createElement("span"),s.setAttribute("id",toe),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=fH(fH({},Zut),n);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return ZN.widthCache[i]=c,++ZN.cacheCount>Yut&&(ZN.cacheCount=0,ZN.widthCache={}),c}catch{return{width:0,height:0}}},Jut=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function rP(t){"@babel/helpers - typeof";return rP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rP(t)}function S8(t,e){return ndt(t)||rdt(t,e)||tdt(t,e)||edt()}function edt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tdt(t,e){if(t){if(typeof t=="string")return roe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return roe(t,e)}}function roe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rdt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ndt(t){if(Array.isArray(t))return t}function idt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function noe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,adt(n.key),n)}}function sdt(t,e,r){return e&&noe(t.prototype,e),r&&noe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function adt(t){var e=odt(t,"string");return rP(e)=="symbol"?e:e+""}function odt(t,e){if(rP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ioe=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,soe=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ldt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cdt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,n2e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},udt=Object.keys(n2e),GS="NaN";function ddt(t,e){return t*n2e[e]}var JR=function(){function t(e,r){idt(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!ldt.test(r)&&(this.num=NaN,this.unit=""),udt.includes(r)&&(this.num=ddt(e,r),this.unit="px")}return sdt(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=cdt.exec(r))!==null&&n!==void 0?n:[],s=S8(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function i2e(t){if(t.includes(GS))return GS;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=ioe.exec(e))!==null&&r!==void 0?r:[],i=S8(n,4),s=i[1],o=i[2],l=i[3],c=JR.parse(s??""),u=JR.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return GS;e=e.replace(ioe,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=soe.exec(e))!==null&&h!==void 0?h:[],m=S8(f,4),x=m[1],g=m[2],y=m[3],w=JR.parse(x??""),S=JR.parse(y??""),E=g==="+"?w.add(S):w.subtract(S);if(E.isNaN())return GS;e=e.replace(soe,E.toString())}return e}var aoe=/\(([^()]*)\)/;function hdt(t){for(var e=t;e.includes("(");){var r=aoe.exec(e),n=S8(r,2),i=n[1];e=e.replace(aoe,i2e(i))}return e}function fdt(t){var e=t.replace(/\s+/g,"");return e=hdt(e),e=i2e(e),e}function mdt(t){try{return fdt(t)}catch{return GS}}function W$(t){var e=mdt(t.slice(5,-1));return e===GS?"":e}var pdt=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],gdt=["dx","dy","angle","className","breakAll"];function mH(){return mH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mH.apply(this,arguments)}function ooe(t,e){if(t==null)return{};var r=xdt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xdt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function loe(t,e){return wdt(t)||bdt(t,e)||ydt(t,e)||vdt()}function vdt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ydt(t,e){if(t){if(typeof t=="string")return coe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return coe(t,e)}}function coe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bdt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function wdt(t){if(Array.isArray(t))return t}var s2e=/[ \f\n\r\t\v\u2028\u2029]+/,a2e=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var s=[];Mn(r)||(n?s=r.toString().split(""):s=r.toString().split(s2e));var o=s.map(function(c){return{word:c,width:A4(c,i).width}}),l=n?0:A4("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},_dt=function(e,r,n,i,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=jr(o),h=l,f=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(se,K){var X=K.word,Y=K.width,oe=se[se.length-1];if(oe&&(i==null||s||oe.width+Y+n<Number(i)))oe.words.push(X),oe.width+=Y+n;else{var xe={words:[X],width:Y};se.push(xe)}return se},[])},m=f(r),x=function(Z){return Z.reduce(function(se,K){return se.width>K.width?se:K})};if(!d)return m;for(var g="",y=function(Z){var se=h.slice(0,Z),K=a2e({breakAll:u,style:c,children:se+g}).wordsWithComputedWidth,X=f(K),Y=X.length>o||x(X).width>Number(i);return[Y,X]},w=0,S=h.length-1,E=0,j;w<=S&&E<=h.length-1;){var T=Math.floor((w+S)/2),O=T-1,I=y(O),M=loe(I,2),D=M[0],z=M[1],F=y(T),q=loe(F,1),Q=q[0];if(!D&&!Q&&(w=T+1),D&&Q&&(S=T-1),!D&&Q){j=z;break}E++}return j||m},uoe=function(e){var r=Mn(e)?[]:e.toString().split(s2e);return[{words:r}]},Ndt=function(e){var r=e.width,n=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Tm.isSsr){var c,u,d=a2e({breakAll:o,children:i,style:s});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return uoe(i);return _dt({breakAll:o,children:i,maxLines:l,style:s},c,u,r,n)}return uoe(i)},doe="#808080",X_=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,m=f===void 0?"start":f,x=e.verticalAnchor,g=x===void 0?"end":x,y=e.fill,w=y===void 0?doe:y,S=ooe(e,pdt),E=C.useMemo(function(){return Ndt({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:h,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,h,S.style,S.width]),j=S.dx,T=S.dy,O=S.angle,I=S.className,M=S.breakAll,D=ooe(S,gdt);if(!Yl(n)||!Yl(s))return null;var z=n+(jr(j)?j:0),F=s+(jr(T)?T:0),q;switch(g){case"start":q=W$("calc(".concat(u,")"));break;case"middle":q=W$("calc(".concat((E.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:q=W$("calc(".concat(E.length-1," * -").concat(l,")"));break}var Q=[];if(h){var re=E[0].width,Z=S.width;Q.push("scale(".concat((jr(Z)?Z/re:1)/re,")"))}return O&&Q.push("rotate(".concat(O,", ").concat(z,", ").concat(F,")")),Q.length&&(D.transform=Q.join(" ")),be.createElement("text",mH({},bn(D,!0),{x:z,y:F,className:Gn("recharts-text",I),textAnchor:m,fill:w.includes("url")?doe:w}),E.map(function(se,K){var X=se.words.join(M?"":" ");return be.createElement("tspan",{x:z,dy:K===0?q:l,key:"".concat(X,"-").concat(K)},X)}))};function rb(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sdt(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KZ(t){let e,r,n;t.length!==2?(e=rb,r=(l,c)=>rb(t(l),c),n=(l,c)=>t(l)-c):(e=t===rb||t===Sdt?t:Edt,r=t,n=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=i(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:i,center:o,right:s}}function Edt(){return 0}function o2e(t){return t===null?NaN:+t}function*jdt(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Adt=KZ(rb),bI=Adt.right;KZ(o2e).center;class hoe extends Map{constructor(e,r=Pdt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(foe(this,e))}has(e){return super.has(foe(this,e))}set(e,r){return super.set(Cdt(this,e),r)}delete(e){return super.delete(Tdt(this,e))}}function foe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Cdt({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Tdt({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Pdt(t){return t!==null&&typeof t=="object"?t.valueOf():t}function kdt(t=rb){if(t===rb)return l2e;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function l2e(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Odt=Math.sqrt(50),Idt=Math.sqrt(10),Rdt=Math.sqrt(2);function E8(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=Odt?10:s>=Idt?5:s>=Rdt?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?E8(t,e,r*2):[l,c,u]}function pH(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,o]=n?E8(e,t,r):E8(t,e,r);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function gH(t,e,r){return e=+e,t=+t,r=+r,E8(t,e,r)[2]}function xH(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?gH(e,t,r):gH(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function moe(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function poe(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function c2e(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?l2e:kdt(i);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(e-u*h/c+f)),x=Math.min(n,Math.floor(e+(c-u)*h/c+f));c2e(t,e,m,x,i)}const s=t[e];let o=r,l=n;for(sT(t,r,e),i(t[n],s)>0&&sT(t,r,n);o<l;){for(sT(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[r],s)===0?sT(t,r,l):(++l,sT(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function sT(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Ddt(t,e,r){if(t=Float64Array.from(jdt(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return poe(t);if(e>=1)return moe(t);var n,i=(n-1)*e,s=Math.floor(i),o=moe(c2e(t,s).subarray(0,s+1)),l=poe(t.subarray(s+1));return o+(l-o)*(i-s)}}function Mdt(t,e,r=o2e){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function Ldt(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function zm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Vv(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vH=Symbol("implicit");function XZ(){var t=new hoe,e=[],r=[],n=vH;function i(s){let o=t.get(s);if(o===void 0){if(n!==vH)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new hoe;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return XZ(e,r).unknown(n)},zm.apply(i,arguments),i}function nP(){var t=XZ().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=i<n,x=m?i:n,g=m?n:i;s=(g-x)/Math.max(1,f-c+u*2),l&&(s=Math.floor(s)),x+=(g-x-s*(f-c))*d,o=s*(1-c),l&&(x=Math.round(x),o=Math.round(o));var y=Ldt(f).map(function(w){return x+s*w});return r(m?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,h()):[n,i]},t.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return nP(e(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},zm.apply(h(),arguments)}function u2e(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return u2e(e())},t}function C4(){return u2e(nP.apply(null,arguments).paddingInner(1))}function YZ(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function d2e(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function wI(){}var iP=.7,j8=1/iP,bE="\\s*([+-]?\\d+)\\s*",sP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Eg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fdt=/^#([0-9a-f]{3,8})$/,Bdt=new RegExp(`^rgb\\(${bE},${bE},${bE}\\)$`),$dt=new RegExp(`^rgb\\(${Eg},${Eg},${Eg}\\)$`),Udt=new RegExp(`^rgba\\(${bE},${bE},${bE},${sP}\\)$`),zdt=new RegExp(`^rgba\\(${Eg},${Eg},${Eg},${sP}\\)$`),Vdt=new RegExp(`^hsl\\(${sP},${Eg},${Eg}\\)$`),qdt=new RegExp(`^hsla\\(${sP},${Eg},${Eg},${sP}\\)$`),goe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YZ(wI,aP,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xoe,formatHex:xoe,formatHex8:Hdt,formatHsl:Wdt,formatRgb:voe,toString:voe});function xoe(){return this.rgb().formatHex()}function Hdt(){return this.rgb().formatHex8()}function Wdt(){return h2e(this).formatHsl()}function voe(){return this.rgb().formatRgb()}function aP(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Fdt.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?yoe(e):r===3?new ch(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?eD(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?eD(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Bdt.exec(t))?new ch(e[1],e[2],e[3],1):(e=$dt.exec(t))?new ch(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Udt.exec(t))?eD(e[1],e[2],e[3],e[4]):(e=zdt.exec(t))?eD(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Vdt.exec(t))?_oe(e[1],e[2]/100,e[3]/100,1):(e=qdt.exec(t))?_oe(e[1],e[2]/100,e[3]/100,e[4]):goe.hasOwnProperty(t)?yoe(goe[t]):t==="transparent"?new ch(NaN,NaN,NaN,0):null}function yoe(t){return new ch(t>>16&255,t>>8&255,t&255,1)}function eD(t,e,r,n){return n<=0&&(t=e=r=NaN),new ch(t,e,r,n)}function Gdt(t){return t instanceof wI||(t=aP(t)),t?(t=t.rgb(),new ch(t.r,t.g,t.b,t.opacity)):new ch}function yH(t,e,r,n){return arguments.length===1?Gdt(t):new ch(t,e,r,n??1)}function ch(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}YZ(ch,yH,d2e(wI,{brighter(t){return t=t==null?j8:Math.pow(j8,t),new ch(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?iP:Math.pow(iP,t),new ch(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ch(w_(this.r),w_(this.g),w_(this.b),A8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:boe,formatHex:boe,formatHex8:Kdt,formatRgb:woe,toString:woe}));function boe(){return`#${zw(this.r)}${zw(this.g)}${zw(this.b)}`}function Kdt(){return`#${zw(this.r)}${zw(this.g)}${zw(this.b)}${zw((isNaN(this.opacity)?1:this.opacity)*255)}`}function woe(){const t=A8(this.opacity);return`${t===1?"rgb(":"rgba("}${w_(this.r)}, ${w_(this.g)}, ${w_(this.b)}${t===1?")":`, ${t})`}`}function A8(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function w_(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zw(t){return t=w_(t),(t<16?"0":"")+t.toString(16)}function _oe(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Mp(t,e,r,n)}function h2e(t){if(t instanceof Mp)return new Mp(t.h,t.s,t.l,t.opacity);if(t instanceof wI||(t=aP(t)),!t)return new Mp;if(t instanceof Mp)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Mp(o,l,c,t.opacity)}function Xdt(t,e,r,n){return arguments.length===1?h2e(t):new Mp(t,e,r,n??1)}function Mp(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}YZ(Mp,Xdt,d2e(wI,{brighter(t){return t=t==null?j8:Math.pow(j8,t),new Mp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?iP:Math.pow(iP,t),new Mp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new ch(G$(t>=240?t-240:t+120,i,n),G$(t,i,n),G$(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Mp(Noe(this.h),tD(this.s),tD(this.l),A8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=A8(this.opacity);return`${t===1?"hsl(":"hsla("}${Noe(this.h)}, ${tD(this.s)*100}%, ${tD(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Noe(t){return t=(t||0)%360,t<0?t+360:t}function tD(t){return Math.max(0,Math.min(1,t||0))}function G$(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const ZZ=t=>()=>t;function Ydt(t,e){return function(r){return t+r*e}}function Zdt(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Qdt(t){return(t=+t)==1?f2e:function(e,r){return r-e?Zdt(e,r,t):ZZ(isNaN(e)?r:e)}}function f2e(t,e){var r=e-t;return r?Ydt(t,r):ZZ(isNaN(t)?e:t)}const Soe=function t(e){var r=Qdt(e);function n(i,s){var o=r((i=yH(i)).r,(s=yH(s)).r),l=r(i.g,s.g),c=r(i.b,s.b),u=f2e(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return n.gamma=t,n}(1);function Jdt(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function eht(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tht(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=f5(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=i[o](l);return s}}function rht(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function C8(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function nht(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=f5(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var bH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,K$=new RegExp(bH.source,"g");function iht(t){return function(){return t}}function sht(t){return function(e){return t(e)+""}}function aht(t,e){var r=bH.lastIndex=K$.lastIndex=0,n,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=bH.exec(t))&&(i=K$.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:C8(n,i)})),r=K$.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?sht(c[0].x):iht(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function f5(t,e){var r=typeof e,n;return e==null||r==="boolean"?ZZ(e):(r==="number"?C8:r==="string"?(n=aP(e))?(e=n,Soe):aht:e instanceof aP?Soe:e instanceof Date?rht:eht(e)?Jdt:Array.isArray(e)?tht:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nht:C8)(t,e)}function QZ(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function oht(t,e){e===void 0&&(e=t,t=f5);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function lht(t){return function(){return t}}function T8(t){return+t}var Eoe=[0,1];function Nd(t){return t}function wH(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:lht(isNaN(e)?NaN:.5)}function cht(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function uht(t,e,r){var n=t[0],i=t[1],s=e[0],o=e[1];return i<n?(n=wH(i,n),s=r(o,s)):(n=wH(n,i),s=r(s,o)),function(l){return s(n(l))}}function dht(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=wH(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=bI(t,l,1,n)-1;return s[c](i[c](l))}}function _I(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function B7(){var t=Eoe,e=Eoe,r=f5,n,i,s,o=Nd,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Nd&&(o=cht(t[0],t[f-1])),l=f>2?dht:uht,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=l(t.map(n),e,r)))(n(o(f)))}return h.invert=function(f){return o(i((u||(u=l(e,t.map(n),C8)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,T8),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=QZ,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Nd,d()):o!==Nd},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,m){return n=f,i=m,d()}}function JZ(){return B7()(Nd,Nd)}function hht(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function P8(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function WA(t){return t=P8(Math.abs(t)),t?t[1]:NaN}function fht(t,e){return function(r,n){for(var i=r.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function mht(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var pht=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oP(t){if(!(e=pht.exec(t)))throw new Error("invalid format: "+t);var e;return new eQ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}oP.prototype=eQ.prototype;function eQ(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}eQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ght(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var m2e;function xht(t,e){var r=P8(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(m2e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+P8(t,Math.max(0,e+s-1))[0]}function joe(t,e){var r=P8(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const Aoe={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:hht,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>joe(t*100,e),r:joe,s:xht,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Coe(t){return t}var Toe=Array.prototype.map,Poe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vht(t){var e=t.grouping===void 0||t.thousands===void 0?Coe:fht(Toe.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Coe:mht(Toe.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=oP(h);var f=h.fill,m=h.align,x=h.sign,g=h.symbol,y=h.zero,w=h.width,S=h.comma,E=h.precision,j=h.trim,T=h.type;T==="n"?(S=!0,T="g"):Aoe[T]||(E===void 0&&(E=12),j=!0,T="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var O=g==="$"?r:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=g==="$"?n:/[%p]/.test(T)?o:"",M=Aoe[T],D=/[defgprs%]/.test(T);E=E===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function z(F){var q=O,Q=I,re,Z,se;if(T==="c")Q=M(F)+Q,F="";else{F=+F;var K=F<0||1/F<0;if(F=isNaN(F)?c:M(Math.abs(F),E),j&&(F=ght(F)),K&&+F==0&&x!=="+"&&(K=!1),q=(K?x==="("?x:l:x==="-"||x==="("?"":x)+q,Q=(T==="s"?Poe[8+m2e/3]:"")+Q+(K&&x==="("?")":""),D){for(re=-1,Z=F.length;++re<Z;)if(se=F.charCodeAt(re),48>se||se>57){Q=(se===46?i+F.slice(re+1):F.slice(re))+Q,F=F.slice(0,re);break}}}S&&!y&&(F=e(F,1/0));var X=q.length+F.length+Q.length,Y=X<w?new Array(w-X+1).join(f):"";switch(S&&y&&(F=e(Y+F,Y.length?w-Q.length:1/0),Y=""),m){case"<":F=q+F+Q+Y;break;case"=":F=q+Y+F+Q;break;case"^":F=Y.slice(0,X=Y.length>>1)+q+F+Q+Y.slice(X);break;default:F=Y+q+F+Q;break}return s(F)}return z.toString=function(){return h+""},z}function d(h,f){var m=u((h=oP(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(WA(f)/3)))*3,g=Math.pow(10,-x),y=Poe[8+x/3];return function(w){return m(g*w)+y}}return{format:u,formatPrefix:d}}var rD,tQ,p2e;yht({thousands:",",grouping:[3],currency:["$",""]});function yht(t){return rD=vht(t),tQ=rD.format,p2e=rD.formatPrefix,rD}function bht(t){return Math.max(0,-WA(Math.abs(t)))}function wht(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(WA(e)/3)))*3-WA(Math.abs(t)))}function _ht(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,WA(e)-WA(t))+1}function g2e(t,e,r,n){var i=xH(t,e,r),s;switch(n=oP(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=wht(i,o))&&(n.precision=s),p2e(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=_ht(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=bht(i))&&(n.precision=s-(n.type==="%")*2);break}}return tQ(n)}function Xb(t){var e=t.domain;return t.ticks=function(r){var n=e();return pH(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return g2e(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,o=n[i],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=gH(o,l,r),u===c)return n[i]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function k8(){var t=JZ();return t.copy=function(){return _I(t,k8())},zm.apply(t,arguments),Xb(t)}function x2e(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,T8),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return x2e(t).unknown(e)},t=arguments.length?Array.from(t,T8):[0,1],Xb(r)}function v2e(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),t[r]=e.floor(i),t[n]=e.ceil(s),t}function koe(t){return Math.log(t)}function Ooe(t){return Math.exp(t)}function Nht(t){return-Math.log(-t)}function Sht(t){return-Math.exp(-t)}function Eht(t){return isFinite(t)?+("1e"+t):t<0?0:t}function jht(t){return t===10?Eht:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Aht(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ioe(t){return(e,r)=>-t(-e,r)}function rQ(t){const e=t(koe,Ooe),r=e.domain;let n=10,i,s;function o(){return i=Aht(n),s=jht(n),r()[0]<0?(i=Ioe(i),s=Ioe(s),t(Nht,Sht)):t(koe,Ooe),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=i(u),m=i(d),x,g;const y=l==null?10:+l;let w=[];if(!(n%1)&&m-f<y){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(x=1;x<n;++x)if(g=f<0?x/s(-f):x*s(f),!(g<u)){if(g>d)break;w.push(g)}}else for(;f<=m;++f)for(x=n-1;x>=1;--x)if(g=f>0?x/s(-f):x*s(f),!(g<u)){if(g>d)break;w.push(g)}w.length*2<y&&(w=pH(u,d,y))}else w=pH(f,m,Math.min(m-f,y)).map(s);return h?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=oP(c)).precision==null&&(c.trim=!0),c=tQ(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let h=d/s(Math.round(i(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},e.nice=()=>r(v2e(r(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function y2e(){const t=rQ(B7()).domain([1,10]);return t.copy=()=>_I(t,y2e()).base(t.base()),zm.apply(t,arguments),t}function Roe(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Doe(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function nQ(t){var e=1,r=t(Roe(e),Doe(e));return r.constant=function(n){return arguments.length?t(Roe(e=+n),Doe(e)):e},Xb(r)}function b2e(){var t=nQ(B7());return t.copy=function(){return _I(t,b2e()).constant(t.constant())},zm.apply(t,arguments)}function Moe(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Cht(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Tht(t){return t<0?-t*t:t*t}function iQ(t){var e=t(Nd,Nd),r=1;function n(){return r===1?t(Nd,Nd):r===.5?t(Cht,Tht):t(Moe(r),Moe(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Xb(e)}function sQ(){var t=iQ(B7());return t.copy=function(){return _I(t,sQ()).exponent(t.exponent())},zm.apply(t,arguments),t}function Pht(){return sQ.apply(null,arguments).exponent(.5)}function Loe(t){return Math.sign(t)*t*t}function kht(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function w2e(){var t=JZ(),e=[0,1],r=!1,n;function i(s){var o=kht(t(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return t.invert(Loe(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,T8)).map(Loe)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return w2e(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},zm.apply(i,arguments),Xb(i)}function _2e(){var t=[],e=[],r=[],n;function i(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Mdt(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[bI(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(rb),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return _2e().domain(t).range(e).unknown(n)},zm.apply(s,arguments)}function N2e(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[bI(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return N2e().domain([t,e]).range(i).unknown(s)},zm.apply(Xb(o),arguments)}function S2e(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[bI(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return S2e().domain(t).range(e).unknown(r)},zm.apply(i,arguments)}const X$=new Date,Y$=new Date;function ec(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>ec(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(i.count=(s,o)=>(X$.setTime(+s),Y$.setTime(+o),t(X$),t(Y$),Math.floor(r(X$,Y$))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const O8=ec(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);O8.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ec(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):O8);O8.range;const iv=1e3,Em=iv*60,sv=Em*60,Cv=sv*24,aQ=Cv*7,Foe=Cv*30,Z$=Cv*365,Vw=ec(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*iv)},(t,e)=>(e-t)/iv,t=>t.getUTCSeconds());Vw.range;const oQ=ec(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*iv)},(t,e)=>{t.setTime(+t+e*Em)},(t,e)=>(e-t)/Em,t=>t.getMinutes());oQ.range;const lQ=ec(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Em)},(t,e)=>(e-t)/Em,t=>t.getUTCMinutes());lQ.range;const cQ=ec(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*iv-t.getMinutes()*Em)},(t,e)=>{t.setTime(+t+e*sv)},(t,e)=>(e-t)/sv,t=>t.getHours());cQ.range;const uQ=ec(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*sv)},(t,e)=>(e-t)/sv,t=>t.getUTCHours());uQ.range;const NI=ec(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Em)/Cv,t=>t.getDate()-1);NI.range;const $7=ec(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Cv,t=>t.getUTCDate()-1);$7.range;const E2e=ec(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Cv,t=>Math.floor(t/Cv));E2e.range;function pN(t){return ec(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Em)/aQ)}const U7=pN(0),I8=pN(1),Oht=pN(2),Iht=pN(3),GA=pN(4),Rht=pN(5),Dht=pN(6);U7.range;I8.range;Oht.range;Iht.range;GA.range;Rht.range;Dht.range;function gN(t){return ec(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/aQ)}const z7=gN(0),R8=gN(1),Mht=gN(2),Lht=gN(3),KA=gN(4),Fht=gN(5),Bht=gN(6);z7.range;R8.range;Mht.range;Lht.range;KA.range;Fht.range;Bht.range;const dQ=ec(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());dQ.range;const hQ=ec(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());hQ.range;const Tv=ec(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Tv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ec(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Tv.range;const Pv=ec(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ec(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Pv.range;function j2e(t,e,r,n,i,s){const o=[[Vw,1,iv],[Vw,5,5*iv],[Vw,15,15*iv],[Vw,30,30*iv],[s,1,Em],[s,5,5*Em],[s,15,15*Em],[s,30,30*Em],[i,1,sv],[i,3,3*sv],[i,6,6*sv],[i,12,12*sv],[n,1,Cv],[n,2,2*Cv],[r,1,aQ],[e,1,Foe],[e,3,3*Foe],[t,1,Z$]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),x=m?m.range(u,+d+1):[];return f?x.reverse():x}function c(u,d,h){const f=Math.abs(d-u)/h,m=KZ(([,,y])=>y).right(o,f);if(m===o.length)return t.every(xH(u/Z$,d/Z$,h));if(m===0)return O8.every(Math.max(xH(u,d,h),1));const[x,g]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return x.every(g)}return[l,c]}const[$ht,Uht]=j2e(Pv,hQ,z7,E2e,uQ,lQ),[zht,Vht]=j2e(Tv,dQ,U7,NI,cQ,oQ);function Q$(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function J$(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function aT(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function qht(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=oT(i),d=lT(i),h=oT(s),f=lT(s),m=oT(o),x=lT(o),g=oT(l),y=lT(l),w=oT(c),S=lT(c),E={a:K,A:X,b:Y,B:oe,c:null,d:qoe,e:qoe,f:fft,g:Nft,G:Eft,H:uft,I:dft,j:hft,L:A2e,m:mft,M:pft,p:xe,q:H,Q:Goe,s:Koe,S:gft,u:xft,U:vft,V:yft,w:bft,W:wft,x:null,X:null,y:_ft,Y:Sft,Z:jft,"%":Woe},j={a:J,A:ie,b:ce,B:me,c:null,d:Hoe,e:Hoe,f:Pft,g:$ft,G:zft,H:Aft,I:Cft,j:Tft,L:T2e,m:kft,M:Oft,p:he,q:_e,Q:Goe,s:Koe,S:Ift,u:Rft,U:Dft,V:Mft,w:Lft,W:Fft,x:null,X:null,y:Bft,Y:Uft,Z:Vft,"%":Woe},T={a:z,A:F,b:q,B:Q,c:re,d:zoe,e:zoe,f:aft,g:Uoe,G:$oe,H:Voe,I:Voe,j:rft,L:sft,m:tft,M:nft,p:D,q:eft,Q:lft,s:cft,S:ift,u:Xht,U:Yht,V:Zht,w:Kht,W:Qht,x:Z,X:se,y:Uoe,Y:$oe,Z:Jht,"%":oft};E.x=O(r,E),E.X=O(n,E),E.c=O(e,E),j.x=O(r,j),j.X=O(n,j),j.c=O(e,j);function O(ue,je){return function(ye){var Le=[],Ge=-1,Be=0,Te=ue.length,ze,tt,Re;for(ye instanceof Date||(ye=new Date(+ye));++Ge<Te;)ue.charCodeAt(Ge)===37&&(Le.push(ue.slice(Be,Ge)),(tt=Boe[ze=ue.charAt(++Ge)])!=null?ze=ue.charAt(++Ge):tt=ze==="e"?" ":"0",(Re=je[ze])&&(ze=Re(ye,tt)),Le.push(ze),Be=Ge+1);return Le.push(ue.slice(Be,Ge)),Le.join("")}}function I(ue,je){return function(ye){var Le=aT(1900,void 0,1),Ge=M(Le,ue,ye+="",0),Be,Te;if(Ge!=ye.length)return null;if("Q"in Le)return new Date(Le.Q);if("s"in Le)return new Date(Le.s*1e3+("L"in Le?Le.L:0));if(je&&!("Z"in Le)&&(Le.Z=0),"p"in Le&&(Le.H=Le.H%12+Le.p*12),Le.m===void 0&&(Le.m="q"in Le?Le.q:0),"V"in Le){if(Le.V<1||Le.V>53)return null;"w"in Le||(Le.w=1),"Z"in Le?(Be=J$(aT(Le.y,0,1)),Te=Be.getUTCDay(),Be=Te>4||Te===0?R8.ceil(Be):R8(Be),Be=$7.offset(Be,(Le.V-1)*7),Le.y=Be.getUTCFullYear(),Le.m=Be.getUTCMonth(),Le.d=Be.getUTCDate()+(Le.w+6)%7):(Be=Q$(aT(Le.y,0,1)),Te=Be.getDay(),Be=Te>4||Te===0?I8.ceil(Be):I8(Be),Be=NI.offset(Be,(Le.V-1)*7),Le.y=Be.getFullYear(),Le.m=Be.getMonth(),Le.d=Be.getDate()+(Le.w+6)%7)}else("W"in Le||"U"in Le)&&("w"in Le||(Le.w="u"in Le?Le.u%7:"W"in Le?1:0),Te="Z"in Le?J$(aT(Le.y,0,1)).getUTCDay():Q$(aT(Le.y,0,1)).getDay(),Le.m=0,Le.d="W"in Le?(Le.w+6)%7+Le.W*7-(Te+5)%7:Le.w+Le.U*7-(Te+6)%7);return"Z"in Le?(Le.H+=Le.Z/100|0,Le.M+=Le.Z%100,J$(Le)):Q$(Le)}}function M(ue,je,ye,Le){for(var Ge=0,Be=je.length,Te=ye.length,ze,tt;Ge<Be;){if(Le>=Te)return-1;if(ze=je.charCodeAt(Ge++),ze===37){if(ze=je.charAt(Ge++),tt=T[ze in Boe?je.charAt(Ge++):ze],!tt||(Le=tt(ue,ye,Le))<0)return-1}else if(ze!=ye.charCodeAt(Le++))return-1}return Le}function D(ue,je,ye){var Le=u.exec(je.slice(ye));return Le?(ue.p=d.get(Le[0].toLowerCase()),ye+Le[0].length):-1}function z(ue,je,ye){var Le=m.exec(je.slice(ye));return Le?(ue.w=x.get(Le[0].toLowerCase()),ye+Le[0].length):-1}function F(ue,je,ye){var Le=h.exec(je.slice(ye));return Le?(ue.w=f.get(Le[0].toLowerCase()),ye+Le[0].length):-1}function q(ue,je,ye){var Le=w.exec(je.slice(ye));return Le?(ue.m=S.get(Le[0].toLowerCase()),ye+Le[0].length):-1}function Q(ue,je,ye){var Le=g.exec(je.slice(ye));return Le?(ue.m=y.get(Le[0].toLowerCase()),ye+Le[0].length):-1}function re(ue,je,ye){return M(ue,e,je,ye)}function Z(ue,je,ye){return M(ue,r,je,ye)}function se(ue,je,ye){return M(ue,n,je,ye)}function K(ue){return o[ue.getDay()]}function X(ue){return s[ue.getDay()]}function Y(ue){return c[ue.getMonth()]}function oe(ue){return l[ue.getMonth()]}function xe(ue){return i[+(ue.getHours()>=12)]}function H(ue){return 1+~~(ue.getMonth()/3)}function J(ue){return o[ue.getUTCDay()]}function ie(ue){return s[ue.getUTCDay()]}function ce(ue){return c[ue.getUTCMonth()]}function me(ue){return l[ue.getUTCMonth()]}function he(ue){return i[+(ue.getUTCHours()>=12)]}function _e(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var je=O(ue+="",E);return je.toString=function(){return ue},je},parse:function(ue){var je=I(ue+="",!1);return je.toString=function(){return ue},je},utcFormat:function(ue){var je=O(ue+="",j);return je.toString=function(){return ue},je},utcParse:function(ue){var je=I(ue+="",!0);return je.toString=function(){return ue},je}}}var Boe={"-":"",_:" ",0:"0"},bc=/^\s*\d+/,Hht=/^%/,Wht=/[\\^$*+?|[\]().{}]/g;function gs(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function Ght(t){return t.replace(Wht,"\\$&")}function oT(t){return new RegExp("^(?:"+t.map(Ght).join("|")+")","i")}function lT(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Kht(t,e,r){var n=bc.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Xht(t,e,r){var n=bc.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Yht(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Zht(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Qht(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function $oe(t,e,r){var n=bc.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Uoe(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Jht(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function eft(t,e,r){var n=bc.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function tft(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function zoe(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function rft(t,e,r){var n=bc.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Voe(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function nft(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function ift(t,e,r){var n=bc.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function sft(t,e,r){var n=bc.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function aft(t,e,r){var n=bc.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function oft(t,e,r){var n=Hht.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function lft(t,e,r){var n=bc.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function cft(t,e,r){var n=bc.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function qoe(t,e){return gs(t.getDate(),e,2)}function uft(t,e){return gs(t.getHours(),e,2)}function dft(t,e){return gs(t.getHours()%12||12,e,2)}function hft(t,e){return gs(1+NI.count(Tv(t),t),e,3)}function A2e(t,e){return gs(t.getMilliseconds(),e,3)}function fft(t,e){return A2e(t,e)+"000"}function mft(t,e){return gs(t.getMonth()+1,e,2)}function pft(t,e){return gs(t.getMinutes(),e,2)}function gft(t,e){return gs(t.getSeconds(),e,2)}function xft(t){var e=t.getDay();return e===0?7:e}function vft(t,e){return gs(U7.count(Tv(t)-1,t),e,2)}function C2e(t){var e=t.getDay();return e>=4||e===0?GA(t):GA.ceil(t)}function yft(t,e){return t=C2e(t),gs(GA.count(Tv(t),t)+(Tv(t).getDay()===4),e,2)}function bft(t){return t.getDay()}function wft(t,e){return gs(I8.count(Tv(t)-1,t),e,2)}function _ft(t,e){return gs(t.getFullYear()%100,e,2)}function Nft(t,e){return t=C2e(t),gs(t.getFullYear()%100,e,2)}function Sft(t,e){return gs(t.getFullYear()%1e4,e,4)}function Eft(t,e){var r=t.getDay();return t=r>=4||r===0?GA(t):GA.ceil(t),gs(t.getFullYear()%1e4,e,4)}function jft(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gs(e/60|0,"0",2)+gs(e%60,"0",2)}function Hoe(t,e){return gs(t.getUTCDate(),e,2)}function Aft(t,e){return gs(t.getUTCHours(),e,2)}function Cft(t,e){return gs(t.getUTCHours()%12||12,e,2)}function Tft(t,e){return gs(1+$7.count(Pv(t),t),e,3)}function T2e(t,e){return gs(t.getUTCMilliseconds(),e,3)}function Pft(t,e){return T2e(t,e)+"000"}function kft(t,e){return gs(t.getUTCMonth()+1,e,2)}function Oft(t,e){return gs(t.getUTCMinutes(),e,2)}function Ift(t,e){return gs(t.getUTCSeconds(),e,2)}function Rft(t){var e=t.getUTCDay();return e===0?7:e}function Dft(t,e){return gs(z7.count(Pv(t)-1,t),e,2)}function P2e(t){var e=t.getUTCDay();return e>=4||e===0?KA(t):KA.ceil(t)}function Mft(t,e){return t=P2e(t),gs(KA.count(Pv(t),t)+(Pv(t).getUTCDay()===4),e,2)}function Lft(t){return t.getUTCDay()}function Fft(t,e){return gs(R8.count(Pv(t)-1,t),e,2)}function Bft(t,e){return gs(t.getUTCFullYear()%100,e,2)}function $ft(t,e){return t=P2e(t),gs(t.getUTCFullYear()%100,e,2)}function Uft(t,e){return gs(t.getUTCFullYear()%1e4,e,4)}function zft(t,e){var r=t.getUTCDay();return t=r>=4||r===0?KA(t):KA.ceil(t),gs(t.getUTCFullYear()%1e4,e,4)}function Vft(){return"+0000"}function Woe(){return"%"}function Goe(t){return+t}function Koe(t){return Math.floor(+t/1e3)}var QN,k2e,O2e;qft({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qft(t){return QN=qht(t),k2e=QN.format,QN.parse,O2e=QN.utcFormat,QN.utcParse,QN}function Hft(t){return new Date(t)}function Wft(t){return t instanceof Date?+t:+new Date(+t)}function fQ(t,e,r,n,i,s,o,l,c,u){var d=JZ(),h=d.invert,f=d.domain,m=u(".%L"),x=u(":%S"),g=u("%I:%M"),y=u("%I %p"),w=u("%a %d"),S=u("%b %d"),E=u("%B"),j=u("%Y");function T(O){return(c(O)<O?m:l(O)<O?x:o(O)<O?g:s(O)<O?y:n(O)<O?i(O)<O?w:S:r(O)<O?E:j)(O)}return d.invert=function(O){return new Date(h(O))},d.domain=function(O){return arguments.length?f(Array.from(O,Wft)):f().map(Hft)},d.ticks=function(O){var I=f();return t(I[0],I[I.length-1],O??10)},d.tickFormat=function(O,I){return I==null?T:u(I)},d.nice=function(O){var I=f();return(!O||typeof O.range!="function")&&(O=e(I[0],I[I.length-1],O??10)),O?f(v2e(I,O)):d},d.copy=function(){return _I(d,fQ(t,e,r,n,i,s,o,l,c,u))},d}function Gft(){return zm.apply(fQ(zht,Vht,Tv,dQ,U7,NI,cQ,oQ,Vw,k2e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Kft(){return zm.apply(fQ($ht,Uht,Pv,hQ,z7,$7,uQ,lQ,Vw,O2e).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V7(){var t=0,e=1,r,n,i,s,o=Nd,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(s(h)-r)*i,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,x;return arguments.length?([m,x]=f,o=h(m,x),u):[o(0),o(1)]}}return u.range=d(f5),u.rangeRound=d(QZ),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return s=h,r=h(t),n=h(e),i=r===n?0:1/(n-r),u}}function Yb(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function I2e(){var t=Xb(V7()(Nd));return t.copy=function(){return Yb(t,I2e())},Vv.apply(t,arguments)}function R2e(){var t=rQ(V7()).domain([1,10]);return t.copy=function(){return Yb(t,R2e()).base(t.base())},Vv.apply(t,arguments)}function D2e(){var t=nQ(V7());return t.copy=function(){return Yb(t,D2e()).constant(t.constant())},Vv.apply(t,arguments)}function mQ(){var t=iQ(V7());return t.copy=function(){return Yb(t,mQ()).exponent(t.exponent())},Vv.apply(t,arguments)}function Xft(){return mQ.apply(null,arguments).exponent(.5)}function M2e(){var t=[],e=Nd;function r(n){if(n!=null&&!isNaN(n=+n))return e((bI(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(rb),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>Ddt(t,s/n))},r.copy=function(){return M2e(e).domain(t)},Vv.apply(r,arguments)}function q7(){var t=0,e=.5,r=1,n=1,i,s,o,l,c,u=Nd,d,h=!1,f;function m(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-s)*(n*g<n*s?l:c),u(h?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,e,r]=g,i=d(t=+t),s=d(e=+e),o=d(r=+r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,m):[t,e,r]},m.clamp=function(g){return arguments.length?(h=!!g,m):h},m.interpolator=function(g){return arguments.length?(u=g,m):u};function x(g){return function(y){var w,S,E;return arguments.length?([w,S,E]=y,u=oht(g,[w,S,E]),m):[u(0),u(.5),u(1)]}}return m.range=x(f5),m.rangeRound=x(QZ),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return d=g,i=g(t),s=g(e),o=g(r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,m}}function L2e(){var t=Xb(q7()(Nd));return t.copy=function(){return Yb(t,L2e())},Vv.apply(t,arguments)}function F2e(){var t=rQ(q7()).domain([.1,1,10]);return t.copy=function(){return Yb(t,F2e()).base(t.base())},Vv.apply(t,arguments)}function B2e(){var t=nQ(q7());return t.copy=function(){return Yb(t,B2e()).constant(t.constant())},Vv.apply(t,arguments)}function pQ(){var t=iQ(q7());return t.copy=function(){return Yb(t,pQ()).exponent(t.exponent())},Vv.apply(t,arguments)}function Yft(){return pQ.apply(null,arguments).exponent(.5)}const Xoe=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nP,scaleDiverging:L2e,scaleDivergingLog:F2e,scaleDivergingPow:pQ,scaleDivergingSqrt:Yft,scaleDivergingSymlog:B2e,scaleIdentity:x2e,scaleImplicit:vH,scaleLinear:k8,scaleLog:y2e,scaleOrdinal:XZ,scalePoint:C4,scalePow:sQ,scaleQuantile:_2e,scaleQuantize:N2e,scaleRadial:w2e,scaleSequential:I2e,scaleSequentialLog:R2e,scaleSequentialPow:mQ,scaleSequentialQuantile:M2e,scaleSequentialSqrt:Xft,scaleSequentialSymlog:D2e,scaleSqrt:Pht,scaleSymlog:b2e,scaleThreshold:S2e,scaleTime:Gft,scaleUtc:Kft,tickFormat:g2e},Symbol.toStringTag,{value:"Module"}));var Zft=i5;function Qft(t,e,r){for(var n=-1,i=t.length;++n<i;){var s=t[n],o=e(s);if(o!=null&&(l===void 0?o===o&&!Zft(o):r(o,l)))var l=o,c=s}return c}var H7=Qft;function Jft(t,e){return t>e}var $2e=Jft,emt=H7,tmt=$2e,rmt=h5;function nmt(t){return t&&t.length?emt(t,rmt,tmt):void 0}var imt=nmt;const Ly=Vi(imt);function smt(t,e){return t<e}var U2e=smt,amt=H7,omt=U2e,lmt=h5;function cmt(t){return t&&t.length?amt(t,lmt,omt):void 0}var umt=cmt;const W7=Vi(umt);var dmt=PZ,hmt=Ug,fmt=Xwe,mmt=xh;function pmt(t,e){var r=mmt(t)?dmt:fmt;return r(t,hmt(e))}var gmt=pmt,xmt=Gwe,vmt=gmt;function ymt(t,e){return xmt(vmt(t,e),1)}var bmt=ymt;const wmt=Vi(bmt);var _mt=qZ;function Nmt(t,e){return _mt(t,e)}var Smt=Nmt;const jb=Vi(Smt);var m5=1e9,Emt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xQ,Qa=!0,Lm="[DecimalError] ",__=Lm+"Invalid argument: ",gQ=Lm+"Exponent out of range: ",p5=Math.floor,ww=Math.pow,jmt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yf,cc=1e7,Pa=7,z2e=9007199254740991,D8=p5(z2e/Pa),on={};on.absoluteValue=on.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};on.comparedTo=on.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};on.decimalPlaces=on.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Pa;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};on.dividedBy=on.div=function(t){return cv(this,new this.constructor(t))};on.dividedToIntegerBy=on.idiv=function(t){var e=this,r=e.constructor;return ca(cv(e,new r(t),0,1),r.precision)};on.equals=on.eq=function(t){return!this.cmp(t)};on.exponent=function(){return wl(this)};on.greaterThan=on.gt=function(t){return this.cmp(t)>0};on.greaterThanOrEqualTo=on.gte=function(t){return this.cmp(t)>=0};on.isInteger=on.isint=function(){return this.e>this.d.length-2};on.isNegative=on.isneg=function(){return this.s<0};on.isPositive=on.ispos=function(){return this.s>0};on.isZero=function(){return this.s===0};on.lessThan=on.lt=function(t){return this.cmp(t)<0};on.lessThanOrEqualTo=on.lte=function(t){return this.cmp(t)<1};on.logarithm=on.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(yf))throw Error(Lm+"NaN");if(r.s<1)throw Error(Lm+(r.s?"NaN":"-Infinity"));return r.eq(yf)?new n(0):(Qa=!1,e=cv(lP(r,s),lP(t,s),s),Qa=!0,ca(e,i))};on.minus=on.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?H2e(e,t):V2e(e,(t.s=-t.s,t))};on.modulo=on.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Lm+"NaN");return r.s?(Qa=!1,e=cv(r,t,0,1).times(t),Qa=!0,r.minus(e)):ca(new n(r),i)};on.naturalExponential=on.exp=function(){return q2e(this)};on.naturalLogarithm=on.ln=function(){return lP(this)};on.negated=on.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};on.plus=on.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?V2e(e,t):H2e(e,(t.s=-t.s,t))};on.precision=on.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(__+t);if(e=wl(i)+1,n=i.d.length-1,r=n*Pa+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};on.squareRoot=on.sqrt=function(){var t,e,r,n,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Lm+"NaN")}for(t=wl(l),Qa=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=gg(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=p5((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(s=n,n=s.plus(cv(l,s,o+2)).times(.5),gg(s.d).slice(0,o)===(e=gg(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ca(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Qa=!0,ca(n,r)};on.times=on.mul=function(t){var e,r,n,i,s,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,r=d.e+t.e,c=f.length,u=m.length,c<u&&(s=f,f=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=c+n;i>n;)l=s[i]+m[n]*f[i-n-1]+e,s[i--]=l%cc|0,e=l/cc|0;s[i]=(s[i]+e)%cc|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Qa?ca(t,h.precision):t};on.toDecimalPlaces=on.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Rg(t,0,m5),e===void 0?e=n.rounding:Rg(e,0,8),ca(r,t+wl(r)+1,e))};on.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Y_(n,!0):(Rg(t,0,m5),e===void 0?e=i.rounding:Rg(e,0,8),n=ca(new i(n),t+1,e),r=Y_(n,!0,t+1)),r};on.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?Y_(i):(Rg(t,0,m5),e===void 0?e=s.rounding:Rg(e,0,8),n=ca(new s(i),t+wl(i)+1,e),r=Y_(n.abs(),!1,t+wl(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};on.toInteger=on.toint=function(){var t=this,e=t.constructor;return ca(new e(t),wl(t)+1,e.rounding)};on.toNumber=function(){return+this};on.toPower=on.pow=function(t){var e,r,n,i,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(yf);if(l=new c(l),!l.s){if(t.s<1)throw Error(Lm+"Infinity");return l}if(l.eq(yf))return l;if(n=c.precision,t.eq(yf))return ca(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=z2e){for(i=new c(yf),e=Math.ceil(n/Pa+4),Qa=!1;r%2&&(i=i.times(l),Zoe(i.d,e)),r=p5(r/2),r!==0;)l=l.times(l),Zoe(l.d,e);return Qa=!0,t.s<0?new c(yf).div(i):ca(i,n)}}else if(s<0)throw Error(Lm+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Qa=!1,i=t.times(lP(l,n+u)),Qa=!0,i=q2e(i),i.s=s,i};on.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=wl(i),n=Y_(i,r<=s.toExpNeg||r>=s.toExpPos)):(Rg(t,1,m5),e===void 0?e=s.rounding:Rg(e,0,8),i=ca(new s(i),t,e),r=wl(i),n=Y_(i,t<=r||r<=s.toExpNeg,t)),n};on.toSignificantDigits=on.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Rg(t,1,m5),e===void 0?e=n.rounding:Rg(e,0,8)),ca(new n(r),t,e)};on.toString=on.valueOf=on.val=on.toJSON=on[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=wl(t),r=t.constructor;return Y_(t,e<=r.toExpNeg||e>=r.toExpPos)};function V2e(t,e){var r,n,i,s,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Qa?ca(e,h):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,i=o,l=c.length),o=Math.ceil(h/Pa),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/cc|0,c[s]%=cc;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Qa?ca(e,h):e}function Rg(t,e,r){if(t!==~~t||t<e||t>r)throw Error(__+t)}function gg(t){var e,r,n,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)n=t[e]+"",r=Pa-n.length,r&&(s+=b1(r)),s+=n;o=t[e],n=o+"",r=Pa-n.length,r&&(s+=b1(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var cv=function(){function t(n,i){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%cc|0,o=s/cc|0;return o&&n.unshift(o),n}function e(n,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*cc+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var l,c,u,d,h,f,m,x,g,y,w,S,E,j,T,O,I,M,D=n.constructor,z=n.s==i.s?1:-1,F=n.d,q=i.d;if(!n.s)return new D(n);if(!i.s)throw Error(Lm+"Division by zero");for(c=n.e-i.e,I=q.length,T=F.length,m=new D(z),x=m.d=[],u=0;q[u]==(F[u]||0);)++u;if(q[u]>(F[u]||0)&&--c,s==null?S=s=D.precision:o?S=s+(wl(n)-wl(i))+1:S=s,S<0)return new D(0);if(S=S/Pa+2|0,u=0,I==1)for(d=0,q=q[0],S++;(u<T||d)&&S--;u++)E=d*cc+(F[u]||0),x[u]=E/q|0,d=E%q|0;else{for(d=cc/(q[0]+1)|0,d>1&&(q=t(q,d),F=t(F,d),I=q.length,T=F.length),j=I,g=F.slice(0,I),y=g.length;y<I;)g[y++]=0;M=q.slice(),M.unshift(0),O=q[0],q[1]>=cc/2&&++O;do d=0,l=e(q,g,I,y),l<0?(w=g[0],I!=y&&(w=w*cc+(g[1]||0)),d=w/O|0,d>1?(d>=cc&&(d=cc-1),h=t(q,d),f=h.length,y=g.length,l=e(h,g,f,y),l==1&&(d--,r(h,I<f?M:q,f))):(d==0&&(l=d=1),h=q.slice()),f=h.length,f<y&&h.unshift(0),r(g,h,y),l==-1&&(y=g.length,l=e(q,g,I,y),l<1&&(d++,r(g,I<y?M:q,y))),y=g.length):l===0&&(d++,g=[0]),x[u++]=d,l&&g[0]?g[y++]=F[j]||0:(g=[F[j]],y=1);while((j++<T||g[0]!==void 0)&&S--)}return x[0]||x.shift(),m.e=c,ca(m,o?s+wl(m)+1:s)}}();function q2e(t,e){var r,n,i,s,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(wl(t)>16)throw Error(gQ+wl(t));if(!t.s)return new d(yf);for(e==null?(Qa=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(ww(2,u))/Math.LN10*2+5|0,l+=n,r=i=s=new d(yf),d.precision=l;;){if(i=ca(i.times(t),l),r=r.times(++c),o=s.plus(cv(i,r,l)),gg(o.d).slice(0,l)===gg(s.d).slice(0,l)){for(;u--;)s=ca(s.times(s),l);return d.precision=h,e==null?(Qa=!0,ca(s,h)):s}s=o}}function wl(t){for(var e=t.e*Pa,r=t.d[0];r>=10;r/=10)e++;return e}function eU(t,e,r){if(e>t.LN10.sd())throw Qa=!0,r&&(t.precision=r),Error(Lm+"LN10 precision limit exceeded");return ca(new t(t.LN10),e)}function b1(t){for(var e="";t--;)e+="0";return e}function lP(t,e){var r,n,i,s,o,l,c,u,d,h=1,f=10,m=t,x=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(Lm+(m.s?"NaN":"-Infinity"));if(m.eq(yf))return new g(0);if(e==null?(Qa=!1,u=y):u=e,m.eq(10))return e==null&&(Qa=!0),eU(g,u);if(u+=f,g.precision=u,r=gg(x),n=r.charAt(0),s=wl(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=gg(m.d),n=r.charAt(0),h++;s=wl(m),n>1?(m=new g("0."+r),s++):m=new g(n+"."+r.slice(1))}else return c=eU(g,u+2,y).times(s+""),m=lP(new g(n+"."+r.slice(1)),u-f).plus(c),g.precision=y,e==null?(Qa=!0,ca(m,y)):m;for(l=o=m=cv(m.minus(yf),m.plus(yf),u),d=ca(m.times(m),u),i=3;;){if(o=ca(o.times(d),u),c=l.plus(cv(o,new g(i),u)),gg(c.d).slice(0,u)===gg(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(eU(g,u+2,y).times(s+""))),l=cv(l,new g(h),u),g.precision=y,e==null?(Qa=!0,ca(l,y)):l;l=c,i+=2}}function Yoe(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=p5(r/Pa),t.d=[],n=(r+1)%Pa,r<0&&(n+=Pa),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Pa;n<i;)t.d.push(+e.slice(n,n+=Pa));e=e.slice(n),n=Pa-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Qa&&(t.e>D8||t.e<-D8))throw Error(gQ+r)}else t.s=0,t.e=0,t.d=[0];return t}function ca(t,e,r){var n,i,s,o,l,c,u,d,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Pa,i=e,u=h[d=0];else{if(d=Math.ceil((n+1)/Pa),s=h.length,d>=s)return t;for(u=s=h[d],o=1;s>=10;s/=10)o++;n%=Pa,i=n-Pa+o}if(r!==void 0&&(s=ww(10,o-i-1),l=u/s%10|0,c=e<0||h[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/ww(10,o-i):0:h[d-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(s=wl(t),h.length=1,e=e-s-1,h[0]=ww(10,(Pa-e%Pa)%Pa),t.e=p5(-e/Pa)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=d,s=1,d--):(h.length=d+1,s=ww(10,Pa-n),h[d]=i>0?(u/ww(10,o-i)%ww(10,i)|0)*s:0),c)for(;;)if(d==0){(h[0]+=s)==cc&&(h[0]=1,++t.e);break}else{if(h[d]+=s,h[d]!=cc)break;h[d--]=0,s=1}for(n=h.length;h[--n]===0;)h.pop();if(Qa&&(t.e>D8||t.e<-D8))throw Error(gQ+wl(t));return t}function H2e(t,e){var r,n,i,s,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Qa?ca(e,m):e;if(c=t.d,h=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),i=Math.max(Math.ceil(m/Pa),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=h.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}o=0}for(d&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(s=i;s&&c[--s]===0;)c[s]=cc-1;--c[s],c[i]+=cc}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Qa?ca(e,m):e):new f(0)}function Y_(t,e,r){var n,i=wl(t),s=gg(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+b1(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+b1(-i-1)+s,r&&(n=r-o)>0&&(s+=b1(n))):i>=o?(s+=b1(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+b1(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=b1(n))),t.s<0?"-"+s:s}function Zoe(t,e){if(t.length>e)return t.length=e,!0}function W2e(t){var e,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(__+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Yoe(o,s.toString())}else if(typeof s!="string")throw Error(__+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,jmt.test(s))Yoe(o,s);else throw Error(__+s)}if(i.prototype=on,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=W2e,i.config=i.set=Amt,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Amt(t){if(!t||typeof t!="object")throw Error(Lm+"Object expected");var e,r,n,i=["precision",1,m5,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(p5(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(__+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(__+r+": "+n);return this}var xQ=W2e(Emt);yf=new xQ(1);const Qs=xQ;function Cmt(t){return Omt(t)||kmt(t)||Pmt(t)||Tmt()}function Tmt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pmt(t,e){if(t){if(typeof t=="string")return _H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _H(t,e)}}function kmt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Omt(t){if(Array.isArray(t))return _H(t)}function _H(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Imt=function(e){return e},G2e={"@@functional/placeholder":!0},K2e=function(e){return e===G2e},Qoe=function(e){return function r(){return arguments.length===0||arguments.length===1&&K2e(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Rmt=function t(e,r){return e===1?r:Qoe(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==G2e}).length;return o>=e?r.apply(void 0,i):t(e-o,Qoe(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(h){return K2e(h)?c.shift():h});return r.apply(void 0,Cmt(d).concat(c))}))})},G7=function(e){return Rmt(e.length,e)},NH=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},Dmt=G7(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Mmt=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Imt;var i=r.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},SH=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},X2e=function(e){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=e.apply(void 0,s)),n}};function Lmt(t){var e;return t===0?e=1:e=Math.floor(new Qs(t).abs().log(10).toNumber())+1,e}function Fmt(t,e,r){for(var n=new Qs(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var Bmt=G7(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),$mt=G7(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Umt=G7(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const K7={rangeStep:Fmt,getDigitCount:Lmt,interpolateNumber:Bmt,uninterpolateNumber:$mt,uninterpolateTruncation:Umt};function EH(t){return qmt(t)||Vmt(t)||Y2e(t)||zmt()}function zmt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vmt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function qmt(t){if(Array.isArray(t))return jH(t)}function cP(t,e){return Gmt(t)||Wmt(t,e)||Y2e(t,e)||Hmt()}function Hmt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y2e(t,e){if(t){if(typeof t=="string")return jH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jH(t,e)}}function jH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wmt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){i=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}}function Gmt(t){if(Array.isArray(t))return t}function Z2e(t){var e=cP(t,2),r=e[0],n=e[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function Q2e(t,e,r){if(t.lte(0))return new Qs(0);var n=K7.getDigitCount(t.toNumber()),i=new Qs(10).pow(n),s=t.div(i),o=n!==1?.05:.1,l=new Qs(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return e?c:new Qs(Math.ceil(c))}function Kmt(t,e,r){var n=1,i=new Qs(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new Qs(10).pow(K7.getDigitCount(t)-1),i=new Qs(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Qs(Math.floor(t)))}else t===0?i=new Qs(Math.floor((e-1)/2)):r||(i=new Qs(Math.floor(t)));var o=Math.floor((e-1)/2),l=Mmt(Dmt(function(c){return i.add(new Qs(c-o).mul(n)).toNumber()}),NH);return l(0,e)}function J2e(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Qs(0),tickMin:new Qs(0),tickMax:new Qs(0)};var s=Q2e(new Qs(e).sub(t).div(r-1),n,i),o;t<=0&&e>=0?o=new Qs(0):(o=new Qs(t).add(e).div(2),o=o.sub(new Qs(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Qs(e).sub(o).div(s).toNumber()),u=l+c+1;return u>r?J2e(t,e,r,n,i+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:s,tickMin:o.sub(new Qs(l).mul(s)),tickMax:o.add(new Qs(c).mul(s))})}function Xmt(t){var e=cP(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=Z2e([r,n]),c=cP(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(EH(NH(0,i-1).map(function(){return 1/0}))):[].concat(EH(NH(0,i-1).map(function(){return-1/0})),[d]);return r>n?SH(h):h}if(u===d)return Kmt(u,i,s);var f=J2e(u,d,o,s),m=f.step,x=f.tickMin,g=f.tickMax,y=K7.rangeStep(x,g.add(new Qs(.1).mul(m)),m);return r>n?SH(y):y}function Ymt(t,e){var r=cP(t,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Z2e([n,i]),l=cP(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var d=Math.max(e,2),h=Q2e(new Qs(u).sub(c).div(d-1),s,0),f=[].concat(EH(K7.rangeStep(new Qs(c),new Qs(u).sub(new Qs(.99).mul(h)),h)),[u]);return n>i?SH(f):f}var Zmt=X2e(Xmt),Qmt=X2e(Ymt),Jmt="Invariant failed";function ts(t,e){if(!t)throw new Error(Jmt)}var ept=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function XA(t){"@babel/helpers - typeof";return XA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XA(t)}function M8(){return M8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},M8.apply(this,arguments)}function tpt(t,e){return spt(t)||ipt(t,e)||npt(t,e)||rpt()}function rpt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function npt(t,e){if(t){if(typeof t=="string")return Joe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Joe(t,e)}}function Joe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ipt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function spt(t){if(Array.isArray(t))return t}function apt(t,e){if(t==null)return{};var r=opt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function opt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lpt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cpt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r_e(n.key),n)}}function upt(t,e,r){return e&&cpt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dpt(t,e,r){return e=L8(e),hpt(t,e_e()?Reflect.construct(e,r||[],L8(t).constructor):e.apply(t,r))}function hpt(t,e){if(e&&(XA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fpt(t)}function fpt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e_e=function(){return!!t})()}function L8(t){return L8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L8(t)}function mpt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AH(t,e)}function AH(t,e){return AH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},AH(t,e)}function t_e(t,e,r){return e=r_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r_e(t){var e=ppt(t,"string");return XA(e)=="symbol"?e:e+""}function ppt(t,e){if(XA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(XA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g5=function(t){function e(){return lpt(this,e),dpt(this,e,arguments)}return mpt(e,t),upt(e,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,h=n.yAxis,f=apt(n,ept),m=bn(f,!1);this.props.direction==="x"&&d.type!=="number"&&ts(!1);var x=c.map(function(g){var y=u(g,l),w=y.x,S=y.y,E=y.value,j=y.errorVal;if(!j)return null;var T=[],O,I;if(Array.isArray(j)){var M=tpt(j,2);O=M[0],I=M[1]}else O=I=j;if(s==="vertical"){var D=d.scale,z=S+i,F=z+o,q=z-o,Q=D(E-O),re=D(E+I);T.push({x1:re,y1:F,x2:re,y2:q}),T.push({x1:Q,y1:z,x2:re,y2:z}),T.push({x1:Q,y1:F,x2:Q,y2:q})}else if(s==="horizontal"){var Z=h.scale,se=w+i,K=se-o,X=se+o,Y=Z(E-O),oe=Z(E+I);T.push({x1:K,y1:oe,x2:X,y2:oe}),T.push({x1:se,y1:Y,x2:se,y2:oe}),T.push({x1:K,y1:Y,x2:X,y2:Y})}return be.createElement(Ni,M8({className:"recharts-errorBar",key:"bar-".concat(T.map(function(xe){return"".concat(xe.x1,"-").concat(xe.x2,"-").concat(xe.y1,"-").concat(xe.y2)}))},m),T.map(function(xe){return be.createElement("line",M8({},xe,{key:"line-".concat(xe.x1,"-").concat(xe.x2,"-").concat(xe.y1,"-").concat(xe.y2)}))}))});return be.createElement(Ni,{className:"recharts-errorBars"},x)}}])}(be.Component);t_e(g5,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});t_e(g5,"displayName","ErrorBar");function uP(t){"@babel/helpers - typeof";return uP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uP(t)}function ele(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ele(Object(r),!0).forEach(function(n){gpt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ele(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gpt(t,e,r){return e=xpt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xpt(t){var e=vpt(t,"string");return uP(e)=="symbol"?e:e+""}function vpt(t,e){if(uP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(uP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n_e=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=uf(r,Kc);if(!o)return null;var l=Kc.defaultProps,c=l!==void 0?lw(lw({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(d,h){var f=h.item,m=h.props,x=m.sectors||m.data||[];return d.concat(x.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?lw(lw({},f),h.props):{},x=m.dataKey,g=m.name,y=m.legendType,w=m.hide;return{inactive:w,dataKey:x,type:c.iconType||y||"square",color:vQ(h),value:g||x,payload:m}}),lw(lw(lw({},c),Kc.getWithHeight(o,i)),{},{payload:u,item:o})};function dP(t){"@babel/helpers - typeof";return dP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dP(t)}function tle(t){return _pt(t)||wpt(t)||bpt(t)||ypt()}function ypt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bpt(t,e){if(t){if(typeof t=="string")return CH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CH(t,e)}}function wpt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _pt(t){if(Array.isArray(t))return CH(t)}function CH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rle(Object(r),!0).forEach(function(n){wE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wE(t,e,r){return e=Npt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Npt(t){var e=Spt(t,"string");return dP(e)=="symbol"?e:e+""}function Spt(t,e){if(dP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(dP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ia(t,e,r){return Mn(t)||Mn(e)?r:Yl(e)?Tf(t,e,r):Fn(e)?e(t):r}function T4(t,e,r,n){var i=wmt(t,function(l){return Ia(l,e)});if(r==="number"){var s=i.filter(function(l){return jr(l)||parseFloat(l)});return s.length?[W7(s),Ly(s)]:[1/0,-1/0]}var o=n?i.filter(function(l){return!Mn(l)}):i;return o.map(function(l){return Yl(l)||l instanceof Date?l:""})}var Ept=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,h=i[u].coordinate,f=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(wd(h-d)!==wd(f-h)){var x=[];if(wd(f-h)===wd(c[1]-c[0])){m=f;var g=h+c[1]-c[0];x[0]=Math.min(g,(g+d)/2),x[1]=Math.max(g,(g+d)/2)}else{m=d;var y=f+c[1]-c[0];x[0]=Math.min(h,(y+h)/2),x[1]=Math.max(h,(y+h)/2)}var w=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>w[0]&&e<=w[1]||e>=x[0]&&e<=x[1]){o=i[u].index;break}}else{var S=Math.min(d,f),E=Math.max(d,f);if(e>(S+h)/2&&e<=(E+h)/2){o=i[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<l-1&&e>(n[j].coordinate+n[j-1].coordinate)/2&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j===l-1&&e>(n[j].coordinate+n[j-1].coordinate)/2){o=n[j].index;break}return o},vQ=function(e){var r,n=e,i=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Bo(Bo({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},jpt=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var x=d[h[f]],g=x.items,y=x.cateAxisId,w=g.filter(function(I){return lv(I.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,E=S!==void 0?Bo(Bo({},S),w[0].props):w[0].props,j=E.barSize,T=E[y];o[T]||(o[T]=[]);var O=Mn(j)?r:j;o[T].push({item:w[0],stackList:w.slice(1),barSize:Mn(O)?void 0:_d(O,n,0)})}}return o},Apt=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=_d(r,i,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=i/c,x=o.reduce(function(j,T){return j+T.barSize||0},0);x+=(c-1)*u,x>=i&&(x-=(c-1)*u,u=0),x>=i&&m>0&&(f=!0,m*=.9,x=c*m);var g=(i-x)/2>>0,y={offset:g-u,size:0};d=o.reduce(function(j,T){var O={item:T.item,position:{offset:y.offset+y.size+u,size:f?m:T.barSize}},I=[].concat(tle(j),[O]);return y=I[I.length-1].position,T.stackList&&T.stackList.length&&T.stackList.forEach(function(M){I.push({item:M,position:y})}),I},h)}else{var w=_d(n,i,0,!0);i-2*w-(c-1)*u<=0&&(u=0);var S=(i-2*w-(c-1)*u)/c;S>1&&(S>>=0);var E=l===+l?Math.min(S,l):S;d=o.reduce(function(j,T,O){var I=[].concat(tle(j),[{item:T.item,position:{offset:w+(S+u)*O+(S-E)/2,size:E}}]);return T.stackList&&T.stackList.length&&T.stackList.forEach(function(M){I.push({item:M,position:I[I.length-1].position})}),I},h)}return d},Cpt=function(e,r,n,i){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=n_e({children:s,legendWidth:c});if(u){var d=i||{},h=d.width,f=d.height,m=u.align,x=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&x==="middle")&&m!=="center"&&jr(e[m]))return Bo(Bo({},e),{},wE({},m,e[m]+(h||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&x!=="middle"&&jr(e[x]))return Bo(Bo({},e),{},wE({},x,e[x]+(f||0)))}return e},Tpt=function(e,r,n){return Mn(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},i_e=function(e,r,n,i,s){var o=r.props.children,l=Cd(o,g5).filter(function(u){return Tpt(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=Ia(d,n);if(Mn(h))return u;var f=Array.isArray(h)?[W7(h),Ly(h)]:[h,h],m=c.reduce(function(x,g){var y=Ia(d,g,0),w=f[0]-Math.abs(Array.isArray(y)?y[0]:y),S=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,x[0]),Math.max(S,x[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Ppt=function(e,r,n,i,s){var o=r.map(function(l){return i_e(e,l,n,s,i)}).filter(function(l){return!Mn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},s_e=function(e,r,n,i,s){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&i_e(e,c,u,i)||T4(e,u,n,s)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},a_e=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},o_e=function(e,r,n,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},av=function(e,r,n){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?wd(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=s?s.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return d.filter(function(h){return!c5(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:s?s[h]:h,index:f,offset:u}})},tU=new WeakMap,nD=function(e,r){if(typeof r!="function")return e;tU.has(e)||tU.set(e,new WeakMap);var n=tU.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},l_e=function(e,r,n){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:nP(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:k8(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:C4(),realScaleType:"point"}:s==="category"?{scale:nP(),realScaleType:"band"}:{scale:k8(),realScaleType:"linear"};if(K_(i)){var c="scale".concat(k7(i));return{scale:(Xoe[c]||C4)(),realScaleType:Xoe[c]?c:"point"}}return Fn(i)?{scale:i}:{scale:C4(),realScaleType:"point"}},nle=1e-4,c_e=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),s=Math.min(i[0],i[1])-nle,o=Math.max(i[0],i[1])+nle,l=e(r[0]),c=e(r[n-1]);(l<s||l>o||c<s||c>o)&&e.domain([r[0],r[n-1]])}},kpt=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},Opt=function(e,r){if(!r||r.length!==2||!jr(r[0])||!jr(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!jr(e[0])||e[0]<n)&&(s[0]=n),(!jr(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},Ipt=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,o=0,l=0;l<r;++l){var c=c5(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=s,e[l][n][1]=s+c,s=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},Rpt=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,o=0;o<r;++o){var l=c5(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},Dpt={sign:Ipt,expand:ert,none:UA,silhouette:trt,wiggle:rrt,positive:Rpt},Mpt=function(e,r,n){var i=r.map(function(l){return l.props.dataKey}),s=Dpt[n],o=Jtt().keys(i).value(function(l,c){return+Ia(l,c,0)}).order(Jq).offset(s);return o(e)},Lpt=function(e,r,n,i,s,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(h,f){var m,x=(m=f.type)!==null&&m!==void 0&&m.defaultProps?Bo(Bo({},f.type.defaultProps),f.props):f.props,g=x.stackId,y=x.hide;if(y)return h;var w=x[n],S=h[w]||{hasStack:!1,stackGroups:{}};if(Yl(g)){var E=S.stackGroups[g]||{numericAxisId:n,cateAxisId:i,items:[]};E.items.push(f),S.hasStack=!0,S.stackGroups[g]=E}else S.stackGroups[Kb("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[f]};return Bo(Bo({},h),{},wE({},w,S))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var x={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,y){var w=m.stackGroups[y];return Bo(Bo({},g),{},wE({},y,{numericAxisId:n,cateAxisId:i,items:w.items,stackedData:Mpt(e,w.items,s)}))},x)}return Bo(Bo({},h),{},wE({},f,m))},d)},u_e=function(e,r){var n=r.realScaleType,i=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Zmt(u,s,l);return e.domain([W7(d),Ly(d)]),{niceTicks:d}}if(s&&i==="number"){var h=e.domain(),f=Qmt(h,s,l);return{niceTicks:f}}return null};function YA(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Mn(i[e.dataKey])){var l=u8(r,"value",i[e.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Ia(i,Mn(o)?e.dataKey:o);return Mn(c)?null:e.scale(c)}var ile=function(e){var r=e.axis,n=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var c=Ia(o,r.dataKey,r.domain[l]);return Mn(c)?null:r.scale(c)-s/2+i},Fpt=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},Bpt=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Bo(Bo({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Yl(s)){var o=r[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},$pt=function(e){return e.reduce(function(r,n){return[W7(n.concat([r[0]]).filter(jr)),Ly(n.concat([r[1]]).filter(jr))]},[1/0,-1/0])},d_e=function(e,r,n){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,d){var h=$pt(d.slice(r,n+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},sle=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ale=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TH=function(e,r,n){if(Fn(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(jr(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(sle.test(e[0])){var s=+sle.exec(e[0])[1];i[0]=r[0]-s}else Fn(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(jr(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(ale.test(e[1])){var o=+ale.exec(e[1])[1];i[1]=r[1]+o}else Fn(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},F8=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var s=WZ(r,function(h){return h.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},ole=function(e,r,n){return!e||!e.length||jb(e,Tf(n,"type.defaultProps.domain"))?r:e},h_e=function(e,r){var n=e.type.defaultProps?Bo(Bo({},e.type.defaultProps),e.props):e.props,i=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Bo(Bo({},bn(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:vQ(e),value:Ia(r,i),type:c,payload:r,chartType:u,hide:d})};function hP(t){"@babel/helpers - typeof";return hP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hP(t)}function lle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ux(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lle(Object(r),!0).forEach(function(n){f_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f_e(t,e,r){return e=Upt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Upt(t){var e=zpt(t,"string");return hP(e)=="symbol"?e:e+""}function zpt(t,e){if(hP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vpt(t,e){return Gpt(t)||Wpt(t,e)||Hpt(t,e)||qpt()}function qpt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hpt(t,e){if(t){if(typeof t=="string")return cle(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cle(t,e)}}function cle(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wpt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Gpt(t){if(Array.isArray(t))return t}var B8=Math.PI/180,Kpt=function(e){return e*180/Math.PI},wa=function(e,r,n,i){return{x:e+Math.cos(-B8*i)*n,y:r+Math.sin(-B8*i)*n}},m_e=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Xpt=function(e,r,n,i,s){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=_d(e.cx,o,o/2),h=_d(e.cy,l,l/2),f=m_e(o,l,n),m=_d(e.innerRadius,f,0),x=_d(e.outerRadius,f,f*.8),g=Object.keys(r);return g.reduce(function(y,w){var S=r[w],E=S.domain,j=S.reversed,T;if(Mn(S.range))i==="angleAxis"?T=[c,u]:i==="radiusAxis"&&(T=[m,x]),j&&(T=[T[1],T[0]]);else{T=S.range;var O=T,I=Vpt(O,2);c=I[0],u=I[1]}var M=l_e(S,s),D=M.realScaleType,z=M.scale;z.domain(E).range(T),c_e(z);var F=u_e(z,ux(ux({},S),{},{realScaleType:D})),q=ux(ux(ux({},S),F),{},{range:T,radius:x,realScaleType:D,scale:z,cx:d,cy:h,innerRadius:m,outerRadius:x,startAngle:c,endAngle:u});return ux(ux({},y),{},f_e({},w,q))},{})},Ypt=function(e,r){var n=e.x,i=e.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-o,2))},Zpt=function(e,r){var n=e.x,i=e.y,s=r.cx,o=r.cy,l=Ypt({x:n,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:Kpt(u),angleInRadian:u}},Qpt=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return{startAngle:r-o*360,endAngle:n-o*360}},Jpt=function(e,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},ule=function(e,r){var n=e.x,i=e.y,s=Zpt({x:n,y:i},r),o=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Qpt(r),h=d.startAngle,f=d.endAngle,m=l,x;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;x=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;x=m>=f&&m<=h}return x?ux(ux({},r),{},{radius:o,angle:Jpt(m,r)}):null},p_e=function(e){return!C.isValidElement(e)&&!Fn(e)&&typeof e!="boolean"?e.className:""};function fP(t){"@babel/helpers - typeof";return fP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fP(t)}var e0t=["offset"];function t0t(t){return s0t(t)||i0t(t)||n0t(t)||r0t()}function r0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n0t(t,e){if(t){if(typeof t=="string")return PH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PH(t,e)}}function i0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function s0t(t){if(Array.isArray(t))return PH(t)}function PH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a0t(t,e){if(t==null)return{};var r=o0t(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o0t(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dle(Object(r),!0).forEach(function(n){l0t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l0t(t,e,r){return e=c0t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c0t(t){var e=u0t(t,"string");return fP(e)=="symbol"?e:e+""}function u0t(t,e){if(fP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mP.apply(this,arguments)}var d0t=function(e){var r=e.value,n=e.formatter,i=Mn(e.children)?r:e.children;return Fn(n)?n(i):i},h0t=function(e,r){var n=wd(r-e),i=Math.min(Math.abs(r-e),360);return n*i},f0t=function(e,r,n){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,x=c.endAngle,g=c.clockWise,y=(h+f)/2,w=h0t(m,x),S=w>=0?1:-1,E,j;i==="insideStart"?(E=m+S*o,j=g):i==="insideEnd"?(E=x-S*o,j=!g):i==="end"&&(E=x+S*o,j=g),j=w<=0?j:!j;var T=wa(u,d,y,E),O=wa(u,d,y,E+(j?1:-1)*359),I="M".concat(T.x,",").concat(T.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(j?0:1,`,
    `).concat(O.x,",").concat(O.y),M=Mn(e.id)?Kb("recharts-radial-line-"):e.id;return be.createElement("text",mP({},n,{dominantBaseline:"central",className:Gn("recharts-radial-bar-label",l)}),be.createElement("defs",null,be.createElement("path",{id:M,d:I})),be.createElement("textPath",{xlinkHref:"#".concat(M)},r))},m0t=function(e){var r=e.viewBox,n=e.offset,i=e.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,h=s.endAngle,f=(d+h)/2;if(i==="outside"){var m=wa(o,l,u+n,f),x=m.x,g=m.y;return{x,y:g,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,w=wa(o,l,y,f),S=w.x,E=w.y;return{x:S,y:E,textAnchor:"middle",verticalAnchor:"middle"}},p0t=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,s=e.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*i,m=h>0?"end":"start",x=h>0?"start":"end",g=u>=0?1:-1,y=g*i,w=g>0?"end":"start",S=g>0?"start":"end";if(s==="top"){var E={x:l+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:m};return Dl(Dl({},E),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var j={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:x};return Dl(Dl({},j),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(s==="left"){var T={x:l-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Dl(Dl({},T),n?{width:Math.max(T.x-n.x,0),height:d}:{})}if(s==="right"){var O={x:l+u+y,y:c+d/2,textAnchor:S,verticalAnchor:"middle"};return Dl(Dl({},O),n?{width:Math.max(n.x+n.width-O.x,0),height:d}:{})}var I=n?{width:u,height:d}:{};return s==="insideLeft"?Dl({x:l+y,y:c+d/2,textAnchor:S,verticalAnchor:"middle"},I):s==="insideRight"?Dl({x:l+u-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},I):s==="insideTop"?Dl({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:x},I):s==="insideBottom"?Dl({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},I):s==="insideTopLeft"?Dl({x:l+y,y:c+f,textAnchor:S,verticalAnchor:x},I):s==="insideTopRight"?Dl({x:l+u-y,y:c+f,textAnchor:w,verticalAnchor:x},I):s==="insideBottomLeft"?Dl({x:l+y,y:c+d-f,textAnchor:S,verticalAnchor:m},I):s==="insideBottomRight"?Dl({x:l+u-y,y:c+d-f,textAnchor:w,verticalAnchor:m},I):s5(s)&&(jr(s.x)||Uw(s.x))&&(jr(s.y)||Uw(s.y))?Dl({x:l+_d(s.x,u),y:c+_d(s.y,d),textAnchor:"end",verticalAnchor:"end"},I):Dl({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},I)},g0t=function(e){return"cx"in e&&jr(e.cx)};function dc(t){var e=t.offset,r=e===void 0?5:e,n=a0t(t,e0t),i=Dl({offset:r},n),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,f=i.textBreakAll;if(!s||Mn(l)&&Mn(c)&&!C.isValidElement(u)&&!Fn(u))return null;if(C.isValidElement(u))return C.cloneElement(u,i);var m;if(Fn(u)){if(m=C.createElement(u,i),C.isValidElement(m))return m}else m=d0t(i);var x=g0t(s),g=bn(i,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return f0t(i,m,g);var y=x?m0t(i):p0t(i);return be.createElement(X_,mP({className:Gn("recharts-label",h)},g,y,{breakAll:f}),m)}dc.displayName="Label";var g_e=function(e){var r=e.cx,n=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,m=e.top,x=e.left,g=e.width,y=e.height,w=e.clockWise,S=e.labelViewBox;if(S)return S;if(jr(g)&&jr(y)){if(jr(h)&&jr(f))return{x:h,y:f,width:g,height:y};if(jr(m)&&jr(x))return{x:m,y:x,width:g,height:y}}return jr(h)&&jr(f)?{x:h,y:f,width:0,height:0}:jr(r)&&jr(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:e.viewBox?e.viewBox:{}},x0t=function(e,r){return e?e===!0?be.createElement(dc,{key:"label-implicit",viewBox:r}):Yl(e)?be.createElement(dc,{key:"label-implicit",viewBox:r,value:e}):C.isValidElement(e)?e.type===dc?C.cloneElement(e,{key:"label-implicit",viewBox:r}):be.createElement(dc,{key:"label-implicit",content:e,viewBox:r}):Fn(e)?be.createElement(dc,{key:"label-implicit",content:e,viewBox:r}):s5(e)?be.createElement(dc,mP({viewBox:r},e,{key:"label-implicit"})):null:null},v0t=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,s=g_e(e),o=Cd(i,dc).map(function(c,u){return C.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var l=x0t(e.label,r||s);return[l].concat(t0t(o))};dc.parseViewBox=g_e;dc.renderCallByParent=v0t;function y0t(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var b0t=y0t;const w0t=Vi(b0t);function pP(t){"@babel/helpers - typeof";return pP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pP(t)}var _0t=["valueAccessor"],N0t=["data","dataKey","clockWise","id","textBreakAll"];function S0t(t){return C0t(t)||A0t(t)||j0t(t)||E0t()}function E0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j0t(t,e){if(t){if(typeof t=="string")return kH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kH(t,e)}}function A0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C0t(t){if(Array.isArray(t))return kH(t)}function kH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $8(){return $8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$8.apply(this,arguments)}function hle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hle(Object(r),!0).forEach(function(n){T0t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T0t(t,e,r){return e=P0t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P0t(t){var e=k0t(t,"string");return pP(e)=="symbol"?e:e+""}function k0t(t,e){if(pP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(pP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mle(t,e){if(t==null)return{};var r=O0t(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function O0t(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var I0t=function(e){return Array.isArray(e.value)?w0t(e.value):e.value};function Yp(t){var e=t.valueAccessor,r=e===void 0?I0t:e,n=mle(t,_0t),i=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=mle(n,N0t);return!i||!i.length?null:be.createElement(Ni,{className:"recharts-label-list"},i.map(function(d,h){var f=Mn(s)?r(d,h):Ia(d&&d.payload,s),m=Mn(l)?{}:{id:"".concat(l,"-").concat(h)};return be.createElement(dc,$8({},bn(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:dc.parseViewBox(Mn(o)?d:fle(fle({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Yp.displayName="LabelList";function R0t(t,e){return t?t===!0?be.createElement(Yp,{key:"labelList-implicit",data:e}):be.isValidElement(t)||Fn(t)?be.createElement(Yp,{key:"labelList-implicit",data:e,content:t}):s5(t)?be.createElement(Yp,$8({data:e},t,{key:"labelList-implicit"})):null:null}function D0t(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Cd(n,Yp).map(function(o,l){return C.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return i;var s=R0t(t.label,e);return[s].concat(S0t(i))}Yp.renderCallByParent=D0t;function gP(t){"@babel/helpers - typeof";return gP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gP(t)}function OH(){return OH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OH.apply(this,arguments)}function ple(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ple(Object(r),!0).forEach(function(n){M0t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ple(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M0t(t,e,r){return e=L0t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L0t(t){var e=F0t(t,"string");return gP(e)=="symbol"?e:e+""}function F0t(t,e){if(gP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(gP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B0t=function(e,r){var n=wd(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},iD=function(e){var r=e.cx,n=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+i,h=Math.asin(c/d)/B8,f=u?s:s+o*h,m=wa(r,n,d,f),x=wa(r,n,i,f),g=u?s-o*h:s,y=wa(r,n,d*Math.cos(h*B8),g);return{center:m,circleTangency:x,lineTangency:y,theta:h}},x_e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=B0t(o,l),u=o+c,d=wa(r,n,s,o),h=wa(r,n,s,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var m=wa(r,n,i,o),x=wa(r,n,i,u);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},$0t=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=wd(d-u),f=iD({cx:r,cy:n,radius:s,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,x=f.lineTangency,g=f.theta,y=iD({cx:r,cy:n,radius:s,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),w=y.circleTangency,S=y.lineTangency,E=y.theta,j=c?Math.abs(u-d):Math.abs(u-d)-g-E;if(j<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):x_e({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var T="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var O=iD({cx:r,cy:n,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=O.circleTangency,M=O.lineTangency,D=O.theta,z=iD({cx:r,cy:n,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),F=z.circleTangency,q=z.lineTangency,Q=z.theta,re=c?Math.abs(u-d):Math.abs(u-d)-D-Q;if(re<0&&o===0)return"".concat(T,"L").concat(r,",").concat(n,"Z");T+="L".concat(q.x,",").concat(q.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(re>180),",").concat(+(h>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else T+="L".concat(r,",").concat(n,"Z");return T},U0t={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},v_e=function(e){var r=gle(gle({},U0t),e),n=r.cx,i=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,h=r.endAngle,f=r.className;if(o<s||d===h)return null;var m=Gn("recharts-sector",f),x=o-s,g=_d(l,x,0,!0),y;return g>0&&Math.abs(d-h)<360?y=$0t({cx:n,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(g,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):y=x_e({cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:d,endAngle:h}),be.createElement("path",OH({},bn(r,!0),{className:m,d:y,role:"img"}))};function xP(t){"@babel/helpers - typeof";return xP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xP(t)}function IH(){return IH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IH.apply(this,arguments)}function xle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xle(Object(r),!0).forEach(function(n){z0t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z0t(t,e,r){return e=V0t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V0t(t){var e=q0t(t,"string");return xP(e)=="symbol"?e:e+""}function q0t(t,e){if(xP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(xP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yle={curveBasisClosed:ztt,curveBasisOpen:Vtt,curveBasis:Utt,curveBumpX:Att,curveBumpY:Ctt,curveLinearClosed:qtt,curveLinear:I7,curveMonotoneX:Htt,curveMonotoneY:Wtt,curveNatural:Gtt,curveStep:Ktt,curveStepAfter:Ytt,curveStepBefore:Xtt},sD=function(e){return e.x===+e.x&&e.y===+e.y},cT=function(e){return e.x},uT=function(e){return e.y},H0t=function(e,r){if(Fn(e))return e;var n="curve".concat(k7(e));return(n==="curveMonotone"||n==="curveBump")&&r?yle["".concat(n).concat(r==="vertical"?"Y":"X")]:yle[n]||I7},W0t=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=H0t(n,l),h=u?s.filter(function(g){return sD(g)}):s,f;if(Array.isArray(o)){var m=u?o.filter(function(g){return sD(g)}):o,x=h.map(function(g,y){return vle(vle({},g),{},{base:m[y]})});return l==="vertical"?f=XR().y(uT).x1(cT).x0(function(g){return g.base.x}):f=XR().x(cT).y1(uT).y0(function(g){return g.base.y}),f.defined(sD).curve(d),f(x)}return l==="vertical"&&jr(o)?f=XR().y(uT).x1(cT).x0(o):jr(o)?f=XR().x(cT).y1(uT).y0(o):f=hwe().x(cT).y(uT),f.defined(sD).curve(d),f(h)},nb=function(e){var r=e.className,n=e.points,i=e.path,s=e.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?W0t(e):i;return C.createElement("path",IH({},bn(e,!1),d8(e),{className:Gn("recharts-curve",r),d:o,ref:s}))},G0t=Object.getOwnPropertyNames,K0t=Object.getOwnPropertySymbols,X0t=Object.prototype.hasOwnProperty;function ble(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function aD(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var s=i.cache,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);var c=t(r,n,i);return s.delete(r),s.delete(n),c}}function wle(t){return G0t(t).concat(K0t(t))}var Y0t=Object.hasOwn||function(t,e){return X0t.call(t,e)};function xN(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Z0t="__v",Q0t="__o",J0t="_owner",_le=Object.getOwnPropertyDescriptor,Nle=Object.keys;function egt(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function tgt(t,e){return xN(t.getTime(),e.getTime())}function rgt(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function ngt(t,e){return t===e}function Sle(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(i[h]){h++;continue}var f=o.value,m=l.value;if(r.equals(f[0],m[0],c,h,t,e,r)&&r.equals(f[1],m[1],f[0],m[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var igt=xN;function sgt(t,e,r){var n=Nle(t),i=n.length;if(Nle(e).length!==i)return!1;for(;i-- >0;)if(!y_e(t,e,r,n[i]))return!1;return!0}function dT(t,e,r){var n=wle(t),i=n.length;if(wle(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=n[i],!y_e(t,e,r,s)||(o=_le(t,s),l=_le(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function agt(t,e){return xN(t.valueOf(),e.valueOf())}function ogt(t,e){return t.source===e.source&&t.flags===e.flags}function Ele(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function lgt(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function cgt(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function y_e(t,e,r,n){return(n===J0t||n===Q0t||n===Z0t)&&(t.$$typeof||e.$$typeof)?!0:Y0t(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var ugt="[object Arguments]",dgt="[object Boolean]",hgt="[object Date]",fgt="[object Error]",mgt="[object Map]",pgt="[object Number]",ggt="[object Object]",xgt="[object RegExp]",vgt="[object Set]",ygt="[object String]",bgt="[object URL]",wgt=Array.isArray,jle=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ale=Object.assign,_gt=Object.prototype.toString.call.bind(Object.prototype.toString);function Ngt(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(x,g,y){if(x===g)return!0;if(x==null||g==null)return!1;var w=typeof x;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?o(x,g,y):w==="function"?i(x,g,y):!1;var S=x.constructor;if(S!==g.constructor)return!1;if(S===Object)return l(x,g,y);if(wgt(x))return e(x,g,y);if(jle!=null&&jle(x))return h(x,g,y);if(S===Date)return r(x,g,y);if(S===RegExp)return u(x,g,y);if(S===Map)return s(x,g,y);if(S===Set)return d(x,g,y);var E=_gt(x);return E===hgt?r(x,g,y):E===xgt?u(x,g,y):E===mgt?s(x,g,y):E===vgt?d(x,g,y):E===ggt?typeof x.then!="function"&&typeof g.then!="function"&&l(x,g,y):E===bgt?f(x,g,y):E===fgt?n(x,g,y):E===ugt?l(x,g,y):E===dgt||E===pgt||E===ygt?c(x,g,y):!1}}function Sgt(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?dT:egt,areDatesEqual:tgt,areErrorsEqual:rgt,areFunctionsEqual:ngt,areMapsEqual:n?ble(Sle,dT):Sle,areNumbersEqual:igt,areObjectsEqual:n?dT:sgt,arePrimitiveWrappersEqual:agt,areRegExpsEqual:ogt,areSetsEqual:n?ble(Ele,dT):Ele,areTypedArraysEqual:n?dT:lgt,areUrlsEqual:cgt};if(r&&(i=Ale({},i,r(i))),e){var s=aD(i.areArraysEqual),o=aD(i.areMapsEqual),l=aD(i.areObjectsEqual),c=aD(i.areSetsEqual);i=Ale({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function Egt(t){return function(e,r,n,i,s,o,l){return t(e,r,l)}}function jgt(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,s=t.strict;if(n)return function(c,u){var d=n(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return r(c,u,{cache:f,equals:i,meta:m,strict:s})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return r(c,u,o)}}var Agt=Zb();Zb({strict:!0});Zb({circular:!0});Zb({circular:!0,strict:!0});Zb({createInternalComparator:function(){return xN}});Zb({strict:!0,createInternalComparator:function(){return xN}});Zb({circular:!0,createInternalComparator:function(){return xN}});Zb({circular:!0,createInternalComparator:function(){return xN},strict:!0});function Zb(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=Sgt(t),c=Ngt(l),u=n?n(c):Egt(c);return jgt({circular:r,comparator:c,createState:i,equals:u,strict:o})}function Cgt(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Cle(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>e?(t(s),r=-1):Cgt(i)};requestAnimationFrame(n)}function RH(t){"@babel/helpers - typeof";return RH=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RH(t)}function Tgt(t){return Igt(t)||Ogt(t)||kgt(t)||Pgt()}function Pgt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kgt(t,e){if(t){if(typeof t=="string")return Tle(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tle(t,e)}}function Tle(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ogt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Igt(t){if(Array.isArray(t))return t}function Rgt(){var t={},e=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=Tgt(o),c=l[0],u=l.slice(1);if(typeof c=="number"){Cle(i.bind(null,u),c);return}i(c),Cle(i.bind(null,u));return}RH(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function vP(t){"@babel/helpers - typeof";return vP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vP(t)}function Ple(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ple(Object(r),!0).forEach(function(n){b_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ple(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b_e(t,e,r){return e=Dgt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dgt(t){var e=Mgt(t,"string");return vP(e)==="symbol"?e:String(e)}function Mgt(t,e){if(vP(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vP(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lgt=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},Fgt=function(e){return e},Bgt=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},P4=function(e,r){return Object.keys(r).reduce(function(n,i){return kle(kle({},n),{},b_e({},i,e(i,r[i])))},{})},Ole=function(e,r,n){return e.map(function(i){return"".concat(Bgt(i)," ").concat(r,"ms ").concat(n)}).join(",")};function $gt(t,e){return Vgt(t)||zgt(t,e)||w_e(t,e)||Ugt()}function Ugt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zgt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Vgt(t){if(Array.isArray(t))return t}function qgt(t){return Ggt(t)||Wgt(t)||w_e(t)||Hgt()}function Hgt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w_e(t,e){if(t){if(typeof t=="string")return DH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DH(t,e)}}function Wgt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ggt(t){if(Array.isArray(t))return DH(t)}function DH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var U8=1e-4,__e=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},N_e=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},Ile=function(e,r){return function(n){var i=__e(e,r);return N_e(i,n)}},Kgt=function(e,r){return function(n){var i=__e(e,r),s=[].concat(qgt(i.map(function(o,l){return o*l}).slice(1)),[0]);return N_e(s,n)}},Rle=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=$gt(u,4);i=d[0],s=d[1],o=d[2],l=d[3]}}}var h=Ile(i,o),f=Ile(s,l),m=Kgt(i,o),x=function(w){return w>1?1:w<0?0:w},g=function(w){for(var S=w>1?1:w,E=S,j=0;j<8;++j){var T=h(E)-S,O=m(E);if(Math.abs(T-S)<U8||O<U8)return f(E);E=x(E-T/O)}return f(E)};return g.isStepper=!1,g},Xgt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*n,x=f*s,g=f+(m-x)*l/1e3,y=f*l/1e3+d;return Math.abs(y-h)<U8&&Math.abs(g)<U8?[h,0]:[y,g]};return c.isStepper=!0,c.dt=l,c},Ygt=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Rle(i);case"spring":return Xgt();default:if(i.split("(")[0]==="cubic-bezier")return Rle(i)}return typeof i=="function"?i:null};function yP(t){"@babel/helpers - typeof";return yP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yP(t)}function Dle(t){return Jgt(t)||Qgt(t)||S_e(t)||Zgt()}function Zgt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qgt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jgt(t){if(Array.isArray(t))return LH(t)}function Mle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mle(Object(r),!0).forEach(function(n){MH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MH(t,e,r){return e=ext(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ext(t){var e=txt(t,"string");return yP(e)==="symbol"?e:String(e)}function txt(t,e){if(yP(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(yP(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rxt(t,e){return sxt(t)||ixt(t,e)||S_e(t,e)||nxt()}function nxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S_e(t,e){if(t){if(typeof t=="string")return LH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LH(t,e)}}function LH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ixt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function sxt(t){if(Array.isArray(t))return t}var z8=function(e,r,n){return e+(r-e)*n},FH=function(e){var r=e.from,n=e.to;return r!==n},axt=function t(e,r,n){var i=P4(function(s,o){if(FH(o)){var l=e(o.from,o.to,o.velocity),c=rxt(l,2),u=c[0],d=c[1];return $c($c({},o),{},{from:u,velocity:d})}return o},r);return n<1?P4(function(s,o){return FH(o)?$c($c({},o),{},{velocity:z8(o.velocity,i[s].velocity,n),from:z8(o.from,i[s].from,n)}):o},r):t(e,i,n-1)};const oxt=function(t,e,r,n,i){var s=Lgt(t,e),o=s.reduce(function(y,w){return $c($c({},y),{},MH({},w,[t[w],e[w]]))},{}),l=s.reduce(function(y,w){return $c($c({},y),{},MH({},w,{from:t[w],velocity:0,to:e[w]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return P4(function(w,S){return S.from},l)},m=function(){return!Object.values(l).filter(FH).length},x=function(w){u||(u=w);var S=w-u,E=S/r.dt;l=axt(r,l,E),i($c($c($c({},t),e),f())),u=w,m()||(c=requestAnimationFrame(h))},g=function(w){d||(d=w);var S=(w-d)/n,E=P4(function(T,O){return z8.apply(void 0,Dle(O).concat([r(S)]))},o);if(i($c($c($c({},t),e),E)),S<1)c=requestAnimationFrame(h);else{var j=P4(function(T,O){return z8.apply(void 0,Dle(O).concat([r(1)]))},o);i($c($c($c({},t),e),j))}};return h=r.isStepper?x:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function ZA(t){"@babel/helpers - typeof";return ZA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZA(t)}var lxt=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function cxt(t,e){if(t==null)return{};var r=uxt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uxt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function rU(t){return mxt(t)||fxt(t)||hxt(t)||dxt()}function dxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hxt(t,e){if(t){if(typeof t=="string")return BH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BH(t,e)}}function fxt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mxt(t){if(Array.isArray(t))return BH(t)}function BH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lle(Object(r),!0).forEach(function(n){DT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DT(t,e,r){return e=E_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gxt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E_e(n.key),n)}}function xxt(t,e,r){return e&&gxt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E_e(t){var e=vxt(t,"string");return ZA(e)==="symbol"?e:String(e)}function vxt(t,e){if(ZA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ZA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$H(t,e)}function $H(t,e){return $H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$H(t,e)}function bxt(t){var e=wxt();return function(){var n=V8(t),i;if(e){var s=V8(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return UH(this,i)}}function UH(t,e){if(e&&(ZA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zH(t)}function zH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wxt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V8(t){return V8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V8(t)}var Fm=function(t){yxt(r,t);var e=bxt(r);function r(n,i){var s;pxt(this,r),s=e.call(this,n,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(zH(s)),s.changeStyle=s.changeStyle.bind(zH(s)),!l||m<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:d}),UH(s);if(h&&h.length)s.state={style:h[0].style};else if(u){if(typeof f=="function")return s.state={style:u},UH(s);s.state={style:c?DT({},c,u):u}}else s.state={style:{}};return s}return xxt(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,h=s.from,f=this.state.style;if(l){if(!o){var m={style:c?DT({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(Agt(i.to,d)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=x||u?h:i.to;if(this.state&&f){var y={style:c?DT({},c,g):g};(c&&f[c]!==g||!c&&f!==g)&&this.setState(y)}this.runAnimation(rp(rp({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,m=oxt(o,l,Ygt(u),c,this.changeStyle),x=function(){s.stopJSAnimation=m()};this.manager.start([f,d,x,c,h])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(g,y,w){if(w===0)return g;var S=y.duration,E=y.easing,j=E===void 0?"ease":E,T=y.style,O=y.properties,I=y.onAnimationEnd,M=w>0?o[w-1]:y,D=O||Object.keys(T);if(typeof j=="function"||j==="spring")return[].concat(rU(g),[s.runJSAnimation.bind(s,{from:M.style,to:T,duration:S,easing:j}),S]);var z=Ole(D,S,j),F=rp(rp(rp({},M.style),T),{},{transition:z});return[].concat(rU(g),[F,S,I]).filter(Fgt)};return this.manager.start([c].concat(rU(o.reduce(m,[d,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Rgt());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,m=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=l?DT({},l,c):c,y=Ole(Object.keys(g),o,u);x.start([d,s,rp(rp({},g),{},{transition:y}),o,h])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=cxt(i,lxt),u=C.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var h=function(m){var x=m.props,g=x.style,y=g===void 0?{}:g,w=x.className,S=C.cloneElement(m,rp(rp({},c),{},{style:rp(rp({},y),d),className:w}));return S};return u===1?h(C.Children.only(s)):be.createElement("div",null,C.Children.map(s,function(f){return h(f)}))}}]),r}(C.PureComponent);Fm.displayName="Animate";Fm.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Fm.propTypes={from:dr.oneOfType([dr.object,dr.string]),to:dr.oneOfType([dr.object,dr.string]),attributeName:dr.string,duration:dr.number,begin:dr.number,easing:dr.oneOfType([dr.string,dr.func]),steps:dr.arrayOf(dr.shape({duration:dr.number.isRequired,style:dr.object.isRequired,easing:dr.oneOfType([dr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),dr.func]),properties:dr.arrayOf("string"),onAnimationEnd:dr.func})),children:dr.oneOfType([dr.node,dr.func]),isActive:dr.bool,canBegin:dr.bool,onAnimationEnd:dr.func,shouldReAnimate:dr.bool,onAnimationStart:dr.func,onAnimationReStart:dr.func};function bP(t){"@babel/helpers - typeof";return bP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bP(t)}function q8(){return q8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q8.apply(this,arguments)}function _xt(t,e){return jxt(t)||Ext(t,e)||Sxt(t,e)||Nxt()}function Nxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sxt(t,e){if(t){if(typeof t=="string")return Fle(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fle(t,e)}}function Fle(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ext(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function jxt(t){if(Array.isArray(t))return t}function Ble(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ble(Object(r),!0).forEach(function(n){Axt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ble(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Axt(t,e,r){return e=Cxt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cxt(t){var e=Txt(t,"string");return bP(e)=="symbol"?e:e+""}function Txt(t,e){if(bP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(bP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ule=function(e,r,n,i,s){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(o>0&&s instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=s[f]>o?o:s[f];d="M".concat(e,",").concat(r+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(r)),d+="L ".concat(e+n-c*h[1],",").concat(r),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*h[1])),d+="L ".concat(e+n,",").concat(r+i-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+n-c*h[2],",").concat(r+i)),d+="L ".concat(e+c*h[3],",").concat(r+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+i-l*h[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var x=Math.min(o,s);d="M ".concat(e,",").concat(r+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+c*x,",").concat(r,`
            L `).concat(e+n-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*x,`
            L `).concat(e+n,",").concat(r+i-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+n-c*x,",").concat(r+i,`
            L `).concat(e+c*x,",").concat(r+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e,",").concat(r+i-l*x," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},Pxt=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return n>=u&&n<=d&&i>=h&&i<=f}return!1},kxt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yQ=function(e){var r=$le($le({},kxt),e),n=C.useRef(),i=C.useState(-1),s=_xt(i,2),o=s[0],l=s[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,d=r.width,h=r.height,f=r.radius,m=r.className,x=r.animationEasing,g=r.animationDuration,y=r.animationBegin,w=r.isAnimationActive,S=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var E=Gn("recharts-rectangle",m);return S?be.createElement(Fm,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:x,isActive:S},function(j){var T=j.width,O=j.height,I=j.x,M=j.y;return be.createElement(Fm,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:w,easing:x},be.createElement("path",q8({},bn(r,!0),{className:E,d:Ule(I,M,T,O,f),ref:n})))}):be.createElement("path",q8({},bn(r,!0),{className:E,d:Ule(c,u,d,h,f)}))},Oxt=["points","className","baseLinePoints","connectNulls"];function KS(){return KS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KS.apply(this,arguments)}function Ixt(t,e){if(t==null)return{};var r=Rxt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rxt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zle(t){return Fxt(t)||Lxt(t)||Mxt(t)||Dxt()}function Dxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mxt(t,e){if(t){if(typeof t=="string")return VH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VH(t,e)}}function Lxt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fxt(t){if(Array.isArray(t))return VH(t)}function VH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Vle=function(e){return e&&e.x===+e.x&&e.y===+e.y},Bxt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){Vle(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Vle(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},k4=function(e,r){var n=Bxt(e);r&&(n=[n.reduce(function(s,o){return[].concat(zle(s),zle(o))},[])]);var i=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},$xt=function(e,r,n){var i=k4(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(k4(r.reverse(),n).slice(1))},Uxt=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,s=e.connectNulls,o=Ixt(e,Oxt);if(!r||!r.length)return null;var l=Gn("recharts-polygon",n);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=$xt(r,i,s);return be.createElement("g",{className:l},be.createElement("path",KS({},bn(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?be.createElement("path",KS({},bn(o,!0),{fill:"none",d:k4(r,s)})):null,c?be.createElement("path",KS({},bn(o,!0),{fill:"none",d:k4(i,s)})):null)}var d=k4(r,s);return be.createElement("path",KS({},bn(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function qH(){return qH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qH.apply(this,arguments)}var SI=function(e){var r=e.cx,n=e.cy,i=e.r,s=e.className,o=Gn("recharts-dot",s);return r===+r&&n===+n&&i===+i?C.createElement("circle",qH({},bn(e,!1),d8(e),{className:o,cx:r,cy:n,r:i})):null};function wP(t){"@babel/helpers - typeof";return wP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wP(t)}var zxt=["x","y","top","left","width","height","className"];function HH(){return HH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HH.apply(this,arguments)}function qle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vxt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qle(Object(r),!0).forEach(function(n){qxt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qxt(t,e,r){return e=Hxt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hxt(t){var e=Wxt(t,"string");return wP(e)=="symbol"?e:e+""}function Wxt(t,e){if(wP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gxt(t,e){if(t==null)return{};var r=Kxt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kxt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Xxt=function(e,r,n,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},Yxt=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,m=f===void 0?0:f,x=e.className,g=Gxt(e,zxt),y=Vxt({x:n,y:s,top:l,left:u,width:h,height:m},g);return!jr(n)||!jr(s)||!jr(h)||!jr(m)||!jr(l)||!jr(u)?null:be.createElement("path",HH({},bn(y,!0),{className:Gn("recharts-cross",x),d:Xxt(n,s,h,m,l,u)}))},Zxt=H7,Qxt=$2e,Jxt=Ug;function evt(t,e){return t&&t.length?Zxt(t,Jxt(e),Qxt):void 0}var tvt=evt;const rvt=Vi(tvt);var nvt=H7,ivt=Ug,svt=U2e;function avt(t,e){return t&&t.length?nvt(t,ivt(e),svt):void 0}var ovt=avt;const lvt=Vi(ovt);var cvt=["cx","cy","angle","ticks","axisLine"],uvt=["ticks","tick","angle","tickFormatter","stroke"];function QA(t){"@babel/helpers - typeof";return QA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QA(t)}function O4(){return O4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O4.apply(this,arguments)}function Hle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hle(Object(r),!0).forEach(function(n){X7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wle(t,e){if(t==null)return{};var r=dvt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dvt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gle(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A_e(n.key),n)}}function fvt(t,e,r){return e&&Gle(t.prototype,e),r&&Gle(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mvt(t,e,r){return e=H8(e),pvt(t,j_e()?Reflect.construct(e,r||[],H8(t).constructor):e.apply(t,r))}function pvt(t,e){if(e&&(QA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gvt(t)}function gvt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j_e=function(){return!!t})()}function H8(t){return H8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H8(t)}function xvt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WH(t,e)}function WH(t,e){return WH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},WH(t,e)}function X7(t,e,r){return e=A_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A_e(t){var e=vvt(t,"string");return QA(e)=="symbol"?e:e+""}function vvt(t,e){if(QA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(QA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y7=function(t){function e(){return hvt(this,e),mvt(this,e,arguments)}return xvt(e,t),fvt(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return wa(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=rvt(l,function(d){return d.coordinate||0}),u=lvt(l,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=Wle(n,cvt),d=l.reduce(function(x,g){return[Math.min(x[0],g.coordinate),Math.max(x[1],g.coordinate)]},[1/0,-1/0]),h=wa(i,s,d[0],o),f=wa(i,s,d[1],o),m=cw(cw(cw({},bn(u,!1)),{},{fill:"none"},bn(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return be.createElement("line",O4({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=Wle(i,uvt),h=this.getTickTextAnchor(),f=bn(d,!1),m=bn(o,!1),x=s.map(function(g,y){var w=n.getTickValueCoord(g),S=cw(cw(cw(cw({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:y},w),{},{payload:g});return be.createElement(Ni,O4({className:Gn("recharts-polar-radius-axis-tick",p_e(o)),key:"tick-".concat(g.coordinate)},Eb(n.props,g,y)),e.renderTickItem(o,S,c?c(g.value,y):g.value))});return be.createElement(Ni,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,o=n.tick;return!i||!i.length?null:be.createElement(Ni,{className:Gn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),dc.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return be.isValidElement(n)?o=be.cloneElement(n,i):Fn(n)?o=n(i):o=be.createElement(X_,O4({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(C.PureComponent);X7(Y7,"displayName","PolarRadiusAxis");X7(Y7,"axisType","radiusAxis");X7(Y7,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function JA(t){"@babel/helpers - typeof";return JA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JA(t)}function Cw(){return Cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cw.apply(this,arguments)}function Kle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kle(Object(r),!0).forEach(function(n){Z7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xle(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T_e(n.key),n)}}function bvt(t,e,r){return e&&Xle(t.prototype,e),r&&Xle(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wvt(t,e,r){return e=W8(e),_vt(t,C_e()?Reflect.construct(e,r||[],W8(t).constructor):e.apply(t,r))}function _vt(t,e){if(e&&(JA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nvt(t)}function Nvt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C_e=function(){return!!t})()}function W8(t){return W8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W8(t)}function Svt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GH(t,e)}function GH(t,e){return GH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GH(t,e)}function Z7(t,e,r){return e=T_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T_e(t){var e=Evt(t,"string");return JA(e)=="symbol"?e:e+""}function Evt(t,e){if(JA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(JA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jvt=Math.PI/180,Yle=1e-5,Q7=function(t){function e(){return yvt(this,e),wvt(this,e,arguments)}return Svt(e,t),bvt(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,h=wa(s,o,l,n.coordinate),f=wa(s,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*jvt),o;return s>Yle?o=i==="outer"?"start":"end":s<-Yle?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=uw(uw({},bn(this.props,!1)),{},{fill:"none"},bn(l,!1));if(c==="circle")return be.createElement(SI,Cw({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var d=this.props.ticks,h=d.map(function(f){return wa(i,s,o,f.coordinate)});return be.createElement(Uxt,Cw({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=bn(this.props,!1),h=bn(o,!1),f=uw(uw({},d),{},{fill:"none"},bn(l,!1)),m=s.map(function(x,g){var y=n.getTickLineCoord(x),w=n.getTickTextAnchor(x),S=uw(uw(uw({textAnchor:w},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:x,x:y.x2,y:y.y2});return be.createElement(Ni,Cw({className:Gn("recharts-polar-angle-axis-tick",p_e(o)),key:"tick-".concat(x.coordinate)},Eb(n.props,x,g)),l&&be.createElement("line",Cw({className:"recharts-polar-angle-axis-tick-line"},f,y)),o&&e.renderTickItem(o,S,c?c(x.value,g):x.value))});return be.createElement(Ni,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!i||!i.length?null:be.createElement(Ni,{className:Gn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var o;return be.isValidElement(n)?o=be.cloneElement(n,i):Fn(n)?o=n(i):o=be.createElement(X_,Cw({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(C.PureComponent);Z7(Q7,"displayName","PolarAngleAxis");Z7(Q7,"axisType","angleAxis");Z7(Q7,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Avt=Mwe,Cvt=Avt(Object.getPrototypeOf,Object),Tvt=Cvt,Pvt=Uv,kvt=Tvt,Ovt=zv,Ivt="[object Object]",Rvt=Function.prototype,Dvt=Object.prototype,P_e=Rvt.toString,Mvt=Dvt.hasOwnProperty,Lvt=P_e.call(Object);function Fvt(t){if(!Ovt(t)||Pvt(t)!=Ivt)return!1;var e=kvt(t);if(e===null)return!0;var r=Mvt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&P_e.call(r)==Lvt}var Bvt=Fvt;const $vt=Vi(Bvt);var Uvt=Uv,zvt=zv,Vvt="[object Boolean]";function qvt(t){return t===!0||t===!1||zvt(t)&&Uvt(t)==Vvt}var Hvt=qvt;const Wvt=Vi(Hvt);function _P(t){"@babel/helpers - typeof";return _P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_P(t)}function G8(){return G8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G8.apply(this,arguments)}function Gvt(t,e){return Zvt(t)||Yvt(t,e)||Xvt(t,e)||Kvt()}function Kvt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xvt(t,e){if(t){if(typeof t=="string")return Zle(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zle(t,e)}}function Zle(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yvt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Zvt(t){if(Array.isArray(t))return t}function Qle(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qle(Object(r),!0).forEach(function(n){Qvt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qle(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qvt(t,e,r){return e=Jvt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jvt(t){var e=e1t(t,"string");return _P(e)=="symbol"?e:e+""}function e1t(t,e){if(_P(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_P(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ece=function(e,r,n,i,s){var o=n-i,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+s),l+="L ".concat(e+n-o/2-i,",").concat(r+s),l+="L ".concat(e,",").concat(r," Z"),l},t1t={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r1t=function(e){var r=Jle(Jle({},t1t),e),n=C.useRef(),i=C.useState(-1),s=Gvt(i,2),o=s[0],l=s[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&l(E)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,h=r.lowerWidth,f=r.height,m=r.className,x=r.animationEasing,g=r.animationDuration,y=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var S=Gn("recharts-trapezoid",m);return w?be.createElement(Fm,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:g,animationEasing:x,isActive:w},function(E){var j=E.upperWidth,T=E.lowerWidth,O=E.height,I=E.x,M=E.y;return be.createElement(Fm,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:x},be.createElement("path",G8({},bn(r,!0),{className:S,d:ece(I,M,j,T,O),ref:n})))}):be.createElement("g",null,be.createElement("path",G8({},bn(r,!0),{className:S,d:ece(c,u,d,h,f)})))},n1t=["option","shapeType","propTransformer","activeClassName","isActive"];function NP(t){"@babel/helpers - typeof";return NP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NP(t)}function i1t(t,e){if(t==null)return{};var r=s1t(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s1t(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function K8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tce(Object(r),!0).forEach(function(n){a1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a1t(t,e,r){return e=o1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o1t(t){var e=l1t(t,"string");return NP(e)=="symbol"?e:e+""}function l1t(t,e){if(NP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(NP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c1t(t,e){return K8(K8({},e),t)}function u1t(t,e){return t==="symbols"}function rce(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return be.createElement(yQ,r);case"trapezoid":return be.createElement(r1t,r);case"sector":return be.createElement(v_e,r);case"symbols":if(u1t(e))return be.createElement(D7,r);break;default:return null}}function d1t(t){return C.isValidElement(t)?t.props:t}function X8(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?c1t:n,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=i1t(t,n1t),u;if(C.isValidElement(e))u=C.cloneElement(e,K8(K8({},c),d1t(e)));else if(Fn(e))u=e(c);else if($vt(e)&&!Wvt(e)){var d=i(e,c);u=be.createElement(rce,{shapeType:r,elementProps:d})}else{var h=c;u=be.createElement(rce,{shapeType:r,elementProps:h})}return l?be.createElement(Ni,{className:o},u):u}function J7(t,e){return e!=null&&"trapezoids"in t.props}function eB(t,e){return e!=null&&"sectors"in t.props}function SP(t,e){return e!=null&&"points"in t.props}function h1t(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&s}function f1t(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function m1t(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function p1t(t,e){var r;return J7(t,e)?r=h1t:eB(t,e)?r=f1t:SP(t,e)&&(r=m1t),r}function g1t(t,e){var r;return J7(t,e)?r="trapezoids":eB(t,e)?r="sectors":SP(t,e)&&(r="points"),r}function x1t(t,e){if(J7(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(eB(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return SP(t,e)?e.payload:{}}function v1t(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=g1t(r,e),s=x1t(r,e),o=n.filter(function(c,u){var d=jb(s,c),h=r.props[i].filter(function(x){var g=p1t(r,e);return g(x,e)}),f=r.props[i].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var b6;function eC(t){"@babel/helpers - typeof";return eC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eC(t)}function XS(){return XS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XS.apply(this,arguments)}function nce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ga(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nce(Object(r),!0).forEach(function(n){xm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ice(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O_e(n.key),n)}}function b1t(t,e,r){return e&&ice(t.prototype,e),r&&ice(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w1t(t,e,r){return e=Y8(e),_1t(t,k_e()?Reflect.construct(e,r||[],Y8(t).constructor):e.apply(t,r))}function _1t(t,e){if(e&&(eC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N1t(t)}function N1t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k_e=function(){return!!t})()}function Y8(t){return Y8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y8(t)}function S1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KH(t,e)}function KH(t,e){return KH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KH(t,e)}function xm(t,e,r){return e=O_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O_e(t){var e=E1t(t,"string");return eC(e)=="symbol"?e:e+""}function E1t(t,e){if(eC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(eC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h0=function(t){function e(r){var n;return y1t(this,e),n=w1t(this,e,[r]),xm(n,"pieRef",null),xm(n,"sectorRefs",[]),xm(n,"id",Kb("recharts-pie-")),xm(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Fn(i)&&i()}),xm(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Fn(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return S1t(e,t),b1t(e,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=bn(this.props,!1),h=bn(o,!1),f=bn(l,!1),m=o&&o.offsetRadius||20,x=n.map(function(g,y){var w=(g.startAngle+g.endAngle)/2,S=wa(g.cx,g.cy,g.outerRadius+m,w),E=ga(ga(ga(ga({},d),g),{},{stroke:"none"},h),{},{index:y,textAnchor:e.getTextAnchor(S.x,g.cx)},S),j=ga(ga(ga(ga({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:y,points:[wa(g.cx,g.cy,g.outerRadius,w),S]}),T=c;return Mn(c)&&Mn(u)?T="value":Mn(c)&&(T=u),be.createElement(Ni,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},l&&e.renderLabelLineItem(l,j,"line"),e.renderLabelItem(o,E,Ia(g,T)))});return be.createElement(Ni,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var h=i.isActiveIndex(d),f=c&&i.hasActiveIndex()?c:null,m=h?o:f,x=ga(ga({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return be.createElement(Ni,XS({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Eb(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),be.createElement(X8,XS({option:m,isActive:h,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return be.createElement(Fm,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var g=x.t,y=[],w=s&&s[0],S=w.startAngle;return s.forEach(function(E,j){var T=f&&f[j],O=j>0?Tf(E,"paddingAngle",0):0;if(T){var I=go(T.endAngle-T.startAngle,E.endAngle-E.startAngle),M=ga(ga({},E),{},{startAngle:S+O,endAngle:S+I(g)+O});y.push(M),S=M.endAngle}else{var D=E.endAngle,z=E.startAngle,F=go(0,D-z),q=F(g),Q=ga(ga({},E),{},{startAngle:S+O,endAngle:S+q+O});y.push(Q),S=Q.endAngle}}),be.createElement(Ni,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!jb(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,h=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,x=this.state.isAnimationFinished;if(s||!o||!o.length||!jr(u)||!jr(d)||!jr(h)||!jr(f))return null;var g=Gn("recharts-pie",l);return be.createElement(Ni,{tabIndex:this.props.rootTabIndex,className:g,ref:function(w){n.pieRef=w}},this.renderSectors(),c&&this.renderLabels(o),dc.renderCallByParent(this.props,null,!1),(!m||x)&&Yp.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(be.isValidElement(n))return be.cloneElement(n,i);if(Fn(n))return n(i);var o=Gn("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return be.createElement(nb,XS({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,i,s){if(be.isValidElement(n))return be.cloneElement(n,i);var o=s;if(Fn(n)&&(o=n(i),be.isValidElement(o)))return o;var l=Gn("recharts-pie-label-text",typeof n!="boolean"&&!Fn(n)?n.className:"");return be.createElement(X_,XS({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(C.PureComponent);b6=h0;xm(h0,"displayName","Pie");xm(h0,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Tm.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});xm(h0,"parseDeltaAngle",function(t,e){var r=wd(e-t),n=Math.min(Math.abs(e-t),360);return r*n});xm(h0,"getRealPieData",function(t){var e=t.data,r=t.children,n=bn(t,!1),i=Cd(r,mN);return e&&e.length?e.map(function(s,o){return ga(ga(ga({payload:s},n),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return ga(ga({},n),s.props)}):[]});xm(h0,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,i=e.width,s=e.height,o=m_e(i,s),l=n+_d(t.cx,i,i/2),c=r+_d(t.cy,s,s/2),u=_d(t.innerRadius,o,0),d=_d(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});xm(h0,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?ga(ga({},e.type.defaultProps),e.props):e.props,i=b6.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,h=n.valueKey,f=n.tooltipType,m=Math.abs(n.minAngle),x=b6.parseCoordinateOfPie(n,r),g=b6.parseDeltaAngle(o,l),y=Math.abs(g),w=u;Mn(u)&&Mn(h)?(Xp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Mn(u)&&(Xp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=h);var S=i.filter(function(M){return Ia(M,w,0)!==0}).length,E=(y>=360?S:S-1)*c,j=y-S*m-E,T=i.reduce(function(M,D){var z=Ia(D,w,0);return M+(jr(z)?z:0)},0),O;if(T>0){var I;O=i.map(function(M,D){var z=Ia(M,w,0),F=Ia(M,d,D),q=(jr(z)?z:0)/T,Q;D?Q=I.endAngle+wd(g)*c*(z!==0?1:0):Q=o;var re=Q+wd(g)*((z!==0?m:0)+q*j),Z=(Q+re)/2,se=(x.innerRadius+x.outerRadius)/2,K=[{name:F,value:z,payload:M,dataKey:w,type:f}],X=wa(x.cx,x.cy,se,Z);return I=ga(ga(ga({percent:q,cornerRadius:s,name:F,tooltipPayload:K,midAngle:Z,middleRadius:se,tooltipPosition:X},M),x),{},{value:Ia(M,w),startAngle:Q,endAngle:re,payload:M,paddingAngle:wd(g)*c}),I})}return ga(ga({},x),{},{sectors:O,data:i})});var j1t=Math.ceil,A1t=Math.max;function C1t(t,e,r,n){for(var i=-1,s=A1t(j1t((e-t)/(r||1)),0),o=Array(s);s--;)o[n?s:++i]=t,t+=r;return o}var T1t=C1t,P1t=t2e,sce=1/0,k1t=17976931348623157e292;function O1t(t){if(!t)return t===0?t:0;if(t=P1t(t),t===sce||t===-sce){var e=t<0?-1:1;return e*k1t}return t===t?t:0}var I_e=O1t,I1t=T1t,R1t=F7,nU=I_e;function D1t(t){return function(e,r,n){return n&&typeof n!="number"&&R1t(e,r,n)&&(r=n=void 0),e=nU(e),r===void 0?(r=e,e=0):r=nU(r),n=n===void 0?e<r?1:-1:nU(n),I1t(e,r,n,t)}}var M1t=D1t,L1t=M1t,F1t=L1t(),B1t=F1t;const Z8=Vi(B1t);function EP(t){"@babel/helpers - typeof";return EP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(t)}function ace(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ace(Object(r),!0).forEach(function(n){R_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ace(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R_e(t,e,r){return e=$1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $1t(t){var e=U1t(t,"string");return EP(e)=="symbol"?e:e+""}function U1t(t,e){if(EP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(EP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z1t=["Webkit","Moz","O","ms"],V1t=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=z1t.reduce(function(s,o){return oce(oce({},s),{},R_e({},o+n,r))},{});return i[e]=r,i};function tC(t){"@babel/helpers - typeof";return tC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tC(t)}function Q8(){return Q8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q8.apply(this,arguments)}function lce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lce(Object(r),!0).forEach(function(n){Uh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M_e(n.key),n)}}function H1t(t,e,r){return e&&cce(t.prototype,e),r&&cce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function W1t(t,e,r){return e=J8(e),G1t(t,D_e()?Reflect.construct(e,r||[],J8(t).constructor):e.apply(t,r))}function G1t(t,e){if(e&&(tC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K1t(t)}function K1t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D_e=function(){return!!t})()}function J8(t){return J8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J8(t)}function X1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XH(t,e)}function XH(t,e){return XH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},XH(t,e)}function Uh(t,e,r){return e=M_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M_e(t){var e=Y1t(t,"string");return tC(e)=="symbol"?e:e+""}function Y1t(t,e){if(tC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z1t=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=C4().domain(Z8(0,c)).range([s,s+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},uce=function(e){return e.changedTouches&&!!e.changedTouches.length},rC=function(t){function e(r){var n;return q1t(this,e),n=W1t(this,e,[r]),Uh(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Uh(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Uh(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),Uh(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Uh(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Uh(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Uh(n,"handleSlideDragStart",function(i){var s=uce(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return X1t(e,t),H1t(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(i,s),f=Math.max(i,s),m=e.getIndexInRange(o,h),x=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:x===d?d:x-x%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=Ia(s[n],l,n);return Fn(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,x=c.onChange,g=n.pageX-s;g>0?g=Math.min(g,u+d-h-l,u+d-h-o):g<0&&(g=Math.max(g,u-o,u-l));var y=this.getIndex({startX:o+g,endX:l+g});(y.startIndex!==f||y.endIndex!==m)&&x&&x(y),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=uce(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,x=d.onChange,g=d.gap,y=d.data,w={startX:this.state.startX,endX:this.state.endX},S=n.pageX-s;S>0?S=Math.min(S,h+f-m-u):S<0&&(S=Math.max(S,h-u)),w[o]=u+S;var E=this.getIndex(w),j=E.startIndex,T=E.endIndex,O=function(){var M=y.length-1;return o==="startX"&&(l>c?j%g===0:T%g===0)||l<c&&T===M||o==="endX"&&(l>c?T%g===0:j%g===0)||l>c&&T===M};this.setState(Uh(Uh({},o,u+S),"brushMoveStartX",n.pageX),function(){x&&O()&&x(E)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],h=l.indexOf(d);if(h!==-1){var f=h+n;if(!(f===-1||f>=l.length)){var m=l[f];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(Uh({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return be.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,h=C.Children.only(u);return h?be.cloneElement(h,{x:i,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,x=c.data,g=c.startIndex,y=c.endIndex,w=Math.max(n,this.props.x),S=iU(iU({},bn(this.props,!1)),{},{x:w,y:u,width:d,height:h}),E=m||"Min value: ".concat((s=x[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=x[y])===null||o===void 0?void 0:o.name);return be.createElement(Ni,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(T){["ArrowLeft","ArrowRight"].includes(T.key)&&(T.preventDefault(),T.stopPropagation(),l.handleTravellerMoveKeyboard(T.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,S))}},{key:"renderSlide",value:function(n,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(n,i)+u,h=Math.max(Math.abs(i-n)-u,0);return be.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,h=d.startX,f=d.endX,m=5,x={pointerEvents:"none",fill:u};return be.createElement(Ni,{className:"recharts-brush-texts"},be.createElement(X_,Q8({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},x),this.getTextOfTick(i)),be.createElement(X_,Q8({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},x),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,h=n.alwaysShowText,f=this.state,m=f.startX,x=f.endX,g=f.isTextActive,y=f.isSlideMoving,w=f.isTravellerMoving,S=f.isTravellerFocused;if(!i||!i.length||!jr(l)||!jr(c)||!jr(u)||!jr(d)||u<=0||d<=0)return null;var E=Gn("recharts-brush",s),j=be.Children.count(o)===1,T=V1t("userSelect","none");return be.createElement(Ni,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:T},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,x),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(x,"endX"),(g||y||w||S||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return be.createElement(be.Fragment,null,be.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),be.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),be.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return be.isValidElement(n)?s=be.cloneElement(n,i):Fn(n)?s=n(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,h=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return iU({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?Z1t({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>i?l=c:o=c}return i>=n[l]?l:o}}])}(C.PureComponent);Uh(rC,"displayName","Brush");Uh(rC,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Q1t=HZ;function J1t(t,e){var r;return Q1t(t,function(n,i,s){return r=e(n,i,s),!r}),!!r}var eyt=J1t,tyt=Cwe,ryt=Ug,nyt=eyt,iyt=xh,syt=F7;function ayt(t,e,r){var n=iyt(t)?tyt:nyt;return r&&syt(t,e,r)&&(e=void 0),n(t,ryt(e))}var oyt=ayt;const lyt=Vi(oyt);var jg=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},dce=Ywe;function cyt(t,e,r){e=="__proto__"&&dce?dce(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var uyt=cyt,dyt=uyt,hyt=Kwe,fyt=Ug;function myt(t,e){var r={};return e=fyt(e),hyt(t,function(n,i,s){dyt(r,i,e(n,i,s))}),r}var pyt=myt;const gyt=Vi(pyt);function xyt(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var vyt=xyt,yyt=HZ;function byt(t,e){var r=!0;return yyt(t,function(n,i,s){return r=!!e(n,i,s),r}),r}var wyt=byt,_yt=vyt,Nyt=wyt,Syt=Ug,Eyt=xh,jyt=F7;function Ayt(t,e,r){var n=Eyt(t)?_yt:Nyt;return r&&jyt(t,e,r)&&(e=void 0),n(t,Syt(e))}var Cyt=Ayt;const L_e=Vi(Cyt);var Tyt=["x","y"];function jP(t){"@babel/helpers - typeof";return jP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jP(t)}function YH(){return YH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YH.apply(this,arguments)}function hce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hce(Object(r),!0).forEach(function(n){Pyt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pyt(t,e,r){return e=kyt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kyt(t){var e=Oyt(t,"string");return jP(e)=="symbol"?e:e+""}function Oyt(t,e){if(jP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iyt(t,e){if(t==null)return{};var r=Ryt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ryt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Dyt(t,e){var r=t.x,n=t.y,i=Iyt(t,Tyt),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),f=parseInt(h,10);return hT(hT(hT(hT(hT({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function fce(t){return be.createElement(X8,YH({shapeType:"rectangle",propTransformer:Dyt,activeClassName:"recharts-active-bar"},t))}var Myt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var s=jr(n)||det(n);return s?e(n,i):(s||ts(!1),r)}},Lyt=["value","background"],F_e;function nC(t){"@babel/helpers - typeof";return nC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nC(t)}function Fyt(t,e){if(t==null)return{};var r=Byt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Byt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function eL(){return eL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eL.apply(this,arguments)}function mce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mce(Object(r),!0).forEach(function(n){Fy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$_e(n.key),n)}}function Uyt(t,e,r){return e&&pce(t.prototype,e),r&&pce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zyt(t,e,r){return e=tL(e),Vyt(t,B_e()?Reflect.construct(e,r||[],tL(t).constructor):e.apply(t,r))}function Vyt(t,e){if(e&&(nC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qyt(t)}function qyt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B_e=function(){return!!t})()}function tL(t){return tL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tL(t)}function Hyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZH(t,e)}function ZH(t,e){return ZH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ZH(t,e)}function Fy(t,e,r){return e=$_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $_e(t){var e=Wyt(t,"string");return nC(e)=="symbol"?e:e+""}function Wyt(t,e){if(nC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nu=function(t){function e(){var r;$yt(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=zyt(this,e,[].concat(i)),Fy(r,"state",{isAnimationFinished:!1}),Fy(r,"id",Kb("recharts-bar-")),Fy(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Fy(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Hyt(e,t),Uyt(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=bn(this.props,!1);return n&&n.map(function(h,f){var m=f===c,x=m?u:o,g=fl(fl(fl({},d),h),{},{isActive:m,option:x,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return be.createElement(Ni,eL({className:"recharts-bar-rectangle"},Eb(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),be.createElement(fce,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,f=this.state.prevData;return be.createElement(Fm,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,g=s.map(function(y,w){var S=f&&f[w];if(S){var E=go(S.x,y.x),j=go(S.y,y.y),T=go(S.width,y.width),O=go(S.height,y.height);return fl(fl({},y),{},{x:E(x),y:j(x),width:T(x),height:O(x)})}if(o==="horizontal"){var I=go(0,y.height),M=I(x);return fl(fl({},y),{},{y:y.y+y.height-M,height:M})}var D=go(0,y.width),z=D(x);return fl(fl({},y),{},{width:z})});return be.createElement(Ni,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!jb(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=bn(this.props.background,!1);return s.map(function(u,d){u.value;var h=u.background,f=Fyt(u,Lyt);if(!h)return null;var m=fl(fl(fl(fl(fl({},f),{},{fill:"#eee"},h),c),Eb(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return be.createElement(fce,eL({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=Cd(d,g5);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,w){var S=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:S,errorVal:Ia(y,w)}},x={clipPath:n?"url(#clipPath-".concat(i,")"):null};return be.createElement(Ni,x,h.map(function(g){return be.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,h=n.width,f=n.height,m=n.isAnimationActive,x=n.background,g=n.id;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,w=Gn("recharts-bar",o),S=l&&l.allowDataOverflow,E=c&&c.allowDataOverflow,j=S||E,T=Mn(g)?this.id:g;return be.createElement(Ni,{className:w},S||E?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(T)},be.createElement("rect",{x:S?u:u-h/2,y:E?d:d-f/2,width:S?h:h*2,height:E?f:f*2}))):null,be.createElement(Ni,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(T,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,T),(!m||y)&&Yp.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(C.PureComponent);F_e=nu;Fy(nu,"displayName","Bar");Fy(nu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Tm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Fy(nu,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=kpt(n,r);if(!m)return null;var x=e.layout,g=r.type.defaultProps,y=g!==void 0?fl(fl({},g),r.props):r.props,w=y.dataKey,S=y.children,E=y.minPointSize,j=x==="horizontal"?o:s,T=u?j.scale.domain():null,O=Fpt({numericAxis:j}),I=Cd(S,mN),M=h.map(function(D,z){var F,q,Q,re,Z,se;u?F=Opt(u[d+z],T):(F=Ia(D,w),Array.isArray(F)||(F=[O,F]));var K=Myt(E,F_e.defaultProps.minPointSize)(F[1],z);if(x==="horizontal"){var X,Y=[o.scale(F[0]),o.scale(F[1])],oe=Y[0],xe=Y[1];q=ile({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:D,index:z}),Q=(X=xe??oe)!==null&&X!==void 0?X:void 0,re=m.size;var H=oe-xe;if(Z=Number.isNaN(H)?0:H,se={x:q,y:o.y,width:re,height:o.height},Math.abs(K)>0&&Math.abs(Z)<Math.abs(K)){var J=wd(Z||K)*(Math.abs(K)-Math.abs(Z));Q-=J,Z+=J}}else{var ie=[s.scale(F[0]),s.scale(F[1])],ce=ie[0],me=ie[1];if(q=ce,Q=ile({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:D,index:z}),re=me-ce,Z=m.size,se={x:s.x,y:Q,width:s.width,height:Z},Math.abs(K)>0&&Math.abs(re)<Math.abs(K)){var he=wd(re||K)*(Math.abs(K)-Math.abs(re));re+=he}}return fl(fl(fl({},D),{},{x:q,y:Q,width:re,height:Z,value:u?F:F[1],payload:D,background:se},I&&I[z]&&I[z].props),{},{tooltipPayload:[h_e(r,D)],tooltipPosition:{x:q+re/2,y:Q+Z/2}})});return fl({data:M,layout:x},f)});function AP(t){"@babel/helpers - typeof";return AP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AP(t)}function Gyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U_e(n.key),n)}}function Kyt(t,e,r){return e&&gce(t.prototype,e),r&&gce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xce(Object(r),!0).forEach(function(n){tB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tB(t,e,r){return e=U_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U_e(t){var e=Xyt(t,"string");return AP(e)=="symbol"?e:e+""}function Xyt(t,e){if(AP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(AP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bQ=function(e,r,n,i,s){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(r),h={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!uf(u,nu);return d.reduce(function(m,x){var g=r[x],y=g.orientation,w=g.domain,S=g.padding,E=S===void 0?{}:S,j=g.mirror,T=g.reversed,O="".concat(y).concat(j?"Mirror":""),I,M,D,z,F;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var q=w[1]-w[0],Q=1/0,re=g.categoricalDomain.sort(pet);if(re.forEach(function(ie,ce){ce>0&&(Q=Math.min((ie||0)-(re[ce-1]||0),Q))}),Number.isFinite(Q)){var Z=Q/q,se=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(I=Z*se/2),g.padding==="no-gap"){var K=_d(e.barCategoryGap,Z*se),X=Z*se/2;I=X-K-(X-K)/se*K}}}i==="xAxis"?M=[n.left+(E.left||0)+(I||0),n.left+n.width-(E.right||0)-(I||0)]:i==="yAxis"?M=c==="horizontal"?[n.top+n.height-(E.bottom||0),n.top+(E.top||0)]:[n.top+(E.top||0)+(I||0),n.top+n.height-(E.bottom||0)-(I||0)]:M=g.range,T&&(M=[M[1],M[0]]);var Y=l_e(g,s,f),oe=Y.scale,xe=Y.realScaleType;oe.domain(w).range(M),c_e(oe);var H=u_e(oe,Tp(Tp({},g),{},{realScaleType:xe}));i==="xAxis"?(F=y==="top"&&!j||y==="bottom"&&j,D=n.left,z=h[O]-F*g.height):i==="yAxis"&&(F=y==="left"&&!j||y==="right"&&j,D=h[O]-F*g.width,z=n.top);var J=Tp(Tp(Tp({},g),H),{},{realScaleType:xe,x:D,y:z,scale:oe,width:i==="xAxis"?n.width:g.width,height:i==="yAxis"?n.height:g.height});return J.bandSize=F8(J,H),!g.hide&&i==="xAxis"?h[O]+=(F?-1:1)*J.height:g.hide||(h[O]+=(F?-1:1)*J.width),Tp(Tp({},m),{},tB({},x,J))},{})},z_e=function(e,r){var n=e.x,i=e.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(i,o),width:Math.abs(s-n),height:Math.abs(o-i)}},Yyt=function(e){var r=e.x1,n=e.y1,i=e.x2,s=e.y2;return z_e({x:r,y:n},{x:i,y:s})},V_e=function(){function t(e){Gyt(this,t),this.scale=e}return Kyt(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();tB(V_e,"EPS",1e-4);var wQ=function(e){var r=Object.keys(e).reduce(function(n,i){return Tp(Tp({},n),{},tB({},i,V_e.create(e[i])))},{});return Tp(Tp({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return gyt(i,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return L_e(i,function(s,o){return r[o].isInRange(s)})}})};function Zyt(t){return(t%180+180)%180}var Qyt=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Zyt(i),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Jyt=Ug,ebt=yI,tbt=M7;function rbt(t){return function(e,r,n){var i=Object(e);if(!ebt(e)){var s=Jyt(r);e=tbt(e),r=function(l){return s(i[l],l,i)}}var o=t(e,r,n);return o>-1?i[s?e[o]:o]:void 0}}var nbt=rbt,ibt=I_e;function sbt(t){var e=ibt(t),r=e%1;return e===e?r?e-r:e:0}var abt=sbt,obt=zwe,lbt=Ug,cbt=abt,ubt=Math.max;function dbt(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:cbt(r);return i<0&&(i=ubt(n+i,0)),obt(t,lbt(e),i)}var hbt=dbt,fbt=nbt,mbt=hbt,pbt=fbt(mbt),gbt=pbt;const xbt=Vi(gbt);var vbt=mJe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),_Q=C.createContext(void 0),NQ=C.createContext(void 0),q_e=C.createContext(void 0),H_e=C.createContext({}),W_e=C.createContext(void 0),G_e=C.createContext(0),K_e=C.createContext(0),vce=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=vbt(s);return be.createElement(_Q.Provider,{value:n},be.createElement(NQ.Provider,{value:i},be.createElement(H_e.Provider,{value:s},be.createElement(q_e.Provider,{value:d},be.createElement(W_e.Provider,{value:o},be.createElement(G_e.Provider,{value:u},be.createElement(K_e.Provider,{value:c},l)))))))},ybt=function(){return C.useContext(W_e)},X_e=function(e){var r=C.useContext(_Q);r==null&&ts(!1);var n=r[e];return n==null&&ts(!1),n},bbt=function(){var e=C.useContext(_Q);return j1(e)},wbt=function(){var e=C.useContext(NQ),r=xbt(e,function(n){return L_e(n.domain,Number.isFinite)});return r||j1(e)},Y_e=function(e){var r=C.useContext(NQ);r==null&&ts(!1);var n=r[e];return n==null&&ts(!1),n},_bt=function(){var e=C.useContext(q_e);return e},Nbt=function(){return C.useContext(H_e)},SQ=function(){return C.useContext(K_e)},EQ=function(){return C.useContext(G_e)};function iC(t){"@babel/helpers - typeof";return iC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iC(t)}function Sbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ebt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q_e(n.key),n)}}function jbt(t,e,r){return e&&Ebt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Abt(t,e,r){return e=rL(e),Cbt(t,Z_e()?Reflect.construct(e,r||[],rL(t).constructor):e.apply(t,r))}function Cbt(t,e){if(e&&(iC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tbt(t)}function Tbt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z_e=function(){return!!t})()}function rL(t){return rL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rL(t)}function Pbt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QH(t,e)}function QH(t,e){return QH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},QH(t,e)}function yce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yce(Object(r),!0).forEach(function(n){jQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jQ(t,e,r){return e=Q_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q_e(t){var e=kbt(t,"string");return iC(e)=="symbol"?e:e+""}function kbt(t,e){if(iC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(iC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Obt(t,e){return Mbt(t)||Dbt(t,e)||Rbt(t,e)||Ibt()}function Ibt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rbt(t,e){if(t){if(typeof t=="string")return wce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wce(t,e)}}function wce(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dbt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Mbt(t){if(Array.isArray(t))return t}function JH(){return JH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JH.apply(this,arguments)}var Lbt=function(e,r){var n;return be.isValidElement(e)?n=be.cloneElement(e,r):Fn(e)?n=e(r):n=be.createElement("line",JH({},r,{className:"recharts-reference-line-line"})),n},Fbt=function(e,r,n,i,s,o,l,c,u){var d=s.x,h=s.y,f=s.width,m=s.height;if(n){var x=u.y,g=e.y.apply(x,{position:o});if(jg(u,"discard")&&!e.y.isInRange(g))return null;var y=[{x:d+f,y:g},{x:d,y:g}];return c==="left"?y.reverse():y}if(r){var w=u.x,S=e.x.apply(w,{position:o});if(jg(u,"discard")&&!e.x.isInRange(S))return null;var E=[{x:S,y:h+m},{x:S,y:h}];return l==="top"?E.reverse():E}if(i){var j=u.segment,T=j.map(function(O){return e.apply(O,{position:o})});return jg(u,"discard")&&lyt(T,function(O){return!e.isInRange(O)})?null:T}return null};function Bbt(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=ybt(),d=X_e(i),h=Y_e(s),f=_bt();if(!u||!f)return null;Xp(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=wQ({x:d.scale,y:h.scale}),x=Yl(e),g=Yl(r),y=n&&n.length===2,w=Fbt(m,x,g,y,f,t.position,d.orientation,h.orientation,t);if(!w)return null;var S=Obt(w,2),E=S[0],j=E.x,T=E.y,O=S[1],I=O.x,M=O.y,D=jg(t,"hidden")?"url(#".concat(u,")"):void 0,z=bce(bce({clipPath:D},bn(t,!0)),{},{x1:j,y1:T,x2:I,y2:M});return be.createElement(Ni,{className:Gn("recharts-reference-line",l)},Lbt(o,z),dc.renderCallByParent(t,Yyt({x1:j,y1:T,x2:I,y2:M})))}var AQ=function(t){function e(){return Sbt(this,e),Abt(this,e,arguments)}return Pbt(e,t),jbt(e,[{key:"render",value:function(){return be.createElement(Bbt,this.props)}}])}(be.Component);jQ(AQ,"displayName","ReferenceLine");jQ(AQ,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function eW(){return eW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eW.apply(this,arguments)}function sC(t){"@babel/helpers - typeof";return sC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sC(t)}function _ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_ce(Object(r),!0).forEach(function(n){rB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_ce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ubt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eNe(n.key),n)}}function zbt(t,e,r){return e&&Ubt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vbt(t,e,r){return e=nL(e),qbt(t,J_e()?Reflect.construct(e,r||[],nL(t).constructor):e.apply(t,r))}function qbt(t,e){if(e&&(sC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hbt(t)}function Hbt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J_e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J_e=function(){return!!t})()}function nL(t){return nL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nL(t)}function Wbt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tW(t,e)}function tW(t,e){return tW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tW(t,e)}function rB(t,e,r){return e=eNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eNe(t){var e=Gbt(t,"string");return sC(e)=="symbol"?e:e+""}function Gbt(t,e){if(sC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kbt=function(e){var r=e.x,n=e.y,i=e.xAxis,s=e.yAxis,o=wQ({x:i.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return jg(e,"discard")&&!o.isInRange(l)?null:l},nB=function(t){function e(){return $bt(this,e),Vbt(this,e,arguments)}return Wbt(e,t),zbt(e,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Yl(i),d=Yl(s);if(Xp(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=Kbt(this.props);if(!h)return null;var f=h.x,m=h.y,x=this.props,g=x.shape,y=x.className,w=jg(this.props,"hidden")?"url(#".concat(c,")"):void 0,S=Nce(Nce({clipPath:w},bn(this.props,!0)),{},{cx:f,cy:m});return be.createElement(Ni,{className:Gn("recharts-reference-dot",y)},e.renderDot(g,S),dc.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(be.Component);rB(nB,"displayName","ReferenceDot");rB(nB,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});rB(nB,"renderDot",function(t,e){var r;return be.isValidElement(t)?r=be.cloneElement(t,e):Fn(t)?r=t(e):r=be.createElement(SI,eW({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function rW(){return rW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rW.apply(this,arguments)}function aC(t){"@babel/helpers - typeof";return aC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aC(t)}function Sce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ece(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sce(Object(r),!0).forEach(function(n){iB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ybt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rNe(n.key),n)}}function Zbt(t,e,r){return e&&Ybt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qbt(t,e,r){return e=iL(e),Jbt(t,tNe()?Reflect.construct(e,r||[],iL(t).constructor):e.apply(t,r))}function Jbt(t,e){if(e&&(aC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ewt(t)}function ewt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tNe=function(){return!!t})()}function iL(t){return iL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iL(t)}function twt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nW(t,e)}function nW(t,e){return nW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nW(t,e)}function iB(t,e,r){return e=rNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rNe(t){var e=rwt(t,"string");return aC(e)=="symbol"?e:e+""}function rwt(t,e){if(aC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(aC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nwt=function(e,r,n,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,h=s.yAxis;if(!d||!h)return null;var f=wQ({x:d.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},x={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return jg(s,"discard")&&(!f.isInRange(m)||!f.isInRange(x))?null:z_e(m,x)},sB=function(t){function e(){return Xbt(this,e),Qbt(this,e,arguments)}return twt(e,t),Zbt(e,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Xp(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Yl(i),f=Yl(s),m=Yl(o),x=Yl(l),g=this.props.shape;if(!h&&!f&&!m&&!x&&!g)return null;var y=nwt(h,f,m,x,this.props);if(!y&&!g)return null;var w=jg(this.props,"hidden")?"url(#".concat(d,")"):void 0;return be.createElement(Ni,{className:Gn("recharts-reference-area",c)},e.renderRect(g,Ece(Ece({clipPath:w},bn(this.props,!0)),y)),dc.renderCallByParent(this.props,y))}}])}(be.Component);iB(sB,"displayName","ReferenceArea");iB(sB,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});iB(sB,"renderRect",function(t,e){var r;return be.isValidElement(t)?r=be.cloneElement(t,e):Fn(t)?r=t(e):r=be.createElement(yQ,rW({},e,{className:"recharts-reference-area-rect"})),r});function nNe(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function iwt(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Qyt(n,r)}function swt(t,e,r){var n=r==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:n?i:s,end:n?i+o:s+l}:{start:n?i+o:s+l,end:n?i:s}}function sL(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-i)<=0}function awt(t,e){return nNe(t,e+1)}function owt(t,e,r,n,i){for(var s=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var x=n==null?void 0:n[c];if(x===void 0)return{v:nNe(n,u)};var g=c,y,w=function(){return y===void 0&&(y=r(x,g)),y},S=x.coordinate,E=c===0||sL(t,S,w,d,l);E||(c=0,d=o,u+=1),E&&(d=S+t*(w()/2+i),c+=u)},f;u<=s.length;)if(f=h(),f)return f.v;return[]}function CP(t){"@babel/helpers - typeof";return CP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CP(t)}function jce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ou(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jce(Object(r),!0).forEach(function(n){lwt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lwt(t,e,r){return e=cwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cwt(t){var e=uwt(t,"string");return CP(e)=="symbol"?e:e+""}function uwt(t,e){if(CP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(CP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dwt(t,e,r,n,i){for(var s=(n||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(f){var m=s[f],x,g=function(){return x===void 0&&(x=r(m,f)),x};if(f===o-1){var y=t*(m.coordinate+t*g()/2-c);s[f]=m=Ou(Ou({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else s[f]=m=Ou(Ou({},m),{},{tickCoord:m.coordinate});var w=sL(t,m.tickCoord,g,l,c);w&&(c=m.tickCoord-t*(g()/2+i),s[f]=Ou(Ou({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function hwt(t,e,r,n,i,s){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var d=n[l-1],h=r(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=Ou(Ou({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=sL(t,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-t*(h/2+i),o[l-1]=Ou(Ou({},d),{},{isShow:!0}))}for(var x=s?l-1:l,g=function(S){var E=o[S],j,T=function(){return j===void 0&&(j=r(E,S)),j};if(S===0){var O=t*(E.coordinate-t*T()/2-c);o[S]=E=Ou(Ou({},E),{},{tickCoord:O<0?E.coordinate-O*t:E.coordinate})}else o[S]=E=Ou(Ou({},E),{},{tickCoord:E.coordinate});var I=sL(t,E.tickCoord,T,c,u);I&&(c=E.tickCoord+t*(T()/2+i),o[S]=Ou(Ou({},E),{},{isShow:!0}))},y=0;y<x;y++)g(y);return o}function CQ(t,e,r){var n=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!i||!i.length||!n)return[];if(jr(c)||Tm.isSsr)return awt(i,typeof c=="number"&&jr(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",x=d&&m==="width"?A4(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=function(E,j){var T=Fn(u)?u(E.value,j):E.value;return m==="width"?iwt(A4(T,{fontSize:e,letterSpacing:r}),x,h):A4(T,{fontSize:e,letterSpacing:r})[m]},y=i.length>=2?wd(i[1].coordinate-i[0].coordinate):1,w=swt(s,y,m);return c==="equidistantPreserveStart"?owt(y,w,g,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=hwt(y,w,g,i,o,c==="preserveStartEnd"):f=dwt(y,w,g,i,o),f.filter(function(S){return S.isShow}))}var fwt=["viewBox"],mwt=["viewBox"],pwt=["ticks"];function oC(t){"@babel/helpers - typeof";return oC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oC(t)}function YS(){return YS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YS.apply(this,arguments)}function Ace(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ace(Object(r),!0).forEach(function(n){TQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ace(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sU(t,e){if(t==null)return{};var r=gwt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gwt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xwt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sNe(n.key),n)}}function vwt(t,e,r){return e&&Cce(t.prototype,e),r&&Cce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ywt(t,e,r){return e=aL(e),bwt(t,iNe()?Reflect.construct(e,r||[],aL(t).constructor):e.apply(t,r))}function bwt(t,e){if(e&&(oC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wwt(t)}function wwt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iNe=function(){return!!t})()}function aL(t){return aL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aL(t)}function _wt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iW(t,e)}function iW(t,e){return iW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},iW(t,e)}function TQ(t,e,r){return e=sNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sNe(t){var e=Nwt(t,"string");return oC(e)=="symbol"?e:e+""}function Nwt(t,e){if(oC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x5=function(t){function e(r){var n;return xwt(this,e),n=ywt(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return _wt(e,t),vwt(e,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,o=sU(n,fwt),l=this.props,c=l.viewBox,u=sU(l,mwt);return!yE(s,c)||!yE(o,u)||!yE(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,f=i.tickMargin,m,x,g,y,w,S,E=h?-1:1,j=n.tickSize||d,T=jr(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=x=n.coordinate,y=o+ +!h*c,g=y-E*j,S=g-E*f,w=T;break;case"left":g=y=n.coordinate,x=s+ +!h*l,m=x-E*j,w=m-E*f,S=T;break;case"right":g=y=n.coordinate,x=s+ +h*l,m=x+E*j,w=m+E*f,S=T;break;default:m=x=n.coordinate,y=o+ +h*c,g=y+E*j,S=g+E*f,w=T;break}return{line:{x1:m,y1:g,x2:x,y2:y},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,h=Rl(Rl(Rl({},bn(this.props,!1)),bn(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Rl(Rl({},h),{},{x1:i,y1:s+f*l,x2:i+o,y2:s+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Rl(Rl({},h),{},{x1:i+m*o,y1:s,x2:i+m*o,y2:s+l})}return be.createElement("line",YS({},h,{className:Gn("recharts-cartesian-axis-line",Tf(d,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=CQ(Rl(Rl({},this.props),{},{ticks:n}),i,s),x=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=bn(this.props,!1),w=bn(d,!1),S=Rl(Rl({},y),{},{fill:"none"},bn(c,!1)),E=m.map(function(j,T){var O=o.getTickLineCoord(j),I=O.line,M=O.tick,D=Rl(Rl(Rl(Rl({textAnchor:x,verticalAnchor:g},y),{},{stroke:"none",fill:u},w),M),{},{index:T,payload:j,visibleTicksCount:m.length,tickFormatter:h});return be.createElement(Ni,YS({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},Eb(o.props,j,T)),c&&be.createElement("line",YS({},S,I,{className:Gn("recharts-cartesian-axis-tick-line",Tf(c,"className"))})),d&&e.renderTickItem(d,D,"".concat(Fn(h)?h(j.value,T):j.value).concat(f||"")))});return be.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,f=h.ticks,m=sU(h,pwt),x=f;return Fn(c)&&(x=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!x||!x.length?null:be.createElement(Ni,{className:Gn("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},s&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),dc.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var o,l=Gn(i.className,"recharts-cartesian-axis-tick-value");return be.isValidElement(n)?o=be.cloneElement(n,Rl(Rl({},i),{},{className:l})):Fn(n)?o=n(Rl(Rl({},i),{},{className:l})):o=be.createElement(X_,YS({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(C.Component);TQ(x5,"displayName","CartesianAxis");TQ(x5,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Swt=["x1","y1","x2","y2","key"],Ewt=["offset"];function Z_(t){"@babel/helpers - typeof";return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z_(t)}function Tce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tce(Object(r),!0).forEach(function(n){jwt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jwt(t,e,r){return e=Awt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Awt(t){var e=Cwt(t,"string");return Z_(e)=="symbol"?e:e+""}function Cwt(t,e){if(Z_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Z_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qw.apply(this,arguments)}function Pce(t,e){if(t==null)return{};var r=Twt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Twt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Pwt=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return be.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function aNe(t,e){var r;if(be.isValidElement(t))r=be.cloneElement(t,e);else if(Fn(t))r=t(e);else{var n=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=Pce(e,Swt),u=bn(c,!1);u.offset;var d=Pce(u,Ewt);r=be.createElement("line",qw({},d,{x1:n,y1:i,x2:s,y2:o,fill:"none",key:l}))}return r}function kwt(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=Fu(Fu({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return aNe(i,u)});return be.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Owt(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=Fu(Fu({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return aNe(i,u)});return be.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Iwt(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var x=!d[m+1],g=x?i+o-f:d[m+1]-f;if(g<=0)return null;var y=m%e.length;return be.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:g,width:s,stroke:"none",fill:e[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Rwt(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var x=!d[m+1],g=x?s+l-f:d[m+1]-f;if(g<=0)return null;var y=m%n.length;return be.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:g,height:c,stroke:"none",fill:n[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Dwt=function(e,r){var n=e.xAxis,i=e.width,s=e.height,o=e.offset;return o_e(CQ(Fu(Fu(Fu({},x5.defaultProps),n),{},{ticks:av(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,r)},Mwt=function(e,r){var n=e.yAxis,i=e.width,s=e.height,o=e.offset;return o_e(CQ(Fu(Fu(Fu({},x5.defaultProps),n),{},{ticks:av(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,r)},JN={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function bf(t){var e,r,n,i,s,o,l=SQ(),c=EQ(),u=Nbt(),d=Fu(Fu({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:JN.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:JN.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:JN.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:JN.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:JN.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:JN.verticalFill,x:jr(t.x)?t.x:u.left,y:jr(t.y)?t.y:u.top,width:jr(t.width)?t.width:u.width,height:jr(t.height)?t.height:u.height}),h=d.x,f=d.y,m=d.width,x=d.height,g=d.syncWithTicks,y=d.horizontalValues,w=d.verticalValues,S=bbt(),E=wbt();if(!jr(m)||m<=0||!jr(x)||x<=0||!jr(h)||h!==+h||!jr(f)||f!==+f)return null;var j=d.verticalCoordinatesGenerator||Dwt,T=d.horizontalCoordinatesGenerator||Mwt,O=d.horizontalPoints,I=d.verticalPoints;if((!O||!O.length)&&Fn(T)){var M=y&&y.length,D=T({yAxis:E?Fu(Fu({},E),{},{ticks:M?y:E.ticks}):void 0,width:l,height:c,offset:u},M?!0:g);Xp(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Z_(D),"]")),Array.isArray(D)&&(O=D)}if((!I||!I.length)&&Fn(j)){var z=w&&w.length,F=j({xAxis:S?Fu(Fu({},S),{},{ticks:z?w:S.ticks}):void 0,width:l,height:c,offset:u},z?!0:g);Xp(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Z_(F),"]")),Array.isArray(F)&&(I=F)}return be.createElement("g",{className:"recharts-cartesian-grid"},be.createElement(Pwt,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),be.createElement(kwt,qw({},d,{offset:u,horizontalPoints:O,xAxis:S,yAxis:E})),be.createElement(Owt,qw({},d,{offset:u,verticalPoints:I,xAxis:S,yAxis:E})),be.createElement(Iwt,qw({},d,{horizontalPoints:O})),be.createElement(Rwt,qw({},d,{verticalPoints:I})))}bf.displayName="CartesianGrid";var Lwt=["type","layout","connectNulls","ref"],Fwt=["key"];function lC(t){"@babel/helpers - typeof";return lC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lC(t)}function kce(t,e){if(t==null)return{};var r=Bwt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bwt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function I4(){return I4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I4.apply(this,arguments)}function Oce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oce(Object(r),!0).forEach(function(n){Pp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eS(t){return Vwt(t)||zwt(t)||Uwt(t)||$wt()}function $wt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uwt(t,e){if(t){if(typeof t=="string")return sW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sW(t,e)}}function zwt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vwt(t){if(Array.isArray(t))return sW(t)}function sW(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qwt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ice(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lNe(n.key),n)}}function Hwt(t,e,r){return e&&Ice(t.prototype,e),r&&Ice(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wwt(t,e,r){return e=oL(e),Gwt(t,oNe()?Reflect.construct(e,r||[],oL(t).constructor):e.apply(t,r))}function Gwt(t,e){if(e&&(lC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kwt(t)}function Kwt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oNe=function(){return!!t})()}function oL(t){return oL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oL(t)}function Xwt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aW(t,e)}function aW(t,e){return aW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},aW(t,e)}function Pp(t,e,r){return e=lNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lNe(t){var e=Ywt(t,"string");return lC(e)=="symbol"?e:e+""}function Ywt(t,e){if(lC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sd=function(t){function e(){var r;qwt(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Wwt(this,e,[].concat(i)),Pp(r,"state",{isAnimationFinished:!0,totalLength:0}),Pp(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Pp(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(w,S){return w+S});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,f=l-o,m=[],x=0,g=0;x<c.length;g+=c[x],++x)if(g+c[x]>h){m=[].concat(eS(c.slice(0,x)),[h-g]);break}var y=m.length%2===0?[0,f]:[f];return[].concat(eS(e.repeat(c,d)),eS(m),y).map(function(w){return"".concat(w,"px")}).join(", ")}),Pp(r,"id",Kb("recharts-line-")),Pp(r,"pathRef",function(o){r.mainCurve=o}),Pp(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Pp(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Xwt(e,t),Hwt(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=Cd(d,g5);if(!h)return null;var f=function(g,y){return{x:g.x,y:g.y,value:g.value,errorVal:Ia(g.payload,y)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return be.createElement(Ni,m,h.map(function(x){return be.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(n,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=bn(this.props,!1),f=bn(c,!0),m=u.map(function(g,y){var w=Fh(Fh(Fh({key:"dot-".concat(y),r:3},h),f),{},{index:y,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return e.renderDotItem(c,w)}),x={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return be.createElement(Ni,I4({className:"recharts-line-dots",key:"dots"},x),m)}},{key:"renderCurveStatically",value:function(n,i,s,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=kce(l,Lwt),f=Fh(Fh(Fh({},bn(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return be.createElement(nb,I4({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,x=o.animateNewValues,g=o.width,y=o.height,w=this.state,S=w.prevPoints,E=w.totalLength;return be.createElement(Fm,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var T=j.t;if(S){var O=S.length/l.length,I=l.map(function(q,Q){var re=Math.floor(Q*O);if(S[re]){var Z=S[re],se=go(Z.x,q.x),K=go(Z.y,q.y);return Fh(Fh({},q),{},{x:se(T),y:K(T)})}if(x){var X=go(g*2,q.x),Y=go(y/2,q.y);return Fh(Fh({},q),{},{x:X(T),y:Y(T)})}return Fh(Fh({},q),{},{x:q.x,y:q.y})});return s.renderCurveStatically(I,n,i)}var M=go(0,E),D=M(T),z;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(q){return parseFloat(q)});z=s.getStrokeDasharray(D,E,F)}else z=s.generateSimpleStrokeDasharray(E,D);return s.renderCurveStatically(l,n,i,{strokeDasharray:z})})}},{key:"renderCurve",value:function(n,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!jb(u,o))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(o,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,h=i.top,f=i.left,m=i.width,x=i.height,g=i.isAnimationActive,y=i.id;if(s||!l||!l.length)return null;var w=this.state.isAnimationFinished,S=l.length===1,E=Gn("recharts-line",c),j=u&&u.allowDataOverflow,T=d&&d.allowDataOverflow,O=j||T,I=Mn(y)?this.id:y,M=(n=bn(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},D=M.r,z=D===void 0?3:D,F=M.strokeWidth,q=F===void 0?2:F,Q=Jbe(o)?o:{},re=Q.clipDot,Z=re===void 0?!0:re,se=z*2+q;return be.createElement(Ni,{className:E},j||T?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(I)},be.createElement("rect",{x:j?f:f-m/2,y:T?h:h-x/2,width:j?m:m*2,height:T?x:x*2})),!Z&&be.createElement("clipPath",{id:"clipPath-dots-".concat(I)},be.createElement("rect",{x:f-se/2,y:h-se/2,width:m+se,height:x+se}))):null,!S&&this.renderCurve(O,I),this.renderErrorBar(O,I),(S||o)&&this.renderDots(O,Z,I),(!g||w)&&Yp.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var s=n.length%2!==0?[].concat(eS(n),[0]):n,o=[],l=0;l<i;++l)o=[].concat(eS(o),eS(s));return o}},{key:"renderDotItem",value:function(n,i){var s;if(be.isValidElement(n))s=be.cloneElement(n,i);else if(Fn(n))s=n(i);else{var o=i.key,l=kce(i,Fwt),c=Gn("recharts-line-dot",typeof n!="boolean"?n.className:"");s=be.createElement(SI,I4({key:o},l,{className:c}))}return s}}])}(C.PureComponent);Pp(Sd,"displayName","Line");Pp(Sd,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Tm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Pp(Sd,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,h=c.map(function(f,m){var x=Ia(f,o);return d==="horizontal"?{x:YA({axis:r,ticks:i,bandSize:l,entry:f,index:m}),y:Mn(x)?null:n.scale(x),value:x,payload:f}:{x:Mn(x)?null:r.scale(x),y:YA({axis:n,ticks:s,bandSize:l,entry:f,index:m}),value:x,payload:f}});return Fh({points:h,layout:d},u)});var Zwt=["layout","type","stroke","connectNulls","isRange","ref"],Qwt=["key"],cNe;function cC(t){"@babel/helpers - typeof";return cC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cC(t)}function uNe(t,e){if(t==null)return{};var r=Jwt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jwt(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hw.apply(this,arguments)}function Rce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rce(Object(r),!0).forEach(function(n){xg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hNe(n.key),n)}}function t2t(t,e,r){return e&&Dce(t.prototype,e),r&&Dce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r2t(t,e,r){return e=lL(e),n2t(t,dNe()?Reflect.construct(e,r||[],lL(t).constructor):e.apply(t,r))}function n2t(t,e){if(e&&(cC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i2t(t)}function i2t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dNe=function(){return!!t})()}function lL(t){return lL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lL(t)}function s2t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oW(t,e)}function oW(t,e){return oW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oW(t,e)}function xg(t,e,r){return e=hNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hNe(t){var e=a2t(t,"string");return cC(e)=="symbol"?e:e+""}function a2t(t,e){if(cC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(cC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vN=function(t){function e(){var r;e2t(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=r2t(this,e,[].concat(i)),xg(r,"state",{isAnimationFinished:!0}),xg(r,"id",Kb("recharts-area-")),xg(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Fn(o)&&o()}),xg(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Fn(o)&&o()}),r}return s2t(e,t),t2t(e,[{key:"renderDots",value:function(n,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=bn(this.props,!1),m=bn(u,!0),x=d.map(function(y,w){var S=m1(m1(m1({key:"dot-".concat(w),r:3},f),m),{},{index:w,cx:y.x,cy:y.y,dataKey:h,value:y.value,payload:y.payload,points:d});return e.renderDotItem(u,S)}),g={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return be.createElement(Ni,Hw({className:"recharts-area-dots"},g),x)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),h=Ly(o.map(function(f){return f.y||0}));return jr(s)&&typeof s=="number"?h=Math.max(s,h):s&&Array.isArray(s)&&s.length&&(h=Math.max(Ly(s.map(function(f){return f.y||0})),h)),jr(h)?be.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),h=Ly(o.map(function(f){return f.x||0}));return jr(s)&&typeof s=="number"?h=Math.max(s,h):s&&Array.isArray(s)&&s.length&&(h=Math.max(Ly(s.map(function(f){return f.x||0})),h)),jr(h)?be.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,s,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=uNe(l,Zwt);return be.createElement(Ni,{clipPath:s?"url(#clipPath-".concat(o,")"):null},be.createElement(nb,Hw({},bn(m,!0),{points:n,connectNulls:h,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&be.createElement(nb,Hw({},bn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:n})),d!=="none"&&f&&be.createElement(nb,Hw({},bn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,x=this.state,g=x.prevPoints,y=x.prevBaseLine;return be.createElement(Fm,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var S=w.t;if(g){var E=g.length/l.length,j=l.map(function(M,D){var z=Math.floor(D*E);if(g[z]){var F=g[z],q=go(F.x,M.x),Q=go(F.y,M.y);return m1(m1({},M),{},{x:q(S),y:Q(S)})}return M}),T;if(jr(c)&&typeof c=="number"){var O=go(y,c);T=O(S)}else if(Mn(c)||c5(c)){var I=go(y,0);T=I(S)}else T=c.map(function(M,D){var z=Math.floor(D*E);if(y[z]){var F=y[z],q=go(F.x,M.x),Q=go(F.y,M.y);return m1(m1({},M),{},{x:q(S),y:Q(S)})}return M});return s.renderAreaStatically(j,T,n,i)}return be.createElement(Ni,null,be.createElement("defs",null,be.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(S))),be.createElement(Ni,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,n,i)))})}},{key:"renderArea",value:function(n,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!jb(d,o)||!jb(h,l))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(o,l,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,h=i.xAxis,f=i.yAxis,m=i.width,x=i.height,g=i.isAnimationActive,y=i.id;if(s||!l||!l.length)return null;var w=this.state.isAnimationFinished,S=l.length===1,E=Gn("recharts-area",c),j=h&&h.allowDataOverflow,T=f&&f.allowDataOverflow,O=j||T,I=Mn(y)?this.id:y,M=(n=bn(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},D=M.r,z=D===void 0?3:D,F=M.strokeWidth,q=F===void 0?2:F,Q=Jbe(o)?o:{},re=Q.clipDot,Z=re===void 0?!0:re,se=z*2+q;return be.createElement(Ni,{className:E},j||T?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(I)},be.createElement("rect",{x:j?d:d-m/2,y:T?u:u-x/2,width:j?m:m*2,height:T?x:x*2})),!Z&&be.createElement("clipPath",{id:"clipPath-dots-".concat(I)},be.createElement("rect",{x:d-se/2,y:u-se/2,width:m+se,height:x+se}))):null,S?null:this.renderArea(O,I),(o||S)&&this.renderDots(O,Z,I),(!g||w)&&Yp.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(C.PureComponent);cNe=vN;xg(vN,"displayName","Area");xg(vN,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Tm.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});xg(vN,"getBaseValue",function(t,e,r,n){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(jr(l)&&typeof l=="number")return l;var c=i==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});xg(vN,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,x=u&&u.length,g=cNe.getBaseValue(e,r,n,i),y=m==="horizontal",w=!1,S=h.map(function(j,T){var O;x?O=u[d+T]:(O=Ia(j,c),Array.isArray(O)?w=!0:O=[g,O]);var I=O[1]==null||x&&Ia(j,c)==null;return y?{x:YA({axis:n,ticks:s,bandSize:l,entry:j,index:T}),y:I?null:i.scale(O[1]),value:O,payload:j}:{x:I?null:n.scale(O[1]),y:YA({axis:i,ticks:o,bandSize:l,entry:j,index:T}),value:O,payload:j}}),E;return x||w?E=S.map(function(j){var T=Array.isArray(j.value)?j.value[0]:null;return y?{x:j.x,y:T!=null&&j.y!=null?i.scale(T):null}:{x:T!=null?n.scale(T):null,y:j.y}}):E=y?i.scale(g):n.scale(g),m1({points:S,baseLine:E,layout:m,isRange:w},f)});xg(vN,"renderDotItem",function(t,e){var r;if(be.isValidElement(t))r=be.cloneElement(t,e);else if(Fn(t))r=t(e);else{var n=Gn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=uNe(e,Qwt);r=be.createElement(SI,Hw({},s,{key:i,className:n}))}return r});function uC(t){"@babel/helpers - typeof";return uC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uC(t)}function o2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l2t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pNe(n.key),n)}}function c2t(t,e,r){return e&&l2t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u2t(t,e,r){return e=cL(e),d2t(t,fNe()?Reflect.construct(e,r||[],cL(t).constructor):e.apply(t,r))}function d2t(t,e){if(e&&(uC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h2t(t)}function h2t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fNe=function(){return!!t})()}function cL(t){return cL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cL(t)}function f2t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lW(t,e)}function lW(t,e){return lW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lW(t,e)}function mNe(t,e,r){return e=pNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pNe(t){var e=m2t(t,"string");return uC(e)=="symbol"?e:e+""}function m2t(t,e){if(uC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(uC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aB=function(t){function e(){return o2t(this,e),u2t(this,e,arguments)}return f2t(e,t),c2t(e,[{key:"render",value:function(){return null}}])}(C.Component);mNe(aB,"displayName","ZAxis");mNe(aB,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var p2t=["option","isActive"];function R4(){return R4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R4.apply(this,arguments)}function g2t(t,e){if(t==null)return{};var r=x2t(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x2t(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function v2t(t){var e=t.option,r=t.isActive,n=g2t(t,p2t);return typeof e=="string"?C.createElement(X8,R4({option:C.createElement(D7,R4({type:e},n)),isActive:r,shapeType:"symbols"},n)):C.createElement(X8,R4({option:e,isActive:r,shapeType:"symbols"},n))}function dC(t){"@babel/helpers - typeof";return dC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dC(t)}function D4(){return D4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D4.apply(this,arguments)}function Mce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mce(Object(r),!0).forEach(function(n){By(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xNe(n.key),n)}}function b2t(t,e,r){return e&&Lce(t.prototype,e),r&&Lce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w2t(t,e,r){return e=uL(e),_2t(t,gNe()?Reflect.construct(e,r||[],uL(t).constructor):e.apply(t,r))}function _2t(t,e){if(e&&(dC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N2t(t)}function N2t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gNe=function(){return!!t})()}function uL(t){return uL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uL(t)}function S2t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cW(t,e)}function cW(t,e){return cW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cW(t,e)}function By(t,e,r){return e=xNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xNe(t){var e=E2t(t,"string");return dC(e)=="symbol"?e:e+""}function E2t(t,e){if(dC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(dC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oB=function(t){function e(){var r;y2t(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=w2t(this,e,[].concat(i)),By(r,"state",{isAnimationFinished:!1}),By(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),By(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),By(r,"id",Kb("recharts-scatter-")),r}return S2t(e,t),b2t(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,s=this.props,o=s.shape,l=s.activeShape,c=s.activeIndex,u=bn(this.props,!1);return n.map(function(d,h){var f=c===h,m=f?l:o,x=Qf(Qf({},u),d);return be.createElement(Ni,D4({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(h)},Eb(i.props,d,h),{role:"img"}),be.createElement(v2t,D4({option:m,isActive:f,key:"symbol-".concat(h)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,s=i.points,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state.prevPoints;return be.createElement(Fm,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var m=f.t,x=s.map(function(g,y){var w=h&&h[y];if(w){var S=go(w.cx,g.cx),E=go(w.cy,g.cy),j=go(w.size,g.size);return Qf(Qf({},g),{},{cx:S(m),cy:E(m),size:j(m)})}var T=go(0,g.size);return Qf(Qf({},g),{},{size:T(m)})});return be.createElement(Ni,null,n.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,s=n.isAnimationActive,o=this.state.prevPoints;return s&&i&&i.length&&(!o||!jb(o,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,o=i.xAxis,l=i.yAxis,c=i.children,u=Cd(c,g5);return u?u.map(function(d,h){var f=d.props,m=f.direction,x=f.dataKey;return be.cloneElement(d,{key:"".concat(m,"-").concat(x,"-").concat(s[h]),data:s,xAxis:o,yAxis:l,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(y,w){return{x:y.cx,y:y.cy,value:m==="x"?+y.node.x:+y.node.y,errorVal:Ia(y,w)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,s=n.line,o=n.lineType,l=n.lineJointType,c=bn(this.props,!1),u=bn(s,!1),d,h;if(o==="joint")d=i.map(function(E){return{x:E.cx,y:E.cy}});else if(o==="fitting"){var f=met(i),m=f.xmin,x=f.xmax,g=f.a,y=f.b,w=function(j){return g*j+y};d=[{x:m,y:w(m)},{x,y:w(x)}]}var S=Qf(Qf(Qf({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:d});return be.isValidElement(s)?h=be.cloneElement(s,S):Fn(s)?h=s(S):h=be.createElement(nb,D4({},S,{type:l})),be.createElement(Ni,{className:"recharts-scatter-line",key:"recharts-scatter-line"},h)}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.points,o=n.line,l=n.className,c=n.xAxis,u=n.yAxis,d=n.left,h=n.top,f=n.width,m=n.height,x=n.id,g=n.isAnimationActive;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,w=Gn("recharts-scatter",l),S=c&&c.allowDataOverflow,E=u&&u.allowDataOverflow,j=S||E,T=Mn(x)?this.id:x;return be.createElement(Ni,{className:w,clipPath:j?"url(#clipPath-".concat(T,")"):null},S||E?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(T)},be.createElement("rect",{x:S?d:d-f/2,y:E?h:h-m/2,width:S?f:f*2,height:E?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),be.createElement(Ni,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||y)&&Yp.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])}(C.PureComponent);By(oB,"displayName","Scatter");By(oB,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Tm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});By(oB,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,s=t.displayedData,o=t.xAxisTicks,l=t.yAxisTicks,c=t.offset,u=i.props.tooltipType,d=Cd(i.props.children,mN),h=Mn(e.dataKey)?i.props.dataKey:e.dataKey,f=Mn(r.dataKey)?i.props.dataKey:r.dataKey,m=n&&n.dataKey,x=n?n.range:aB.defaultProps.range,g=x&&x[0],y=e.scale.bandwidth?e.scale.bandwidth():0,w=r.scale.bandwidth?r.scale.bandwidth():0,S=s.map(function(E,j){var T=Ia(E,h),O=Ia(E,f),I=!Mn(m)&&Ia(E,m)||"-",M=[{name:Mn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:T,payload:E,dataKey:h,type:u},{name:Mn(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:O,payload:E,dataKey:f,type:u}];I!=="-"&&M.push({name:n.name||n.dataKey,unit:n.unit||"",value:I,payload:E,dataKey:m,type:u});var D=YA({axis:e,ticks:o,bandSize:y,entry:E,index:j,dataKey:h}),z=YA({axis:r,ticks:l,bandSize:w,entry:E,index:j,dataKey:f}),F=I!=="-"?n.scale(I):g,q=Math.sqrt(Math.max(F,0)/Math.PI);return Qf(Qf({},E),{},{cx:D,cy:z,x:D-q,y:z-q,xAxis:e,yAxis:r,zAxis:n,width:2*q,height:2*q,size:F,node:{x:T,y:O,z:I},tooltipPayload:M,tooltipPosition:{x:D,y:z},payload:E},d&&d[j]&&d[j].props)});return Qf({points:S},c)});function hC(t){"@babel/helpers - typeof";return hC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hC(t)}function j2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A2t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bNe(n.key),n)}}function C2t(t,e,r){return e&&A2t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function T2t(t,e,r){return e=dL(e),P2t(t,vNe()?Reflect.construct(e,r||[],dL(t).constructor):e.apply(t,r))}function P2t(t,e){if(e&&(hC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k2t(t)}function k2t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vNe=function(){return!!t})()}function dL(t){return dL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dL(t)}function O2t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uW(t,e)}function uW(t,e){return uW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uW(t,e)}function yNe(t,e,r){return e=bNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bNe(t){var e=I2t(t,"string");return hC(e)=="symbol"?e:e+""}function I2t(t,e){if(hC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dW(){return dW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dW.apply(this,arguments)}function R2t(t){var e=t.xAxisId,r=SQ(),n=EQ(),i=X_e(e);return i==null?null:C.createElement(x5,dW({},i,{className:Gn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return av(o,!0)}}))}var Xc=function(t){function e(){return j2t(this,e),T2t(this,e,arguments)}return O2t(e,t),C2t(e,[{key:"render",value:function(){return C.createElement(R2t,this.props)}}])}(C.Component);yNe(Xc,"displayName","XAxis");yNe(Xc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function fC(t){"@babel/helpers - typeof";return fC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fC(t)}function D2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M2t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NNe(n.key),n)}}function L2t(t,e,r){return e&&M2t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F2t(t,e,r){return e=hL(e),B2t(t,wNe()?Reflect.construct(e,r||[],hL(t).constructor):e.apply(t,r))}function B2t(t,e){if(e&&(fC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $2t(t)}function $2t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wNe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wNe=function(){return!!t})()}function hL(t){return hL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hL(t)}function U2t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hW(t,e)}function hW(t,e){return hW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hW(t,e)}function _Ne(t,e,r){return e=NNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NNe(t){var e=z2t(t,"string");return fC(e)=="symbol"?e:e+""}function z2t(t,e){if(fC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fW(){return fW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fW.apply(this,arguments)}var V2t=function(e){var r=e.yAxisId,n=SQ(),i=EQ(),s=Y_e(r);return s==null?null:C.createElement(x5,fW({},s,{className:Gn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return av(l,!0)}}))},Yc=function(t){function e(){return D2t(this,e),F2t(this,e,arguments)}return U2t(e,t),L2t(e,[{key:"render",value:function(){return C.createElement(V2t,this.props)}}])}(C.Component);_Ne(Yc,"displayName","YAxis");_Ne(Yc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Fce(t){return G2t(t)||W2t(t)||H2t(t)||q2t()}function q2t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H2t(t,e){if(t){if(typeof t=="string")return mW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mW(t,e)}}function W2t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G2t(t){if(Array.isArray(t))return mW(t)}function mW(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pW=function(e,r,n,i,s){var o=Cd(e,AQ),l=Cd(e,nB),c=[].concat(Fce(o),Fce(l)),u=Cd(e,sB),d="".concat(i,"Id"),h=i[0],f=r;if(c.length&&(f=c.reduce(function(g,y){if(y.props[d]===n&&jg(y.props,"extendDomain")&&jr(y.props[h])){var w=y.props[h];return[Math.min(g[0],w),Math.max(g[1],w)]}return g},f)),u.length){var m="".concat(h,"1"),x="".concat(h,"2");f=u.reduce(function(g,y){if(y.props[d]===n&&jg(y.props,"extendDomain")&&jr(y.props[m])&&jr(y.props[x])){var w=y.props[m],S=y.props[x];return[Math.min(g[0],w,S),Math.max(g[1],w,S)]}return g},f)}return s&&s.length&&(f=s.reduce(function(g,y){return jr(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},f)),f},SNe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,h||c,f),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,x=new Array(m);f<m;f++)x[f]=h[f].fn;return x},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,x){var g=r?r+u:u;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,S,E;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,h),!0;case 4:return y.fn.call(y.context,d,h,f),!0;case 5:return y.fn.call(y.context,d,h,f,m),!0;case 6:return y.fn.call(y.context,d,h,f,m,x),!0}for(E=1,S=new Array(w-1);E<w;E++)S[E-1]=arguments[E];y.fn.apply(y.context,S)}else{var j=y.length,T;for(E=0;E<j;E++)switch(y[E].once&&this.removeListener(u,y[E].fn,void 0,!0),w){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,d);break;case 3:y[E].fn.call(y[E].context,d,h);break;case 4:y[E].fn.call(y[E].context,d,h,f);break;default:if(!S)for(T=1,S=new Array(w-1);T<w;T++)S[T-1]=arguments[T];y[E].fn.apply(y[E].context,S)}}return!0},l.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===d&&(!f||x.once)&&(!h||x.context===h)&&o(this,m);else{for(var g=0,y=[],w=x.length;g<w;g++)(x[g].fn!==d||f&&!x[g].once||h&&x[g].context!==h)&&y.push(x[g]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(SNe);var K2t=SNe.exports;const X2t=Vi(K2t);var aU=new X2t,oU="recharts.syncMouseEvents";function TP(t){"@babel/helpers - typeof";return TP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TP(t)}function Y2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z2t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ENe(n.key),n)}}function Q2t(t,e,r){return e&&Z2t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lU(t,e,r){return e=ENe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ENe(t){var e=J2t(t,"string");return TP(e)=="symbol"?e:e+""}function J2t(t,e){if(TP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(TP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var e_t=function(){function t(){Y2t(this,t),lU(this,"activeIndex",0),lU(this,"coordinateList",[]),lU(this,"layout","horizontal")}return Q2t(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,h=d===void 0?null:d,f=r.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,h=s+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function t_t(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&jr(n)&&jr(i))return!0}return!1}function r_t(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function jNe(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,s=t.endAngle,o=wa(e,r,n,i),l=wa(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:i,endAngle:s}}function n_t(t,e,r){var n,i,s,o;if(t==="horizontal")n=e.x,s=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=wa(l,c,u,h),m=wa(l,c,d,h);n=f.x,i=f.y,s=m.x,o=m.y}else return jNe(e);return[{x:n,y:i},{x:s,y:o}]}function PP(t){"@babel/helpers - typeof";return PP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PP(t)}function Bce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bce(Object(r),!0).forEach(function(n){i_t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i_t(t,e,r){return e=s_t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s_t(t){var e=a_t(t,"string");return PP(e)=="symbol"?e:e+""}function a_t(t,e){if(PP(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(PP(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o_t(t){var e,r,n=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!s||!o||f!=="ScatterChart"&&i!=="axis")return null;var x,g=nb;if(f==="ScatterChart")x=o,g=Yxt;else if(f==="BarChart")x=r_t(h,o,c,d),g=yQ;else if(h==="radial"){var y=jNe(o),w=y.cx,S=y.cy,E=y.radius,j=y.startAngle,T=y.endAngle;x={cx:w,cy:S,startAngle:j,endAngle:T,innerRadius:E,outerRadius:E},g=v_e}else x={points:n_t(h,o,c)},g=nb;var O=oD(oD(oD(oD({stroke:"#ccc",pointerEvents:"none"},c),x),bn(m,!1)),{},{payload:l,payloadIndex:u,className:Gn("recharts-tooltip-cursor",m.className)});return C.isValidElement(m)?C.cloneElement(m,O):C.createElement(g,O)}var l_t=["item"],c_t=["children","className","width","height","style","compact","title","desc"];function mC(t){"@babel/helpers - typeof";return mC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(t)}function ZS(){return ZS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZS.apply(this,arguments)}function $ce(t,e){return h_t(t)||d_t(t,e)||CNe(t,e)||u_t()}function u_t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d_t(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function h_t(t){if(Array.isArray(t))return t}function Uce(t,e){if(t==null)return{};var r=f_t(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function f_t(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function m_t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p_t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TNe(n.key),n)}}function g_t(t,e,r){return e&&p_t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function x_t(t,e,r){return e=fL(e),v_t(t,ANe()?Reflect.construct(e,r||[],fL(t).constructor):e.apply(t,r))}function v_t(t,e){if(e&&(mC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y_t(t)}function y_t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ANe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ANe=function(){return!!t})()}function fL(t){return fL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fL(t)}function b_t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gW(t,e)}function gW(t,e){return gW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gW(t,e)}function pC(t){return N_t(t)||__t(t)||CNe(t)||w_t()}function w_t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CNe(t,e){if(t){if(typeof t=="string")return xW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xW(t,e)}}function __t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N_t(t){if(Array.isArray(t))return xW(t)}function xW(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zce(Object(r),!0).forEach(function(n){qn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zce(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qn(t,e,r){return e=TNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TNe(t){var e=S_t(t,"string");return mC(e)=="symbol"?e:e+""}function S_t(t,e){if(mC(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(mC(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E_t={xAxis:["bottom","top"],yAxis:["left","right"]},j_t={width:"100%",height:"100%"},PNe={x:0,y:0};function lD(t){return t}var A_t=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},C_t=function(e,r,n,i){var s=r.find(function(d){return d&&d.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return nr(nr(nr({},i),wa(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return nr(nr(nr({},i),wa(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return PNe},lB=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(pC(l),pC(u)):l},[]);return o.length>0?o:e&&e.length&&jr(i)&&jr(s)?e.slice(i,s+1):[]};function kNe(t){return t==="number"?[0,"auto"]:void 0}var vW=function(e,r,n,i){var s=e.graphicalItems,o=e.tooltipAxis,l=lB(r,e);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=u8(m,o.dataKey,i)}else f=h&&h[n]||l[n];return f?[].concat(pC(c),[h_e(u,f)]):c},[])},Vce=function(e,r,n,i){var s=i||{x:e.chartX,y:e.chartY},o=A_t(s,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=Ept(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=vW(e,r,d,h),m=C_t(n,l,d,s);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},T_t=function(e,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,m=a_e(d,s);return n.reduce(function(x,g){var y,w=g.type.defaultProps!==void 0?nr(nr({},g.type.defaultProps),g.props):g.props,S=w.type,E=w.dataKey,j=w.allowDataOverflow,T=w.allowDuplicatedCategory,O=w.scale,I=w.ticks,M=w.includeHidden,D=w[o];if(x[D])return x;var z=lB(e.data,{graphicalItems:i.filter(function(H){var J,ie=o in H.props?H.props[o]:(J=H.type.defaultProps)===null||J===void 0?void 0:J[o];return ie===D}),dataStartIndex:c,dataEndIndex:u}),F=z.length,q,Q,re;t_t(w.domain,j,S)&&(q=TH(w.domain,null,j),m&&(S==="number"||O!=="auto")&&(re=T4(z,E,"category")));var Z=kNe(S);if(!q||q.length===0){var se,K=(se=w.domain)!==null&&se!==void 0?se:Z;if(E){if(q=T4(z,E,S),S==="category"&&m){var X=fet(q);T&&X?(Q=q,q=Z8(0,F)):T||(q=ole(K,q,g).reduce(function(H,J){return H.indexOf(J)>=0?H:[].concat(pC(H),[J])},[]))}else if(S==="category")T?q=q.filter(function(H){return H!==""&&!Mn(H)}):q=ole(K,q,g).reduce(function(H,J){return H.indexOf(J)>=0||J===""||Mn(J)?H:[].concat(pC(H),[J])},[]);else if(S==="number"){var Y=Ppt(z,i.filter(function(H){var J,ie,ce=o in H.props?H.props[o]:(J=H.type.defaultProps)===null||J===void 0?void 0:J[o],me="hide"in H.props?H.props.hide:(ie=H.type.defaultProps)===null||ie===void 0?void 0:ie.hide;return ce===D&&(M||!me)}),E,s,d);Y&&(q=Y)}m&&(S==="number"||O!=="auto")&&(re=T4(z,E,"category"))}else m?q=Z8(0,F):l&&l[D]&&l[D].hasStack&&S==="number"?q=f==="expand"?[0,1]:d_e(l[D].stackGroups,c,u):q=s_e(z,i.filter(function(H){var J=o in H.props?H.props[o]:H.type.defaultProps[o],ie="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return J===D&&(M||!ie)}),S,d,!0);if(S==="number")q=pW(h,q,D,s,I),K&&(q=TH(K,q,j));else if(S==="category"&&K){var oe=K,xe=q.every(function(H){return oe.indexOf(H)>=0});xe&&(q=oe)}}return nr(nr({},x),{},qn({},D,nr(nr({},w),{},{axisType:s,domain:q,categoricalDomain:re,duplicateDomain:Q,originalDomain:(y=w.domain)!==null&&y!==void 0?y:Z,isCategorical:m,layout:d})))},{})},P_t=function(e,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,h=e.children,f=lB(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=f.length,x=a_e(d,s),g=-1;return n.reduce(function(y,w){var S=w.type.defaultProps!==void 0?nr(nr({},w.type.defaultProps),w.props):w.props,E=S[o],j=kNe("number");if(!y[E]){g++;var T;return x?T=Z8(0,m):l&&l[E]&&l[E].hasStack?(T=d_e(l[E].stackGroups,c,u),T=pW(h,T,E,s)):(T=TH(j,s_e(f,n.filter(function(O){var I,M,D=o in O.props?O.props[o]:(I=O.type.defaultProps)===null||I===void 0?void 0:I[o],z="hide"in O.props?O.props.hide:(M=O.type.defaultProps)===null||M===void 0?void 0:M.hide;return D===E&&!z}),"number",d),i.defaultProps.allowDataOverflow),T=pW(h,T,E,s)),nr(nr({},y),{},qn({},E,nr(nr({axisType:s},i.defaultProps),{},{hide:!0,orientation:Tf(E_t,"".concat(s,".").concat(g%2),null),domain:T,originalDomain:j,isCategorical:x,layout:d})))}return y},{})},k_t=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.children,h="".concat(i,"Id"),f=Cd(d,s),m={};return f&&f.length?m=T_t(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=P_t(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},O_t=function(e){var r=j1(e),n=av(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:WZ(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:F8(r,n)}},qce=function(e){var r=e.children,n=e.defaultShowTooltip,i=uf(r,rC),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},I_t=function(e){return!e||!e.length?!1:e.some(function(r){var n=lv(r&&r.type);return n&&n.indexOf("Bar")>=0})},Hce=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},R_t=function(e,r){var n=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,h=n.children,f=n.margin||{},m=uf(h,rC),x=uf(h,Kc),g=Object.keys(c).reduce(function(T,O){var I=c[O],M=I.orientation;return!I.mirror&&!I.hide?nr(nr({},T),{},qn({},M,T[M]+I.width)):T},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(T,O){var I=o[O],M=I.orientation;return!I.mirror&&!I.hide?nr(nr({},T),{},qn({},M,Tf(T,"".concat(M))+I.height)):T},{top:f.top||0,bottom:f.bottom||0}),w=nr(nr({},y),g),S=w.bottom;m&&(w.bottom+=m.props.height||rC.defaultProps.height),x&&r&&(w=Cpt(w,i,n,r));var E=u-w.left-w.right,j=d-w.top-w.bottom;return nr(nr({brushBottom:S},w),{},{width:Math.max(E,0),height:Math.max(j,0)})},D_t=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},cB=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(w,S){var E=S.graphicalItems,j=S.stackGroups,T=S.offset,O=S.updateId,I=S.dataStartIndex,M=S.dataEndIndex,D=w.barSize,z=w.layout,F=w.barGap,q=w.barCategoryGap,Q=w.maxBarSize,re=Hce(z),Z=re.numericAxisName,se=re.cateAxisName,K=I_t(E),X=[];return E.forEach(function(Y,oe){var xe=lB(w.data,{graphicalItems:[Y],dataStartIndex:I,dataEndIndex:M}),H=Y.type.defaultProps!==void 0?nr(nr({},Y.type.defaultProps),Y.props):Y.props,J=H.dataKey,ie=H.maxBarSize,ce=H["".concat(Z,"Id")],me=H["".concat(se,"Id")],he={},_e=c.reduce(function(st,Xt){var Jt=S["".concat(Xt.axisType,"Map")],_r=H["".concat(Xt.axisType,"Id")];Jt&&Jt[_r]||Xt.axisType==="zAxis"||ts(!1);var lt=Jt[_r];return nr(nr({},st),{},qn(qn({},Xt.axisType,lt),"".concat(Xt.axisType,"Ticks"),av(lt)))},he),ue=_e[se],je=_e["".concat(se,"Ticks")],ye=j&&j[ce]&&j[ce].hasStack&&Bpt(Y,j[ce].stackGroups),Le=lv(Y.type).indexOf("Bar")>=0,Ge=F8(ue,je),Be=[],Te=K&&jpt({barSize:D,stackGroups:j,totalSize:D_t(_e,se)});if(Le){var ze,tt,Re=Mn(ie)?Q:ie,Ue=(ze=(tt=F8(ue,je,!0))!==null&&tt!==void 0?tt:Re)!==null&&ze!==void 0?ze:0;Be=Apt({barGap:F,barCategoryGap:q,bandSize:Ue!==Ge?Ue:Ge,sizeList:Te[me],maxBarSize:Re}),Ue!==Ge&&(Be=Be.map(function(st){return nr(nr({},st),{},{position:nr(nr({},st.position),{},{offset:st.position.offset-Ue/2})})}))}var xt=Y&&Y.type&&Y.type.getComposedData;xt&&X.push({props:nr(nr({},xt(nr(nr({},_e),{},{displayedData:xe,props:w,dataKey:J,item:Y,bandSize:Ge,barPosition:Be,offset:T,stackedData:ye,layout:z,dataStartIndex:I,dataEndIndex:M}))),{},qn(qn(qn({key:Y.key||"item-".concat(oe)},Z,_e[Z]),se,_e[se]),"animationId",O)),childIndex:Aet(Y,w.children),item:Y})}),X},m=function(w,S){var E=w.props,j=w.dataStartIndex,T=w.dataEndIndex,O=w.updateId;if(!tae({props:E}))return null;var I=E.children,M=E.layout,D=E.stackOffset,z=E.data,F=E.reverseStackOrder,q=Hce(M),Q=q.numericAxisName,re=q.cateAxisName,Z=Cd(I,n),se=Lpt(z,Z,"".concat(Q,"Id"),"".concat(re,"Id"),D,F),K=c.reduce(function(H,J){var ie="".concat(J.axisType,"Map");return nr(nr({},H),{},qn({},ie,k_t(E,nr(nr({},J),{},{graphicalItems:Z,stackGroups:J.axisType===Q&&se,dataStartIndex:j,dataEndIndex:T}))))},{}),X=R_t(nr(nr({},K),{},{props:E,graphicalItems:Z}),S==null?void 0:S.legendBBox);Object.keys(K).forEach(function(H){K[H]=d(E,K[H],X,H.replace("Map",""),r)});var Y=K["".concat(re,"Map")],oe=O_t(Y),xe=f(E,nr(nr({},K),{},{dataStartIndex:j,dataEndIndex:T,updateId:O,graphicalItems:Z,stackGroups:se,offset:X}));return nr(nr({formattedGraphicalItems:xe,graphicalItems:Z,offset:X,stackGroups:se},oe),K)},x=function(y){function w(S){var E,j,T;return m_t(this,w),T=x_t(this,w,[S]),qn(T,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qn(T,"accessibilityManager",new e_t),qn(T,"handleLegendBBoxUpdate",function(O){if(O){var I=T.state,M=I.dataStartIndex,D=I.dataEndIndex,z=I.updateId;T.setState(nr({legendBBox:O},m({props:T.props,dataStartIndex:M,dataEndIndex:D,updateId:z},nr(nr({},T.state),{},{legendBBox:O}))))}}),qn(T,"handleReceiveSyncEvent",function(O,I,M){if(T.props.syncId===O){if(M===T.eventEmitterSymbol&&typeof T.props.syncMethod!="function")return;T.applySyncEvent(I)}}),qn(T,"handleBrushChange",function(O){var I=O.startIndex,M=O.endIndex;if(I!==T.state.dataStartIndex||M!==T.state.dataEndIndex){var D=T.state.updateId;T.setState(function(){return nr({dataStartIndex:I,dataEndIndex:M},m({props:T.props,dataStartIndex:I,dataEndIndex:M,updateId:D},T.state))}),T.triggerSyncEvent({dataStartIndex:I,dataEndIndex:M})}}),qn(T,"handleMouseEnter",function(O){var I=T.getMouseInfo(O);if(I){var M=nr(nr({},I),{},{isTooltipActive:!0});T.setState(M),T.triggerSyncEvent(M);var D=T.props.onMouseEnter;Fn(D)&&D(M,O)}}),qn(T,"triggeredAfterMouseMove",function(O){var I=T.getMouseInfo(O),M=I?nr(nr({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};T.setState(M),T.triggerSyncEvent(M);var D=T.props.onMouseMove;Fn(D)&&D(M,O)}),qn(T,"handleItemMouseEnter",function(O){T.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),qn(T,"handleItemMouseLeave",function(){T.setState(function(){return{isTooltipActive:!1}})}),qn(T,"handleMouseMove",function(O){O.persist(),T.throttleTriggeredAfterMouseMove(O)}),qn(T,"handleMouseLeave",function(O){T.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};T.setState(I),T.triggerSyncEvent(I);var M=T.props.onMouseLeave;Fn(M)&&M(I,O)}),qn(T,"handleOuterEvent",function(O){var I=jet(O),M=Tf(T.props,"".concat(I));if(I&&Fn(M)){var D,z;/.*touch.*/i.test(I)?z=T.getMouseInfo(O.changedTouches[0]):z=T.getMouseInfo(O),M((D=z)!==null&&D!==void 0?D:{},O)}}),qn(T,"handleClick",function(O){var I=T.getMouseInfo(O);if(I){var M=nr(nr({},I),{},{isTooltipActive:!0});T.setState(M),T.triggerSyncEvent(M);var D=T.props.onClick;Fn(D)&&D(M,O)}}),qn(T,"handleMouseDown",function(O){var I=T.props.onMouseDown;if(Fn(I)){var M=T.getMouseInfo(O);I(M,O)}}),qn(T,"handleMouseUp",function(O){var I=T.props.onMouseUp;if(Fn(I)){var M=T.getMouseInfo(O);I(M,O)}}),qn(T,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&T.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),qn(T,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&T.handleMouseDown(O.changedTouches[0])}),qn(T,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&T.handleMouseUp(O.changedTouches[0])}),qn(T,"handleDoubleClick",function(O){var I=T.props.onDoubleClick;if(Fn(I)){var M=T.getMouseInfo(O);I(M,O)}}),qn(T,"handleContextMenu",function(O){var I=T.props.onContextMenu;if(Fn(I)){var M=T.getMouseInfo(O);I(M,O)}}),qn(T,"triggerSyncEvent",function(O){T.props.syncId!==void 0&&aU.emit(oU,T.props.syncId,O,T.eventEmitterSymbol)}),qn(T,"applySyncEvent",function(O){var I=T.props,M=I.layout,D=I.syncMethod,z=T.state.updateId,F=O.dataStartIndex,q=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)T.setState(nr({dataStartIndex:F,dataEndIndex:q},m({props:T.props,dataStartIndex:F,dataEndIndex:q,updateId:z},T.state)));else if(O.activeTooltipIndex!==void 0){var Q=O.chartX,re=O.chartY,Z=O.activeTooltipIndex,se=T.state,K=se.offset,X=se.tooltipTicks;if(!K)return;if(typeof D=="function")Z=D(X,O);else if(D==="value"){Z=-1;for(var Y=0;Y<X.length;Y++)if(X[Y].value===O.activeLabel){Z=Y;break}}var oe=nr(nr({},K),{},{x:K.left,y:K.top}),xe=Math.min(Q,oe.x+oe.width),H=Math.min(re,oe.y+oe.height),J=X[Z]&&X[Z].value,ie=vW(T.state,T.props.data,Z),ce=X[Z]?{x:M==="horizontal"?X[Z].coordinate:xe,y:M==="horizontal"?H:X[Z].coordinate}:PNe;T.setState(nr(nr({},O),{},{activeLabel:J,activeCoordinate:ce,activePayload:ie,activeTooltipIndex:Z}))}else T.setState(O)}),qn(T,"renderCursor",function(O){var I,M=T.state,D=M.isTooltipActive,z=M.activeCoordinate,F=M.activePayload,q=M.offset,Q=M.activeTooltipIndex,re=M.tooltipAxisBandSize,Z=T.getTooltipEventType(),se=(I=O.props.active)!==null&&I!==void 0?I:D,K=T.props.layout,X=O.key||"_recharts-cursor";return be.createElement(o_t,{key:X,activeCoordinate:z,activePayload:F,activeTooltipIndex:Q,chartName:r,element:O,isActive:se,layout:K,offset:q,tooltipAxisBandSize:re,tooltipEventType:Z})}),qn(T,"renderPolarAxis",function(O,I,M){var D=Tf(O,"type.axisType"),z=Tf(T.state,"".concat(D,"Map")),F=O.type.defaultProps,q=F!==void 0?nr(nr({},F),O.props):O.props,Q=z&&z[q["".concat(D,"Id")]];return C.cloneElement(O,nr(nr({},Q),{},{className:Gn(D,Q.className),key:O.key||"".concat(I,"-").concat(M),ticks:av(Q,!0)}))}),qn(T,"renderPolarGrid",function(O){var I=O.props,M=I.radialLines,D=I.polarAngles,z=I.polarRadius,F=T.state,q=F.radiusAxisMap,Q=F.angleAxisMap,re=j1(q),Z=j1(Q),se=Z.cx,K=Z.cy,X=Z.innerRadius,Y=Z.outerRadius;return C.cloneElement(O,{polarAngles:Array.isArray(D)?D:av(Z,!0).map(function(oe){return oe.coordinate}),polarRadius:Array.isArray(z)?z:av(re,!0).map(function(oe){return oe.coordinate}),cx:se,cy:K,innerRadius:X,outerRadius:Y,key:O.key||"polar-grid",radialLines:M})}),qn(T,"renderLegend",function(){var O=T.state.formattedGraphicalItems,I=T.props,M=I.children,D=I.width,z=I.height,F=T.props.margin||{},q=D-(F.left||0)-(F.right||0),Q=n_e({children:M,formattedGraphicalItems:O,legendWidth:q,legendContent:u});if(!Q)return null;var re=Q.item,Z=Uce(Q,l_t);return C.cloneElement(re,nr(nr({},Z),{},{chartWidth:D,chartHeight:z,margin:F,onBBoxUpdate:T.handleLegendBBoxUpdate}))}),qn(T,"renderTooltip",function(){var O,I=T.props,M=I.children,D=I.accessibilityLayer,z=uf(M,Ga);if(!z)return null;var F=T.state,q=F.isTooltipActive,Q=F.activeCoordinate,re=F.activePayload,Z=F.activeLabel,se=F.offset,K=(O=z.props.active)!==null&&O!==void 0?O:q;return C.cloneElement(z,{viewBox:nr(nr({},se),{},{x:se.left,y:se.top}),active:K,label:Z,payload:K?re:[],coordinate:Q,accessibilityLayer:D})}),qn(T,"renderBrush",function(O){var I=T.props,M=I.margin,D=I.data,z=T.state,F=z.offset,q=z.dataStartIndex,Q=z.dataEndIndex,re=z.updateId;return C.cloneElement(O,{key:O.key||"_recharts-brush",onChange:nD(T.handleBrushChange,O.props.onChange),data:D,x:jr(O.props.x)?O.props.x:F.left,y:jr(O.props.y)?O.props.y:F.top+F.height+F.brushBottom-(M.bottom||0),width:jr(O.props.width)?O.props.width:F.width,startIndex:q,endIndex:Q,updateId:"brush-".concat(re)})}),qn(T,"renderReferenceElement",function(O,I,M){if(!O)return null;var D=T,z=D.clipPathId,F=T.state,q=F.xAxisMap,Q=F.yAxisMap,re=F.offset,Z=O.type.defaultProps||{},se=O.props,K=se.xAxisId,X=K===void 0?Z.xAxisId:K,Y=se.yAxisId,oe=Y===void 0?Z.yAxisId:Y;return C.cloneElement(O,{key:O.key||"".concat(I,"-").concat(M),xAxis:q[X],yAxis:Q[oe],viewBox:{x:re.left,y:re.top,width:re.width,height:re.height},clipPathId:z})}),qn(T,"renderActivePoints",function(O){var I=O.item,M=O.activePoint,D=O.basePoint,z=O.childIndex,F=O.isRange,q=[],Q=I.props.key,re=I.item.type.defaultProps!==void 0?nr(nr({},I.item.type.defaultProps),I.item.props):I.item.props,Z=re.activeDot,se=re.dataKey,K=nr(nr({index:z,dataKey:se,cx:M.x,cy:M.y,r:4,fill:vQ(I.item),strokeWidth:2,stroke:"#fff",payload:M.payload,value:M.value},bn(Z,!1)),d8(Z));return q.push(w.renderActiveDot(Z,K,"".concat(Q,"-activePoint-").concat(z))),D?q.push(w.renderActiveDot(Z,nr(nr({},K),{},{cx:D.x,cy:D.y}),"".concat(Q,"-basePoint-").concat(z))):F&&q.push(null),q}),qn(T,"renderGraphicChild",function(O,I,M){var D=T.filterFormatItem(O,I,M);if(!D)return null;var z=T.getTooltipEventType(),F=T.state,q=F.isTooltipActive,Q=F.tooltipAxis,re=F.activeTooltipIndex,Z=F.activeLabel,se=T.props.children,K=uf(se,Ga),X=D.props,Y=X.points,oe=X.isRange,xe=X.baseLine,H=D.item.type.defaultProps!==void 0?nr(nr({},D.item.type.defaultProps),D.item.props):D.item.props,J=H.activeDot,ie=H.hide,ce=H.activeBar,me=H.activeShape,he=!!(!ie&&q&&K&&(J||ce||me)),_e={};z!=="axis"&&K&&K.props.trigger==="click"?_e={onClick:nD(T.handleItemMouseEnter,O.props.onClick)}:z!=="axis"&&(_e={onMouseLeave:nD(T.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:nD(T.handleItemMouseEnter,O.props.onMouseEnter)});var ue=C.cloneElement(O,nr(nr({},D.props),_e));function je(Xt){return typeof Q.dataKey=="function"?Q.dataKey(Xt.payload):null}if(he)if(re>=0){var ye,Le;if(Q.dataKey&&!Q.allowDuplicatedCategory){var Ge=typeof Q.dataKey=="function"?je:"payload.".concat(Q.dataKey.toString());ye=u8(Y,Ge,Z),Le=oe&&xe&&u8(xe,Ge,Z)}else ye=Y==null?void 0:Y[re],Le=oe&&xe&&xe[re];if(me||ce){var Be=O.props.activeIndex!==void 0?O.props.activeIndex:re;return[C.cloneElement(O,nr(nr(nr({},D.props),_e),{},{activeIndex:Be})),null,null]}if(!Mn(ye))return[ue].concat(pC(T.renderActivePoints({item:D,activePoint:ye,basePoint:Le,childIndex:re,isRange:oe})))}else{var Te,ze=(Te=T.getItemByXY(T.state.activeCoordinate))!==null&&Te!==void 0?Te:{graphicalItem:ue},tt=ze.graphicalItem,Re=tt.item,Ue=Re===void 0?O:Re,xt=tt.childIndex,st=nr(nr(nr({},D.props),_e),{},{activeIndex:xt});return[C.cloneElement(Ue,st),null,null]}return oe?[ue,null,null]:[ue,null]}),qn(T,"renderCustomized",function(O,I,M){return C.cloneElement(O,nr(nr({key:"recharts-customized-".concat(M)},T.props),T.state))}),qn(T,"renderMap",{CartesianGrid:{handler:lD,once:!0},ReferenceArea:{handler:T.renderReferenceElement},ReferenceLine:{handler:lD},ReferenceDot:{handler:T.renderReferenceElement},XAxis:{handler:lD},YAxis:{handler:lD},Brush:{handler:T.renderBrush,once:!0},Bar:{handler:T.renderGraphicChild},Line:{handler:T.renderGraphicChild},Area:{handler:T.renderGraphicChild},Radar:{handler:T.renderGraphicChild},RadialBar:{handler:T.renderGraphicChild},Scatter:{handler:T.renderGraphicChild},Pie:{handler:T.renderGraphicChild},Funnel:{handler:T.renderGraphicChild},Tooltip:{handler:T.renderCursor,once:!0},PolarGrid:{handler:T.renderPolarGrid,once:!0},PolarAngleAxis:{handler:T.renderPolarAxis},PolarRadiusAxis:{handler:T.renderPolarAxis},Customized:{handler:T.renderCustomized}}),T.clipPathId="".concat((E=S.id)!==null&&E!==void 0?E:Kb("recharts"),"-clip"),T.throttleTriggeredAfterMouseMove=r2e(T.triggeredAfterMouseMove,(j=S.throttleDelay)!==null&&j!==void 0?j:1e3/60),T.state={},T}return b_t(w,y),g_t(w,[{key:"componentDidMount",value:function(){var E,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,j=E.children,T=E.data,O=E.height,I=E.layout,M=uf(j,Ga);if(M){var D=M.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,F=vW(this.state,T,D,z),q=this.state.tooltipTicks[D].coordinate,Q=(this.state.offset.top+O)/2,re=I==="horizontal",Z=re?{x:q,y:Q}:{y:q,x:Q},se=this.state.formattedGraphicalItems.find(function(X){var Y=X.item;return Y.type.name==="Scatter"});se&&(Z=nr(nr({},Z),se.props.points[D].tooltipPosition),F=se.props.points[D].tooltipPayload);var K={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:z,activePayload:F,activeCoordinate:Z};this.setState(K),this.renderCursor(M),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var T,O;this.accessibilityManager.setDetails({offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(E){qq([uf(E.children,Ga)],[uf(this.props.children,Ga)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=uf(this.props.children,Ga);if(E&&typeof E.props.shared=="boolean"){var j=E.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var j=this.container,T=j.getBoundingClientRect(),O=Jut(T),I={chartX:Math.round(E.pageX-O.left),chartY:Math.round(E.pageY-O.top)},M=T.width/j.offsetWidth||1,D=this.inRange(I.chartX,I.chartY,M);if(!D)return null;var z=this.state,F=z.xAxisMap,q=z.yAxisMap,Q=this.getTooltipEventType(),re=Vce(this.state,this.props.data,this.props.layout,D);if(Q!=="axis"&&F&&q){var Z=j1(F).scale,se=j1(q).scale,K=Z&&Z.invert?Z.invert(I.chartX):null,X=se&&se.invert?se.invert(I.chartY):null;return nr(nr({},I),{},{xValue:K,yValue:X},re)}return re?nr(nr({},I),re):null}},{key:"inRange",value:function(E,j){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,I=E/T,M=j/T;if(O==="horizontal"||O==="vertical"){var D=this.state.offset,z=I>=D.left&&I<=D.left+D.width&&M>=D.top&&M<=D.top+D.height;return z?{x:I,y:M}:null}var F=this.state,q=F.angleAxisMap,Q=F.radiusAxisMap;if(q&&Q){var re=j1(q);return ule({x:I,y:M},re)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,j=this.getTooltipEventType(),T=uf(E,Ga),O={};T&&j==="axis"&&(T.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=d8(this.props,this.handleOuterEvent);return nr(nr({},I),O)}},{key:"addListener",value:function(){aU.on(oU,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aU.removeListener(oU,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,j,T){for(var O=this.state.formattedGraphicalItems,I=0,M=O.length;I<M;I++){var D=O[I];if(D.item===E||D.props.key===E.key||j===lv(D.item.type)&&T===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,j=this.state.offset,T=j.left,O=j.top,I=j.height,M=j.width;return be.createElement("defs",null,be.createElement("clipPath",{id:E},be.createElement("rect",{x:T,y:O,height:I,width:M})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(j,T){var O=$ce(T,2),I=O[0],M=O[1];return nr(nr({},j),{},qn({},I,M.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(j,T){var O=$ce(T,2),I=O[0],M=O[1];return nr(nr({},j),{},qn({},I,M.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[E])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(E){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[E])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(E){var j=this.state,T=j.formattedGraphicalItems,O=j.activeItem;if(T&&T.length)for(var I=0,M=T.length;I<M;I++){var D=T[I],z=D.props,F=D.item,q=F.type.defaultProps!==void 0?nr(nr({},F.type.defaultProps),F.props):F.props,Q=lv(F.type);if(Q==="Bar"){var re=(z.data||[]).find(function(X){return Pxt(E,X)});if(re)return{graphicalItem:D,payload:re}}else if(Q==="RadialBar"){var Z=(z.data||[]).find(function(X){return ule(E,X)});if(Z)return{graphicalItem:D,payload:Z}}else if(J7(D,O)||eB(D,O)||SP(D,O)){var se=v1t({graphicalItem:D,activeTooltipItem:O,itemData:q.data}),K=q.activeIndex===void 0?se:q.activeIndex;return{graphicalItem:nr(nr({},D),{},{childIndex:K}),payload:SP(D,O)?q.data[se]:D.props.data[se]}}}return null}},{key:"render",value:function(){var E=this;if(!tae(this))return null;var j=this.props,T=j.children,O=j.className,I=j.width,M=j.height,D=j.style,z=j.compact,F=j.title,q=j.desc,Q=Uce(j,c_t),re=bn(Q,!1);if(z)return be.createElement(vce,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement(Wq,ZS({},re,{width:I,height:M,title:F,desc:q}),this.renderClipPath(),nae(T,this.renderMap)));if(this.props.accessibilityLayer){var Z,se;re.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,re.role=(se=this.props.role)!==null&&se!==void 0?se:"application",re.onKeyDown=function(X){E.accessibilityManager.keyboardEvent(X)},re.onFocus=function(){E.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return be.createElement(vce,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement("div",ZS({className:Gn("recharts-wrapper",O),style:nr({position:"relative",cursor:"default",width:I,height:M},D)},K,{ref:function(Y){E.container=Y}}),be.createElement(Wq,ZS({},re,{width:I,height:M,title:F,desc:q,style:j_t}),this.renderClipPath(),nae(T,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(C.Component);qn(x,"displayName",r),qn(x,"defaultProps",nr({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),qn(x,"getDerivedStateFromProps",function(y,w){var S=y.dataKey,E=y.data,j=y.children,T=y.width,O=y.height,I=y.layout,M=y.stackOffset,D=y.margin,z=w.dataStartIndex,F=w.dataEndIndex;if(w.updateId===void 0){var q=qce(y);return nr(nr(nr({},q),{},{updateId:0},m(nr(nr({props:y},q),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:E,prevWidth:T,prevHeight:O,prevLayout:I,prevStackOffset:M,prevMargin:D,prevChildren:j})}if(S!==w.prevDataKey||E!==w.prevData||T!==w.prevWidth||O!==w.prevHeight||I!==w.prevLayout||M!==w.prevStackOffset||!yE(D,w.prevMargin)){var Q=qce(y),re={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},Z=nr(nr({},Vce(w,E,I)),{},{updateId:w.updateId+1}),se=nr(nr(nr({},Q),re),Z);return nr(nr(nr({},se),m(nr({props:y},se),w)),{},{prevDataKey:S,prevData:E,prevWidth:T,prevHeight:O,prevLayout:I,prevStackOffset:M,prevMargin:D,prevChildren:j})}if(!qq(j,w.prevChildren)){var K,X,Y,oe,xe=uf(j,rC),H=xe&&(K=(X=xe.props)===null||X===void 0?void 0:X.startIndex)!==null&&K!==void 0?K:z,J=xe&&(Y=(oe=xe.props)===null||oe===void 0?void 0:oe.endIndex)!==null&&Y!==void 0?Y:F,ie=H!==z||J!==F,ce=!Mn(E),me=ce&&!ie?w.updateId:w.updateId+1;return nr(nr({updateId:me},m(nr(nr({props:y},w),{},{updateId:me,dataStartIndex:H,dataEndIndex:J}),w)),{},{prevChildren:j,dataStartIndex:H,dataEndIndex:J})}return null}),qn(x,"renderActiveDot",function(y,w,S){var E;return C.isValidElement(y)?E=C.cloneElement(y,w):Fn(y)?E=y(w):E=be.createElement(SI,w),be.createElement(Ni,{className:"recharts-active-dot",key:S},E)});var g=C.forwardRef(function(w,S){return be.createElement(x,ZS({},w,{ref:S}))});return g.displayName=x.displayName,g},mL=cB({chartName:"LineChart",GraphicalChild:Sd,axisComponents:[{axisType:"xAxis",AxisComp:Xc},{axisType:"yAxis",AxisComp:Yc}],formatAxisMap:bQ}),N_=cB({chartName:"BarChart",GraphicalChild:nu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Xc},{axisType:"yAxis",AxisComp:Yc}],formatAxisMap:bQ}),PQ=cB({chartName:"PieChart",GraphicalChild:h0,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Q7},{axisType:"radiusAxis",AxisComp:Y7}],formatAxisMap:Xpt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),M_t=cB({chartName:"ComposedChart",GraphicalChild:[Sd,vN,nu,oB],axisComponents:[{axisType:"xAxis",AxisComp:Xc},{axisType:"yAxis",AxisComp:Yc},{axisType:"zAxis",AxisComp:aB}],formatAxisMap:bQ});const L_t={plastico:"Plstico",papel:"Papel",papelao:"Papelo",vidro:"Vidro",metal:"Metal",aluminio:"Alumnio",laminado:"Laminado",misto:"Misto",outros:"Outros"},F_t=({userId:t})=>{const[e,r]=C.useState([]),[n,i]=C.useState([]),[s,o]=C.useState(!0);C.useEffect(()=>{l();const g=Ee.channel("materiais-changes").on("postgres_changes",{event:"*",schema:"public",table:"materiais_reciclaveis_usuario",filter:`id_usuario=eq.${t}`},()=>{l()}).subscribe();return()=>{Ee.removeChannel(g)}},[t]);const l=async()=>{try{const{data:g,error:y}=await Ee.from("materiais_reciclaveis_usuario").select("*").eq("id_usuario",t).order("data_cadastro",{ascending:!1});if(y)throw y;const w=(g==null?void 0:g.filter(j=>j.id_entrega))||[];if(w.length>0){const j=[...new Set(w.map(I=>I.id_entrega))],{data:T}=await Ee.from("entregas_reciclaveis").select("id, data_geracao, status_promessa").in("id",j),O=g==null?void 0:g.map(I=>{if(I.id_entrega){const M=T==null?void 0:T.find(D=>D.id===I.id_entrega);return{...I,entregas_reciclaveis:M||null}}return I});r(O||[])}else r(g||[]);const{data:S,error:E}=await Ee.from("entregas_reciclaveis").select("id").eq("id_usuario",t).eq("status_promessa","finalizada");if(E)throw E;if(S&&S.length>0){const j=S.map(I=>I.id),{data:T,error:O}=await Ee.from("materiais_coletados_detalhado").select("tipo_material, peso_kg, subtipo_material").in("id_entrega",j).neq("subtipo_material","REJEITO");if(O)throw O;i(T||[])}else i([])}catch(g){console.error("Erro ao carregar materiais:",g)}finally{o(!1)}},c=g=>{if(g.status!=="em_entrega"||!g.entregas_reciclaveis)return!1;const y=g.entregas_reciclaveis;if(y.status_promessa==="finalizada")return!1;const w=new Date(y.data_geracao);return(new Date().getTime()-w.getTime())/(1e3*60*60)>24},u=g=>e.filter(y=>g==="em_entrega"?y.status==="em_entrega"&&!c(y):y.status===g),d={disponivel:u("disponivel").length,em_entrega:u("em_entrega").length,entregue:u("entregue").length,total:e.length},h=n.reduce((g,y)=>{var S;const w=((S=y.tipo_material)==null?void 0:S.toLowerCase())||"outros";return g[w]||(g[w]={tipo:w,peso:0,quantidade:0}),g[w].peso+=y.peso_kg||0,g[w].quantidade+=1,g},{}),f=Object.values(h).map((g,y)=>({name:L_t[g.tipo]||g.tipo,peso:g.peso,quantidade:g.quantidade,fill:`hsl(var(--chart-${y%5+1}))`})),m=f.reduce((g,y)=>g+y.peso,0);if(s)return a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})});const x=({active:g,payload:y})=>g&&y&&y.length?a.jsxs("div",{className:"bg-background border border-border rounded-lg p-3 shadow-lg",children:[a.jsx("p",{className:"font-semibold text-foreground",children:y[0].name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Peso: ",po(y[0].value)]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Registros: ",y[0].payload.quantidade]})]}):null;return a.jsxs(it,{className:"overflow-hidden",children:[a.jsxs(At,{className:"pb-3",children:[a.jsx(Ct,{className:"text-lg",children:"Meus Materiais Reciclveis"}),a.jsx(gr,{className:"text-xs",children:"Resumo dos materiais cadastrados"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"p-3 rounded-xl text-center bg-blue-500/10",children:[a.jsx(Yn,{className:"w-5 h-5 mx-auto text-blue-600 mb-1"}),a.jsx("p",{className:"text-lg font-bold text-blue-600",children:d.disponivel}),a.jsx("p",{className:"text-[10px] text-blue-600/80",children:"Disponveis"})]}),a.jsxs("div",{className:"p-3 rounded-xl text-center bg-amber-500/10",children:[a.jsx(Gp,{className:"w-5 h-5 mx-auto text-amber-600 mb-1"}),a.jsx("p",{className:"text-lg font-bold text-amber-600",children:d.em_entrega}),a.jsx("p",{className:"text-[10px] text-amber-600/80",children:"Em Entrega"})]}),a.jsxs("div",{className:"p-3 rounded-xl text-center bg-emerald-500/10",children:[a.jsx(ta,{className:"w-5 h-5 mx-auto text-emerald-600 mb-1"}),a.jsx("p",{className:"text-lg font-bold text-emerald-600",children:d.entregue}),a.jsx("p",{className:"text-[10px] text-emerald-600/80",children:"Entregues"})]})]}),f.length>0&&a.jsxs("div",{className:"bg-muted/30 rounded-xl p-4",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-3 text-foreground flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Materiais Entregues por Tipo"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(vd,{width:100,height:100,children:a.jsxs(PQ,{children:[a.jsx(h0,{data:f,cx:"50%",cy:"50%",innerRadius:28,outerRadius:45,paddingAngle:2,dataKey:"peso",children:f.map((g,y)=>a.jsx(mN,{fill:g.fill},`cell-${y}`))}),a.jsx(Ga,{content:a.jsx(x,{})})]})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("p",{className:"text-xs font-bold text-foreground",children:po(m)})})]}),a.jsxs("div",{className:"flex-1 space-y-1.5",children:[f.slice(0,4).map((g,y)=>a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:g.fill}}),a.jsx("span",{className:"text-muted-foreground truncate max-w-[80px]",children:g.name})]}),a.jsx("span",{className:"font-medium text-foreground",children:po(g.peso)})]},y)),f.length>4&&a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["+",f.length-4," outros"]})]})]})]}),d.total===0&&a.jsxs("div",{className:"text-center py-6",children:[a.jsx(Yn,{className:"w-10 h-10 mx-auto text-muted-foreground/30 mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum material cadastrado ainda"})]})]})]})},B_t=()=>{const{user:t}=Si(),e=nn(),[r,n]=C.useState([]),[i,s]=C.useState(!0);C.useEffect(()=>{if(t){o();const u=setInterval(o,6e4);return()=>clearInterval(u)}},[t]);const o=async()=>{try{const u=JXe(new Date,24).toISOString(),{data:d,error:h}=await Ee.from("entregas_reciclaveis").select(`
          id,
          qrcode_id,
          data_geracao,
          peso_estimado,
          status,
          status_promessa,
          itens_vinculados,
          cooperativas!inner(nome_fantasia)
        `).eq("id_usuario",t==null?void 0:t.id).eq("status_promessa","ativa").gte("data_geracao",u).order("data_geracao",{ascending:!1});if(h)throw h;const f=(d==null?void 0:d.map(m=>({...m,cooperativa:Array.isArray(m.cooperativas)?m.cooperativas[0]:m.cooperativas})))||[];n(f)}catch(u){console.error("Erro ao carregar entregas pendentes:",u)}finally{s(!1)}},l=u=>{const d=new Date(u),m=24-WKe(new Date,d);return m<=0?{text:"Expirado",color:"bg-destructive/10 text-destructive border-destructive/20",progress:100,urgent:!0}:m<=3?{text:`${m}h`,color:"bg-destructive/10 text-destructive border-destructive/20",progress:Math.min(100,(24-m)/24*100),urgent:!0}:m<=6?{text:`${m}h`,color:"bg-warning/10 text-warning border-warning/20",progress:(24-m)/24*100,urgent:!1}:{text:`${m}h`,color:"bg-primary/10 text-primary border-primary/20",progress:(24-m)/24*100,urgent:!1}},c=u=>{switch(u){case"em_coleta":return{icon:Gp,text:"Em coleta",color:"bg-blue-500/10 text-blue-600"};case"ativa":default:return{icon:Tg,text:"Aguardando",color:"bg-amber-500/10 text-amber-600"}}};return i?a.jsx("div",{className:"space-y-2",children:[1,2].map(u=>a.jsx("div",{className:"h-16 bg-muted/50 rounded-xl animate-pulse"},u))}):r.length===0?a.jsxs("div",{className:"text-center py-6",children:[a.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(au,{className:"h-6 w-6 text-primary"})}),a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Tudo em dia!"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Nenhuma entrega pendente nas ltimas 24h"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"relative",children:a.jsxs("span",{className:"flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-amber-500"})]})}),a.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[r.length," ",r.length===1?"entrega pendente":"entregas pendentes"]})]}),a.jsx("span",{className:"text-[10px] text-muted-foreground",children:"ltimas 24h"})]}),a.jsx(Cf,{children:r.slice(0,3).map((u,d)=>{var g;const h=l(u.data_geracao),f=c(u.status_promessa),m=f.icon,x=((g=u.itens_vinculados)==null?void 0:g.length)||0;return a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:d*.05},className:`relative overflow-hidden rounded-xl border ${h.urgent?"border-destructive/30 bg-destructive/5":"border-border/50 bg-card/50"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-muted/30",children:a.jsx(Ke.div,{className:`h-full ${h.urgent?"bg-destructive":"bg-primary"}`,initial:{width:0},animate:{width:`${h.progress}%`},transition:{duration:.5,delay:d*.1}})}),a.jsxs("div",{className:"p-3 pt-3.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 ${f.color}`,children:a.jsx(m,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:u.cooperativa.nome_fantasia})}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsxs("span",{className:"text-[11px] text-muted-foreground flex items-center gap-1",children:[a.jsx(Yn,{className:"h-3 w-3"}),x," ",x===1?"item":"itens"]}),a.jsx("span",{className:"text-muted-foreground/30",children:""}),a.jsx("span",{className:"text-[11px] text-muted-foreground",children:po(u.peso_estimado||0)})]})]})]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs(Bt,{variant:"outline",className:`text-[10px] font-semibold px-2 py-0.5 ${h.color}`,children:[a.jsx(Tg,{className:"h-3 w-3 mr-1"}),h.text]})})]}),h.urgent&&h.text!=="Expirado"&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex items-center gap-2 mt-2 pt-2 border-t border-destructive/20",children:[a.jsx(Pg,{className:"h-3 w-3 text-destructive flex-shrink-0"}),a.jsx("span",{className:"text-[10px] text-destructive",children:"Entregue em breve para no perder os pontos!"})]})]})]},u.id)})}),r.length>3&&a.jsxs("p",{className:"text-[11px] text-center text-muted-foreground",children:["+",r.length-3," ",r.length-3===1?"entrega":"entregas"," nas ltimas 24h"]}),a.jsxs(Oe,{variant:"ghost",size:"sm",className:"w-full h-9 text-xs text-muted-foreground hover:text-foreground",onClick:()=>e("/delivery-history"),children:["Ver histrico completo",a.jsx(_f,{className:"h-3.5 w-3.5 ml-1"})]})]})};function ONe({children:t,content:e,side:r="bottom",delayDuration:n=300,className:i,asChild:s=!0}){const[o,l]=C.useState(!1),c=C.useRef(null),u=C.useRef(!1),d=C.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null)},[]),h=C.useCallback(m=>{u.current=!0,d(),c.current=setTimeout(()=>{u.current&&l(!0)},500)},[d]),f=C.useCallback(()=>{u.current=!1,d()},[d]);return a.jsx(Dp,{delayDuration:n,children:a.jsxs(Bu,{open:o,onOpenChange:l,children:[a.jsx($u,{asChild:s,onMouseEnter:()=>l(!0),onTouchStart:h,onTouchEnd:f,children:t}),a.jsx(Gc,{side:r,className:i,onPointerDownOutside:()=>l(!1),children:e})]})})}function fT({icon:t,label:e,onClick:r,iconColor:n="text-primary",bgColor:i="bg-primary/10",className:s,tourClass:o,tooltipContent:l}){const c=a.jsxs(Ke.button,{onClick:r,className:Ut("flex flex-col items-center gap-1.5 group",o,s),whileTap:{scale:.92},whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:17},children:[a.jsx(Ke.div,{className:Ut("w-14 h-14 rounded-full flex items-center justify-center transition-all duration-300","shadow-sm group-hover:shadow-md",i),whileHover:{boxShadow:"0 8px 25px -5px rgba(34, 197, 94, 0.3)"},children:a.jsx(t,{className:Ut("h-6 w-6",n)})}),a.jsx("span",{className:"text-[11px] font-medium text-muted-foreground group-hover:text-foreground transition-colors",children:e})]});return l?a.jsx(ONe,{content:l,side:"bottom",className:"max-w-[200px] text-center bg-popover border border-border shadow-lg",delayDuration:300,children:c}):c}const $_t={missoes:{atual:0,metaSemanal:3,metaMensal:10,progressoSemanal:0,progressoMensal:0},notas:{atual:0,metaSemanal:1,metaMensal:4,progressoSemanal:0,progressoMensal:0},entregas:{atual:0,metaSemanal:1,metaMensal:4,progressoSemanal:0,progressoMensal:0},indicacoes:{atual:0,metaSemanal:1,metaMensal:3,progressoSemanal:0,progressoMensal:0},pontosMes:0,nivel:"Iniciante",proximoNivel:"Protetor Ciclik",pontosParaProximoNivel:500,progressoNivel:0,diasRestantesSemana:7,diasRestantesMes:30,mensagemIncentivo:"Bem-vindo! Vamos comear sua jornada sustentvel! ",expressaoAssistente:"feliz",metaEmRisco:null,metaProxima:null};function INe(){const{user:t,profile:e}=Si(),{pontos:r}=gY(),[n,i]=C.useState($_t),[s,o]=C.useState(!0),l=h=>{switch(h){case"Iniciante":return"basico";case"Ativo":return"intermediario";case"Guardiao Verde":return"avancado";default:return"basico"}},c=()=>{const h=new Date,f=h.getDay(),m=f===0?0:7-f,g=new Date(h.getFullYear(),h.getMonth()+1,0).getDate()-h.getDate();return{diasRestantesSemana:m,diasRestantesMes:g}},u=(h,f,m)=>{const x=[{nome:"misses",dados:h.missoes,emoji:""},{nome:"notas fiscais",dados:h.notas,emoji:""},{nome:"entregas",dados:h.entregas,emoji:""},{nome:"indicaes",dados:h.indicacoes,emoji:""}],g=x.filter(S=>S.dados&&S.dados.progressoSemanal>=100);if(x.filter(S=>S.dados&&S.dados.progressoMensal>=100),g.length===4)return{mensagem:" Incrvel! Voc bateu TODAS as metas da semana! Continue assim!",expressao:"celebrando",metaEmRisco:null,metaProxima:null};const y=x.find(S=>S.dados&&S.dados.progressoSemanal>=80&&S.dados.progressoSemanal<100);if(y){const S=y.dados.metaSemanal-y.dados.atual;return{mensagem:`${y.emoji} Falta s ${S} ${y.nome} para bater sua meta semanal! Vamos l? `,expressao:"animado",metaEmRisco:null,metaProxima:y.nome}}if(f<=2){const S=x.find(E=>E.dados&&E.dados.progressoSemanal<50);if(S)return{mensagem:` O final da semana est chegando! Complete mais ${S.nome} para garantir sua meta. `,expressao:"preocupado",metaEmRisco:S.nome,metaProxima:null}}if(h.pontosParaProximoNivel&&h.pontosParaProximoNivel<=100)return{mensagem:` Voc est a apenas ${h.pontosParaProximoNivel} pontos de subir para ${h.proximoNivel}!`,expressao:"animado",metaEmRisco:null,metaProxima:null};const w=x.filter(S=>S.dados&&S.dados.progressoSemanal<100).sort((S,E)=>{var j,T;return(((j=S.dados)==null?void 0:j.progressoSemanal)||0)-(((T=E.dados)==null?void 0:T.progressoSemanal)||0)})[0];if(w&&w.dados){const S={misses:"Que tal aprender algo novo com uma aula educacional?","notas fiscais":"Escaneie suas notas fiscais para catalogar embalagens!",entregas:"Separe seus reciclveis e agende uma entrega!",indicaes:"Convide amigos para o Ciclik e ganhe pontos extras!"};return{mensagem:`${w.emoji} ${S[w.nome]}`,expressao:"feliz",metaEmRisco:null,metaProxima:null}}return{mensagem:"Continue sua jornada sustentvel! Cada ao faz a diferena ",expressao:"feliz",metaEmRisco:null,metaProxima:null}},d=C.useCallback(async()=>{if(!t){o(!1);return}try{o(!0);const h=l((e==null?void 0:e.nivel)||"Iniciante"),{data:f}=await Ee.from("configuracoes_sistema").select("chave, valor").or(`chave.like.meta_semanal_%_${h},chave.like.meta_mensal_%_${h}`),m={missoes_semanal:3,missoes_mensal:10,notas_semanal:1,notas_mensal:4,entregas_semanal:1,entregas_mensal:4,indicacoes_semanal:1,indicacoes_mensal:3};f==null||f.forEach(ue=>{ue.chave.includes("missoes")&&ue.chave.includes("semanal")&&(m.missoes_semanal=parseInt(ue.valor)),ue.chave.includes("missoes")&&ue.chave.includes("mensal")&&(m.missoes_mensal=parseInt(ue.valor)),ue.chave.includes("notas")&&ue.chave.includes("semanal")&&(m.notas_semanal=parseInt(ue.valor)),ue.chave.includes("notas")&&ue.chave.includes("mensal")&&(m.notas_mensal=parseInt(ue.valor)),ue.chave.includes("entregas")&&ue.chave.includes("semanal")&&(m.entregas_semanal=parseInt(ue.valor)),ue.chave.includes("entregas")&&ue.chave.includes("mensal")&&(m.entregas_mensal=parseInt(ue.valor)),ue.chave.includes("indicacoes")&&ue.chave.includes("semanal")&&(m.indicacoes_semanal=parseInt(ue.valor)),ue.chave.includes("indicacoes")&&ue.chave.includes("mensal")&&(m.indicacoes_mensal=parseInt(ue.valor))});const x=new Date,g=new Date(x);g.setDate(x.getDate()-x.getDay()),g.setHours(0,0,0,0);const y=new Date(x.getFullYear(),x.getMonth(),1),[w,S,E,j,T,O,I,M]=await Promise.all([Ee.from("missoes_usuarios").select("id",{count:"exact"}).eq("id_usuario",t.id).gte("data_conclusao",g.toISOString()),Ee.from("missoes_usuarios").select("id",{count:"exact"}).eq("id_usuario",t.id).gte("data_conclusao",y.toISOString()),Ee.from("notas_fiscais").select("id",{count:"exact"}).eq("id_usuario",t.id).eq("status_validacao","validada").gte("data_envio",g.toISOString()),Ee.from("notas_fiscais").select("id",{count:"exact"}).eq("id_usuario",t.id).eq("status_validacao","validada").gte("data_envio",y.toISOString()),Ee.from("entregas_reciclaveis").select("id",{count:"exact"}).eq("id_usuario",t.id).eq("status","validada").gte("data_validacao",g.toISOString()),Ee.from("entregas_reciclaveis").select("id",{count:"exact"}).eq("id_usuario",t.id).eq("status","validada").gte("data_validacao",y.toISOString()),Ee.from("indicacoes").select("id",{count:"exact"}).eq("id_indicador",t.id).gte("data_indicacao",g.toISOString()),Ee.from("indicacoes").select("id",{count:"exact"}).eq("id_indicador",t.id).gte("data_indicacao",y.toISOString())]),D=(ue,je)=>Math.min(ue/je*100,100),z=w.count||0,F=S.count||0,q=E.count||0,Q=j.count||0,re=T.count||0,Z=O.count||0,se=I.count||0,K=M.count||0,X={missoes:{atual:F,metaSemanal:m.missoes_semanal,metaMensal:m.missoes_mensal,progressoSemanal:D(z,m.missoes_semanal),progressoMensal:D(F,m.missoes_mensal)},notas:{atual:Q,metaSemanal:m.notas_semanal,metaMensal:m.notas_mensal,progressoSemanal:D(q,m.notas_semanal),progressoMensal:D(Q,m.notas_mensal)},entregas:{atual:Z,metaSemanal:m.entregas_semanal,metaMensal:m.entregas_mensal,progressoSemanal:D(re,m.entregas_semanal),progressoMensal:D(Z,m.entregas_mensal)},indicacoes:{atual:K,metaSemanal:m.indicacoes_semanal,metaMensal:m.indicacoes_mensal,progressoSemanal:D(se,m.indicacoes_semanal),progressoMensal:D(K,m.indicacoes_mensal)}},Y=(e==null?void 0:e.nivel)||"Iniciante";let oe="Protetor Ciclik",xe=501-r,H=r/500*100;r>500&&r<=1e3?(oe="Guardio Ciclik",xe=1001-r,H=(r-500)/500*100):r>1e3&&(oe="Nvel Mximo",xe=0,H=100);const{diasRestantesSemana:J,diasRestantesMes:ie}=c(),{mensagem:ce,expressao:me,metaEmRisco:he,metaProxima:_e}=u({...X,pontosParaProximoNivel:xe,proximoNivel:oe},J,ie);i({...X,pontosMes:r,nivel:Y,proximoNivel:oe,pontosParaProximoNivel:Math.max(0,xe),progressoNivel:Math.min(H,100),diasRestantesSemana:J,diasRestantesMes:ie,mensagemIncentivo:ce,expressaoAssistente:me,metaEmRisco:he,metaProxima:_e})}catch(h){console.error("Erro ao buscar progresso de gamificao:",h)}finally{o(!1)}},[t,e,r]);return C.useEffect(()=>{d()},[d]),{...n,loading:s,refetch:d}}const U_t={feliz:"",animado:"",preocupado:"",celebrando:""},cD=[{emoji:"",text:"Que tal aprender algo novo com uma aula educacional?",cta:"Ver Aulas",route:"/missions",color:"amber"},{emoji:"",text:"Escaneie suas notas fiscais e ajude a catalogar embalagens reciclveis!",cta:"Escanear Nota",route:"/upload-receipt",color:"blue"},{emoji:"",text:"Separe seus reciclveis e entregue em uma cooperativa parceira!",cta:"Entregar Agora",route:"/select-materials",color:"green"},{emoji:"",text:"Indique amigos para o Ciclik! Vocs dois ganham pontos!",cta:"Convidar Amigos",route:"/profile",color:"purple"},{emoji:"",text:"Acompanhe suas metas semanais e suba de nvel mais rpido!",cta:"Ver Metas",route:"/goals",color:"primary"},{emoji:"",text:"Troque seus pontos por cupons de desconto em lojas parceiras!",cta:"Ver Cupons",route:"/redeem-coupons",color:"pink"},{emoji:"",text:"Cada kg de material reciclado evita emisso de CO na atmosfera.",cta:"Meu Impacto",route:"/delivery-history",color:"green"},{emoji:"",text:"Quanto mais alto seu nvel, mais benefcios voc desbloqueia!",cta:"Ver Progresso",route:"/goals",color:"amber"}],z_t=t=>{const e={amber:"bg-amber-500 hover:bg-amber-600 text-white",blue:"bg-blue-500 hover:bg-blue-600 text-white",green:"bg-green-600 hover:bg-green-700 text-white",purple:"bg-purple-500 hover:bg-purple-600 text-white",pink:"bg-pink-500 hover:bg-pink-600 text-white",primary:"bg-primary hover:bg-primary/90 text-primary-foreground"};return e[t]||e.primary};function V_t({compact:t=!1,onClose:e}){const r=nn(),n=INe(),[i,s]=C.useState(!t),[o,l]=C.useState(()=>new Date().getMonth()%cD.length);C.useEffect(()=>{const d=setInterval(()=>{l(h=>(h+1)%cD.length)},8e3);return()=>clearInterval(d)},[]);const c=cD[o];if(n.loading)return a.jsx(it,{className:"rounded-2xl border-0 shadow-lg bg-gradient-to-br from-primary/5 via-card to-success/5",children:a.jsx(ht,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-muted animate-pulse"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-1/2"})]})]})})});const u=[n.missoes.progressoSemanal>=100,n.notas.progressoSemanal>=100,n.entregas.progressoSemanal>=100,n.indicacoes.progressoSemanal>=100].filter(Boolean).length;return t&&!i?a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"fixed bottom-24 right-4 z-50",children:a.jsxs(Ke.button,{onClick:()=>s(!0),className:"relative w-14 h-14 rounded-full bg-gradient-to-br from-primary to-success shadow-lg flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.95},animate:{boxShadow:n.expressaoAssistente==="animado"?["0 0 0 0 rgba(34, 197, 94, 0.4)","0 0 0 20px rgba(34, 197, 94, 0)"]:void 0},transition:{boxShadow:{duration:1.5,repeat:1/0}},children:[a.jsx("span",{className:"text-2xl",children:U_t[n.expressaoAssistente]}),u>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-success text-white text-xs rounded-full flex items-center justify-center font-bold",children:u})]})}):a.jsx(Ke.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:t?"fixed bottom-24 right-4 left-4 z-50 max-w-sm ml-auto":"",children:a.jsx(it,{className:"rounded-2xl border-0 shadow-lg bg-gradient-to-br from-primary/5 via-card to-success/5 overflow-hidden",children:a.jsxs(ht,{className:"p-0",children:[a.jsx("div",{className:"p-4 pb-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ke.div,{initial:{scale:.5,opacity:0,rotate:-10},animate:{scale:1,opacity:1,rotate:0},transition:{type:"spring",stiffness:300},className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-success flex items-center justify-center shadow-md",children:a.jsx("span",{className:"text-2xl",children:c.emoji})})},o),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-primary",children:"Dica do Ciclo"}),a.jsx("div",{className:"flex gap-1",children:cD.map((d,h)=>a.jsx(Ke.div,{className:`w-1.5 h-1.5 rounded-full cursor-pointer ${h===o?"bg-primary":"bg-muted"}`,animate:h===o?{scale:[1,1.3,1]}:{},transition:{duration:.5},onClick:()=>l(h)},h))})]}),a.jsx(Cf,{mode:"wait",children:a.jsx(Ke.p,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-sm text-foreground leading-tight mb-2",children:c.text},o)}),a.jsx(Ke.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},children:a.jsxs(Oe,{size:"sm",className:`h-8 px-4 rounded-full text-xs font-medium shadow-sm ${z_t(c.color)}`,onClick:()=>r(c.route),children:[c.cta,a.jsx(_f,{className:"h-3.5 w-3.5 ml-1"})]})},`cta-${o}`)]}),t&&e&&a.jsx(Oe,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:e,children:a.jsx(Xa,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"px-4 pb-3",children:a.jsxs("div",{className:"relative",children:[a.jsx(fc,{value:n.progressoNivel,className:"h-2"}),n.progressoNivel>=80&&a.jsx(Ke.div,{className:"absolute right-0 top-1/2 -translate-y-1/2",animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0},children:a.jsx(KO,{className:"h-4 w-4 text-warning"})})]})}),a.jsx("div",{className:"px-4 pb-3",children:a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{label:"Misses",value:n.missoes.progressoSemanal,icon:"",route:"/missions"},{label:"Notas",value:n.notas.progressoSemanal,icon:"",route:"/upload-receipt"},{label:"Entregas",value:n.entregas.progressoSemanal,icon:"",route:"/select-materials"},{label:"Convites",value:n.indicacoes.progressoSemanal,icon:"",route:"/profile"}].map(d=>a.jsxs(Ke.div,{className:"relative cursor-pointer",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(d.route),children:[a.jsxs("div",{className:`text-center p-2 rounded-xl transition-colors ${d.value>=100?"bg-success/10":"bg-muted/50 hover:bg-muted"}`,children:[a.jsx("span",{className:"text-lg",children:d.icon}),a.jsx("div",{className:"mt-1",children:a.jsx(fc,{value:d.value,className:"h-1"})}),a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[Math.round(d.value),"%"]})]}),d.value>=100&&a.jsx(Ke.div,{className:"absolute -top-1 -right-1",initial:{scale:0},animate:{scale:1},children:a.jsx(Bt,{className:"h-4 w-4 p-0 bg-success flex items-center justify-center",children:a.jsx("span",{className:"text-[8px]",children:""})})})]},d.label))})}),a.jsx("div",{className:"px-4 pb-4",children:a.jsxs(Ke.button,{onClick:()=>r("/goals"),className:"relative w-full h-14 rounded-2xl overflow-hidden group shadow-lg",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:300},children:[a.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-r from-primary via-success via-50% to-primary bg-[length:200%_100%]",animate:{backgroundPosition:["0% 0%","100% 0%","0% 0%"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("div",{className:"absolute inset-0 bg-white/20 blur-xl"})}),a.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/50 to-transparent"}),a.jsxs("div",{className:"relative flex items-center justify-between px-5 h-full",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Ke.div,{className:"relative w-9 h-9 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center border border-white/20",animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0},children:[a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},children:a.jsx(Dm,{className:"h-4.5 w-4.5 text-white"})}),a.jsx(Ke.div,{className:"absolute -top-1 -right-1",animate:{scale:[.8,1.2,.8],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:a.jsx($b,{className:"h-3 w-3 text-yellow-300"})})]}),a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsx("span",{className:"text-sm font-bold text-white tracking-wide",children:"Ver todas as metas"}),a.jsx("span",{className:"text-[10px] text-white/70 font-medium",children:"Acompanhe seu progresso"})]})]}),a.jsx(Ke.div,{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",animate:{x:[0,4,0]},transition:{duration:1.2,repeat:1/0,ease:"easeInOut"},children:a.jsx(_f,{className:"h-5 w-5 text-white"})})]}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/30 to-transparent"})]})}),a.jsxs("div",{className:"bg-muted/30 px-4 py-2 flex items-center justify-between text-[10px] text-muted-foreground",children:[a.jsxs("span",{children:[" ",n.diasRestantesSemana," dias restantes na semana"]}),a.jsxs("span",{children:[" ",n.diasRestantesMes," dias no ms"]})]})]})})})}const kQ=({tourKey:t,autoStart:e=!0})=>{const[r,n]=C.useState(!1),i=`tour_completed_${t}`;C.useEffect(()=>{if(e&&!localStorage.getItem(i)){const u=setTimeout(()=>{n(!0)},1e3);return()=>clearTimeout(u)}},[e,i]);const s=C.useCallback(()=>{n(!0)},[]),o=C.useCallback(()=>{localStorage.removeItem(i),n(!0)},[i]),l=C.useCallback(()=>{localStorage.setItem(i,"true"),n(!1)},[i]);return{run:r,startTour:s,resetTour:o,completeTour:l,setRun:n}};var uB="Collapsible",[q_t,RNe]=qo(uB),[H_t,OQ]=q_t(uB),DNe=C.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:s,onOpenChange:o,...l}=t,[c,u]=Xu({prop:n,defaultProp:i??!1,onChange:o,caller:uB});return a.jsx(H_t,{scope:r,disabled:s,contentId:bl(),open:c,onOpenToggle:C.useCallback(()=>u(d=>!d),[u]),children:a.jsx(Dr.div,{"data-state":MQ(c),"data-disabled":s?"":void 0,...l,ref:e})})});DNe.displayName=uB;var MNe="CollapsibleTrigger",IQ=C.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,i=OQ(MNe,r);return a.jsx(Dr.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":MQ(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:e,onClick:wr(t.onClick,i.onOpenToggle)})});IQ.displayName=MNe;var RQ="CollapsibleContent",DQ=C.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=OQ(RQ,t.__scopeCollapsible);return a.jsx(El,{present:r||i.open,children:({present:s})=>a.jsx(W_t,{...n,ref:e,present:s})})});DQ.displayName=RQ;var W_t=C.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:i,...s}=t,o=OQ(RQ,r),[l,c]=C.useState(n),u=C.useRef(null),d=An(e,u),h=C.useRef(0),f=h.current,m=C.useRef(0),x=m.current,g=o.open||l,y=C.useRef(g),w=C.useRef(void 0);return C.useEffect(()=>{const S=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(S)},[]),Vo(()=>{const S=u.current;if(S){w.current=w.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();h.current=E.height,m.current=E.width,y.current||(S.style.transitionDuration=w.current.transitionDuration,S.style.animationName=w.current.animationName),c(n)}},[o.open,n]),a.jsx(Dr.div,{"data-state":MQ(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:g&&i})});function MQ(t){return t?"open":"closed"}var LNe=DNe,G_t=IQ,K_t=DQ;const w6=LNe,_6=IQ,N6=DQ,uD={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},X_t={animate:{transition:{staggerChildren:.05,delayChildren:.1}}},Y_t={initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0}};function Z_t(){const{profile:t,signOut:e,user:r}=Si(),n=nn(),i=Bg(),{pontos:s,loading:o,refetch:l}=gY(),[c,u]=C.useState(0),[d,h]=C.useState(0),[f,m]=C.useState(!1),[x,g]=C.useState(!1),[y,w]=C.useState(!1),{run:S,completeTour:E,startTour:j}=kQ({tourKey:"user_dashboard",autoStart:!0}),T=[{target:".tour-profile",content:"Bem-vindo ao Ciclik! Clique aqui para acessar seu perfil.",disableBeacon:!0},{target:".tour-score-card",content:"Acompanhe seus Pontos Verdes e progresso mensal!"},{target:".tour-quick-actions",content:"Acesse rapidamente todas as funcionalidades do app."},{target:".tour-missions",content:"Complete aulas educativas para ganhar pontos verdes!"},{target:".tour-deliver",content:"Entregue seus reciclveis e ganhe pontos!"},{target:".tour-coupons",content:"Troque seus pontos por cupons de desconto."}],O=()=>{E()};C.useEffect(()=>{r&&M()},[r]),C.useEffect(()=>{I()},[s]);const I=()=>{const Z=s,se=(t==null?void 0:t.nivel)||"Iniciante";let K=0;se==="Iniciante"||Z<=500?K=Z/500*100:se==="Ativo"||Z>500&&Z<=1e3?K=(Z-500)/500*100:K=100,u(Math.min(K,100))},M=async()=>{if(!r)return;const{data:Z}=await Ee.from("entregas_reciclaveis").select("peso_validado").eq("id_usuario",r.id).eq("status","validada");if(Z){const se=Z.reduce((K,X)=>K+(X.peso_validado||0),0);h(se)}},D=Z=>Z<=500?{proximoNivel:"Protetor Ciclik",pontosRestantes:501-Z,metaAtual:500}:Z<=1e3?{proximoNivel:"Guardio Ciclik",pontosRestantes:1001-Z,metaAtual:1e3}:{proximoNivel:"Nvel Mximo",pontosRestantes:0,metaAtual:1001},z=Z=>{switch(Z){case"Iniciante":return"Embaixador Ciclik";case"Ativo":return"Protetor Ciclik";case"Guardiao Verde":return"Guardio Ciclik";default:return Z}},F=Z=>{switch(Z){case"Iniciante":return"bg-muted text-muted-foreground";case"Ativo":return"bg-success/20 text-success";case"Guardiao Verde":return"bg-primary/20 text-primary";default:return"bg-muted text-muted-foreground"}},q=({userId:Z,userCity:se,userState:K})=>{const[X,Y]=C.useState(!1),[oe,xe]=C.useState(!1);C.useEffect(()=>{(async()=>{if(!Z)return;const{data:ie}=await Ee.from("interesses_funcionalidades").select("id").eq("id_usuario",Z).eq("funcionalidade","nota_fiscal").maybeSingle();xe(!!ie)})()},[Z]);const H=async J=>{if(J.preventDefault(),J.stopPropagation(),!(X||oe)){Y(!0);try{const{error:ie}=await Ee.from("interesses_funcionalidades").insert({id_usuario:Z||null,funcionalidade:"nota_fiscal",estado:K||null,cidade:se||null});if(ie)throw ie;xe(!0),cr.success("Interesse registrado! Obrigado pelo feedback.")}catch(ie){console.error("Erro ao registrar interesse:",ie),cr.error("Erro ao registrar interesse")}finally{Y(!1)}}};return a.jsxs("div",{className:"text-xs space-y-1.5",children:[a.jsx("p",{className:"font-medium",children:" Disponvel apenas na Bahia"}),oe?a.jsx("p",{className:"text-primary",children:" Interesse registrado!"}):a.jsx("button",{onClick:H,disabled:X,className:"text-primary underline hover:text-primary/80 transition-colors",children:X?"Registrando...":"Clique aqui se deseja no seu estado"})]})},Q=({userId:Z,userCity:se,userState:K})=>{const[X,Y]=C.useState(!1),[oe,xe]=C.useState(!1);C.useEffect(()=>{(async()=>{if(!Z)return;const{data:ie}=await Ee.from("interesses_funcionalidades").select("id").eq("id_usuario",Z).eq("funcionalidade","entrega_reciclaveis").maybeSingle();xe(!!ie)})()},[Z]);const H=async J=>{if(J.preventDefault(),J.stopPropagation(),!(X||oe)){Y(!0);try{const{error:ie}=await Ee.from("interesses_funcionalidades").insert({id_usuario:Z||null,funcionalidade:"entrega_reciclaveis",estado:K||null,cidade:se||null});if(ie)throw ie;xe(!0),cr.success("Interesse registrado! Obrigado pelo feedback.")}catch(ie){console.error("Erro ao registrar interesse:",ie),cr.error("Erro ao registrar interesse")}finally{Y(!1)}}};return a.jsxs("div",{className:"text-xs space-y-1.5",children:[a.jsx("p",{className:"font-medium",children:" Disponvel apenas em Salvador/BA"}),oe?a.jsx("p",{className:"text-primary",children:" Interesse registrado!"}):a.jsx("button",{onClick:H,disabled:X,className:"text-primary underline hover:text-primary/80 transition-colors",children:X?"Registrando...":"Clique aqui se deseja na sua cidade"})]})};if(!t)return null;const re=[{icon:T0e,label:"Incio",path:"/user",active:i.pathname==="/user"},{icon:ah,label:"Educao",path:"/missions",active:i.pathname==="/missions"},{icon:Cs,label:"Entregar",path:"/select-materials",active:i.pathname==="/select-materials"},{icon:Hu,label:"Cupons",path:"/redeem-coupons",active:i.pathname==="/redeem-coupons"}];return a.jsxs($v,{children:[a.jsx(xZ,{steps:T,run:S,onComplete:O,onSkip:O}),a.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[a.jsx("div",{className:"bg-white border-b border-border sticky top-0 z-40 shadow-sm",children:a.jsx("div",{className:"mx-auto max-w-6xl px-4 py-3 md:py-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 tour-profile",children:[a.jsxs("div",{className:"flex items-start gap-3 md:gap-4 flex-1 min-w-0",children:[a.jsx("img",{src:Bp("ciclik-logo-full.png"),alt:"Ciclik - Recicle e Ganhe",className:"h-12 md:h-16 w-auto object-contain flex-shrink-0 cursor-pointer",onClick:()=>n("/user")}),a.jsxs("div",{className:"flex flex-col justify-center cursor-pointer",onClick:()=>n("/profile"),children:[a.jsxs("h1",{className:"text-base md:text-xl font-bold text-foreground whitespace-nowrap",children:["Ol, ",t.nome.split(" ")[0],"!"]}),a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground whitespace-nowrap",children:"Bem-vindo ao Ciclik"})]})]}),a.jsxs(Dye,{children:[a.jsx(Mye,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9 md:h-10 md:w-10 flex-shrink-0",children:a.jsx(LX,{className:"h-5 w-5"})})}),a.jsxs(aZ,{side:"right",className:"w-[280px]",children:[a.jsx(oZ,{className:"text-left",children:a.jsx(lZ,{className:"text-foreground",children:"Menu"})}),a.jsxs("div",{className:"mt-6 space-y-1",children:[a.jsxs("div",{className:"px-3 py-2 rounded-lg bg-muted/50",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:t.nome}),a.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.email})]}),a.jsx(r0,{className:"my-3"}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11",onClick:()=>n("/notifications"),children:[a.jsx(DX,{className:"h-5 w-5"}),a.jsx("span",{children:"Notificaes"})]}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11",onClick:()=>n("/profile"),children:[a.jsx(_v,{className:"h-5 w-5"}),a.jsx("span",{children:"Meu Perfil"})]}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11",onClick:j,children:[a.jsx(Nf,{className:"h-5 w-5"}),a.jsx("span",{children:"Ver Tour Guiado"})]}),a.jsx(r0,{className:"my-3"}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:e,children:[a.jsx(wv,{className:"h-5 w-5"}),a.jsx("span",{children:"Sair"})]})]})]})]})]})})}),a.jsxs("div",{className:"mx-auto max-w-lg px-4 pt-4 space-y-4",children:[a.jsx(Ke.div,{variants:uD,initial:"initial",animate:"animate",transition:{duration:.4},children:a.jsx(it,{className:"tour-score-card overflow-hidden border-0 shadow-lg rounded-3xl bg-gradient-to-br from-card via-card to-primary/5",children:a.jsxs(ht,{className:"p-5",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(ps,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pontos Verdes"})]}),a.jsx(Ke.p,{className:"text-4xl font-bold text-foreground",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},children:s.toLocaleString("pt-BR")})]}),a.jsx(Bt,{className:`${F(t.nivel)} text-xs px-3 py-1 rounded-full font-medium`,children:z(t.nivel)})]}),a.jsxs(Ke.button,{onClick:()=>n("/points-statement"),className:"flex items-center gap-1 text-xs text-primary font-medium mb-4",whileTap:{scale:.95},children:["Ver extrato completo",a.jsx(_f,{className:"h-3.5 w-3.5"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progresso mensal"}),a.jsxs("span",{className:"font-medium text-primary",children:[s," pts"]})]}),a.jsx(fc,{value:c,className:"h-2 rounded-full"}),s<=1e3&&a.jsxs("p",{className:"text-[10px] text-muted-foreground text-right",children:["Prximo: ",D(s).pontosRestantes," pontos para atingir o prximo nvel"]})]}),a.jsx(Ke.div,{className:"grid grid-cols-3 gap-3 mt-4 pt-4 border-t border-border/50 tour-stats",variants:X_t,initial:"initial",animate:"animate",children:[{value:t.missoes_concluidas,label:"Aulas",icon:ah},{value:t.cupons_resgatados,label:"Cupons",icon:Hu},{value:`${As(d,2)} kg`,label:"Reciclados",icon:Cs}].map((Z,se)=>a.jsxs(Ke.div,{className:"text-center",variants:Y_t,transition:{delay:se*.1},children:[a.jsx(Z.icon,{className:"h-4 w-4 mx-auto mb-1 text-primary/70"}),a.jsx("p",{className:"text-lg font-bold text-foreground",children:Z.value}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:Z.label})]},Z.label))})]})})}),a.jsx(Ke.div,{className:"tour-quick-actions",variants:uD,initial:"initial",animate:"animate",transition:{delay:.1},children:a.jsxs("div",{className:"flex justify-between items-start px-2",children:[a.jsx(fT,{icon:ah,label:"Educao",onClick:()=>n("/missions"),tourClass:"tour-missions",bgColor:"bg-amber-500/10",iconColor:"text-amber-500",tooltipContent:a.jsx("p",{className:"text-xs font-medium",children:" Disponvel em todo o Brasil"})}),a.jsx(fT,{icon:Ql,label:"Nota Fiscal",onClick:()=>n("/upload-receipt"),bgColor:"bg-blue-500/10",iconColor:"text-blue-500",tooltipContent:a.jsx(q,{userId:r==null?void 0:r.id,userCity:t==null?void 0:t.cidade,userState:t==null?void 0:t.uf})}),a.jsx(fT,{icon:Cs,label:"Entregar",onClick:()=>n("/select-materials"),tourClass:"tour-deliver",bgColor:"bg-primary/10",iconColor:"text-primary",tooltipContent:a.jsx(Q,{userId:r==null?void 0:r.id,userCity:t==null?void 0:t.cidade,userState:t==null?void 0:t.uf})}),a.jsx(fT,{icon:Hu,label:"Cupons",onClick:()=>n("/redeem-coupons"),tourClass:"tour-coupons",bgColor:"bg-pink-500/10",iconColor:"text-pink-500",tooltipContent:a.jsx("p",{className:"text-xs font-medium",children:" Disponvel em todo o Brasil"})}),a.jsx(fT,{icon:Hs,label:"Histrico",onClick:()=>n("/delivery-history"),bgColor:"bg-purple-500/10",iconColor:"text-purple-500",tooltipContent:a.jsx("p",{className:"text-xs font-medium",children:" Disponvel em todo o Brasil"})})]})}),a.jsx(Ke.div,{variants:uD,initial:"initial",animate:"animate",transition:{delay:.15},children:a.jsx(V_t,{})}),a.jsxs(Ke.div,{className:"space-y-3",variants:uD,initial:"initial",animate:"animate",transition:{delay:.2},children:[a.jsx(w6,{open:f,onOpenChange:m,children:a.jsxs(it,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[a.jsx(_6,{className:"w-full",children:a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(Cs,{className:"h-4 w-4 text-primary"})}),a.jsx("span",{className:"font-medium text-sm",children:"Entregas Pendentes"})]}),a.jsx(Ke.div,{animate:{rotate:f?90:0},transition:{duration:.2},children:a.jsx(_f,{className:"h-4 w-4 text-muted-foreground"})})]})}),a.jsx(N6,{children:a.jsx(Cf,{children:f&&a.jsx(Ke.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"px-4 pb-4",children:a.jsx(B_t,{})})})})]})}),a.jsx(w6,{open:x,onOpenChange:g,children:a.jsxs(it,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[a.jsx(_6,{className:"w-full",children:a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/10 flex items-center justify-center",children:a.jsx(Ql,{className:"h-4 w-4 text-blue-500"})}),a.jsx("span",{className:"font-medium text-sm",children:"Meus Materiais"})]}),a.jsx(Ke.div,{animate:{rotate:x?90:0},transition:{duration:.2},children:a.jsx(_f,{className:"h-4 w-4 text-muted-foreground"})})]})}),a.jsx(N6,{children:a.jsx(Cf,{children:x&&a.jsx(Ke.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"px-4 pb-4",children:a.jsx(F_t,{userId:(r==null?void 0:r.id)||""})})})})]})}),a.jsx(w6,{open:y,onOpenChange:w,children:a.jsxs(it,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[a.jsx(_6,{className:"w-full",children:a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500/10 flex items-center justify-center",children:a.jsx(ps,{className:"h-4 w-4 text-emerald-500"})}),a.jsx("span",{className:"font-medium text-sm",children:"Impacto Ambiental"})]}),a.jsx(Ke.div,{animate:{rotate:y?90:0},transition:{duration:.2},children:a.jsx(_f,{className:"h-4 w-4 text-muted-foreground"})})]})}),a.jsx(N6,{children:a.jsx(Cf,{children:y&&a.jsx(Ke.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"px-4 pb-4",children:a.jsx(kYe,{})})})})]})})]})]}),a.jsx(Ke.div,{className:"fixed bottom-0 left-0 right-0 bg-card/95 backdrop-blur-lg border-t border-border/50 shadow-2xl z-50",initial:{y:100},animate:{y:0},transition:{delay:.3,type:"spring",stiffness:300,damping:30},children:a.jsx("div",{className:"flex justify-around items-center max-w-lg mx-auto py-2 px-4",children:re.map(Z=>a.jsxs(Ke.button,{onClick:()=>n(Z.path),className:`flex flex-col items-center gap-0.5 py-2 px-4 rounded-xl transition-colors ${Z.active?"text-primary":"text-muted-foreground"}`,whileTap:{scale:.9},children:[a.jsx(Ke.div,{animate:Z.active?{scale:[1,1.2,1]}:{},transition:{duration:.3},children:a.jsx(Z.icon,{className:`h-5 w-5 ${Z.active?"text-primary":""}`})}),a.jsx("span",{className:"text-[10px] font-medium",children:Z.label}),Z.active&&a.jsx(Ke.div,{layoutId:"activeIndicator",className:"absolute -bottom-0.5 w-1 h-1 rounded-full bg-primary",transition:{type:"spring",stiffness:500,damping:30}})]},Z.path))})})]})]})}function Ab({showBackButton:t=!1,backTo:e="/user",title:r,showUserActions:n=!0}){const i=nn(),{profile:s,signOut:o}=Si(),l=(s==null?void 0:s.nome.split(" ")[0])||"";return a.jsx("div",{className:"bg-card border-b border-border sticky top-0 z-40 shadow-sm",children:a.jsx("div",{className:"mx-auto max-w-6xl px-4 py-3 md:py-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-shrink-0",children:[t&&a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>i(e),className:"flex-shrink-0",children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsx("img",{src:Bp("ciclik-logo-full.png"),alt:"Ciclik - Recicle e Ganhe",className:"h-10 md:h-12 w-auto object-contain cursor-pointer",onClick:()=>i("/user")})]}),!r&&s&&a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-2 min-w-0",children:[a.jsxs("h1",{className:"text-sm md:text-lg font-bold text-foreground whitespace-nowrap",children:["Ol, ",l,"!"]}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-nowrap hidden md:block",children:"Bem-vindo ao Ciclik"})]}),r&&a.jsx("div",{className:"flex-1 flex items-center justify-center px-2 min-w-0",children:a.jsx("h1",{className:"text-sm md:text-lg font-bold text-foreground truncate",children:r})}),n&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Dye,{children:[a.jsx(Mye,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"icon",className:"flex-shrink-0",children:a.jsx(LX,{className:"h-5 w-5"})})}),a.jsxs(aZ,{side:"right",className:"w-[280px]",children:[a.jsx(oZ,{className:"text-left",children:a.jsx(lZ,{className:"text-foreground",children:"Menu"})}),a.jsxs("div",{className:"mt-6 space-y-1",children:[s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"px-3 py-2 rounded-lg bg-muted/50",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:s.nome}),a.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:s.email})]}),a.jsx(r0,{className:"my-3"})]}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11",onClick:()=>i("/notifications"),children:[a.jsx(DX,{className:"h-5 w-5"}),a.jsx("span",{children:"Notificaes"})]}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11",onClick:()=>i("/profile"),children:[a.jsx(_v,{className:"h-5 w-5"}),a.jsx("span",{children:"Meu Perfil"})]}),a.jsx(r0,{className:"my-3"}),a.jsxs(Oe,{variant:"ghost",className:"w-full justify-start gap-3 h-11 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:o,children:[a.jsx(wv,{className:"h-5 w-5"}),a.jsx("span",{children:"Sair"})]})]})]})]})})]})})})}const Q_t=t=>{switch(t){case"quiz":return a.jsx(Nf,{className:"h-5 w-5 text-primary"});case"estudo":return a.jsx(DM,{className:"h-5 w-5 text-primary"});default:return a.jsx(RM,{className:"h-5 w-5 text-primary"})}},J_t=t=>{switch(t){case"quiz":return"Quiz";case"estudo":return"Vdeo Educativo";default:return t}};function eNt(){const{user:t,profile:e,refreshProfile:r}=Si(),[n,i]=C.useState([]),[s,o]=C.useState(new Set),l=nn(),{toast:c}=Qi();C.useEffect(()=>{u(),d()},[t]);const u=async()=>{const{data:f}=await Ee.from("missoes").select("*").eq("status","ativa").order("ordem",{ascending:!0});f&&i(f)},d=async()=>{if(!t)return;const{data:f}=await Ee.from("missoes_usuarios").select("id_missao").eq("id_usuario",t.id);f&&o(new Set(f.map(m=>m.id_missao)))},h=f=>{if(s.has(f.id)){c({title:"Misso j completada",description:"Voc j completou esta misso!"});return}l(`/mission/content/${f.id}`)};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ab,{showBackButton:!0,backTo:"/user"}),a.jsxs("div",{className:"mx-auto max-w-6xl p-4 md:p-8 space-y-8",children:[a.jsxs(Ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Central de Educao"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Aprenda, jogue e ganhe pontos verdes"})]}),e&&a.jsx(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},children:a.jsx(it,{className:"bg-gradient-to-br from-primary/20 via-primary/10 to-accent/20 border-primary/20 shadow-lg",children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[a.jsx(qu,{className:"h-4 w-4"}),"Aulas Concludas"]}),a.jsx("p",{className:"text-4xl font-bold text-primary",children:e.missoes_concluidas}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length-s.size," aulas disponveis"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"}),a.jsx(_m,{className:"h-16 w-16 text-primary relative animate-pulse"})]})]})})})}),a.jsxs("div",{className:"space-y-4",children:[n.map(f=>{const m=s.has(f.id);return a.jsx(it,{className:`cursor-pointer transition-all hover:shadow-lg ${m?"opacity-60 bg-muted/50":"hover:scale-[1.02]"}`,onClick:()=>h(f),children:a.jsx(At,{children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("div",{className:`rounded-lg p-2 ${m?"bg-success/20":"bg-primary/10"}`,children:m?a.jsx(ta,{className:"h-5 w-5 text-success"}):Q_t(f.tipo)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[f.titulo,m&&a.jsx(Bt,{variant:"outline",className:"bg-success/10 text-success border-success",children:"Concluda"})]}),a.jsx(gr,{className:"mt-1",children:f.descricao}),a.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[a.jsx(Bt,{variant:"secondary",children:J_t(f.tipo)}),a.jsxs(Bt,{className:"bg-primary/10 text-primary hover:bg-primary/20",children:["+",f.pontos," pontos"]})]})]})]})})})},f.id)}),n.length===0&&a.jsx(it,{children:a.jsxs(ht,{className:"py-12 text-center",children:[a.jsx(_m,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma aula disponvel no momento"})]})})]})]})]})}function FNe(t){if(!t)return"";try{if(t.includes("/embed/"))return t;let e="";return t.includes("youtu.be/")?e=t.split("youtu.be/")[1].split("?")[0]:t.includes("watch?v=")?e=t.split("watch?v=")[1].split("&")[0]:t.includes("/v/")&&(e=t.split("/v/")[1].split("?")[0]),e?`https://www.youtube.com/embed/${e}`:t}catch(e){return console.error("Erro ao processar URL do YouTube:",e),t}}function tNt(){const{id:t}=o0(),{user:e,profile:r,refreshProfile:n}=Si(),[i,s]=C.useState(null),o=nn(),{toast:l}=Qi();C.useEffect(()=>{c()},[t]);const c=async()=>{const{data:d}=await Ee.from("missoes").select("*").eq("id",t).single();d&&s(d)},u=async()=>{if(!(!e||!i))try{const{error:d}=await Ee.from("missoes_usuarios").insert({id_usuario:e.id,id_missao:i.id});if(d)throw d;const{error:h}=await Ee.from("profiles").update({score_verde:((r==null?void 0:r.score_verde)||0)+i.pontos,missoes_concluidas:((r==null?void 0:r.missoes_concluidas)||0)+1}).eq("id",e.id);if(h)throw h;const{error:f}=await Ee.from("estoque_educacao").insert({id_usuario:e.id,id_missao:i.id,minutos_assistidos:i.duracao_minutos||10,modulo:i.titulo,data:new Date().toISOString(),status:"disponivel"});f&&console.error("Erro ao registrar educao no estoque CDV:",f),await n(),l({title:"Misso concluda!",description:`Voc ganhou ${i.pontos} pontos verdes!`}),o("/missions")}catch(d){l({title:"Erro",description:d.message||"No foi possvel concluir a misso",variant:"destructive"})}};return i?a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>o("/missions"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-3xl font-bold",children:i.titulo})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{children:"Assista ao vdeo"})}),a.jsxs(ht,{className:"space-y-6",children:[a.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:i.video_url?a.jsx("iframe",{src:FNe(i.video_url),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:i.titulo}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-muted-foreground",children:"Vdeo no disponvel"})})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:i.descricao}),a.jsxs(Oe,{onClick:u,className:"w-full",size:"lg",children:[a.jsx(ta,{className:"mr-2 h-5 w-5"}),"Concluir Misso (+",i.pontos," pontos)"]})]})]})]})]})}):null}var LQ="Radio",[rNt,BNe]=qo(LQ),[nNt,iNt]=rNt(LQ),$Ne=C.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:i=!1,required:s,disabled:o,value:l="on",onCheck:c,form:u,...d}=t,[h,f]=C.useState(null),m=An(e,y=>f(y)),x=C.useRef(!1),g=h?u||!!h.closest("form"):!0;return a.jsxs(nNt,{scope:r,checked:i,disabled:o,children:[a.jsx(Dr.button,{type:"button",role:"radio","aria-checked":i,"data-state":qNe(i),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:wr(t.onClick,y=>{i||c==null||c(),g&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),g&&a.jsx(VNe,{control:h,bubbles:!x.current,name:n,value:l,checked:i,required:s,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});$Ne.displayName=LQ;var UNe="RadioIndicator",zNe=C.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...i}=t,s=iNt(UNe,r);return a.jsx(El,{present:n||s.checked,children:a.jsx(Dr.span,{"data-state":qNe(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});zNe.displayName=UNe;var sNt="RadioBubbleInput",VNe=C.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...i},s)=>{const o=C.useRef(null),l=An(o,s),c=tI(r),u=YO(e);return C.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const x=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(x)}},[c,r,n]),a.jsx(Dr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});VNe.displayName=sNt;function qNe(t){return t?"checked":"unchecked"}var aNt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dB="RadioGroup",[oNt,o$t]=qo(dB,[GC,BNe]),HNe=GC(),WNe=BNe(),[lNt,cNt]=oNt(dB),GNe=C.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:i,value:s,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,m=HNe(r),x=Vb(u),[g,y]=Xu({prop:s,defaultProp:i??null,onChange:h,caller:dB});return a.jsx(lNt,{scope:r,name:n,required:o,disabled:l,value:g,onValueChange:y,children:a.jsx(dY,{asChild:!0,...m,orientation:c,dir:x,loop:d,children:a.jsx(Dr.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...f,ref:e})})})});GNe.displayName=dB;var KNe="RadioGroupItem",XNe=C.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...i}=t,s=cNt(KNe,r),o=s.disabled||n,l=HNe(r),c=WNe(r),u=C.useRef(null),d=An(e,u),h=s.value===i.value,f=C.useRef(!1);return C.useEffect(()=>{const m=g=>{aNt.includes(g.key)&&(f.current=!0)},x=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",x)}},[]),a.jsx(hY,{asChild:!0,...l,focusable:!o,active:h,children:a.jsx($Ne,{disabled:o,required:s.required,checked:h,...c,...i,name:s.name,ref:d,onCheck:()=>s.onValueChange(i.value),onKeyDown:wr(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:wr(i.onFocus,()=>{var m;f.current&&((m=u.current)==null||m.click())})})})});XNe.displayName=KNe;var uNt="RadioGroupIndicator",YNe=C.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,i=WNe(r);return a.jsx(zNe,{...i,...n,ref:e})});YNe.displayName=uNt;var ZNe=GNe,QNe=XNe,dNt=YNe;const FQ=C.forwardRef(({className:t,...e},r)=>a.jsx(ZNe,{className:Ut("grid gap-2",t),...e,ref:r}));FQ.displayName=ZNe.displayName;const BQ=C.forwardRef(({className:t,...e},r)=>a.jsx(QNe,{ref:r,className:Ut("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(dNt,{className:"flex items-center justify-center",children:a.jsx(E0e,{className:"h-2.5 w-2.5 fill-current text-current"})})}));BQ.displayName=QNe.displayName;function hNt(){const{id:t}=o0(),{user:e,profile:r,refreshProfile:n}=Si(),[i,s]=C.useState(null),[o,l]=C.useState(""),[c,u]=C.useState(!1),[d,h]=C.useState(!1),f=nn(),{toast:m}=Qi();C.useEffect(()=>{x()},[t]);const x=async()=>{const{data:y}=await Ee.from("missoes").select("*").eq("id",t).single();y&&s(y)},g=async()=>{if(!o||!i)return;const y=o===i.resposta_correta;if(h(y),u(!0),y)try{const{error:w}=await Ee.from("missoes_usuarios").insert({id_usuario:e==null?void 0:e.id,id_missao:i.id});if(w)throw w;const{error:S}=await Ee.from("profiles").update({score_verde:((r==null?void 0:r.score_verde)||0)+i.pontos,missoes_concluidas:((r==null?void 0:r.missoes_concluidas)||0)+1}).eq("id",e==null?void 0:e.id);if(S)throw S;await n(),m({title:"Resposta correta!",description:`Voc ganhou ${i.pontos} pontos verdes!`}),setTimeout(()=>f("/missions"),2e3)}catch(w){m({title:"Erro",description:w.message,variant:"destructive"})}else m({title:"Resposta incorreta",description:"Tente novamente!",variant:"destructive"})};return i?a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>f("/missions"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-3xl font-bold",children:i.titulo})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{children:i.pergunta})}),a.jsxs(ht,{className:"space-y-6",children:[a.jsx(FQ,{value:o,onValueChange:l,children:a.jsx("div",{className:"space-y-3",children:["A","B","C","D"].map(y=>{const w=i[`alternativa_${y.toLowerCase()}`];return w?a.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-4 cursor-pointer hover:bg-muted/50",children:[a.jsx(BQ,{value:y,id:y}),a.jsxs(nt,{htmlFor:y,className:"flex-1 cursor-pointer",children:[a.jsxs("span",{className:"font-semibold",children:[y,")"]})," ",w]})]},y):null})})}),c&&a.jsx(it,{className:d?"border-success bg-success/5":"border-destructive bg-destructive/5",children:a.jsx(ht,{className:"pt-6",children:a.jsx("div",{className:"flex items-center gap-3",children:d?a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-6 w-6 text-success"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-success",children:"Correto!"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Parabns! Voc ganhou ",i.pontos," pontos."]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(al,{className:"h-6 w-6 text-destructive"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-destructive",children:"Incorreto"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["A resposta correta : ",i.resposta_correta]})]})]})})})}),a.jsx(Oe,{onClick:g,className:"w-full",size:"lg",disabled:!o||c,children:"Confirmar Resposta"})]})]})]})}):null}const fNt=DC("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ka=C.forwardRef(({className:t,variant:e,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:Ut(fNt({variant:e}),t),...r}));ka.displayName="Alert";const JNe=C.forwardRef(({className:t,...e},r)=>a.jsx("h5",{ref:r,className:Ut("mb-1 font-medium leading-none tracking-tight",t),...e}));JNe.displayName="AlertTitle";const Oa=C.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Ut("text-sm [&_p]:leading-relaxed",t),...e}));Oa.displayName="AlertDescription";const Od=C.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:Ut("flex min-h-[100px] w-full rounded-xl border border-input bg-background px-4 py-3","font-body text-base text-foreground","placeholder:text-muted-foreground","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary","disabled:cursor-not-allowed disabled:opacity-50","resize-none","md:text-sm",t),ref:r,...e}));Od.displayName="Textarea";function mNt(t,e){var n,i;const{type:r}=t;switch(r){case"missao_concluida":return`Acabei de completar a misso "${t.titulo_missao}" no app Ciclik  Recicle e Ganhe, com mais de 80% de acerto.
Estou acumulando pontos verdes enquanto aprendo sobre sustentabilidade e consumo consciente.
#Ciclik #Sustentabilidade #EducaoAmbiental #RecicleEGanhe`;case"entrega_validada":return`Minha ltima entrega de reciclveis foi validada pela cooperativa parceira da Ciclik:
 Material: ${t.tipo_material}
 Peso validado: ${(n=t.peso_validado)==null?void 0:n.toFixed(1)} kg
Cada entrega ajuda a fortalecer a reciclagem e a gerar impacto socioambiental real.
#Ciclik #Reciclagem #ImpactoPositivo #RecicleEGanhe`;case"cupom_resgatado":return`Acabei de resgatar um cupom de R$ ${t.valor_cupom} no app Ciclik  Recicle e Ganhe, estudando sobre sustentabilidade, enviando notas fiscais e entregando reciclveis.
Aprendo, gero impacto e ainda ganho benefcios.
#Ciclik #ConsumoConsciente #RecompensaVerde #RecicleEGanhe`;case"progresso_geral":return`J acumulei ${t.score_verde} pontos verdes na Ciclik, concluindo ${t.missoes_concluidas} misses e entregando ${(i=t.peso_total_entregue)==null?void 0:i.toFixed(1)} kg de reciclveis.
Pequenas aes, grandes impactos.
#Ciclik #ESG #MeuImpactoVerde #RecicleEGanhe`;default:return"Compartilhando minha conquista no Ciclik  Recicle e Ganhe! #Ciclik #Sustentabilidade"}}async function pNt(t){try{return await navigator.clipboard.writeText(t),!0}catch(e){return console.error("Erro ao copiar texto:",e),!1}}function gNt(){window.open("https://www.linkedin.com","_blank")}function xNt(){window.open("https://www.instagram.com/accounts/login/","_blank")}async function vNt(t,e,r){return new Promise((n,i)=>{const s=document.createElement("canvas"),o=s.getContext("2d");if(!o){i(new Error("No foi possvel criar o contexto do canvas"));return}s.width=1080,s.height=1080,o.fillStyle="#FFFFFF",o.fillRect(0,0,s.width,s.height);const l=new Image;l.crossOrigin="anonymous",l.src=Bp("ciclik-logo-full.png"),l.onload=()=>{const u=l.height/l.width*350,d=(s.width-350)/2;o.drawImage(l,d,80,350,u),o.strokeStyle="#8BC34A",o.lineWidth=8,o.strokeRect(40,40,s.width-80,s.height-80),o.fillStyle="#333333",o.font="bold 46px Arial, sans-serif",o.textAlign="center",o.fillText(" CONQUISTA DESBLOQUEADA",s.width/2,350),o.fillStyle="#8BC34A",o.font="bold 52px Arial, sans-serif";const f=s.width-160,m=t.split(" ");let x="",g=440;const y=60,w=[];m.forEach(O=>{const I=x+O+" ";o.measureText(I).width>f&&x!==""?(w.push(x.trim()),x=O+" "):x=I}),x.trim()&&w.push(x.trim()),w.forEach((O,I)=>{o.fillText(O,s.width/2,g+I*y)});const S=s.height-210,E=s.height-170,j=s.height-110,T=s.height-70;r&&(o.fillStyle="#666666",o.font="bold 30px Arial, sans-serif",o.fillText(r,s.width/2,S)),o.fillStyle="#FFA726",o.font="bold 44px Arial, sans-serif",o.fillText(`NVEL: ${e.toUpperCase()}`,s.width/2,E),o.fillStyle="#999999",o.font="26px Arial, sans-serif",o.fillText("Ciclik - Recicle e Ganhe",s.width/2,j),o.font="22px Arial, sans-serif",o.fillText("#Ciclik #Sustentabilidade #RecicleEGanhe",s.width/2,T),n(s.toDataURL("image/png"))},l.onerror=()=>{i(new Error("Erro ao carregar a logo"))}})}function yNt(t,e){const r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function bNt({open:t,onOpenChange:e,platform:r,shareText:n,title:i,conquistaTitulo:s="Misso Concluda"}){const[o,l]=C.useState(!1),[c,u]=C.useState(null),[d,h]=C.useState(!1),{toast:f}=Qi(),{profile:m}=Si();C.useEffect(()=>{t&&u(null)},[t]);const x=async()=>{if(!(c||!m)){h(!0);try{const j=m.nome.split(" ")[0],T=await vNt(s,m.nivel||"Iniciante",j);u(T)}catch(j){console.error("Erro ao gerar imagem:",j),f({title:"Erro ao gerar imagem",description:"Tente novamente",variant:"destructive"})}finally{h(!1)}}},g=async()=>{await pNt(n)?(l(!0),f({title:"Texto copiado!",description:"Cole o texto ao criar seu post"}),setTimeout(()=>l(!1),2e3)):f({title:"Erro ao copiar",description:"Tente novamente",variant:"destructive"})},y=()=>{r==="linkedin"?gNt():xNt(),f({title:`Abrindo ${r==="linkedin"?"LinkedIn":"Instagram"}`,description:"Cole o texto copiado ao criar seu post"})},w=async()=>{if(!c){await x();return}yNt(c,`ciclik-conquista-${Date.now()}.png`),f({title:"Imagem baixada!",description:`Use a imagem ao criar seu post no ${S}`})},S=r==="linkedin"?"LinkedIn":"Instagram",E=r==="linkedin"?"bg-[#0A66C2]":"bg-gradient-to-br from-[#833AB4] via-[#FD1D1D] to-[#F77737]";return a.jsx(hs,{open:t,onOpenChange:e,children:a.jsxs(as,{className:"sm:max-w-[540px] max-h-[90vh] overflow-y-auto bg-card border-border shadow-lg",children:[a.jsxs(fs,{className:"space-y-3 pb-2 sticky top-0 bg-card z-10 border-b border-border/50 mb-4",children:[a.jsxs(ms,{className:"flex items-center gap-3 text-xl",children:[a.jsx("div",{className:`h-10 w-10 rounded-xl ${E} flex items-center justify-center shadow-md`,children:a.jsx(kM,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-foreground font-semibold",children:i||`Compartilhar no ${S}`})]}),a.jsx(Sl,{className:"text-muted-foreground",children:"Gere sua imagem personalizada e compartilhe sua conquista"})]}),a.jsxs("div",{className:"space-y-5 pb-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-semibold text-foreground",children:r==="instagram"?"Legenda sugerida":"Texto sugerido"}),a.jsx(Od,{value:n,readOnly:!0,className:"min-h-[140px] resize-none bg-muted/50 border-border text-foreground text-sm leading-relaxed"})]}),a.jsx(Oe,{onClick:g,className:"w-full transition-all",variant:o?"secondary":"default",size:"lg",children:o?a.jsxs(a.Fragment,{children:[a.jsx(xl,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Texto Copiado!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(p3,{className:"mr-2 h-4 w-4"}),a.jsxs("span",{children:["Copiar ",r==="instagram"?"Legenda":"Texto"]})]})}),a.jsx("div",{className:"space-y-4 pt-2",children:a.jsxs("div",{className:"border-t border-border pt-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Imagem Personalizada"}),a.jsx(Oe,{onClick:x,className:"w-full mb-4 shadow-sm",variant:c?"secondary":"default",disabled:d,size:"lg",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-foreground border-t-transparent rounded-full mr-2"}),a.jsx("span",{children:"Gerando..."})]}):c?a.jsxs(a.Fragment,{children:[a.jsx(xl,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Imagem Gerada"})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:""}),a.jsx("span",{children:"Gerar Imagem"})]})}),c&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm overflow-y-scroll max-h-[500px] scrollbar-thin scrollbar-thumb-primary scrollbar-track-muted",children:a.jsx("div",{className:"p-4",children:a.jsx("img",{src:c,alt:"Conquista Ciclik",className:"mx-auto w-full max-w-sm object-contain"})})}),a.jsxs(Oe,{onClick:w,variant:"outline",size:"lg",className:"w-full shadow-sm",children:[a.jsx(ou,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Baixar Imagem"})]})]})]})}),a.jsxs(Oe,{onClick:y,className:`w-full text-white shadow-md ${r==="linkedin"?"bg-[#0A66C2] hover:bg-[#0A66C2]/90":"bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] hover:opacity-90"}`,size:"lg",children:[a.jsx(kM,{className:"mr-2 h-4 w-4"}),a.jsxs("span",{children:["Abrir ",S]})]}),a.jsx("div",{className:"pt-2 border-t border-border",children:a.jsxs("p",{className:"text-xs text-center text-muted-foreground leading-relaxed",children:["Gere a imagem  Baixe  Copie o texto  Abra o ",S,"  Publique"]})})]})]})})}function $Q({shareData:t,nomeUsuario:e,className:r="",conquistaTitulo:n}){const[i,s]=C.useState(!1),[o,l]=C.useState("linkedin"),c=mNt(t),u=d=>{l(d),s(!0)};return a.jsxs("div",{className:r,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(IM,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Compartilhar conquista:"})]}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsxs(Oe,{onClick:()=>u("linkedin"),variant:"outline",className:"flex-1 bg-[#0A66C2]/10 hover:bg-[#0A66C2]/20 border-[#0A66C2]/30",children:[a.jsx("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"#0A66C2",children:a.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"LinkedIn"]}),a.jsxs(Oe,{onClick:()=>u("instagram"),variant:"outline",className:"flex-1 bg-gradient-to-r from-[#833AB4]/10 via-[#FD1D1D]/10 to-[#F77737]/10 hover:opacity-80",children:[a.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"url(#instagram-gradient)",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"instagram-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#833AB4"}),a.jsx("stop",{offset:"50%",stopColor:"#FD1D1D"}),a.jsx("stop",{offset:"100%",stopColor:"#F77737"})]})}),a.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})]}),"Instagram"]})]}),a.jsx(bNt,{open:i,onOpenChange:s,platform:o,shareText:c,conquistaTitulo:n})]})}const Qg=300;function wNt(){const t=async r=>{try{const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),1,0,0,0,0),{data:s,error:o}=await Ee.from("missoes_usuarios").select(`
          id_missao,
          missoes (
            pontos
          )
        `).eq("id_usuario",r).gte("data_conclusao",i.toISOString());if(o)return console.error("Erro ao verificar limite mensal:",o),{currentPoints:0,withinLimit:!0,remainingPoints:Qg};const l=(s==null?void 0:s.reduce((d,h)=>{var m;const f=((m=h.missoes)==null?void 0:m.pontos)||0;return d+f},0))||0,c=l<Qg,u=Math.max(0,Qg-l);return{currentPoints:l,withinLimit:c,remainingPoints:u}}catch(n){return console.error("Erro ao verificar limite mensal:",n),{currentPoints:0,withinLimit:!0,remainingPoints:Qg}}};return{checkMonthlyLimit:t,canEarnPoints:async(r,n)=>{try{const i=await t(r);if(i.currentPoints>=Qg)return{canEarn:!1,pointsToEarn:0,message:`Voc atingiu o limite mensal de ${Qg} pontos com educao. Continue aprendendo - suas aulas ainda contam para UIBs!`};const s=Math.min(n,i.remainingPoints);return s<n?{canEarn:!0,pointsToEarn:s,message:`Voc ganhou ${s} pontos (limite mensal de ${Qg} quase atingido). Faltam ${Qg-i.currentPoints-s} pontos para o limite.`}:{canEarn:!0,pointsToEarn:s,message:null}}catch(i){return console.error("Erro ao verificar possibilidade de ganhar pontos:",i),{canEarn:!0,pointsToEarn:n,message:null}}},MONTHLY_LIMIT:Qg}}function _Nt(){const{id:t}=o0(),{user:e,profile:r,refreshProfile:n}=Si(),[i,s]=C.useState(null),[o,l]=C.useState([]),[c,u]=C.useState("video"),[d,h]=C.useState(0),[f,m]=C.useState({}),[x,g]=C.useState(0),[y,w]=C.useState([]),[S,E]=C.useState(0),[j,T]=C.useState(!1),O=nn(),{toast:I}=Qi(),{canEarnPoints:M,MONTHLY_LIMIT:D}=wNt();C.useEffect(()=>{z()},[t]);const z=async()=>{const{data:Y}=await Ee.from("missoes").select("*").eq("id",t).single(),{data:oe}=await Ee.from("questoes_missao").select("*").eq("id_missao",t).order("ordem",{ascending:!0});Y&&s(Y),oe&&l(oe)},F=()=>{c==="video"&&u("quiz")},q=(Y,oe)=>{m({...f,[Y]:oe})},Q=()=>{d<o.length-1?h(d+1):re()},re=async()=>{if(!e||!i)return;let Y=0;const oe=[],xe=[];for(const J of o){const ie=f[J.id],ce=ie===J.resposta_correta;ce&&Y++,xe.push({question:J,userAnswer:ie,isCorrect:ce}),oe.push({id_usuario:e.id,id_missao:i.id,id_questao:J.id,resposta_usuario:ie,correta:ce})}const H=o.length>0?Y/o.length*100:0;g(H),w(xe),u("review");try{const{error:J}=await Ee.from("respostas_quiz").upsert(oe,{onConflict:"id_usuario,id_questao"});if(J)throw J;if(H>=80){const ie=await M(e.id,i.pontos);let ce=0;if(ie.canEarn){ce=ie.pointsToEarn;const{error:me}=await Ee.from("missoes_usuarios").insert({id_usuario:e.id,id_missao:i.id,percentual_acerto:H,quiz_completo:!0});me&&console.error("Erro ao registrar misso:",me);const{error:he}=await Ee.from("profiles").update({score_verde:((r==null?void 0:r.score_verde)||0)+ce,missoes_concluidas:((r==null?void 0:r.missoes_concluidas)||0)+1}).eq("id",e.id);if(he)throw he;const _e=i.duracao_minutos||10,ue=_e/60,{error:je}=await Ee.from("impacto_bruto").insert({tipo:"educacao",valor_bruto:ue,id_usuario:e.id,id_missao:i.id,data_hora:new Date().toISOString(),descricao_origem:`Misso concluda - ${i.titulo} (${_e} min)`,processado:!1});je&&console.error("Erro ao registrar educao no impacto_bruto:",je),await n(),E(ce),ie.message?I({title:"Misso Concluda! ",description:ie.message,duration:7e3}):I({title:"Misso concluda! ",description:`Voc acertou ${H.toFixed(0)}% e ganhou ${ce} pontos verdes!`})}else{T(!0),E(0),await Ee.from("missoes_usuarios").insert({id_usuario:e.id,id_missao:i.id,percentual_acerto:H,quiz_completo:!0});const me=i.duracao_minutos||10,he=me/60;await Ee.from("impacto_bruto").insert({tipo:"educacao",valor_bruto:he,id_usuario:e.id,id_missao:i.id,data_hora:new Date().toISOString(),descricao_origem:`Misso concluda (limite atingido) - ${i.titulo} (${me} min)`,processado:!1}),I({title:"Limite mensal atingido! ",description:ie.message,duration:1e4})}}else I({title:"Quiz incompleto",description:`Voc precisa de 80% de acertos. Voc acertou ${H.toFixed(0)}%. Revise e tente novamente!`,variant:"destructive"})}catch(J){I({title:"Erro",description:J.message,variant:"destructive"})}};if(!i)return null;const Z=o[d],se=o.length>0?(d+1)/o.length*100:0,K=[{id:"video",label:"Vdeo",icon:DM,completed:c==="quiz"||c==="review"},{id:"quiz",label:"Quiz",icon:ta,completed:c==="review"}],X=c==="video"?50:c==="review"?100:50+se*.5;return a.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[a.jsx(Ab,{showBackButton:!0,backTo:"/missions"}),a.jsxs("div",{className:"mx-auto max-w-4xl p-4 md:p-8 space-y-6",children:[j&&a.jsxs(ka,{variant:"destructive",className:"border-yellow-500 bg-yellow-50 dark:bg-yellow-950",children:[a.jsx(Pg,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),a.jsxs(Oa,{className:"text-yellow-800 dark:text-yellow-200",children:[a.jsx("strong",{children:"Limite mensal atingido!"})," Voc j conquistou ",D," pontos com educao este ms. Continue assistindo para acumular UIBs (Unidades de Impacto Bruto) para o CDV, mas pontos extras s sero creditados no prximo ms."]})]}),a.jsx(it,{children:a.jsxs(ht,{className:"pt-6 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:K.map((Y,oe)=>{const xe=Y.icon,H=Y.id===c,J=Y.completed;return a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("div",{className:Ut("flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all",J&&"bg-primary border-primary text-primary-foreground",H&&!J&&"border-primary text-primary",!H&&!J&&"border-muted text-muted-foreground"),children:J?a.jsx(xl,{className:"h-6 w-6"}):a.jsx(xe,{className:"h-6 w-6"})}),a.jsx("span",{className:Ut("mt-2 text-sm font-medium",H&&"text-primary",!H&&"text-muted-foreground"),children:Y.label})]}),oe<K.length-1&&a.jsx("div",{className:Ut("h-0.5 flex-1 mx-2 transition-all",J?"bg-primary":"bg-muted")})]},Y.id)})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progresso geral"}),a.jsxs("span",{className:"font-medium",children:[Math.round(X),"%"]})]}),a.jsx(fc,{value:X,className:"h-2"})]})]})}),c==="video"&&a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(DM,{className:"h-5 w-5"}),"Vdeo Educativo"]})}),a.jsxs(ht,{className:"space-y-6",children:[a.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:i.video_url?a.jsx("iframe",{src:FNe(i.video_url),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:i.titulo}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-muted-foreground",children:"Vdeo no disponvel"})})}),a.jsx("div",{className:"sticky bottom-0 bg-card pt-4 pb-2 -mx-6 px-6",children:a.jsx(Oe,{onClick:F,className:"w-full",size:"lg",children:"Continuar para o Quiz"})})]})]}),c==="quiz"&&a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ct,{children:["Quiz - Questo ",d+1," de ",o.length]}),a.jsx(fc,{value:se})]})}),a.jsx(ht,{className:"space-y-6",children:Z&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:Z.pergunta}),a.jsx(FQ,{value:f[Z.id]||"",onValueChange:Y=>q(Z.id,Y),children:a.jsx("div",{className:"space-y-3",children:["A","B","C","D"].map(Y=>{const oe=Z[`alternativa_${Y.toLowerCase()}`];return oe?a.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-4 cursor-pointer hover:bg-muted/50",children:[a.jsx(BQ,{value:Y,id:`${Z.id}-${Y}`}),a.jsxs(nt,{htmlFor:`${Z.id}-${Y}`,className:"flex-1 cursor-pointer",children:[a.jsxs("span",{className:"font-semibold",children:[Y,")"]})," ",oe]})]},Y):null})})})]}),a.jsx("div",{className:"sticky bottom-0 bg-card pt-4 pb-2 -mx-6 px-6 border-t border-border",children:a.jsx(Oe,{onClick:Q,disabled:!f[Z.id],className:"w-full",size:"lg",children:d<o.length-1?"Prxima Questo":"Finalizar Quiz"})})]})})]}),c==="review"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(it,{children:a.jsx(ht,{className:"pt-6 space-y-4 text-center",children:x>=80?a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-20 w-20 text-green-500 mx-auto"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Parabns! "}),a.jsxs("p",{className:"text-lg",children:["Voc acertou ",x.toFixed(0),"% das questes!"]}),a.jsxs("p",{className:"text-muted-foreground",children:["Voc ganhou ",i.pontos," pontos verdes!"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(al,{className:"h-20 w-20 text-destructive mx-auto"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Quase l!"}),a.jsxs("p",{className:"text-lg",children:["Voc acertou ",x.toFixed(0),"% das questes."]}),a.jsx("p",{className:"text-muted-foreground",children:"Voc precisa de 80% para completar a misso."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Revise o material e tente novamente!"})]})]})})}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{children:"Reviso das Questes"})}),a.jsxs(ht,{className:"space-y-6",children:[y.map((Y,oe)=>{var ie;const xe=Y.question,H=xe[`alternativa_${(ie=Y.userAnswer)==null?void 0:ie.toLowerCase()}`],J=xe[`alternativa_${xe.resposta_correta.toLowerCase()}`];return a.jsx("div",{className:Ut("p-4 rounded-lg border-2",Y.isCorrect?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-red-500 bg-red-50 dark:bg-red-950/20"),children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[Y.isCorrect?a.jsx(ta,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}):a.jsx(al,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold mb-2",children:["Questo ",oe+1,": ",xe.pergunta]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Sua resposta: "}),a.jsxs("span",{className:Y.isCorrect?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400",children:[Y.userAnswer,") ",H]})]}),!Y.isCorrect&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Resposta correta: "}),a.jsxs("span",{className:"text-green-700 dark:text-green-400",children:[xe.resposta_correta,") ",J]})]}),xe.explicacao&&a.jsxs("div",{className:"mt-3 p-3 bg-background rounded border",children:[a.jsx("span",{className:"font-medium",children:"Explicao: "}),a.jsx("span",{className:"text-muted-foreground",children:xe.explicacao})]})]})]})]})})},xe.id)}),x>=80&&i&&a.jsx("div",{className:"p-4 bg-primary/10 rounded-lg border border-primary/20",children:a.jsx($Q,{shareData:{type:"missao_concluida",titulo_missao:i.titulo},nomeUsuario:r==null?void 0:r.nome.split(" ")[0],conquistaTitulo:i.titulo,className:"mb-4"})}),a.jsx("div",{className:"flex gap-3 sticky bottom-0 bg-card pt-4 pb-4 -mx-6 px-6 border-t border-border",children:x>=80?a.jsx(Oe,{onClick:()=>O("/missions"),className:"flex-1",size:"lg",children:"Voltar para Misses"}):a.jsxs(a.Fragment,{children:[a.jsx(Oe,{onClick:()=>O("/missions"),variant:"outline",className:"flex-1",size:"lg",children:"Voltar para Misses"}),a.jsx(Oe,{onClick:()=>{u("video"),h(0),m({}),w([]),g(0)},className:"flex-1",size:"lg",children:"Tentar Novamente"})]})})]})]})]})]})]})}function NNt({onCapture:t,onCancel:e}){const r=C.useRef(null),[n,i]=C.useState(null),[s,o]=C.useState(!1),l=async()=>{try{const d=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});r.current&&(r.current.srcObject=d),i(d),o(!0)}catch(d){console.error("Error accessing camera:",d)}},c=()=>{if(r.current){const d=document.createElement("canvas");d.width=r.current.videoWidth,d.height=r.current.videoHeight;const h=d.getContext("2d");h&&(h.drawImage(r.current,0,0),d.toBlob(f=>{if(f){const m=new File([f],"camera-capture.jpg",{type:"image/jpeg"});u(),t(m)}},"image/jpeg"))}},u=()=>{n&&(n.getTracks().forEach(d=>d.stop()),i(null),o(!1))};return a.jsx("div",{className:"space-y-4",children:s?a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Oe,{onClick:c,className:"flex-1",children:"Capturar Foto"}),a.jsx(Oe,{variant:"outline",onClick:()=>{u(),e()},children:"Cancelar"})]})]}):a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Oe,{onClick:l,className:"flex-1",children:[a.jsx($S,{className:"mr-2 h-4 w-4"}),"Iniciar Cmera"]}),a.jsx(Oe,{variant:"outline",onClick:e,children:a.jsx(Xa,{className:"h-4 w-4"})})]})})}var Wr;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Wr||(Wr={}));var Wce=new Map([[Wr.QR_CODE,"QR_CODE"],[Wr.AZTEC,"AZTEC"],[Wr.CODABAR,"CODABAR"],[Wr.CODE_39,"CODE_39"],[Wr.CODE_93,"CODE_93"],[Wr.CODE_128,"CODE_128"],[Wr.DATA_MATRIX,"DATA_MATRIX"],[Wr.MAXICODE,"MAXICODE"],[Wr.ITF,"ITF"],[Wr.EAN_13,"EAN_13"],[Wr.EAN_8,"EAN_8"],[Wr.PDF_417,"PDF_417"],[Wr.RSS_14,"RSS_14"],[Wr.RSS_EXPANDED,"RSS_EXPANDED"],[Wr.UPC_A,"UPC_A"],[Wr.UPC_E,"UPC_E"],[Wr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Gce;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Gce||(Gce={}));function SNt(t){return Object.values(Wr).includes(t)}var pL;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(pL||(pL={}));var ENt=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[pL.SCAN_TYPE_CAMERA,pL.SCAN_TYPE_FILE],t}(),eSe=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Wce.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Wce.get(e))},t}(),Kce=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),yW;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(yW||(yW={}));var jNt=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:yW.UNKWOWN_ERROR}},t}(),ANt=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ix(t){return typeof t>"u"||t===null}var QS=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),tSe=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),o=Object.keys(e),l=0,c=o;l<c.length;l++){var u=c[l];if(s.has(u))return r.logError("".concat(u," is not supported videoConstaints."),!0),!1}return!0},t}(),bW={exports:{}};(function(t,e){(function(r,n){n(e)})(pm,function(r){function n(Ne){return Ne==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ne,p){Ne.__proto__=p}||function(Ne,p){for(var v in p)p.hasOwnProperty(v)&&(Ne[v]=p[v])};function s(Ne,p){i(Ne,p);function v(){this.constructor=Ne}Ne.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}function o(Ne,p){var v=Object.setPrototypeOf;v?v(Ne,p):Ne.__proto__=p}function l(Ne,p){p===void 0&&(p=Ne.constructor);var v=Error.captureStackTrace;v&&v(Ne,p)}var c=function(Ne){s(p,Ne);function p(v){var _=this.constructor,A=Ne.call(this,v)||this;return Object.defineProperty(A,"name",{value:_.name,enumerable:!1}),o(A,_.prototype),l(A),A}return p}(Error);class u extends c{constructor(p=void 0){super(p),this.message=p}getKind(){return this.constructor.kind}}u.kind="Exception";class d extends u{}d.kind="ArgumentException";class h extends u{}h.kind="IllegalArgumentException";class f{constructor(p){if(this.binarizer=p,p===null)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(p,v){return this.binarizer.getBlackRow(p,v)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(p,v,_,A){const P=this.binarizer.getLuminanceSource().crop(p,v,_,A);return new f(this.binarizer.createBinarizer(P))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const p=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new f(this.binarizer.createBinarizer(p))}rotateCounterClockwise45(){const p=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new f(this.binarizer.createBinarizer(p))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class m extends u{static getChecksumInstance(){return new m}}m.kind="ChecksumException";class x{constructor(p){this.source=p}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(p,v,_,A,P){for(;P--;)_[A++]=p[v++]}static currentTimeMillis(){return Date.now()}}class y extends u{}y.kind="IndexOutOfBoundsException";class w extends y{constructor(p=void 0,v=void 0){super(v),this.index=p,this.message=v}}w.kind="ArrayIndexOutOfBoundsException";class S{static fill(p,v){for(let _=0,A=p.length;_<A;_++)p[_]=v}static fillWithin(p,v,_,A){S.rangeCheck(p.length,v,_);for(let P=v;P<_;P++)p[P]=A}static rangeCheck(p,v,_){if(v>_)throw new h("fromIndex("+v+") > toIndex("+_+")");if(v<0)throw new w(v);if(_>p)throw new w(_)}static asList(...p){return p}static create(p,v,_){return Array.from({length:p}).map(P=>Array.from({length:v}).fill(_))}static createInt32Array(p,v,_){return Array.from({length:p}).map(P=>Int32Array.from({length:v}).fill(_))}static equals(p,v){if(!p||!v||!p.length||!v.length||p.length!==v.length)return!1;for(let _=0,A=p.length;_<A;_++)if(p[_]!==v[_])return!1;return!0}static hashCode(p){if(p===null)return 0;let v=1;for(const _ of p)v=31*v+_;return v}static fillUint8Array(p,v){for(let _=0;_!==p.length;_++)p[_]=v}static copyOf(p,v){return p.slice(0,v)}static copyOfUint8Array(p,v){if(p.length<=v){const _=new Uint8Array(v);return _.set(p),_}return p.slice(0,v)}static copyOfRange(p,v,_){const A=_-v,P=new Int32Array(A);return g.arraycopy(p,v,P,0,A),P}static binarySearch(p,v,_){_===void 0&&(_=S.numberComparator);let A=0,P=p.length-1;for(;A<=P;){const R=P+A>>1,U=_(v,p[R]);if(U>0)A=R+1;else if(U<0)P=R-1;else return R}return-A-1}static numberComparator(p,v){return p-v}}class E{static numberOfTrailingZeros(p){let v;if(p===0)return 32;let _=31;return v=p<<16,v!==0&&(_-=16,p=v),v=p<<8,v!==0&&(_-=8,p=v),v=p<<4,v!==0&&(_-=4,p=v),v=p<<2,v!==0&&(_-=2,p=v),_-(p<<1>>>31)}static numberOfLeadingZeros(p){if(p===0)return 32;let v=1;return p>>>16||(v+=16,p<<=16),p>>>24||(v+=8,p<<=8),p>>>28||(v+=4,p<<=4),p>>>30||(v+=2,p<<=2),v-=p>>>31,v}static toHexString(p){return p.toString(16)}static toBinaryString(p){return String(parseInt(String(p),2))}static bitCount(p){return p=p-(p>>>1&1431655765),p=(p&858993459)+(p>>>2&858993459),p=p+(p>>>4)&252645135,p=p+(p>>>8),p=p+(p>>>16),p&63}static truncDivision(p,v){return Math.trunc(p/v)}static parseInt(p,v=void 0){return parseInt(p,v)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(p,v){p===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=p,v==null?this.bits=j.makeArray(p):this.bits=v)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(p){if(p>this.bits.length*32){const v=j.makeArray(p);g.arraycopy(this.bits,0,v,0,this.bits.length),this.bits=v}}get(p){return(this.bits[Math.floor(p/32)]&1<<(p&31))!==0}set(p){this.bits[Math.floor(p/32)]|=1<<(p&31)}flip(p){this.bits[Math.floor(p/32)]^=1<<(p&31)}getNextSet(p){const v=this.size;if(p>=v)return v;const _=this.bits;let A=Math.floor(p/32),P=_[A];P&=~((1<<(p&31))-1);const R=_.length;for(;P===0;){if(++A===R)return v;P=_[A]}const U=A*32+E.numberOfTrailingZeros(P);return U>v?v:U}getNextUnset(p){const v=this.size;if(p>=v)return v;const _=this.bits;let A=Math.floor(p/32),P=~_[A];P&=~((1<<(p&31))-1);const R=_.length;for(;P===0;){if(++A===R)return v;P=~_[A]}const U=A*32+E.numberOfTrailingZeros(P);return U>v?v:U}setBulk(p,v){this.bits[Math.floor(p/32)]=v}setRange(p,v){if(v<p||p<0||v>this.size)throw new h;if(v===p)return;v--;const _=Math.floor(p/32),A=Math.floor(v/32),P=this.bits;for(let R=_;R<=A;R++){const U=R>_?0:p&31,te=(2<<(R<A?31:v&31))-(1<<U);P[R]|=te}}clear(){const p=this.bits.length,v=this.bits;for(let _=0;_<p;_++)v[_]=0}isRange(p,v,_){if(v<p||p<0||v>this.size)throw new h;if(v===p)return!0;v--;const A=Math.floor(p/32),P=Math.floor(v/32),R=this.bits;for(let U=A;U<=P;U++){const G=U>A?0:p&31,de=(2<<(U<P?31:v&31))-(1<<G)&4294967295;if((R[U]&de)!==(_?de:0))return!1}return!0}appendBit(p){this.ensureCapacity(this.size+1),p&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(p,v){if(v<0||v>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+v);for(let _=v;_>0;_--)this.appendBit((p>>_-1&1)===1)}appendBitArray(p){const v=p.size;this.ensureCapacity(this.size+v);for(let _=0;_<v;_++)this.appendBit(p.get(_))}xor(p){if(this.size!==p.size)throw new h("Sizes don't match");const v=this.bits;for(let _=0,A=v.length;_<A;_++)v[_]^=p.bits[_]}toBytes(p,v,_,A){for(let P=0;P<A;P++){let R=0;for(let U=0;U<8;U++)this.get(p)&&(R|=1<<7-U),p++;v[_+P]=R}}getBitArray(){return this.bits}reverse(){const p=new Int32Array(this.bits.length),v=Math.floor((this.size-1)/32),_=v+1,A=this.bits;for(let P=0;P<_;P++){let R=A[P];R=R>>1&1431655765|(R&1431655765)<<1,R=R>>2&858993459|(R&858993459)<<2,R=R>>4&252645135|(R&252645135)<<4,R=R>>8&16711935|(R&16711935)<<8,R=R>>16&65535|(R&65535)<<16,p[v-P]=R}if(this.size!==_*32){const P=_*32-this.size;let R=p[0]>>>P;for(let U=1;U<_;U++){const G=p[U];R|=G<<32-P,p[U-1]=R,R=G>>>P}p[_-1]=R}this.bits=p}static makeArray(p){return new Int32Array(Math.floor((p+31)/32))}equals(p){if(!(p instanceof j))return!1;const v=p;return this.size===v.size&&S.equals(this.bits,v.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let p="";for(let v=0,_=this.size;v<_;v++)v&7||(p+=" "),p+=this.get(v)?"X":".";return p}clone(){return new j(this.size,this.bits.slice())}}var T;(function(Ne){Ne[Ne.OTHER=0]="OTHER",Ne[Ne.PURE_BARCODE=1]="PURE_BARCODE",Ne[Ne.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Ne[Ne.TRY_HARDER=3]="TRY_HARDER",Ne[Ne.CHARACTER_SET=4]="CHARACTER_SET",Ne[Ne.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Ne[Ne.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Ne[Ne.ASSUME_GS1=7]="ASSUME_GS1",Ne[Ne.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Ne[Ne.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Ne[Ne.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(T||(T={}));var O=T;class I extends u{static getFormatInstance(){return new I}}I.kind="FormatException";var M;(function(Ne){Ne[Ne.Cp437=0]="Cp437",Ne[Ne.ISO8859_1=1]="ISO8859_1",Ne[Ne.ISO8859_2=2]="ISO8859_2",Ne[Ne.ISO8859_3=3]="ISO8859_3",Ne[Ne.ISO8859_4=4]="ISO8859_4",Ne[Ne.ISO8859_5=5]="ISO8859_5",Ne[Ne.ISO8859_6=6]="ISO8859_6",Ne[Ne.ISO8859_7=7]="ISO8859_7",Ne[Ne.ISO8859_8=8]="ISO8859_8",Ne[Ne.ISO8859_9=9]="ISO8859_9",Ne[Ne.ISO8859_10=10]="ISO8859_10",Ne[Ne.ISO8859_11=11]="ISO8859_11",Ne[Ne.ISO8859_13=12]="ISO8859_13",Ne[Ne.ISO8859_14=13]="ISO8859_14",Ne[Ne.ISO8859_15=14]="ISO8859_15",Ne[Ne.ISO8859_16=15]="ISO8859_16",Ne[Ne.SJIS=16]="SJIS",Ne[Ne.Cp1250=17]="Cp1250",Ne[Ne.Cp1251=18]="Cp1251",Ne[Ne.Cp1252=19]="Cp1252",Ne[Ne.Cp1256=20]="Cp1256",Ne[Ne.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Ne[Ne.UTF8=22]="UTF8",Ne[Ne.ASCII=23]="ASCII",Ne[Ne.Big5=24]="Big5",Ne[Ne.GB18030=25]="GB18030",Ne[Ne.EUC_KR=26]="EUC_KR"})(M||(M={}));class D{constructor(p,v,_,...A){this.valueIdentifier=p,this.name=_,typeof v=="number"?this.values=Int32Array.from([v]):this.values=v,this.otherEncodingNames=A,D.VALUE_IDENTIFIER_TO_ECI.set(p,this),D.NAME_TO_ECI.set(_,this);const P=this.values;for(let R=0,U=P.length;R!==U;R++){const G=P[R];D.VALUES_TO_ECI.set(G,this)}for(const R of A)D.NAME_TO_ECI.set(R,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(p){if(p<0||p>=900)throw new I("incorect value");const v=D.VALUES_TO_ECI.get(p);if(v===void 0)throw new I("incorect value");return v}static getCharacterSetECIByName(p){const v=D.NAME_TO_ECI.get(p);if(v===void 0)throw new I("incorect value");return v}equals(p){if(!(p instanceof D))return!1;const v=p;return this.getName()===v.getName()}}D.VALUE_IDENTIFIER_TO_ECI=new Map,D.VALUES_TO_ECI=new Map,D.NAME_TO_ECI=new Map,D.Cp437=new D(M.Cp437,Int32Array.from([0,2]),"Cp437"),D.ISO8859_1=new D(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),D.ISO8859_2=new D(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),D.ISO8859_3=new D(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),D.ISO8859_4=new D(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),D.ISO8859_5=new D(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),D.ISO8859_6=new D(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),D.ISO8859_7=new D(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),D.ISO8859_8=new D(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),D.ISO8859_9=new D(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),D.ISO8859_10=new D(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),D.ISO8859_11=new D(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),D.ISO8859_13=new D(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),D.ISO8859_14=new D(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),D.ISO8859_15=new D(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),D.ISO8859_16=new D(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),D.SJIS=new D(M.SJIS,20,"SJIS","Shift_JIS"),D.Cp1250=new D(M.Cp1250,21,"Cp1250","windows-1250"),D.Cp1251=new D(M.Cp1251,22,"Cp1251","windows-1251"),D.Cp1252=new D(M.Cp1252,23,"Cp1252","windows-1252"),D.Cp1256=new D(M.Cp1256,24,"Cp1256","windows-1256"),D.UnicodeBigUnmarked=new D(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),D.UTF8=new D(M.UTF8,26,"UTF8","UTF-8"),D.ASCII=new D(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),D.Big5=new D(M.Big5,28,"Big5"),D.GB18030=new D(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),D.EUC_KR=new D(M.EUC_KR,30,"EUC_KR","EUC-KR");class z extends u{}z.kind="UnsupportedOperationException";class F{static decode(p,v){const _=this.encodingName(v);return this.customDecoder?this.customDecoder(p,_):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(_)?this.decodeFallback(p,_):new TextDecoder(_).decode(p)}static shouldDecodeOnFallback(p){return!F.isBrowser()&&p==="ISO-8859-1"}static encode(p,v){const _=this.encodingName(v);return this.customEncoder?this.customEncoder(p,_):typeof TextEncoder>"u"?this.encodeFallback(p):new TextEncoder().encode(p)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(p){return typeof p=="string"?p:p.getName()}static encodingCharacterSet(p){return p instanceof D?p:D.getCharacterSetECIByName(p)}static decodeFallback(p,v){const _=this.encodingCharacterSet(v);if(F.isDecodeFallbackSupported(_)){let A="";for(let P=0,R=p.length;P<R;P++){let U=p[P].toString(16);U.length<2&&(U="0"+U),A+="%"+U}return decodeURIComponent(A)}if(_.equals(D.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(p.buffer));throw new z(`Encoding ${this.encodingName(v)} not supported by fallback.`)}static isDecodeFallbackSupported(p){return p.equals(D.UTF8)||p.equals(D.ISO8859_1)||p.equals(D.ASCII)}static encodeFallback(p){const _=btoa(unescape(encodeURIComponent(p))).split(""),A=[];for(let P=0;P<_.length;P++)A.push(_[P].charCodeAt(0));return new Uint8Array(A)}}class q{static castAsNonUtf8Char(p,v=null){const _=v?v.getName():this.ISO88591;return F.decode(new Uint8Array([p]),_)}static guessEncoding(p,v){if(v!=null&&v.get(O.CHARACTER_SET)!==void 0)return v.get(O.CHARACTER_SET).toString();const _=p.length;let A=!0,P=!0,R=!0,U=0,G=0,te=0,de=0,we=0,Pe=0,Ze=0,at=0,dt=0,yt=0,Pt=0;const tr=p.length>3&&p[0]===239&&p[1]===187&&p[2]===191;for(let ar=0;ar<_&&(A||P||R);ar++){const sr=p[ar]&255;R&&(U>0?sr&128?U--:R=!1:sr&128&&(sr&64?(U++,sr&32?(U++,sr&16?(U++,sr&8?R=!1:de++):te++):G++):R=!1)),A&&(sr>127&&sr<160?A=!1:sr>159&&(sr<192||sr===215||sr===247)&&Pt++),P&&(we>0?sr<64||sr===127||sr>252?P=!1:we--:sr===128||sr===160||sr>239?P=!1:sr>160&&sr<224?(Pe++,at=0,Ze++,Ze>dt&&(dt=Ze)):sr>127?(we++,Ze=0,at++,at>yt&&(yt=at)):(Ze=0,at=0))}return R&&U>0&&(R=!1),P&&we>0&&(P=!1),R&&(tr||G+te+de>0)?q.UTF8:P&&(q.ASSUME_SHIFT_JIS||dt>=3||yt>=3)?q.SHIFT_JIS:A&&P?dt===2&&Pe===2||Pt*10>=_?q.SHIFT_JIS:q.ISO88591:A?q.ISO88591:P?q.SHIFT_JIS:R?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(p,...v){let _=-1;function A(R,U,G,te,de,we){if(R==="%%")return"%";if(v[++_]===void 0)return;R=te?parseInt(te.substr(1)):void 0;let Pe=de?parseInt(de.substr(1)):void 0,Ze;switch(we){case"s":Ze=v[_];break;case"c":Ze=v[_][0];break;case"f":Ze=parseFloat(v[_]).toFixed(R);break;case"p":Ze=parseFloat(v[_]).toPrecision(R);break;case"e":Ze=parseFloat(v[_]).toExponential(R);break;case"x":Ze=parseInt(v[_]).toString(Pe||16);break;case"d":Ze=parseFloat(parseInt(v[_],Pe||10).toPrecision(R)).toFixed(0);break}Ze=typeof Ze=="object"?JSON.stringify(Ze):(+Ze).toString(Pe);let at=parseInt(G),dt=G&&G[0]+""=="0"?"0":" ";for(;Ze.length<at;)Ze=U!==void 0?Ze+dt:dt+Ze;return Ze}let P=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(P,A)}static getBytes(p,v){return F.encode(p,v)}static getCharCode(p,v=0){return p.charCodeAt(v)}static getCharAt(p){return String.fromCharCode(p)}}q.SHIFT_JIS=D.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=D.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=D.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class Q{constructor(p=""){this.value=p}enableDecoding(p){return this.encoding=p,this}append(p){return typeof p=="string"?this.value+=p.toString():this.encoding?this.value+=q.castAsNonUtf8Char(p,this.encoding):this.value+=String.fromCharCode(p),this}appendChars(p,v,_){for(let A=v;v<v+_;A++)this.append(p[A]);return this}length(){return this.value.length}charAt(p){return this.value.charAt(p)}deleteCharAt(p){this.value=this.value.substr(0,p)+this.value.substring(p+1)}setCharAt(p,v){this.value=this.value.substr(0,p)+v+this.value.substr(p+1)}substring(p,v){return this.value.substring(p,v)}setLengthToZero(){this.value=""}toString(){return this.value}insert(p,v){this.value=this.value.substr(0,p)+v+this.value.substr(p+v.length)}}class re{constructor(p,v,_,A){if(this.width=p,this.height=v,this.rowSize=_,this.bits=A,v==null&&(v=p),this.height=v,p<1||v<1)throw new h("Both dimensions must be greater than 0");_==null&&(_=Math.floor((p+31)/32)),this.rowSize=_,A==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(p){const v=p.length,_=p[0].length,A=new re(_,v);for(let P=0;P<v;P++){const R=p[P];for(let U=0;U<_;U++)R[U]&&A.set(U,P)}return A}static parseFromString(p,v,_){if(p===null)throw new h("stringRepresentation cannot be null");const A=new Array(p.length);let P=0,R=0,U=-1,G=0,te=0;for(;te<p.length;)if(p.charAt(te)===`
`||p.charAt(te)==="\r"){if(P>R){if(U===-1)U=P-R;else if(P-R!==U)throw new h("row lengths do not match");R=P,G++}te++}else if(p.substring(te,te+v.length)===v)te+=v.length,A[P]=!0,P++;else if(p.substring(te,te+_.length)===_)te+=_.length,A[P]=!1,P++;else throw new h("illegal character encountered: "+p.substring(te));if(P>R){if(U===-1)U=P-R;else if(P-R!==U)throw new h("row lengths do not match");G++}const de=new re(U,G);for(let we=0;we<P;we++)A[we]&&de.set(Math.floor(we%U),Math.floor(we/U));return de}get(p,v){const _=v*this.rowSize+Math.floor(p/32);return(this.bits[_]>>>(p&31)&1)!==0}set(p,v){const _=v*this.rowSize+Math.floor(p/32);this.bits[_]|=1<<(p&31)&4294967295}unset(p,v){const _=v*this.rowSize+Math.floor(p/32);this.bits[_]&=~(1<<(p&31)&4294967295)}flip(p,v){const _=v*this.rowSize+Math.floor(p/32);this.bits[_]^=1<<(p&31)&4294967295}xor(p){if(this.width!==p.getWidth()||this.height!==p.getHeight()||this.rowSize!==p.getRowSize())throw new h("input matrix dimensions do not match");const v=new j(Math.floor(this.width/32)+1),_=this.rowSize,A=this.bits;for(let P=0,R=this.height;P<R;P++){const U=P*_,G=p.getRow(P,v).getBitArray();for(let te=0;te<_;te++)A[U+te]^=G[te]}}clear(){const p=this.bits,v=p.length;for(let _=0;_<v;_++)p[_]=0}setRegion(p,v,_,A){if(v<0||p<0)throw new h("Left and top must be nonnegative");if(A<1||_<1)throw new h("Height and width must be at least 1");const P=p+_,R=v+A;if(R>this.height||P>this.width)throw new h("The region must fit inside the matrix");const U=this.rowSize,G=this.bits;for(let te=v;te<R;te++){const de=te*U;for(let we=p;we<P;we++)G[de+Math.floor(we/32)]|=1<<(we&31)&4294967295}}getRow(p,v){v==null||v.getSize()<this.width?v=new j(this.width):v.clear();const _=this.rowSize,A=this.bits,P=p*_;for(let R=0;R<_;R++)v.setBulk(R*32,A[P+R]);return v}setRow(p,v){g.arraycopy(v.getBitArray(),0,this.bits,p*this.rowSize,this.rowSize)}rotate180(){const p=this.getWidth(),v=this.getHeight();let _=new j(p),A=new j(p);for(let P=0,R=Math.floor((v+1)/2);P<R;P++)_=this.getRow(P,_),A=this.getRow(v-1-P,A),_.reverse(),A.reverse(),this.setRow(P,A),this.setRow(v-1-P,_)}getEnclosingRectangle(){const p=this.width,v=this.height,_=this.rowSize,A=this.bits;let P=p,R=v,U=-1,G=-1;for(let te=0;te<v;te++)for(let de=0;de<_;de++){const we=A[te*_+de];if(we!==0){if(te<R&&(R=te),te>G&&(G=te),de*32<P){let Pe=0;for(;!(we<<31-Pe&4294967295);)Pe++;de*32+Pe<P&&(P=de*32+Pe)}if(de*32+31>U){let Pe=31;for(;!(we>>>Pe);)Pe--;de*32+Pe>U&&(U=de*32+Pe)}}}return U<P||G<R?null:Int32Array.from([P,R,U-P+1,G-R+1])}getTopLeftOnBit(){const p=this.rowSize,v=this.bits;let _=0;for(;_<v.length&&v[_]===0;)_++;if(_===v.length)return null;const A=_/p;let P=_%p*32;const R=v[_];let U=0;for(;!(R<<31-U&4294967295);)U++;return P+=U,Int32Array.from([P,A])}getBottomRightOnBit(){const p=this.rowSize,v=this.bits;let _=v.length-1;for(;_>=0&&v[_]===0;)_--;if(_<0)return null;const A=Math.floor(_/p);let P=Math.floor(_%p)*32;const R=v[_];let U=31;for(;!(R>>>U);)U--;return P+=U,Int32Array.from([P,A])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(p){if(!(p instanceof re))return!1;const v=p;return this.width===v.width&&this.height===v.height&&this.rowSize===v.rowSize&&S.equals(this.bits,v.bits)}hashCode(){let p=this.width;return p=31*p+this.width,p=31*p+this.height,p=31*p+this.rowSize,p=31*p+S.hashCode(this.bits),p}toString(p="X ",v="  ",_=`
`){return this.buildToString(p,v,_)}buildToString(p,v,_){let A=new Q;for(let P=0,R=this.height;P<R;P++){for(let U=0,G=this.width;U<G;U++)A.append(this.get(U,P)?p:v);A.append(_)}return A.toString()}clone(){return new re(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends u{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class se extends x{constructor(p){super(p),this.luminances=se.EMPTY,this.buckets=new Int32Array(se.LUMINANCE_BUCKETS)}getBlackRow(p,v){const _=this.getLuminanceSource(),A=_.getWidth();v==null||v.getSize()<A?v=new j(A):v.clear(),this.initArrays(A);const P=_.getRow(p,this.luminances),R=this.buckets;for(let G=0;G<A;G++)R[(P[G]&255)>>se.LUMINANCE_SHIFT]++;const U=se.estimateBlackPoint(R);if(A<3)for(let G=0;G<A;G++)(P[G]&255)<U&&v.set(G);else{let G=P[0]&255,te=P[1]&255;for(let de=1;de<A-1;de++){const we=P[de+1]&255;(te*4-G-we)/2<U&&v.set(de),G=te,te=we}}return v}getBlackMatrix(){const p=this.getLuminanceSource(),v=p.getWidth(),_=p.getHeight(),A=new re(v,_);this.initArrays(v);const P=this.buckets;for(let G=1;G<5;G++){const te=Math.floor(_*G/5),de=p.getRow(te,this.luminances),we=Math.floor(v*4/5);for(let Pe=Math.floor(v/5);Pe<we;Pe++){const Ze=de[Pe]&255;P[Ze>>se.LUMINANCE_SHIFT]++}}const R=se.estimateBlackPoint(P),U=p.getMatrix();for(let G=0;G<_;G++){const te=G*v;for(let de=0;de<v;de++)(U[te+de]&255)<R&&A.set(de,G)}return A}createBinarizer(p){return new se(p)}initArrays(p){this.luminances.length<p&&(this.luminances=new Uint8ClampedArray(p));const v=this.buckets;for(let _=0;_<se.LUMINANCE_BUCKETS;_++)v[_]=0}static estimateBlackPoint(p){const v=p.length;let _=0,A=0,P=0;for(let de=0;de<v;de++)p[de]>P&&(A=de,P=p[de]),p[de]>_&&(_=p[de]);let R=0,U=0;for(let de=0;de<v;de++){const we=de-A,Pe=p[de]*we*we;Pe>U&&(R=de,U=Pe)}if(A>R){const de=A;A=R,R=de}if(R-A<=v/16)throw new Z;let G=R-1,te=-1;for(let de=R-1;de>A;de--){const we=de-A,Pe=we*we*(R-de)*(_-p[de]);Pe>te&&(G=de,te=Pe)}return G<<se.LUMINANCE_SHIFT}}se.LUMINANCE_BITS=5,se.LUMINANCE_SHIFT=8-se.LUMINANCE_BITS,se.LUMINANCE_BUCKETS=1<<se.LUMINANCE_BITS,se.EMPTY=Uint8ClampedArray.from([0]);class K extends se{constructor(p){super(p),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const p=this.getLuminanceSource(),v=p.getWidth(),_=p.getHeight();if(v>=K.MINIMUM_DIMENSION&&_>=K.MINIMUM_DIMENSION){const A=p.getMatrix();let P=v>>K.BLOCK_SIZE_POWER;v&K.BLOCK_SIZE_MASK&&P++;let R=_>>K.BLOCK_SIZE_POWER;_&K.BLOCK_SIZE_MASK&&R++;const U=K.calculateBlackPoints(A,P,R,v,_),G=new re(v,_);K.calculateThresholdForBlock(A,P,R,v,_,U,G),this.matrix=G}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(p){return new K(p)}static calculateThresholdForBlock(p,v,_,A,P,R,U){const G=P-K.BLOCK_SIZE,te=A-K.BLOCK_SIZE;for(let de=0;de<_;de++){let we=de<<K.BLOCK_SIZE_POWER;we>G&&(we=G);const Pe=K.cap(de,2,_-3);for(let Ze=0;Ze<v;Ze++){let at=Ze<<K.BLOCK_SIZE_POWER;at>te&&(at=te);const dt=K.cap(Ze,2,v-3);let yt=0;for(let tr=-2;tr<=2;tr++){const ar=R[Pe+tr];yt+=ar[dt-2]+ar[dt-1]+ar[dt]+ar[dt+1]+ar[dt+2]}const Pt=yt/25;K.thresholdBlock(p,at,we,Pt,A,U)}}}static cap(p,v,_){return p<v?v:p>_?_:p}static thresholdBlock(p,v,_,A,P,R){for(let U=0,G=_*P+v;U<K.BLOCK_SIZE;U++,G+=P)for(let te=0;te<K.BLOCK_SIZE;te++)(p[G+te]&255)<=A&&R.set(v+te,_+U)}static calculateBlackPoints(p,v,_,A,P){const R=P-K.BLOCK_SIZE,U=A-K.BLOCK_SIZE,G=new Array(_);for(let te=0;te<_;te++){G[te]=new Int32Array(v);let de=te<<K.BLOCK_SIZE_POWER;de>R&&(de=R);for(let we=0;we<v;we++){let Pe=we<<K.BLOCK_SIZE_POWER;Pe>U&&(Pe=U);let Ze=0,at=255,dt=0;for(let Pt=0,tr=de*A+Pe;Pt<K.BLOCK_SIZE;Pt++,tr+=A){for(let ar=0;ar<K.BLOCK_SIZE;ar++){const sr=p[tr+ar]&255;Ze+=sr,sr<at&&(at=sr),sr>dt&&(dt=sr)}if(dt-at>K.MIN_DYNAMIC_RANGE)for(Pt++,tr+=A;Pt<K.BLOCK_SIZE;Pt++,tr+=A)for(let ar=0;ar<K.BLOCK_SIZE;ar++)Ze+=p[tr+ar]&255}let yt=Ze>>K.BLOCK_SIZE_POWER*2;if(dt-at<=K.MIN_DYNAMIC_RANGE&&(yt=at/2,te>0&&we>0)){const Pt=(G[te-1][we]+2*G[te][we-1]+G[te-1][we-1])/4;at<Pt&&(yt=Pt)}G[te][we]=yt}}return G}}K.BLOCK_SIZE_POWER=3,K.BLOCK_SIZE=1<<K.BLOCK_SIZE_POWER,K.BLOCK_SIZE_MASK=K.BLOCK_SIZE-1,K.MINIMUM_DIMENSION=K.BLOCK_SIZE*5,K.MIN_DYNAMIC_RANGE=24;class X{constructor(p,v){this.width=p,this.height=v}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(p,v,_,A){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const p=new Uint8ClampedArray(this.width);let v=new Q;for(let _=0;_<this.height;_++){const A=this.getRow(_,p);for(let P=0;P<this.width;P++){const R=A[P]&255;let U;R<64?U="#":R<128?U="+":R<192?U=".":U=" ",v.append(U)}v.append(`
`)}return v.toString()}}class Y extends X{constructor(p){super(p.getWidth(),p.getHeight()),this.delegate=p}getRow(p,v){const _=this.delegate.getRow(p,v),A=this.getWidth();for(let P=0;P<A;P++)_[P]=255-(_[P]&255);return _}getMatrix(){const p=this.delegate.getMatrix(),v=this.getWidth()*this.getHeight(),_=new Uint8ClampedArray(v);for(let A=0;A<v;A++)_[A]=255-(p[A]&255);return _}isCropSupported(){return this.delegate.isCropSupported()}crop(p,v,_,A){return new Y(this.delegate.crop(p,v,_,A))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Y(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Y(this.delegate.rotateCounterClockwise45())}}class oe extends X{constructor(p){super(p.width,p.height),this.canvas=p,this.tempCanvasElement=null,this.buffer=oe.makeBufferFromCanvasImageData(p)}static makeBufferFromCanvasImageData(p){const v=p.getContext("2d").getImageData(0,0,p.width,p.height);return oe.toGrayscaleBuffer(v.data,p.width,p.height)}static toGrayscaleBuffer(p,v,_){const A=new Uint8ClampedArray(v*_);for(let P=0,R=0,U=p.length;P<U;P+=4,R++){let G;if(p[P+3]===0)G=255;else{const de=p[P],we=p[P+1],Pe=p[P+2];G=306*de+601*we+117*Pe+512>>10}A[R]=G}return A}getRow(p,v){if(p<0||p>=this.getHeight())throw new h("Requested row is outside the image: "+p);const _=this.getWidth(),A=p*_;return v===null?v=this.buffer.slice(A,A+_):(v.length<_&&(v=new Uint8ClampedArray(_)),v.set(this.buffer.slice(A,A+_))),v}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(p,v,_,A){return super.crop(p,v,_,A),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const p=this.canvas.ownerDocument.createElement("canvas");p.width=this.canvas.width,p.height=this.canvas.height,this.tempCanvasElement=p}return this.tempCanvasElement}rotate(p){const v=this.getTempCanvasElement(),_=v.getContext("2d"),A=p*oe.DEGREE_TO_RADIANS,P=this.canvas.width,R=this.canvas.height,U=Math.ceil(Math.abs(Math.cos(A))*P+Math.abs(Math.sin(A))*R),G=Math.ceil(Math.abs(Math.sin(A))*P+Math.abs(Math.cos(A))*R);return v.width=U,v.height=G,_.translate(U/2,G/2),_.rotate(A),_.drawImage(this.canvas,P/-2,R/-2),this.buffer=oe.makeBufferFromCanvasImageData(v),this}invert(){return new Y(this)}}oe.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(p,v,_){this.deviceId=p,this.label=v,this.kind="videoinput",this.groupId=_||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var H=(globalThis||pm||self||window||void 0)&&(globalThis||pm||self||window||void 0).__awaiter||function(Ne,p,v,_){function A(P){return P instanceof v?P:new v(function(R){R(P)})}return new(v||(v=Promise))(function(P,R){function U(de){try{te(_.next(de))}catch(we){R(we)}}function G(de){try{te(_.throw(de))}catch(we){R(we)}}function te(de){de.done?P(de.value):A(de.value).then(U,G)}te((_=_.apply(Ne,p||[])).next())})};class J{constructor(p,v=500,_){this.reader=p,this.timeBetweenScansMillis=v,this._hints=_,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(p){this._timeBetweenDecodingAttempts=p<0?0:p}set hints(p){this._hints=p||null}get hints(){return this._hints}listVideoInputDevices(){return H(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const p=yield navigator.mediaDevices.enumerateDevices(),v=[];for(const _ of p){const A=_.kind==="video"?"videoinput":_.kind;if(A!=="videoinput")continue;const P=_.deviceId||_.id,R=_.label||`Video device ${v.length+1}`,U=_.groupId,G={deviceId:P,label:R,kind:A,groupId:U};v.push(G)}return v})}getVideoInputDevices(){return H(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(v=>new xe(v.deviceId,v.label))})}findDeviceById(p){return H(this,void 0,void 0,function*(){const v=yield this.listVideoInputDevices();return v?v.find(_=>_.deviceId===p):null})}decodeFromInputVideoDevice(p,v){return H(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(p,v)})}decodeOnceFromVideoDevice(p,v){return H(this,void 0,void 0,function*(){this.reset();let _;p?_={deviceId:{exact:p}}:_={facingMode:"environment"};const A={video:_};return yield this.decodeOnceFromConstraints(A,v)})}decodeOnceFromConstraints(p,v){return H(this,void 0,void 0,function*(){const _=yield navigator.mediaDevices.getUserMedia(p);return yield this.decodeOnceFromStream(_,v)})}decodeOnceFromStream(p,v){return H(this,void 0,void 0,function*(){this.reset();const _=yield this.attachStreamToVideo(p,v);return yield this.decodeOnce(_)})}decodeFromInputVideoDeviceContinuously(p,v,_){return H(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(p,v,_)})}decodeFromVideoDevice(p,v,_){return H(this,void 0,void 0,function*(){let A;p?A={deviceId:{exact:p}}:A={facingMode:"environment"};const P={video:A};return yield this.decodeFromConstraints(P,v,_)})}decodeFromConstraints(p,v,_){return H(this,void 0,void 0,function*(){const A=yield navigator.mediaDevices.getUserMedia(p);return yield this.decodeFromStream(A,v,_)})}decodeFromStream(p,v,_){return H(this,void 0,void 0,function*(){this.reset();const A=yield this.attachStreamToVideo(p,v);return yield this.decodeContinuously(A,_)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(p,v){return H(this,void 0,void 0,function*(){const _=this.prepareVideoElement(v);return this.addVideoSource(_,p),this.videoElement=_,this.stream=p,yield this.playVideoOnLoadAsync(_),_})}playVideoOnLoadAsync(p){return new Promise((v,_)=>this.playVideoOnLoad(p,()=>v()))}playVideoOnLoad(p,v){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(p),p.addEventListener("ended",this.videoEndedListener),p.addEventListener("canplay",this.videoCanPlayListener),p.addEventListener("playing",v),this.tryPlayVideo(p)}isVideoPlaying(p){return p.currentTime>0&&!p.paused&&!p.ended&&p.readyState>2}tryPlayVideo(p){return H(this,void 0,void 0,function*(){if(this.isVideoPlaying(p)){console.warn("Trying to play video that is already playing.");return}try{yield p.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(p,v){const _=document.getElementById(p);if(!_)throw new d(`element with id '${p}' not found`);if(_.nodeName.toLowerCase()!==v.toLowerCase())throw new d(`element with id '${p}' must be an ${v} element`);return _}decodeFromImage(p,v){if(!p&&!v)throw new d("either imageElement with a src set or an url must be provided");return v&&!p?this.decodeFromImageUrl(v):this.decodeFromImageElement(p)}decodeFromVideo(p,v){if(!p&&!v)throw new d("Either an element with a src set or an URL must be provided");return v&&!p?this.decodeFromVideoUrl(v):this.decodeFromVideoElement(p)}decodeFromVideoContinuously(p,v,_){if(p===void 0&&v===void 0)throw new d("Either an element with a src set or an URL must be provided");return v&&!p?this.decodeFromVideoUrlContinuously(v,_):this.decodeFromVideoElementContinuously(p,_)}decodeFromImageElement(p){if(!p)throw new d("An image element must be provided.");this.reset();const v=this.prepareImageElement(p);this.imageElement=v;let _;return this.isImageLoaded(v)?_=this.decodeOnce(v,!1,!0):_=this._decodeOnLoadImage(v),_}decodeFromVideoElement(p){const v=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideo(v)}decodeFromVideoElementContinuously(p,v){const _=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideoContinuously(_,v)}_decodeFromVideoElementSetup(p){if(!p)throw new d("A video element must be provided.");this.reset();const v=this.prepareVideoElement(p);return this.videoElement=v,v}decodeFromImageUrl(p){if(!p)throw new d("An URL must be provided.");this.reset();const v=this.prepareImageElement();this.imageElement=v;const _=this._decodeOnLoadImage(v);return v.src=p,_}decodeFromVideoUrl(p){if(!p)throw new d("An URL must be provided.");this.reset();const v=this.prepareVideoElement(),_=this.decodeFromVideoElement(v);return v.src=p,_}decodeFromVideoUrlContinuously(p,v){if(!p)throw new d("An URL must be provided.");this.reset();const _=this.prepareVideoElement(),A=this.decodeFromVideoElementContinuously(_,v);return _.src=p,A}_decodeOnLoadImage(p){return new Promise((v,_)=>{this.imageLoadedListener=()=>this.decodeOnce(p,!1,!0).then(v,_),p.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(p){return H(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(p),yield this.decodeOnce(p)})}_decodeOnLoadVideoContinuously(p,v){return H(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(p),this.decodeContinuously(p,v)})}isImageLoaded(p){return!(!p.complete||p.naturalWidth===0)}prepareImageElement(p){let v;return typeof p>"u"&&(v=document.createElement("img"),v.width=200,v.height=200),typeof p=="string"&&(v=this.getMediaElement(p,"img")),p instanceof HTMLImageElement&&(v=p),v}prepareVideoElement(p){let v;return!p&&typeof document<"u"&&(v=document.createElement("video"),v.width=200,v.height=200),typeof p=="string"&&(v=this.getMediaElement(p,"video")),p instanceof HTMLVideoElement&&(v=p),v.setAttribute("autoplay","true"),v.setAttribute("muted","true"),v.setAttribute("playsinline","true"),v}decodeOnce(p,v=!0,_=!0){this._stopAsyncDecode=!1;const A=(P,R)=>{if(this._stopAsyncDecode){R(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const U=this.decode(p);P(U)}catch(U){const G=v&&U instanceof Z,de=(U instanceof m||U instanceof I)&&_;if(G||de)return setTimeout(A,this._timeBetweenDecodingAttempts,P,R);R(U)}};return new Promise((P,R)=>A(P,R))}decodeContinuously(p,v){this._stopContinuousDecode=!1;const _=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const A=this.decode(p);v(A,null),setTimeout(_,this.timeBetweenScansMillis)}catch(A){v(null,A);const P=A instanceof m||A instanceof I,R=A instanceof Z;(P||R)&&setTimeout(_,this._timeBetweenDecodingAttempts)}};_()}decode(p){const v=this.createBinaryBitmap(p);return this.decodeBitmap(v)}_isHTMLVideoElement(p){return p.videoWidth!==0}drawFrameOnCanvas(p,v,_){v||(v={sx:0,sy:0,sWidth:p.videoWidth,sHeight:p.videoHeight,dx:0,dy:0,dWidth:p.videoWidth,dHeight:p.videoHeight}),_||(_=this.captureCanvasContext),_.drawImage(p,v.sx,v.sy,v.sWidth,v.sHeight,v.dx,v.dy,v.dWidth,v.dHeight)}drawImageOnCanvas(p,v,_=this.captureCanvasContext){v||(v={sx:0,sy:0,sWidth:p.naturalWidth,sHeight:p.naturalHeight,dx:0,dy:0,dWidth:p.naturalWidth,dHeight:p.naturalHeight}),_||(_=this.captureCanvasContext),_.drawImage(p,v.sx,v.sy,v.sWidth,v.sHeight,v.dx,v.dy,v.dWidth,v.dHeight)}createBinaryBitmap(p){this.getCaptureCanvasContext(p),this._isHTMLVideoElement(p)?this.drawFrameOnCanvas(p):this.drawImageOnCanvas(p);const v=this.getCaptureCanvas(p),_=new oe(v),A=new K(_);return new f(A)}getCaptureCanvasContext(p){if(!this.captureCanvasContext){const _=this.getCaptureCanvas(p).getContext("2d");this.captureCanvasContext=_}return this.captureCanvasContext}getCaptureCanvas(p){if(!this.captureCanvas){const v=this.createCaptureCanvas(p);this.captureCanvas=v}return this.captureCanvas}decodeBitmap(p){return this.reader.decode(p,this._hints)}createCaptureCanvas(p){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const v=document.createElement("canvas");let _,A;return typeof p<"u"&&(p instanceof HTMLVideoElement?(_=p.videoWidth,A=p.videoHeight):p instanceof HTMLImageElement&&(_=p.naturalWidth||p.width,A=p.naturalHeight||p.height)),v.style.width=_+"px",v.style.height=A+"px",v.width=_,v.height=A,v}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(p=>p.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(p,v){try{p.srcObject=v}catch{p.src=URL.createObjectURL(v)}}cleanVideoSource(p){try{p.srcObject=null}catch{p.src=""}this.videoElement.removeAttribute("src")}}class ie{constructor(p,v,_=v==null?0:8*v.length,A,P,R=g.currentTimeMillis()){this.text=p,this.rawBytes=v,this.numBits=_,this.resultPoints=A,this.format=P,this.timestamp=R,this.text=p,this.rawBytes=v,_==null?this.numBits=v==null?0:8*v.length:this.numBits=_,this.resultPoints=A,this.format=P,this.resultMetadata=null,R==null?this.timestamp=g.currentTimeMillis():this.timestamp=R}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(p,v){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(p,v)}putAllMetadata(p){p!==null&&(this.resultMetadata===null?this.resultMetadata=p:this.resultMetadata=new Map(p))}addResultPoints(p){const v=this.resultPoints;if(v===null)this.resultPoints=p;else if(p!==null&&p.length>0){const _=new Array(v.length+p.length);g.arraycopy(v,0,_,0,v.length),g.arraycopy(p,0,_,v.length,p.length),this.resultPoints=_}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ce;(function(Ne){Ne[Ne.AZTEC=0]="AZTEC",Ne[Ne.CODABAR=1]="CODABAR",Ne[Ne.CODE_39=2]="CODE_39",Ne[Ne.CODE_93=3]="CODE_93",Ne[Ne.CODE_128=4]="CODE_128",Ne[Ne.DATA_MATRIX=5]="DATA_MATRIX",Ne[Ne.EAN_8=6]="EAN_8",Ne[Ne.EAN_13=7]="EAN_13",Ne[Ne.ITF=8]="ITF",Ne[Ne.MAXICODE=9]="MAXICODE",Ne[Ne.PDF_417=10]="PDF_417",Ne[Ne.QR_CODE=11]="QR_CODE",Ne[Ne.RSS_14=12]="RSS_14",Ne[Ne.RSS_EXPANDED=13]="RSS_EXPANDED",Ne[Ne.UPC_A=14]="UPC_A",Ne[Ne.UPC_E=15]="UPC_E",Ne[Ne.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ce||(ce={}));var me=ce,he;(function(Ne){Ne[Ne.OTHER=0]="OTHER",Ne[Ne.ORIENTATION=1]="ORIENTATION",Ne[Ne.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Ne[Ne.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Ne[Ne.ISSUE_NUMBER=4]="ISSUE_NUMBER",Ne[Ne.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Ne[Ne.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Ne[Ne.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Ne[Ne.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Ne[Ne.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Ne[Ne.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(he||(he={}));var _e=he;class ue{constructor(p,v,_,A,P=-1,R=-1){this.rawBytes=p,this.text=v,this.byteSegments=_,this.ecLevel=A,this.structuredAppendSequenceNumber=P,this.structuredAppendParity=R,this.numBits=p==null?0:8*p.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(p){this.numBits=p}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(p){this.errorsCorrected=p}getErasures(){return this.erasures}setErasures(p){this.erasures=p}getOther(){return this.other}setOther(p){this.other=p}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class je{exp(p){return this.expTable[p]}log(p){if(p===0)throw new h;return this.logTable[p]}static addOrSubtract(p,v){return p^v}}class ye{constructor(p,v){if(v.length===0)throw new h;this.field=p;const _=v.length;if(_>1&&v[0]===0){let A=1;for(;A<_&&v[A]===0;)A++;A===_?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(_-A),g.arraycopy(v,A,this.coefficients,0,this.coefficients.length))}else this.coefficients=v}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(p){return this.coefficients[this.coefficients.length-1-p]}evaluateAt(p){if(p===0)return this.getCoefficient(0);const v=this.coefficients;let _;if(p===1){_=0;for(let R=0,U=v.length;R!==U;R++){const G=v[R];_=je.addOrSubtract(_,G)}return _}_=v[0];const A=v.length,P=this.field;for(let R=1;R<A;R++)_=je.addOrSubtract(P.multiply(p,_),v[R]);return _}addOrSubtract(p){if(!this.field.equals(p.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return p;if(p.isZero())return this;let v=this.coefficients,_=p.coefficients;if(v.length>_.length){const R=v;v=_,_=R}let A=new Int32Array(_.length);const P=_.length-v.length;g.arraycopy(_,0,A,0,P);for(let R=P;R<_.length;R++)A[R]=je.addOrSubtract(v[R-P],_[R]);return new ye(this.field,A)}multiply(p){if(!this.field.equals(p.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||p.isZero())return this.field.getZero();const v=this.coefficients,_=v.length,A=p.coefficients,P=A.length,R=new Int32Array(_+P-1),U=this.field;for(let G=0;G<_;G++){const te=v[G];for(let de=0;de<P;de++)R[G+de]=je.addOrSubtract(R[G+de],U.multiply(te,A[de]))}return new ye(U,R)}multiplyScalar(p){if(p===0)return this.field.getZero();if(p===1)return this;const v=this.coefficients.length,_=this.field,A=new Int32Array(v),P=this.coefficients;for(let R=0;R<v;R++)A[R]=_.multiply(P[R],p);return new ye(_,A)}multiplyByMonomial(p,v){if(p<0)throw new h;if(v===0)return this.field.getZero();const _=this.coefficients,A=_.length,P=new Int32Array(A+p),R=this.field;for(let U=0;U<A;U++)P[U]=R.multiply(_[U],v);return new ye(R,P)}divide(p){if(!this.field.equals(p.field))throw new h("GenericGFPolys do not have same GenericGF field");if(p.isZero())throw new h("Divide by 0");const v=this.field;let _=v.getZero(),A=this;const P=p.getCoefficient(p.getDegree()),R=v.inverse(P);for(;A.getDegree()>=p.getDegree()&&!A.isZero();){const U=A.getDegree()-p.getDegree(),G=v.multiply(A.getCoefficient(A.getDegree()),R),te=p.multiplyByMonomial(U,G),de=v.buildMonomial(U,G);_=_.addOrSubtract(de),A=A.addOrSubtract(te)}return[_,A]}toString(){let p="";for(let v=this.getDegree();v>=0;v--){let _=this.getCoefficient(v);if(_!==0){if(_<0?(p+=" - ",_=-_):p.length>0&&(p+=" + "),v===0||_!==1){const A=this.field.log(_);A===0?p+="1":A===1?p+="a":(p+="a^",p+=A)}v!==0&&(v===1?p+="x":(p+="x^",p+=v))}}return p}}class Le extends u{}Le.kind="ArithmeticException";class Ge extends je{constructor(p,v,_){super(),this.primitive=p,this.size=v,this.generatorBase=_;const A=new Int32Array(v);let P=1;for(let U=0;U<v;U++)A[U]=P,P*=2,P>=v&&(P^=p,P&=v-1);this.expTable=A;const R=new Int32Array(v);for(let U=0;U<v-1;U++)R[A[U]]=U;this.logTable=R,this.zero=new ye(this,Int32Array.from([0])),this.one=new ye(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(p,v){if(p<0)throw new h;if(v===0)return this.zero;const _=new Int32Array(p+1);return _[0]=v,new ye(this,_)}inverse(p){if(p===0)throw new Le;return this.expTable[this.size-this.logTable[p]-1]}multiply(p,v){return p===0||v===0?0:this.expTable[(this.logTable[p]+this.logTable[v])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(p){return p===this}}Ge.AZTEC_DATA_12=new Ge(4201,4096,1),Ge.AZTEC_DATA_10=new Ge(1033,1024,1),Ge.AZTEC_DATA_6=new Ge(67,64,1),Ge.AZTEC_PARAM=new Ge(19,16,1),Ge.QR_CODE_FIELD_256=new Ge(285,256,0),Ge.DATA_MATRIX_FIELD_256=new Ge(301,256,1),Ge.AZTEC_DATA_8=Ge.DATA_MATRIX_FIELD_256,Ge.MAXICODE_FIELD_64=Ge.AZTEC_DATA_6;class Be extends u{}Be.kind="ReedSolomonException";class Te extends u{}Te.kind="IllegalStateException";class ze{constructor(p){this.field=p}decode(p,v){const _=this.field,A=new ye(_,p),P=new Int32Array(v);let R=!0;for(let Ze=0;Ze<v;Ze++){const at=A.evaluateAt(_.exp(Ze+_.getGeneratorBase()));P[P.length-1-Ze]=at,at!==0&&(R=!1)}if(R)return;const U=new ye(_,P),G=this.runEuclideanAlgorithm(_.buildMonomial(v,1),U,v),te=G[0],de=G[1],we=this.findErrorLocations(te),Pe=this.findErrorMagnitudes(de,we);for(let Ze=0;Ze<we.length;Ze++){const at=p.length-1-_.log(we[Ze]);if(at<0)throw new Be("Bad error location");p[at]=Ge.addOrSubtract(p[at],Pe[Ze])}}runEuclideanAlgorithm(p,v,_){if(p.getDegree()<v.getDegree()){const Ze=p;p=v,v=Ze}const A=this.field;let P=p,R=v,U=A.getZero(),G=A.getOne();for(;R.getDegree()>=(_/2|0);){let Ze=P,at=U;if(P=R,U=G,P.isZero())throw new Be("r_{i-1} was zero");R=Ze;let dt=A.getZero();const yt=P.getCoefficient(P.getDegree()),Pt=A.inverse(yt);for(;R.getDegree()>=P.getDegree()&&!R.isZero();){const tr=R.getDegree()-P.getDegree(),ar=A.multiply(R.getCoefficient(R.getDegree()),Pt);dt=dt.addOrSubtract(A.buildMonomial(tr,ar)),R=R.addOrSubtract(P.multiplyByMonomial(tr,ar))}if(G=dt.multiply(U).addOrSubtract(at),R.getDegree()>=P.getDegree())throw new Te("Division algorithm failed to reduce polynomial?")}const te=G.getCoefficient(0);if(te===0)throw new Be("sigmaTilde(0) was zero");const de=A.inverse(te),we=G.multiplyScalar(de),Pe=R.multiplyScalar(de);return[we,Pe]}findErrorLocations(p){const v=p.getDegree();if(v===1)return Int32Array.from([p.getCoefficient(1)]);const _=new Int32Array(v);let A=0;const P=this.field;for(let R=1;R<P.getSize()&&A<v;R++)p.evaluateAt(R)===0&&(_[A]=P.inverse(R),A++);if(A!==v)throw new Be("Error locator degree does not match number of roots");return _}findErrorMagnitudes(p,v){const _=v.length,A=new Int32Array(_),P=this.field;for(let R=0;R<_;R++){const U=P.inverse(v[R]);let G=1;for(let te=0;te<_;te++)if(R!==te){const de=P.multiply(v[te],U),we=de&1?de&-2:de|1;G=P.multiply(G,we)}A[R]=P.multiply(p.evaluateAt(U),P.inverse(G)),P.getGeneratorBase()!==0&&(A[R]=P.multiply(A[R],U))}return A}}var tt;(function(Ne){Ne[Ne.UPPER=0]="UPPER",Ne[Ne.LOWER=1]="LOWER",Ne[Ne.MIXED=2]="MIXED",Ne[Ne.DIGIT=3]="DIGIT",Ne[Ne.PUNCT=4]="PUNCT",Ne[Ne.BINARY=5]="BINARY"})(tt||(tt={}));class Re{decode(p){this.ddata=p;let v=p.getBits(),_=this.extractBits(v),A=this.correctBits(_),P=Re.convertBoolArrayToByteArray(A),R=Re.getEncodedData(A),U=new ue(P,R,null,null);return U.setNumBits(A.length),U}static highLevelDecode(p){return this.getEncodedData(p)}static getEncodedData(p){let v=p.length,_=tt.UPPER,A=tt.UPPER,P="",R=0;for(;R<v;)if(A===tt.BINARY){if(v-R<5)break;let U=Re.readCode(p,R,5);if(R+=5,U===0){if(v-R<11)break;U=Re.readCode(p,R,11)+31,R+=11}for(let G=0;G<U;G++){if(v-R<8){R=v;break}const te=Re.readCode(p,R,8);P+=q.castAsNonUtf8Char(te),R+=8}A=_}else{let U=A===tt.DIGIT?4:5;if(v-R<U)break;let G=Re.readCode(p,R,U);R+=U;let te=Re.getCharacter(A,G);te.startsWith("CTRL_")?(_=A,A=Re.getTable(te.charAt(5)),te.charAt(6)==="L"&&(_=A)):(P+=te,A=_)}return P}static getTable(p){switch(p){case"L":return tt.LOWER;case"P":return tt.PUNCT;case"M":return tt.MIXED;case"D":return tt.DIGIT;case"B":return tt.BINARY;case"U":default:return tt.UPPER}}static getCharacter(p,v){switch(p){case tt.UPPER:return Re.UPPER_TABLE[v];case tt.LOWER:return Re.LOWER_TABLE[v];case tt.MIXED:return Re.MIXED_TABLE[v];case tt.PUNCT:return Re.PUNCT_TABLE[v];case tt.DIGIT:return Re.DIGIT_TABLE[v];default:throw new Te("Bad table")}}correctBits(p){let v,_;this.ddata.getNbLayers()<=2?(_=6,v=Ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(_=8,v=Ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(_=10,v=Ge.AZTEC_DATA_10):(_=12,v=Ge.AZTEC_DATA_12);let A=this.ddata.getNbDatablocks(),P=p.length/_;if(P<A)throw new I;let R=p.length%_,U=new Int32Array(P);for(let Pe=0;Pe<P;Pe++,R+=_)U[Pe]=Re.readCode(p,R,_);try{new ze(v).decode(U,P-A)}catch(Pe){throw new I(Pe)}let G=(1<<_)-1,te=0;for(let Pe=0;Pe<A;Pe++){let Ze=U[Pe];if(Ze===0||Ze===G)throw new I;(Ze===1||Ze===G-1)&&te++}let de=new Array(A*_-te),we=0;for(let Pe=0;Pe<A;Pe++){let Ze=U[Pe];if(Ze===1||Ze===G-1)de.fill(Ze>1,we,we+_-1),we+=_-1;else for(let at=_-1;at>=0;--at)de[we++]=(Ze&1<<at)!==0}return de}extractBits(p){let v=this.ddata.isCompact(),_=this.ddata.getNbLayers(),A=(v?11:14)+_*4,P=new Int32Array(A),R=new Array(this.totalBitsInLayer(_,v));if(v)for(let U=0;U<P.length;U++)P[U]=U;else{let U=A+1+2*E.truncDivision(E.truncDivision(A,2)-1,15),G=A/2,te=E.truncDivision(U,2);for(let de=0;de<G;de++){let we=de+E.truncDivision(de,15);P[G-de-1]=te-we-1,P[G+de]=te+we+1}}for(let U=0,G=0;U<_;U++){let te=(_-U)*4+(v?9:12),de=U*2,we=A-1-de;for(let Pe=0;Pe<te;Pe++){let Ze=Pe*2;for(let at=0;at<2;at++)R[G+Ze+at]=p.get(P[de+at],P[de+Pe]),R[G+2*te+Ze+at]=p.get(P[de+Pe],P[we-at]),R[G+4*te+Ze+at]=p.get(P[we-at],P[we-Pe]),R[G+6*te+Ze+at]=p.get(P[we-Pe],P[de+at])}G+=te*8}return R}static readCode(p,v,_){let A=0;for(let P=v;P<v+_;P++)A<<=1,p[P]&&(A|=1);return A}static readByte(p,v){let _=p.length-v;return _>=8?Re.readCode(p,v,8):Re.readCode(p,v,_)<<8-_}static convertBoolArrayToByteArray(p){let v=new Uint8Array((p.length+7)/8);for(let _=0;_<v.length;_++)v[_]=Re.readByte(p,8*_);return v}totalBitsInLayer(p,v){return((v?88:112)+16*p)*p}}Re.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Re.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Re.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Re.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Re.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ue{constructor(){}static round(p){return p===NaN?0:p<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:p>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:p+(p<0?-.5:.5)|0}static distance(p,v,_,A){const P=p-_,R=v-A;return Math.sqrt(P*P+R*R)}static sum(p){let v=0;for(let _=0,A=p.length;_!==A;_++){const P=p[_];v+=P}return v}}class xt{static floatToIntBits(p){return p}}xt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class st{constructor(p,v){this.x=p,this.y=v}getX(){return this.x}getY(){return this.y}equals(p){if(p instanceof st){const v=p;return this.x===v.x&&this.y===v.y}return!1}hashCode(){return 31*xt.floatToIntBits(this.x)+xt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(p){const v=this.distance(p[0],p[1]),_=this.distance(p[1],p[2]),A=this.distance(p[0],p[2]);let P,R,U;if(_>=v&&_>=A?(R=p[0],P=p[1],U=p[2]):A>=_&&A>=v?(R=p[1],P=p[0],U=p[2]):(R=p[2],P=p[0],U=p[1]),this.crossProductZ(P,R,U)<0){const G=P;P=U,U=G}p[0]=P,p[1]=R,p[2]=U}static distance(p,v){return Ue.distance(p.x,p.y,v.x,v.y)}static crossProductZ(p,v,_){const A=v.x,P=v.y;return(_.x-A)*(p.y-P)-(_.y-P)*(p.x-A)}}class Xt{constructor(p,v){this.bits=p,this.points=v}getBits(){return this.bits}getPoints(){return this.points}}class Jt extends Xt{constructor(p,v,_,A,P){super(p,v),this.compact=_,this.nbDatablocks=A,this.nbLayers=P}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class _r{constructor(p,v,_,A){this.image=p,this.height=p.getHeight(),this.width=p.getWidth(),v==null&&(v=_r.INIT_SIZE),_==null&&(_=p.getWidth()/2|0),A==null&&(A=p.getHeight()/2|0);const P=v/2|0;if(this.leftInit=_-P,this.rightInit=_+P,this.upInit=A-P,this.downInit=A+P,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let p=this.leftInit,v=this.rightInit,_=this.upInit,A=this.downInit,P=!1,R=!0,U=!1,G=!1,te=!1,de=!1,we=!1;const Pe=this.width,Ze=this.height;for(;R;){R=!1;let at=!0;for(;(at||!G)&&v<Pe;)at=this.containsBlackPoint(_,A,v,!1),at?(v++,R=!0,G=!0):G||v++;if(v>=Pe){P=!0;break}let dt=!0;for(;(dt||!te)&&A<Ze;)dt=this.containsBlackPoint(p,v,A,!0),dt?(A++,R=!0,te=!0):te||A++;if(A>=Ze){P=!0;break}let yt=!0;for(;(yt||!de)&&p>=0;)yt=this.containsBlackPoint(_,A,p,!1),yt?(p--,R=!0,de=!0):de||p--;if(p<0){P=!0;break}let Pt=!0;for(;(Pt||!we)&&_>=0;)Pt=this.containsBlackPoint(p,v,_,!0),Pt?(_--,R=!0,we=!0):we||_--;if(_<0){P=!0;break}R&&(U=!0)}if(!P&&U){const at=v-p;let dt=null;for(let ar=1;dt===null&&ar<at;ar++)dt=this.getBlackPointOnSegment(p,A-ar,p+ar,A);if(dt==null)throw new Z;let yt=null;for(let ar=1;yt===null&&ar<at;ar++)yt=this.getBlackPointOnSegment(p,_+ar,p+ar,_);if(yt==null)throw new Z;let Pt=null;for(let ar=1;Pt===null&&ar<at;ar++)Pt=this.getBlackPointOnSegment(v,_+ar,v-ar,_);if(Pt==null)throw new Z;let tr=null;for(let ar=1;tr===null&&ar<at;ar++)tr=this.getBlackPointOnSegment(v,A-ar,v-ar,A);if(tr==null)throw new Z;return this.centerEdges(tr,dt,Pt,yt)}else throw new Z}getBlackPointOnSegment(p,v,_,A){const P=Ue.round(Ue.distance(p,v,_,A)),R=(_-p)/P,U=(A-v)/P,G=this.image;for(let te=0;te<P;te++){const de=Ue.round(p+te*R),we=Ue.round(v+te*U);if(G.get(de,we))return new st(de,we)}return null}centerEdges(p,v,_,A){const P=p.getX(),R=p.getY(),U=v.getX(),G=v.getY(),te=_.getX(),de=_.getY(),we=A.getX(),Pe=A.getY(),Ze=_r.CORR;return P<this.width/2?[new st(we-Ze,Pe+Ze),new st(U+Ze,G+Ze),new st(te-Ze,de-Ze),new st(P+Ze,R-Ze)]:[new st(we+Ze,Pe+Ze),new st(U+Ze,G-Ze),new st(te-Ze,de+Ze),new st(P-Ze,R-Ze)]}containsBlackPoint(p,v,_,A){const P=this.image;if(A){for(let R=p;R<=v;R++)if(P.get(R,_))return!0}else for(let R=p;R<=v;R++)if(P.get(_,R))return!0;return!1}}_r.INIT_SIZE=10,_r.CORR=1;class lt{static checkAndNudgePoints(p,v){const _=p.getWidth(),A=p.getHeight();let P=!0;for(let R=0;R<v.length&&P;R+=2){const U=Math.floor(v[R]),G=Math.floor(v[R+1]);if(U<-1||U>_||G<-1||G>A)throw new Z;P=!1,U===-1?(v[R]=0,P=!0):U===_&&(v[R]=_-1,P=!0),G===-1?(v[R+1]=0,P=!0):G===A&&(v[R+1]=A-1,P=!0)}P=!0;for(let R=v.length-2;R>=0&&P;R-=2){const U=Math.floor(v[R]),G=Math.floor(v[R+1]);if(U<-1||U>_||G<-1||G>A)throw new Z;P=!1,U===-1?(v[R]=0,P=!0):U===_&&(v[R]=_-1,P=!0),G===-1?(v[R+1]=0,P=!0):G===A&&(v[R+1]=A-1,P=!0)}}}class pt{constructor(p,v,_,A,P,R,U,G,te){this.a11=p,this.a21=v,this.a31=_,this.a12=A,this.a22=P,this.a32=R,this.a13=U,this.a23=G,this.a33=te}static quadrilateralToQuadrilateral(p,v,_,A,P,R,U,G,te,de,we,Pe,Ze,at,dt,yt){const Pt=pt.quadrilateralToSquare(p,v,_,A,P,R,U,G);return pt.squareToQuadrilateral(te,de,we,Pe,Ze,at,dt,yt).times(Pt)}transformPoints(p){const v=p.length,_=this.a11,A=this.a12,P=this.a13,R=this.a21,U=this.a22,G=this.a23,te=this.a31,de=this.a32,we=this.a33;for(let Pe=0;Pe<v;Pe+=2){const Ze=p[Pe],at=p[Pe+1],dt=P*Ze+G*at+we;p[Pe]=(_*Ze+R*at+te)/dt,p[Pe+1]=(A*Ze+U*at+de)/dt}}transformPointsWithValues(p,v){const _=this.a11,A=this.a12,P=this.a13,R=this.a21,U=this.a22,G=this.a23,te=this.a31,de=this.a32,we=this.a33,Pe=p.length;for(let Ze=0;Ze<Pe;Ze++){const at=p[Ze],dt=v[Ze],yt=P*at+G*dt+we;p[Ze]=(_*at+R*dt+te)/yt,v[Ze]=(A*at+U*dt+de)/yt}}static squareToQuadrilateral(p,v,_,A,P,R,U,G){const te=p-_+P-U,de=v-A+R-G;if(te===0&&de===0)return new pt(_-p,P-_,p,A-v,R-A,v,0,0,1);{const we=_-P,Pe=U-P,Ze=A-R,at=G-R,dt=we*at-Pe*Ze,yt=(te*at-Pe*de)/dt,Pt=(we*de-te*Ze)/dt;return new pt(_-p+yt*_,U-p+Pt*U,p,A-v+yt*A,G-v+Pt*G,v,yt,Pt,1)}}static quadrilateralToSquare(p,v,_,A,P,R,U,G){return pt.squareToQuadrilateral(p,v,_,A,P,R,U,G).buildAdjoint()}buildAdjoint(){return new pt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(p){return new pt(this.a11*p.a11+this.a21*p.a12+this.a31*p.a13,this.a11*p.a21+this.a21*p.a22+this.a31*p.a23,this.a11*p.a31+this.a21*p.a32+this.a31*p.a33,this.a12*p.a11+this.a22*p.a12+this.a32*p.a13,this.a12*p.a21+this.a22*p.a22+this.a32*p.a23,this.a12*p.a31+this.a22*p.a32+this.a32*p.a33,this.a13*p.a11+this.a23*p.a12+this.a33*p.a13,this.a13*p.a21+this.a23*p.a22+this.a33*p.a23,this.a13*p.a31+this.a23*p.a32+this.a33*p.a33)}}class er extends lt{sampleGrid(p,v,_,A,P,R,U,G,te,de,we,Pe,Ze,at,dt,yt,Pt,tr,ar){const sr=pt.quadrilateralToQuadrilateral(A,P,R,U,G,te,de,we,Pe,Ze,at,dt,yt,Pt,tr,ar);return this.sampleGridWithTransform(p,v,_,sr)}sampleGridWithTransform(p,v,_,A){if(v<=0||_<=0)throw new Z;const P=new re(v,_),R=new Float32Array(2*v);for(let U=0;U<_;U++){const G=R.length,te=U+.5;for(let de=0;de<G;de+=2)R[de]=de/2+.5,R[de+1]=te;A.transformPoints(R),lt.checkAndNudgePoints(p,R);try{for(let de=0;de<G;de+=2)p.get(Math.floor(R[de]),Math.floor(R[de+1]))&&P.set(de/2,U)}catch{throw new Z}}return P}}class Vt{static setGridSampler(p){Vt.gridSampler=p}static getInstance(){return Vt.gridSampler}}Vt.gridSampler=new er;class Kt{constructor(p,v){this.x=p,this.y=v}toResultPoint(){return new st(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ur{constructor(p){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=p}detect(){return this.detectMirror(!1)}detectMirror(p){let v=this.getMatrixCenter(),_=this.getBullsEyeCorners(v);if(p){let R=_[0];_[0]=_[2],_[2]=R}this.extractParameters(_);let A=this.sampleGrid(this.image,_[this.shift%4],_[(this.shift+1)%4],_[(this.shift+2)%4],_[(this.shift+3)%4]),P=this.getMatrixCornerPoints(_);return new Jt(A,P,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(p){if(!this.isValidPoint(p[0])||!this.isValidPoint(p[1])||!this.isValidPoint(p[2])||!this.isValidPoint(p[3]))throw new Z;let v=2*this.nbCenterLayers,_=new Int32Array([this.sampleLine(p[0],p[1],v),this.sampleLine(p[1],p[2],v),this.sampleLine(p[2],p[3],v),this.sampleLine(p[3],p[0],v)]);this.shift=this.getRotation(_,v);let A=0;for(let R=0;R<4;R++){let U=_[(this.shift+R)%4];this.compact?(A<<=7,A+=U>>1&127):(A<<=10,A+=(U>>2&992)+(U>>1&31))}let P=this.getCorrectedParameterData(A,this.compact);this.compact?(this.nbLayers=(P>>6)+1,this.nbDataBlocks=(P&63)+1):(this.nbLayers=(P>>11)+1,this.nbDataBlocks=(P&2047)+1)}getRotation(p,v){let _=0;p.forEach((A,P,R)=>{let U=(A>>v-2<<1)+(A&1);_=(_<<3)+U}),_=((_&1)<<11)+(_>>1);for(let A=0;A<4;A++)if(E.bitCount(_^this.EXPECTED_CORNER_BITS[A])<=2)return A;throw new Z}getCorrectedParameterData(p,v){let _,A;v?(_=7,A=2):(_=10,A=4);let P=_-A,R=new Int32Array(_);for(let G=_-1;G>=0;--G)R[G]=p&15,p>>=4;try{new ze(Ge.AZTEC_PARAM).decode(R,P)}catch{throw new Z}let U=0;for(let G=0;G<A;G++)U=(U<<4)+R[G];return U}getBullsEyeCorners(p){let v=p,_=p,A=p,P=p,R=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let we=this.getFirstDifferent(v,R,1,-1),Pe=this.getFirstDifferent(_,R,1,1),Ze=this.getFirstDifferent(A,R,-1,1),at=this.getFirstDifferent(P,R,-1,-1);if(this.nbCenterLayers>2){let dt=this.distancePoint(at,we)*this.nbCenterLayers/(this.distancePoint(P,v)*(this.nbCenterLayers+2));if(dt<.75||dt>1.25||!this.isWhiteOrBlackRectangle(we,Pe,Ze,at))break}v=we,_=Pe,A=Ze,P=at,R=!R}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let U=new st(v.getX()+.5,v.getY()-.5),G=new st(_.getX()+.5,_.getY()+.5),te=new st(A.getX()-.5,A.getY()+.5),de=new st(P.getX()-.5,P.getY()-.5);return this.expandSquare([U,G,te,de],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let p,v,_,A;try{let U=new _r(this.image).detect();p=U[0],v=U[1],_=U[2],A=U[3]}catch{let G=this.image.getWidth()/2,te=this.image.getHeight()/2;p=this.getFirstDifferent(new Kt(G+7,te-7),!1,1,-1).toResultPoint(),v=this.getFirstDifferent(new Kt(G+7,te+7),!1,1,1).toResultPoint(),_=this.getFirstDifferent(new Kt(G-7,te+7),!1,-1,1).toResultPoint(),A=this.getFirstDifferent(new Kt(G-7,te-7),!1,-1,-1).toResultPoint()}let P=Ue.round((p.getX()+A.getX()+v.getX()+_.getX())/4),R=Ue.round((p.getY()+A.getY()+v.getY()+_.getY())/4);try{let U=new _r(this.image,15,P,R).detect();p=U[0],v=U[1],_=U[2],A=U[3]}catch{p=this.getFirstDifferent(new Kt(P+7,R-7),!1,1,-1).toResultPoint(),v=this.getFirstDifferent(new Kt(P+7,R+7),!1,1,1).toResultPoint(),_=this.getFirstDifferent(new Kt(P-7,R+7),!1,-1,1).toResultPoint(),A=this.getFirstDifferent(new Kt(P-7,R-7),!1,-1,-1).toResultPoint()}return P=Ue.round((p.getX()+A.getX()+v.getX()+_.getX())/4),R=Ue.round((p.getY()+A.getY()+v.getY()+_.getY())/4),new Kt(P,R)}getMatrixCornerPoints(p){return this.expandSquare(p,2*this.nbCenterLayers,this.getDimension())}sampleGrid(p,v,_,A,P){let R=Vt.getInstance(),U=this.getDimension(),G=U/2-this.nbCenterLayers,te=U/2+this.nbCenterLayers;return R.sampleGrid(p,U,U,G,G,te,G,te,te,G,te,v.getX(),v.getY(),_.getX(),_.getY(),A.getX(),A.getY(),P.getX(),P.getY())}sampleLine(p,v,_){let A=0,P=this.distanceResultPoint(p,v),R=P/_,U=p.getX(),G=p.getY(),te=R*(v.getX()-p.getX())/P,de=R*(v.getY()-p.getY())/P;for(let we=0;we<_;we++)this.image.get(Ue.round(U+we*te),Ue.round(G+we*de))&&(A|=1<<_-we-1);return A}isWhiteOrBlackRectangle(p,v,_,A){let P=3;p=new Kt(p.getX()-P,p.getY()+P),v=new Kt(v.getX()-P,v.getY()-P),_=new Kt(_.getX()+P,_.getY()-P),A=new Kt(A.getX()+P,A.getY()+P);let R=this.getColor(A,p);if(R===0)return!1;let U=this.getColor(p,v);return U!==R||(U=this.getColor(v,_),U!==R)?!1:(U=this.getColor(_,A),U===R)}getColor(p,v){let _=this.distancePoint(p,v),A=(v.getX()-p.getX())/_,P=(v.getY()-p.getY())/_,R=0,U=p.getX(),G=p.getY(),te=this.image.get(p.getX(),p.getY()),de=Math.ceil(_);for(let Pe=0;Pe<de;Pe++)U+=A,G+=P,this.image.get(Ue.round(U),Ue.round(G))!==te&&R++;let we=R/_;return we>.1&&we<.9?0:we<=.1===te?1:-1}getFirstDifferent(p,v,_,A){let P=p.getX()+_,R=p.getY()+A;for(;this.isValid(P,R)&&this.image.get(P,R)===v;)P+=_,R+=A;for(P-=_,R-=A;this.isValid(P,R)&&this.image.get(P,R)===v;)P+=_;for(P-=_;this.isValid(P,R)&&this.image.get(P,R)===v;)R+=A;return R-=A,new Kt(P,R)}expandSquare(p,v,_){let A=_/(2*v),P=p[0].getX()-p[2].getX(),R=p[0].getY()-p[2].getY(),U=(p[0].getX()+p[2].getX())/2,G=(p[0].getY()+p[2].getY())/2,te=new st(U+A*P,G+A*R),de=new st(U-A*P,G-A*R);P=p[1].getX()-p[3].getX(),R=p[1].getY()-p[3].getY(),U=(p[1].getX()+p[3].getX())/2,G=(p[1].getY()+p[3].getY())/2;let we=new st(U+A*P,G+A*R),Pe=new st(U-A*P,G-A*R);return[te,we,de,Pe]}isValid(p,v){return p>=0&&p<this.image.getWidth()&&v>0&&v<this.image.getHeight()}isValidPoint(p){let v=Ue.round(p.getX()),_=Ue.round(p.getY());return this.isValid(v,_)}distancePoint(p,v){return Ue.distance(p.getX(),p.getY(),v.getX(),v.getY())}distanceResultPoint(p,v){return Ue.distance(p.getX(),p.getY(),v.getX(),v.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class rt{decode(p,v=null){let _=null,A=new ur(p.getBlackMatrix()),P=null,R=null;try{let de=A.detectMirror(!1);P=de.getPoints(),this.reportFoundResultPoints(v,P),R=new Re().decode(de)}catch(de){_=de}if(R==null)try{let de=A.detectMirror(!0);P=de.getPoints(),this.reportFoundResultPoints(v,P),R=new Re().decode(de)}catch(de){throw _??de}let U=new ie(R.getText(),R.getRawBytes(),R.getNumBits(),P,me.AZTEC,g.currentTimeMillis()),G=R.getByteSegments();G!=null&&U.putMetadata(_e.BYTE_SEGMENTS,G);let te=R.getECLevel();return te!=null&&U.putMetadata(_e.ERROR_CORRECTION_LEVEL,te),U}reportFoundResultPoints(p,v){if(p!=null){let _=p.get(O.NEED_RESULT_POINT_CALLBACK);_!=null&&v.forEach((A,P,R)=>{_.foundPossibleResultPoint(A)})}}reset(){}}class Lt extends J{constructor(p=500){super(new rt,p)}}class Dt{decode(p,v){try{return this.doDecode(p,v)}catch{if(v&&v.get(O.TRY_HARDER)===!0&&p.isRotateSupported()){const P=p.rotateCounterClockwise(),R=this.doDecode(P,v),U=R.getResultMetadata();let G=270;U!==null&&U.get(_e.ORIENTATION)===!0&&(G=G+U.get(_e.ORIENTATION)%360),R.putMetadata(_e.ORIENTATION,G);const te=R.getResultPoints();if(te!==null){const de=P.getHeight();for(let we=0;we<te.length;we++)te[we]=new st(de-te[we].getY()-1,te[we].getX())}return R}else throw new Z}}reset(){}doDecode(p,v){const _=p.getWidth(),A=p.getHeight();let P=new j(_);const R=v&&v.get(O.TRY_HARDER)===!0,U=Math.max(1,A>>(R?8:5));let G;R?G=A:G=15;const te=Math.trunc(A/2);for(let de=0;de<G;de++){const we=Math.trunc((de+1)/2),Pe=(de&1)===0,Ze=te+U*(Pe?we:-we);if(Ze<0||Ze>=A)break;try{P=p.getBlackRow(Ze,P)}catch{continue}for(let at=0;at<2;at++){if(at===1&&(P.reverse(),v&&v.get(O.NEED_RESULT_POINT_CALLBACK)===!0)){const dt=new Map;v.forEach((yt,Pt)=>dt.set(Pt,yt)),dt.delete(O.NEED_RESULT_POINT_CALLBACK),v=dt}try{const dt=this.decodeRow(Ze,P,v);if(at===1){dt.putMetadata(_e.ORIENTATION,180);const yt=dt.getResultPoints();yt!==null&&(yt[0]=new st(_-yt[0].getX()-1,yt[0].getY()),yt[1]=new st(_-yt[1].getX()-1,yt[1].getY()))}return dt}catch{}}}throw new Z}static recordPattern(p,v,_){const A=_.length;for(let te=0;te<A;te++)_[te]=0;const P=p.getSize();if(v>=P)throw new Z;let R=!p.get(v),U=0,G=v;for(;G<P;){if(p.get(G)!==R)_[U]++;else{if(++U===A)break;_[U]=1,R=!R}G++}if(!(U===A||U===A-1&&G===P))throw new Z}static recordPatternInReverse(p,v,_){let A=_.length,P=p.get(v);for(;v>0&&A>=0;)p.get(--v)!==P&&(A--,P=!P);if(A>=0)throw new Z;Dt.recordPattern(p,v+1,_)}static patternMatchVariance(p,v,_){const A=p.length;let P=0,R=0;for(let te=0;te<A;te++)P+=p[te],R+=v[te];if(P<R)return Number.POSITIVE_INFINITY;const U=P/R;_*=U;let G=0;for(let te=0;te<A;te++){const de=p[te],we=v[te]*U,Pe=de>we?de-we:we-de;if(Pe>_)return Number.POSITIVE_INFINITY;G+=Pe}return G/P}}class Fe extends Dt{static findStartPattern(p){const v=p.getSize(),_=p.getNextSet(0);let A=0,P=Int32Array.from([0,0,0,0,0,0]),R=_,U=!1;const G=6;for(let te=_;te<v;te++)if(p.get(te)!==U)P[A]++;else{if(A===G-1){let de=Fe.MAX_AVG_VARIANCE,we=-1;for(let Pe=Fe.CODE_START_A;Pe<=Fe.CODE_START_C;Pe++){const Ze=Dt.patternMatchVariance(P,Fe.CODE_PATTERNS[Pe],Fe.MAX_INDIVIDUAL_VARIANCE);Ze<de&&(de=Ze,we=Pe)}if(we>=0&&p.isRange(Math.max(0,R-(te-R)/2),R,!1))return Int32Array.from([R,te,we]);R+=P[0]+P[1],P=P.slice(2,P.length-1),P[A-1]=0,P[A]=0,A--}else A++;P[A]=1,U=!U}throw new Z}static decodeCode(p,v,_){Dt.recordPattern(p,_,v);let A=Fe.MAX_AVG_VARIANCE,P=-1;for(let R=0;R<Fe.CODE_PATTERNS.length;R++){const U=Fe.CODE_PATTERNS[R],G=this.patternMatchVariance(v,U,Fe.MAX_INDIVIDUAL_VARIANCE);G<A&&(A=G,P=R)}if(P>=0)return P;throw new Z}decodeRow(p,v,_){const A=_&&_.get(O.ASSUME_GS1)===!0,P=Fe.findStartPattern(v),R=P[2];let U=0;const G=new Uint8Array(20);G[U++]=R;let te;switch(R){case Fe.CODE_START_A:te=Fe.CODE_CODE_A;break;case Fe.CODE_START_B:te=Fe.CODE_CODE_B;break;case Fe.CODE_START_C:te=Fe.CODE_CODE_C;break;default:throw new I}let de=!1,we=!1,Pe="",Ze=P[0],at=P[1];const dt=Int32Array.from([0,0,0,0,0,0]);let yt=0,Pt=0,tr=R,ar=0,sr=!0,Nn=!1,kn=!1;for(;!de;){const ed=we;switch(we=!1,yt=Pt,Pt=Fe.decodeCode(v,dt,at),G[U++]=Pt,Pt!==Fe.CODE_STOP&&(sr=!0),Pt!==Fe.CODE_STOP&&(ar++,tr+=ar*Pt),Ze=at,at+=dt.reduce((PN,$d)=>PN+$d,0),Pt){case Fe.CODE_START_A:case Fe.CODE_START_B:case Fe.CODE_START_C:throw new I}switch(te){case Fe.CODE_CODE_A:if(Pt<64)kn===Nn?Pe+=String.fromCharCode(32+Pt):Pe+=String.fromCharCode(32+Pt+128),kn=!1;else if(Pt<96)kn===Nn?Pe+=String.fromCharCode(Pt-64):Pe+=String.fromCharCode(Pt+64),kn=!1;else switch(Pt!==Fe.CODE_STOP&&(sr=!1),Pt){case Fe.CODE_FNC_1:A&&(Pe.length===0?Pe+="]C1":Pe+="");break;case Fe.CODE_FNC_2:case Fe.CODE_FNC_3:break;case Fe.CODE_FNC_4_A:!Nn&&kn?(Nn=!0,kn=!1):Nn&&kn?(Nn=!1,kn=!1):kn=!0;break;case Fe.CODE_SHIFT:we=!0,te=Fe.CODE_CODE_B;break;case Fe.CODE_CODE_B:te=Fe.CODE_CODE_B;break;case Fe.CODE_CODE_C:te=Fe.CODE_CODE_C;break;case Fe.CODE_STOP:de=!0;break}break;case Fe.CODE_CODE_B:if(Pt<96)kn===Nn?Pe+=String.fromCharCode(32+Pt):Pe+=String.fromCharCode(32+Pt+128),kn=!1;else switch(Pt!==Fe.CODE_STOP&&(sr=!1),Pt){case Fe.CODE_FNC_1:A&&(Pe.length===0?Pe+="]C1":Pe+="");break;case Fe.CODE_FNC_2:case Fe.CODE_FNC_3:break;case Fe.CODE_FNC_4_B:!Nn&&kn?(Nn=!0,kn=!1):Nn&&kn?(Nn=!1,kn=!1):kn=!0;break;case Fe.CODE_SHIFT:we=!0,te=Fe.CODE_CODE_A;break;case Fe.CODE_CODE_A:te=Fe.CODE_CODE_A;break;case Fe.CODE_CODE_C:te=Fe.CODE_CODE_C;break;case Fe.CODE_STOP:de=!0;break}break;case Fe.CODE_CODE_C:if(Pt<100)Pt<10&&(Pe+="0"),Pe+=Pt;else switch(Pt!==Fe.CODE_STOP&&(sr=!1),Pt){case Fe.CODE_FNC_1:A&&(Pe.length===0?Pe+="]C1":Pe+="");break;case Fe.CODE_CODE_A:te=Fe.CODE_CODE_A;break;case Fe.CODE_CODE_B:te=Fe.CODE_CODE_B;break;case Fe.CODE_STOP:de=!0;break}break}ed&&(te=te===Fe.CODE_CODE_A?Fe.CODE_CODE_B:Fe.CODE_CODE_A)}const _s=at-Ze;if(at=v.getNextUnset(at),!v.isRange(at,Math.min(v.getSize(),at+(at-Ze)/2),!1))throw new Z;if(tr-=ar*yt,tr%103!==yt)throw new m;const oo=Pe.length;if(oo===0)throw new Z;oo>0&&sr&&(te===Fe.CODE_CODE_C?Pe=Pe.substring(0,oo-2):Pe=Pe.substring(0,oo-1));const Xo=(P[1]+P[0])/2,Gi=Ze+_s/2,_o=G.length,Pl=new Uint8Array(_o);for(let ed=0;ed<_o;ed++)Pl[ed]=G[ed];const Zm=[new st(Xo,p),new st(Gi,p)];return new ie(Pe,Pl,0,Zm,me.CODE_128,new Date().getTime())}}Fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Fe.MAX_AVG_VARIANCE=.25,Fe.MAX_INDIVIDUAL_VARIANCE=.7,Fe.CODE_SHIFT=98,Fe.CODE_CODE_C=99,Fe.CODE_CODE_B=100,Fe.CODE_CODE_A=101,Fe.CODE_FNC_1=102,Fe.CODE_FNC_2=97,Fe.CODE_FNC_3=96,Fe.CODE_FNC_4_A=101,Fe.CODE_FNC_4_B=100,Fe.CODE_START_A=103,Fe.CODE_START_B=104,Fe.CODE_START_C=105,Fe.CODE_STOP=106;class ut extends Dt{constructor(p=!1,v=!1){super(),this.usingCheckDigit=p,this.extendedMode=v,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(p,v,_){let A=this.counters;A.fill(0),this.decodeRowResult="";let P=ut.findAsteriskPattern(v,A),R=v.getNextSet(P[1]),U=v.getSize(),G,te;do{ut.recordPattern(v,R,A);let dt=ut.toNarrowWidePattern(A);if(dt<0)throw new Z;G=ut.patternToChar(dt),this.decodeRowResult+=G,te=R;for(let yt of A)R+=yt;R=v.getNextSet(R)}while(G!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let de=0;for(let dt of A)de+=dt;let we=R-te-de;if(R!==U&&we*2<de)throw new Z;if(this.usingCheckDigit){let dt=this.decodeRowResult.length-1,yt=0;for(let Pt=0;Pt<dt;Pt++)yt+=ut.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Pt));if(this.decodeRowResult.charAt(dt)!==ut.ALPHABET_STRING.charAt(yt%43))throw new m;this.decodeRowResult=this.decodeRowResult.substring(0,dt)}if(this.decodeRowResult.length===0)throw new Z;let Pe;this.extendedMode?Pe=ut.decodeExtended(this.decodeRowResult):Pe=this.decodeRowResult;let Ze=(P[1]+P[0])/2,at=te+de/2;return new ie(Pe,null,0,[new st(Ze,p),new st(at,p)],me.CODE_39,new Date().getTime())}static findAsteriskPattern(p,v){let _=p.getSize(),A=p.getNextSet(0),P=0,R=A,U=!1,G=v.length;for(let te=A;te<_;te++)if(p.get(te)!==U)v[P]++;else{if(P===G-1){if(this.toNarrowWidePattern(v)===ut.ASTERISK_ENCODING&&p.isRange(Math.max(0,R-Math.floor((te-R)/2)),R,!1))return[R,te];R+=v[0]+v[1],v.copyWithin(0,2,2+P-1),v[P-1]=0,v[P]=0,P--}else P++;v[P]=1,U=!U}throw new Z}static toNarrowWidePattern(p){let v=p.length,_=0,A;do{let P=2147483647;for(let G of p)G<P&&G>_&&(P=G);_=P,A=0;let R=0,U=0;for(let G=0;G<v;G++){let te=p[G];te>_&&(U|=1<<v-1-G,A++,R+=te)}if(A===3){for(let G=0;G<v&&A>0;G++){let te=p[G];if(te>_&&(A--,te*2>=R))return-1}return U}}while(A>3);return-1}static patternToChar(p){for(let v=0;v<ut.CHARACTER_ENCODINGS.length;v++)if(ut.CHARACTER_ENCODINGS[v]===p)return ut.ALPHABET_STRING.charAt(v);if(p===ut.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(p){let v=p.length,_="";for(let A=0;A<v;A++){let P=p.charAt(A);if(P==="+"||P==="$"||P==="%"||P==="/"){let R=p.charAt(A+1),U="\0";switch(P){case"+":if(R>="A"&&R<="Z")U=String.fromCharCode(R.charCodeAt(0)+32);else throw new I;break;case"$":if(R>="A"&&R<="Z")U=String.fromCharCode(R.charCodeAt(0)-64);else throw new I;break;case"%":if(R>="A"&&R<="E")U=String.fromCharCode(R.charCodeAt(0)-38);else if(R>="F"&&R<="J")U=String.fromCharCode(R.charCodeAt(0)-11);else if(R>="K"&&R<="O")U=String.fromCharCode(R.charCodeAt(0)+16);else if(R>="P"&&R<="T")U=String.fromCharCode(R.charCodeAt(0)+43);else if(R==="U")U="\0";else if(R==="V")U="@";else if(R==="W")U="`";else if(R==="X"||R==="Y"||R==="Z")U="";else throw new I;break;case"/":if(R>="A"&&R<="O")U=String.fromCharCode(R.charCodeAt(0)-32);else if(R==="Z")U=":";else throw new I;break}_+=U,A++}else _+=P}return _}}ut.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ut.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ut.ASTERISK_ENCODING=148;class Mt extends Dt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(p,v,_){let A=this.decodeStart(v),P=this.decodeEnd(v),R=new Q;Mt.decodeMiddle(v,A[1],P[0],R);let U=R.toString(),G=null;_!=null&&(G=_.get(O.ALLOWED_LENGTHS)),G==null&&(G=Mt.DEFAULT_ALLOWED_LENGTHS);let te=U.length,de=!1,we=0;for(let at of G){if(te===at){de=!0;break}at>we&&(we=at)}if(!de&&te>we&&(de=!0),!de)throw new I;const Pe=[new st(A[1],p),new st(P[0],p)];return new ie(U,null,0,Pe,me.ITF,new Date().getTime())}static decodeMiddle(p,v,_,A){let P=new Int32Array(10),R=new Int32Array(5),U=new Int32Array(5);for(P.fill(0),R.fill(0),U.fill(0);v<_;){Dt.recordPattern(p,v,P);for(let te=0;te<5;te++){let de=2*te;R[te]=P[de],U[te]=P[de+1]}let G=Mt.decodeDigit(R);A.append(G.toString()),G=this.decodeDigit(U),A.append(G.toString()),P.forEach(function(te){v+=te})}}decodeStart(p){let v=Mt.skipWhiteSpace(p),_=Mt.findGuardPattern(p,v,Mt.START_PATTERN);return this.narrowLineWidth=(_[1]-_[0])/4,this.validateQuietZone(p,_[0]),_}validateQuietZone(p,v){let _=this.narrowLineWidth*10;_=_<v?_:v;for(let A=v-1;_>0&&A>=0&&!p.get(A);A--)_--;if(_!==0)throw new Z}static skipWhiteSpace(p){const v=p.getSize(),_=p.getNextSet(0);if(_===v)throw new Z;return _}decodeEnd(p){p.reverse();try{let v=Mt.skipWhiteSpace(p),_;try{_=Mt.findGuardPattern(p,v,Mt.END_PATTERN_REVERSED[0])}catch(P){P instanceof Z&&(_=Mt.findGuardPattern(p,v,Mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(p,_[0]);let A=_[0];return _[0]=p.getSize()-_[1],_[1]=p.getSize()-A,_}finally{p.reverse()}}static findGuardPattern(p,v,_){let A=_.length,P=new Int32Array(A),R=p.getSize(),U=!1,G=0,te=v;P.fill(0);for(let de=v;de<R;de++)if(p.get(de)!==U)P[G]++;else{if(G===A-1){if(Dt.patternMatchVariance(P,_,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return[te,de];te+=P[0]+P[1],g.arraycopy(P,2,P,0,G-1),P[G-1]=0,P[G]=0,G--}else G++;P[G]=1,U=!U}throw new Z}static decodeDigit(p){let v=Mt.MAX_AVG_VARIANCE,_=-1,A=Mt.PATTERNS.length;for(let P=0;P<A;P++){let R=Mt.PATTERNS[P],U=Dt.patternMatchVariance(p,R,Mt.MAX_INDIVIDUAL_VARIANCE);U<v?(v=U,_=P):U===v&&(_=-1)}if(_>=0)return _%10;throw new Z}}Mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Mt.MAX_AVG_VARIANCE=.38,Mt.MAX_INDIVIDUAL_VARIANCE=.5,Mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Mt.START_PATTERN=Int32Array.from([1,1,1,1]),Mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ht extends Dt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(p){let v=!1,_,A=0,P=Int32Array.from([0,0,0]);for(;!v;){P=Int32Array.from([0,0,0]),_=Ht.findGuardPattern(p,A,!1,this.START_END_PATTERN,P);let R=_[0];A=_[1];let U=R-(A-R);U>=0&&(v=p.isRange(U,R,!1))}return _}static checkChecksum(p){return Ht.checkStandardUPCEANChecksum(p)}static checkStandardUPCEANChecksum(p){let v=p.length;if(v===0)return!1;let _=parseInt(p.charAt(v-1),10);return Ht.getStandardUPCEANChecksum(p.substring(0,v-1))===_}static getStandardUPCEANChecksum(p){let v=p.length,_=0;for(let A=v-1;A>=0;A-=2){let P=p.charAt(A).charCodeAt(0)-48;if(P<0||P>9)throw new I;_+=P}_*=3;for(let A=v-2;A>=0;A-=2){let P=p.charAt(A).charCodeAt(0)-48;if(P<0||P>9)throw new I;_+=P}return(1e3-_)%10}static decodeEnd(p,v){return Ht.findGuardPattern(p,v,!1,Ht.START_END_PATTERN,new Int32Array(Ht.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(p,v,_,A){return this.findGuardPattern(p,v,_,A,new Int32Array(A.length))}static findGuardPattern(p,v,_,A,P){let R=p.getSize();v=_?p.getNextUnset(v):p.getNextSet(v);let U=0,G=v,te=A.length,de=_;for(let we=v;we<R;we++)if(p.get(we)!==de)P[U]++;else{if(U===te-1){if(Dt.patternMatchVariance(P,A,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return Int32Array.from([G,we]);G+=P[0]+P[1];let Pe=P.slice(2,P.length-1);for(let Ze=0;Ze<U-1;Ze++)P[Ze]=Pe[Ze];P[U-1]=0,P[U]=0,U--}else U++;P[U]=1,de=!de}throw new Z}static decodeDigit(p,v,_,A){this.recordPattern(p,_,v);let P=this.MAX_AVG_VARIANCE,R=-1,U=A.length;for(let G=0;G<U;G++){let te=A[G],de=Dt.patternMatchVariance(v,te,Ht.MAX_INDIVIDUAL_VARIANCE);de<P&&(P=de,R=G)}if(R>=0)return R;throw new Z}}Ht.MAX_AVG_VARIANCE=.48,Ht.MAX_INDIVIDUAL_VARIANCE=.7,Ht.START_END_PATTERN=Int32Array.from([1,1,1]),Ht.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ht.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ht.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Wt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(p,v,_){let A=this.decodeRowStringBuffer,P=this.decodeMiddle(v,_,A),R=A.toString(),U=Wt.parseExtensionString(R),G=[new st((_[0]+_[1])/2,p),new st(P,p)],te=new ie(R,null,0,G,me.UPC_EAN_EXTENSION,new Date().getTime());return U!=null&&te.putAllMetadata(U),te}decodeMiddle(p,v,_){let A=this.decodeMiddleCounters;A[0]=0,A[1]=0,A[2]=0,A[3]=0;let P=p.getSize(),R=v[1],U=0;for(let te=0;te<5&&R<P;te++){let de=Ht.decodeDigit(p,A,R,Ht.L_AND_G_PATTERNS);_+=String.fromCharCode(48+de%10);for(let we of A)R+=we;de>=10&&(U|=1<<4-te),te!==4&&(R=p.getNextSet(R),R=p.getNextUnset(R))}if(_.length!==5)throw new Z;let G=this.determineCheckDigit(U);if(Wt.extensionChecksum(_.toString())!==G)throw new Z;return R}static extensionChecksum(p){let v=p.length,_=0;for(let A=v-2;A>=0;A-=2)_+=p.charAt(A).charCodeAt(0)-48;_*=3;for(let A=v-1;A>=0;A-=2)_+=p.charAt(A).charCodeAt(0)-48;return _*=3,_%10}determineCheckDigit(p){for(let v=0;v<10;v++)if(p===this.CHECK_DIGIT_ENCODINGS[v])return v;throw new Z}static parseExtensionString(p){if(p.length!==5)return null;let v=Wt.parseExtension5String(p);return v==null?null:new Map([[_e.SUGGESTED_PRICE,v]])}static parseExtension5String(p){let v;switch(p.charAt(0)){case"0":v="";break;case"5":v="$";break;case"9":switch(p){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}v="";break;default:v="";break}let _=parseInt(p.substring(1)),A=(_/100).toString(),P=_%100,R=P<10?"0"+P:P.toString();return v+A+"."+R}}class zt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(p,v,_){let A=this.decodeRowStringBuffer,P=this.decodeMiddle(v,_,A),R=A.toString(),U=zt.parseExtensionString(R),G=[new st((_[0]+_[1])/2,p),new st(P,p)],te=new ie(R,null,0,G,me.UPC_EAN_EXTENSION,new Date().getTime());return U!=null&&te.putAllMetadata(U),te}decodeMiddle(p,v,_){let A=this.decodeMiddleCounters;A[0]=0,A[1]=0,A[2]=0,A[3]=0;let P=p.getSize(),R=v[1],U=0;for(let G=0;G<2&&R<P;G++){let te=Ht.decodeDigit(p,A,R,Ht.L_AND_G_PATTERNS);_+=String.fromCharCode(48+te%10);for(let de of A)R+=de;te>=10&&(U|=1<<1-G),G!==1&&(R=p.getNextSet(R),R=p.getNextUnset(R))}if(_.length!==2)throw new Z;if(parseInt(_.toString())%4!==U)throw new Z;return R}static parseExtensionString(p){return p.length!==2?null:new Map([[_e.ISSUE_NUMBER,parseInt(p)]])}}class Rr{static decodeRow(p,v,_){let A=Ht.findGuardPattern(v,_,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Wt().decodeRow(p,v,A)}catch{return new zt().decodeRow(p,v,A)}}}Rr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class vr extends Ht{constructor(){super(),this.decodeRowStringBuffer="",vr.L_AND_G_PATTERNS=vr.L_PATTERNS.map(p=>Int32Array.from(p));for(let p=10;p<20;p++){let v=vr.L_PATTERNS[p-10],_=new Int32Array(v.length);for(let A=0;A<v.length;A++)_[A]=v[v.length-A-1];vr.L_AND_G_PATTERNS[p]=_}}decodeRow(p,v,_){let A=vr.findStartGuardPattern(v),P=_==null?null:_.get(O.NEED_RESULT_POINT_CALLBACK);if(P!=null){const sr=new st((A[0]+A[1])/2,p);P.foundPossibleResultPoint(sr)}let R=this.decodeMiddle(v,A,this.decodeRowStringBuffer),U=R.rowOffset,G=R.resultString;if(P!=null){const sr=new st(U,p);P.foundPossibleResultPoint(sr)}let te=this.decodeEnd(v,U);if(P!=null){const sr=new st((te[0]+te[1])/2,p);P.foundPossibleResultPoint(sr)}let de=te[1],we=de+(de-te[0]);if(we>=v.getSize()||!v.isRange(de,we,!1))throw new Z;let Pe=G.toString();if(Pe.length<8)throw new I;if(!vr.checkChecksum(Pe))throw new m;let Ze=(A[1]+A[0])/2,at=(te[1]+te[0])/2,dt=this.getBarcodeFormat(),yt=[new st(Ze,p),new st(at,p)],Pt=new ie(Pe,null,0,yt,dt,new Date().getTime()),tr=0;try{let sr=Rr.decodeRow(p,v,te[1]);Pt.putMetadata(_e.UPC_EAN_EXTENSION,sr.getText()),Pt.putAllMetadata(sr.getResultMetadata()),Pt.addResultPoints(sr.getResultPoints()),tr=sr.getText().length}catch{}let ar=_==null?null:_.get(O.ALLOWED_EAN_EXTENSIONS);if(ar!=null){let sr=!1;for(let Nn in ar)if(tr.toString()===Nn){sr=!0;break}if(!sr)throw new Z}return Pt}decodeEnd(p,v){return vr.findGuardPattern(p,v,!1,vr.START_END_PATTERN,new Int32Array(vr.START_END_PATTERN.length).fill(0))}static checkChecksum(p){return vr.checkStandardUPCEANChecksum(p)}static checkStandardUPCEANChecksum(p){let v=p.length;if(v===0)return!1;let _=parseInt(p.charAt(v-1),10);return vr.getStandardUPCEANChecksum(p.substring(0,v-1))===_}static getStandardUPCEANChecksum(p){let v=p.length,_=0;for(let A=v-1;A>=0;A-=2){let P=p.charAt(A).charCodeAt(0)-48;if(P<0||P>9)throw new I;_+=P}_*=3;for(let A=v-2;A>=0;A-=2){let P=p.charAt(A).charCodeAt(0)-48;if(P<0||P>9)throw new I;_+=P}return(1e3-_)%10}}class Cr extends vr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(p,v,_){let A=this.decodeMiddleCounters;A[0]=0,A[1]=0,A[2]=0,A[3]=0;let P=p.getSize(),R=v[1],U=0;for(let te=0;te<6&&R<P;te++){let de=vr.decodeDigit(p,A,R,vr.L_AND_G_PATTERNS);_+=String.fromCharCode(48+de%10);for(let we of A)R+=we;de>=10&&(U|=1<<5-te)}_=Cr.determineFirstDigit(_,U),R=vr.findGuardPattern(p,R,!0,vr.MIDDLE_PATTERN,new Int32Array(vr.MIDDLE_PATTERN.length).fill(0))[1];for(let te=0;te<6&&R<P;te++){let de=vr.decodeDigit(p,A,R,vr.L_PATTERNS);_+=String.fromCharCode(48+de);for(let we of A)R+=we}return{rowOffset:R,resultString:_}}getBarcodeFormat(){return me.EAN_13}static determineFirstDigit(p,v){for(let _=0;_<10;_++)if(v===this.FIRST_DIGIT_ENCODINGS[_])return p=String.fromCharCode(48+_)+p,p;throw new Z}}Cr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Pr extends vr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(p,v,_){const A=this.decodeMiddleCounters;A[0]=0,A[1]=0,A[2]=0,A[3]=0;let P=p.getSize(),R=v[1];for(let G=0;G<4&&R<P;G++){let te=vr.decodeDigit(p,A,R,vr.L_PATTERNS);_+=String.fromCharCode(48+te);for(let de of A)R+=de}R=vr.findGuardPattern(p,R,!0,vr.MIDDLE_PATTERN,new Int32Array(vr.MIDDLE_PATTERN.length).fill(0))[1];for(let G=0;G<4&&R<P;G++){let te=vr.decodeDigit(p,A,R,vr.L_PATTERNS);_+=String.fromCharCode(48+te);for(let de of A)R+=de}return{rowOffset:R,resultString:_}}getBarcodeFormat(){return me.EAN_8}}class Qr extends vr{constructor(){super(...arguments),this.ean13Reader=new Cr}getBarcodeFormat(){return me.UPC_A}decode(p,v){return this.maybeReturnResult(this.ean13Reader.decode(p))}decodeRow(p,v,_){return this.maybeReturnResult(this.ean13Reader.decodeRow(p,v,_))}decodeMiddle(p,v,_){return this.ean13Reader.decodeMiddle(p,v,_)}maybeReturnResult(p){let v=p.getText();if(v.charAt(0)==="0"){let _=new ie(v.substring(1),null,null,p.getResultPoints(),me.UPC_A);return p.getResultMetadata()!=null&&_.putAllMetadata(p.getResultMetadata()),_}else throw new Z}reset(){this.ean13Reader.reset()}}class Tr extends vr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(p,v,_){const A=this.decodeMiddleCounters.map(te=>te);A[0]=0,A[1]=0,A[2]=0,A[3]=0;const P=p.getSize();let R=v[1],U=0;for(let te=0;te<6&&R<P;te++){const de=Tr.decodeDigit(p,A,R,Tr.L_AND_G_PATTERNS);_+=String.fromCharCode(48+de%10);for(let we of A)R+=we;de>=10&&(U|=1<<5-te)}let G=Tr.determineNumSysAndCheckDigit(_,U);return{rowOffset:R,resultString:G}}decodeEnd(p,v){return Tr.findGuardPatternWithoutCounters(p,v,!0,Tr.MIDDLE_END_PATTERN)}checkChecksum(p){return vr.checkChecksum(Tr.convertUPCEtoUPCA(p))}static determineNumSysAndCheckDigit(p,v){for(let _=0;_<=1;_++)for(let A=0;A<10;A++)if(v===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[_][A]){let P=String.fromCharCode(48+_),R=String.fromCharCode(48+A);return P+p+R}throw Z.getNotFoundInstance()}getBarcodeFormat(){return me.UPC_E}static convertUPCEtoUPCA(p){const v=p.slice(1,7).split("").map(P=>P.charCodeAt(0)),_=new Q;_.append(p.charAt(0));let A=v[5];switch(A){case 0:case 1:case 2:_.appendChars(v,0,2),_.append(A),_.append("0000"),_.appendChars(v,2,3);break;case 3:_.appendChars(v,0,3),_.append("00000"),_.appendChars(v,3,2);break;case 4:_.appendChars(v,0,4),_.append("00000"),_.append(v[4]);break;default:_.appendChars(v,0,5),_.append("0000"),_.append(A);break}return p.length>=8&&_.append(p.charAt(7)),_.toString()}}Tr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gr extends Dt{constructor(p){super();let v=p==null?null:p.get(O.POSSIBLE_FORMATS),_=[];n(v)?(_.push(new Cr),_.push(new Qr),_.push(new Pr),_.push(new Tr)):(v.indexOf(me.EAN_13)>-1&&_.push(new Cr),v.indexOf(me.UPC_A)>-1&&_.push(new Qr),v.indexOf(me.EAN_8)>-1&&_.push(new Pr),v.indexOf(me.UPC_E)>-1&&_.push(new Tr)),this.readers=_}decodeRow(p,v,_){for(let A of this.readers)try{const P=A.decodeRow(p,v,_),R=P.getBarcodeFormat()===me.EAN_13&&P.getText().charAt(0)==="0",U=_==null?null:_.get(O.POSSIBLE_FORMATS),G=U==null||U.includes(me.UPC_A);if(R&&G){const te=P.getRawBytes(),de=new ie(P.getText().substring(1),te,te?te.length:null,P.getResultPoints(),me.UPC_A);return de.putAllMetadata(P.getResultMetadata()),de}return P}catch{}throw new Z}reset(){for(let p of this.readers)p.reset()}}class ln extends Dt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(p,v){for(let _=0;_<v.length;_++)if(Dt.patternMatchVariance(p,v[_],ln.MAX_INDIVIDUAL_VARIANCE)<ln.MAX_AVG_VARIANCE)return _;throw new Z}static count(p){return Ue.sum(new Int32Array(p))}static increment(p,v){let _=0,A=v[0];for(let P=1;P<p.length;P++)v[P]>A&&(A=v[P],_=P);p[_]++}static decrement(p,v){let _=0,A=v[0];for(let P=1;P<p.length;P++)v[P]<A&&(A=v[P],_=P);p[_]--}static isFinderPattern(p){let v=p[0]+p[1],_=v+p[2]+p[3],A=v/_;if(A>=ln.MIN_FINDER_PATTERN_RATIO&&A<=ln.MAX_FINDER_PATTERN_RATIO){let P=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;for(let U of p)U>R&&(R=U),U<P&&(P=U);return R<10*P}return!1}}ln.MAX_AVG_VARIANCE=.2,ln.MAX_INDIVIDUAL_VARIANCE=.45,ln.MIN_FINDER_PATTERN_RATIO=9.5/12,ln.MAX_FINDER_PATTERN_RATIO=12.5/14;class vi{constructor(p,v){this.value=p,this.checksumPortion=v}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(p){if(!(p instanceof vi))return!1;const v=p;return this.value===v.value&&this.checksumPortion===v.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Fr{constructor(p,v,_,A,P){this.value=p,this.startEnd=v,this.value=p,this.startEnd=v,this.resultPoints=new Array,this.resultPoints.push(new st(_,P)),this.resultPoints.push(new st(A,P))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(p){if(!(p instanceof Fr))return!1;const v=p;return this.value===v.value}hashCode(){return this.value}}class Bi{constructor(){}static getRSSvalue(p,v,_){let A=0;for(let G of p)A+=G;let P=0,R=0,U=p.length;for(let G=0;G<U-1;G++){let te;for(te=1,R|=1<<G;te<p[G];te++,R&=~(1<<G)){let de=Bi.combins(A-te-1,U-G-2);if(_&&R===0&&A-te-(U-G-1)>=U-G-1&&(de-=Bi.combins(A-te-(U-G),U-G-2)),U-G-1>1){let we=0;for(let Pe=A-te-(U-G-2);Pe>v;Pe--)we+=Bi.combins(A-te-Pe-1,U-G-3);de-=we*(U-1-G)}else A-te>v&&de--;P+=de}A-=te}return P}static combins(p,v){let _,A;p-v>v?(A=v,_=p-v):(A=p-v,_=v);let P=1,R=1;for(let U=p;U>_;U--)P*=U,R<=A&&(P/=R,R++);for(;R<=A;)P/=R,R++;return P}}class da{static buildBitArray(p){let v=p.length*2-1;p[p.length-1].getRightChar()==null&&(v-=1);let _=12*v,A=new j(_),P=0,U=p[0].getRightChar().getValue();for(let G=11;G>=0;--G)U&1<<G&&A.set(P),P++;for(let G=1;G<p.length;++G){let te=p[G],de=te.getLeftChar().getValue();for(let we=11;we>=0;--we)de&1<<we&&A.set(P),P++;if(te.getRightChar()!=null){let we=te.getRightChar().getValue();for(let Pe=11;Pe>=0;--Pe)we&1<<Pe&&A.set(P),P++}}return A}}class $i{constructor(p,v){v?this.decodedInformation=null:(this.finished=p,this.decodedInformation=v)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ks{constructor(p){this.newPosition=p}getNewPosition(){return this.newPosition}}class $n extends ks{constructor(p,v){super(p),this.value=v}getValue(){return this.value}isFNC1(){return this.value===$n.FNC1}}$n.FNC1="$";class Mr extends ks{constructor(p,v,_){super(p),_?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=v}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ce extends ks{constructor(p,v,_){if(super(p),v<0||v>10||_<0||_>10)throw new I;this.firstDigit=v,this.secondDigit=_}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ce.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ce.FNC1}isAnyFNC1(){return this.firstDigit===Ce.FNC1||this.secondDigit===Ce.FNC1}}Ce.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(p){if(!p)return null;if(p.length<2)throw new Z;let v=p.substring(0,2);for(let P of Me.TWO_DIGIT_DATA_LENGTH)if(P[0]===v)return P[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,P[2],p):Me.processFixedAI(2,P[1],p);if(p.length<3)throw new Z;let _=p.substring(0,3);for(let P of Me.THREE_DIGIT_DATA_LENGTH)if(P[0]===_)return P[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,P[2],p):Me.processFixedAI(3,P[1],p);for(let P of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(P[0]===_)return P[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,P[2],p):Me.processFixedAI(4,P[1],p);if(p.length<4)throw new Z;let A=p.substring(0,4);for(let P of Me.FOUR_DIGIT_DATA_LENGTH)if(P[0]===A)return P[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,P[2],p):Me.processFixedAI(4,P[1],p);throw new Z}static processFixedAI(p,v,_){if(_.length<p)throw new Z;let A=_.substring(0,p);if(_.length<p+v)throw new Z;let P=_.substring(p,p+v),R=_.substring(p+v),U="("+A+")"+P,G=Me.parseFieldsInGeneralPurpose(R);return G==null?U:U+G}static processVariableAI(p,v,_){let A=_.substring(0,p),P;_.length<p+v?P=_.length:P=p+v;let R=_.substring(p,P),U=_.substring(P),G="("+A+")"+R,te=Me.parseFieldsInGeneralPurpose(U);return te==null?G:G+te}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class Ve{constructor(p){this.buffer=new Q,this.information=p}decodeAllCodes(p,v){let _=v,A=null;do{let P=this.decodeGeneralPurposeField(_,A),R=Me.parseFieldsInGeneralPurpose(P.getNewString());if(R!=null&&p.append(R),P.isRemaining()?A=""+P.getRemainingValue():A=null,_===P.getNewPosition())break;_=P.getNewPosition()}while(!0);return p.toString()}isStillNumeric(p){if(p+7>this.information.getSize())return p+4<=this.information.getSize();for(let v=p;v<p+3;++v)if(this.information.get(v))return!0;return this.information.get(p+3)}decodeNumeric(p){if(p+7>this.information.getSize()){let P=this.extractNumericValueFromBitArray(p,4);return P===0?new Ce(this.information.getSize(),Ce.FNC1,Ce.FNC1):new Ce(this.information.getSize(),P-1,Ce.FNC1)}let v=this.extractNumericValueFromBitArray(p,7),_=(v-8)/11,A=(v-8)%11;return new Ce(p+7,_,A)}extractNumericValueFromBitArray(p,v){return Ve.extractNumericValueFromBitArray(this.information,p,v)}static extractNumericValueFromBitArray(p,v,_){let A=0;for(let P=0;P<_;++P)p.get(v+P)&&(A|=1<<_-P-1);return A}decodeGeneralPurposeField(p,v){this.buffer.setLengthToZero(),v!=null&&this.buffer.append(v),this.current.setPosition(p);let _=this.parseBlocks();return _!=null&&_.isRemaining()?new Mr(this.current.getPosition(),this.buffer.toString(),_.getRemainingValue()):new Mr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let p,v;do{let _=this.current.getPosition();if(this.current.isAlpha()?(v=this.parseAlphaBlock(),p=v.isFinished()):this.current.isIsoIec646()?(v=this.parseIsoIec646Block(),p=v.isFinished()):(v=this.parseNumericBlock(),p=v.isFinished()),!(_!==this.current.getPosition())&&!p)break}while(!p);return v.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let p=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFirstDigitFNC1()){let v;return p.isSecondDigitFNC1()?v=new Mr(this.current.getPosition(),this.buffer.toString()):v=new Mr(this.current.getPosition(),this.buffer.toString(),p.getSecondDigit()),new $i(!0,v)}if(this.buffer.append(p.getFirstDigit()),p.isSecondDigitFNC1()){let v=new Mr(this.current.getPosition(),this.buffer.toString());return new $i(!0,v)}this.buffer.append(p.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $i(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let p=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){let v=new Mr(this.current.getPosition(),this.buffer.toString());return new $i(!0,v)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $i(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let p=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){let v=new Mr(this.current.getPosition(),this.buffer.toString());return new $i(!0,v)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $i(!1)}isStillIsoIec646(p){if(p+5>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(p,5);if(v>=5&&v<16)return!0;if(p+7>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(p,7);if(_>=64&&_<116)return!0;if(p+8>this.information.getSize())return!1;let A=this.extractNumericValueFromBitArray(p,8);return A>=232&&A<253}decodeIsoIec646(p){let v=this.extractNumericValueFromBitArray(p,5);if(v===15)return new $n(p+5,$n.FNC1);if(v>=5&&v<15)return new $n(p+5,"0"+(v-5));let _=this.extractNumericValueFromBitArray(p,7);if(_>=64&&_<90)return new $n(p+7,""+(_+1));if(_>=90&&_<116)return new $n(p+7,""+(_+7));let A=this.extractNumericValueFromBitArray(p,8),P;switch(A){case 232:P="!";break;case 233:P='"';break;case 234:P="%";break;case 235:P="&";break;case 236:P="'";break;case 237:P="(";break;case 238:P=")";break;case 239:P="*";break;case 240:P="+";break;case 241:P=",";break;case 242:P="-";break;case 243:P=".";break;case 244:P="/";break;case 245:P=":";break;case 246:P=";";break;case 247:P="<";break;case 248:P="=";break;case 249:P=">";break;case 250:P="?";break;case 251:P="_";break;case 252:P=" ";break;default:throw new I}return new $n(p+8,P)}isStillAlpha(p){if(p+5>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(p,5);if(v>=5&&v<16)return!0;if(p+6>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(p,6);return _>=16&&_<63}decodeAlphanumeric(p){let v=this.extractNumericValueFromBitArray(p,5);if(v===15)return new $n(p+5,$n.FNC1);if(v>=5&&v<15)return new $n(p+5,"0"+(v-5));let _=this.extractNumericValueFromBitArray(p,6);if(_>=32&&_<58)return new $n(p+6,""+(_+33));let A;switch(_){case 58:A="*";break;case 59:A=",";break;case 60:A="-";break;case 61:A=".";break;case 62:A="/";break;default:throw new Te("Decoding invalid alphanumeric value: "+_)}return new $n(p+6,A)}isAlphaTo646ToAlphaLatch(p){if(p+1>this.information.getSize())return!1;for(let v=0;v<5&&v+p<this.information.getSize();++v)if(v===2){if(!this.information.get(p+2))return!1}else if(this.information.get(p+v))return!1;return!0}isAlphaOr646ToNumericLatch(p){if(p+3>this.information.getSize())return!1;for(let v=p;v<p+3;++v)if(this.information.get(v))return!1;return!0}isNumericToAlphaNumericLatch(p){if(p+1>this.information.getSize())return!1;for(let v=0;v<4&&v+p<this.information.getSize();++v)if(this.information.get(p+v))return!1;return!0}}class He{constructor(p){this.information=p,this.generalDecoder=new Ve(p)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Xe extends He{constructor(p){super(p)}encodeCompressedGtin(p,v){p.append("(01)");let _=p.length();p.append("9"),this.encodeCompressedGtinWithoutAI(p,v,_)}encodeCompressedGtinWithoutAI(p,v,_){for(let A=0;A<4;++A){let P=this.getGeneralDecoder().extractNumericValueFromBitArray(v+10*A,10);P/100===0&&p.append("0"),P/10===0&&p.append("0"),p.append(P)}Xe.appendCheckDigit(p,_)}static appendCheckDigit(p,v){let _=0;for(let A=0;A<13;A++){let P=p.charAt(A+v).charCodeAt(0)-48;_+=A&1?P:3*P}_=10-_%10,_===10&&(_=0),p.append(_)}}Xe.GTIN_SIZE=40;class Qe extends Xe{constructor(p){super(p)}parseInformation(){let p=new Q;p.append("(01)");let v=p.length(),_=this.getGeneralDecoder().extractNumericValueFromBitArray(Qe.HEADER_SIZE,4);return p.append(_),this.encodeCompressedGtinWithoutAI(p,Qe.HEADER_SIZE+4,v),this.getGeneralDecoder().decodeAllCodes(p,Qe.HEADER_SIZE+44)}}Qe.HEADER_SIZE=4;class bt extends He{constructor(p){super(p)}parseInformation(){let p=new Q;return this.getGeneralDecoder().decodeAllCodes(p,bt.HEADER_SIZE)}}bt.HEADER_SIZE=5;class $t extends Xe{constructor(p){super(p)}encodeCompressedWeight(p,v,_){let A=this.getGeneralDecoder().extractNumericValueFromBitArray(v,_);this.addWeightCode(p,A);let P=this.checkWeight(A),R=1e5;for(let U=0;U<5;++U)P/R===0&&p.append("0"),R/=10;p.append(P)}}class wt extends $t{constructor(p){super(p)}parseInformation(){if(this.getInformation().getSize()!=wt.HEADER_SIZE+$t.GTIN_SIZE+wt.WEIGHT_SIZE)throw new Z;let p=new Q;return this.encodeCompressedGtin(p,wt.HEADER_SIZE),this.encodeCompressedWeight(p,wt.HEADER_SIZE+$t.GTIN_SIZE,wt.WEIGHT_SIZE),p.toString()}}wt.HEADER_SIZE=5,wt.WEIGHT_SIZE=15;class Et extends wt{constructor(p){super(p)}addWeightCode(p,v){p.append("(3103)")}checkWeight(p){return p}}class kt extends wt{constructor(p){super(p)}addWeightCode(p,v){v<1e4?p.append("(3202)"):p.append("(3203)")}checkWeight(p){return p<1e4?p:p-1e4}}class fr extends Xe{constructor(p){super(p)}parseInformation(){if(this.getInformation().getSize()<fr.HEADER_SIZE+Xe.GTIN_SIZE)throw new Z;let p=new Q;this.encodeCompressedGtin(p,fr.HEADER_SIZE);let v=this.getGeneralDecoder().extractNumericValueFromBitArray(fr.HEADER_SIZE+Xe.GTIN_SIZE,fr.LAST_DIGIT_SIZE);p.append("(392"),p.append(v),p.append(")");let _=this.getGeneralDecoder().decodeGeneralPurposeField(fr.HEADER_SIZE+Xe.GTIN_SIZE+fr.LAST_DIGIT_SIZE,null);return p.append(_.getNewString()),p.toString()}}fr.HEADER_SIZE=8,fr.LAST_DIGIT_SIZE=2;class br extends Xe{constructor(p){super(p)}parseInformation(){if(this.getInformation().getSize()<br.HEADER_SIZE+Xe.GTIN_SIZE)throw new Z;let p=new Q;this.encodeCompressedGtin(p,br.HEADER_SIZE);let v=this.getGeneralDecoder().extractNumericValueFromBitArray(br.HEADER_SIZE+Xe.GTIN_SIZE,br.LAST_DIGIT_SIZE);p.append("(393"),p.append(v),p.append(")");let _=this.getGeneralDecoder().extractNumericValueFromBitArray(br.HEADER_SIZE+Xe.GTIN_SIZE+br.LAST_DIGIT_SIZE,br.FIRST_THREE_DIGITS_SIZE);_/100==0&&p.append("0"),_/10==0&&p.append("0"),p.append(_);let A=this.getGeneralDecoder().decodeGeneralPurposeField(br.HEADER_SIZE+Xe.GTIN_SIZE+br.LAST_DIGIT_SIZE+br.FIRST_THREE_DIGITS_SIZE,null);return p.append(A.getNewString()),p.toString()}}br.HEADER_SIZE=8,br.LAST_DIGIT_SIZE=2,br.FIRST_THREE_DIGITS_SIZE=10;class Nr extends $t{constructor(p,v,_){super(p),this.dateCode=_,this.firstAIdigits=v}parseInformation(){if(this.getInformation().getSize()!=Nr.HEADER_SIZE+Nr.GTIN_SIZE+Nr.WEIGHT_SIZE+Nr.DATE_SIZE)throw new Z;let p=new Q;return this.encodeCompressedGtin(p,Nr.HEADER_SIZE),this.encodeCompressedWeight(p,Nr.HEADER_SIZE+Nr.GTIN_SIZE,Nr.WEIGHT_SIZE),this.encodeCompressedDate(p,Nr.HEADER_SIZE+Nr.GTIN_SIZE+Nr.WEIGHT_SIZE),p.toString()}encodeCompressedDate(p,v){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(v,Nr.DATE_SIZE);if(_==38400)return;p.append("("),p.append(this.dateCode),p.append(")");let A=_%32;_/=32;let P=_%12+1;_/=12;let R=_;R/10==0&&p.append("0"),p.append(R),P/10==0&&p.append("0"),p.append(P),A/10==0&&p.append("0"),p.append(A)}addWeightCode(p,v){p.append("("),p.append(this.firstAIdigits),p.append(v/1e5),p.append(")")}checkWeight(p){return p%1e5}}Nr.HEADER_SIZE=8,Nr.WEIGHT_SIZE=20,Nr.DATE_SIZE=16;function Sr(Ne){try{if(Ne.get(1))return new Qe(Ne);if(!Ne.get(2))return new bt(Ne);switch(Ve.extractNumericValueFromBitArray(Ne,1,4)){case 4:return new Et(Ne);case 5:return new kt(Ne)}switch(Ve.extractNumericValueFromBitArray(Ne,1,5)){case 12:return new fr(Ne);case 13:return new br(Ne)}switch(Ve.extractNumericValueFromBitArray(Ne,1,7)){case 56:return new Nr(Ne,"310","11");case 57:return new Nr(Ne,"320","11");case 58:return new Nr(Ne,"310","13");case 59:return new Nr(Ne,"320","13");case 60:return new Nr(Ne,"310","15");case 61:return new Nr(Ne,"320","15");case 62:return new Nr(Ne,"310","17");case 63:return new Nr(Ne,"320","17")}}catch(p){throw console.log(p),new Te("unknown decoder: "+Ne)}}class kr{constructor(p,v,_,A){this.leftchar=p,this.rightchar=v,this.finderpattern=_,this.maybeLast=A}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(p,v){return p instanceof kr?kr.equalsOrNull(p.leftchar,v.leftchar)&&kr.equalsOrNull(p.rightchar,v.rightchar)&&kr.equalsOrNull(p.finderpattern,v.finderpattern):!1}static equalsOrNull(p,v){return p===null?v===null:kr.equals(p,v)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Tn{constructor(p,v,_){this.pairs=p,this.rowNumber=v,this.wasReversed=_}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(p){return this.checkEqualitity(this,p)}toString(){return"{ "+this.pairs+" }"}equals(p,v){return p instanceof Tn?this.checkEqualitity(p,v)&&p.wasReversed===v.wasReversed:!1}checkEqualitity(p,v){if(!p||!v)return;let _;return p.forEach((A,P)=>{v.forEach(R=>{A.getLeftChar().getValue()===R.getLeftChar().getValue()&&A.getRightChar().getValue()===R.getRightChar().getValue()&&A.getFinderPatter().getValue()===R.getFinderPatter().getValue()&&(_=!0)})}),_}}class qt extends ln{constructor(p){super(...arguments),this.pairs=new Array(qt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=p===!0}decodeRow(p,v,_){this.pairs.length=0,this.startFromEven=!1;try{return qt.constructResult(this.decodeRow2pairs(p,v))}catch(A){this.verbose&&console.log(A)}return this.pairs.length=0,this.startFromEven=!0,qt.constructResult(this.decodeRow2pairs(p,v))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(p,v){let _=!1;for(;!_;)try{this.pairs.push(this.retrieveNextPair(v,this.pairs,p))}catch(P){if(P instanceof Z){if(!this.pairs.length)throw new Z;_=!0}}if(this.checkChecksum())return this.pairs;let A;if(this.rows.length?A=!0:A=!1,this.storeRow(p,!1),A){let P=this.checkRowsBoolean(!1);if(P!=null||(P=this.checkRowsBoolean(!0),P!=null))return P}throw new Z}checkRowsBoolean(p){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,p&&(this.rows=this.rows.reverse());let v=null;try{v=this.checkRows(new Array,0)}catch(_){this.verbose&&console.log(_)}return p&&(this.rows=this.rows.reverse()),v}checkRows(p,v){for(let _=v;_<this.rows.length;_++){let A=this.rows[_];this.pairs.length=0;for(let R of p)this.pairs.push(R.getPairs());if(this.pairs.push(A.getPairs()),!qt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let P=new Array(p);P.push(A);try{return this.checkRows(P,_+1)}catch(R){this.verbose&&console.log(R)}}throw new Z}static isValidSequence(p){for(let v of qt.FINDER_PATTERN_SEQUENCES){if(p.length>v.length)continue;let _=!0;for(let A=0;A<p.length;A++)if(p[A].getFinderPattern().getValue()!=v[A]){_=!1;break}if(_)return!0}return!1}storeRow(p,v){let _=0,A=!1,P=!1;for(;_<this.rows.length;){let R=this.rows[_];if(R.getRowNumber()>p){P=R.isEquivalent(this.pairs);break}A=R.isEquivalent(this.pairs),_++}P||A||qt.isPartialRow(this.pairs,this.rows)||(this.rows.push(_,new Tn(this.pairs,p,v)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(p,v){for(let _ of v)if(_.getPairs().length!==p.length){for(let A of _.getPairs())for(let P of p)if(kr.equals(A,P))break}}static isPartialRow(p,v){for(let _ of v){let A=!0;for(let P of p){let R=!1;for(let U of _.getPairs())if(P.equals(U)){R=!0;break}if(!R){A=!1;break}}if(A)return!0}return!1}getRows(){return this.rows}static constructResult(p){let v=da.buildBitArray(p),A=Sr(v).parseInformation(),P=p[0].getFinderPattern().getResultPoints(),R=p[p.length-1].getFinderPattern().getResultPoints(),U=[P[0],P[1],R[0],R[1]];return new ie(A,null,null,U,me.RSS_EXPANDED,null)}checkChecksum(){let p=this.pairs.get(0),v=p.getLeftChar(),_=p.getRightChar();if(_==null)return!1;let A=_.getChecksumPortion(),P=2;for(let U=1;U<this.pairs.size();++U){let G=this.pairs.get(U);A+=G.getLeftChar().getChecksumPortion(),P++;let te=G.getRightChar();te!=null&&(A+=te.getChecksumPortion(),P++)}return A%=211,211*(P-4)+A==v.getValue()}static getNextSecondBar(p,v){let _;return p.get(v)?(_=p.getNextUnset(v),_=p.getNextSet(_)):(_=p.getNextSet(v),_=p.getNextUnset(_)),_}retrieveNextPair(p,v,_){let A=v.length%2==0;this.startFromEven&&(A=!A);let P,R=!0,U=-1;do this.findNextPair(p,v,U),P=this.parseFoundFinderPattern(p,_,A),P==null?U=qt.getNextSecondBar(p,this.startEnd[0]):R=!1;while(R);let G=this.decodeDataCharacter(p,P,A,!0);if(!this.isEmptyPair(v)&&v[v.length-1].mustBeLast())throw new Z;let te;try{te=this.decodeDataCharacter(p,P,A,!1)}catch(de){te=null,this.verbose&&console.log(de)}return new kr(G,te,P,!0)}isEmptyPair(p){return p.length===0}findNextPair(p,v,_){let A=this.getDecodeFinderCounters();A[0]=0,A[1]=0,A[2]=0,A[3]=0;let P=p.getSize(),R;_>=0?R=_:this.isEmptyPair(v)?R=0:R=v[v.length-1].getFinderPattern().getStartEnd()[1];let U=v.length%2!=0;this.startFromEven&&(U=!U);let G=!1;for(;R<P&&(G=!p.get(R),!!G);)R++;let te=0,de=R;for(let we=R;we<P;we++)if(p.get(we)!=G)A[te]++;else{if(te==3){if(U&&qt.reverseCounters(A),qt.isFinderPattern(A)){this.startEnd[0]=de,this.startEnd[1]=we;return}U&&qt.reverseCounters(A),de+=A[0]+A[1],A[0]=A[2],A[1]=A[3],A[2]=0,A[3]=0,te--}else te++;A[te]=1,G=!G}throw new Z}static reverseCounters(p){let v=p.length;for(let _=0;_<v/2;++_){let A=p[_];p[_]=p[v-_-1],p[v-_-1]=A}}parseFoundFinderPattern(p,v,_){let A,P,R;if(_){let te=this.startEnd[0]-1;for(;te>=0&&!p.get(te);)te--;te++,A=this.startEnd[0]-te,P=te,R=this.startEnd[1]}else P=this.startEnd[0],R=p.getNextUnset(this.startEnd[1]+1),A=R-this.startEnd[1];let U=this.getDecodeFinderCounters();g.arraycopy(U,0,U,1,U.length-1),U[0]=A;let G;try{G=this.parseFinderValue(U,qt.FINDER_PATTERNS)}catch{return null}return new Fr(G,[P,R],P,R,v)}decodeDataCharacter(p,v,_,A){let P=this.getDataCharacterCounters();for(let Gi=0;Gi<P.length;Gi++)P[Gi]=0;if(A)qt.recordPatternInReverse(p,v.getStartEnd()[0],P);else{qt.recordPattern(p,v.getStartEnd()[1],P);for(let Gi=0,_o=P.length-1;Gi<_o;Gi++,_o--){let Pl=P[Gi];P[Gi]=P[_o],P[_o]=Pl}}let R=17,U=Ue.sum(new Int32Array(P))/R,G=(v.getStartEnd()[1]-v.getStartEnd()[0])/15;if(Math.abs(U-G)/G>.3)throw new Z;let te=this.getOddCounts(),de=this.getEvenCounts(),we=this.getOddRoundingErrors(),Pe=this.getEvenRoundingErrors();for(let Gi=0;Gi<P.length;Gi++){let _o=1*P[Gi]/U,Pl=_o+.5;if(Pl<1){if(_o<.3)throw new Z;Pl=1}else if(Pl>8){if(_o>8.7)throw new Z;Pl=8}let Zm=Gi/2;Gi&1?(de[Zm]=Pl,Pe[Zm]=_o-Pl):(te[Zm]=Pl,we[Zm]=_o-Pl)}this.adjustOddEvenCounts(R);let Ze=4*v.getValue()+(_?0:2)+(A?0:1)-1,at=0,dt=0;for(let Gi=te.length-1;Gi>=0;Gi--){if(qt.isNotA1left(v,_,A)){let _o=qt.WEIGHTS[Ze][2*Gi];dt+=te[Gi]*_o}at+=te[Gi]}let yt=0;for(let Gi=de.length-1;Gi>=0;Gi--)if(qt.isNotA1left(v,_,A)){let _o=qt.WEIGHTS[Ze][2*Gi+1];yt+=de[Gi]*_o}let Pt=dt+yt;if(at&1||at>13||at<4)throw new Z;let tr=(13-at)/2,ar=qt.SYMBOL_WIDEST[tr],sr=9-ar,Nn=Bi.getRSSvalue(te,ar,!0),kn=Bi.getRSSvalue(de,sr,!1),_s=qt.EVEN_TOTAL_SUBSET[tr],oo=qt.GSUM[tr],Xo=Nn*_s+kn+oo;return new vi(Xo,Pt)}static isNotA1left(p,v,_){return!(p.getValue()==0&&v&&_)}adjustOddEvenCounts(p){let v=Ue.sum(new Int32Array(this.getOddCounts())),_=Ue.sum(new Int32Array(this.getEvenCounts())),A=!1,P=!1;v>13?P=!0:v<4&&(A=!0);let R=!1,U=!1;_>13?U=!0:_<4&&(R=!0);let G=v+_-p,te=(v&1)==1,de=(_&1)==0;if(G==1)if(te){if(de)throw new Z;P=!0}else{if(!de)throw new Z;U=!0}else if(G==-1)if(te){if(de)throw new Z;A=!0}else{if(!de)throw new Z;R=!0}else if(G==0){if(te){if(!de)throw new Z;v<_?(A=!0,U=!0):(P=!0,R=!0)}else if(de)throw new Z}else throw new Z;if(A){if(P)throw new Z;qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(P&&qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),R){if(U)throw new Z;qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}U&&qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}qt.SYMBOL_WIDEST=[7,5,4,3,1],qt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],qt.GSUM=[0,348,1388,2948,3988],qt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],qt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],qt.FINDER_PAT_A=0,qt.FINDER_PAT_B=1,qt.FINDER_PAT_C=2,qt.FINDER_PAT_D=3,qt.FINDER_PAT_E=4,qt.FINDER_PAT_F=5,qt.FINDER_PATTERN_SEQUENCES=[[qt.FINDER_PAT_A,qt.FINDER_PAT_A],[qt.FINDER_PAT_A,qt.FINDER_PAT_B,qt.FINDER_PAT_B],[qt.FINDER_PAT_A,qt.FINDER_PAT_C,qt.FINDER_PAT_B,qt.FINDER_PAT_D],[qt.FINDER_PAT_A,qt.FINDER_PAT_E,qt.FINDER_PAT_B,qt.FINDER_PAT_D,qt.FINDER_PAT_C],[qt.FINDER_PAT_A,qt.FINDER_PAT_E,qt.FINDER_PAT_B,qt.FINDER_PAT_D,qt.FINDER_PAT_D,qt.FINDER_PAT_F],[qt.FINDER_PAT_A,qt.FINDER_PAT_E,qt.FINDER_PAT_B,qt.FINDER_PAT_D,qt.FINDER_PAT_E,qt.FINDER_PAT_F,qt.FINDER_PAT_F],[qt.FINDER_PAT_A,qt.FINDER_PAT_A,qt.FINDER_PAT_B,qt.FINDER_PAT_B,qt.FINDER_PAT_C,qt.FINDER_PAT_C,qt.FINDER_PAT_D,qt.FINDER_PAT_D],[qt.FINDER_PAT_A,qt.FINDER_PAT_A,qt.FINDER_PAT_B,qt.FINDER_PAT_B,qt.FINDER_PAT_C,qt.FINDER_PAT_C,qt.FINDER_PAT_D,qt.FINDER_PAT_E,qt.FINDER_PAT_E],[qt.FINDER_PAT_A,qt.FINDER_PAT_A,qt.FINDER_PAT_B,qt.FINDER_PAT_B,qt.FINDER_PAT_C,qt.FINDER_PAT_C,qt.FINDER_PAT_D,qt.FINDER_PAT_E,qt.FINDER_PAT_F,qt.FINDER_PAT_F],[qt.FINDER_PAT_A,qt.FINDER_PAT_A,qt.FINDER_PAT_B,qt.FINDER_PAT_B,qt.FINDER_PAT_C,qt.FINDER_PAT_D,qt.FINDER_PAT_D,qt.FINDER_PAT_E,qt.FINDER_PAT_E,qt.FINDER_PAT_F,qt.FINDER_PAT_F]],qt.MAX_PAIRS=11;class Oi extends vi{constructor(p,v,_){super(p,v),this.count=0,this.finderPattern=_}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jn extends ln{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(p,v,_){const A=this.decodePair(v,!1,p,_);Jn.addOrTally(this.possibleLeftPairs,A),v.reverse();let P=this.decodePair(v,!0,p,_);Jn.addOrTally(this.possibleRightPairs,P),v.reverse();for(let R of this.possibleLeftPairs)if(R.getCount()>1){for(let U of this.possibleRightPairs)if(U.getCount()>1&&Jn.checkChecksum(R,U))return Jn.constructResult(R,U)}throw new Z}static addOrTally(p,v){if(v==null)return;let _=!1;for(let A of p)if(A.getValue()===v.getValue()){A.incrementCount(),_=!0;break}_||p.push(v)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(p,v){let _=4537077*p.getValue()+v.getValue(),A=new String(_).toString(),P=new Q;for(let te=13-A.length;te>0;te--)P.append("0");P.append(A);let R=0;for(let te=0;te<13;te++){let de=P.charAt(te).charCodeAt(0)-48;R+=te&1?de:3*de}R=10-R%10,R===10&&(R=0),P.append(R.toString());let U=p.getFinderPattern().getResultPoints(),G=v.getFinderPattern().getResultPoints();return new ie(P.toString(),null,0,[U[0],U[1],G[0],G[1]],me.RSS_14,new Date().getTime())}static checkChecksum(p,v){let _=(p.getChecksumPortion()+16*v.getChecksumPortion())%79,A=9*p.getFinderPattern().getValue()+v.getFinderPattern().getValue();return A>72&&A--,A>8&&A--,_===A}decodePair(p,v,_,A){try{let P=this.findFinderPattern(p,v),R=this.parseFoundFinderPattern(p,_,v,P),U=A==null?null:A.get(O.NEED_RESULT_POINT_CALLBACK);if(U!=null){let de=(P[0]+P[1])/2;v&&(de=p.getSize()-1-de),U.foundPossibleResultPoint(new st(de,_))}let G=this.decodeDataCharacter(p,R,!0),te=this.decodeDataCharacter(p,R,!1);return new Oi(1597*G.getValue()+te.getValue(),G.getChecksumPortion()+4*te.getChecksumPortion(),R)}catch{return null}}decodeDataCharacter(p,v,_){let A=this.getDataCharacterCounters();for(let yt=0;yt<A.length;yt++)A[yt]=0;if(_)Dt.recordPatternInReverse(p,v.getStartEnd()[0],A);else{Dt.recordPattern(p,v.getStartEnd()[1]+1,A);for(let yt=0,Pt=A.length-1;yt<Pt;yt++,Pt--){let tr=A[yt];A[yt]=A[Pt],A[Pt]=tr}}let P=_?16:15,R=Ue.sum(new Int32Array(A))/P,U=this.getOddCounts(),G=this.getEvenCounts(),te=this.getOddRoundingErrors(),de=this.getEvenRoundingErrors();for(let yt=0;yt<A.length;yt++){let Pt=A[yt]/R,tr=Math.floor(Pt+.5);tr<1?tr=1:tr>8&&(tr=8);let ar=Math.floor(yt/2);yt&1?(G[ar]=tr,de[ar]=Pt-tr):(U[ar]=tr,te[ar]=Pt-tr)}this.adjustOddEvenCounts(_,P);let we=0,Pe=0;for(let yt=U.length-1;yt>=0;yt--)Pe*=9,Pe+=U[yt],we+=U[yt];let Ze=0,at=0;for(let yt=G.length-1;yt>=0;yt--)Ze*=9,Ze+=G[yt],at+=G[yt];let dt=Pe+3*Ze;if(_){if(we&1||we>12||we<4)throw new Z;let yt=(12-we)/2,Pt=Jn.OUTSIDE_ODD_WIDEST[yt],tr=9-Pt,ar=Bi.getRSSvalue(U,Pt,!1),sr=Bi.getRSSvalue(G,tr,!0),Nn=Jn.OUTSIDE_EVEN_TOTAL_SUBSET[yt],kn=Jn.OUTSIDE_GSUM[yt];return new vi(ar*Nn+sr+kn,dt)}else{if(at&1||at>10||at<4)throw new Z;let yt=(10-at)/2,Pt=Jn.INSIDE_ODD_WIDEST[yt],tr=9-Pt,ar=Bi.getRSSvalue(U,Pt,!0),sr=Bi.getRSSvalue(G,tr,!1),Nn=Jn.INSIDE_ODD_TOTAL_SUBSET[yt],kn=Jn.INSIDE_GSUM[yt];return new vi(sr*Nn+ar+kn,dt)}}findFinderPattern(p,v){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let A=p.getSize(),P=!1,R=0;for(;R<A&&(P=!p.get(R),v!==P);)R++;let U=0,G=R;for(let te=R;te<A;te++)if(p.get(te)!==P)_[U]++;else{if(U===3){if(ln.isFinderPattern(_))return[G,te];G+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,U--}else U++;_[U]=1,P=!P}throw new Z}parseFoundFinderPattern(p,v,_,A){let P=p.get(A[0]),R=A[0]-1;for(;R>=0&&P!==p.get(R);)R--;R++;const U=A[0]-R,G=this.getDecodeFinderCounters(),te=new Int32Array(G.length);g.arraycopy(G,0,te,1,G.length-1),te[0]=U;const de=this.parseFinderValue(te,Jn.FINDER_PATTERNS);let we=R,Pe=A[1];return _&&(we=p.getSize()-1-we,Pe=p.getSize()-1-Pe),new Fr(de,[R,A[1]],we,Pe,v)}adjustOddEvenCounts(p,v){let _=Ue.sum(new Int32Array(this.getOddCounts())),A=Ue.sum(new Int32Array(this.getEvenCounts())),P=!1,R=!1,U=!1,G=!1;p?(_>12?R=!0:_<4&&(P=!0),A>12?G=!0:A<4&&(U=!0)):(_>11?R=!0:_<5&&(P=!0),A>10?G=!0:A<4&&(U=!0));let te=_+A-v,de=(_&1)===(p?1:0),we=(A&1)===1;if(te===1)if(de){if(we)throw new Z;R=!0}else{if(!we)throw new Z;G=!0}else if(te===-1)if(de){if(we)throw new Z;P=!0}else{if(!we)throw new Z;U=!0}else if(te===0){if(de){if(!we)throw new Z;_<A?(P=!0,G=!0):(R=!0,U=!0)}else if(we)throw new Z}else throw new Z;if(P){if(R)throw new Z;ln.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(R&&ln.decrement(this.getOddCounts(),this.getOddRoundingErrors()),U){if(G)throw new Z;ln.increment(this.getEvenCounts(),this.getOddRoundingErrors())}G&&ln.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jn.OUTSIDE_GSUM=[0,161,961,2015,2715],Jn.INSIDE_GSUM=[0,336,1036,1516],Jn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jn.INSIDE_ODD_WIDEST=[2,4,6,8],Jn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ho extends Dt{constructor(p,v){super(),this.readers=[],this.verbose=v===!0;const _=p?p.get(O.POSSIBLE_FORMATS):null,A=p&&p.get(O.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;_?((_.includes(me.EAN_13)||_.includes(me.UPC_A)||_.includes(me.EAN_8)||_.includes(me.UPC_E))&&this.readers.push(new Gr(p)),_.includes(me.CODE_39)&&this.readers.push(new ut(A)),_.includes(me.CODE_128)&&this.readers.push(new Fe),_.includes(me.ITF)&&this.readers.push(new Mt),_.includes(me.RSS_14)&&this.readers.push(new Jn),_.includes(me.RSS_EXPANDED)&&this.readers.push(new qt(this.verbose))):(this.readers.push(new Gr(p)),this.readers.push(new ut),this.readers.push(new Gr(p)),this.readers.push(new Fe),this.readers.push(new Mt),this.readers.push(new Jn),this.readers.push(new qt(this.verbose)))}decodeRow(p,v,_){for(let A=0;A<this.readers.length;A++)try{return this.readers[A].decodeRow(p,v,_)}catch{}throw new Z}reset(){this.readers.forEach(p=>p.reset())}}class Al extends J{constructor(p=500,v){super(new Ho(v),p,v)}}class si{constructor(p,v,_){this.ecCodewords=p,this.ecBlocks=[v],_&&this.ecBlocks.push(_)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ei{constructor(p,v){this.count=p,this.dataCodewords=v}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Un{constructor(p,v,_,A,P,R){this.versionNumber=p,this.symbolSizeRows=v,this.symbolSizeColumns=_,this.dataRegionSizeRows=A,this.dataRegionSizeColumns=P,this.ecBlocks=R;let U=0;const G=R.getECCodewords(),te=R.getECBlocks();for(let de of te)U+=de.getCount()*(de.getDataCodewords()+G);this.totalCodewords=U}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(p,v){if(p&1||v&1)throw new I;for(let _ of Un.VERSIONS)if(_.symbolSizeRows===p&&_.symbolSizeColumns===v)return _;throw new I}toString(){return""+this.versionNumber}static buildVersions(){return[new Un(1,10,10,8,8,new si(5,new ei(1,3))),new Un(2,12,12,10,10,new si(7,new ei(1,5))),new Un(3,14,14,12,12,new si(10,new ei(1,8))),new Un(4,16,16,14,14,new si(12,new ei(1,12))),new Un(5,18,18,16,16,new si(14,new ei(1,18))),new Un(6,20,20,18,18,new si(18,new ei(1,22))),new Un(7,22,22,20,20,new si(20,new ei(1,30))),new Un(8,24,24,22,22,new si(24,new ei(1,36))),new Un(9,26,26,24,24,new si(28,new ei(1,44))),new Un(10,32,32,14,14,new si(36,new ei(1,62))),new Un(11,36,36,16,16,new si(42,new ei(1,86))),new Un(12,40,40,18,18,new si(48,new ei(1,114))),new Un(13,44,44,20,20,new si(56,new ei(1,144))),new Un(14,48,48,22,22,new si(68,new ei(1,174))),new Un(15,52,52,24,24,new si(42,new ei(2,102))),new Un(16,64,64,14,14,new si(56,new ei(2,140))),new Un(17,72,72,16,16,new si(36,new ei(4,92))),new Un(18,80,80,18,18,new si(48,new ei(4,114))),new Un(19,88,88,20,20,new si(56,new ei(4,144))),new Un(20,96,96,22,22,new si(68,new ei(4,174))),new Un(21,104,104,24,24,new si(56,new ei(6,136))),new Un(22,120,120,18,18,new si(68,new ei(6,175))),new Un(23,132,132,20,20,new si(62,new ei(8,163))),new Un(24,144,144,22,22,new si(62,new ei(8,156),new ei(2,155))),new Un(25,8,18,6,16,new si(7,new ei(1,5))),new Un(26,8,32,6,14,new si(11,new ei(1,10))),new Un(27,12,26,10,24,new si(14,new ei(1,16))),new Un(28,12,36,10,16,new si(18,new ei(1,22))),new Un(29,16,36,14,16,new si(24,new ei(1,32))),new Un(30,16,48,14,22,new si(28,new ei(1,49)))]}}Un.VERSIONS=Un.buildVersions();class On{constructor(p){const v=p.getHeight();if(v<8||v>144||v&1)throw new I;this.version=On.readVersion(p),this.mappingBitMatrix=this.extractDataRegion(p),this.readMappingMatrix=new re(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(p){const v=p.getHeight(),_=p.getWidth();return Un.getVersionForDimensions(v,_)}readCodewords(){const p=new Int8Array(this.version.getTotalCodewords());let v=0,_=4,A=0;const P=this.mappingBitMatrix.getHeight(),R=this.mappingBitMatrix.getWidth();let U=!1,G=!1,te=!1,de=!1;do if(_===P&&A===0&&!U)p[v++]=this.readCorner1(P,R)&255,_-=2,A+=2,U=!0;else if(_===P-2&&A===0&&R&3&&!G)p[v++]=this.readCorner2(P,R)&255,_-=2,A+=2,G=!0;else if(_===P+4&&A===2&&!(R&7)&&!te)p[v++]=this.readCorner3(P,R)&255,_-=2,A+=2,te=!0;else if(_===P-2&&A===0&&(R&7)===4&&!de)p[v++]=this.readCorner4(P,R)&255,_-=2,A+=2,de=!0;else{do _<P&&A>=0&&!this.readMappingMatrix.get(A,_)&&(p[v++]=this.readUtah(_,A,P,R)&255),_-=2,A+=2;while(_>=0&&A<R);_+=1,A+=3;do _>=0&&A<R&&!this.readMappingMatrix.get(A,_)&&(p[v++]=this.readUtah(_,A,P,R)&255),_+=2,A-=2;while(_<P&&A>=0);_+=3,A+=1}while(_<P||A<R);if(v!==this.version.getTotalCodewords())throw new I;return p}readModule(p,v,_,A){return p<0&&(p+=_,v+=4-(_+4&7)),v<0&&(v+=A,p+=4-(A+4&7)),this.readMappingMatrix.set(v,p),this.mappingBitMatrix.get(v,p)}readUtah(p,v,_,A){let P=0;return this.readModule(p-2,v-2,_,A)&&(P|=1),P<<=1,this.readModule(p-2,v-1,_,A)&&(P|=1),P<<=1,this.readModule(p-1,v-2,_,A)&&(P|=1),P<<=1,this.readModule(p-1,v-1,_,A)&&(P|=1),P<<=1,this.readModule(p-1,v,_,A)&&(P|=1),P<<=1,this.readModule(p,v-2,_,A)&&(P|=1),P<<=1,this.readModule(p,v-1,_,A)&&(P|=1),P<<=1,this.readModule(p,v,_,A)&&(P|=1),P}readCorner1(p,v){let _=0;return this.readModule(p-1,0,p,v)&&(_|=1),_<<=1,this.readModule(p-1,1,p,v)&&(_|=1),_<<=1,this.readModule(p-1,2,p,v)&&(_|=1),_<<=1,this.readModule(0,v-2,p,v)&&(_|=1),_<<=1,this.readModule(0,v-1,p,v)&&(_|=1),_<<=1,this.readModule(1,v-1,p,v)&&(_|=1),_<<=1,this.readModule(2,v-1,p,v)&&(_|=1),_<<=1,this.readModule(3,v-1,p,v)&&(_|=1),_}readCorner2(p,v){let _=0;return this.readModule(p-3,0,p,v)&&(_|=1),_<<=1,this.readModule(p-2,0,p,v)&&(_|=1),_<<=1,this.readModule(p-1,0,p,v)&&(_|=1),_<<=1,this.readModule(0,v-4,p,v)&&(_|=1),_<<=1,this.readModule(0,v-3,p,v)&&(_|=1),_<<=1,this.readModule(0,v-2,p,v)&&(_|=1),_<<=1,this.readModule(0,v-1,p,v)&&(_|=1),_<<=1,this.readModule(1,v-1,p,v)&&(_|=1),_}readCorner3(p,v){let _=0;return this.readModule(p-1,0,p,v)&&(_|=1),_<<=1,this.readModule(p-1,v-1,p,v)&&(_|=1),_<<=1,this.readModule(0,v-3,p,v)&&(_|=1),_<<=1,this.readModule(0,v-2,p,v)&&(_|=1),_<<=1,this.readModule(0,v-1,p,v)&&(_|=1),_<<=1,this.readModule(1,v-3,p,v)&&(_|=1),_<<=1,this.readModule(1,v-2,p,v)&&(_|=1),_<<=1,this.readModule(1,v-1,p,v)&&(_|=1),_}readCorner4(p,v){let _=0;return this.readModule(p-3,0,p,v)&&(_|=1),_<<=1,this.readModule(p-2,0,p,v)&&(_|=1),_<<=1,this.readModule(p-1,0,p,v)&&(_|=1),_<<=1,this.readModule(0,v-2,p,v)&&(_|=1),_<<=1,this.readModule(0,v-1,p,v)&&(_|=1),_<<=1,this.readModule(1,v-1,p,v)&&(_|=1),_<<=1,this.readModule(2,v-1,p,v)&&(_|=1),_<<=1,this.readModule(3,v-1,p,v)&&(_|=1),_}extractDataRegion(p){const v=this.version.getSymbolSizeRows(),_=this.version.getSymbolSizeColumns();if(p.getHeight()!==v)throw new h("Dimension of bitMatrix must match the version size");const A=this.version.getDataRegionSizeRows(),P=this.version.getDataRegionSizeColumns(),R=v/A|0,U=_/P|0,G=R*A,te=U*P,de=new re(te,G);for(let we=0;we<R;++we){const Pe=we*A;for(let Ze=0;Ze<U;++Ze){const at=Ze*P;for(let dt=0;dt<A;++dt){const yt=we*(A+2)+1+dt,Pt=Pe+dt;for(let tr=0;tr<P;++tr){const ar=Ze*(P+2)+1+tr;if(p.get(ar,yt)){const sr=at+tr;de.set(sr,Pt)}}}}}return de}}class xs{constructor(p,v){this.numDataCodewords=p,this.codewords=v}static getDataBlocks(p,v){const _=v.getECBlocks();let A=0;const P=_.getECBlocks();for(let dt of P)A+=dt.getCount();const R=new Array(A);let U=0;for(let dt of P)for(let yt=0;yt<dt.getCount();yt++){const Pt=dt.getDataCodewords(),tr=_.getECCodewords()+Pt;R[U++]=new xs(Pt,new Uint8Array(tr))}const te=R[0].codewords.length-_.getECCodewords(),de=te-1;let we=0;for(let dt=0;dt<de;dt++)for(let yt=0;yt<U;yt++)R[yt].codewords[dt]=p[we++];const Pe=v.getVersionNumber()===24,Ze=Pe?8:U;for(let dt=0;dt<Ze;dt++)R[dt].codewords[te-1]=p[we++];const at=R[0].codewords.length;for(let dt=te;dt<at;dt++)for(let yt=0;yt<U;yt++){const Pt=Pe?(yt+8)%U:yt,tr=Pe&&Pt>7?dt-1:dt;R[Pt].codewords[tr]=p[we++]}if(we!==p.length)throw new h;return R}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Os{constructor(p){this.bytes=p,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(p){if(p<1||p>32||p>this.available())throw new h(""+p);let v=0,_=this.bitOffset,A=this.byteOffset;const P=this.bytes;if(_>0){const R=8-_,U=p<R?p:R,G=R-U,te=255>>8-U<<G;v=(P[A]&te)>>G,p-=U,_+=U,_===8&&(_=0,A++)}if(p>0){for(;p>=8;)v=v<<8|P[A]&255,A++,p-=8;if(p>0){const R=8-p,U=255>>R<<R;v=v<<p|(P[A]&U)>>R,_+=p}}return this.bitOffset=_,this.byteOffset=A,v}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var vs;(function(Ne){Ne[Ne.PAD_ENCODE=0]="PAD_ENCODE",Ne[Ne.ASCII_ENCODE=1]="ASCII_ENCODE",Ne[Ne.C40_ENCODE=2]="C40_ENCODE",Ne[Ne.TEXT_ENCODE=3]="TEXT_ENCODE",Ne[Ne.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Ne[Ne.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Ne[Ne.BASE256_ENCODE=6]="BASE256_ENCODE"})(vs||(vs={}));class ll{static decode(p){const v=new Os(p),_=new Q,A=new Q,P=new Array;let R=vs.ASCII_ENCODE;do if(R===vs.ASCII_ENCODE)R=this.decodeAsciiSegment(v,_,A);else{switch(R){case vs.C40_ENCODE:this.decodeC40Segment(v,_);break;case vs.TEXT_ENCODE:this.decodeTextSegment(v,_);break;case vs.ANSIX12_ENCODE:this.decodeAnsiX12Segment(v,_);break;case vs.EDIFACT_ENCODE:this.decodeEdifactSegment(v,_);break;case vs.BASE256_ENCODE:this.decodeBase256Segment(v,_,P);break;default:throw new I}R=vs.ASCII_ENCODE}while(R!==vs.PAD_ENCODE&&v.available()>0);return A.length()>0&&_.append(A.toString()),new ue(p,_.toString(),P.length===0?null:P,null)}static decodeAsciiSegment(p,v,_){let A=!1;do{let P=p.readBits(8);if(P===0)throw new I;if(P<=128)return A&&(P+=128),v.append(String.fromCharCode(P-1)),vs.ASCII_ENCODE;if(P===129)return vs.PAD_ENCODE;if(P<=229){const R=P-130;R<10&&v.append("0"),v.append(""+R)}else switch(P){case 230:return vs.C40_ENCODE;case 231:return vs.BASE256_ENCODE;case 232:v.append("");break;case 233:case 234:break;case 235:A=!0;break;case 236:v.append("[)>05"),_.insert(0,"");break;case 237:v.append("[)>06"),_.insert(0,"");break;case 238:return vs.ANSIX12_ENCODE;case 239:return vs.TEXT_ENCODE;case 240:return vs.EDIFACT_ENCODE;case 241:break;default:if(P!==254||p.available()!==0)throw new I;break}}while(p.available()>0);return vs.ASCII_ENCODE}static decodeC40Segment(p,v){let _=!1;const A=[];let P=0;do{if(p.available()===8)return;const R=p.readBits(8);if(R===254)return;this.parseTwoBytes(R,p.readBits(8),A);for(let U=0;U<3;U++){const G=A[U];switch(P){case 0:if(G<3)P=G+1;else if(G<this.C40_BASIC_SET_CHARS.length){const te=this.C40_BASIC_SET_CHARS[G];_?(v.append(String.fromCharCode(te.charCodeAt(0)+128)),_=!1):v.append(te)}else throw new I;break;case 1:_?(v.append(String.fromCharCode(G+128)),_=!1):v.append(String.fromCharCode(G)),P=0;break;case 2:if(G<this.C40_SHIFT2_SET_CHARS.length){const te=this.C40_SHIFT2_SET_CHARS[G];_?(v.append(String.fromCharCode(te.charCodeAt(0)+128)),_=!1):v.append(te)}else switch(G){case 27:v.append("");break;case 30:_=!0;break;default:throw new I}P=0;break;case 3:_?(v.append(String.fromCharCode(G+224)),_=!1):v.append(String.fromCharCode(G+96)),P=0;break;default:throw new I}}}while(p.available()>0)}static decodeTextSegment(p,v){let _=!1,A=[],P=0;do{if(p.available()===8)return;const R=p.readBits(8);if(R===254)return;this.parseTwoBytes(R,p.readBits(8),A);for(let U=0;U<3;U++){const G=A[U];switch(P){case 0:if(G<3)P=G+1;else if(G<this.TEXT_BASIC_SET_CHARS.length){const te=this.TEXT_BASIC_SET_CHARS[G];_?(v.append(String.fromCharCode(te.charCodeAt(0)+128)),_=!1):v.append(te)}else throw new I;break;case 1:_?(v.append(String.fromCharCode(G+128)),_=!1):v.append(String.fromCharCode(G)),P=0;break;case 2:if(G<this.TEXT_SHIFT2_SET_CHARS.length){const te=this.TEXT_SHIFT2_SET_CHARS[G];_?(v.append(String.fromCharCode(te.charCodeAt(0)+128)),_=!1):v.append(te)}else switch(G){case 27:v.append("");break;case 30:_=!0;break;default:throw new I}P=0;break;case 3:if(G<this.TEXT_SHIFT3_SET_CHARS.length){const te=this.TEXT_SHIFT3_SET_CHARS[G];_?(v.append(String.fromCharCode(te.charCodeAt(0)+128)),_=!1):v.append(te),P=0}else throw new I;break;default:throw new I}}}while(p.available()>0)}static decodeAnsiX12Segment(p,v){const _=[];do{if(p.available()===8)return;const A=p.readBits(8);if(A===254)return;this.parseTwoBytes(A,p.readBits(8),_);for(let P=0;P<3;P++){const R=_[P];switch(R){case 0:v.append("\r");break;case 1:v.append("*");break;case 2:v.append(">");break;case 3:v.append(" ");break;default:if(R<14)v.append(String.fromCharCode(R+44));else if(R<40)v.append(String.fromCharCode(R+51));else throw new I;break}}}while(p.available()>0)}static parseTwoBytes(p,v,_){let A=(p<<8)+v-1,P=Math.floor(A/1600);_[0]=P,A-=P*1600,P=Math.floor(A/40),_[1]=P,_[2]=A-P*40}static decodeEdifactSegment(p,v){do{if(p.available()<=16)return;for(let _=0;_<4;_++){let A=p.readBits(6);if(A===31){const P=8-p.getBitOffset();P!==8&&p.readBits(P);return}A&32||(A|=64),v.append(String.fromCharCode(A))}}while(p.available()>0)}static decodeBase256Segment(p,v,_){let A=1+p.getByteOffset();const P=this.unrandomize255State(p.readBits(8),A++);let R;if(P===0?R=p.available()/8|0:P<250?R=P:R=250*(P-249)+this.unrandomize255State(p.readBits(8),A++),R<0)throw new I;const U=new Uint8Array(R);for(let G=0;G<R;G++){if(p.available()<8)throw new I;U[G]=this.unrandomize255State(p.readBits(8),A++)}_.push(U);try{v.append(F.decode(U,q.ISO88591))}catch(G){throw new Te("Platform does not support required encoding: "+G.message)}}static unrandomize255State(p,v){const _=149*v%255+1,A=p-_;return A>=0?A:A+256}}ll.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ll.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ll.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ll.TEXT_SHIFT2_SET_CHARS=ll.C40_SHIFT2_SET_CHARS,ll.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Yu{constructor(){this.rsDecoder=new ze(Ge.DATA_MATRIX_FIELD_256)}decode(p){const v=new On(p),_=v.getVersion(),A=v.readCodewords(),P=xs.getDataBlocks(A,_);let R=0;for(let te of P)R+=te.getNumDataCodewords();const U=new Uint8Array(R),G=P.length;for(let te=0;te<G;te++){const de=P[te],we=de.getCodewords(),Pe=de.getNumDataCodewords();this.correctErrors(we,Pe);for(let Ze=0;Ze<Pe;Ze++)U[Ze*G+te]=we[Ze]}return ll.decode(U)}correctErrors(p,v){const _=new Int32Array(p);try{this.rsDecoder.decode(_,p.length-v)}catch{throw new m}for(let A=0;A<v;A++)p[A]=_[A]}}class Kr{constructor(p){this.image=p,this.rectangleDetector=new _r(this.image)}detect(){const p=this.rectangleDetector.detect();let v=this.detectSolid1(p);if(v=this.detectSolid2(v),v[3]=this.correctTopRight(v),!v[3])throw new Z;v=this.shiftToModuleCenter(v);const _=v[0],A=v[1],P=v[2],R=v[3];let U=this.transitionsBetween(_,R)+1,G=this.transitionsBetween(P,R)+1;(U&1)===1&&(U+=1),(G&1)===1&&(G+=1),4*U<7*G&&4*G<7*U&&(U=G=Math.max(U,G));let te=Kr.sampleGrid(this.image,_,A,P,R,U,G);return new Xt(te,[_,A,P,R])}static shiftPoint(p,v,_){let A=(v.getX()-p.getX())/(_+1),P=(v.getY()-p.getY())/(_+1);return new st(p.getX()+A,p.getY()+P)}static moveAway(p,v,_){let A=p.getX(),P=p.getY();return A<v?A-=1:A+=1,P<_?P-=1:P+=1,new st(A,P)}detectSolid1(p){let v=p[0],_=p[1],A=p[3],P=p[2],R=this.transitionsBetween(v,_),U=this.transitionsBetween(_,A),G=this.transitionsBetween(A,P),te=this.transitionsBetween(P,v),de=R,we=[P,v,_,A];return de>U&&(de=U,we[0]=v,we[1]=_,we[2]=A,we[3]=P),de>G&&(de=G,we[0]=_,we[1]=A,we[2]=P,we[3]=v),de>te&&(we[0]=A,we[1]=P,we[2]=v,we[3]=_),we}detectSolid2(p){let v=p[0],_=p[1],A=p[2],P=p[3],R=this.transitionsBetween(v,P),U=Kr.shiftPoint(_,A,(R+1)*4),G=Kr.shiftPoint(A,_,(R+1)*4),te=this.transitionsBetween(U,v),de=this.transitionsBetween(G,P);return te<de?(p[0]=v,p[1]=_,p[2]=A,p[3]=P):(p[0]=_,p[1]=A,p[2]=P,p[3]=v),p}correctTopRight(p){let v=p[0],_=p[1],A=p[2],P=p[3],R=this.transitionsBetween(v,P),U=this.transitionsBetween(_,P),G=Kr.shiftPoint(v,_,(U+1)*4),te=Kr.shiftPoint(A,_,(R+1)*4);R=this.transitionsBetween(G,P),U=this.transitionsBetween(te,P);let de=new st(P.getX()+(A.getX()-_.getX())/(R+1),P.getY()+(A.getY()-_.getY())/(R+1)),we=new st(P.getX()+(v.getX()-_.getX())/(U+1),P.getY()+(v.getY()-_.getY())/(U+1));if(!this.isValid(de))return this.isValid(we)?we:null;if(!this.isValid(we))return de;let Pe=this.transitionsBetween(G,de)+this.transitionsBetween(te,de),Ze=this.transitionsBetween(G,we)+this.transitionsBetween(te,we);return Pe>Ze?de:we}shiftToModuleCenter(p){let v=p[0],_=p[1],A=p[2],P=p[3],R=this.transitionsBetween(v,P)+1,U=this.transitionsBetween(A,P)+1,G=Kr.shiftPoint(v,_,U*4),te=Kr.shiftPoint(A,_,R*4);R=this.transitionsBetween(G,P)+1,U=this.transitionsBetween(te,P)+1,(R&1)===1&&(R+=1),(U&1)===1&&(U+=1);let de=(v.getX()+_.getX()+A.getX()+P.getX())/4,we=(v.getY()+_.getY()+A.getY()+P.getY())/4;v=Kr.moveAway(v,de,we),_=Kr.moveAway(_,de,we),A=Kr.moveAway(A,de,we),P=Kr.moveAway(P,de,we);let Pe,Ze;return G=Kr.shiftPoint(v,_,U*4),G=Kr.shiftPoint(G,P,R*4),Pe=Kr.shiftPoint(_,v,U*4),Pe=Kr.shiftPoint(Pe,A,R*4),te=Kr.shiftPoint(A,P,U*4),te=Kr.shiftPoint(te,_,R*4),Ze=Kr.shiftPoint(P,A,U*4),Ze=Kr.shiftPoint(Ze,v,R*4),[G,Pe,te,Ze]}isValid(p){return p.getX()>=0&&p.getX()<this.image.getWidth()&&p.getY()>0&&p.getY()<this.image.getHeight()}static sampleGrid(p,v,_,A,P,R,U){return Vt.getInstance().sampleGrid(p,R,U,.5,.5,R-.5,.5,R-.5,U-.5,.5,U-.5,v.getX(),v.getY(),P.getX(),P.getY(),A.getX(),A.getY(),_.getX(),_.getY())}transitionsBetween(p,v){let _=Math.trunc(p.getX()),A=Math.trunc(p.getY()),P=Math.trunc(v.getX()),R=Math.trunc(v.getY()),U=Math.abs(R-A)>Math.abs(P-_);if(U){let dt=_;_=A,A=dt,dt=P,P=R,R=dt}let G=Math.abs(P-_),te=Math.abs(R-A),de=-G/2,we=A<R?1:-1,Pe=_<P?1:-1,Ze=0,at=this.image.get(U?A:_,U?_:A);for(let dt=_,yt=A;dt!==P;dt+=Pe){let Pt=this.image.get(U?yt:dt,U?dt:yt);if(Pt!==at&&(Ze++,at=Pt),de+=te,de>0){if(yt===R)break;yt+=we,de-=G}}return Ze}}class yi{constructor(){this.decoder=new Yu}decode(p,v=null){let _,A;if(v!=null&&v.has(O.PURE_BARCODE)){const te=yi.extractPureBits(p.getBlackMatrix());_=this.decoder.decode(te),A=yi.NO_POINTS}else{const te=new Kr(p.getBlackMatrix()).detect();_=this.decoder.decode(te.getBits()),A=te.getPoints()}const P=_.getRawBytes(),R=new ie(_.getText(),P,8*P.length,A,me.DATA_MATRIX,g.currentTimeMillis()),U=_.getByteSegments();U!=null&&R.putMetadata(_e.BYTE_SEGMENTS,U);const G=_.getECLevel();return G!=null&&R.putMetadata(_e.ERROR_CORRECTION_LEVEL,G),R}reset(){}static extractPureBits(p){const v=p.getTopLeftOnBit(),_=p.getBottomRightOnBit();if(v==null||_==null)throw new Z;const A=this.moduleSize(v,p);let P=v[1];const R=_[1];let U=v[0];const te=(_[0]-U+1)/A,de=(R-P+1)/A;if(te<=0||de<=0)throw new Z;const we=A/2;P+=we,U+=we;const Pe=new re(te,de);for(let Ze=0;Ze<de;Ze++){const at=P+Ze*A;for(let dt=0;dt<te;dt++)p.get(U+dt*A,at)&&Pe.set(dt,Ze)}return Pe}static moduleSize(p,v){const _=v.getWidth();let A=p[0];const P=p[1];for(;A<_&&v.get(A,P);)A++;if(A===_)throw new Z;const R=A-p[0];if(R===0)throw new Z;return R}}yi.NO_POINTS=[];class bh extends J{constructor(p=500){super(new yi,p)}}var rs;(function(Ne){Ne[Ne.L=0]="L",Ne[Ne.M=1]="M",Ne[Ne.Q=2]="Q",Ne[Ne.H=3]="H"})(rs||(rs={}));class ni{constructor(p,v,_){this.value=p,this.stringValue=v,this.bits=_,ni.FOR_BITS.set(_,this),ni.FOR_VALUE.set(p,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(p){switch(p){case"L":return ni.L;case"M":return ni.M;case"Q":return ni.Q;case"H":return ni.H;default:throw new d(p+"not available")}}toString(){return this.stringValue}equals(p){if(!(p instanceof ni))return!1;const v=p;return this.value===v.value}static forBits(p){if(p<0||p>=ni.FOR_BITS.size)throw new h;return ni.FOR_BITS.get(p)}}ni.FOR_BITS=new Map,ni.FOR_VALUE=new Map,ni.L=new ni(rs.L,"L",1),ni.M=new ni(rs.M,"M",0),ni.Q=new ni(rs.Q,"Q",3),ni.H=new ni(rs.H,"H",2);class bo{constructor(p){this.errorCorrectionLevel=ni.forBits(p>>3&3),this.dataMask=p&7}static numBitsDiffering(p,v){return E.bitCount(p^v)}static decodeFormatInformation(p,v){const _=bo.doDecodeFormatInformation(p,v);return _!==null?_:bo.doDecodeFormatInformation(p^bo.FORMAT_INFO_MASK_QR,v^bo.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(p,v){let _=Number.MAX_SAFE_INTEGER,A=0;for(const P of bo.FORMAT_INFO_DECODE_LOOKUP){const R=P[0];if(R===p||R===v)return new bo(P[1]);let U=bo.numBitsDiffering(p,R);U<_&&(A=P[1],_=U),p!==v&&(U=bo.numBitsDiffering(v,R),U<_&&(A=P[1],_=U))}return _<=3?new bo(A):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(p){if(!(p instanceof bo))return!1;const v=p;return this.errorCorrectionLevel===v.errorCorrectionLevel&&this.dataMask===v.dataMask}}bo.FORMAT_INFO_MASK_QR=21522,bo.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class _t{constructor(p,...v){this.ecCodewordsPerBlock=p,this.ecBlocks=v}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let p=0;const v=this.ecBlocks;for(const _ of v)p+=_.getCount();return p}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class We{constructor(p,v){this.count=p,this.dataCodewords=v}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Or{constructor(p,v,..._){this.versionNumber=p,this.alignmentPatternCenters=v,this.ecBlocks=_;let A=0;const P=_[0].getECCodewordsPerBlock(),R=_[0].getECBlocks();for(const U of R)A+=U.getCount()*(U.getDataCodewords()+P);this.totalCodewords=A}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(p){return this.ecBlocks[p.getValue()]}static getProvisionalVersionForDimension(p){if(p%4!==1)throw new I;try{return this.getVersionForNumber((p-17)/4)}catch{throw new I}}static getVersionForNumber(p){if(p<1||p>40)throw new h;return Or.VERSIONS[p-1]}static decodeVersionInformation(p){let v=Number.MAX_SAFE_INTEGER,_=0;for(let A=0;A<Or.VERSION_DECODE_INFO.length;A++){const P=Or.VERSION_DECODE_INFO[A];if(P===p)return Or.getVersionForNumber(A+7);const R=bo.numBitsDiffering(p,P);R<v&&(_=A+7,v=R)}return v<=3?Or.getVersionForNumber(_):null}buildFunctionPattern(){const p=this.getDimensionForVersion(),v=new re(p);v.setRegion(0,0,9,9),v.setRegion(p-8,0,8,9),v.setRegion(0,p-8,9,8);const _=this.alignmentPatternCenters.length;for(let A=0;A<_;A++){const P=this.alignmentPatternCenters[A]-2;for(let R=0;R<_;R++)A===0&&(R===0||R===_-1)||A===_-1&&R===0||v.setRegion(this.alignmentPatternCenters[R]-2,P,5,5)}return v.setRegion(6,9,1,p-17),v.setRegion(9,6,p-17,1),this.versionNumber>6&&(v.setRegion(p-11,0,3,6),v.setRegion(0,p-11,6,3)),v}toString(){return""+this.versionNumber}}Or.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Or.VERSIONS=[new Or(1,new Int32Array(0),new _t(7,new We(1,19)),new _t(10,new We(1,16)),new _t(13,new We(1,13)),new _t(17,new We(1,9))),new Or(2,Int32Array.from([6,18]),new _t(10,new We(1,34)),new _t(16,new We(1,28)),new _t(22,new We(1,22)),new _t(28,new We(1,16))),new Or(3,Int32Array.from([6,22]),new _t(15,new We(1,55)),new _t(26,new We(1,44)),new _t(18,new We(2,17)),new _t(22,new We(2,13))),new Or(4,Int32Array.from([6,26]),new _t(20,new We(1,80)),new _t(18,new We(2,32)),new _t(26,new We(2,24)),new _t(16,new We(4,9))),new Or(5,Int32Array.from([6,30]),new _t(26,new We(1,108)),new _t(24,new We(2,43)),new _t(18,new We(2,15),new We(2,16)),new _t(22,new We(2,11),new We(2,12))),new Or(6,Int32Array.from([6,34]),new _t(18,new We(2,68)),new _t(16,new We(4,27)),new _t(24,new We(4,19)),new _t(28,new We(4,15))),new Or(7,Int32Array.from([6,22,38]),new _t(20,new We(2,78)),new _t(18,new We(4,31)),new _t(18,new We(2,14),new We(4,15)),new _t(26,new We(4,13),new We(1,14))),new Or(8,Int32Array.from([6,24,42]),new _t(24,new We(2,97)),new _t(22,new We(2,38),new We(2,39)),new _t(22,new We(4,18),new We(2,19)),new _t(26,new We(4,14),new We(2,15))),new Or(9,Int32Array.from([6,26,46]),new _t(30,new We(2,116)),new _t(22,new We(3,36),new We(2,37)),new _t(20,new We(4,16),new We(4,17)),new _t(24,new We(4,12),new We(4,13))),new Or(10,Int32Array.from([6,28,50]),new _t(18,new We(2,68),new We(2,69)),new _t(26,new We(4,43),new We(1,44)),new _t(24,new We(6,19),new We(2,20)),new _t(28,new We(6,15),new We(2,16))),new Or(11,Int32Array.from([6,30,54]),new _t(20,new We(4,81)),new _t(30,new We(1,50),new We(4,51)),new _t(28,new We(4,22),new We(4,23)),new _t(24,new We(3,12),new We(8,13))),new Or(12,Int32Array.from([6,32,58]),new _t(24,new We(2,92),new We(2,93)),new _t(22,new We(6,36),new We(2,37)),new _t(26,new We(4,20),new We(6,21)),new _t(28,new We(7,14),new We(4,15))),new Or(13,Int32Array.from([6,34,62]),new _t(26,new We(4,107)),new _t(22,new We(8,37),new We(1,38)),new _t(24,new We(8,20),new We(4,21)),new _t(22,new We(12,11),new We(4,12))),new Or(14,Int32Array.from([6,26,46,66]),new _t(30,new We(3,115),new We(1,116)),new _t(24,new We(4,40),new We(5,41)),new _t(20,new We(11,16),new We(5,17)),new _t(24,new We(11,12),new We(5,13))),new Or(15,Int32Array.from([6,26,48,70]),new _t(22,new We(5,87),new We(1,88)),new _t(24,new We(5,41),new We(5,42)),new _t(30,new We(5,24),new We(7,25)),new _t(24,new We(11,12),new We(7,13))),new Or(16,Int32Array.from([6,26,50,74]),new _t(24,new We(5,98),new We(1,99)),new _t(28,new We(7,45),new We(3,46)),new _t(24,new We(15,19),new We(2,20)),new _t(30,new We(3,15),new We(13,16))),new Or(17,Int32Array.from([6,30,54,78]),new _t(28,new We(1,107),new We(5,108)),new _t(28,new We(10,46),new We(1,47)),new _t(28,new We(1,22),new We(15,23)),new _t(28,new We(2,14),new We(17,15))),new Or(18,Int32Array.from([6,30,56,82]),new _t(30,new We(5,120),new We(1,121)),new _t(26,new We(9,43),new We(4,44)),new _t(28,new We(17,22),new We(1,23)),new _t(28,new We(2,14),new We(19,15))),new Or(19,Int32Array.from([6,30,58,86]),new _t(28,new We(3,113),new We(4,114)),new _t(26,new We(3,44),new We(11,45)),new _t(26,new We(17,21),new We(4,22)),new _t(26,new We(9,13),new We(16,14))),new Or(20,Int32Array.from([6,34,62,90]),new _t(28,new We(3,107),new We(5,108)),new _t(26,new We(3,41),new We(13,42)),new _t(30,new We(15,24),new We(5,25)),new _t(28,new We(15,15),new We(10,16))),new Or(21,Int32Array.from([6,28,50,72,94]),new _t(28,new We(4,116),new We(4,117)),new _t(26,new We(17,42)),new _t(28,new We(17,22),new We(6,23)),new _t(30,new We(19,16),new We(6,17))),new Or(22,Int32Array.from([6,26,50,74,98]),new _t(28,new We(2,111),new We(7,112)),new _t(28,new We(17,46)),new _t(30,new We(7,24),new We(16,25)),new _t(24,new We(34,13))),new Or(23,Int32Array.from([6,30,54,78,102]),new _t(30,new We(4,121),new We(5,122)),new _t(28,new We(4,47),new We(14,48)),new _t(30,new We(11,24),new We(14,25)),new _t(30,new We(16,15),new We(14,16))),new Or(24,Int32Array.from([6,28,54,80,106]),new _t(30,new We(6,117),new We(4,118)),new _t(28,new We(6,45),new We(14,46)),new _t(30,new We(11,24),new We(16,25)),new _t(30,new We(30,16),new We(2,17))),new Or(25,Int32Array.from([6,32,58,84,110]),new _t(26,new We(8,106),new We(4,107)),new _t(28,new We(8,47),new We(13,48)),new _t(30,new We(7,24),new We(22,25)),new _t(30,new We(22,15),new We(13,16))),new Or(26,Int32Array.from([6,30,58,86,114]),new _t(28,new We(10,114),new We(2,115)),new _t(28,new We(19,46),new We(4,47)),new _t(28,new We(28,22),new We(6,23)),new _t(30,new We(33,16),new We(4,17))),new Or(27,Int32Array.from([6,34,62,90,118]),new _t(30,new We(8,122),new We(4,123)),new _t(28,new We(22,45),new We(3,46)),new _t(30,new We(8,23),new We(26,24)),new _t(30,new We(12,15),new We(28,16))),new Or(28,Int32Array.from([6,26,50,74,98,122]),new _t(30,new We(3,117),new We(10,118)),new _t(28,new We(3,45),new We(23,46)),new _t(30,new We(4,24),new We(31,25)),new _t(30,new We(11,15),new We(31,16))),new Or(29,Int32Array.from([6,30,54,78,102,126]),new _t(30,new We(7,116),new We(7,117)),new _t(28,new We(21,45),new We(7,46)),new _t(30,new We(1,23),new We(37,24)),new _t(30,new We(19,15),new We(26,16))),new Or(30,Int32Array.from([6,26,52,78,104,130]),new _t(30,new We(5,115),new We(10,116)),new _t(28,new We(19,47),new We(10,48)),new _t(30,new We(15,24),new We(25,25)),new _t(30,new We(23,15),new We(25,16))),new Or(31,Int32Array.from([6,30,56,82,108,134]),new _t(30,new We(13,115),new We(3,116)),new _t(28,new We(2,46),new We(29,47)),new _t(30,new We(42,24),new We(1,25)),new _t(30,new We(23,15),new We(28,16))),new Or(32,Int32Array.from([6,34,60,86,112,138]),new _t(30,new We(17,115)),new _t(28,new We(10,46),new We(23,47)),new _t(30,new We(10,24),new We(35,25)),new _t(30,new We(19,15),new We(35,16))),new Or(33,Int32Array.from([6,30,58,86,114,142]),new _t(30,new We(17,115),new We(1,116)),new _t(28,new We(14,46),new We(21,47)),new _t(30,new We(29,24),new We(19,25)),new _t(30,new We(11,15),new We(46,16))),new Or(34,Int32Array.from([6,34,62,90,118,146]),new _t(30,new We(13,115),new We(6,116)),new _t(28,new We(14,46),new We(23,47)),new _t(30,new We(44,24),new We(7,25)),new _t(30,new We(59,16),new We(1,17))),new Or(35,Int32Array.from([6,30,54,78,102,126,150]),new _t(30,new We(12,121),new We(7,122)),new _t(28,new We(12,47),new We(26,48)),new _t(30,new We(39,24),new We(14,25)),new _t(30,new We(22,15),new We(41,16))),new Or(36,Int32Array.from([6,24,50,76,102,128,154]),new _t(30,new We(6,121),new We(14,122)),new _t(28,new We(6,47),new We(34,48)),new _t(30,new We(46,24),new We(10,25)),new _t(30,new We(2,15),new We(64,16))),new Or(37,Int32Array.from([6,28,54,80,106,132,158]),new _t(30,new We(17,122),new We(4,123)),new _t(28,new We(29,46),new We(14,47)),new _t(30,new We(49,24),new We(10,25)),new _t(30,new We(24,15),new We(46,16))),new Or(38,Int32Array.from([6,32,58,84,110,136,162]),new _t(30,new We(4,122),new We(18,123)),new _t(28,new We(13,46),new We(32,47)),new _t(30,new We(48,24),new We(14,25)),new _t(30,new We(42,15),new We(32,16))),new Or(39,Int32Array.from([6,26,54,82,110,138,166]),new _t(30,new We(20,117),new We(4,118)),new _t(28,new We(40,47),new We(7,48)),new _t(30,new We(43,24),new We(22,25)),new _t(30,new We(10,15),new We(67,16))),new Or(40,Int32Array.from([6,30,58,86,114,142,170]),new _t(30,new We(19,118),new We(6,119)),new _t(28,new We(18,47),new We(31,48)),new _t(30,new We(34,24),new We(34,25)),new _t(30,new We(20,15),new We(61,16)))];var ys;(function(Ne){Ne[Ne.DATA_MASK_000=0]="DATA_MASK_000",Ne[Ne.DATA_MASK_001=1]="DATA_MASK_001",Ne[Ne.DATA_MASK_010=2]="DATA_MASK_010",Ne[Ne.DATA_MASK_011=3]="DATA_MASK_011",Ne[Ne.DATA_MASK_100=4]="DATA_MASK_100",Ne[Ne.DATA_MASK_101=5]="DATA_MASK_101",Ne[Ne.DATA_MASK_110=6]="DATA_MASK_110",Ne[Ne.DATA_MASK_111=7]="DATA_MASK_111"})(ys||(ys={}));class ro{constructor(p,v){this.value=p,this.isMasked=v}unmaskBitMatrix(p,v){for(let _=0;_<v;_++)for(let A=0;A<v;A++)this.isMasked(_,A)&&p.flip(A,_)}}ro.values=new Map([[ys.DATA_MASK_000,new ro(ys.DATA_MASK_000,(Ne,p)=>(Ne+p&1)===0)],[ys.DATA_MASK_001,new ro(ys.DATA_MASK_001,(Ne,p)=>(Ne&1)===0)],[ys.DATA_MASK_010,new ro(ys.DATA_MASK_010,(Ne,p)=>p%3===0)],[ys.DATA_MASK_011,new ro(ys.DATA_MASK_011,(Ne,p)=>(Ne+p)%3===0)],[ys.DATA_MASK_100,new ro(ys.DATA_MASK_100,(Ne,p)=>(Math.floor(Ne/2)+Math.floor(p/3)&1)===0)],[ys.DATA_MASK_101,new ro(ys.DATA_MASK_101,(Ne,p)=>Ne*p%6===0)],[ys.DATA_MASK_110,new ro(ys.DATA_MASK_110,(Ne,p)=>Ne*p%6<3)],[ys.DATA_MASK_111,new ro(ys.DATA_MASK_111,(Ne,p)=>(Ne+p+Ne*p%3&1)===0)]]);class cu{constructor(p){const v=p.getHeight();if(v<21||(v&3)!==1)throw new I;this.bitMatrix=p}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let p=0;for(let P=0;P<6;P++)p=this.copyBit(P,8,p);p=this.copyBit(7,8,p),p=this.copyBit(8,8,p),p=this.copyBit(8,7,p);for(let P=5;P>=0;P--)p=this.copyBit(8,P,p);const v=this.bitMatrix.getHeight();let _=0;const A=v-7;for(let P=v-1;P>=A;P--)_=this.copyBit(8,P,_);for(let P=v-8;P<v;P++)_=this.copyBit(P,8,_);if(this.parsedFormatInfo=bo.decodeFormatInformation(p,_),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new I}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const p=this.bitMatrix.getHeight(),v=Math.floor((p-17)/4);if(v<=6)return Or.getVersionForNumber(v);let _=0;const A=p-11;for(let R=5;R>=0;R--)for(let U=p-9;U>=A;U--)_=this.copyBit(U,R,_);let P=Or.decodeVersionInformation(_);if(P!==null&&P.getDimensionForVersion()===p)return this.parsedVersion=P,P;_=0;for(let R=5;R>=0;R--)for(let U=p-9;U>=A;U--)_=this.copyBit(R,U,_);if(P=Or.decodeVersionInformation(_),P!==null&&P.getDimensionForVersion()===p)return this.parsedVersion=P,P;throw new I}copyBit(p,v,_){return(this.isMirror?this.bitMatrix.get(v,p):this.bitMatrix.get(p,v))?_<<1|1:_<<1}readCodewords(){const p=this.readFormatInformation(),v=this.readVersion(),_=ro.values.get(p.getDataMask()),A=this.bitMatrix.getHeight();_.unmaskBitMatrix(this.bitMatrix,A);const P=v.buildFunctionPattern();let R=!0;const U=new Uint8Array(v.getTotalCodewords());let G=0,te=0,de=0;for(let we=A-1;we>0;we-=2){we===6&&we--;for(let Pe=0;Pe<A;Pe++){const Ze=R?A-1-Pe:Pe;for(let at=0;at<2;at++)P.get(we-at,Ze)||(de++,te<<=1,this.bitMatrix.get(we-at,Ze)&&(te|=1),de===8&&(U[G++]=te,de=0,te=0))}R=!R}if(G!==v.getTotalCodewords())throw new I;return U}remask(){if(this.parsedFormatInfo===null)return;const p=ro.values[this.parsedFormatInfo.getDataMask()],v=this.bitMatrix.getHeight();p.unmaskBitMatrix(this.bitMatrix,v)}setMirror(p){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=p}mirror(){const p=this.bitMatrix;for(let v=0,_=p.getWidth();v<_;v++)for(let A=v+1,P=p.getHeight();A<P;A++)p.get(v,A)!==p.get(A,v)&&(p.flip(A,v),p.flip(v,A))}}class wh{constructor(p,v){this.numDataCodewords=p,this.codewords=v}static getDataBlocks(p,v,_){if(p.length!==v.getTotalCodewords())throw new h;const A=v.getECBlocksForLevel(_);let P=0;const R=A.getECBlocks();for(const at of R)P+=at.getCount();const U=new Array(P);let G=0;for(const at of R)for(let dt=0;dt<at.getCount();dt++){const yt=at.getDataCodewords(),Pt=A.getECCodewordsPerBlock()+yt;U[G++]=new wh(yt,new Uint8Array(Pt))}const te=U[0].codewords.length;let de=U.length-1;for(;de>=0&&U[de].codewords.length!==te;)de--;de++;const we=te-A.getECCodewordsPerBlock();let Pe=0;for(let at=0;at<we;at++)for(let dt=0;dt<G;dt++)U[dt].codewords[at]=p[Pe++];for(let at=de;at<G;at++)U[at].codewords[we]=p[Pe++];const Ze=U[0].codewords.length;for(let at=we;at<Ze;at++)for(let dt=0;dt<G;dt++){const yt=dt<de?at:at+1;U[dt].codewords[yt]=p[Pe++]}return U}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var wo;(function(Ne){Ne[Ne.TERMINATOR=0]="TERMINATOR",Ne[Ne.NUMERIC=1]="NUMERIC",Ne[Ne.ALPHANUMERIC=2]="ALPHANUMERIC",Ne[Ne.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Ne[Ne.BYTE=4]="BYTE",Ne[Ne.ECI=5]="ECI",Ne[Ne.KANJI=6]="KANJI",Ne[Ne.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Ne[Ne.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Ne[Ne.HANZI=9]="HANZI"})(wo||(wo={}));class gn{constructor(p,v,_,A){this.value=p,this.stringValue=v,this.characterCountBitsForVersions=_,this.bits=A,gn.FOR_BITS.set(A,this),gn.FOR_VALUE.set(p,this)}static forBits(p){const v=gn.FOR_BITS.get(p);if(v===void 0)throw new h;return v}getCharacterCountBits(p){const v=p.getVersionNumber();let _;return v<=9?_=0:v<=26?_=1:_=2,this.characterCountBitsForVersions[_]}getValue(){return this.value}getBits(){return this.bits}equals(p){if(!(p instanceof gn))return!1;const v=p;return this.value===v.value}toString(){return this.stringValue}}gn.FOR_BITS=new Map,gn.FOR_VALUE=new Map,gn.TERMINATOR=new gn(wo.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),gn.NUMERIC=new gn(wo.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),gn.ALPHANUMERIC=new gn(wo.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),gn.STRUCTURED_APPEND=new gn(wo.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),gn.BYTE=new gn(wo.BYTE,"BYTE",Int32Array.from([8,16,16]),4),gn.ECI=new gn(wo.ECI,"ECI",Int32Array.from([0,0,0]),7),gn.KANJI=new gn(wo.KANJI,"KANJI",Int32Array.from([8,10,12]),8),gn.FNC1_FIRST_POSITION=new gn(wo.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),gn.FNC1_SECOND_POSITION=new gn(wo.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),gn.HANZI=new gn(wo.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class bs{static decode(p,v,_,A){const P=new Os(p);let R=new Q;const U=new Array;let G=-1,te=-1;try{let de=null,we=!1,Pe;do{if(P.available()<4)Pe=gn.TERMINATOR;else{const Ze=P.readBits(4);Pe=gn.forBits(Ze)}switch(Pe){case gn.TERMINATOR:break;case gn.FNC1_FIRST_POSITION:case gn.FNC1_SECOND_POSITION:we=!0;break;case gn.STRUCTURED_APPEND:if(P.available()<16)throw new I;G=P.readBits(8),te=P.readBits(8);break;case gn.ECI:const Ze=bs.parseECIValue(P);if(de=D.getCharacterSetECIByValue(Ze),de===null)throw new I;break;case gn.HANZI:const at=P.readBits(4),dt=P.readBits(Pe.getCharacterCountBits(v));at===bs.GB2312_SUBSET&&bs.decodeHanziSegment(P,R,dt);break;default:const yt=P.readBits(Pe.getCharacterCountBits(v));switch(Pe){case gn.NUMERIC:bs.decodeNumericSegment(P,R,yt);break;case gn.ALPHANUMERIC:bs.decodeAlphanumericSegment(P,R,yt,we);break;case gn.BYTE:bs.decodeByteSegment(P,R,yt,de,U,A);break;case gn.KANJI:bs.decodeKanjiSegment(P,R,yt);break;default:throw new I}break}}while(Pe!==gn.TERMINATOR)}catch{throw new I}return new ue(p,R.toString(),U.length===0?null:U,_===null?null:_.toString(),G,te)}static decodeHanziSegment(p,v,_){if(_*13>p.available())throw new I;const A=new Uint8Array(2*_);let P=0;for(;_>0;){const R=p.readBits(13);let U=R/96<<8&4294967295|R%96;U<959?U+=41377:U+=42657,A[P]=U>>8&255,A[P+1]=U&255,P+=2,_--}try{v.append(F.decode(A,q.GB2312))}catch(R){throw new I(R)}}static decodeKanjiSegment(p,v,_){if(_*13>p.available())throw new I;const A=new Uint8Array(2*_);let P=0;for(;_>0;){const R=p.readBits(13);let U=R/192<<8&4294967295|R%192;U<7936?U+=33088:U+=49472,A[P]=U>>8,A[P+1]=U,P+=2,_--}try{v.append(F.decode(A,q.SHIFT_JIS))}catch(R){throw new I(R)}}static decodeByteSegment(p,v,_,A,P,R){if(8*_>p.available())throw new I;const U=new Uint8Array(_);for(let te=0;te<_;te++)U[te]=p.readBits(8);let G;A===null?G=q.guessEncoding(U,R):G=A.getName();try{v.append(F.decode(U,G))}catch(te){throw new I(te)}P.push(U)}static toAlphaNumericChar(p){if(p>=bs.ALPHANUMERIC_CHARS.length)throw new I;return bs.ALPHANUMERIC_CHARS[p]}static decodeAlphanumericSegment(p,v,_,A){const P=v.length();for(;_>1;){if(p.available()<11)throw new I;const R=p.readBits(11);v.append(bs.toAlphaNumericChar(Math.floor(R/45))),v.append(bs.toAlphaNumericChar(R%45)),_-=2}if(_===1){if(p.available()<6)throw new I;v.append(bs.toAlphaNumericChar(p.readBits(6)))}if(A)for(let R=P;R<v.length();R++)v.charAt(R)==="%"&&(R<v.length()-1&&v.charAt(R+1)==="%"?v.deleteCharAt(R+1):v.setCharAt(R,""))}static decodeNumericSegment(p,v,_){for(;_>=3;){if(p.available()<10)throw new I;const A=p.readBits(10);if(A>=1e3)throw new I;v.append(bs.toAlphaNumericChar(Math.floor(A/100))),v.append(bs.toAlphaNumericChar(Math.floor(A/10)%10)),v.append(bs.toAlphaNumericChar(A%10)),_-=3}if(_===2){if(p.available()<7)throw new I;const A=p.readBits(7);if(A>=100)throw new I;v.append(bs.toAlphaNumericChar(Math.floor(A/10))),v.append(bs.toAlphaNumericChar(A%10))}else if(_===1){if(p.available()<4)throw new I;const A=p.readBits(4);if(A>=10)throw new I;v.append(bs.toAlphaNumericChar(A))}}static parseECIValue(p){const v=p.readBits(8);if(!(v&128))return v&127;if((v&192)===128){const _=p.readBits(8);return(v&63)<<8&4294967295|_}if((v&224)===192){const _=p.readBits(16);return(v&31)<<16&4294967295|_}throw new I}}bs.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",bs.GB2312_SUBSET=1;class _h{constructor(p){this.mirrored=p}isMirrored(){return this.mirrored}applyMirroredCorrection(p){if(!this.mirrored||p===null||p.length<3)return;const v=p[0];p[0]=p[2],p[2]=v}}class Nh{constructor(){this.rsDecoder=new ze(Ge.QR_CODE_FIELD_256)}decodeBooleanArray(p,v){return this.decodeBitMatrix(re.parseFromBooleanArray(p),v)}decodeBitMatrix(p,v){const _=new cu(p);let A=null;try{return this.decodeBitMatrixParser(_,v)}catch(P){A=P}try{_.remask(),_.setMirror(!0),_.readVersion(),_.readFormatInformation(),_.mirror();const P=this.decodeBitMatrixParser(_,v);return P.setOther(new _h(!0)),P}catch(P){throw A!==null?A:P}}decodeBitMatrixParser(p,v){const _=p.readVersion(),A=p.readFormatInformation().getErrorCorrectionLevel(),P=p.readCodewords(),R=wh.getDataBlocks(P,_,A);let U=0;for(const de of R)U+=de.getNumDataCodewords();const G=new Uint8Array(U);let te=0;for(const de of R){const we=de.getCodewords(),Pe=de.getNumDataCodewords();this.correctErrors(we,Pe);for(let Ze=0;Ze<Pe;Ze++)G[te++]=we[Ze]}return bs.decode(G,_,A,v)}correctErrors(p,v){const _=new Int32Array(p);try{this.rsDecoder.decode(_,p.length-v)}catch{throw new m}for(let A=0;A<v;A++)p[A]=_[A]}}class uu extends st{constructor(p,v,_){super(p,v),this.estimatedModuleSize=_}aboutEquals(p,v,_){if(Math.abs(v-this.getY())<=p&&Math.abs(_-this.getX())<=p){const A=Math.abs(p-this.estimatedModuleSize);return A<=1||A<=this.estimatedModuleSize}return!1}combineEstimate(p,v,_){const A=(this.getX()+v)/2,P=(this.getY()+p)/2,R=(this.estimatedModuleSize+_)/2;return new uu(A,P,R)}}class Sh{constructor(p,v,_,A,P,R,U){this.image=p,this.startX=v,this.startY=_,this.width=A,this.height=P,this.moduleSize=R,this.resultPointCallback=U,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const p=this.startX,v=this.height,_=this.width,A=p+_,P=this.startY+v/2,R=new Int32Array(3),U=this.image;for(let G=0;G<v;G++){const te=P+(G&1?-Math.floor((G+1)/2):Math.floor((G+1)/2));R[0]=0,R[1]=0,R[2]=0;let de=p;for(;de<A&&!U.get(de,te);)de++;let we=0;for(;de<A;){if(U.get(de,te))if(we===1)R[1]++;else if(we===2){if(this.foundPatternCross(R)){const Pe=this.handlePossibleCenter(R,te,de);if(Pe!==null)return Pe}R[0]=R[2],R[1]=1,R[2]=0,we=1}else R[++we]++;else we===1&&we++,R[we]++;de++}if(this.foundPatternCross(R)){const Pe=this.handlePossibleCenter(R,te,A);if(Pe!==null)return Pe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(p,v){return v-p[2]-p[1]/2}foundPatternCross(p){const v=this.moduleSize,_=v/2;for(let A=0;A<3;A++)if(Math.abs(v-p[A])>=_)return!1;return!0}crossCheckVertical(p,v,_,A){const P=this.image,R=P.getHeight(),U=this.crossCheckStateCount;U[0]=0,U[1]=0,U[2]=0;let G=p;for(;G>=0&&P.get(v,G)&&U[1]<=_;)U[1]++,G--;if(G<0||U[1]>_)return NaN;for(;G>=0&&!P.get(v,G)&&U[0]<=_;)U[0]++,G--;if(U[0]>_)return NaN;for(G=p+1;G<R&&P.get(v,G)&&U[1]<=_;)U[1]++,G++;if(G===R||U[1]>_)return NaN;for(;G<R&&!P.get(v,G)&&U[2]<=_;)U[2]++,G++;if(U[2]>_)return NaN;const te=U[0]+U[1]+U[2];return 5*Math.abs(te-A)>=2*A?NaN:this.foundPatternCross(U)?Sh.centerFromEnd(U,G):NaN}handlePossibleCenter(p,v,_){const A=p[0]+p[1]+p[2],P=Sh.centerFromEnd(p,_),R=this.crossCheckVertical(v,P,2*p[1],A);if(!isNaN(R)){const U=(p[0]+p[1]+p[2])/3;for(const te of this.possibleCenters)if(te.aboutEquals(U,R,P))return te.combineEstimate(R,P,U);const G=new uu(P,R,U);this.possibleCenters.push(G),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(G)}return null}}class Md extends st{constructor(p,v,_,A){super(p,v),this.estimatedModuleSize=_,this.count=A,A===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(p,v,_){if(Math.abs(v-this.getY())<=p&&Math.abs(_-this.getX())<=p){const A=Math.abs(p-this.estimatedModuleSize);return A<=1||A<=this.estimatedModuleSize}return!1}combineEstimate(p,v,_){const A=this.count+1,P=(this.count*this.getX()+v)/A,R=(this.count*this.getY()+p)/A,U=(this.count*this.estimatedModuleSize+_)/A;return new Md(P,R,U,A)}}class Hm{constructor(p){this.bottomLeft=p[0],this.topLeft=p[1],this.topRight=p[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(p,v){this.image=p,this.resultPointCallback=v,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=v}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(p){const v=p!=null&&p.get(O.TRY_HARDER)!==void 0,_=p!=null&&p.get(O.PURE_BARCODE)!==void 0,A=this.image,P=A.getHeight(),R=A.getWidth();let U=Math.floor(3*P/(4*sn.MAX_MODULES));(U<sn.MIN_SKIP||v)&&(U=sn.MIN_SKIP);let G=!1;const te=new Int32Array(5);for(let we=U-1;we<P&&!G;we+=U){te[0]=0,te[1]=0,te[2]=0,te[3]=0,te[4]=0;let Pe=0;for(let Ze=0;Ze<R;Ze++)if(A.get(Ze,we))(Pe&1)===1&&Pe++,te[Pe]++;else if(Pe&1)te[Pe]++;else if(Pe===4)if(sn.foundPatternCross(te)){if(this.handlePossibleCenter(te,we,Ze,_)===!0)if(U=2,this.hasSkipped===!0)G=this.haveMultiplyConfirmedCenters();else{const dt=this.findRowSkip();dt>te[2]&&(we+=dt-te[2]-U,Ze=R-1)}else{te[0]=te[2],te[1]=te[3],te[2]=te[4],te[3]=1,te[4]=0,Pe=3;continue}Pe=0,te[0]=0,te[1]=0,te[2]=0,te[3]=0,te[4]=0}else te[0]=te[2],te[1]=te[3],te[2]=te[4],te[3]=1,te[4]=0,Pe=3;else te[++Pe]++;sn.foundPatternCross(te)&&this.handlePossibleCenter(te,we,R,_)===!0&&(U=te[0],this.hasSkipped&&(G=this.haveMultiplyConfirmedCenters()))}const de=this.selectBestPatterns();return st.orderBestPatterns(de),new Hm(de)}static centerFromEnd(p,v){return v-p[4]-p[3]-p[2]/2}static foundPatternCross(p){let v=0;for(let P=0;P<5;P++){const R=p[P];if(R===0)return!1;v+=R}if(v<7)return!1;const _=v/7,A=_/2;return Math.abs(_-p[0])<A&&Math.abs(_-p[1])<A&&Math.abs(3*_-p[2])<3*A&&Math.abs(_-p[3])<A&&Math.abs(_-p[4])<A}getCrossCheckStateCount(){const p=this.crossCheckStateCount;return p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p}crossCheckDiagonal(p,v,_,A){const P=this.getCrossCheckStateCount();let R=0;const U=this.image;for(;p>=R&&v>=R&&U.get(v-R,p-R);)P[2]++,R++;if(p<R||v<R)return!1;for(;p>=R&&v>=R&&!U.get(v-R,p-R)&&P[1]<=_;)P[1]++,R++;if(p<R||v<R||P[1]>_)return!1;for(;p>=R&&v>=R&&U.get(v-R,p-R)&&P[0]<=_;)P[0]++,R++;if(P[0]>_)return!1;const G=U.getHeight(),te=U.getWidth();for(R=1;p+R<G&&v+R<te&&U.get(v+R,p+R);)P[2]++,R++;if(p+R>=G||v+R>=te)return!1;for(;p+R<G&&v+R<te&&!U.get(v+R,p+R)&&P[3]<_;)P[3]++,R++;if(p+R>=G||v+R>=te||P[3]>=_)return!1;for(;p+R<G&&v+R<te&&U.get(v+R,p+R)&&P[4]<_;)P[4]++,R++;if(P[4]>=_)return!1;const de=P[0]+P[1]+P[2]+P[3]+P[4];return Math.abs(de-A)<2*A&&sn.foundPatternCross(P)}crossCheckVertical(p,v,_,A){const P=this.image,R=P.getHeight(),U=this.getCrossCheckStateCount();let G=p;for(;G>=0&&P.get(v,G);)U[2]++,G--;if(G<0)return NaN;for(;G>=0&&!P.get(v,G)&&U[1]<=_;)U[1]++,G--;if(G<0||U[1]>_)return NaN;for(;G>=0&&P.get(v,G)&&U[0]<=_;)U[0]++,G--;if(U[0]>_)return NaN;for(G=p+1;G<R&&P.get(v,G);)U[2]++,G++;if(G===R)return NaN;for(;G<R&&!P.get(v,G)&&U[3]<_;)U[3]++,G++;if(G===R||U[3]>=_)return NaN;for(;G<R&&P.get(v,G)&&U[4]<_;)U[4]++,G++;if(U[4]>=_)return NaN;const te=U[0]+U[1]+U[2]+U[3]+U[4];return 5*Math.abs(te-A)>=2*A?NaN:sn.foundPatternCross(U)?sn.centerFromEnd(U,G):NaN}crossCheckHorizontal(p,v,_,A){const P=this.image,R=P.getWidth(),U=this.getCrossCheckStateCount();let G=p;for(;G>=0&&P.get(G,v);)U[2]++,G--;if(G<0)return NaN;for(;G>=0&&!P.get(G,v)&&U[1]<=_;)U[1]++,G--;if(G<0||U[1]>_)return NaN;for(;G>=0&&P.get(G,v)&&U[0]<=_;)U[0]++,G--;if(U[0]>_)return NaN;for(G=p+1;G<R&&P.get(G,v);)U[2]++,G++;if(G===R)return NaN;for(;G<R&&!P.get(G,v)&&U[3]<_;)U[3]++,G++;if(G===R||U[3]>=_)return NaN;for(;G<R&&P.get(G,v)&&U[4]<_;)U[4]++,G++;if(U[4]>=_)return NaN;const te=U[0]+U[1]+U[2]+U[3]+U[4];return 5*Math.abs(te-A)>=A?NaN:sn.foundPatternCross(U)?sn.centerFromEnd(U,G):NaN}handlePossibleCenter(p,v,_,A){const P=p[0]+p[1]+p[2]+p[3]+p[4];let R=sn.centerFromEnd(p,_),U=this.crossCheckVertical(v,Math.floor(R),p[2],P);if(!isNaN(U)&&(R=this.crossCheckHorizontal(Math.floor(R),Math.floor(U),p[2],P),!isNaN(R)&&(!A||this.crossCheckDiagonal(Math.floor(U),Math.floor(R),p[2],P)))){const G=P/7;let te=!1;const de=this.possibleCenters;for(let we=0,Pe=de.length;we<Pe;we++){const Ze=de[we];if(Ze.aboutEquals(G,U,R)){de[we]=Ze.combineEstimate(U,R,G),te=!0;break}}if(!te){const we=new Md(R,U,G);de.push(we),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(we)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let v=null;for(const _ of this.possibleCenters)if(_.getCount()>=sn.CENTER_QUORUM)if(v==null)v=_;else return this.hasSkipped=!0,Math.floor((Math.abs(v.getX()-_.getX())-Math.abs(v.getY()-_.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let p=0,v=0;const _=this.possibleCenters.length;for(const R of this.possibleCenters)R.getCount()>=sn.CENTER_QUORUM&&(p++,v+=R.getEstimatedModuleSize());if(p<3)return!1;const A=v/_;let P=0;for(const R of this.possibleCenters)P+=Math.abs(R.getEstimatedModuleSize()-A);return P<=.05*v}selectBestPatterns(){const p=this.possibleCenters.length;if(p<3)throw new Z;const v=this.possibleCenters;let _;if(p>3){let A=0,P=0;for(const G of this.possibleCenters){const te=G.getEstimatedModuleSize();A+=te,P+=te*te}_=A/p;let R=Math.sqrt(P/p-_*_);v.sort((G,te)=>{const de=Math.abs(te.getEstimatedModuleSize()-_),we=Math.abs(G.getEstimatedModuleSize()-_);return de<we?-1:de>we?1:0});const U=Math.max(.2*_,R);for(let G=0;G<v.length&&v.length>3;G++){const te=v[G];Math.abs(te.getEstimatedModuleSize()-_)>U&&(v.splice(G,1),G--)}}if(v.length>3){let A=0;for(const P of v)A+=P.getEstimatedModuleSize();_=A/v.length,v.sort((P,R)=>{if(R.getCount()===P.getCount()){const U=Math.abs(R.getEstimatedModuleSize()-_),G=Math.abs(P.getEstimatedModuleSize()-_);return U<G?1:U>G?-1:0}else return R.getCount()-P.getCount()}),v.splice(3)}return[v[0],v[1],v[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class In{constructor(p){this.image=p}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(p){this.resultPointCallback=p==null?null:p.get(O.NEED_RESULT_POINT_CALLBACK);const _=new sn(this.image,this.resultPointCallback).find(p);return this.processFinderPatternInfo(_)}processFinderPatternInfo(p){const v=p.getTopLeft(),_=p.getTopRight(),A=p.getBottomLeft(),P=this.calculateModuleSize(v,_,A);if(P<1)throw new Z("No pattern found in proccess finder.");const R=In.computeDimension(v,_,A,P),U=Or.getProvisionalVersionForDimension(R),G=U.getDimensionForVersion()-7;let te=null;if(U.getAlignmentPatternCenters().length>0){const Ze=_.getX()-v.getX()+A.getX(),at=_.getY()-v.getY()+A.getY(),dt=1-3/G,yt=Math.floor(v.getX()+dt*(Ze-v.getX())),Pt=Math.floor(v.getY()+dt*(at-v.getY()));for(let tr=4;tr<=16;tr<<=1)try{te=this.findAlignmentInRegion(P,yt,Pt,tr);break}catch(ar){if(!(ar instanceof Z))throw ar}}const de=In.createTransform(v,_,A,te,R),we=In.sampleGrid(this.image,de,R);let Pe;return te===null?Pe=[A,v,_]:Pe=[A,v,_,te],new Xt(we,Pe)}static createTransform(p,v,_,A,P){const R=P-3.5;let U,G,te,de;return A!==null?(U=A.getX(),G=A.getY(),te=R-3,de=te):(U=v.getX()-p.getX()+_.getX(),G=v.getY()-p.getY()+_.getY(),te=R,de=R),pt.quadrilateralToQuadrilateral(3.5,3.5,R,3.5,te,de,3.5,R,p.getX(),p.getY(),v.getX(),v.getY(),U,G,_.getX(),_.getY())}static sampleGrid(p,v,_){return Vt.getInstance().sampleGridWithTransform(p,_,_,v)}static computeDimension(p,v,_,A){const P=Ue.round(st.distance(p,v)/A),R=Ue.round(st.distance(p,_)/A);let U=Math.floor((P+R)/2)+7;switch(U&3){case 0:U++;break;case 2:U--;break;case 3:throw new Z("Dimensions could be not found.")}return U}calculateModuleSize(p,v,_){return(this.calculateModuleSizeOneWay(p,v)+this.calculateModuleSizeOneWay(p,_))/2}calculateModuleSizeOneWay(p,v){const _=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(v.getX()),Math.floor(v.getY())),A=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(v.getX()),Math.floor(v.getY()),Math.floor(p.getX()),Math.floor(p.getY()));return isNaN(_)?A/7:isNaN(A)?_/7:(_+A)/14}sizeOfBlackWhiteBlackRunBothWays(p,v,_,A){let P=this.sizeOfBlackWhiteBlackRun(p,v,_,A),R=1,U=p-(_-p);U<0?(R=p/(p-U),U=0):U>=this.image.getWidth()&&(R=(this.image.getWidth()-1-p)/(U-p),U=this.image.getWidth()-1);let G=Math.floor(v-(A-v)*R);return R=1,G<0?(R=v/(v-G),G=0):G>=this.image.getHeight()&&(R=(this.image.getHeight()-1-v)/(G-v),G=this.image.getHeight()-1),U=Math.floor(p+(U-p)*R),P+=this.sizeOfBlackWhiteBlackRun(p,v,U,G),P-1}sizeOfBlackWhiteBlackRun(p,v,_,A){const P=Math.abs(A-v)>Math.abs(_-p);if(P){let Ze=p;p=v,v=Ze,Ze=_,_=A,A=Ze}const R=Math.abs(_-p),U=Math.abs(A-v);let G=-R/2;const te=p<_?1:-1,de=v<A?1:-1;let we=0;const Pe=_+te;for(let Ze=p,at=v;Ze!==Pe;Ze+=te){const dt=P?at:Ze,yt=P?Ze:at;if(we===1===this.image.get(dt,yt)){if(we===2)return Ue.distance(Ze,at,p,v);we++}if(G+=U,G>0){if(at===A)break;at+=de,G-=R}}return we===2?Ue.distance(_+te,A,p,v):NaN}findAlignmentInRegion(p,v,_,A){const P=Math.floor(A*p),R=Math.max(0,v-P),U=Math.min(this.image.getWidth()-1,v+P);if(U-R<p*3)throw new Z("Alignment top exceeds estimated module size.");const G=Math.max(0,_-P),te=Math.min(this.image.getHeight()-1,_+P);if(te-G<p*3)throw new Z("Alignment bottom exceeds estimated module size.");return new Sh(this.image,R,G,U-R,te-G,p,this.resultPointCallback).find()}}class no{constructor(){this.decoder=new Nh}getDecoder(){return this.decoder}decode(p,v){let _,A;if(v!=null&&v.get(O.PURE_BARCODE)!==void 0){const G=no.extractPureBits(p.getBlackMatrix());_=this.decoder.decodeBitMatrix(G,v),A=no.NO_POINTS}else{const G=new In(p.getBlackMatrix()).detect(v);_=this.decoder.decodeBitMatrix(G.getBits(),v),A=G.getPoints()}_.getOther()instanceof _h&&_.getOther().applyMirroredCorrection(A);const P=new ie(_.getText(),_.getRawBytes(),void 0,A,me.QR_CODE,void 0),R=_.getByteSegments();R!==null&&P.putMetadata(_e.BYTE_SEGMENTS,R);const U=_.getECLevel();return U!==null&&P.putMetadata(_e.ERROR_CORRECTION_LEVEL,U),_.hasStructuredAppend()&&(P.putMetadata(_e.STRUCTURED_APPEND_SEQUENCE,_.getStructuredAppendSequenceNumber()),P.putMetadata(_e.STRUCTURED_APPEND_PARITY,_.getStructuredAppendParity())),P}reset(){}static extractPureBits(p){const v=p.getTopLeftOnBit(),_=p.getBottomRightOnBit();if(v===null||_===null)throw new Z;const A=this.moduleSize(v,p);let P=v[1],R=_[1],U=v[0],G=_[0];if(U>=G||P>=R)throw new Z;if(R-P!==G-U&&(G=U+(R-P),G>=p.getWidth()))throw new Z;const te=Math.round((G-U+1)/A),de=Math.round((R-P+1)/A);if(te<=0||de<=0)throw new Z;if(de!==te)throw new Z;const we=Math.floor(A/2);P+=we,U+=we;const Pe=U+Math.floor((te-1)*A)-G;if(Pe>0){if(Pe>we)throw new Z;U-=Pe}const Ze=P+Math.floor((de-1)*A)-R;if(Ze>0){if(Ze>we)throw new Z;P-=Ze}const at=new re(te,de);for(let dt=0;dt<de;dt++){const yt=P+Math.floor(dt*A);for(let Pt=0;Pt<te;Pt++)p.get(U+Math.floor(Pt*A),yt)&&at.set(Pt,dt)}return at}static moduleSize(p,v){const _=v.getHeight(),A=v.getWidth();let P=p[0],R=p[1],U=!0,G=0;for(;P<A&&R<_;){if(U!==v.get(P,R)){if(++G===5)break;U=!U}P++,R++}if(P===A||R===_)throw new Z;return(P-p[0])/7}}no.NO_POINTS=new Array;class zr{PDF417Common(){}static getBitCountSum(p){return Ue.sum(p)}static toIntArray(p){if(p==null||!p.length)return zr.EMPTY_INT_ARRAY;const v=new Int32Array(p.length);let _=0;for(const A of p)v[_++]=A;return v}static getCodeword(p){const v=S.binarySearch(zr.SYMBOL_TABLE,p&262143);return v<0?-1:(zr.CODEWORD_TABLE[v]-1)%zr.NUMBER_OF_CODEWORDS}}zr.NUMBER_OF_CODEWORDS=929,zr.MAX_CODEWORDS_IN_BARCODE=zr.NUMBER_OF_CODEWORDS-1,zr.MIN_ROWS_IN_BARCODE=3,zr.MAX_ROWS_IN_BARCODE=90,zr.MODULES_IN_CODEWORD=17,zr.MODULES_IN_STOP_PATTERN=18,zr.BARS_IN_MODULE=8,zr.EMPTY_INT_ARRAY=new Int32Array([]),zr.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),zr.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Gv{constructor(p,v){this.bits=p,this.points=v}getBits(){return this.bits}getPoints(){return this.points}}class Pn{static detectMultiple(p,v,_){let A=p.getBlackMatrix(),P=Pn.detect(_,A);return P.length||(A=A.clone(),A.rotate180(),P=Pn.detect(_,A)),new Gv(A,P)}static detect(p,v){const _=new Array;let A=0,P=0,R=!1;for(;A<v.getHeight();){const U=Pn.findVertices(v,A,P);if(U[0]==null&&U[3]==null){if(!R)break;R=!1,P=0;for(const G of _)G[1]!=null&&(A=Math.trunc(Math.max(A,G[1].getY()))),G[3]!=null&&(A=Math.max(A,Math.trunc(G[3].getY())));A+=Pn.ROW_STEP;continue}if(R=!0,_.push(U),!p)break;U[2]!=null?(P=Math.trunc(U[2].getX()),A=Math.trunc(U[2].getY())):(P=Math.trunc(U[4].getX()),A=Math.trunc(U[4].getY()))}return _}static findVertices(p,v,_){const A=p.getHeight(),P=p.getWidth(),R=new Array(8);return Pn.copyToResult(R,Pn.findRowsWithPattern(p,A,P,v,_,Pn.START_PATTERN),Pn.INDEXES_START_PATTERN),R[4]!=null&&(_=Math.trunc(R[4].getX()),v=Math.trunc(R[4].getY())),Pn.copyToResult(R,Pn.findRowsWithPattern(p,A,P,v,_,Pn.STOP_PATTERN),Pn.INDEXES_STOP_PATTERN),R}static copyToResult(p,v,_){for(let A=0;A<_.length;A++)p[_[A]]=v[A]}static findRowsWithPattern(p,v,_,A,P,R){const U=new Array(4);let G=!1;const te=new Int32Array(R.length);for(;A<v;A+=Pn.ROW_STEP){let we=Pn.findGuardPattern(p,P,A,_,!1,R,te);if(we!=null){for(;A>0;){const Pe=Pn.findGuardPattern(p,P,--A,_,!1,R,te);if(Pe!=null)we=Pe;else{A++;break}}U[0]=new st(we[0],A),U[1]=new st(we[1],A),G=!0;break}}let de=A+1;if(G){let we=0,Pe=Int32Array.from([Math.trunc(U[0].getX()),Math.trunc(U[1].getX())]);for(;de<v;de++){const Ze=Pn.findGuardPattern(p,Pe[0],de,_,!1,R,te);if(Ze!=null&&Math.abs(Pe[0]-Ze[0])<Pn.MAX_PATTERN_DRIFT&&Math.abs(Pe[1]-Ze[1])<Pn.MAX_PATTERN_DRIFT)Pe=Ze,we=0;else{if(we>Pn.SKIPPED_ROW_COUNT_MAX)break;we++}}de-=we+1,U[2]=new st(Pe[0],de),U[3]=new st(Pe[1],de)}return de-A<Pn.BARCODE_MIN_HEIGHT&&S.fill(U,null),U}static findGuardPattern(p,v,_,A,P,R,U){S.fillWithin(U,0,U.length,0);let G=v,te=0;for(;p.get(G,_)&&G>0&&te++<Pn.MAX_PIXEL_DRIFT;)G--;let de=G,we=0,Pe=R.length;for(let Ze=P;de<A;de++)if(p.get(de,_)!==Ze)U[we]++;else{if(we===Pe-1){if(Pn.patternMatchVariance(U,R,Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return new Int32Array([G,de]);G+=U[0]+U[1],g.arraycopy(U,2,U,0,we-1),U[we-1]=0,U[we]=0,we--}else we++;U[we]=1,Ze=!Ze}return we===Pe-1&&Pn.patternMatchVariance(U,R,Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE?new Int32Array([G,de-1]):null}static patternMatchVariance(p,v,_){let A=p.length,P=0,R=0;for(let te=0;te<A;te++)P+=p[te],R+=v[te];if(P<R)return 1/0;let U=P/R;_*=U;let G=0;for(let te=0;te<A;te++){let de=p[te],we=v[te]*U,Pe=de>we?de-we:we-de;if(Pe>_)return 1/0;G+=Pe}return G/P}}Pn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Pn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Pn.MAX_AVG_VARIANCE=.42,Pn.MAX_INDIVIDUAL_VARIANCE=.8,Pn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Pn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Pn.MAX_PIXEL_DRIFT=3,Pn.MAX_PATTERN_DRIFT=5,Pn.SKIPPED_ROW_COUNT_MAX=25,Pn.ROW_STEP=5,Pn.BARCODE_MIN_HEIGHT=10;class ws{constructor(p,v){if(v.length===0)throw new h;this.field=p;let _=v.length;if(_>1&&v[0]===0){let A=1;for(;A<_&&v[A]===0;)A++;A===_?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(_-A),g.arraycopy(v,A,this.coefficients,0,this.coefficients.length))}else this.coefficients=v}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(p){return this.coefficients[this.coefficients.length-1-p]}evaluateAt(p){if(p===0)return this.getCoefficient(0);if(p===1){let A=0;for(let P of this.coefficients)A=this.field.add(A,P);return A}let v=this.coefficients[0],_=this.coefficients.length;for(let A=1;A<_;A++)v=this.field.add(this.field.multiply(p,v),this.coefficients[A]);return v}add(p){if(!this.field.equals(p.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return p;if(p.isZero())return this;let v=this.coefficients,_=p.coefficients;if(v.length>_.length){let R=v;v=_,_=R}let A=new Int32Array(_.length),P=_.length-v.length;g.arraycopy(_,0,A,0,P);for(let R=P;R<_.length;R++)A[R]=this.field.add(v[R-P],_[R]);return new ws(this.field,A)}subtract(p){if(!this.field.equals(p.field))throw new h("ModulusPolys do not have same ModulusGF field");return p.isZero()?this:this.add(p.negative())}multiply(p){return p instanceof ws?this.multiplyOther(p):this.multiplyScalar(p)}multiplyOther(p){if(!this.field.equals(p.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||p.isZero())return new ws(this.field,new Int32Array([0]));let v=this.coefficients,_=v.length,A=p.coefficients,P=A.length,R=new Int32Array(_+P-1);for(let U=0;U<_;U++){let G=v[U];for(let te=0;te<P;te++)R[U+te]=this.field.add(R[U+te],this.field.multiply(G,A[te]))}return new ws(this.field,R)}negative(){let p=this.coefficients.length,v=new Int32Array(p);for(let _=0;_<p;_++)v[_]=this.field.subtract(0,this.coefficients[_]);return new ws(this.field,v)}multiplyScalar(p){if(p===0)return new ws(this.field,new Int32Array([0]));if(p===1)return this;let v=this.coefficients.length,_=new Int32Array(v);for(let A=0;A<v;A++)_[A]=this.field.multiply(this.coefficients[A],p);return new ws(this.field,_)}multiplyByMonomial(p,v){if(p<0)throw new h;if(v===0)return new ws(this.field,new Int32Array([0]));let _=this.coefficients.length,A=new Int32Array(_+p);for(let P=0;P<_;P++)A[P]=this.field.multiply(this.coefficients[P],v);return new ws(this.field,A)}toString(){let p=new Q;for(let v=this.getDegree();v>=0;v--){let _=this.getCoefficient(v);_!==0&&(_<0?(p.append(" - "),_=-_):p.length()>0&&p.append(" + "),(v===0||_!==1)&&p.append(_),v!==0&&(v===1?p.append("x"):(p.append("x^"),p.append(v))))}return p.toString()}}class Hg{add(p,v){return(p+v)%this.modulus}subtract(p,v){return(this.modulus+p-v)%this.modulus}exp(p){return this.expTable[p]}log(p){if(p===0)throw new h;return this.logTable[p]}inverse(p){if(p===0)throw new Le;return this.expTable[this.modulus-this.logTable[p]-1]}multiply(p,v){return p===0||v===0?0:this.expTable[(this.logTable[p]+this.logTable[v])%(this.modulus-1)]}getSize(){return this.modulus}equals(p){return p===this}}class Zu extends Hg{constructor(p,v){super(),this.modulus=p,this.expTable=new Int32Array(p),this.logTable=new Int32Array(p);let _=1;for(let A=0;A<p;A++)this.expTable[A]=_,_=_*v%p;for(let A=0;A<p-1;A++)this.logTable[this.expTable[A]]=A;this.zero=new ws(this,new Int32Array([0])),this.one=new ws(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(p,v){if(p<0)throw new h;if(v===0)return this.zero;let _=new Int32Array(p+1);return _[0]=v,new ws(this,_)}}Zu.PDF417_GF=new Zu(zr.NUMBER_OF_CODEWORDS,3);class Eh{constructor(){this.field=Zu.PDF417_GF}decode(p,v,_){let A=new ws(this.field,p),P=new Int32Array(v),R=!1;for(let at=v;at>0;at--){let dt=A.evaluateAt(this.field.exp(at));P[v-at]=dt,dt!==0&&(R=!0)}if(!R)return 0;let U=this.field.getOne();if(_!=null)for(const at of _){let dt=this.field.exp(p.length-1-at),yt=new ws(this.field,new Int32Array([this.field.subtract(0,dt),1]));U=U.multiply(yt)}let G=new ws(this.field,P),te=this.runEuclideanAlgorithm(this.field.buildMonomial(v,1),G,v),de=te[0],we=te[1],Pe=this.findErrorLocations(de),Ze=this.findErrorMagnitudes(we,de,Pe);for(let at=0;at<Pe.length;at++){let dt=p.length-1-this.field.log(Pe[at]);if(dt<0)throw m.getChecksumInstance();p[dt]=this.field.subtract(p[dt],Ze[at])}return Pe.length}runEuclideanAlgorithm(p,v,_){if(p.getDegree()<v.getDegree()){let Pe=p;p=v,v=Pe}let A=p,P=v,R=this.field.getZero(),U=this.field.getOne();for(;P.getDegree()>=Math.round(_/2);){let Pe=A,Ze=R;if(A=P,R=U,A.isZero())throw m.getChecksumInstance();P=Pe;let at=this.field.getZero(),dt=A.getCoefficient(A.getDegree()),yt=this.field.inverse(dt);for(;P.getDegree()>=A.getDegree()&&!P.isZero();){let Pt=P.getDegree()-A.getDegree(),tr=this.field.multiply(P.getCoefficient(P.getDegree()),yt);at=at.add(this.field.buildMonomial(Pt,tr)),P=P.subtract(A.multiplyByMonomial(Pt,tr))}U=at.multiply(R).subtract(Ze).negative()}let G=U.getCoefficient(0);if(G===0)throw m.getChecksumInstance();let te=this.field.inverse(G),de=U.multiply(te),we=P.multiply(te);return[de,we]}findErrorLocations(p){let v=p.getDegree(),_=new Int32Array(v),A=0;for(let P=1;P<this.field.getSize()&&A<v;P++)p.evaluateAt(P)===0&&(_[A]=this.field.inverse(P),A++);if(A!==v)throw m.getChecksumInstance();return _}findErrorMagnitudes(p,v,_){let A=v.getDegree(),P=new Int32Array(A);for(let te=1;te<=A;te++)P[A-te]=this.field.multiply(te,v.getCoefficient(te));let R=new ws(this.field,P),U=_.length,G=new Int32Array(U);for(let te=0;te<U;te++){let de=this.field.inverse(_[te]),we=this.field.subtract(0,p.evaluateAt(de)),Pe=this.field.inverse(R.evaluateAt(de));G[te]=this.field.multiply(we,Pe)}return G}}class Cl{constructor(p,v,_,A,P){p instanceof Cl?this.constructor_2(p):this.constructor_1(p,v,_,A,P)}constructor_1(p,v,_,A,P){const R=v==null||_==null,U=A==null||P==null;if(R&&U)throw new Z;R?(v=new st(0,A.getY()),_=new st(0,P.getY())):U&&(A=new st(p.getWidth()-1,v.getY()),P=new st(p.getWidth()-1,_.getY())),this.image=p,this.topLeft=v,this.bottomLeft=_,this.topRight=A,this.bottomRight=P,this.minX=Math.trunc(Math.min(v.getX(),_.getX())),this.maxX=Math.trunc(Math.max(A.getX(),P.getX())),this.minY=Math.trunc(Math.min(v.getY(),A.getY())),this.maxY=Math.trunc(Math.max(_.getY(),P.getY()))}constructor_2(p){this.image=p.image,this.topLeft=p.getTopLeft(),this.bottomLeft=p.getBottomLeft(),this.topRight=p.getTopRight(),this.bottomRight=p.getBottomRight(),this.minX=p.getMinX(),this.maxX=p.getMaxX(),this.minY=p.getMinY(),this.maxY=p.getMaxY()}static merge(p,v){return p==null?v:v==null?p:new Cl(p.image,p.topLeft,p.bottomLeft,v.topRight,v.bottomRight)}addMissingRows(p,v,_){let A=this.topLeft,P=this.bottomLeft,R=this.topRight,U=this.bottomRight;if(p>0){let G=_?this.topLeft:this.topRight,te=Math.trunc(G.getY()-p);te<0&&(te=0);let de=new st(G.getX(),te);_?A=de:R=de}if(v>0){let G=_?this.bottomLeft:this.bottomRight,te=Math.trunc(G.getY()+v);te>=this.image.getHeight()&&(te=this.image.getHeight()-1);let de=new st(G.getX(),te);_?P=de:U=de}return new Cl(this.image,A,P,R,U)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ra{constructor(p,v,_,A){this.columnCount=p,this.errorCorrectionLevel=A,this.rowCountUpperPart=v,this.rowCountLowerPart=_,this.rowCount=v+_}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class cl{constructor(){this.buffer=""}static form(p,v){let _=-1;function A(R,U,G,te,de,we){if(R==="%%")return"%";if(v[++_]===void 0)return;R=te?parseInt(te.substr(1)):void 0;let Pe=de?parseInt(de.substr(1)):void 0,Ze;switch(we){case"s":Ze=v[_];break;case"c":Ze=v[_][0];break;case"f":Ze=parseFloat(v[_]).toFixed(R);break;case"p":Ze=parseFloat(v[_]).toPrecision(R);break;case"e":Ze=parseFloat(v[_]).toExponential(R);break;case"x":Ze=parseInt(v[_]).toString(Pe||16);break;case"d":Ze=parseFloat(parseInt(v[_],Pe||10).toPrecision(R)).toFixed(0);break}Ze=typeof Ze=="object"?JSON.stringify(Ze):(+Ze).toString(Pe);let at=parseInt(G),dt=G&&G[0]+""=="0"?"0":" ";for(;Ze.length<at;)Ze=U!==void 0?Ze+dt:dt+Ze;return Ze}let P=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(P,A)}format(p,...v){this.buffer+=cl.form(p,v)}toString(){return this.buffer}}class Qu{constructor(p){this.boundingBox=new Cl(p),this.codewords=new Array(p.getMaxY()-p.getMinY()+1)}getCodewordNearby(p){let v=this.getCodeword(p);if(v!=null)return v;for(let _=1;_<Qu.MAX_NEARBY_DISTANCE;_++){let A=this.imageRowToCodewordIndex(p)-_;if(A>=0&&(v=this.codewords[A],v!=null)||(A=this.imageRowToCodewordIndex(p)+_,A<this.codewords.length&&(v=this.codewords[A],v!=null)))return v}return null}imageRowToCodewordIndex(p){return p-this.boundingBox.getMinY()}setCodeword(p,v){this.codewords[this.imageRowToCodewordIndex(p)]=v}getCodeword(p){return this.codewords[this.imageRowToCodewordIndex(p)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const p=new cl;let v=0;for(const _ of this.codewords){if(_==null){p.format("%3d:    |   %n",v++);continue}p.format("%3d: %3d|%3d%n",v++,_.getRowNumber(),_.getValue())}return p.toString()}}Qu.MAX_NEARBY_DISTANCE=5;class Bf{constructor(){this.values=new Map}setValue(p){p=Math.trunc(p);let v=this.values.get(p);v==null&&(v=0),v++,this.values.set(p,v)}getValue(){let p=-1,v=new Array;for(const[_,A]of this.values.entries()){const P={getKey:()=>_,getValue:()=>A};P.getValue()>p?(p=P.getValue(),v=[],v.push(P.getKey())):P.getValue()===p&&v.push(P.getKey())}return zr.toIntArray(v)}getConfidence(p){return this.values.get(p)}}class g0 extends Qu{constructor(p,v){super(p),this._isLeft=v}setRowNumbers(){for(let p of this.getCodewords())p!=null&&p.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(p){let v=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(v,p);let _=this.getBoundingBox(),A=this._isLeft?_.getTopLeft():_.getTopRight(),P=this._isLeft?_.getBottomLeft():_.getBottomRight(),R=this.imageRowToCodewordIndex(Math.trunc(A.getY())),U=this.imageRowToCodewordIndex(Math.trunc(P.getY())),G=-1,te=1,de=0;for(let we=R;we<U;we++){if(v[we]==null)continue;let Pe=v[we],Ze=Pe.getRowNumber()-G;if(Ze===0)de++;else if(Ze===1)te=Math.max(te,de),de=1,G=Pe.getRowNumber();else if(Ze<0||Pe.getRowNumber()>=p.getRowCount()||Ze>we)v[we]=null;else{let at;te>2?at=(te-2)*Ze:at=Ze;let dt=at>=we;for(let yt=1;yt<=at&&!dt;yt++)dt=v[we-yt]!=null;dt?v[we]=null:(G=Pe.getRowNumber(),de=1)}}}getRowHeights(){let p=this.getBarcodeMetadata();if(p==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(p);let v=new Int32Array(p.getRowCount());for(let _ of this.getCodewords())if(_!=null){let A=_.getRowNumber();if(A>=v.length)continue;v[A]++}return v}adjustIncompleteIndicatorColumnRowNumbers(p){let v=this.getBoundingBox(),_=this._isLeft?v.getTopLeft():v.getTopRight(),A=this._isLeft?v.getBottomLeft():v.getBottomRight(),P=this.imageRowToCodewordIndex(Math.trunc(_.getY())),R=this.imageRowToCodewordIndex(Math.trunc(A.getY())),U=this.getCodewords(),G=-1;for(let te=P;te<R;te++){if(U[te]==null)continue;let de=U[te];de.setRowNumberAsRowIndicatorColumn();let we=de.getRowNumber()-G;we===0||(we===1?G=de.getRowNumber():de.getRowNumber()>=p.getRowCount()?U[te]=null:G=de.getRowNumber())}}getBarcodeMetadata(){let p=this.getCodewords(),v=new Bf,_=new Bf,A=new Bf,P=new Bf;for(let U of p){if(U==null)continue;U.setRowNumberAsRowIndicatorColumn();let G=U.getValue()%30,te=U.getRowNumber();switch(this._isLeft||(te+=2),te%3){case 0:_.setValue(G*3+1);break;case 1:P.setValue(G/3),A.setValue(G%3);break;case 2:v.setValue(G+1);break}}if(v.getValue().length===0||_.getValue().length===0||A.getValue().length===0||P.getValue().length===0||v.getValue()[0]<1||_.getValue()[0]+A.getValue()[0]<zr.MIN_ROWS_IN_BARCODE||_.getValue()[0]+A.getValue()[0]>zr.MAX_ROWS_IN_BARCODE)return null;let R=new ra(v.getValue()[0],_.getValue()[0],A.getValue()[0],P.getValue()[0]);return this.removeIncorrectCodewords(p,R),R}removeIncorrectCodewords(p,v){for(let _=0;_<p.length;_++){let A=p[_];if(p[_]==null)continue;let P=A.getValue()%30,R=A.getRowNumber();if(R>v.getRowCount()){p[_]=null;continue}switch(this._isLeft||(R+=2),R%3){case 0:P*3+1!==v.getRowCountUpperPart()&&(p[_]=null);break;case 1:(Math.trunc(P/3)!==v.getErrorCorrectionLevel()||P%3!==v.getRowCountLowerPart())&&(p[_]=null);break;case 2:P+1!==v.getColumnCount()&&(p[_]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ld{constructor(p,v){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=p,this.barcodeColumnCount=p.getColumnCount(),this.boundingBox=v,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let p=zr.MAX_CODEWORDS_IN_BARCODE,v;do v=p,p=this.adjustRowNumbersAndGetCount();while(p>0&&p<v);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(p){p!=null&&p.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let p=this.adjustRowNumbersByRow();if(p===0)return 0;for(let v=1;v<this.barcodeColumnCount+1;v++){let _=this.detectionResultColumns[v].getCodewords();for(let A=0;A<_.length;A++)_[A]!=null&&(_[A].hasValidRowNumber()||this.adjustRowNumbers(v,A,_))}return p}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let p=this.detectionResultColumns[0].getCodewords(),v=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let _=0;_<p.length;_++)if(p[_]!=null&&v[_]!=null&&p[_].getRowNumber()===v[_].getRowNumber())for(let A=1;A<=this.barcodeColumnCount;A++){let P=this.detectionResultColumns[A].getCodewords()[_];P!=null&&(P.setRowNumber(p[_].getRowNumber()),P.hasValidRowNumber()||(this.detectionResultColumns[A].getCodewords()[_]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let p=0,v=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let _=0;_<v.length;_++){if(v[_]==null)continue;let A=v[_].getRowNumber(),P=0;for(let R=this.barcodeColumnCount+1;R>0&&P<this.ADJUST_ROW_NUMBER_SKIP;R--){let U=this.detectionResultColumns[R].getCodewords()[_];U!=null&&(P=Ld.adjustRowNumberIfValid(A,P,U),U.hasValidRowNumber()||p++)}}return p}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let p=0,v=this.detectionResultColumns[0].getCodewords();for(let _=0;_<v.length;_++){if(v[_]==null)continue;let A=v[_].getRowNumber(),P=0;for(let R=1;R<this.barcodeColumnCount+1&&P<this.ADJUST_ROW_NUMBER_SKIP;R++){let U=this.detectionResultColumns[R].getCodewords()[_];U!=null&&(P=Ld.adjustRowNumberIfValid(A,P,U),U.hasValidRowNumber()||p++)}}return p}static adjustRowNumberIfValid(p,v,_){return _==null||_.hasValidRowNumber()||(_.isValidRowNumber(p)?(_.setRowNumber(p),v=0):++v),v}adjustRowNumbers(p,v,_){if(!this.detectionResultColumns[p-1])return;let A=_[v],P=this.detectionResultColumns[p-1].getCodewords(),R=P;this.detectionResultColumns[p+1]!=null&&(R=this.detectionResultColumns[p+1].getCodewords());let U=new Array(14);U[2]=P[v],U[3]=R[v],v>0&&(U[0]=_[v-1],U[4]=P[v-1],U[5]=R[v-1]),v>1&&(U[8]=_[v-2],U[10]=P[v-2],U[11]=R[v-2]),v<_.length-1&&(U[1]=_[v+1],U[6]=P[v+1],U[7]=R[v+1]),v<_.length-2&&(U[9]=_[v+2],U[12]=P[v+2],U[13]=R[v+2]);for(let G of U)if(Ld.adjustRowNumber(A,G))return}static adjustRowNumber(p,v){return v==null?!1:v.hasValidRowNumber()&&v.getBucket()===p.getBucket()?(p.setRowNumber(v.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(p){this.boundingBox=p}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(p,v){this.detectionResultColumns[p]=v}getDetectionResultColumn(p){return this.detectionResultColumns[p]}toString(){let p=this.detectionResultColumns[0];p==null&&(p=this.detectionResultColumns[this.barcodeColumnCount+1]);let v=new cl;for(let _=0;_<p.getCodewords().length;_++){v.format("CW %3d:",_);for(let A=0;A<this.barcodeColumnCount+2;A++){if(this.detectionResultColumns[A]==null){v.format("    |   ");continue}let P=this.detectionResultColumns[A].getCodewords()[_];if(P==null){v.format("    |   ");continue}v.format(" %3d|%3d",P.getRowNumber(),P.getValue())}v.format("%n")}return v.toString()}}class wc{constructor(p,v,_,A){this.rowNumber=wc.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(p),this.endX=Math.trunc(v),this.bucket=Math.trunc(_),this.value=Math.trunc(A)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(p){return p!==wc.BARCODE_ROW_UNKNOWN&&this.bucket===p%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(p){this.rowNumber=p}toString(){return this.rowNumber+"|"+this.value}}wc.BARCODE_ROW_UNKNOWN=-1;class Fa{static initialize(){for(let p=0;p<zr.SYMBOL_TABLE.length;p++){let v=zr.SYMBOL_TABLE[p],_=v&1;for(let A=0;A<zr.BARS_IN_MODULE;A++){let P=0;for(;(v&1)===_;)P+=1,v>>=1;_=v&1,Fa.RATIOS_TABLE[p]||(Fa.RATIOS_TABLE[p]=new Array(zr.BARS_IN_MODULE)),Fa.RATIOS_TABLE[p][zr.BARS_IN_MODULE-A-1]=Math.fround(P/zr.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(p){let v=Fa.getDecodedCodewordValue(Fa.sampleBitCounts(p));return v!==-1?v:Fa.getClosestDecodedValue(p)}static sampleBitCounts(p){let v=Ue.sum(p),_=new Int32Array(zr.BARS_IN_MODULE),A=0,P=0;for(let R=0;R<zr.MODULES_IN_CODEWORD;R++){let U=v/(2*zr.MODULES_IN_CODEWORD)+R*v/zr.MODULES_IN_CODEWORD;P+p[A]<=U&&(P+=p[A],A++),_[A]++}return _}static getDecodedCodewordValue(p){let v=Fa.getBitValue(p);return zr.getCodeword(v)===-1?-1:v}static getBitValue(p){let v=0;for(let _=0;_<p.length;_++)for(let A=0;A<p[_];A++)v=v<<1|(_%2===0?1:0);return Math.trunc(v)}static getClosestDecodedValue(p){let v=Ue.sum(p),_=new Array(zr.BARS_IN_MODULE);if(v>1)for(let R=0;R<_.length;R++)_[R]=Math.fround(p[R]/v);let A=xt.MAX_VALUE,P=-1;this.bSymbolTableReady||Fa.initialize();for(let R=0;R<Fa.RATIOS_TABLE.length;R++){let U=0,G=Fa.RATIOS_TABLE[R];for(let te=0;te<zr.BARS_IN_MODULE;te++){let de=Math.fround(G[te]-_[te]);if(U+=Math.fround(de*de),U>=A)break}U<A&&(A=U,P=zr.SYMBOL_TABLE[R])}return P}}Fa.bSymbolTableReady=!1,Fa.RATIOS_TABLE=new Array(zr.SYMBOL_TABLE.length).map(Ne=>new Array(zr.BARS_IN_MODULE));class Wm{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(p){this.segmentIndex=p}getFileId(){return this.fileId}setFileId(p){this.fileId=p}getOptionalData(){return this.optionalData}setOptionalData(p){this.optionalData=p}isLastSegment(){return this.lastSegment}setLastSegment(p){this.lastSegment=p}getSegmentCount(){return this.segmentCount}setSegmentCount(p){this.segmentCount=p}getSender(){return this.sender||null}setSender(p){this.sender=p}getAddressee(){return this.addressee||null}setAddressee(p){this.addressee=p}getFileName(){return this.fileName}setFileName(p){this.fileName=p}getFileSize(){return this.fileSize}setFileSize(p){this.fileSize=p}getChecksum(){return this.checksum}setChecksum(p){this.checksum=p}getTimestamp(){return this.timestamp}setTimestamp(p){this.timestamp=p}}class ai{static parseLong(p,v=void 0){return parseInt(p,v)}}class x0 extends u{}x0.kind="NullPointerException";class Wo{writeBytes(p){this.writeBytesOffset(p,0,p.length)}writeBytesOffset(p,v,_){if(p==null)throw new x0;if(v<0||v>p.length||_<0||v+_>p.length||v+_<0)throw new y;if(_===0)return;for(let A=0;A<_;A++)this.write(p[v+A])}flush(){}close(){}}class $f extends u{}class Wg extends Wo{constructor(p=32){if(super(),this.count=0,p<0)throw new h("Negative initial size: "+p);this.buf=new Uint8Array(p)}ensureCapacity(p){p-this.buf.length>0&&this.grow(p)}grow(p){let _=this.buf.length<<1;if(_-p<0&&(_=p),_<0){if(p<0)throw new $f;_=E.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,_)}write(p){this.ensureCapacity(this.count+1),this.buf[this.count]=p,this.count+=1}writeBytesOffset(p,v,_){if(v<0||v>p.length||_<0||v+_-p.length>0)throw new y;this.ensureCapacity(this.count+_),g.arraycopy(p,v,this.buf,this.count,_),this.count+=_}writeTo(p){p.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(p){return p?typeof p=="string"?this.toString_string(p):this.toString_number(p):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(p){return new String(this.buf).toString()}toString_number(p){return new String(this.buf).toString()}close(){}}var Ii;(function(Ne){Ne[Ne.ALPHA=0]="ALPHA",Ne[Ne.LOWER=1]="LOWER",Ne[Ne.MIXED=2]="MIXED",Ne[Ne.PUNCT=3]="PUNCT",Ne[Ne.ALPHA_SHIFT=4]="ALPHA_SHIFT",Ne[Ne.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ii||(Ii={}));function du(){if(typeof window<"u")return window.BigInt||null;if(typeof pm<"u")return pm.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Gm;function hu(Ne){if(typeof Gm>"u"&&(Gm=du()),Gm===null)throw new Error("BigInt is not supported!");return Gm(Ne)}function Km(){let Ne=[];Ne[0]=hu(1);let p=hu(900);Ne[1]=p;for(let v=2;v<16;v++)Ne[v]=Ne[v-1]*p;return Ne}class Rt{static decode(p,v){let _=new Q(""),A=D.ISO8859_1;_.enableDecoding(A);let P=1,R=p[P++],U=new Wm;for(;P<p[0];){switch(R){case Rt.TEXT_COMPACTION_MODE_LATCH:P=Rt.textCompaction(p,P,_);break;case Rt.BYTE_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH_6:P=Rt.byteCompaction(R,p,A,P,_);break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(p[P++]);break;case Rt.NUMERIC_COMPACTION_MODE_LATCH:P=Rt.numericCompaction(p,P,_);break;case Rt.ECI_CHARSET:D.getCharacterSetECIByValue(p[P++]);break;case Rt.ECI_GENERAL_PURPOSE:P+=2;break;case Rt.ECI_USER_DEFINED:P++;break;case Rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:P=Rt.decodeMacroBlock(p,P,U);break;case Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Rt.MACRO_PDF417_TERMINATOR:throw new I;default:P--,P=Rt.textCompaction(p,P,_);break}if(P<p.length)R=p[P++];else throw I.getFormatInstance()}if(_.length()===0)throw I.getFormatInstance();let G=new ue(null,_.toString(),null,v);return G.setOther(U),G}static decodeMacroBlock(p,v,_){if(v+Rt.NUMBER_OF_SEQUENCE_CODEWORDS>p[0])throw I.getFormatInstance();let A=new Int32Array(Rt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let U=0;U<Rt.NUMBER_OF_SEQUENCE_CODEWORDS;U++,v++)A[U]=p[v];_.setSegmentIndex(E.parseInt(Rt.decodeBase900toBase10(A,Rt.NUMBER_OF_SEQUENCE_CODEWORDS)));let P=new Q;v=Rt.textCompaction(p,v,P),_.setFileId(P.toString());let R=-1;for(p[v]===Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(R=v+1);v<p[0];)switch(p[v]){case Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(v++,p[v]){case Rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let U=new Q;v=Rt.textCompaction(p,v+1,U),_.setFileName(U.toString());break;case Rt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let G=new Q;v=Rt.textCompaction(p,v+1,G),_.setSender(G.toString());break;case Rt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let te=new Q;v=Rt.textCompaction(p,v+1,te),_.setAddressee(te.toString());break;case Rt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let de=new Q;v=Rt.numericCompaction(p,v+1,de),_.setSegmentCount(E.parseInt(de.toString()));break;case Rt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let we=new Q;v=Rt.numericCompaction(p,v+1,we),_.setTimestamp(ai.parseLong(we.toString()));break;case Rt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Pe=new Q;v=Rt.numericCompaction(p,v+1,Pe),_.setChecksum(E.parseInt(Pe.toString()));break;case Rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Ze=new Q;v=Rt.numericCompaction(p,v+1,Ze),_.setFileSize(ai.parseLong(Ze.toString()));break;default:throw I.getFormatInstance()}break;case Rt.MACRO_PDF417_TERMINATOR:v++,_.setLastSegment(!0);break;default:throw I.getFormatInstance()}if(R!==-1){let U=v-R;_.isLastSegment()&&U--,_.setOptionalData(S.copyOfRange(p,R,R+U))}return v}static textCompaction(p,v,_){let A=new Int32Array((p[0]-v)*2),P=new Int32Array((p[0]-v)*2),R=0,U=!1;for(;v<p[0]&&!U;){let G=p[v++];if(G<Rt.TEXT_COMPACTION_MODE_LATCH)A[R]=G/30,A[R+1]=G%30,R+=2;else switch(G){case Rt.TEXT_COMPACTION_MODE_LATCH:A[R++]=Rt.TEXT_COMPACTION_MODE_LATCH;break;case Rt.BYTE_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH_6:case Rt.NUMERIC_COMPACTION_MODE_LATCH:case Rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Rt.MACRO_PDF417_TERMINATOR:v--,U=!0;break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:A[R]=Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,G=p[v++],P[R]=G,R++;break}}return Rt.decodeTextCompaction(A,P,R,_),v}static decodeTextCompaction(p,v,_,A){let P=Ii.ALPHA,R=Ii.ALPHA,U=0;for(;U<_;){let G=p[U],te="";switch(P){case Ii.ALPHA:if(G<26)te=String.fromCharCode(65+G);else switch(G){case 26:te=" ";break;case Rt.LL:P=Ii.LOWER;break;case Rt.ML:P=Ii.MIXED;break;case Rt.PS:R=P,P=Ii.PUNCT_SHIFT;break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:A.append(v[U]);break;case Rt.TEXT_COMPACTION_MODE_LATCH:P=Ii.ALPHA;break}break;case Ii.LOWER:if(G<26)te=String.fromCharCode(97+G);else switch(G){case 26:te=" ";break;case Rt.AS:R=P,P=Ii.ALPHA_SHIFT;break;case Rt.ML:P=Ii.MIXED;break;case Rt.PS:R=P,P=Ii.PUNCT_SHIFT;break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:A.append(v[U]);break;case Rt.TEXT_COMPACTION_MODE_LATCH:P=Ii.ALPHA;break}break;case Ii.MIXED:if(G<Rt.PL)te=Rt.MIXED_CHARS[G];else switch(G){case Rt.PL:P=Ii.PUNCT;break;case 26:te=" ";break;case Rt.LL:P=Ii.LOWER;break;case Rt.AL:P=Ii.ALPHA;break;case Rt.PS:R=P,P=Ii.PUNCT_SHIFT;break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:A.append(v[U]);break;case Rt.TEXT_COMPACTION_MODE_LATCH:P=Ii.ALPHA;break}break;case Ii.PUNCT:if(G<Rt.PAL)te=Rt.PUNCT_CHARS[G];else switch(G){case Rt.PAL:P=Ii.ALPHA;break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:A.append(v[U]);break;case Rt.TEXT_COMPACTION_MODE_LATCH:P=Ii.ALPHA;break}break;case Ii.ALPHA_SHIFT:if(P=R,G<26)te=String.fromCharCode(65+G);else switch(G){case 26:te=" ";break;case Rt.TEXT_COMPACTION_MODE_LATCH:P=Ii.ALPHA;break}break;case Ii.PUNCT_SHIFT:if(P=R,G<Rt.PAL)te=Rt.PUNCT_CHARS[G];else switch(G){case Rt.PAL:P=Ii.ALPHA;break;case Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:A.append(v[U]);break;case Rt.TEXT_COMPACTION_MODE_LATCH:P=Ii.ALPHA;break}break}te!==""&&A.append(te),U++}}static byteCompaction(p,v,_,A,P){let R=new Wg,U=0,G=0,te=!1;switch(p){case Rt.BYTE_COMPACTION_MODE_LATCH:let de=new Int32Array(6),we=v[A++];for(;A<v[0]&&!te;)switch(de[U++]=we,G=900*G+we,we=v[A++],we){case Rt.TEXT_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH:case Rt.NUMERIC_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH_6:case Rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Rt.MACRO_PDF417_TERMINATOR:A--,te=!0;break;default:if(U%5===0&&U>0){for(let Pe=0;Pe<6;++Pe)R.write(Number(hu(G)>>hu(8*(5-Pe))));G=0,U=0}break}A===v[0]&&we<Rt.TEXT_COMPACTION_MODE_LATCH&&(de[U++]=we);for(let Pe=0;Pe<U;Pe++)R.write(de[Pe]);break;case Rt.BYTE_COMPACTION_MODE_LATCH_6:for(;A<v[0]&&!te;){let Pe=v[A++];if(Pe<Rt.TEXT_COMPACTION_MODE_LATCH)U++,G=900*G+Pe;else switch(Pe){case Rt.TEXT_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH:case Rt.NUMERIC_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH_6:case Rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Rt.MACRO_PDF417_TERMINATOR:A--,te=!0;break}if(U%5===0&&U>0){for(let Ze=0;Ze<6;++Ze)R.write(Number(hu(G)>>hu(8*(5-Ze))));G=0,U=0}}break}return P.append(F.decode(R.toByteArray(),_)),A}static numericCompaction(p,v,_){let A=0,P=!1,R=new Int32Array(Rt.MAX_NUMERIC_CODEWORDS);for(;v<p[0]&&!P;){let U=p[v++];if(v===p[0]&&(P=!0),U<Rt.TEXT_COMPACTION_MODE_LATCH)R[A]=U,A++;else switch(U){case Rt.TEXT_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH:case Rt.BYTE_COMPACTION_MODE_LATCH_6:case Rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Rt.MACRO_PDF417_TERMINATOR:v--,P=!0;break}(A%Rt.MAX_NUMERIC_CODEWORDS===0||U===Rt.NUMERIC_COMPACTION_MODE_LATCH||P)&&A>0&&(_.append(Rt.decodeBase900toBase10(R,A)),A=0)}return v}static decodeBase900toBase10(p,v){let _=hu(0);for(let P=0;P<v;P++)_+=Rt.EXP900[v-P-1]*hu(p[P]);let A=_.toString();if(A.charAt(0)!=="1")throw new I;return A.substring(1)}}Rt.TEXT_COMPACTION_MODE_LATCH=900,Rt.BYTE_COMPACTION_MODE_LATCH=901,Rt.NUMERIC_COMPACTION_MODE_LATCH=902,Rt.BYTE_COMPACTION_MODE_LATCH_6=924,Rt.ECI_USER_DEFINED=925,Rt.ECI_GENERAL_PURPOSE=926,Rt.ECI_CHARSET=927,Rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Rt.MACRO_PDF417_TERMINATOR=922,Rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Rt.MAX_NUMERIC_CODEWORDS=15,Rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Rt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Rt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Rt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Rt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Rt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Rt.PL=25,Rt.LL=27,Rt.AS=27,Rt.ML=28,Rt.AL=28,Rt.PS=29,Rt.PAL=29,Rt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Rt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Rt.EXP900=du()?Km():[],Rt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ee{constructor(){}static decode(p,v,_,A,P,R,U){let G=new Cl(p,v,_,A,P),te=null,de=null,we;for(let at=!0;;at=!1){if(v!=null&&(te=ee.getRowIndicatorColumn(p,G,v,!0,R,U)),A!=null&&(de=ee.getRowIndicatorColumn(p,G,A,!1,R,U)),we=ee.merge(te,de),we==null)throw Z.getNotFoundInstance();let dt=we.getBoundingBox();if(at&&dt!=null&&(dt.getMinY()<G.getMinY()||dt.getMaxY()>G.getMaxY()))G=dt;else break}we.setBoundingBox(G);let Pe=we.getBarcodeColumnCount()+1;we.setDetectionResultColumn(0,te),we.setDetectionResultColumn(Pe,de);let Ze=te!=null;for(let at=1;at<=Pe;at++){let dt=Ze?at:Pe-at;if(we.getDetectionResultColumn(dt)!==void 0)continue;let yt;dt===0||dt===Pe?yt=new g0(G,dt===0):yt=new Qu(G),we.setDetectionResultColumn(dt,yt);let Pt=-1,tr=Pt;for(let ar=G.getMinY();ar<=G.getMaxY();ar++){if(Pt=ee.getStartColumn(we,dt,ar,Ze),Pt<0||Pt>G.getMaxX()){if(tr===-1)continue;Pt=tr}let sr=ee.detectCodeword(p,G.getMinX(),G.getMaxX(),Ze,Pt,ar,R,U);sr!=null&&(yt.setCodeword(ar,sr),tr=Pt,R=Math.min(R,sr.getWidth()),U=Math.max(U,sr.getWidth()))}}return ee.createDecoderResult(we)}static merge(p,v){if(p==null&&v==null)return null;let _=ee.getBarcodeMetadata(p,v);if(_==null)return null;let A=Cl.merge(ee.adjustBoundingBox(p),ee.adjustBoundingBox(v));return new Ld(_,A)}static adjustBoundingBox(p){if(p==null)return null;let v=p.getRowHeights();if(v==null)return null;let _=ee.getMax(v),A=0;for(let U of v)if(A+=_-U,U>0)break;let P=p.getCodewords();for(let U=0;A>0&&P[U]==null;U++)A--;let R=0;for(let U=v.length-1;U>=0&&(R+=_-v[U],!(v[U]>0));U--);for(let U=P.length-1;R>0&&P[U]==null;U--)R--;return p.getBoundingBox().addMissingRows(A,R,p.isLeft())}static getMax(p){let v=-1;for(let _ of p)v=Math.max(v,_);return v}static getBarcodeMetadata(p,v){let _;if(p==null||(_=p.getBarcodeMetadata())==null)return v==null?null:v.getBarcodeMetadata();let A;return v==null||(A=v.getBarcodeMetadata())==null?_:_.getColumnCount()!==A.getColumnCount()&&_.getErrorCorrectionLevel()!==A.getErrorCorrectionLevel()&&_.getRowCount()!==A.getRowCount()?null:_}static getRowIndicatorColumn(p,v,_,A,P,R){let U=new g0(v,A);for(let G=0;G<2;G++){let te=G===0?1:-1,de=Math.trunc(Math.trunc(_.getX()));for(let we=Math.trunc(Math.trunc(_.getY()));we<=v.getMaxY()&&we>=v.getMinY();we+=te){let Pe=ee.detectCodeword(p,0,p.getWidth(),A,de,we,P,R);Pe!=null&&(U.setCodeword(we,Pe),A?de=Pe.getStartX():de=Pe.getEndX())}}return U}static adjustCodewordCount(p,v){let _=v[0][1],A=_.getValue(),P=p.getBarcodeColumnCount()*p.getBarcodeRowCount()-ee.getNumberOfECCodeWords(p.getBarcodeECLevel());if(A.length===0){if(P<1||P>zr.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();_.setValue(P)}else A[0]!==P&&_.setValue(P)}static createDecoderResult(p){let v=ee.createBarcodeMatrix(p);ee.adjustCodewordCount(p,v);let _=new Array,A=new Int32Array(p.getBarcodeRowCount()*p.getBarcodeColumnCount()),P=[],R=new Array;for(let G=0;G<p.getBarcodeRowCount();G++)for(let te=0;te<p.getBarcodeColumnCount();te++){let de=v[G][te+1].getValue(),we=G*p.getBarcodeColumnCount()+te;de.length===0?_.push(we):de.length===1?A[we]=de[0]:(R.push(we),P.push(de))}let U=new Array(P.length);for(let G=0;G<U.length;G++)U[G]=P[G];return ee.createDecoderResultFromAmbiguousValues(p.getBarcodeECLevel(),A,zr.toIntArray(_),zr.toIntArray(R),U)}static createDecoderResultFromAmbiguousValues(p,v,_,A,P){let R=new Int32Array(A.length),U=100;for(;U-- >0;){for(let G=0;G<R.length;G++)v[A[G]]=P[G][R[G]];try{return ee.decodeCodewords(v,p,_)}catch(G){if(!(G instanceof m))throw G}if(R.length===0)throw m.getChecksumInstance();for(let G=0;G<R.length;G++)if(R[G]<P[G].length-1){R[G]++;break}else if(R[G]=0,G===R.length-1)throw m.getChecksumInstance()}throw m.getChecksumInstance()}static createBarcodeMatrix(p){let v=Array.from({length:p.getBarcodeRowCount()},()=>new Array(p.getBarcodeColumnCount()+2));for(let A=0;A<v.length;A++)for(let P=0;P<v[A].length;P++)v[A][P]=new Bf;let _=0;for(let A of p.getDetectionResultColumns()){if(A!=null){for(let P of A.getCodewords())if(P!=null){let R=P.getRowNumber();if(R>=0){if(R>=v.length)continue;v[R][_].setValue(P.getValue())}}}_++}return v}static isValidBarcodeColumn(p,v){return v>=0&&v<=p.getBarcodeColumnCount()+1}static getStartColumn(p,v,_,A){let P=A?1:-1,R=null;if(ee.isValidBarcodeColumn(p,v-P)&&(R=p.getDetectionResultColumn(v-P).getCodeword(_)),R!=null)return A?R.getEndX():R.getStartX();if(R=p.getDetectionResultColumn(v).getCodewordNearby(_),R!=null)return A?R.getStartX():R.getEndX();if(ee.isValidBarcodeColumn(p,v-P)&&(R=p.getDetectionResultColumn(v-P).getCodewordNearby(_)),R!=null)return A?R.getEndX():R.getStartX();let U=0;for(;ee.isValidBarcodeColumn(p,v-P);){v-=P;for(let G of p.getDetectionResultColumn(v).getCodewords())if(G!=null)return(A?G.getEndX():G.getStartX())+P*U*(G.getEndX()-G.getStartX());U++}return A?p.getBoundingBox().getMinX():p.getBoundingBox().getMaxX()}static detectCodeword(p,v,_,A,P,R,U,G){P=ee.adjustCodewordStartColumn(p,v,_,A,P,R);let te=ee.getModuleBitCount(p,v,_,A,P,R);if(te==null)return null;let de,we=Ue.sum(te);if(A)de=P+we;else{for(let at=0;at<te.length/2;at++){let dt=te[at];te[at]=te[te.length-1-at],te[te.length-1-at]=dt}de=P,P=de-we}if(!ee.checkCodewordSkew(we,U,G))return null;let Pe=Fa.getDecodedValue(te),Ze=zr.getCodeword(Pe);return Ze===-1?null:new wc(P,de,ee.getCodewordBucketNumber(Pe),Ze)}static getModuleBitCount(p,v,_,A,P,R){let U=P,G=new Int32Array(8),te=0,de=A?1:-1,we=A;for(;(A?U<_:U>=v)&&te<G.length;)p.get(U,R)===we?(G[te]++,U+=de):(te++,we=!we);return te===G.length||U===(A?_:v)&&te===G.length-1?G:null}static getNumberOfECCodeWords(p){return 2<<p}static adjustCodewordStartColumn(p,v,_,A,P,R){let U=P,G=A?-1:1;for(let te=0;te<2;te++){for(;(A?U>=v:U<_)&&A===p.get(U,R);){if(Math.abs(P-U)>ee.CODEWORD_SKEW_SIZE)return P;U+=G}G=-G,A=!A}return U}static checkCodewordSkew(p,v,_){return v-ee.CODEWORD_SKEW_SIZE<=p&&p<=_+ee.CODEWORD_SKEW_SIZE}static decodeCodewords(p,v,_){if(p.length===0)throw I.getFormatInstance();let A=1<<v+1,P=ee.correctErrors(p,_,A);ee.verifyCodewordCount(p,A);let R=Rt.decode(p,""+v);return R.setErrorsCorrected(P),R.setErasures(_.length),R}static correctErrors(p,v,_){if(v!=null&&v.length>_/2+ee.MAX_ERRORS||_<0||_>ee.MAX_EC_CODEWORDS)throw m.getChecksumInstance();return ee.errorCorrection.decode(p,_,v)}static verifyCodewordCount(p,v){if(p.length<4)throw I.getFormatInstance();let _=p[0];if(_>p.length)throw I.getFormatInstance();if(_===0)if(v<p.length)p[0]=p.length-v;else throw I.getFormatInstance()}static getBitCountForCodeword(p){let v=new Int32Array(8),_=0,A=v.length-1;for(;!((p&1)!==_&&(_=p&1,A--,A<0));)v[A]++,p>>=1;return v}static getCodewordBucketNumber(p){return p instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(p):this.getCodewordBucketNumber_number(p)}static getCodewordBucketNumber_number(p){return ee.getCodewordBucketNumber(ee.getBitCountForCodeword(p))}static getCodewordBucketNumber_Int32Array(p){return(p[0]-p[2]+p[4]-p[6]+9)%9}static toString(p){let v=new cl;for(let _=0;_<p.length;_++){v.format("Row %2d: ",_);for(let A=0;A<p[_].length;A++){let P=p[_][A];P.getValue().length===0?v.format("        ",null):v.format("%4d(%2d)",P.getValue()[0],P.getConfidence(P.getValue()[0]))}v.format("%n")}return v.toString()}}ee.CODEWORD_SKEW_SIZE=2,ee.MAX_ERRORS=3,ee.MAX_EC_CODEWORDS=512,ee.errorCorrection=new Eh;class Se{decode(p,v=null){let _=Se.decode(p,v,!1);if(_==null||_.length===0||_[0]==null)throw Z.getNotFoundInstance();return _[0]}decodeMultiple(p,v=null){try{return Se.decode(p,v,!0)}catch(_){throw _ instanceof I||_ instanceof m?Z.getNotFoundInstance():_}}static decode(p,v,_){const A=new Array,P=Pn.detectMultiple(p,v,_);for(const R of P.getPoints()){const U=ee.decode(P.getBits(),R[4],R[5],R[6],R[7],Se.getMinCodewordWidth(R),Se.getMaxCodewordWidth(R)),G=new ie(U.getText(),U.getRawBytes(),void 0,R,me.PDF_417);G.putMetadata(_e.ERROR_CORRECTION_LEVEL,U.getECLevel());const te=U.getOther();te!=null&&G.putMetadata(_e.PDF417_EXTRA_METADATA,te),A.push(G)}return A.map(R=>R)}static getMaxWidth(p,v){return p==null||v==null?0:Math.trunc(Math.abs(p.getX()-v.getX()))}static getMinWidth(p,v){return p==null||v==null?E.MAX_VALUE:Math.trunc(Math.abs(p.getX()-v.getX()))}static getMaxCodewordWidth(p){return Math.floor(Math.max(Math.max(Se.getMaxWidth(p[0],p[4]),Se.getMaxWidth(p[6],p[2])*zr.MODULES_IN_CODEWORD/zr.MODULES_IN_STOP_PATTERN),Math.max(Se.getMaxWidth(p[1],p[5]),Se.getMaxWidth(p[7],p[3])*zr.MODULES_IN_CODEWORD/zr.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(p){return Math.floor(Math.min(Math.min(Se.getMinWidth(p[0],p[4]),Se.getMinWidth(p[6],p[2])*zr.MODULES_IN_CODEWORD/zr.MODULES_IN_STOP_PATTERN),Math.min(Se.getMinWidth(p[1],p[5]),Se.getMinWidth(p[7],p[3])*zr.MODULES_IN_CODEWORD/zr.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ye extends u{}Ye.kind="ReaderException";class ct{constructor(p,v){this.verbose=p===!0,v&&this.setHints(v)}decode(p,v){return v&&this.setHints(v),this.decodeInternal(p)}decodeWithState(p){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(p)}setHints(p){this.hints=p;const v=!n(p)&&p.get(O.TRY_HARDER)===!0,_=n(p)?null:p.get(O.POSSIBLE_FORMATS),A=new Array;if(!n(_)){const P=_.some(R=>R===me.UPC_A||R===me.UPC_E||R===me.EAN_13||R===me.EAN_8||R===me.CODABAR||R===me.CODE_39||R===me.CODE_93||R===me.CODE_128||R===me.ITF||R===me.RSS_14||R===me.RSS_EXPANDED);P&&!v&&A.push(new Ho(p,this.verbose)),_.includes(me.QR_CODE)&&A.push(new no),_.includes(me.DATA_MATRIX)&&A.push(new yi),_.includes(me.AZTEC)&&A.push(new rt),_.includes(me.PDF_417)&&A.push(new Se),P&&v&&A.push(new Ho(p,this.verbose))}A.length===0&&(v||A.push(new Ho(p,this.verbose)),A.push(new no),A.push(new yi),A.push(new rt),A.push(new Se),v&&A.push(new Ho(p,this.verbose))),this.readers=A}reset(){if(this.readers!==null)for(const p of this.readers)p.reset()}decodeInternal(p){if(this.readers===null)throw new Ye("No readers where selected, nothing can be read.");for(const v of this.readers)try{return v.decode(p,this.hints)}catch(_){if(_ instanceof Ye)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class vt extends J{constructor(p=null,v=500){const _=new ct;_.setHints(p),super(_,v)}decodeBitmap(p){return this.reader.decodeWithState(p)}}class Gt extends J{constructor(p=500){super(new Se,p)}}class mr extends J{constructor(p=500){super(new no,p)}}var Xr;(function(Ne){Ne[Ne.ERROR_CORRECTION=0]="ERROR_CORRECTION",Ne[Ne.CHARACTER_SET=1]="CHARACTER_SET",Ne[Ne.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Ne[Ne.MIN_SIZE=3]="MIN_SIZE",Ne[Ne.MAX_SIZE=4]="MAX_SIZE",Ne[Ne.MARGIN=5]="MARGIN",Ne[Ne.PDF417_COMPACT=6]="PDF417_COMPACT",Ne[Ne.PDF417_COMPACTION=7]="PDF417_COMPACTION",Ne[Ne.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Ne[Ne.AZTEC_LAYERS=9]="AZTEC_LAYERS",Ne[Ne.QR_VERSION=10]="QR_VERSION"})(Xr||(Xr={}));var $r=Xr;class Rn{constructor(p){this.field=p,this.cachedGenerators=[],this.cachedGenerators.push(new ye(p,Int32Array.from([1])))}buildGenerator(p){const v=this.cachedGenerators;if(p>=v.length){let _=v[v.length-1];const A=this.field;for(let P=v.length;P<=p;P++){const R=_.multiply(new ye(A,Int32Array.from([1,A.exp(P-1+A.getGeneratorBase())])));v.push(R),_=R}}return v[p]}encode(p,v){if(v===0)throw new h("No error correction bytes");const _=p.length-v;if(_<=0)throw new h("No data bytes provided");const A=this.buildGenerator(v),P=new Int32Array(_);g.arraycopy(p,0,P,0,_);let R=new ye(this.field,P);R=R.multiplyByMonomial(v,1);const G=R.divide(A)[1].getCoefficients(),te=v-G.length;for(let de=0;de<te;de++)p[_+de]=0;g.arraycopy(G,0,p,_+te,G.length)}}class Yr{constructor(){}static applyMaskPenaltyRule1(p){return Yr.applyMaskPenaltyRule1Internal(p,!0)+Yr.applyMaskPenaltyRule1Internal(p,!1)}static applyMaskPenaltyRule2(p){let v=0;const _=p.getArray(),A=p.getWidth(),P=p.getHeight();for(let R=0;R<P-1;R++){const U=_[R];for(let G=0;G<A-1;G++){const te=U[G];te===U[G+1]&&te===_[R+1][G]&&te===_[R+1][G+1]&&v++}}return Yr.N2*v}static applyMaskPenaltyRule3(p){let v=0;const _=p.getArray(),A=p.getWidth(),P=p.getHeight();for(let R=0;R<P;R++)for(let U=0;U<A;U++){const G=_[R];U+6<A&&G[U]===1&&G[U+1]===0&&G[U+2]===1&&G[U+3]===1&&G[U+4]===1&&G[U+5]===0&&G[U+6]===1&&(Yr.isWhiteHorizontal(G,U-4,U)||Yr.isWhiteHorizontal(G,U+7,U+11))&&v++,R+6<P&&_[R][U]===1&&_[R+1][U]===0&&_[R+2][U]===1&&_[R+3][U]===1&&_[R+4][U]===1&&_[R+5][U]===0&&_[R+6][U]===1&&(Yr.isWhiteVertical(_,U,R-4,R)||Yr.isWhiteVertical(_,U,R+7,R+11))&&v++}return v*Yr.N3}static isWhiteHorizontal(p,v,_){v=Math.max(v,0),_=Math.min(_,p.length);for(let A=v;A<_;A++)if(p[A]===1)return!1;return!0}static isWhiteVertical(p,v,_,A){_=Math.max(_,0),A=Math.min(A,p.length);for(let P=_;P<A;P++)if(p[P][v]===1)return!1;return!0}static applyMaskPenaltyRule4(p){let v=0;const _=p.getArray(),A=p.getWidth(),P=p.getHeight();for(let G=0;G<P;G++){const te=_[G];for(let de=0;de<A;de++)te[de]===1&&v++}const R=p.getHeight()*p.getWidth();return Math.floor(Math.abs(v*2-R)*10/R)*Yr.N4}static getDataMaskBit(p,v,_){let A,P;switch(p){case 0:A=_+v&1;break;case 1:A=_&1;break;case 2:A=v%3;break;case 3:A=(_+v)%3;break;case 4:A=Math.floor(_/2)+Math.floor(v/3)&1;break;case 5:P=_*v,A=(P&1)+P%3;break;case 6:P=_*v,A=(P&1)+P%3&1;break;case 7:P=_*v,A=P%3+(_+v&1)&1;break;default:throw new h("Invalid mask pattern: "+p)}return A===0}static applyMaskPenaltyRule1Internal(p,v){let _=0;const A=v?p.getHeight():p.getWidth(),P=v?p.getWidth():p.getHeight(),R=p.getArray();for(let U=0;U<A;U++){let G=0,te=-1;for(let de=0;de<P;de++){const we=v?R[U][de]:R[de][U];we===te?G++:(G>=5&&(_+=Yr.N1+(G-5)),G=1,te=we)}G>=5&&(_+=Yr.N1+(G-5))}return _}}Yr.N1=3,Yr.N2=3,Yr.N3=40,Yr.N4=10;class Li{constructor(p,v){this.width=p,this.height=v;const _=new Array(v);for(let A=0;A!==v;A++)_[A]=new Uint8Array(p);this.bytes=_}getHeight(){return this.height}getWidth(){return this.width}get(p,v){return this.bytes[v][p]}getArray(){return this.bytes}setNumber(p,v,_){this.bytes[v][p]=_}setBoolean(p,v,_){this.bytes[v][p]=_?1:0}clear(p){for(const v of this.bytes)S.fill(v,p)}equals(p){if(!(p instanceof Li))return!1;const v=p;if(this.width!==v.width||this.height!==v.height)return!1;for(let _=0,A=this.height;_<A;++_){const P=this.bytes[_],R=v.bytes[_];for(let U=0,G=this.width;U<G;++U)if(P[U]!==R[U])return!1}return!0}toString(){const p=new Q;for(let v=0,_=this.height;v<_;++v){const A=this.bytes[v];for(let P=0,R=this.width;P<R;++P)switch(A[P]){case 0:p.append(" 0");break;case 1:p.append(" 1");break;default:p.append("  ");break}p.append(`
`)}return p.toString()}}class ns{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const p=new Q;return p.append(`<<
`),p.append(" mode: "),p.append(this.mode?this.mode.toString():"null"),p.append(`
 ecLevel: `),p.append(this.ecLevel?this.ecLevel.toString():"null"),p.append(`
 version: `),p.append(this.version?this.version.toString():"null"),p.append(`
 maskPattern: `),p.append(this.maskPattern.toString()),this.matrix?(p.append(`
 matrix:
`),p.append(this.matrix.toString())):p.append(`
 matrix: null
`),p.append(`>>
`),p.toString()}setMode(p){this.mode=p}setECLevel(p){this.ecLevel=p}setVersion(p){this.version=p}setMaskPattern(p){this.maskPattern=p}setMatrix(p){this.matrix=p}static isValidMaskPattern(p){return p>=0&&p<ns.NUM_MASK_PATTERNS}}ns.NUM_MASK_PATTERNS=8;class zn extends u{}zn.kind="WriterException";class Ur{constructor(){}static clearMatrix(p){p.clear(255)}static buildMatrix(p,v,_,A,P){Ur.clearMatrix(P),Ur.embedBasicPatterns(_,P),Ur.embedTypeInfo(v,A,P),Ur.maybeEmbedVersionInfo(_,P),Ur.embedDataBits(p,A,P)}static embedBasicPatterns(p,v){Ur.embedPositionDetectionPatternsAndSeparators(v),Ur.embedDarkDotAtLeftBottomCorner(v),Ur.maybeEmbedPositionAdjustmentPatterns(p,v),Ur.embedTimingPatterns(v)}static embedTypeInfo(p,v,_){const A=new j;Ur.makeTypeInfoBits(p,v,A);for(let P=0,R=A.getSize();P<R;++P){const U=A.get(A.getSize()-1-P),G=Ur.TYPE_INFO_COORDINATES[P],te=G[0],de=G[1];if(_.setBoolean(te,de,U),P<8){const we=_.getWidth()-P-1;_.setBoolean(we,8,U)}else{const Pe=_.getHeight()-7+(P-8);_.setBoolean(8,Pe,U)}}}static maybeEmbedVersionInfo(p,v){if(p.getVersionNumber()<7)return;const _=new j;Ur.makeVersionInfoBits(p,_);let A=6*3-1;for(let P=0;P<6;++P)for(let R=0;R<3;++R){const U=_.get(A);A--,v.setBoolean(P,v.getHeight()-11+R,U),v.setBoolean(v.getHeight()-11+R,P,U)}}static embedDataBits(p,v,_){let A=0,P=-1,R=_.getWidth()-1,U=_.getHeight()-1;for(;R>0;){for(R===6&&(R-=1);U>=0&&U<_.getHeight();){for(let G=0;G<2;++G){const te=R-G;if(!Ur.isEmpty(_.get(te,U)))continue;let de;A<p.getSize()?(de=p.get(A),++A):de=!1,v!==255&&Yr.getDataMaskBit(v,te,U)&&(de=!de),_.setBoolean(te,U,de)}U+=P}P=-P,U+=P,R-=2}if(A!==p.getSize())throw new zn("Not all bits consumed: "+A+"/"+p.getSize())}static findMSBSet(p){return 32-E.numberOfLeadingZeros(p)}static calculateBCHCode(p,v){if(v===0)throw new h("0 polynomial");const _=Ur.findMSBSet(v);for(p<<=_-1;Ur.findMSBSet(p)>=_;)p^=v<<Ur.findMSBSet(p)-_;return p}static makeTypeInfoBits(p,v,_){if(!ns.isValidMaskPattern(v))throw new zn("Invalid mask pattern");const A=p.getBits()<<3|v;_.appendBits(A,5);const P=Ur.calculateBCHCode(A,Ur.TYPE_INFO_POLY);_.appendBits(P,10);const R=new j;if(R.appendBits(Ur.TYPE_INFO_MASK_PATTERN,15),_.xor(R),_.getSize()!==15)throw new zn("should not happen but we got: "+_.getSize())}static makeVersionInfoBits(p,v){v.appendBits(p.getVersionNumber(),6);const _=Ur.calculateBCHCode(p.getVersionNumber(),Ur.VERSION_INFO_POLY);if(v.appendBits(_,12),v.getSize()!==18)throw new zn("should not happen but we got: "+v.getSize())}static isEmpty(p){return p===255}static embedTimingPatterns(p){for(let v=8;v<p.getWidth()-8;++v){const _=(v+1)%2;Ur.isEmpty(p.get(v,6))&&p.setNumber(v,6,_),Ur.isEmpty(p.get(6,v))&&p.setNumber(6,v,_)}}static embedDarkDotAtLeftBottomCorner(p){if(p.get(8,p.getHeight()-8)===0)throw new zn;p.setNumber(8,p.getHeight()-8,1)}static embedHorizontalSeparationPattern(p,v,_){for(let A=0;A<8;++A){if(!Ur.isEmpty(_.get(p+A,v)))throw new zn;_.setNumber(p+A,v,0)}}static embedVerticalSeparationPattern(p,v,_){for(let A=0;A<7;++A){if(!Ur.isEmpty(_.get(p,v+A)))throw new zn;_.setNumber(p,v+A,0)}}static embedPositionAdjustmentPattern(p,v,_){for(let A=0;A<5;++A){const P=Ur.POSITION_ADJUSTMENT_PATTERN[A];for(let R=0;R<5;++R)_.setNumber(p+R,v+A,P[R])}}static embedPositionDetectionPattern(p,v,_){for(let A=0;A<7;++A){const P=Ur.POSITION_DETECTION_PATTERN[A];for(let R=0;R<7;++R)_.setNumber(p+R,v+A,P[R])}}static embedPositionDetectionPatternsAndSeparators(p){const v=Ur.POSITION_DETECTION_PATTERN[0].length;Ur.embedPositionDetectionPattern(0,0,p),Ur.embedPositionDetectionPattern(p.getWidth()-v,0,p),Ur.embedPositionDetectionPattern(0,p.getWidth()-v,p);const _=8;Ur.embedHorizontalSeparationPattern(0,_-1,p),Ur.embedHorizontalSeparationPattern(p.getWidth()-_,_-1,p),Ur.embedHorizontalSeparationPattern(0,p.getWidth()-_,p);const A=7;Ur.embedVerticalSeparationPattern(A,0,p),Ur.embedVerticalSeparationPattern(p.getHeight()-A-1,0,p),Ur.embedVerticalSeparationPattern(A,p.getHeight()-A,p)}static maybeEmbedPositionAdjustmentPatterns(p,v){if(p.getVersionNumber()<2)return;const _=p.getVersionNumber()-1,A=Ur.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[_];for(let P=0,R=A.length;P!==R;P++){const U=A[P];if(U>=0)for(let G=0;G!==R;G++){const te=A[G];te>=0&&Ur.isEmpty(v.get(te,U))&&Ur.embedPositionAdjustmentPattern(te-2,U-2,v)}}}}Ur.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ur.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ur.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ur.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ur.VERSION_INFO_POLY=7973,Ur.TYPE_INFO_POLY=1335,Ur.TYPE_INFO_MASK_PATTERN=21522;class io{constructor(p,v){this.dataBytes=p,this.errorCorrectionBytes=v}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Xn{constructor(){}static calculateMaskPenalty(p){return Yr.applyMaskPenaltyRule1(p)+Yr.applyMaskPenaltyRule2(p)+Yr.applyMaskPenaltyRule3(p)+Yr.applyMaskPenaltyRule4(p)}static encode(p,v,_=null){let A=Xn.DEFAULT_BYTE_MODE_ENCODING;const P=_!==null&&_.get($r.CHARACTER_SET)!==void 0;P&&(A=_.get($r.CHARACTER_SET).toString());const R=this.chooseMode(p,A),U=new j;if(R===gn.BYTE&&(P||Xn.DEFAULT_BYTE_MODE_ENCODING!==A)){const ar=D.getCharacterSetECIByName(A);ar!==void 0&&this.appendECI(ar,U)}this.appendModeInfo(R,U);const G=new j;this.appendBytes(p,R,G,A);let te;if(_!==null&&_.get($r.QR_VERSION)!==void 0){const ar=Number.parseInt(_.get($r.QR_VERSION).toString(),10);te=Or.getVersionForNumber(ar);const sr=this.calculateBitsNeeded(R,U,G,te);if(!this.willFit(sr,te,v))throw new zn("Data too big for requested version")}else te=this.recommendVersion(v,R,U,G);const de=new j;de.appendBitArray(U);const we=R===gn.BYTE?G.getSizeInBytes():p.length;this.appendLengthInfo(we,te,R,de),de.appendBitArray(G);const Pe=te.getECBlocksForLevel(v),Ze=te.getTotalCodewords()-Pe.getTotalECCodewords();this.terminateBits(Ze,de);const at=this.interleaveWithECBytes(de,te.getTotalCodewords(),Ze,Pe.getNumBlocks()),dt=new ns;dt.setECLevel(v),dt.setMode(R),dt.setVersion(te);const yt=te.getDimensionForVersion(),Pt=new Li(yt,yt),tr=this.chooseMaskPattern(at,v,te,Pt);return dt.setMaskPattern(tr),Ur.buildMatrix(at,v,te,tr,Pt),dt.setMatrix(Pt),dt}static recommendVersion(p,v,_,A){const P=this.calculateBitsNeeded(v,_,A,Or.getVersionForNumber(1)),R=this.chooseVersion(P,p),U=this.calculateBitsNeeded(v,_,A,R);return this.chooseVersion(U,p)}static calculateBitsNeeded(p,v,_,A){return v.getSize()+p.getCharacterCountBits(A)+_.getSize()}static getAlphanumericCode(p){return p<Xn.ALPHANUMERIC_TABLE.length?Xn.ALPHANUMERIC_TABLE[p]:-1}static chooseMode(p,v=null){if(D.SJIS.getName()===v&&this.isOnlyDoubleByteKanji(p))return gn.KANJI;let _=!1,A=!1;for(let P=0,R=p.length;P<R;++P){const U=p.charAt(P);if(Xn.isDigit(U))_=!0;else if(this.getAlphanumericCode(U.charCodeAt(0))!==-1)A=!0;else return gn.BYTE}return A?gn.ALPHANUMERIC:_?gn.NUMERIC:gn.BYTE}static isOnlyDoubleByteKanji(p){let v;try{v=F.encode(p,D.SJIS)}catch{return!1}const _=v.length;if(_%2!==0)return!1;for(let A=0;A<_;A+=2){const P=v[A]&255;if((P<129||P>159)&&(P<224||P>235))return!1}return!0}static chooseMaskPattern(p,v,_,A){let P=Number.MAX_SAFE_INTEGER,R=-1;for(let U=0;U<ns.NUM_MASK_PATTERNS;U++){Ur.buildMatrix(p,v,_,U,A);let G=this.calculateMaskPenalty(A);G<P&&(P=G,R=U)}return R}static chooseVersion(p,v){for(let _=1;_<=40;_++){const A=Or.getVersionForNumber(_);if(Xn.willFit(p,A,v))return A}throw new zn("Data too big")}static willFit(p,v,_){const A=v.getTotalCodewords(),R=v.getECBlocksForLevel(_).getTotalECCodewords(),U=A-R,G=(p+7)/8;return U>=G}static terminateBits(p,v){const _=p*8;if(v.getSize()>_)throw new zn("data bits cannot fit in the QR Code"+v.getSize()+" > "+_);for(let R=0;R<4&&v.getSize()<_;++R)v.appendBit(!1);const A=v.getSize()&7;if(A>0)for(let R=A;R<8;R++)v.appendBit(!1);const P=p-v.getSizeInBytes();for(let R=0;R<P;++R)v.appendBits(R&1?17:236,8);if(v.getSize()!==_)throw new zn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(p,v,_,A,P,R){if(A>=_)throw new zn("Block ID too large");const U=p%_,G=_-U,te=Math.floor(p/_),de=te+1,we=Math.floor(v/_),Pe=we+1,Ze=te-we,at=de-Pe;if(Ze!==at)throw new zn("EC bytes mismatch");if(_!==G+U)throw new zn("RS blocks mismatch");if(p!==(we+Ze)*G+(Pe+at)*U)throw new zn("Total bytes mismatch");A<G?(P[0]=we,R[0]=Ze):(P[0]=Pe,R[0]=at)}static interleaveWithECBytes(p,v,_,A){if(p.getSizeInBytes()!==_)throw new zn("Number of bits and data bytes does not match");let P=0,R=0,U=0;const G=new Array;for(let de=0;de<A;++de){const we=new Int32Array(1),Pe=new Int32Array(1);Xn.getNumDataBytesAndNumECBytesForBlockID(v,_,A,de,we,Pe);const Ze=we[0],at=new Uint8Array(Ze);p.toBytes(8*P,at,0,Ze);const dt=Xn.generateECBytes(at,Pe[0]);G.push(new io(at,dt)),R=Math.max(R,Ze),U=Math.max(U,dt.length),P+=we[0]}if(_!==P)throw new zn("Data bytes does not match offset");const te=new j;for(let de=0;de<R;++de)for(const we of G){const Pe=we.getDataBytes();de<Pe.length&&te.appendBits(Pe[de],8)}for(let de=0;de<U;++de)for(const we of G){const Pe=we.getErrorCorrectionBytes();de<Pe.length&&te.appendBits(Pe[de],8)}if(v!==te.getSizeInBytes())throw new zn("Interleaving error: "+v+" and "+te.getSizeInBytes()+" differ.");return te}static generateECBytes(p,v){const _=p.length,A=new Int32Array(_+v);for(let R=0;R<_;R++)A[R]=p[R]&255;new Rn(Ge.QR_CODE_FIELD_256).encode(A,v);const P=new Uint8Array(v);for(let R=0;R<v;R++)P[R]=A[_+R];return P}static appendModeInfo(p,v){v.appendBits(p.getBits(),4)}static appendLengthInfo(p,v,_,A){const P=_.getCharacterCountBits(v);if(p>=1<<P)throw new zn(p+" is bigger than "+((1<<P)-1));A.appendBits(p,P)}static appendBytes(p,v,_,A){switch(v){case gn.NUMERIC:Xn.appendNumericBytes(p,_);break;case gn.ALPHANUMERIC:Xn.appendAlphanumericBytes(p,_);break;case gn.BYTE:Xn.append8BitBytes(p,_,A);break;case gn.KANJI:Xn.appendKanjiBytes(p,_);break;default:throw new zn("Invalid mode: "+v)}}static getDigit(p){return p.charCodeAt(0)-48}static isDigit(p){const v=Xn.getDigit(p);return v>=0&&v<=9}static appendNumericBytes(p,v){const _=p.length;let A=0;for(;A<_;){const P=Xn.getDigit(p.charAt(A));if(A+2<_){const R=Xn.getDigit(p.charAt(A+1)),U=Xn.getDigit(p.charAt(A+2));v.appendBits(P*100+R*10+U,10),A+=3}else if(A+1<_){const R=Xn.getDigit(p.charAt(A+1));v.appendBits(P*10+R,7),A+=2}else v.appendBits(P,4),A++}}static appendAlphanumericBytes(p,v){const _=p.length;let A=0;for(;A<_;){const P=Xn.getAlphanumericCode(p.charCodeAt(A));if(P===-1)throw new zn;if(A+1<_){const R=Xn.getAlphanumericCode(p.charCodeAt(A+1));if(R===-1)throw new zn;v.appendBits(P*45+R,11),A+=2}else v.appendBits(P,6),A++}}static append8BitBytes(p,v,_){let A;try{A=F.encode(p,_)}catch(P){throw new zn(P)}for(let P=0,R=A.length;P!==R;P++){const U=A[P];v.appendBits(U,8)}}static appendKanjiBytes(p,v){let _;try{_=F.encode(p,D.SJIS)}catch(P){throw new zn(P)}const A=_.length;for(let P=0;P<A;P+=2){const R=_[P]&255,U=_[P+1]&255,G=R<<8&4294967295|U;let te=-1;if(G>=33088&&G<=40956?te=G-33088:G>=57408&&G<=60351&&(te=G-49472),te===-1)throw new zn("Invalid byte sequence");const de=(te>>8)*192+(te&255);v.appendBits(de,13)}}static appendECI(p,v){v.appendBits(gn.ECI.getBits(),4),v.appendBits(p.getValue(),8)}}Xn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Xn.DEFAULT_BYTE_MODE_ENCODING=D.UTF8.getName();class Gs{write(p,v,_,A=null){if(p.length===0)throw new h("Found empty contents");if(v<0||_<0)throw new h("Requested dimensions are too small: "+v+"x"+_);let P=ni.L,R=Gs.QUIET_ZONE_SIZE;A!==null&&(A.get($r.ERROR_CORRECTION)!==void 0&&(P=ni.fromString(A.get($r.ERROR_CORRECTION).toString())),A.get($r.MARGIN)!==void 0&&(R=Number.parseInt(A.get($r.MARGIN).toString(),10)));const U=Xn.encode(p,P,A);return this.renderResult(U,v,_,R)}writeToDom(p,v,_,A,P=null){typeof p=="string"&&(p=document.querySelector(p));const R=this.write(v,_,A,P);p&&p.appendChild(R)}renderResult(p,v,_,A){const P=p.getMatrix();if(P===null)throw new Te;const R=P.getWidth(),U=P.getHeight(),G=R+A*2,te=U+A*2,de=Math.max(v,G),we=Math.max(_,te),Pe=Math.min(Math.floor(de/G),Math.floor(we/te)),Ze=Math.floor((de-R*Pe)/2),at=Math.floor((we-U*Pe)/2),dt=this.createSVGElement(de,we);for(let yt=0,Pt=at;yt<U;yt++,Pt+=Pe)for(let tr=0,ar=Ze;tr<R;tr++,ar+=Pe)if(P.get(tr,yt)===1){const sr=this.createSvgRectElement(ar,Pt,Pe,Pe);dt.appendChild(sr)}return dt}createSVGElement(p,v){const _=document.createElementNS(Gs.SVG_NS,"svg");return _.setAttributeNS(null,"height",p.toString()),_.setAttributeNS(null,"width",v.toString()),_}createSvgRectElement(p,v,_,A){const P=document.createElementNS(Gs.SVG_NS,"rect");return P.setAttributeNS(null,"x",p.toString()),P.setAttributeNS(null,"y",v.toString()),P.setAttributeNS(null,"height",_.toString()),P.setAttributeNS(null,"width",A.toString()),P.setAttributeNS(null,"fill","#000000"),P}}Gs.QUIET_ZONE_SIZE=4,Gs.SVG_NS="http://www.w3.org/2000/svg";class Ba{encode(p,v,_,A,P){if(p.length===0)throw new h("Found empty contents");if(v!==me.QR_CODE)throw new h("Can only encode QR_CODE, but got "+v);if(_<0||A<0)throw new h(`Requested dimensions are too small: ${_}x${A}`);let R=ni.L,U=Ba.QUIET_ZONE_SIZE;P!==null&&(P.get($r.ERROR_CORRECTION)!==void 0&&(R=ni.fromString(P.get($r.ERROR_CORRECTION).toString())),P.get($r.MARGIN)!==void 0&&(U=Number.parseInt(P.get($r.MARGIN).toString(),10)));const G=Xn.encode(p,R,P);return Ba.renderResult(G,_,A,U)}static renderResult(p,v,_,A){const P=p.getMatrix();if(P===null)throw new Te;const R=P.getWidth(),U=P.getHeight(),G=R+A*2,te=U+A*2,de=Math.max(v,G),we=Math.max(_,te),Pe=Math.min(Math.floor(de/G),Math.floor(we/te)),Ze=Math.floor((de-R*Pe)/2),at=Math.floor((we-U*Pe)/2),dt=new re(de,we);for(let yt=0,Pt=at;yt<U;yt++,Pt+=Pe)for(let tr=0,ar=Ze;tr<R;tr++,ar+=Pe)P.get(tr,yt)===1&&dt.setRegion(ar,Pt,Pe,Pe);return dt}}Ba.QUIET_ZONE_SIZE=4;class $a{encode(p,v,_,A,P){let R;switch(v){case me.QR_CODE:R=new Ba;break;default:throw new h("No encoder available for format "+v)}return R.encode(p,v,_,A,P)}}class _c extends X{constructor(p,v,_,A,P,R,U,G){if(super(R,U),this.yuvData=p,this.dataWidth=v,this.dataHeight=_,this.left=A,this.top=P,A+R>v||P+U>_)throw new h("Crop rectangle does not fit within image data.");G&&this.reverseHorizontal(R,U)}getRow(p,v){if(p<0||p>=this.getHeight())throw new h("Requested row is outside the image: "+p);const _=this.getWidth();(v==null||v.length<_)&&(v=new Uint8ClampedArray(_));const A=(p+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,A,v,0,_),v}getMatrix(){const p=this.getWidth(),v=this.getHeight();if(p===this.dataWidth&&v===this.dataHeight)return this.yuvData;const _=p*v,A=new Uint8ClampedArray(_);let P=this.top*this.dataWidth+this.left;if(p===this.dataWidth)return g.arraycopy(this.yuvData,P,A,0,_),A;for(let R=0;R<v;R++){const U=R*p;g.arraycopy(this.yuvData,P,A,U,p),P+=this.dataWidth}return A}isCropSupported(){return!0}crop(p,v,_,A){return new _c(this.yuvData,this.dataWidth,this.dataHeight,this.left+p,this.top+v,_,A,!1)}renderThumbnail(){const p=this.getWidth()/_c.THUMBNAIL_SCALE_FACTOR,v=this.getHeight()/_c.THUMBNAIL_SCALE_FACTOR,_=new Int32Array(p*v),A=this.yuvData;let P=this.top*this.dataWidth+this.left;for(let R=0;R<v;R++){const U=R*p;for(let G=0;G<p;G++){const te=A[P+G*_c.THUMBNAIL_SCALE_FACTOR]&255;_[U+G]=4278190080|te*65793}P+=this.dataWidth*_c.THUMBNAIL_SCALE_FACTOR}return _}getThumbnailWidth(){return this.getWidth()/_c.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_c.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(p,v){const _=this.yuvData;for(let A=0,P=this.top*this.dataWidth+this.left;A<v;A++,P+=this.dataWidth){const R=P+p/2;for(let U=P,G=P+p-1;U<R;U++,G--){const te=_[U];_[U]=_[G],_[G]=te}}}invert(){return new Y(this)}}_c.THUMBNAIL_SCALE_FACTOR=2;class fu extends X{constructor(p,v,_,A,P,R,U){if(super(v,_),this.dataWidth=A,this.dataHeight=P,this.left=R,this.top=U,p.BYTES_PER_ELEMENT===4){const G=v*_,te=new Uint8ClampedArray(G);for(let de=0;de<G;de++){const we=p[de],Pe=we>>16&255,Ze=we>>7&510,at=we&255;te[de]=(Pe+Ze+at)/4&255}this.luminances=te}else this.luminances=p;if(A===void 0&&(this.dataWidth=v),P===void 0&&(this.dataHeight=_),R===void 0&&(this.left=0),U===void 0&&(this.top=0),this.left+v>this.dataWidth||this.top+_>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(p,v){if(p<0||p>=this.getHeight())throw new h("Requested row is outside the image: "+p);const _=this.getWidth();(v==null||v.length<_)&&(v=new Uint8ClampedArray(_));const A=(p+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,A,v,0,_),v}getMatrix(){const p=this.getWidth(),v=this.getHeight();if(p===this.dataWidth&&v===this.dataHeight)return this.luminances;const _=p*v,A=new Uint8ClampedArray(_);let P=this.top*this.dataWidth+this.left;if(p===this.dataWidth)return g.arraycopy(this.luminances,P,A,0,_),A;for(let R=0;R<v;R++){const U=R*p;g.arraycopy(this.luminances,P,A,U,p),P+=this.dataWidth}return A}isCropSupported(){return!0}crop(p,v,_,A){return new fu(this.luminances,_,A,this.dataWidth,this.dataHeight,this.left+p,this.top+v)}invert(){return new Y(this)}}class so extends D{static forName(p){return this.getCharacterSetECIByName(p)}}class Ju{}Ju.ISO_8859_1=D.ISO8859_1;class jh{isCompact(){return this.compact}setCompact(p){this.compact=p}getSize(){return this.size}setSize(p){this.size=p}getLayers(){return this.layers}setLayers(p){this.layers=p}getCodeWords(){return this.codeWords}setCodeWords(p){this.codeWords=p}getMatrix(){return this.matrix}setMatrix(p){this.matrix=p}}class Uf{static singletonList(p){return[p]}static min(p,v){return p.sort(v)[0]}}class Ah{constructor(p){this.previous=p}getPrevious(){return this.previous}}class na extends Ah{constructor(p,v,_){super(p),this.value=v,this.bitCount=_}appendTo(p,v){p.appendBits(this.value,this.bitCount)}add(p,v){return new na(this,p,v)}addBinaryShift(p,v){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new na(this,p,v)}toString(){let p=this.value&(1<<this.bitCount)-1;return p|=1<<this.bitCount,"<"+E.toBinaryString(p|1<<this.bitCount).substring(1)+">"}}class Ch extends na{constructor(p,v,_){super(p,0,0),this.binaryShiftStart=v,this.binaryShiftByteCount=_}appendTo(p,v){for(let _=0;_<this.binaryShiftByteCount;_++)(_===0||_===31&&this.binaryShiftByteCount<=62)&&(p.appendBits(31,5),this.binaryShiftByteCount>62?p.appendBits(this.binaryShiftByteCount-31,16):_===0?p.appendBits(Math.min(this.binaryShiftByteCount,31),5):p.appendBits(this.binaryShiftByteCount-31,5)),p.appendBits(v[this.binaryShiftStart+_],8)}addBinaryShift(p,v){return new Ch(this,p,v)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Xm(Ne,p,v){return new Ch(Ne,p,v)}function Fd(Ne,p,v){return new na(Ne,p,v)}const Gg=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],hi=0,Go=1,Ko=2,Nc=3,Na=4,mu=new na(null,0,0),Ym=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Th(Ne){for(let p of Ne)S.fill(p,-1);return Ne[hi][Na]=0,Ne[Go][Na]=0,Ne[Go][hi]=28,Ne[Nc][Na]=0,Ne[Ko][Na]=0,Ne[Ko][hi]=15,Ne}const Bd=Th(S.createInt32Array(6,6));class ao{constructor(p,v,_,A){this.token=p,this.mode=v,this.binaryShiftByteCount=_,this.bitCount=A}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(p,v){let _=this.bitCount,A=this.token;if(p!==this.mode){let R=Ym[this.mode][p];A=Fd(A,R&65535,R>>16),_+=R>>16}let P=p===Ko?4:5;return A=Fd(A,v,P),new ao(A,p,0,_+P)}shiftAndAppend(p,v){let _=this.token,A=this.mode===Ko?4:5;return _=Fd(_,Bd[this.mode][p],A),_=Fd(_,v,5),new ao(_,this.mode,0,this.bitCount+A+5)}addBinaryShiftChar(p){let v=this.token,_=this.mode,A=this.bitCount;if(this.mode===Na||this.mode===Ko){let U=Ym[_][hi];v=Fd(v,U&65535,U>>16),A+=U>>16,_=hi}let P=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,R=new ao(v,_,this.binaryShiftByteCount+1,A+P);return R.binaryShiftByteCount===2078&&(R=R.endBinaryShift(p+1)),R}endBinaryShift(p){if(this.binaryShiftByteCount===0)return this;let v=this.token;return v=Xm(v,p-this.binaryShiftByteCount,this.binaryShiftByteCount),new ao(v,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(p){let v=this.bitCount+(Ym[this.mode][p.mode]>>16);return this.binaryShiftByteCount<p.binaryShiftByteCount?v+=ao.calculateBinaryShiftCost(p)-ao.calculateBinaryShiftCost(this):this.binaryShiftByteCount>p.binaryShiftByteCount&&p.binaryShiftByteCount>0&&(v+=10),v<=p.bitCount}toBitArray(p){let v=[];for(let A=this.endBinaryShift(p.length).token;A!==null;A=A.getPrevious())v.unshift(A);let _=new j;for(const A of v)A.appendTo(_,p);return _}toString(){return q.format("%s bits=%d bytes=%d",Gg[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(p){return p.binaryShiftByteCount>62?21:p.binaryShiftByteCount>31?20:p.binaryShiftByteCount>0?10:0}}ao.INITIAL_STATE=new ao(mu,hi,0,0);function Sc(Ne){const p=q.getCharCode(" "),v=q.getCharCode("."),_=q.getCharCode(",");Ne[hi][p]=1;const A=q.getCharCode("Z"),P=q.getCharCode("A");for(let Pe=P;Pe<=A;Pe++)Ne[hi][Pe]=Pe-P+2;Ne[Go][p]=1;const R=q.getCharCode("z"),U=q.getCharCode("a");for(let Pe=U;Pe<=R;Pe++)Ne[Go][Pe]=Pe-U+2;Ne[Ko][p]=1;const G=q.getCharCode("9"),te=q.getCharCode("0");for(let Pe=te;Pe<=G;Pe++)Ne[Ko][Pe]=Pe-te+2;Ne[Ko][_]=12,Ne[Ko][v]=13;const de=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Pe=0;Pe<de.length;Pe++)Ne[Nc][q.getCharCode(de[Pe])]=Pe;const we=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Pe=0;Pe<we.length;Pe++)q.getCharCode(we[Pe])>0&&(Ne[Na][q.getCharCode(we[Pe])]=Pe);return Ne}const ha=Sc(S.createInt32Array(5,256));class Tl{constructor(p){this.text=p}encode(){const p=q.getCharCode(" "),v=q.getCharCode(`
`);let _=Uf.singletonList(ao.INITIAL_STATE);for(let P=0;P<this.text.length;P++){let R,U=P+1<this.text.length?this.text[P+1]:0;switch(this.text[P]){case q.getCharCode("\r"):R=U===v?2:0;break;case q.getCharCode("."):R=U===p?3:0;break;case q.getCharCode(","):R=U===p?4:0;break;case q.getCharCode(":"):R=U===p?5:0;break;default:R=0}R>0?(_=Tl.updateStateListForPair(_,P,R),P++):_=this.updateStateListForChar(_,P)}return Uf.min(_,(P,R)=>P.getBitCount()-R.getBitCount()).toBitArray(this.text)}updateStateListForChar(p,v){const _=[];for(let A of p)this.updateStateForChar(A,v,_);return Tl.simplifyStates(_)}updateStateForChar(p,v,_){let A=this.text[v]&255,P=ha[p.getMode()][A]>0,R=null;for(let U=0;U<=Na;U++){let G=ha[U][A];if(G>0){if(R==null&&(R=p.endBinaryShift(v)),!P||U===p.getMode()||U===Ko){const te=R.latchAndAppend(U,G);_.push(te)}if(!P&&Bd[p.getMode()][U]>=0){const te=R.shiftAndAppend(U,G);_.push(te)}}}if(p.getBinaryShiftByteCount()>0||ha[p.getMode()][A]===0){let U=p.addBinaryShiftChar(v);_.push(U)}}static updateStateListForPair(p,v,_){const A=[];for(let P of p)this.updateStateForPair(P,v,_,A);return this.simplifyStates(A)}static updateStateForPair(p,v,_,A){let P=p.endBinaryShift(v);if(A.push(P.latchAndAppend(Na,_)),p.getMode()!==Na&&A.push(P.shiftAndAppend(Na,_)),_===3||_===4){let R=P.latchAndAppend(Ko,16-_).latchAndAppend(Ko,1);A.push(R)}if(p.getBinaryShiftByteCount()>0){let R=p.addBinaryShiftChar(v).addBinaryShiftChar(v+1);A.push(R)}}static simplifyStates(p){let v=[];for(const _ of p){let A=!0;for(const P of v){if(P.isBetterThanOrEqualTo(_)){A=!1;break}_.isBetterThanOrEqualTo(P)&&(v=v.filter(R=>R!==P))}A&&v.push(_)}return v}}class ii{constructor(){}static encodeBytes(p){return ii.encode(p,ii.DEFAULT_EC_PERCENT,ii.DEFAULT_AZTEC_LAYERS)}static encode(p,v,_){let A=new Tl(p).encode(),P=E.truncDivision(A.getSize()*v,100)+11,R=A.getSize()+P,U,G,te,de,we;if(_!==ii.DEFAULT_AZTEC_LAYERS){if(U=_<0,G=Math.abs(_),G>(U?ii.MAX_NB_BITS_COMPACT:ii.MAX_NB_BITS))throw new h(q.format("Illegal value %s for layers",_));te=ii.totalBitsInLayer(G,U),de=ii.WORD_SIZE[G];let sr=te-te%de;if(we=ii.stuffBits(A,de),we.getSize()+P>sr)throw new h("Data to large for user specified layer");if(U&&we.getSize()>de*64)throw new h("Data to large for user specified layer")}else{de=0,we=null;for(let sr=0;;sr++){if(sr>ii.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(U=sr<=3,G=U?sr+1:sr,te=ii.totalBitsInLayer(G,U),R>te)continue;(we==null||de!==ii.WORD_SIZE[G])&&(de=ii.WORD_SIZE[G],we=ii.stuffBits(A,de));let Nn=te-te%de;if(!(U&&we.getSize()>de*64)&&we.getSize()+P<=Nn)break}}let Pe=ii.generateCheckWords(we,te,de),Ze=we.getSize()/de,at=ii.generateModeMessage(U,G,Ze),dt=(U?11:14)+G*4,yt=new Int32Array(dt),Pt;if(U){Pt=dt;for(let sr=0;sr<yt.length;sr++)yt[sr]=sr}else{Pt=dt+1+2*E.truncDivision(E.truncDivision(dt,2)-1,15);let sr=E.truncDivision(dt,2),Nn=E.truncDivision(Pt,2);for(let kn=0;kn<sr;kn++){let _s=kn+E.truncDivision(kn,15);yt[sr-kn-1]=Nn-_s-1,yt[sr+kn]=Nn+_s+1}}let tr=new re(Pt);for(let sr=0,Nn=0;sr<G;sr++){let kn=(G-sr)*4+(U?9:12);for(let _s=0;_s<kn;_s++){let oo=_s*2;for(let Xo=0;Xo<2;Xo++)Pe.get(Nn+oo+Xo)&&tr.set(yt[sr*2+Xo],yt[sr*2+_s]),Pe.get(Nn+kn*2+oo+Xo)&&tr.set(yt[sr*2+_s],yt[dt-1-sr*2-Xo]),Pe.get(Nn+kn*4+oo+Xo)&&tr.set(yt[dt-1-sr*2-Xo],yt[dt-1-sr*2-_s]),Pe.get(Nn+kn*6+oo+Xo)&&tr.set(yt[dt-1-sr*2-_s],yt[sr*2+Xo])}Nn+=kn*8}if(ii.drawModeMessage(tr,U,Pt,at),U)ii.drawBullsEye(tr,E.truncDivision(Pt,2),5);else{ii.drawBullsEye(tr,E.truncDivision(Pt,2),7);for(let sr=0,Nn=0;sr<E.truncDivision(dt,2)-1;sr+=15,Nn+=16)for(let kn=E.truncDivision(Pt,2)&1;kn<Pt;kn+=2)tr.set(E.truncDivision(Pt,2)-Nn,kn),tr.set(E.truncDivision(Pt,2)+Nn,kn),tr.set(kn,E.truncDivision(Pt,2)-Nn),tr.set(kn,E.truncDivision(Pt,2)+Nn)}let ar=new jh;return ar.setCompact(U),ar.setSize(Pt),ar.setLayers(G),ar.setCodeWords(Ze),ar.setMatrix(tr),ar}static drawBullsEye(p,v,_){for(let A=0;A<_;A+=2)for(let P=v-A;P<=v+A;P++)p.set(P,v-A),p.set(P,v+A),p.set(v-A,P),p.set(v+A,P);p.set(v-_,v-_),p.set(v-_+1,v-_),p.set(v-_,v-_+1),p.set(v+_,v-_),p.set(v+_,v-_+1),p.set(v+_,v+_-1)}static generateModeMessage(p,v,_){let A=new j;return p?(A.appendBits(v-1,2),A.appendBits(_-1,6),A=ii.generateCheckWords(A,28,4)):(A.appendBits(v-1,5),A.appendBits(_-1,11),A=ii.generateCheckWords(A,40,4)),A}static drawModeMessage(p,v,_,A){let P=E.truncDivision(_,2);if(v)for(let R=0;R<7;R++){let U=P-3+R;A.get(R)&&p.set(U,P-5),A.get(R+7)&&p.set(P+5,U),A.get(20-R)&&p.set(U,P+5),A.get(27-R)&&p.set(P-5,U)}else for(let R=0;R<10;R++){let U=P-5+R+E.truncDivision(R,5);A.get(R)&&p.set(U,P-7),A.get(R+10)&&p.set(P+7,U),A.get(29-R)&&p.set(U,P+7),A.get(39-R)&&p.set(P-7,U)}}static generateCheckWords(p,v,_){let A=p.getSize()/_,P=new Rn(ii.getGF(_)),R=E.truncDivision(v,_),U=ii.bitsToWords(p,_,R);P.encode(U,R-A);let G=v%_,te=new j;te.appendBits(0,G);for(const de of Array.from(U))te.appendBits(de,_);return te}static bitsToWords(p,v,_){let A=new Int32Array(_),P,R;for(P=0,R=p.getSize()/v;P<R;P++){let U=0;for(let G=0;G<v;G++)U|=p.get(P*v+G)?1<<v-G-1:0;A[P]=U}return A}static getGF(p){switch(p){case 4:return Ge.AZTEC_PARAM;case 6:return Ge.AZTEC_DATA_6;case 8:return Ge.AZTEC_DATA_8;case 10:return Ge.AZTEC_DATA_10;case 12:return Ge.AZTEC_DATA_12;default:throw new h("Unsupported word size "+p)}}static stuffBits(p,v){let _=new j,A=p.getSize(),P=(1<<v)-2;for(let R=0;R<A;R+=v){let U=0;for(let G=0;G<v;G++)(R+G>=A||p.get(R+G))&&(U|=1<<v-1-G);(U&P)===P?(_.appendBits(U&P,v),R--):U&P?_.appendBits(U,v):(_.appendBits(U|1,v),R--)}return _}static totalBitsInLayer(p,v){return((v?88:112)+16*p)*p}}ii.DEFAULT_EC_PERCENT=33,ii.DEFAULT_AZTEC_LAYERS=0,ii.MAX_NB_BITS=32,ii.MAX_NB_BITS_COMPACT=4,ii.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ec{encode(p,v,_,A){return this.encodeWithHints(p,v,_,A,null)}encodeWithHints(p,v,_,A,P){let R=Ju.ISO_8859_1,U=ii.DEFAULT_EC_PERCENT,G=ii.DEFAULT_AZTEC_LAYERS;return P!=null&&(P.has($r.CHARACTER_SET)&&(R=so.forName(P.get($r.CHARACTER_SET).toString())),P.has($r.ERROR_CORRECTION)&&(U=E.parseInt(P.get($r.ERROR_CORRECTION).toString())),P.has($r.AZTEC_LAYERS)&&(G=E.parseInt(P.get($r.AZTEC_LAYERS).toString()))),Ec.encodeLayers(p,v,_,A,R,U,G)}static encodeLayers(p,v,_,A,P,R,U){if(v!==me.AZTEC)throw new h("Can only encode AZTEC, but got "+v);let G=ii.encode(q.getBytes(p,P),R,U);return Ec.renderResult(G,_,A)}static renderResult(p,v,_){let A=p.getMatrix();if(A==null)throw new Te;let P=A.getWidth(),R=A.getHeight(),U=Math.max(v,P),G=Math.max(_,R),te=Math.min(U/P,G/R),de=(U-P*te)/2,we=(G-R*te)/2,Pe=new re(U,G);for(let Ze=0,at=we;Ze<R;Ze++,at+=te)for(let dt=0,yt=de;dt<P;dt++,yt+=te)A.get(dt,Ze)&&Pe.setRegion(yt,at,te,te);return Pe}}r.AbstractExpandedDecoder=He,r.ArgumentException=d,r.ArithmeticException=Le,r.AztecCode=jh,r.AztecCodeReader=rt,r.AztecCodeWriter=Ec,r.AztecDecoder=Re,r.AztecDetector=ur,r.AztecDetectorResult=Jt,r.AztecEncoder=ii,r.AztecHighLevelEncoder=Tl,r.AztecPoint=Kt,r.BarcodeFormat=me,r.Binarizer=x,r.BinaryBitmap=f,r.BitArray=j,r.BitMatrix=re,r.BitSource=Os,r.BrowserAztecCodeReader=Lt,r.BrowserBarcodeReader=Al,r.BrowserCodeReader=J,r.BrowserDatamatrixCodeReader=bh,r.BrowserMultiFormatReader=vt,r.BrowserPDF417Reader=Gt,r.BrowserQRCodeReader=mr,r.BrowserQRCodeSvgWriter=Gs,r.CharacterSetECI=D,r.ChecksumException=m,r.Code128Reader=Fe,r.Code39Reader=ut,r.DataMatrixDecodedBitStreamParser=ll,r.DataMatrixReader=yi,r.DecodeHintType=O,r.DecoderResult=ue,r.DefaultGridSampler=er,r.DetectorResult=Xt,r.EAN13Reader=Cr,r.EncodeHintType=$r,r.Exception=u,r.FormatException=I,r.GenericGF=Ge,r.GenericGFPoly=ye,r.GlobalHistogramBinarizer=se,r.GridSampler=lt,r.GridSamplerInstance=Vt,r.HTMLCanvasElementLuminanceSource=oe,r.HybridBinarizer=K,r.ITFReader=Mt,r.IllegalArgumentException=h,r.IllegalStateException=Te,r.InvertedLuminanceSource=Y,r.LuminanceSource=X,r.MathUtils=Ue,r.MultiFormatOneDReader=Ho,r.MultiFormatReader=ct,r.MultiFormatWriter=$a,r.NotFoundException=Z,r.OneDReader=Dt,r.PDF417DecodedBitStreamParser=Rt,r.PDF417DecoderErrorCorrection=Eh,r.PDF417Reader=Se,r.PDF417ResultMetadata=Wm,r.PerspectiveTransform=pt,r.PlanarYUVLuminanceSource=_c,r.QRCodeByteMatrix=Li,r.QRCodeDataMask=ro,r.QRCodeDecodedBitStreamParser=bs,r.QRCodeDecoderErrorCorrectionLevel=ni,r.QRCodeDecoderFormatInformation=bo,r.QRCodeEncoder=Xn,r.QRCodeEncoderQRCode=ns,r.QRCodeMaskUtil=Yr,r.QRCodeMatrixUtil=Ur,r.QRCodeMode=gn,r.QRCodeReader=no,r.QRCodeVersion=Or,r.QRCodeWriter=Ba,r.RGBLuminanceSource=fu,r.RSS14Reader=Jn,r.RSSExpandedReader=qt,r.ReaderException=Ye,r.ReedSolomonDecoder=ze,r.ReedSolomonEncoder=Rn,r.ReedSolomonException=Be,r.Result=ie,r.ResultMetadataType=_e,r.ResultPoint=st,r.StringUtils=q,r.UnsupportedOperationException=z,r.VideoInputDevice=xe,r.WhiteRectangleDetector=_r,r.WriterException=zn,r.ZXingArrays=S,r.ZXingCharset=so,r.ZXingInteger=E,r.ZXingStandardCharsets=Ju,r.ZXingStringBuilder=Q,r.ZXingStringEncoding=F,r.ZXingSystem=g,r.createAbstractExpandedDecoder=Sr,Object.defineProperty(r,"__esModule",{value:!0})})})(bW,bW.exports);var Aa=bW.exports;const CNt=Vi(Aa),TNt=Mfe({__proto__:null,default:CNt},[Aa]);var Xce=function(){function t(e,r,n){if(this.formatMap=new Map([[Wr.QR_CODE,Aa.BarcodeFormat.QR_CODE],[Wr.AZTEC,Aa.BarcodeFormat.AZTEC],[Wr.CODABAR,Aa.BarcodeFormat.CODABAR],[Wr.CODE_39,Aa.BarcodeFormat.CODE_39],[Wr.CODE_93,Aa.BarcodeFormat.CODE_93],[Wr.CODE_128,Aa.BarcodeFormat.CODE_128],[Wr.DATA_MATRIX,Aa.BarcodeFormat.DATA_MATRIX],[Wr.MAXICODE,Aa.BarcodeFormat.MAXICODE],[Wr.ITF,Aa.BarcodeFormat.ITF],[Wr.EAN_13,Aa.BarcodeFormat.EAN_13],[Wr.EAN_8,Aa.BarcodeFormat.EAN_8],[Wr.PDF_417,Aa.BarcodeFormat.PDF_417],[Wr.RSS_14,Aa.BarcodeFormat.RSS_14],[Wr.RSS_EXPANDED,Aa.BarcodeFormat.RSS_EXPANDED],[Wr.UPC_A,Aa.BarcodeFormat.UPC_A],[Wr.UPC_E,Aa.BarcodeFormat.UPC_E],[Wr.UPC_EAN_EXTENSION,Aa.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!TNt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(e),s=new Map;s.set(Aa.DecodeHintType.POSSIBLE_FORMATS,i),s.set(Aa.DecodeHintType.TRY_HARDER,!1),this.hints=s}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,i){try{n(r.decode(e))}catch(s){i(s)}})},t.prototype.decode=function(e){var r=new Aa.MultiFormatReader(this.verbose,this.hints),n=new Aa.HTMLCanvasElementLuminanceSource(e),i=new Aa.BinaryBitmap(new Aa.HybridBinarizer(n)),s=r.decode(i);return{text:s.text,format:eSe.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,i){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),PNt=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},kNt=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Yce=function(){function t(e,r,n){if(this.formatMap=new Map([[Wr.QR_CODE,"qr_code"],[Wr.AZTEC,"aztec"],[Wr.CODABAR,"codabar"],[Wr.CODE_39,"code_39"],[Wr.CODE_93,"code_93"],[Wr.CODE_128,"code_128"],[Wr.DATA_MATRIX,"data_matrix"],[Wr.ITF,"itf"],[Wr.EAN_13,"ean_13"],[Wr.EAN_8,"ean_8"],[Wr.PDF_417,"pdf417"],[Wr.UPC_A,"upc_a"],[Wr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return PNt(this,void 0,void 0,function(){var r,n;return kNt(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:eSe.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,i=0,s=e;i<s.length;i++){var o=s[i],l=o.boundingBox.width*o.boundingBox.height;l>n&&(n=l,r=o)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,i){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Zce=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Qce=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ONt=function(){function t(e,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Yce.isSupported()?(this.primaryDecoder=new Yce(e,n,i),this.secondaryDecoder=new Xce(e,n,i)):this.primaryDecoder=new Xce(e,n,i)}return t.prototype.decodeAsync=function(e){return Zce(this,void 0,void 0,function(){var r;return Qce(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Zce(this,void 0,void 0,function(){var r,n;return Qce(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];e+=i}var s=e/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),UQ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gL=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},xL=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rSe=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),INt=function(t){UQ(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(rSe),RNt=function(t){UQ(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(INt),DNt=function(t){UQ(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(rSe),MNt=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new RNt(this.track)},t.prototype.torchFeature=function(){return new DNt(this.track)},t}(),LNt=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,i),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,i){return gL(this,void 0,void 0,function(){var s,o;return xL(this,function(l){switch(l.label){case 0:return s=new t(e,r,i),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return gL(this,void 0,void 0,function(){return xL(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var i=e.mediaStream.getVideoTracks(),s=i.length,o=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++o,o>=s&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new MNt(this.getFirstTrackOrFail())},t}(),FNt=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return gL(this,void 0,void 0,function(){return xL(this,function(i){return[2,LNt.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return gL(this,void 0,void 0,function(){var r,n;return xL(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new t(n)]}})})},t}(),Jce=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},eue=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},BNt=function(){function t(){}return t.failIfNotSupported=function(){return Jce(this,void 0,void 0,function(){return eue(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Jce(this,void 0,void 0,function(){return eue(this,function(r){return[2,FNt.create(e)]})})},t}(),$Nt=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},UNt=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},zNt=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=QS.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=QS.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return $Nt(this,void 0,void 0,function(){var e,r,n,i,s,o,l;return UNt(this,function(c){switch(c.label){case 0:return e=function(u){for(var d=u.getVideoTracks(),h=0,f=d;h<f.length;h++){var m=f[h];m.enabled=!1,m.stop(),u.removeTrack(m)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=c.sent(),i=[],s=0,o=n;s<o.length;s++)l=o[s],l.kind==="videoinput"&&i.push({id:l.deviceId,label:l.label});return e(r),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(s){for(var o=[],l=0,c=s;l<c.length;l++){var u=c[l];u.kind==="video"&&o.push({id:u.id,label:u.label})}e(o)},i=MediaStreamTrack;i.getSources(n)})},t}(),Wa;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Wa||(Wa={}));var VNt=function(){function t(){this.state=Wa.NOT_STARTED,this.onGoingTransactionNewState=Wa.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Wa.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Wa.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Wa.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Wa.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Wa.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Wa.UNKNOWN:throw"Transition from unknown is not allowed";case Wa.NOT_STARTED:this.failIfNewStateIs(e,[Wa.PAUSED]);break;case Wa.SCANNING:break;case Wa.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,i=r;n<i.length;n++){var s=i[n];if(e===s)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),qNt=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Wa.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Wa.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Wa.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Wa.PAUSED},t}(),HNt=function(){function t(){}return t.create=function(){return new qNt(new VNt)},t}(),WNt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bh=function(t){WNt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(ENt),GNt=function(){function t(e,r){this.logger=r,this.fps=Bh.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Bh.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?tSe.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ix(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),nSe=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new ANt(this.verbose),this.qrcode=new ONt(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=HNt.create()}return t.prototype.start=function(e,r,n,i){var s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;i?o=i:o=this.verbose?this.logger.log:function(){};var l=GNt.create(r,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=c,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:Bh.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var h=this,f=this.stateManagerProxy.startTransition(Wa.SCANNING);return new Promise(function(m,x){var g=u?l.videoConstraints:h.createVideoConstraints(e);if(!g){f.cancel(),x("videoConstraints should be defined");return}var y={};(!u||l.aspectRatio)&&(y.aspectRatio=l.aspectRatio);var w={onRenderSurfaceReady:function(S,E){h.setupUi(S,E,l),h.isScanning=!0,h.foreverScan(l,n,o)}};BNt.failIfNotSupported().then(function(S){S.create(g).then(function(E){return E.render(s.element,y,w).then(function(j){h.renderedCamera=j,f.execute(),m(null)}).catch(function(j){f.cancel(),x(j)})}).catch(function(E){f.cancel(),x(QS.errorGettingUserMedia(E))})}).catch(function(S){f.cancel(),x(QS.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Wa.PAUSED),this.showPausedState(),(ix(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(Wa.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Wa.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var s=document.getElementById(Bh.SHADED_REGION_ELEMENT_ID);s&&e.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ix(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var l=o.width,c=o.height,u=document.getElementById(n.elementId),d=u.clientWidth?u.clientWidth:Bh.DEFAULT_WIDTH,h=Math.max(u.clientHeight?u.clientHeight:c,Bh.FILE_SCAN_MIN_HEIGHT),f=n.computeCanvasDrawConfig(l,c,d,h);if(r){var m=n.createCanvasElement(d,h,"qr-canvas-visible");m.style.display="inline-block",u.appendChild(m);var x=m.getContext("2d");if(!x)throw"Unable to get 2d context from canvas";x.canvas.width=d,x.canvas.height=h,x.drawImage(o,0,0,l,c,f.x,f.y,f.width,f.height)}var g=Bh.FILE_SCAN_HIDDEN_CANVAS_PADDING,y=Math.max(o.width,f.width),w=Math.max(o.height,f.height),S=y+2*g,E=w+2*g,j=n.createCanvasElement(S,E);u.appendChild(j);var T=j.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=S,T.canvas.height=E,T.drawImage(o,0,0,l,c,g,g,y,w);try{n.qrcode.decodeRobustlyAsync(j).then(function(O){i(Kce.createFromQrcodeResult(O))}).catch(s)}catch(O){s("QR code parse error, error = ".concat(O))}},o.onerror=s,o.onabort=s,o.onstalled=s,o.onsuspend=s,o.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return zNt.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!tSe.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Wr.QR_CODE,Wr.AZTEC,Wr.CODABAR,Wr.CODE_39,Wr.CODE_93,Wr.CODE_128,Wr.DATA_MATRIX,Wr.MAXICODE,Wr.ITF,Wr.EAN_13,Wr.EAN_8,Wr.PDF_417,Wr.RSS_14,Wr.RSS_EXPANDED,Wr.UPC_A,Wr.UPC_E,Wr.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,s=e.formatsToSupport;i<s.length;i++){var o=s[i];SNt(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ix(e))return!0;if(!ix(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ix(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return ix(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var i=this,s=n.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,r,s),l=function(u){if(u<Bh.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Bh.MIN_QR_BOX_SIZE,"px.")},c=function(u){return u>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),u=e),u};l(o.width),l(o.height),o.width=c(o.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var i=ix(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(e,r,i);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&s.height<=r,l={x:0,y:0,width:e,height:r},c=o?this.getShadedRegionBounds(e,r,s):l,u=this.createCanvasElement(c.width,c.height),d={willReadFrequently:!0},h=u.getContext("2d",d);h.canvas.width=c.width,h.canvas.height=c.height,this.element.append(u),o&&this.possiblyInsertShadingElement(this.element,e,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=h,this.canvasElement=u},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=QS.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,Kce.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var s=QS.codeParseError(i);return r(s,jNt.createFrom(s)),!1})},t.prototype.foreverScan=function(e,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),o=s.videoWidth/s.clientWidth,l=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,u=this.qrRegion.height*l,d=this.qrRegion.x*o,h=this.qrRegion.y*l;this.context.drawImage(s,d,h,c,u,0,0,this.qrRegion.width,this.qrRegion.height);var f=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,r,n)},i.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(m){!m&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){f()})):f()}).catch(function(m){i.logger.logError("Error happend while scanning context",m),f()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},s="exact",o=function(x){if(x in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(x,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(e)[0];if(c!==r&&c!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(c===r){var u=e.facingMode;if(typeof u=="string"){if(o(u))return{facingMode:u}}else if(typeof u=="object")if(s in u){if(o(u["".concat(s)]))return{facingMode:{exact:u["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var d=typeof u;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var h=e.deviceId;if(typeof h=="string")return{deviceId:h};if(typeof h=="object"){if(s in h)return{deviceId:{exact:h["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var f=typeof h;throw"Invalid type of 'deviceId' = ".concat(f)}}}var m=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(m)},t.prototype.computeCanvasDrawConfig=function(e,r,n,i){if(e<=n&&r<=i){var s=(n-e)/2,o=(i-r)/2;return{x:s,y:o,width:e,height:r}}else{var l=e,c=r;return e>n&&(r=n/e*r,e=n),r>i&&(e=i/r*e,r=i),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Bh.BORDER_SHADER_MATCH_COLOR:Bh.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var i=e,s=r,o=document.createElement("canvas");return o.style.width="".concat(i,"px"),o.style.height="".concat(s,"px"),o.style.display="none",o.id=ix(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,i){if(!(r-i.width<1||n-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var o=(r-i.width)/2,l=(n-i.height)/2;if(s.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(Bh.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var c=5,u=40;this.insertShaderBorders(s,u,c,-c,null,0,!0),this.insertShaderBorders(s,u,c,-c,null,0,!1),this.insertShaderBorders(s,u,c,null,-c,0,!0),this.insertShaderBorders(s,u,c,null,-c,0,!1),this.insertShaderBorders(s,c,u+c,-c,null,-c,!0),this.insertShaderBorders(s,c,u+c,null,-c,-c,!0),this.insertShaderBorders(s,c,u+c,-c,null,-c,!1),this.insertShaderBorders(s,c,u+c,null,-c,-c,!1),this.hasBorderShaders=!0}e.append(s)}},t.prototype.insertShaderBorders=function(e,r,n,i,s,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=Bh.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(r,"px"),c.style.height="".concat(n,"px"),i!==null&&(c.style.top="".concat(i,"px")),s!==null&&(c.style.bottom="".concat(s,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),e.appendChild(c)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),tue;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(tue||(tue={}));function rue({onScan:t,onCancel:e,mode:r}){const n=C.useRef(null),[i,s]=C.useState(!1),[o,l]=C.useState(!1),c=async()=>{try{const h=new nSe("scanner-container");n.current=h;const f=r==="qrcode"?{fps:10,qrbox:{width:300,height:300},formatsToSupport:[Wr.QR_CODE,Wr.DATA_MATRIX]}:{fps:10,qrbox:{width:400,height:200},formatsToSupport:[Wr.CODE_128,Wr.CODE_39,Wr.EAN_13,Wr.ITF,Wr.CODE_93]};await h.start({facingMode:"environment"},f,m=>{d(),t(m)},m=>{})}catch(h){console.error("[BarcodeScanner] Erro ao iniciar scanner:",h),s(!1),l(!1)}},u=()=>{s(!0),l(!0)},d=async()=>{if(n.current)try{n.current.getState()===2&&await n.current.stop(),n.current.clear()}catch{}s(!1)};return C.useEffect(()=>{o&&i&&(c(),l(!1))},[o,i]),C.useEffect(()=>()=>{d()},[]),a.jsx("div",{className:"space-y-4",children:i?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center p-4 bg-muted/50 rounded-lg",children:[a.jsx(jn,{className:"h-5 w-5 animate-spin mr-2"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Procurando ",r==="qrcode"?"QR Code":"cdigo de barras","..."]})]}),a.jsx("div",{id:"scanner-container",className:"w-full rounded-lg overflow-hidden border-2 border-primary/20"})]}),a.jsx(Oe,{variant:"outline",onClick:()=>{d(),e()},className:"w-full",children:"Cancelar Scan"})]}):a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Oe,{onClick:u,className:"flex-1",children:[a.jsx(IRe,{className:"mr-2 h-4 w-4"}),r==="qrcode"?"Escanear QR Code":"Escanear Cdigo de Barras"]}),a.jsx(Oe,{variant:"outline",onClick:e,children:a.jsx(Xa,{className:"h-4 w-4"})})]})})}var hB="Switch",[KNt,l$t]=qo(hB),[XNt,YNt]=KNt(hB),iSe=C.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=C.useState(null),x=An(e,E=>m(E)),g=C.useRef(!1),y=f?d||!!f.closest("form"):!0,[w,S]=Xu({prop:i,defaultProp:s??!1,onChange:u,caller:hB});return a.jsxs(XNt,{scope:r,checked:w,disabled:l,children:[a.jsx(Dr.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":lSe(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:wr(t.onClick,E=>{S(j=>!j),y&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})}),y&&a.jsx(oSe,{control:f,bubbles:!g.current,name:n,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});iSe.displayName=hB;var sSe="SwitchThumb",aSe=C.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=YNt(sSe,r);return a.jsx(Dr.span,{"data-state":lSe(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});aSe.displayName=sSe;var ZNt="SwitchBubbleInput",oSe=C.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...i},s)=>{const o=C.useRef(null),l=An(o,s),c=tI(r),u=YO(e);return C.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const x=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(x)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});oSe.displayName=ZNt;function lSe(t){return t?"checked":"unchecked"}var cSe=iSe,QNt=aSe;const nh=C.forwardRef(({className:t,...e},r)=>a.jsx(cSe,{className:Ut("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:a.jsx(QNt,{className:Ut("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));nh.displayName=cSe.displayName;async function mS(t){if(!t||t.trim()===""||t.trim()==="SEM GTIN")return{found:!1};try{return{found:!1}}catch(e){return console.error("Erro ao confrontar produto:",e),{found:!1}}}const Ip={vidro:"Vidro",plastico:"Plstico",papel:"Papel",papelao:"Papelo",aluminio:"Alumnio",laminado:"Laminado",misto:"Misto"};function JNt({items:t,onChange:e,numeroNota:r,onNumeroNotaChange:n,cnpj:i,onCnpjChange:s,dataCompra:o,onDataCompraChange:l}){const[c,u]=C.useState(""),d=y=>{const w=y.replace(/\D/g,"");return w.length<=2?w:w.length<=5?`${w.slice(0,2)}.${w.slice(2)}`:w.length<=8?`${w.slice(0,2)}.${w.slice(2,5)}.${w.slice(5)}`:w.length<=12?`${w.slice(0,2)}.${w.slice(2,5)}.${w.slice(5,8)}/${w.slice(8)}`:`${w.slice(0,2)}.${w.slice(2,5)}.${w.slice(5,8)}/${w.slice(8,12)}-${w.slice(12,14)}`},h=y=>{const w=y.replace(/\D/g,"");if(w.length!==14||/^(\d)\1+$/.test(w))return!1;let S=0,E=5;for(let O=0;O<12;O++)S+=parseInt(w.charAt(O))*E,E=E===2?9:E-1;if((S%11<2?0:11-S%11)!==parseInt(w.charAt(12)))return!1;S=0,E=6;for(let O=0;O<13;O++)S+=parseInt(w.charAt(O))*E,E=E===2?9:E-1;return(S%11<2?0:11-S%11)===parseInt(w.charAt(13))},f=y=>{const w=d(y);s==null||s(w),w.replace(/\D/g,"").length===14?h(w)?u(""):u("CNPJ invlido"):u("")},m=()=>{e([...t,{nome:"",quantidade:1,preco_unitario:0,preco_total:0,reciclavel:!1,gtin:"",produto_cadastrado:!1}])},x=y=>{e(t.filter((w,S)=>S!==y))},g=async(y,w,S)=>{const E=[...t];if(E[y]={...E[y],[w]:S},(w==="quantidade"||w==="preco_unitario")&&(E[y].preco_total=E[y].quantidade*E[y].preco_unitario),w==="gtin"&&S&&S.length>=8){const j=await mS(S);j.found&&j.produto?(E[y].produto_cadastrado=!0,E[y].produto_ciclik=j.produto,E[y].nome=j.produto.descricao,E[y].reciclavel=j.produto.reciclavel):(E[y].produto_cadastrado=!1,E[y].produto_ciclik=void 0)}e(E)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{className:"text-base font-semibold",children:"Dados da Nota Fiscal"}),a.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:m,children:[a.jsx(ya,{className:"h-4 w-4 mr-2"}),"Adicionar Item"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/30",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"product-list-numero",children:"Nmero da Nota"}),a.jsx(mt,{id:"product-list-numero",value:r||"",onChange:y=>n==null?void 0:n(y.target.value),placeholder:"000000"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"product-list-cnpj",children:"CNPJ do Estabelecimento"}),a.jsx(mt,{id:"product-list-cnpj",value:i||"",onChange:y=>f(y.target.value),placeholder:"00.000.000/0000-00",maxLength:18,className:c?"border-destructive":""}),c&&a.jsx("p",{className:"text-xs text-destructive",children:c})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"product-list-data",children:"Data da Compra"}),a.jsx(mt,{id:"product-list-data",type:"date",value:o||"",onChange:y=>l==null?void 0:l(y.target.value)})]})]}),a.jsx(nt,{className:"text-sm font-semibold",children:"Produtos"}),t.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Nenhum produto adicionado. Use o OCR para extrair automaticamente ou adicione manualmente."}):a.jsx("div",{className:"border rounded-lg overflow-x-auto",children:a.jsx("div",{className:"min-w-full",children:a.jsx("div",{className:"space-y-2 p-4",children:t.map((y,w)=>a.jsxs("div",{className:"space-y-2 p-3 border rounded-lg bg-card",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.produto_cadastrado&&y.produto_ciclik?a.jsxs(a.Fragment,{children:[a.jsxs(Bt,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[a.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Produto Cadastrado"]}),a.jsx(Bt,{variant:"secondary",children:Ip[y.produto_ciclik.tipo_embalagem]}),y.produto_ciclik.reciclavel&&a.jsxs(Bt,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[a.jsx(Cs,{className:"h-3 w-3 mr-1"}),y.produto_ciclik.percentual_reciclabilidade,"%"]})]}):y.gtin&&y.gtin.length>=8?a.jsxs(Bt,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[a.jsx(Za,{className:"h-3 w-3 mr-1"}),"Produto No Cadastrado"]}):null}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(nt,{className:"text-xs mb-1 block",children:"GTIN"}),a.jsx(mt,{value:y.gtin||"",onChange:S=>g(w,"gtin",S.target.value),placeholder:"7891234567890",className:"w-full"})]}),a.jsxs("div",{className:"md:col-span-7",children:[a.jsx(nt,{className:"text-xs mb-1 block",children:"Produto"}),a.jsx(mt,{value:y.nome,onChange:S=>g(w,"nome",S.target.value),placeholder:"Nome do produto",className:"w-full",disabled:y.produto_cadastrado})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(nt,{className:"text-xs mb-1 block",children:"Qtd"}),a.jsx(mt,{type:"number",min:"1",value:y.quantidade,onChange:S=>g(w,"quantidade",parseFloat(S.target.value)||1),placeholder:"1",className:"w-full"})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(nt,{className:"text-xs mb-1 block",children:"Recicl."}),a.jsx("div",{className:"flex items-center gap-2 h-10",children:a.jsx(nh,{checked:y.reciclavel,onCheckedChange:S=>g(w,"reciclavel",S),disabled:y.produto_cadastrado})})]}),a.jsx("div",{className:"md:col-span-1 flex items-end",children:a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(w),className:"w-full md:w-auto",children:a.jsx(vl,{className:"h-4 w-4 text-destructive"})})})]}),y.produto_ciclik&&a.jsx("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("span",{children:[a.jsx("strong",{children:"NCM:"})," ",y.produto_ciclik.ncm]}),y.produto_ciclik.observacoes&&a.jsxs("span",{children:[a.jsx("strong",{children:"Obs:"})," ",y.produto_ciclik.observacoes]})]})})]},w))})})})]})}function eSt({isOpen:t,stage:e,itemCount:r=0}){const n=[{id:"scanning",label:"Lendo QR Code",icon:zu,description:"Decodificando informaes..."},{id:"validating",label:"Validando Nota",icon:au,description:"Verificando autenticidade..."},{id:"fetching",label:"Buscando Itens",icon:Yn,description:r>0?`${r} produtos encontrados`:"Carregando produtos..."}],s=(()=>{const o=n.findIndex(l=>l.id===e);return o===-1?0:o})();return a.jsx(Cf,{children:t&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:o=>o.stopPropagation(),children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.5},className:"bg-card border border-border rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block",children:a.jsx(jn,{className:"h-12 w-12 text-primary mx-auto mb-4"})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Processando Nota Fiscal"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aguarde enquanto processamos os dados..."})]}),a.jsx("div",{className:"space-y-4",children:n.map((o,l)=>{const c=l<s,u=l===s,d=o.icon;return a.jsxs(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:`flex items-start gap-4 p-4 rounded-lg transition-all ${u?"bg-primary/10 border-2 border-primary":c?"bg-green-500/10 border border-green-500/30":"bg-muted/30 border border-transparent"}`,children:[a.jsx("div",{className:"flex-shrink-0",children:c?a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:a.jsx(au,{className:"h-5 w-5 text-white"})}):u?a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center",children:a.jsx(d,{className:"h-5 w-5 text-primary-foreground"})}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:a.jsx(d,{className:"h-5 w-5 text-muted-foreground"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:`font-semibold text-sm mb-1 ${u?"text-primary":c?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:o.label}),a.jsx("p",{className:`text-xs ${u?"text-foreground/80":"text-muted-foreground"}`,children:o.description})]}),u&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},className:"flex-shrink-0",children:a.jsx("div",{className:"flex gap-1",children:[0,1,2].map(h=>a.jsx(Ke.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:h*.2},className:"w-1.5 h-1.5 rounded-full bg-primary"},h))})})]},o.id)})}),a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"Este processo pode levar alguns segundos..."})})]})})})}const tSt="https://ciclik-backend.onrender.com";async function rSt(t,e=6e4){if(!t||typeof t!="string")throw new Error("URL do QR Code invlida.");const r=/^https?:\/\//i.test(t)?t:`https://${t}`,n=new AbortController,i=setTimeout(()=>n.abort(),e);try{const s=await fetch(`${tSt}/produtos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qr_url:r}),signal:n.signal});if(!s.ok){const l=await s.text().catch(()=>"");throw new Error(`Falha ao consultar backend (${s.status}): ${l||s.statusText}`)}const o=await s.json();if(!Array.isArray(o))throw new Error("Resposta do backend inesperada (esperado um array).");return o.filter(l=>l&&typeof l=="object").map(l=>({nome:String(l.nome??""),ean:String(l.ean??"")}))}catch(s){throw s instanceof Error&&s.name==="AbortError"?new Error("Tempo excedido ao consultar o backend (60s). A API pode estar em modo sleep no Render."):s}finally{clearTimeout(i)}}function nSt(){const{user:t}=Si(),[e,r]=C.useState(!1),[n,i]=C.useState(!1),[s,o]=C.useState(!1),[l,c]=C.useState("scanning"),[u,d]=C.useState(0),[h,f]=C.useState(null),[m,x]=C.useState(""),[g,y]=C.useState(""),[w,S]=C.useState(""),[E,j]=C.useState(""),[T,O]=C.useState(""),[I,M]=C.useState([]),[D,z]=C.useState("select"),[F,q]=C.useState("automatic"),[Q,re]=C.useState(""),[Z,se]=C.useState(""),[K,X]=C.useState(""),[Y,oe]=C.useState(""),[xe,H]=C.useState(""),[J,ie]=C.useState(!1),[ce,me]=C.useState(!1),[he,_e]=C.useState(null),[ue,je]=C.useState(null),[ye,Le]=C.useState({valorTotal:"",cnpj:"",dataCompra:"",itens:""}),Ge=nn(),{toast:Be}=Qi();C.useEffect(()=>{(async()=>{const{data:{session:ut}}=await Ee.auth.getSession();(!ut||!ut.access_token)&&(Be({title:"Autenticao Necessria",description:"Voc precisa estar logado para enviar notas fiscais.",variant:"destructive"}),Ge("/auth"))})()},[Ge,Be]),C.useEffect(()=>{if(F==="manual"&&I.length>0&&!ce){const Fe=I.reduce((ut,Mt)=>Mt.quantidade&&Mt.valor_unitario?ut+Mt.quantidade*Mt.valor_unitario:ut,0);if(Fe>0){const ut=Fe.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2});y(ut)}}},[I,F,ce]);const Te=Fe=>{const ut=Fe.replace(/\D/g,""),Mt=parseFloat(ut)/100;return isNaN(Mt)?"":Mt.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},ze=Fe=>{const ut=Te(Fe);y(ut),me(!0)},tt=()=>I.reduce((Fe,ut)=>ut.quantidade&&ut.valor_unitario?Fe+ut.quantidade*ut.valor_unitario:Fe,0),Re=Fe=>{const ut=Fe.replace(/\./g,"").replace(",",".");return parseFloat(ut)||0},Ue=Fe=>{const ut=Fe.replace(/\D/g,""),Mt=parseFloat(ut)/100;return isNaN(Mt)?"":Mt.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},xt=async Fe=>{if(!(!Fe||Fe.length<8)){ie(!0);try{const ut=await mS(Fe);if(ut.found&&ut.produto){re(ut.produto.descricao),se(ut.produto.tipo_embalagem),window._tempProductData={produto_ciclik:ut.produto,produto_cadastrado:!0};const Mt=ut.produto.peso_medio_gramas?` | Peso unitrio: ${ut.produto.peso_medio_gramas}g`:"";Be({title:"Produto encontrado!",description:`${ut.produto.descricao}${Mt}`})}}catch(ut){console.error("Erro ao buscar produto:",ut)}finally{ie(!1)}}},st=Fe=>{f(Fe);const ut=new FileReader;ut.onloadend=()=>{x(ut.result)},ut.readAsDataURL(Fe),z("file")},Xt=Fe=>{var Mt;const ut=(Mt=Fe.target.files)==null?void 0:Mt[0];ut&&st(ut)},Jt=Fe=>{const ut=Fe.substring(0,2),Mt=Fe.substring(2,6),Ht=Fe.substring(6,20),Wt=Fe.substring(20,22),zt=Fe.substring(22,25),Rr=Fe.substring(25,34),vr=Ht.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5"),Cr=parseInt(Mt.substring(0,2))+2e3,Pr=Mt.substring(2,4);return{uf:ut,ano:Cr,mes:Pr,cnpj:vr,modelo:Wt,serie:zt,numeroNota:Rr.replace(/^0+/,""),chaveAcesso:Fe}},_r=async(Fe,ut)=>{try{i(!0);const{data:Mt,error:Ht}=await Ee.functions.invoke("consultar-sefaz",{body:{chaveAcesso:Fe,uf:ut}});if(Ht)throw Ht;if(Mt.success&&Mt.data){const Wt=Mt.data;if(Wt.numero&&O(Wt.numero),Wt.cnpj&&S(Wt.cnpj),Wt.dataEmissao&&j(Wt.dataEmissao),Wt.valorTotal&&Wt.valorTotal>0&&y(Wt.valorTotal.toString()),Wt.itens&&Wt.itens.length>0){const zt=await Promise.all(Wt.itens.map(async Rr=>{if(Rr.gtin){const vr=await mS(Rr.gtin);if(vr.found&&vr.produto){const Cr=Rr.quantidade||1,Pr=vr.produto.peso_medio_gramas||null,Qr=Cr&&Pr?Cr*Pr:null;return{...Rr,nome:vr.produto.descricao,reciclavel:vr.produto.reciclavel,tipo_embalagem:vr.produto.tipo_embalagem,peso_unitario_gramas:Pr,peso_total_estimado_gramas:Qr,produto_cadastrado:!0,produto_ciclik:vr.produto}}}return{...Rr,nome:Rr.descricao,produto_cadastrado:!1,reciclavel:!0,tipo_embalagem:"misto"}}));M(zt)}}}catch(Mt){console.error("Erro ao consultar SEFAZ:",Mt),Be({title:"Consulta SEFAZ indisponvel",description:"No foi possvel consultar a SEFAZ no momento. Os dados bsicos foram extrados da chave de acesso.",variant:"destructive"})}finally{i(!1)}},lt=async Fe=>{o(!0),c("scanning");const{data:{session:ut},error:Mt}=await Ee.auth.getSession();if(!ut||!ut.access_token){Be({title:"Sesso Expirada",description:"Sua sesso expirou. Por favor, faa login novamente.",variant:"destructive"}),z("select"),o(!1),Ge("/auth");return}try{c("validating");const{data:Ht,error:Wt}=await Ee.functions.invoke("processar-codigo-nota",{body:{codigo:Fe,origem_leitura:D==="barcode"?"barcode":"qrcode"}});if(Wt){console.error("[UploadReceipt] Erro ao processar cdigo:",Wt),Be({title:"Erro ao Processar Cdigo",description:"No foi possvel processar o cdigo. Tente novamente.",variant:"destructive"}),z("select"),o(!1);return}if(!Ht.valida){Be({title:"Cdigo Invlido",description:Ht.motivo_invalidez,variant:"destructive"}),z("select"),o(!1);return}if(Ht.modelo!=="65"&&Ht.modelo!=="59"){Be({title:"Modelo no suportado",description:`Este sistema s aceita notas fiscais modelo 65 (NFC-e) ou 59 (CF-e-SAT). Modelo detectado: ${Ht.modelo}`,variant:"destructive"}),z("select"),o(!1);return}c("fetching");const zt=Ht.chave_acesso,Rr=Jt(zt);if(!Rr)throw new Error("No foi possvel extrair dados da chave de acesso");S(Rr.cnpj),O(Rr.numeroNota);const vr=`${Rr.ano}-${Rr.mes}-01`;j(vr),Be({title:"Chave de Acesso Lida!",description:`Nota Fiscal Modelo ${Ht.modelo} detectada. Buscando itens...`,variant:"default"}),z("select");try{const Cr=await rSt(Fe,6e4);if(Cr&&Cr.length>0){const Pr=await Promise.all(Cr.map(async Qr=>{if(Qr.ean&&Qr.ean.length>0){const Tr=await mS(Qr.ean);if(Tr.found&&Tr.produto){const Gr=Tr.produto.peso_medio_gramas||0,ln=Gr*1;return{nome:Qr.nome||Tr.produto.descricao,gtin:Qr.ean,quantidade:1,valor_unitario:0,reciclavel:Tr.produto.reciclavel,tipo_embalagem:Tr.produto.tipo_embalagem,peso_unitario_gramas:Gr,peso_total_estimado_gramas:ln,produto_cadastrado:!0,produto_ciclik:Tr.produto}}}return{nome:Qr.nome,gtin:Qr.ean,quantidade:1,valor_unitario:0,produto_cadastrado:!1,reciclavel:!0,tipo_embalagem:"misto"}}));M(Pr)}else Be({title:"Ateno",description:"No foi possvel buscar os itens. Verifique e corrija os dados manualmente.",variant:"default"})}catch(Cr){console.error("[UploadReceipt] Erro ao buscar itens:",Cr),Be({title:"Itens no disponveis",description:"No foi possvel buscar os itens automaticamente. Adicione manualmente.",variant:"default"})}_r(zt,Rr.uf).catch(Cr=>{})}catch(Ht){console.error("[UploadReceipt] Erro ao processar chave de acesso:",Ht),Be({title:"Erro ao processar chave",description:Ht instanceof Error?Ht.message:"Tente novamente ou insira os dados manualmente.",variant:"destructive"}),z("select")}finally{o(!1)}},pt=async()=>{if(!h){Be({title:"Erro",description:"Selecione uma imagem primeiro",variant:"destructive"});return}i(!0);try{const{data:Fe,error:ut}=await Ee.functions.invoke("ocr-nota-fiscal",{body:{imageBase64:m}});if(ut)throw ut;if(Fe.success){const Mt=Fe.data;if(Mt.valor_total){const Ht=Mt.valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2});y(Ht)}if(Mt.cnpj_estabelecimento&&S(Mt.cnpj_estabelecimento),Mt.data_compra&&j(Mt.data_compra),Mt.numero_nota&&O(Mt.numero_nota),Mt.itens&&Mt.itens.length>0){const Ht=await Promise.all(Mt.itens.map(async Wt=>{if(Wt.gtin){const zt=await mS(Wt.gtin);if(zt.found&&zt.produto){const Rr=Wt.quantidade||1,vr=zt.produto.peso_medio_gramas||null,Cr=Rr&&vr?Rr*vr:null;return{...Wt,nome:zt.produto.descricao,reciclavel:zt.produto.reciclavel,peso_unitario_gramas:vr,peso_total_estimado_gramas:Cr,produto_cadastrado:!0,produto_ciclik:zt.produto}}}return{...Wt,produto_cadastrado:!1}}));M(Ht)}Be({title:"OCR Concludo!",description:"Dados extrados da nota fiscal com sucesso"})}else throw new Error(Fe.error||"Erro ao processar OCR")}catch(Fe){console.error("OCR error:",Fe),Be({title:"Erro no OCR",description:Fe instanceof Error?Fe.message:"Erro ao processar imagem",variant:"destructive"})}finally{i(!1)}},er=()=>{if(!Q.trim()||!Z){Be({title:"Erro",description:"Preencha a descrio e o tipo do material",variant:"destructive"});return}const Fe=window._tempProductData,ut=Fe==null?void 0:Fe.produto_ciclik,Mt=Y&&parseInt(Y,10)||null,Ht=(ut==null?void 0:ut.peso_medio_gramas)||null,Wt=Mt&&Ht?Mt*Ht:null,zt={nome:Q,descricao:Q,tipo_embalagem:Z,gtin:K||null,quantidade:Mt,valor_unitario:xe?Re(xe):null,peso_unitario_gramas:Ht,peso_total_estimado_gramas:Wt,reciclavel:!0,produto_cadastrado:(Fe==null?void 0:Fe.produto_cadastrado)||!1,produto_ciclik:ut,origem_manual:!0};M([...I,zt]),re(""),se(""),X(""),oe(""),H(""),delete window._tempProductData;const Rr=Wt?` | Peso estimado: ${Wt.toLocaleString("pt-BR")}g`:"";Be({title:"Item adicionado!",description:`Material adicionado  lista${Rr}`})},Vt=Fe=>{M(I.filter((ut,Mt)=>Mt!==Fe))},Kt=Fe=>{_e(Fe),je({...I[Fe]})},ur=()=>{_e(null),je(null)},rt=()=>{if(!ue.descricao&&!ue.nome){Be({title:"Erro",description:"A descrio do material no pode estar vazia",variant:"destructive"});return}if(!ue.tipo_embalagem){Be({title:"Erro",description:"Selecione o tipo de embalagem",variant:"destructive"});return}const Fe=[...I];Fe[he]=ue,M(Fe),_e(null),je(null),Be({title:"Material atualizado!",description:"As alteraes foram salvas"})},Lt=()=>{const Fe={valorTotal:"",cnpj:"",dataCompra:"",itens:""};let ut=!1;return(!g||Re(g)===0)&&(Fe.valorTotal="Valor total  obrigatrio",ut=!0),E||(Fe.dataCompra="Data da compra  obrigatria",ut=!0),I.length===0&&(Fe.itens="Adicione pelo menos um material reciclvel",ut=!0),Le(Fe),ut&&Be({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios antes de enviar",variant:"destructive"}),!ut},Dt=async()=>{if(t){if(F==="manual"){if(!Lt())return}else if(I.length===0){Be({title:"Erro",description:"Escaneie um QR Code ou adicione itens primeiro",variant:"destructive"});return}Le({valorTotal:"",cnpj:"",dataCompra:"",itens:""}),r(!0);try{const Fe=I.filter(zt=>!zt.produto_cadastrado).length,{data:ut,error:Mt}=await Ee.from("notas_fiscais").insert({id_usuario:t.id,imagem_nf:m||"manual-entry",valor_total:g?Re(g):null,cnpj_estabelecimento:w||null,data_compra:E||null,numero_nota:T||null,itens:I.length>0?I:null,itens_enriquecidos:I.length>0?I:null,produtos_nao_cadastrados:Fe,status_validacao:"pendente"}).select().single();if(Mt)throw Mt;const Ht=I.filter(zt=>zt.reciclavel!==!1).map(zt=>{var Pr,Qr,Tr,Gr;const Rr=zt.quantidade||1,vr=zt.peso_unitario_gramas||((Pr=zt.produto_ciclik)==null?void 0:Pr.peso_medio_gramas)||null,Cr=zt.peso_total_estimado_gramas||(Rr&&vr?Rr*vr:null);return{id_usuario:t.id,id_nota_fiscal:ut.id,gtin:zt.gtin||null,descricao:zt.nome||zt.descricao,tipo_embalagem:zt.tipo_embalagem||((Qr=zt.produto_ciclik)==null?void 0:Qr.tipo_embalagem),reciclavel:zt.reciclavel??((Tr=zt.produto_ciclik)==null?void 0:Tr.reciclavel)??!0,percentual_reciclabilidade:zt.percentual_reciclabilidade||((Gr=zt.produto_ciclik)==null?void 0:Gr.percentual_reciclabilidade)||0,quantidade:Rr,peso_unitario_gramas:vr,peso_total_estimado_gramas:Cr,origem_cadastro:F==="manual"?"manual":"nota_fiscal"}});if(Ht.length>0){const{error:zt}=await Ee.from("materiais_reciclaveis_usuario").insert(Ht);zt&&console.error("Erro ao criar materiais reciclveis:",zt)}const Wt=I.filter(zt=>zt.produto_cadastrado&&zt.gtin).map(zt=>{var Rr,vr,Cr;return{gtin:zt.gtin,nome_produto:zt.nome||zt.descricao,id_produto:((Rr=zt.produto_ciclik)==null?void 0:Rr.id)||null,tipo_embalagem:zt.tipo_embalagem||((vr=zt.produto_ciclik)==null?void 0:vr.tipo_embalagem)||null,reciclabilidade:zt.percentual_reciclabilidade||((Cr=zt.produto_ciclik)==null?void 0:Cr.percentual_reciclabilidade)||0,data:new Date().toISOString(),status:"disponivel"}});if(Wt.length>0){const{error:zt}=await Ee.from("estoque_embalagens").insert(Wt);zt&&console.error("Erro ao inserir embalagens no estoque CDV:",zt)}Be({title:"Nota fiscal enviada!",description:`Sua nota fiscal est em anlise. ${Ht.length} materiais reciclveis cadastrados!`}),Ge("/user")}catch(Fe){Be({title:"Erro no upload",description:Fe.message,variant:"destructive"})}finally{r(!1)}}};return a.jsxs("div",{className:"min-h-screen bg-background p-4 md:p-8",children:[a.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>Ge("/user"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Enviar Nota Fiscal"}),a.jsx("p",{className:"text-muted-foreground",children:"Registre suas compras sustentveis"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Registrar Nota Fiscal"}),a.jsx(gr,{children:"Escolha entre entrada automtica (com foto e OCR) ou manual"})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs(yc,{value:"automatic",onValueChange:Fe=>q(Fe),children:[a.jsx(Jl,{className:"grid w-full grid-cols-1",children:a.jsx(ri,{value:"automatic",children:"Escanear QR Code da Nota Fiscal"})}),a.jsxs(Ti,{value:"automatic",className:"space-y-6 mt-6",children:[D==="select"&&!h&&a.jsx("div",{className:"grid grid-cols-1 gap-4 max-w-md mx-auto",children:a.jsxs(Oe,{variant:"outline",className:"h-32 flex flex-col gap-2",onClick:()=>z("qrcode"),children:[a.jsx(zu,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm",children:"Escanear QR Code"})]})}),D==="file"&&!h&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(nt,{htmlFor:"receipt",children:"Selecione a imagem"}),a.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",children:[a.jsx(mt,{id:"receipt",type:"file",accept:"image/*",onChange:Xt,className:"hidden"}),a.jsx("label",{htmlFor:"receipt",className:"cursor-pointer",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(x3,{className:"h-12 w-12 mx-auto text-muted-foreground"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Clique para selecionar uma imagem"})]})})]}),a.jsx(Oe,{variant:"outline",onClick:()=>z("select"),className:"w-full",children:"Voltar"})]}),D==="camera"&&!h&&a.jsx(NNt,{onCapture:st,onCancel:()=>z("select")}),D==="barcode"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(rue,{mode:"barcode",onScan:lt,onCancel:()=>z("select")}),s&&a.jsxs("div",{className:"flex items-center justify-center p-4 bg-primary/10 rounded-lg",children:[a.jsx(jn,{className:"h-5 w-5 animate-spin mr-2"}),a.jsx("span",{className:"text-sm",children:"Processando cdigo..."})]})]}),D==="qrcode"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(rue,{mode:"qrcode",onScan:lt,onCancel:()=>z("select")}),s&&a.jsxs("div",{className:"flex items-center justify-center p-4 bg-primary/10 rounded-lg",children:[a.jsx(jn,{className:"h-5 w-5 animate-spin mr-2"}),a.jsx("span",{className:"text-sm",children:"Processando QR Code..."})]})]}),h&&m&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:m,alt:"Preview",className:"w-full rounded-lg border"}),a.jsx(Oe,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{f(null),x(""),z("select")},children:a.jsx(Xa,{className:"h-4 w-4"})})]}),a.jsx(Oe,{onClick:pt,disabled:n,className:"w-full",children:n?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx($b,{className:"mr-2 h-4 w-4"}),"Extrair Dados com OCR"]})})]}),I.length>0&&a.jsxs("div",{children:[a.jsx(nt,{className:"mb-2 block",children:"Produtos Identificados"}),a.jsx(JNt,{items:I,onChange:M,numeroNota:T,onNumeroNotaChange:O,cnpj:w,onCnpjChange:S,dataCompra:E,onDataCompraChange:j})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"cnpj",children:"CNPJ do Estabelecimento"}),a.jsx(mt,{id:"cnpj",placeholder:"00.000.000/0000-00",value:w,onChange:Fe=>S(Fe.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"data",children:"Data da Compra"}),a.jsx(mt,{id:"data",type:"date",value:E,onChange:Fe=>j(Fe.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"numero",children:"Nmero da Nota"}),a.jsx(mt,{id:"numero",placeholder:"123456",value:T,onChange:Fe=>O(Fe.target.value)})]})]})]}),a.jsxs(Ti,{value:"manual",className:"space-y-6 mt-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"valor-manual",className:"flex items-center gap-1",children:["Valor Total (R$)",a.jsx("span",{className:"text-destructive",children:"*"}),!ce&&tt()>0&&a.jsxs("span",{className:"text-xs text-muted-foreground font-normal ml-2 flex items-center gap-1",children:[a.jsx(mRe,{className:"h-3 w-3"}),"(calculado automaticamente)"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{id:"valor-manual",placeholder:"0,00",value:g,onChange:Fe=>{ze(Fe.target.value),ye.valorTotal&&Le({...ye,valorTotal:""})},className:ye.valorTotal?"border-destructive":""}),ce&&a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 text-xs",onClick:()=>{me(!1),y("")},children:"Recalcular"})]}),ye.valorTotal&&a.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[a.jsx(Za,{className:"h-3 w-3"}),ye.valorTotal]}),!ce&&tt()>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Soma dos itens: R$ ",tt().toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"cnpj-manual",children:["CNPJ do Estabelecimento",a.jsx("span",{className:"text-muted-foreground text-xs ml-1",children:"(opcional)"})]}),a.jsx(mt,{id:"cnpj-manual",placeholder:"00.000.000/0000-00",value:w,onChange:Fe=>S(Fe.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"data-manual",className:"flex items-center gap-1",children:["Data da Compra",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(mt,{id:"data-manual",type:"date",value:E,onChange:Fe=>{j(Fe.target.value),ye.dataCompra&&Le({...ye,dataCompra:""})},className:ye.dataCompra?"border-destructive":""}),ye.dataCompra&&a.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[a.jsx(Za,{className:"h-3 w-3"}),ye.dataCompra]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"numero-manual",children:["Nmero da Nota",a.jsx("span",{className:"text-muted-foreground text-xs ml-1",children:"(opcional)"})]}),a.jsx(mt,{id:"numero-manual",placeholder:"123456",value:T,onChange:Fe=>O(Fe.target.value)})]})]}),a.jsxs("div",{className:`border rounded-lg p-4 space-y-4 bg-muted/50 ${ye.itens?"border-destructive":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(ya,{className:"h-4 w-4"}),"Adicionar Materiais Reciclveis",a.jsx("span",{className:"text-destructive",children:"*"})]}),ye.itens&&a.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[a.jsx(Za,{className:"h-3 w-3"}),ye.itens]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsxs(nt,{htmlFor:"item-gtin",children:["GTIN / Cdigo de Barras",a.jsx("span",{className:"text-muted-foreground text-xs ml-1",children:"(opcional)"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{id:"item-gtin",placeholder:"7891234567890",value:K,onChange:Fe=>X(Fe.target.value),onBlur:()=>xt(K),disabled:J}),J&&a.jsx("div",{className:"flex items-center",children:a.jsx(jn,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),J&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"Buscando produto..."})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(nt,{htmlFor:"item-descricao",children:"Descrio do Material"}),a.jsx(mt,{id:"item-descricao",placeholder:"Ex: Garrafa PET 2L",value:Q,onChange:Fe=>re(Fe.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"item-tipo",children:"Tipo de Embalagem"}),a.jsxs(wi,{value:Z,onValueChange:se,children:[a.jsx(gi,{id:"item-tipo",children:a.jsx(_i,{placeholder:"Selecione"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"plastico",children:"Plstico"}),a.jsx(or,{value:"papel",children:"Papel"}),a.jsx(or,{value:"papelao",children:"Papelo"}),a.jsx(or,{value:"vidro",children:"Vidro"}),a.jsx(or,{value:"aluminio",children:"Alumnio"}),a.jsx(or,{value:"laminado",children:"Laminado"}),a.jsx(or,{value:"misto",children:"Misto"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"item-quantidade",children:["Quantidade",a.jsx("span",{className:"text-muted-foreground text-xs ml-1",children:"(unidades, opcional)"})]}),a.jsx(mt,{id:"item-quantidade",type:"number",min:"0",step:"1",placeholder:"0",value:Y,onChange:Fe=>oe(Fe.target.value)})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsxs(nt,{htmlFor:"item-valor",children:["Valor Unitrio (R$)",a.jsx("span",{className:"text-muted-foreground text-xs ml-1",children:"(opcional)"})]}),a.jsx(mt,{id:"item-valor",placeholder:"0,00",value:xe,onChange:Fe=>H(Ue(Fe.target.value))})]})]})}),a.jsxs(Oe,{type:"button",onClick:()=>{er(),ye.itens&&Le({...ye,itens:""})},className:"w-full",variant:"outline",children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Adicionar  Lista"]})]}),I.length===0&&ye.itens&&a.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-destructive flex items-center gap-2",children:[a.jsx(Za,{className:"h-4 w-4"})," necessrio adicionar pelo menos um material para registrar a nota fiscal"]})}),I.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(nt,{children:["Materiais Adicionados (",I.length,")"]}),a.jsx("div",{className:"flex flex-col items-end gap-1",children:(()=>{const Fe=I.reduce((ut,Mt)=>ut+(Mt.peso_total_estimado_gramas||0),0);return Fe>0?a.jsxs("span",{className:"text-sm font-medium text-primary",children:["Peso estimado: ",Fe.toLocaleString("pt-BR"),"g (",(Fe/1e3).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),"kg)"]}):null})()})]}),a.jsx("div",{className:"space-y-2",children:I.map((Fe,ut)=>{var Mt;return a.jsx("div",{className:"border rounded-lg bg-card",children:he===ut?a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[a.jsx(sre,{className:"h-4 w-4"}),"Editando Material"]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:`edit-gtin-${ut}`,className:"text-xs",children:["GTIN (Cdigo de Barras)",a.jsx("span",{className:"text-muted-foreground text-xs ml-1",children:"(opcional)"})]}),a.jsx(mt,{id:`edit-gtin-${ut}`,placeholder:"7891234567890",value:ue.gtin||"",onChange:Ht=>je({...ue,gtin:Ht.target.value}),onBlur:async()=>{if(ue.gtin&&ue.gtin.length>=8){ie(!0);try{const Ht=await mS(ue.gtin);Ht.found&&Ht.produto&&(je({...ue,descricao:Ht.produto.descricao,nome:Ht.produto.descricao,tipo_embalagem:Ht.produto.tipo_embalagem}),Be({title:"Produto encontrado!",description:"Os campos foram atualizados automaticamente."}))}finally{ie(!1)}}}})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:`edit-desc-${ut}`,className:"text-xs",children:"Descrio do Material"}),a.jsx(mt,{id:`edit-desc-${ut}`,placeholder:"Ex: Garrafa PET 2L",value:ue.descricao||ue.nome||"",onChange:Ht=>je({...ue,descricao:Ht.target.value,nome:Ht.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:`edit-tipo-${ut}`,className:"text-xs",children:"Tipo de Embalagem"}),a.jsxs(wi,{value:ue.tipo_embalagem||"",onValueChange:Ht=>je({...ue,tipo_embalagem:Ht}),children:[a.jsx(gi,{id:`edit-tipo-${ut}`,children:a.jsx(_i,{placeholder:"Selecione"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"plastico",children:"Plstico"}),a.jsx(or,{value:"papel",children:"Papel"}),a.jsx(or,{value:"papelao",children:"Papelo"}),a.jsx(or,{value:"vidro",children:"Vidro"}),a.jsx(or,{value:"aluminio",children:"Alumnio"}),a.jsx(or,{value:"laminado",children:"Laminado"}),a.jsx(or,{value:"misto",children:"Misto"})]})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:`edit-qtd-${ut}`,className:"text-xs",children:"Quantidade"}),a.jsx(mt,{id:`edit-qtd-${ut}`,type:"number",min:"0",step:"1",placeholder:"0",value:ue.quantidade||"",onChange:Ht=>je({...ue,quantidade:parseInt(Ht.target.value,10)||0})})]})})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(Oe,{type:"button",onClick:rt,className:"flex-1",size:"sm",children:[a.jsx(xl,{className:"h-4 w-4 mr-1"}),"Salvar"]}),a.jsxs(Oe,{type:"button",variant:"outline",onClick:ur,className:"flex-1",size:"sm",children:[a.jsx(Xa,{className:"h-4 w-4 mr-1"}),"Cancelar"]})]})]}):a.jsxs("div",{className:"flex items-center justify-between p-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:Fe.nome||Fe.descricao}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(Mt=Fe.tipo_embalagem)==null?void 0:Mt.replace("_"," ")}),Fe.gtin&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[" GTIN: ",Fe.gtin]}),Fe.quantidade&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[" Qtd: ",Fe.quantidade.toLocaleString("pt-BR")]}),Fe.peso_total_estimado_gramas&&a.jsxs("span",{className:"text-xs font-medium text-primary",children:[" Peso: ",Fe.peso_total_estimado_gramas.toLocaleString("pt-BR"),"g"]}),Fe.produto_cadastrado&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Cadastrado"})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(Oe,{type:"button",variant:"ghost",size:"icon",onClick:()=>Kt(ut),disabled:he!==null,children:a.jsx(sre,{className:"h-4 w-4 text-primary"})}),a.jsx(Oe,{type:"button",variant:"ghost",size:"icon",onClick:()=>Vt(ut),disabled:he!==null,children:a.jsx(vl,{className:"h-4 w-4 text-destructive"})})]})]})},ut)})})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[F==="manual"&&a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 rounded-lg p-3",children:[a.jsx("p",{className:"font-medium mb-1",children:"Campos obrigatrios:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Escanear QR Code da Nota Fiscal"}),a.jsx("li",{children:"Data da Compra"}),a.jsx("li",{children:"Pelo menos um Material Reciclvel"})]})]}),a.jsx(Oe,{onClick:Dt,disabled:e||I.length===0,className:"w-full",size:"lg",children:e?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(x3,{className:"mr-2 h-4 w-4"}),"Enviar Nota Fiscal"]})})]})]})]})]}),a.jsx(eSt,{isOpen:s,stage:l,itemCount:u})]})}var Dg={},iSt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},uSe={},Ff={};let zQ;const sSt=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ff.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ff.getSymbolTotalCodewords=function(e){return sSt[e]};Ff.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Ff.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');zQ=e};Ff.isKanjiModeEnabled=function(){return typeof zQ<"u"};Ff.toSJIS=function(e){return zQ(e)};var fB={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(fB);function dSe(){this.buffer=[],this.length=0}dSe.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var aSt=dSe;function EI(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}EI.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};EI.prototype.get=function(t,e){return this.data[t*this.size+e]};EI.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};EI.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var oSt=EI,hSe={};(function(t){const e=Ff.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,l=[s-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([s[l],s[c]]);return i}})(hSe);var fSe={};const lSt=Ff.getSymbolSize,nue=7;fSe.getPositions=function(e){const r=lSt(e);return[[0,0],[r-nue,0],[0,r-nue]]};var mSe={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,l=0,c=0,u=null,d=null;for(let h=0;h<s;h++){l=c=0,u=d=null;for(let f=0;f<s;f++){let m=i.get(h,f);m===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=m,l=1),m=i.get(f,h),m===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=m,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let l=0;l<s-1;l++)for(let c=0;c<s-1;c++){const u=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,l=0,c=0;for(let u=0;u<s;u++){l=c=0;for(let d=0;d<s;d++)l=l<<1&2047|i.get(u,d),d>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)s.isReserved(c,l)||s.xor(c,l,r(i,c,l))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,l=u)}return l}})(mSe);var mB={};const $y=fB,dD=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],hD=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];mB.getBlocksCount=function(e,r){switch(r){case $y.L:return dD[(e-1)*4+0];case $y.M:return dD[(e-1)*4+1];case $y.Q:return dD[(e-1)*4+2];case $y.H:return dD[(e-1)*4+3];default:return}};mB.getTotalCodewordsCount=function(e,r){switch(r){case $y.L:return hD[(e-1)*4+0];case $y.M:return hD[(e-1)*4+1];case $y.Q:return hD[(e-1)*4+2];case $y.H:return hD[(e-1)*4+3];default:return}};var pSe={},pB={};const M4=new Uint8Array(512),vL=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)M4[r]=e,vL[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)M4[r]=M4[r-255]})();pB.log=function(e){if(e<1)throw new Error("log("+e+")");return vL[e]};pB.exp=function(e){return M4[e]};pB.mul=function(e,r){return e===0||r===0?0:M4[vL[e]+vL[r]]};(function(t){const e=pB;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)s[o+l]^=e.mul(n[o],i[l]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(pSe);const gSe=pSe;function VQ(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}VQ.prototype.initialize=function(e){this.degree=e,this.genPoly=gSe.generateECPolynomial(this.degree)};VQ.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=gSe.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var cSt=VQ,xSe={},Qb={},qQ={};qQ.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var zg={};const vSe="[0-9]+",uSt="[A-Z $%*+\\-./:]+";let kP="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kP=kP.replace(/u/g,"\\u");const dSt="(?:(?![A-Z0-9 $%*+\\-./:]|"+kP+`)(?:.|[\r
]))+`;zg.KANJI=new RegExp(kP,"g");zg.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");zg.BYTE=new RegExp(dSt,"g");zg.NUMERIC=new RegExp(vSe,"g");zg.ALPHANUMERIC=new RegExp(uSt,"g");const hSt=new RegExp("^"+kP+"$"),fSt=new RegExp("^"+vSe+"$"),mSt=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");zg.testKanji=function(e){return hSt.test(e)};zg.testNumeric=function(e){return fSt.test(e)};zg.testAlphanumeric=function(e){return mSt.test(e)};(function(t){const e=qQ,r=zg;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}})(Qb);(function(t){const e=Ff,r=mB,n=fB,i=Qb,s=qQ,o=7973,l=e.getBCHDigit(o);function c(f,m,x){for(let g=1;g<=40;g++)if(m<=t.getCapacity(g,x,f))return g}function u(f,m){return i.getCharCountIndicator(f,m)+4}function d(f,m){let x=0;return f.forEach(function(g){const y=u(g.mode,m);x+=y+g.getBitsLength()}),x}function h(f,m){for(let x=1;x<=40;x++)if(d(f,x)<=t.getCapacity(x,m,i.MIXED))return x}t.from=function(m,x){return s.isValid(m)?parseInt(m,10):x},t.getCapacity=function(m,x,g){if(!s.isValid(m))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=i.BYTE);const y=e.getSymbolTotalCodewords(m),w=r.getTotalCodewordsCount(m,x),S=(y-w)*8;if(g===i.MIXED)return S;const E=S-u(g,m);switch(g){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(m,x){let g;const y=n.from(x,n.M);if(Array.isArray(m)){if(m.length>1)return h(m,y);if(m.length===0)return 1;g=m[0]}else g=m;return c(g.mode,g.getLength(),y)},t.getEncodedBits=function(m){if(!s.isValid(m)||m<7)throw new Error("Invalid QR Code version");let x=m<<12;for(;e.getBCHDigit(x)-l>=0;)x^=o<<e.getBCHDigit(x)-l;return m<<12|x}})(xSe);var ySe={};const wW=Ff,bSe=1335,pSt=21522,iue=wW.getBCHDigit(bSe);ySe.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;wW.getBCHDigit(i)-iue>=0;)i^=bSe<<wW.getBCHDigit(i)-iue;return(n<<10|i)^pSt};var wSe={};const gSt=Qb;function gC(t){this.mode=gSt.NUMERIC,this.data=t.toString()}gC.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};gC.prototype.getLength=function(){return this.data.length};gC.prototype.getBitsLength=function(){return gC.getBitsLength(this.data.length)};gC.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var xSt=gC;const vSt=Qb,cU=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function xC(t){this.mode=vSt.ALPHANUMERIC,this.data=t}xC.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};xC.prototype.getLength=function(){return this.data.length};xC.prototype.getBitsLength=function(){return xC.getBitsLength(this.data.length)};xC.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=cU.indexOf(this.data[r])*45;n+=cU.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(cU.indexOf(this.data[r]),6)};var ySt=xC;const bSt=Qb;function vC(t){this.mode=bSt.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}vC.getBitsLength=function(e){return e*8};vC.prototype.getLength=function(){return this.data.length};vC.prototype.getBitsLength=function(){return vC.getBitsLength(this.data.length)};vC.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var wSt=vC;const _St=Qb,NSt=Ff;function yC(t){this.mode=_St.KANJI,this.data=t}yC.getBitsLength=function(e){return e*13};yC.prototype.getLength=function(){return this.data.length};yC.prototype.getBitsLength=function(){return yC.getBitsLength(this.data.length)};yC.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=NSt.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var SSt=yC,_Se={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,u,d,h,f,m,x,g,y;!l.empty();){c=l.pop(),u=c.value,h=c.cost,f=r[u]||{};for(d in f)f.hasOwnProperty(d)&&(m=f[d],x=h+m,g=o[d],y=typeof o[d]>"u",(y||g>x)&&(o[d]=x,l.push(d,x),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var w=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(w)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(_Se);var ESt=_Se.exports;(function(t){const e=Qb,r=xSt,n=ySt,i=wSt,s=SSt,o=zg,l=Ff,c=ESt;function u(w){return unescape(encodeURIComponent(w)).length}function d(w,S,E){const j=[];let T;for(;(T=w.exec(E))!==null;)j.push({data:T[0],index:T.index,mode:S,length:T[0].length});return j}function h(w){const S=d(o.NUMERIC,e.NUMERIC,w),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,w);let j,T;return l.isKanjiModeEnabled()?(j=d(o.BYTE,e.BYTE,w),T=d(o.KANJI,e.KANJI,w)):(j=d(o.BYTE_KANJI,e.BYTE,w),T=[]),S.concat(E,j,T).sort(function(I,M){return I.index-M.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function f(w,S){switch(S){case e.NUMERIC:return r.getBitsLength(w);case e.ALPHANUMERIC:return n.getBitsLength(w);case e.KANJI:return s.getBitsLength(w);case e.BYTE:return i.getBitsLength(w)}}function m(w){return w.reduce(function(S,E){const j=S.length-1>=0?S[S.length-1]:null;return j&&j.mode===E.mode?(S[S.length-1].data+=E.data,S):(S.push(E),S)},[])}function x(w){const S=[];for(let E=0;E<w.length;E++){const j=w[E];switch(j.mode){case e.NUMERIC:S.push([j,{data:j.data,mode:e.ALPHANUMERIC,length:j.length},{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.ALPHANUMERIC:S.push([j,{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.KANJI:S.push([j,{data:j.data,mode:e.BYTE,length:u(j.data)}]);break;case e.BYTE:S.push([{data:j.data,mode:e.BYTE,length:u(j.data)}])}}return S}function g(w,S){const E={},j={start:{}};let T=["start"];for(let O=0;O<w.length;O++){const I=w[O],M=[];for(let D=0;D<I.length;D++){const z=I[D],F=""+O+D;M.push(F),E[F]={node:z,lastCount:0},j[F]={};for(let q=0;q<T.length;q++){const Q=T[q];E[Q]&&E[Q].node.mode===z.mode?(j[Q][F]=f(E[Q].lastCount+z.length,z.mode)-f(E[Q].lastCount,z.mode),E[Q].lastCount+=z.length):(E[Q]&&(E[Q].lastCount=z.length),j[Q][F]=f(z.length,z.mode)+4+e.getCharCountIndicator(z.mode,S))}}T=M}for(let O=0;O<T.length;O++)j[T[O]].end=0;return{map:j,table:E}}function y(w,S){let E;const j=e.getBestModeForData(w);if(E=e.from(S,j),E!==e.BYTE&&E.bit<j.bit)throw new Error('"'+w+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(j));switch(E===e.KANJI&&!l.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(w);case e.ALPHANUMERIC:return new n(w);case e.KANJI:return new s(w);case e.BYTE:return new i(w)}}t.fromArray=function(S){return S.reduce(function(E,j){return typeof j=="string"?E.push(y(j,null)):j.data&&E.push(y(j.data,j.mode)),E},[])},t.fromString=function(S,E){const j=h(S,l.isKanjiModeEnabled()),T=x(j),O=g(T,E),I=c.find_path(O.map,"start","end"),M=[];for(let D=1;D<I.length-1;D++)M.push(O.table[I[D]].node);return t.fromArray(m(M))},t.rawSplit=function(S){return t.fromArray(h(S,l.isKanjiModeEnabled()))}})(wSe);const gB=Ff,uU=fB,jSt=aSt,ASt=oSt,CSt=hSe,TSt=fSe,_W=mSe,NW=mB,PSt=cSt,yL=xSe,kSt=ySe,OSt=Qb,dU=wSe;function ISt(t,e){const r=t.size,n=TSt.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let l=-1;l<=7;l++)if(!(s+l<=-1||r<=s+l))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(s+l,o+c,!0,!0):t.set(s+l,o+c,!1,!0))}}function RSt(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function DSt(t,e){const r=CSt.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(i+o,s+l,!0,!0):t.set(i+o,s+l,!1,!0)}}function MSt(t,e){const r=t.size,n=yL.getEncodedBits(e);let i,s,o;for(let l=0;l<18;l++)i=Math.floor(l/3),s=l%3+r-8-3,o=(n>>l&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function hU(t,e,r){const n=t.size,i=kSt.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function LSt(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,l-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,l-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function FSt(t,e,r){const n=new jSt;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),OSt.getCharCountIndicator(c.mode,t)),c.write(n)});const i=gB.getSymbolTotalCodewords(t),s=NW.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return BSt(n,t,e)}function BSt(t,e,r){const n=gB.getSymbolTotalCodewords(e),i=NW.getTotalCodewordsCount(e,r),s=n-i,o=NW.getBlocksCount(e,r),l=n%o,c=o-l,u=Math.floor(n/o),d=Math.floor(s/o),h=d+1,f=u-d,m=new PSt(f);let x=0;const g=new Array(o),y=new Array(o);let w=0;const S=new Uint8Array(t.buffer);for(let I=0;I<o;I++){const M=I<c?d:h;g[I]=S.slice(x,x+M),y[I]=m.encode(g[I]),x+=M,w=Math.max(w,M)}const E=new Uint8Array(n);let j=0,T,O;for(T=0;T<w;T++)for(O=0;O<o;O++)T<g[O].length&&(E[j++]=g[O][T]);for(T=0;T<f;T++)for(O=0;O<o;O++)E[j++]=y[O][T];return E}function $St(t,e,r,n){let i;if(Array.isArray(t))i=dU.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=dU.rawSplit(t);u=yL.getBestVersionForData(d,r)}i=dU.fromString(t,u||40)}else throw new Error("Invalid data");const s=yL.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=FSt(e,r,i),l=gB.getSymbolSize(e),c=new ASt(l);return ISt(c,e),RSt(c),DSt(c,e),hU(c,r,0),e>=7&&MSt(c,e),LSt(c,o),isNaN(n)&&(n=_W.getBestMask(c,hU.bind(null,c,r))),_W.applyMask(n,c),hU(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}uSe.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=uU.M,i,s;return typeof r<"u"&&(n=uU.from(r.errorCorrectionLevel,uU.M),i=yL.from(r.version),s=_W.from(r.maskPattern),r.toSJISFunc&&gB.setToSJISFunction(r.toSJISFunc)),$St(e,i,n,s)};var NSe={},HQ={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,l=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,h=[s.color.light,s.color.dark];for(let f=0;f<u;f++)for(let m=0;m<u;m++){let x=(f*u+m)*4,g=s.color.light;if(f>=d&&m>=d&&f<u-d&&m<u-d){const y=Math.floor((f-d)/c),w=Math.floor((m-d)/c);g=h[l[y*o+w]?1:0]}n[x++]=g.r,n[x++]=g.g,n[x++]=g.b,n[x]=g.a}}})(HQ);(function(t){const e=HQ;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,l){let c=l,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),h=u.getContext("2d"),f=h.createImageData(d,d);return e.qrToImageData(f.data,s,c),r(h,u,d),h.putImageData(f,0,0),u},t.renderToDataURL=function(s,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",h=c.rendererOpts||{};return u.toDataURL(d,h.quality)}})(NSe);var SSe={};const USt=HQ;function sue(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function fU(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function zSt(t,e,r){let n="",i=0,s=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),u=Math.floor(l/e);!c&&!s&&(s=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=s?fU("M",c+r,.5+u+r):fU("m",i,0),i=0,s=!1),c+1<e&&t[l+1]||(n+=fU("h",o),o=0)):i++}return n}SSe.render=function(e,r,n){const i=USt.getOptions(r),s=e.modules.size,o=e.modules.data,l=s+i.margin*2,c=i.color.light.a?"<path "+sue(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+sue(i.color.dark,"stroke")+' d="'+zSt(o,s,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,f),f};const VSt=iSt,SW=uSe,ESe=NSe,qSt=SSe;function WQ(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,l=typeof s[o-1]=="function";if(!l&&!VSt())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=SW.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=SW.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Dg.create=SW.create;Dg.toCanvas=WQ.bind(null,ESe.render);Dg.toDataURL=WQ.bind(null,ESe.renderToDataURL);Dg.toString=WQ.bind(null,function(t,e,r){return qSt.render(t,r)});function HSt(){const{user:t}=Si(),[e,r]=C.useState([]),[n,i]=C.useState(!1),[s,o]=C.useState(""),[l,c]=C.useState(""),u=nn(),{toast:d}=Qi(),[h,f]=C.useState({id_cooperativa:""});C.useEffect(()=>{m()},[]);const m=async()=>{const{data:w}=await Ee.from("cooperativas").select("*").eq("status","aprovada");w&&r(w)},x=w=>({cooperativa:"Cooperativa",rota_ciclik:"Rota Ciclik",operador_parceiro:"Operador Parceiro"})[w]||w,g=async()=>{if(!h.id_cooperativa||!t){d({title:"Campo obrigatrio",description:"Selecione um operador logstico",variant:"destructive"});return}i(!0);try{const w=`CICLIK-${Date.now()}-${Math.random().toString(36).substring(7)}`,{data:S,error:E}=await Ee.from("entregas_reciclaveis").insert({id_usuario:t.id,id_cooperativa:h.id_cooperativa,tipo_material:"No especificado",peso_estimado:null,qrcode_id:w,status:"gerada",data_geracao:new Date().toISOString()}).select().single();if(E)throw E;const j=await Dg.toDataURL(w,{width:400,margin:2,color:{dark:"#000000",light:"#ffffff"}});o(j),c(w),d({title:"QR Code gerado!",description:"Apresente este cdigo na cooperativa"})}catch(w){d({title:"Erro",description:w.message,variant:"destructive"})}finally{i(!1)}},y=()=>{const w=document.createElement("a");w.href=s,w.download=`qrcode-${l}.png`,w.click()};return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>u("/user"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Entregar Reciclveis"}),a.jsx("p",{className:"text-muted-foreground",children:"Selecione o operador e gere seu QR Code"})]})]}),s?a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"QR Code Gerado"}),a.jsx(gr,{children:"Apresente este cdigo no operador logstico selecionado"})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:a.jsx("img",{src:s,alt:"QR Code",className:"w-full max-w-sm"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cdigo da entrega:"}),a.jsx("p",{className:"font-mono font-bold",children:l})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Oe,{onClick:y,className:"flex-1",variant:"outline",children:"Baixar QR Code"}),a.jsx(Oe,{onClick:()=>{o(""),c(""),f({id_cooperativa:""})},className:"flex-1",children:"Nova Entrega"})]})]})]}):a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Informaes da Entrega"}),a.jsx(gr,{children:"Selecione o operador logstico para gerar o QR Code de entrega"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"cooperativa",children:"Operador Logstico *"}),a.jsxs(wi,{value:h.id_cooperativa,onValueChange:w=>f({id_cooperativa:w}),children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o operador"})}),a.jsx(xi,{children:e.map(w=>a.jsxs(or,{value:w.id,children:[w.nome_fantasia," - ",x(w.tipo_operador)]},w.id))})]})]}),a.jsx("div",{className:"rounded-lg bg-muted p-4 text-sm text-muted-foreground",children:a.jsxs("p",{children:[" O QR Code gerado ter validade de ",a.jsx("strong",{children:"24 horas"})," para que a entrega seja realizada no operador selecionado."]})}),a.jsx(Oe,{onClick:g,disabled:n,size:"sm",className:"w-full",children:n?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(zu,{className:"mr-2 h-4 w-4"}),"Gerar QR Code"]})})]})]})]})})}function WSt(){const{user:t}=Si(),e=nn(),[r,n]=C.useState([]),[i,s]=C.useState(!0),[o,l]=C.useState("todos");C.useEffect(()=>{c()},[]);const c=async()=>{if(t){s(!0);try{const{data:y,error:w}=await Ee.from("entregas_reciclaveis").select(`
          *,
          cooperativas:id_cooperativa(nome_fantasia)
        `).eq("id_usuario",t.id).order("data_geracao",{ascending:!1});if(w)throw w;n(y||[])}catch(y){console.error("Erro ao carregar entregas:",y)}finally{s(!1)}}},u=(y,w,S)=>{if(w!=="ativa"&&S!=="gerada")return!1;const E=new Date(y);return E.setHours(E.getHours()+24),new Date>E},d=y=>u(y.data_geracao,y.status_promessa,y.status)?"expirada":y.status_promessa||y.status,h=C.useMemo(()=>{const y={ativa:0,em_coleta:0,finalizada:0,expirada:0};let w=0;return r.forEach(S=>{const E=d(S);E in y&&y[E]++,(E==="finalizada"||E==="validada")&&S.peso_validado&&(w+=S.peso_validado)}),{...y,totalKg:w,total:r.length}},[r]),f=C.useMemo(()=>{const y=new Date,w=j4(y,3);let S=0,E=0;r.forEach(T=>{const O=new Date(T.data_geracao),I=d(T);O>=w&&(I==="finalizada"||I==="validada")&&T.peso_validado&&(S+=T.peso_validado)});for(let T=0;T<3;T++){const O=ru(j4(y,T)),I=G_(j4(y,T));r.some(D=>{const z=new Date(D.data_geracao);return z>=O&&z<=I})&&E++}if(E===0)return 15;const j=S/E;return Math.max(j*1.2,10)},[r]),m=({value:y})=>{const w=mye(0),S=iHe(w,E=>E.toFixed(1));return C.useEffect(()=>SHe(w,y,{duration:2,ease:"easeOut"}).stop,[y]),a.jsx(Ke.span,{children:S})},x=C.useMemo(()=>{const y=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],w={};r.forEach(E=>{const j=new Date(E.data_geracao),T=YXe(j),O=WXe(j);w[T]||(w[T]=y.map(M=>({month:M,prometidas:0,finalizadas:0,expiradas:0}))),w[T][O].prometidas++;const I=d(E);I==="finalizada"||I==="validada"?w[T][O].finalizadas++:I==="expirada"&&w[T][O].expiradas++});const S=Object.keys(w).map(Number).sort((E,j)=>j-E);return{yearlyData:w,years:S}},[r]),g=r.filter(y=>o==="todos"?!0:d(y)===o);return C.useMemo(()=>{const y={};return g.forEach(w=>{const S=new Date(w.data_geracao);let E;Bbe(S)?E="Hoje":$be(S)?E="Ontem":E=Mi(S,"dd 'de' MMMM",{locale:Wi}),y[E]||(y[E]=[]),y[E].push(w)}),y},[g]),a.jsxs("div",{className:"min-h-screen bg-background pb-8",children:[a.jsx(Ab,{showBackButton:!0,backTo:"/user",title:"Histrico de Entregas"}),a.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},className:"relative bg-gradient-to-br from-primary via-primary to-primary/80 text-primary-foreground overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-white/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-12 -left-12 w-32 h-32 bg-white/10 rounded-full blur-2xl"})]}),a.jsx("div",{className:"relative mx-auto max-w-lg px-4 py-6",children:a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:a.jsx(Cs,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx(Ke.p,{initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},className:"text-3xl font-bold",children:h.total},h.total),a.jsx("p",{className:"text-sm text-white/70",children:"entregas prometidas"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[a.jsx(g3,{className:"h-4 w-4 text-white/70"}),a.jsx(Ke.span,{initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},className:"text-2xl font-bold",children:h.totalKg.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1})},h.totalKg),a.jsx("span",{className:"text-sm text-white/70",children:"kg"})]}),a.jsx("p",{className:"text-xs text-white/60",children:"material entregue"})]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{key:"ativa",label:"Aguardando",color:"from-blue-400/30 to-blue-500/30",count:h.ativa},{key:"em_coleta",label:"Em Coleta",color:"from-amber-400/30 to-amber-500/30",count:h.em_coleta},{key:"finalizada",label:"Finalizadas",color:"from-emerald-400/30 to-emerald-500/30",count:h.finalizada},{key:"expirada",label:"Expiradas",color:"from-red-400/30 to-red-500/30",count:h.expirada}].map((y,w)=>a.jsxs(Ke.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.15+w*.05},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(y.key),className:`
                    relative p-2 rounded-xl bg-gradient-to-br ${y.color} backdrop-blur-sm
                    border border-white/10 transition-all
                    ${o===y.key?"ring-2 ring-white/50":""}
                  `,children:[a.jsx("p",{className:"text-xl font-bold",children:y.count}),a.jsx("p",{className:"text-[10px] text-white/70 truncate",children:y.label})]},y.key))})]})})]}),a.jsxs("div",{className:"mx-auto max-w-lg px-4 pt-4 space-y-4",children:[!i&&x.years.length>0&&a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-card rounded-2xl p-4 border border-border/40",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hs,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"font-semibold text-foreground",children:"Evoluo por Ano"})]}),x.years.length>1&&a.jsx("div",{className:"flex gap-1",children:x.years.map(y=>a.jsx(Oe,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>{const w=document.getElementById(`chart-${y}`);w==null||w.scrollIntoView({behavior:"smooth",block:"nearest"})},children:y},y))})]}),a.jsx("div",{className:"space-y-6",children:x.years.map(y=>a.jsxs("div",{id:`chart-${y}`,children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:y}),a.jsx("div",{className:"h-56",children:a.jsx(vd,{width:"100%",height:"100%",children:a.jsxs(M_t,{data:x.yearlyData[y],margin:{top:5,right:10,left:-15,bottom:5},children:[a.jsx(bf,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(Xc,{dataKey:"month",tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},axisLine:{stroke:"hsl(var(--border))"}}),a.jsx(Yc,{yAxisId:"left",tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"},axisLine:{stroke:"hsl(var(--border))"}}),a.jsx(Ga,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"hsl(var(--foreground))"}}),a.jsx(Kc,{wrapperStyle:{fontSize:"11px"}}),a.jsx(nu,{yAxisId:"left",dataKey:"prometidas",name:"Prometidas",fill:"hsl(var(--primary))",opacity:.7,radius:[4,4,0,0]}),a.jsx(Sd,{yAxisId:"left",type:"monotone",dataKey:"finalizadas",name:"Finalizadas",stroke:"#10b981",strokeWidth:2.5,dot:{r:4,fill:"#10b981",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}}),a.jsx(Sd,{yAxisId:"left",type:"monotone",dataKey:"expiradas",name:"Expiradas",stroke:"#ef4444",strokeWidth:2.5,strokeDasharray:"5 5",dot:{r:4,fill:"#ef4444",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}})]})})})]},y))})]}),a.jsxs(Ke.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,type:"spring",stiffness:100},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary via-primary to-emerald-600 p-6 text-primary-foreground",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx(Ke.div,{animate:{rotate:360,scale:[1,1.1,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut"}},className:"absolute -top-8 -right-8 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),a.jsx(Ke.div,{animate:{rotate:-360,x:[0,20,0],y:[0,-10,0]},transition:{rotate:{duration:25,repeat:1/0,ease:"linear"},x:{duration:5,repeat:1/0,ease:"easeInOut"},y:{duration:6,repeat:1/0,ease:"easeInOut"}},className:"absolute -bottom-4 -left-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),a.jsx(Ke.div,{animate:{y:[0,-8,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/2 right-1/4 w-3 h-3 bg-white/30 rounded-full"}),a.jsx(Ke.div,{animate:{y:[0,8,0]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute bottom-1/3 left-1/3 w-2 h-2 bg-white/20 rounded-full"})]}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Ke.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center shrink-0",children:a.jsx(Cs,{className:"h-7 w-7 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold mb-1",children:"Continue reciclando!"}),a.jsx("p",{className:"text-sm text-white/80 leading-relaxed mb-3",children:"Cada entrega faz a diferena para o planeta e gera pontos para voc trocar por benefcios."}),a.jsx(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6,type:"spring"},className:"bg-white/15 backdrop-blur-sm rounded-xl p-3 mb-4 border border-white/20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ke.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center",children:a.jsx(Dm,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-white/70 mb-0.5",children:"Meta para prximo ms"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl font-bold text-white",children:a.jsx(m,{value:f})}),a.jsx("span",{className:"text-sm text-white/80",children:"kg"}),a.jsx(Ke.span,{animate:{y:[0,-3,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"ml-1 text-xs text-emerald-200",children:" +20%"})]})]})]})}),a.jsx(Ke.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs(Oe,{onClick:()=>e("/deliver-recyclables"),className:"w-full sm:w-auto bg-white text-primary hover:bg-white/90 rounded-xl px-6 py-2.5 font-semibold shadow-lg shadow-black/10 gap-2",children:[a.jsx(Ke.span,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:a.jsx($b,{className:"h-4 w-4"})}),"Nova entrega",a.jsx(Ke.span,{animate:{x:[0,4,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:""})]})})]})]})})]})]})]})}const GSt={todos:{label:"Todos os Materiais",icon:Yn},disponivel:{label:"Disponveis",icon:Yn},em_entrega:{label:"Em Entrega",icon:Gp},entregue:{label:"Entregues",icon:ta}};function KSt(){const{user:t}=Si(),e=nn(),[r,n]=C.useState([]),[i,s]=C.useState(!0),[o,l]=C.useState("todos");C.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{const{data:j,error:T}=await Ee.from("materiais_reciclaveis_usuario").select("*").eq("id_usuario",t.id).order("data_cadastro",{ascending:!1});if(T)throw T;n(j||[])}catch(j){console.error("Erro ao carregar materiais:",j)}finally{s(!1)}},u=j=>r.filter(T=>T.status===j),d=()=>o==="todos"?r:u(o),h={disponivel:u("disponivel").length,em_entrega:u("em_entrega").length,entregue:u("entregue").length,total:r.length},m=r.filter(j=>j.status==="entregue").reduce((j,T)=>{const O=T.tipo_embalagem||"outros",I=(T.peso_total_estimado_gramas||0)/1e3;return j[O]||(j[O]={tipo:O,peso:0,quantidade:0}),j[O].peso+=I,j[O].quantidade+=1,j},{}),x=Object.values(m).map((j,T)=>({name:Ip[j.tipo]||j.tipo,peso:j.peso,quantidade:j.quantidade,fill:`hsl(var(--chart-${T%5+1}))`})),g=x.reduce((j,T)=>j+T.peso,0),y=j=>{switch(j){case"disponivel":return a.jsx(Bt,{className:"bg-blue-500/10 text-blue-600 border-blue-500/20 text-[10px]",children:"Disponvel"});case"em_entrega":return a.jsx(Bt,{className:"bg-amber-500/10 text-amber-600 border-amber-500/20 text-[10px]",children:"Em Entrega"});case"entregue":return a.jsx(Bt,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20 text-[10px]",children:"Entregue"});default:return null}},w=(j,T)=>a.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:T*.03},children:a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-muted/30 hover:bg-muted/50 transition-colors border border-transparent hover:border-border/50",children:[a.jsx("div",{className:`p-2 rounded-lg ${j.status==="entregue"?"bg-emerald-500/10":j.status==="em_entrega"?"bg-amber-500/10":"bg-blue-500/10"}`,children:j.status==="entregue"?a.jsx(ta,{className:"w-4 h-4 text-emerald-600"}):j.status==="em_entrega"?a.jsx(Gp,{className:"w-4 h-4 text-amber-600"}):a.jsx(Yn,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("p",{className:"font-medium text-sm text-foreground truncate",children:j.descricao}),y(j.status)]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a.jsx(Bt,{variant:"outline",className:"text-[10px] h-5",children:Ip[j.tipo_embalagem]}),a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[j.percentual_reciclabilidade,"% reciclvel"]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-[10px] text-muted-foreground",children:j.data_entrega?`Entregue em ${new Date(j.data_entrega).toLocaleDateString("pt-BR")}`:new Date(j.data_cadastro).toLocaleDateString("pt-BR")}),a.jsxs(Bt,{className:"bg-primary/10 text-primary border-primary/20 text-[10px]",children:["+",j.pontos_ganhos," pts"]})]})]})]})},j.id),S=({active:j,payload:T})=>j&&T&&T.length?a.jsxs("div",{className:"bg-background border border-border rounded-lg p-3 shadow-lg",children:[a.jsx("p",{className:"font-semibold text-foreground",children:T[0].name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Peso: ",po(T[0].value)]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Itens: ",T[0].payload.quantidade]})]}):null,E=d();return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>e("/user"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Meus Materiais Reciclveis"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Histrico completo de materiais cadastrados"})]})]}),i?a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs(Ke.button,{whileTap:{scale:.98},onClick:()=>l("disponivel"),className:`p-4 rounded-xl text-center transition-all ${o==="disponivel"?"bg-blue-500/20 ring-2 ring-blue-500/50":"bg-blue-500/10 hover:bg-blue-500/15"}`,children:[a.jsx(Yn,{className:"w-6 h-6 mx-auto text-blue-600 mb-1"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.disponivel}),a.jsx("p",{className:"text-xs text-blue-600/80",children:"Disponveis"})]}),a.jsxs(Ke.button,{whileTap:{scale:.98},onClick:()=>l("em_entrega"),className:`p-4 rounded-xl text-center transition-all ${o==="em_entrega"?"bg-amber-500/20 ring-2 ring-amber-500/50":"bg-amber-500/10 hover:bg-amber-500/15"}`,children:[a.jsx(Gp,{className:"w-6 h-6 mx-auto text-amber-600 mb-1"}),a.jsx("p",{className:"text-2xl font-bold text-amber-600",children:h.em_entrega}),a.jsx("p",{className:"text-xs text-amber-600/80",children:"Em Entrega"})]}),a.jsxs(Ke.button,{whileTap:{scale:.98},onClick:()=>l("entregue"),className:`p-4 rounded-xl text-center transition-all ${o==="entregue"?"bg-emerald-500/20 ring-2 ring-emerald-500/50":"bg-emerald-500/10 hover:bg-emerald-500/15"}`,children:[a.jsx(ta,{className:"w-6 h-6 mx-auto text-emerald-600 mb-1"}),a.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:h.entregue}),a.jsx("p",{className:"text-xs text-emerald-600/80",children:"Entregues"})]})]}),x.length>0&&a.jsx(it,{children:a.jsxs(ht,{className:"p-4",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-3 text-foreground flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Materiais Entregues por Tipo"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(vd,{width:140,height:140,children:a.jsxs(PQ,{children:[a.jsx(h0,{data:x,cx:"50%",cy:"50%",innerRadius:40,outerRadius:65,paddingAngle:2,dataKey:"peso",children:x.map((j,T)=>a.jsx(mN,{fill:j.fill},`cell-${T}`))}),a.jsx(Ga,{content:a.jsx(S,{})})]})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm font-bold text-foreground",children:po(g)}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"total"})]})})]}),a.jsx("div",{className:"flex-1 space-y-2",children:x.map((j,T)=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:j.fill}}),a.jsx("span",{className:"text-muted-foreground",children:j.name})]}),a.jsx("span",{className:"font-medium text-foreground",children:po(j.peso)})]},T))})]})]})}),a.jsx(it,{children:a.jsxs(ht,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(LC,{className:"w-4 h-4 text-muted-foreground"}),a.jsxs(wi,{value:o,onValueChange:j=>l(j),children:[a.jsx(gi,{className:"w-[180px] h-9 text-sm",children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"w-4 h-4"}),a.jsxs("span",{children:["Todos (",h.total,")"]})]})}),a.jsx(or,{value:"disponivel",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{children:["Disponveis (",h.disponivel,")"]})]})}),a.jsx(or,{value:"em_entrega",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gp,{className:"w-4 h-4 text-amber-600"}),a.jsxs("span",{children:["Em Entrega (",h.em_entrega,")"]})]})}),a.jsx(or,{value:"entregue",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ta,{className:"w-4 h-4 text-emerald-600"}),a.jsxs("span",{children:["Entregues (",h.entregue,")"]})]})})]})]})]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[E.length," ",E.length===1?"item":"itens"]})]}),a.jsx("div",{className:"space-y-2",children:a.jsx(Cf,{mode:"popLayout",children:E.length===0?a.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8",children:[a.jsx(Yn,{className:"w-12 h-12 mx-auto text-muted-foreground/30 mb-3"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o==="todos"?"Nenhum material cadastrado ainda":`Nenhum material ${GSt[o].label.toLowerCase()}`})]}):E.map((j,T)=>w(j,T))})})]})})]})]})})}function XSt(){const{user:t}=Si(),[e,r]=C.useState([]),n=nn(),{toast:i}=Qi();C.useEffect(()=>{s()},[t]);const s=async()=>{if(!t)return;const{data:l}=await Ee.from("cupons").select("*").eq("id_usuario_resgatou",t.id).order("data_resgate",{ascending:!1});l&&r(l)},o=l=>{navigator.clipboard.writeText(l),i({title:"Cdigo copiado!",description:"O cdigo do cupom foi copiado"})};return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>n("/user"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Meus Cupons"}),a.jsx("p",{className:"text-muted-foreground",children:"Seus cupons resgatados"})]})]}),a.jsxs("div",{className:"space-y-4",children:[e.map(l=>a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Hu,{className:"h-5 w-5 text-primary"}),l.marketplace]}),a.jsxs(gr,{children:["Valor: R$ ",l.valor.toFixed(2)," | Mnimo: R$ ",l.minimo_compra.toFixed(2)]})]}),a.jsx(Bt,{variant:l.status==="usado"?"secondary":"default",children:l.status==="usado"?"Usado":"Disponvel"})]})}),a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"flex-1 bg-muted px-4 py-2 rounded font-mono",children:l.codigo}),a.jsx(Oe,{size:"icon",variant:"outline",onClick:()=>o(l.codigo),children:a.jsx(p3,{className:"h-4 w-4"})})]})})]},l.id)),e.length===0&&a.jsx(it,{children:a.jsxs(ht,{className:"py-12 text-center",children:[a.jsx(Hu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Voc ainda no resgatou cupons"})]})})]})]})})}function YSt({codigoIndicacao:t,userId:e}){const{toast:r}=Qi(),[n,i]=C.useState([]),[s,o]=C.useState(!0);C.useEffect(()=>{l()},[e]);const l=async()=>{const{data:x}=await Ee.from("indicacoes").select(`
        id,
        data_indicacao,
        pontos_primeira_missao_concedidos,
        id_indicado
      `).eq("id_indicador",e).order("data_indicacao",{ascending:!1});if(x){const g=await Promise.all(x.map(async y=>{const{data:w}=await Ee.from("profiles").select("nome, email").eq("id",y.id_indicado).single();return{...y,profiles:w||{nome:"Usurio",email:""}}}));i(g)}o(!1)},c=Ng(`/auth?ref=${t}`),u=encodeURIComponent(` Junte-se a mim no Ciclik - Digital Verde!

Use meu cdigo de indicao: ${t}

Voc ganha pontos ao se cadastrar e eu tambm ganho quando voc completar sua primeira misso! 

${c}`),d=()=>{navigator.clipboard.writeText(t),r({title:"Cdigo copiado!",description:"Seu cdigo de indicao foi copiado"})},h=()=>{navigator.clipboard.writeText(c),r({title:"Link copiado!",description:"Link de indicao copiado para rea de transferncia"})},f=()=>{window.open(`https://wa.me/?text=${u}`,"_blank")},m=n.reduce((x,g)=>x+40+(g.pontos_primeira_missao_concedidos?20:0),0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(it,{className:"border-green-500/20 bg-gradient-to-br from-green-500/5 to-emerald-500/5",children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(IM,{className:"h-5 w-5 text-green-600"}),"Indique Amigos e Ganhe Pontos!"]}),a.jsx(gr,{children:"Ganhe +40 pontos quando um amigo se cadastrar com seu cdigo, e mais +20 pontos quando ele completar a primeira misso"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ZSt,{className:"text-sm font-medium",children:"Seu Cdigo de Indicao"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{value:t,readOnly:!0,className:"font-mono text-lg font-bold text-center"}),a.jsx(Oe,{onClick:d,variant:"outline",size:"icon",children:a.jsx(p3,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs(Oe,{onClick:f,className:"w-full",variant:"default",children:[a.jsx(IM,{className:"mr-2 h-4 w-4"}),"Compartilhar via WhatsApp"]}),a.jsxs(Oe,{onClick:h,variant:"outline",className:"w-full",children:[a.jsx(p3,{className:"mr-2 h-4 w-4"}),"Copiar Link de Indicao"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl font-bold text-green-600",children:[a.jsx(yl,{className:"h-5 w-5"}),n.length]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Amigos Indicados"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl font-bold text-green-600",children:[a.jsx(Hu,{className:"h-5 w-5"}),m]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Pontos Ganhos"})]})]})]})]}),n.length>0&&a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{className:"text-lg",children:"Minhas Indicaes"})}),a.jsx(ht,{children:a.jsx("div",{className:"space-y-3",children:n.map(x=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:x.profiles.nome}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(x.data_indicacao).toLocaleDateString("pt-BR")})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Bt,{variant:"default",children:"+40pts"}),x.pontos_primeira_missao_concedidos&&a.jsxs(Bt,{variant:"secondary",className:"gap-1",children:[a.jsx(au,{className:"h-3 w-3"}),"+20pts"]})]})]},x.id))})})]})]})}function ZSt({children:t,className:e}){return a.jsx("label",{className:e,children:t})}var jSe={exports:{}},ASe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=C;function QSt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var JSt=typeof Object.is=="function"?Object.is:QSt,eEt=bC.useState,tEt=bC.useEffect,rEt=bC.useLayoutEffect,nEt=bC.useDebugValue;function iEt(t,e){var r=e(),n=eEt({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return rEt(function(){i.value=r,i.getSnapshot=e,mU(i)&&s({inst:i})},[t,r,e]),tEt(function(){return mU(i)&&s({inst:i}),t(function(){mU(i)&&s({inst:i})})},[t]),nEt(r),r}function mU(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!JSt(t,r)}catch{return!0}}function sEt(t,e){return e()}var aEt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sEt:iEt;ASe.useSyncExternalStore=bC.useSyncExternalStore!==void 0?bC.useSyncExternalStore:aEt;jSe.exports=ASe;var oEt=jSe.exports;function lEt(){return oEt.useSyncExternalStore(cEt,()=>!0,()=>!1)}function cEt(){return()=>{}}var GQ="Avatar",[uEt,c$t]=qo(GQ),[dEt,CSe]=uEt(GQ),TSe=C.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,s]=C.useState("idle");return a.jsx(dEt,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:a.jsx(Dr.span,{...n,ref:e})})});TSe.displayName=GQ;var PSe="AvatarImage",kSe=C.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...s}=t,o=CSe(PSe,r),l=hEt(n,s),c=Uo(u=>{i(u),o.onImageLoadingStatusChange(u)});return Vo(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(Dr.img,{...s,ref:e,src:n}):null});kSe.displayName=PSe;var OSe="AvatarFallback",ISe=C.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,s=CSe(OSe,r),[o,l]=C.useState(n===void 0);return C.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&s.imageLoadingStatus!=="loaded"?a.jsx(Dr.span,{...i,ref:e}):null});ISe.displayName=OSe;function aue(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hEt(t,{referrerPolicy:e,crossOrigin:r}){const n=lEt(),i=C.useRef(null),s=n?(i.current||(i.current=new window.Image),i.current):null,[o,l]=C.useState(()=>aue(s,t));return Vo(()=>{l(aue(s,t))},[s,t]),Vo(()=>{const c=h=>()=>{l(h)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),e&&(s.referrerPolicy=e),typeof r=="string"&&(s.crossOrigin=r),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,r,e]),o}var RSe=TSe,DSe=kSe,MSe=ISe;const KQ=C.forwardRef(({className:t,...e},r)=>a.jsx(RSe,{ref:r,className:Ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));KQ.displayName=RSe.displayName;const LSe=C.forwardRef(({className:t,...e},r)=>a.jsx(DSe,{ref:r,className:Ut("aspect-square h-full w-full",t),...e}));LSe.displayName=DSe.displayName;const XQ=C.forwardRef(({className:t,...e},r)=>a.jsx(MSe,{ref:r,className:Ut("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));XQ.displayName=MSe.displayName;function fEt(){const{user:t,profile:e,refreshProfile:r}=Si(),[n,i]=C.useState(!1),s=C.useRef(null),{toast:o}=Qi(),l=async d=>{try{if(i(!0),!d.target.files||d.target.files.length===0)return;const h=d.target.files[0],f=h.name.split(".").pop(),m=`${t==null?void 0:t.id}/${Date.now()}.${f}`;if(!h.type.startsWith("image/")){o({title:"Arquivo invlido",description:"Por favor, selecione uma imagem",variant:"destructive"});return}if(h.size>5*1024*1024){o({title:"Arquivo muito grande",description:"A imagem deve ter no mximo 5MB",variant:"destructive"});return}const{error:x}=await Ee.storage.from("avatars").upload(m,h,{upsert:!0});if(x)throw x;const{data:{publicUrl:g}}=Ee.storage.from("avatars").getPublicUrl(m),{error:y}=await Ee.from("profiles").update({avatar_url:g}).eq("id",t==null?void 0:t.id);if(y)throw y;await r(),o({title:"Foto atualizada!",description:"Sua foto de perfil foi atualizada com sucesso"})}catch(h){o({title:"Erro no upload",description:h.message,variant:"destructive"})}finally{i(!1)}},c=async()=>{try{if(i(!0),e!=null&&e.avatar_url){const h=e.avatar_url.split("/avatars/");if(h.length>1){const f=h[1];await Ee.storage.from("avatars").remove([f])}}const{error:d}=await Ee.from("profiles").update({avatar_url:null}).eq("id",t==null?void 0:t.id);if(d)throw d;await r(),o({title:"Foto removida!",description:"Sua foto de perfil foi removida"})}catch(d){o({title:"Erro ao remover foto",description:d.message,variant:"destructive"})}finally{i(!1)}},u=d=>d.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2);return a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(KQ,{className:"h-32 w-32",children:[a.jsx(LSe,{src:(e==null?void 0:e.avatar_url)||void 0}),a.jsx(XQ,{className:"text-2xl",children:e!=null&&e.nome?u(e.nome):a.jsx(_v,{className:"h-12 w-12"})})]}),a.jsx(Oe,{type:"button",size:"icon",className:"absolute bottom-0 right-0 rounded-full h-10 w-10",onClick:()=>{var d;return(d=s.current)==null?void 0:d.click()},disabled:n,children:n?a.jsx(jn,{className:"h-4 w-4 animate-spin"}):a.jsx($S,{className:"h-4 w-4"})})]}),a.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:l,className:"hidden",disabled:n}),a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Clique no cone de cmera para alterar sua foto",a.jsx("br",{}),a.jsx("span",{className:"text-xs",children:"Mximo 5MB - JPG, PNG ou WEBP"})]}),(e==null?void 0:e.avatar_url)&&a.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:c,disabled:n,className:"text-destructive hover:text-destructive",children:[a.jsx(vl,{className:"h-4 w-4 mr-2"}),"Remover foto"]})]})]})}const mEt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},tS={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function pEt(){var m;const{profile:t,user:e,refreshProfile:r}=Si(),[n,i]=C.useState(!1),s=nn(),{toast:o}=Qi(),[l,c]=C.useState({nome:(t==null?void 0:t.nome)||"",telefone:(t==null?void 0:t.telefone)||"",cep:(t==null?void 0:t.cep)||"",numero:(t==null?void 0:t.numero)||"",complemento:(t==null?void 0:t.complemento)||"",linkedin_profile:(t==null?void 0:t.linkedin_profile)||"",instagram_handle:(t==null?void 0:t.instagram_handle)||""}),[u,d]=C.useState({}),h=()=>{const x={};if(l.linkedin_profile&&l.linkedin_profile.trim()){const y=Ru().url({message:"URL do LinkedIn invlida"}).refine(w=>w.includes("linkedin.com/"),{message:"Deve ser uma URL do LinkedIn"}).safeParse(l.linkedin_profile.trim());y.success||(x.linkedin_profile=y.error.errors[0].message)}if(l.instagram_handle&&l.instagram_handle.trim()){const y=Ru().trim().min(1,{message:"Handle vazio"}).max(30,{message:"Mximo 30 caracteres"}).regex(/^@?[a-zA-Z0-9._]+$/,{message:"Use apenas letras, nmeros, . e _"}).safeParse(l.instagram_handle.trim());y.success||(x.instagram_handle=y.error.errors[0].message)}return d(x),Object.keys(x).length===0},f=async x=>{var g,y;if(x.preventDefault(),!h()){o({title:"Erro de validao",description:"Corrija os erros no formulrio",variant:"destructive"});return}i(!0);try{const w={...l,linkedin_profile:((g=l.linkedin_profile)==null?void 0:g.trim())||null,instagram_handle:(y=l.instagram_handle)!=null&&y.trim()?l.instagram_handle.trim().startsWith("@")?l.instagram_handle.trim():`@${l.instagram_handle.trim()}`:null},{error:S}=await Ee.from("profiles").update(w).eq("id",e==null?void 0:e.id);if(S)throw S;await r(),o({title:"Perfil atualizado!",description:"Suas informaes foram salvas"}),s("/user")}catch(w){o({title:"Erro",description:w.message,variant:"destructive"})}finally{i(!1)}};return a.jsx($v,{children:a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[a.jsx("div",{className:"bg-card/80 backdrop-blur-md border-b border-border/50 sticky top-0 z-40",children:a.jsx("div",{className:"mx-auto max-w-lg px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s("/user"),className:"p-2 rounded-xl bg-muted/50 hover:bg-muted transition-colors",children:a.jsx(Kn,{className:"h-5 w-5 text-foreground"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Meu Perfil"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Edite suas informaes"})]}),a.jsx(Ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:n,className:"p-2.5 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50",children:n?a.jsx(jn,{className:"h-5 w-5 animate-spin"}):a.jsx(xl,{className:"h-5 w-5"})})]})})}),a.jsxs(Ke.div,{variants:mEt,initial:"hidden",animate:"visible",className:"mx-auto max-w-lg px-4 py-6 space-y-4",children:[a.jsx(Ke.div,{variants:tS,children:a.jsx(it,{className:"border-0 shadow-lg bg-card/50 backdrop-blur-sm rounded-2xl overflow-hidden",children:a.jsxs(ht,{className:"p-6 flex flex-col items-center",children:[a.jsx(fEt,{}),a.jsx("p",{className:"mt-3 text-sm font-medium text-foreground",children:t==null?void 0:t.nome}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})})}),a.jsx(Ke.div,{variants:tS,children:a.jsx(it,{className:"border-0 shadow-lg bg-card/50 backdrop-blur-sm rounded-2xl overflow-hidden",children:a.jsxs(ht,{className:"p-5 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:a.jsx(_v,{className:"h-4 w-4 text-primary"})}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"Dados Pessoais"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Nome"}),a.jsx(mt,{value:l.nome,onChange:x=>c({...l,nome:x.target.value}),className:"h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(nt,{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1.5",children:[a.jsx(FX,{className:"h-3 w-3"}),"Telefone"]}),a.jsx(mt,{value:l.telefone,onChange:x=>c({...l,telefone:x.target.value}),className:"h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20",placeholder:"(00) 00000-0000"})]})]})]})})}),a.jsx(Ke.div,{variants:tS,children:a.jsx(it,{className:"border-0 shadow-lg bg-card/50 backdrop-blur-sm rounded-2xl overflow-hidden",children:a.jsxs(ht,{className:"p-5 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:a.jsx(Rm,{className:"h-4 w-4 text-primary"})}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"Endereo"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx(nt,{className:"text-xs text-muted-foreground mb-1.5 block",children:"CEP"}),a.jsx(mt,{value:l.cep,onChange:x=>c({...l,cep:x.target.value}),className:"h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20",placeholder:"00000-000"})]}),a.jsxs("div",{children:[a.jsxs(nt,{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1",children:[a.jsx(bRe,{className:"h-3 w-3"}),"Nmero"]}),a.jsx(mt,{value:l.numero,onChange:x=>c({...l,numero:x.target.value}),className:"h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20"})]})]}),a.jsxs("div",{children:[a.jsxs(nt,{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1",children:[a.jsx(eu,{className:"h-3 w-3"}),"Complemento"]}),a.jsx(mt,{value:l.complemento,onChange:x=>c({...l,complemento:x.target.value}),className:"h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20",placeholder:"Apto, Bloco, etc."})]})]})})}),a.jsx(Ke.div,{variants:tS,children:a.jsx(it,{className:"border-0 shadow-lg bg-card/50 backdrop-blur-sm rounded-2xl overflow-hidden",children:a.jsxs(ht,{className:"p-5 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:a.jsx(IM,{className:"h-4 w-4 text-primary"})}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"Redes Sociais"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs(nt,{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1.5",children:[a.jsx(NRe,{className:"h-3 w-3 text-[#0A66C2]"}),"LinkedIn"]}),a.jsx(mt,{type:"url",placeholder:"https://linkedin.com/in/seu-perfil",value:l.linkedin_profile,onChange:x=>{c({...l,linkedin_profile:x.target.value}),u.linkedin_profile&&d({...u,linkedin_profile:""})},className:`h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20 ${u.linkedin_profile?"ring-2 ring-destructive/50":""}`}),u.linkedin_profile&&a.jsx("p",{className:"text-xs text-destructive mt-1",children:u.linkedin_profile})]}),a.jsxs("div",{children:[a.jsxs(nt,{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1.5",children:[a.jsx(_Re,{className:"h-3 w-3 text-[#E4405F]"}),"Instagram"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"flex items-center justify-center px-3 h-11 bg-muted/50 rounded-xl",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"@"})}),a.jsx(mt,{type:"text",placeholder:"seu_usuario",value:((m=l.instagram_handle)==null?void 0:m.replace("@",""))||"",onChange:x=>{c({...l,instagram_handle:x.target.value.replace("@","")}),u.instagram_handle&&d({...u,instagram_handle:""})},className:`h-11 rounded-xl bg-muted/50 border-0 focus:ring-2 focus:ring-primary/20 ${u.instagram_handle?"ring-2 ring-destructive/50":""}`,maxLength:30})]}),u.instagram_handle&&a.jsx("p",{className:"text-xs text-destructive mt-1",children:u.instagram_handle})]})]})]})})}),(t==null?void 0:t.codigo_indicacao)&&(e==null?void 0:e.id)&&a.jsx(Ke.div,{variants:tS,children:a.jsx(YSt,{codigoIndicacao:t.codigo_indicacao,userId:e.id})}),a.jsx(Ke.div,{variants:tS,className:"pb-6",children:a.jsxs(Oe,{onClick:f,disabled:n,className:"w-full h-12 rounded-xl font-medium shadow-lg",children:[n?a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsx(xl,{className:"mr-2 h-4 w-4"}),"Salvar Alteraes"]})})]})]})})}function gEt({entrega:t,onScanQR:e}){const r=o=>{const c={ativa:{variant:"default",label:"Aguardando"},em_coleta:{variant:"secondary",label:"Em Coleta"},finalizada:{variant:"default",label:"Finalizada"},expirada:{variant:"destructive",label:"Expirada"}}[o]||{variant:"outline",label:o};return a.jsx(Bt,{variant:c.variant,children:c.label})},n=()=>{const o=new Date(t.data_geracao),l=new Date(o.getTime()+24*60*60*1e3);return new Date>l?"Expirado":$A(l,{locale:Wi,addSuffix:!0})},i=()=>{const o=new Date(t.data_geracao),l=new Date(o.getTime()+24*60*60*1e3),c=new Date,u=(l.getTime()-c.getTime())/(1e3*60*60);return u<=2&&u>0},s=()=>{var u,d;if(!((u=t.profiles)!=null&&u.cpf)||!((d=t.profiles)!=null&&d.nome))return"Entregador no identificado";const l=t.profiles.cpf.replace(/\D/g,"").substring(0,3),c=t.profiles.nome.split(" ")[0];return`${l} - ${c}`};return a.jsx(it,{className:`transition-all hover:shadow-lg ${i()?"border-warning":""}`,children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_v,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:s()})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Yn,{className:"h-3 w-3"}),a.jsx("span",{children:t.tipo_material}),a.jsx("span",{children:""}),a.jsx("span",{children:po(t.peso_estimado||0)})]})]}),r(t.status_promessa)]}),a.jsxs("div",{className:`flex items-center gap-2 text-sm ${i()?"text-warning":"text-muted-foreground"}`,children:[a.jsx(Tg,{className:"h-4 w-4"}),a.jsx("span",{children:n()})]}),a.jsxs("div",{className:"bg-muted/50 p-2 rounded text-xs font-mono",children:["ID: ",t.id.substring(0,8),"..."]})]})})})}function xEt(){const{user:t,profile:e,signOut:r}=Si(),[n,i]=C.useState(null),[s,o]=C.useState([]),[l,c]=C.useState([]),[u,d]=C.useState([]),[h,f]=C.useState("all"),[m,x]=C.useState("all"),[g,y]=C.useState({totalEntregas:0,entregasPendentes:0,entregasEmColeta:0,pesoTotal:0,pontuacao:100,entregasMes:0}),w=nn(),{run:S,completeTour:E,startTour:j}=kQ({tourKey:"cooperative-welcome",autoStart:!1}),T=[{target:"body",content:"Bem-vindo ao seu Painel do Operador! Vamos fazer um tour rpido para voc conhecer todas as funcionalidades.",placement:"center",disableBeacon:!0},{target:'[data-tour="header"]',content:"Este  o cabealho com o nome do seu operador logstico. Use o boto de sair quando quiser encerrar a sesso.",disableBeacon:!0},{target:'[data-tour="status"]',content:"Aqui voc v o status do seu operador e a pontuao de confiabilidade. Quanto maior a pontuao, melhor!",disableBeacon:!0},{target:'[data-tour="stats"]',content:"Estas so suas estatsticas principais: promessas ativas, entregas do ms, total geral e peso total coletado.",disableBeacon:!0},{target:'[data-tour="tabs"]',content:"Use estas abas para alternar entre entregas previstas (promessas ativas) e entregas j realizadas.",disableBeacon:!0},{target:'[data-tour="scan-action"]',content:"Quando um usurio chegar para entregar materiais, clique aqui para escanear o QR Code dele e iniciar a coleta!",disableBeacon:!0}];C.useEffect(()=>{O(),I(),D(),z(),F();const q=setInterval(()=>{I(),D(),z(),F()},3e4);return()=>clearInterval(q)},[t,h,m]),C.useEffect(()=>{if(n&&!localStorage.getItem("tour_completed_cooperative-welcome")){const Q=setTimeout(()=>{j()},500);return()=>clearTimeout(Q)}},[n,j]);const O=async()=>{if(t)try{const{data:q}=await Ee.from("cooperativas").select("*").eq("id_user",t.id).single();q&&i(q)}catch(q){console.error("Erro ao carregar cooperativa:",q)}},I=async()=>{if(!t)return;const{data:q}=await Ee.from("cooperativas").select("id, pontuacao_confiabilidade").eq("id_user",t.id).single();if(!q)return;const{data:Q,error:re}=await Ee.from("entregas_reciclaveis").select("*").eq("id_cooperativa",q.id);if(re){console.error("Erro ao carregar estatsticas:",re);return}const Z=(Q==null?void 0:Q.filter(oe=>oe.status_promessa==="ativa").length)||0,se=(Q==null?void 0:Q.filter(oe=>oe.status_promessa==="em_coleta").length)||0,K=(Q==null?void 0:Q.reduce((oe,xe)=>oe+(xe.peso_validado||0),0))||0,X=new Date;X.setDate(1),X.setHours(0,0,0,0);const Y=(Q==null?void 0:Q.filter(oe=>oe.data_validacao&&new Date(oe.data_validacao)>=X).length)||0;y({totalEntregas:(Q==null?void 0:Q.length)||0,entregasPendentes:Z,entregasEmColeta:se,pesoTotal:K,pontuacao:q.pontuacao_confiabilidade,entregasMes:Y})},M=async()=>{cr.promise(Promise.all([I(),D(),z(),F()]),{loading:"Atualizando dados...",success:"Dados atualizados!",error:"Erro ao atualizar"})},D=async()=>{if(!t)return;const{data:q}=await Ee.from("cooperativas").select("id").eq("id_user",t.id).maybeSingle();if(!q)return;const{data:Q,error:re}=await Ee.from("entregas_reciclaveis").select("*").eq("id_cooperativa",q.id).eq("status_promessa","ativa").order("data_geracao",{ascending:!1,nullsFirst:!1}).limit(100);if(re){console.error("Erro ao carregar entregas previstas:",re);return}if(Q){const Z=[...new Set(Q.map(X=>X.id_usuario))],{data:se}=await Ee.from("profiles").select("id, nome, cpf").in("id",Z),K=Q.map(X=>({...X,profiles:(se==null?void 0:se.find(Y=>Y.id===X.id_usuario))||null}));o(K)}},z=async()=>{if(!t)return;const{data:q}=await Ee.from("cooperativas").select("id").eq("id_user",t.id).maybeSingle();if(!q)return;const{data:Q,error:re}=await Ee.from("entregas_reciclaveis").select("*").eq("id_cooperativa",q.id).eq("status_promessa","em_coleta").order("data_recebimento",{ascending:!1,nullsFirst:!1}).limit(100);if(re){console.error("Erro ao carregar entregas em coleta:",re);return}Q&&c(Q)},F=async()=>{if(!t)return;const{data:q}=await Ee.from("cooperativas").select("id").eq("id_user",t.id).single();if(!q)return;let Q=Ee.from("entregas_reciclaveis").select("*").eq("id_cooperativa",q.id).eq("status_promessa","finalizada");if(h!=="all"){const Z=new Date;let se=new Date;h==="week"?se.setDate(Z.getDate()-7):h==="month"?se.setMonth(Z.getMonth()-1):h==="year"&&se.setFullYear(Z.getFullYear()-1),Q=Q.gte("data_validacao",se.toISOString())}m!=="all"&&(Q=Q.eq("tipo_material",m));const{data:re}=await Q.order("data_validacao",{ascending:!1}).limit(50);re&&d(re)};return n?a.jsxs("div",{className:"min-h-screen bg-background p-4 md:p-8",children:[a.jsx(xZ,{steps:T,run:S,onComplete:E,onSkip:E}),a.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between","data-tour":"header",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"rounded-full bg-primary p-2",children:a.jsx(Cs,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:(n==null?void 0:n.nome_fantasia)||"Carregando..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel do Operador"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oe,{variant:"outline",size:"icon",onClick:M,title:"Atualizar dados",children:a.jsx(gm,{className:"h-5 w-5"})}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:j,title:"Ver tour guiado",children:a.jsx(Nf,{className:"h-5 w-5"})}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:r,title:"Sair",children:a.jsx(wv,{className:"h-5 w-5"})})]})]}),n&&a.jsx(it,{"data-tour":"status",className:`border-2 ${n.status==="aprovada"?"border-success bg-success/5":n.status==="pendente_aprovacao"?"border-warning bg-warning/5":"border-destructive bg-destructive/5"}`,children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Status do Operador"}),a.jsx(Bt,{className:`mt-1 ${n.status==="aprovada"?"bg-success text-white":n.status==="pendente_aprovacao"?"bg-warning text-white":"bg-destructive text-white"}`,children:n.status==="aprovada"?"Aprovada":n.status==="pendente_aprovacao"?"Pendente Aprovao":"Suspensa"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(RM,{className:"h-5 w-5 text-warning"}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-2xl font-bold",children:g.pontuacao}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Confiabilidade"})]})]})]})})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4","data-tour":"stats",children:[a.jsx(it,{children:a.jsxs(At,{className:"pb-3",children:[a.jsx(gr,{children:"Promessas Ativas"}),a.jsxs(Ct,{className:"text-3xl flex items-center gap-2",children:[a.jsx(Tg,{className:"h-6 w-6 text-warning"}),g.entregasPendentes]})]})}),a.jsx(it,{className:"border-2 border-primary/20 bg-primary/5",children:a.jsxs(At,{className:"pb-3",children:[a.jsx(gr,{children:"Em Coleta"}),a.jsxs(Ct,{className:"text-3xl flex items-center gap-2",children:[a.jsx(Yn,{className:"h-6 w-6 text-primary"}),g.entregasEmColeta]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-3",children:[a.jsx(gr,{children:"Entregas no Ms"}),a.jsxs(Ct,{className:"text-3xl flex items-center gap-2",children:[a.jsx(ta,{className:"h-6 w-6 text-success"}),g.entregasMes]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-3",children:[a.jsx(gr,{children:"Peso Total"}),a.jsxs(Ct,{className:"text-3xl flex items-center gap-2",children:[a.jsx(Hs,{className:"h-6 w-6 text-success"}),po(g.pesoTotal,1)]})]})})]}),a.jsxs(yc,{defaultValue:"previstas",className:"w-full","data-tour":"tabs",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-3",children:[a.jsxs(ri,{value:"previstas",children:["Previstas (",s.length,")"]}),a.jsxs(ri,{value:"em_coleta",children:["Em Coleta (",l.length,")"]}),a.jsxs(ri,{value:"realizadas",children:["Finalizadas (",u.length,")"]})]}),a.jsx(Ti,{value:"previstas",className:"space-y-4",children:s.length===0?a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Za,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma entrega prevista no momento"})]})})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(q=>a.jsx(gEt,{entrega:q,onScanQR:()=>w("/cooperative/scan-qrcode")},q.id))})}),a.jsx(Ti,{value:"em_coleta",className:"space-y-4",children:l.length===0?a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma entrega em processo de coleta"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Entregas escaneadas aguardando registro de materiais"})]})})}):a.jsx("div",{className:"space-y-3",children:l.map(q=>a.jsx(it,{className:"border-2 border-primary/30",children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-5 w-5 text-primary"}),a.jsxs("p",{className:"font-medium",children:["Entrega #",q.id.slice(0,8)]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsxs("span",{children:["Recebido: ",new Date(q.data_recebimento).toLocaleString("pt-BR")]}),a.jsx("span",{children:""}),a.jsx(Bt,{variant:"outline",className:"text-xs",children:q.tipo_material})]}),q.peso_estimado&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Peso estimado: ",q.peso_estimado.toFixed(2)," kg"]})]}),a.jsxs(Oe,{onClick:()=>w(`/cooperative/register-materials/${q.id}`),size:"lg",children:[a.jsx(Ql,{className:"mr-2 h-4 w-4"}),"Continuar Registro"]})]})})},q.id))})}),a.jsxs(Ti,{value:"realizadas",className:"space-y-4",children:[a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(LC,{className:"h-4 w-4"}),"Perodo"]}),a.jsxs(wi,{value:h,onValueChange:f,children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"all",children:"Todas as entregas"}),a.jsx(or,{value:"week",children:"ltima semana"}),a.jsx(or,{value:"month",children:"ltimo ms"}),a.jsx(or,{value:"year",children:"ltimo ano"})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Tipo de Material"]}),a.jsxs(wi,{value:m,onValueChange:x,children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"all",children:"Todos os materiais"}),a.jsx(or,{value:"Plstico",children:"Plstico"}),a.jsx(or,{value:"Papel",children:"Papel"}),a.jsx(or,{value:"Vidro",children:"Vidro"}),a.jsx(or,{value:"Metal",children:"Metal"}),a.jsx(or,{value:"Alumnio",children:"Alumnio"}),a.jsx(or,{value:"Laminado",children:"Laminado"})]})]})]})]})})}),u.length===0?a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:h!=="all"||m!=="all"?"Nenhuma entrega encontrada com os filtros selecionados":"Nenhuma entrega realizada"})]})})}):a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs(gr,{children:[u.length," ",u.length===1?"entrega encontrada":"entregas encontradas"]})}),a.jsx(ht,{children:a.jsx("div",{className:"space-y-3",children:u.map(q=>{var Q,re;return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"font-medium",children:["Entrega #",q.id.slice(0,8)]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx("span",{children:new Date(q.data_validacao).toLocaleDateString("pt-BR")}),a.jsx("span",{children:""}),a.jsx(Bt,{variant:"outline",className:"text-xs",children:q.tipo_material})]})]}),a.jsxs("div",{className:"text-right space-y-1",children:[a.jsxs("p",{className:"font-bold text-success",children:[(Q=q.peso_validado)==null?void 0:Q.toFixed(2)," kg"]}),q.peso_rejeito_kg>0&&a.jsxs("p",{className:"text-xs text-destructive",children:["Rejeito: ",(re=q.peso_rejeito_kg)==null?void 0:re.toFixed(2)," kg"]})]})]},q.id)})})})]})]})]}),a.jsxs(it,{className:"bg-primary text-primary-foreground","data-tour":"scan-action",children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:"Pronto para coletar!"}),a.jsx(gr,{className:"text-primary-foreground/80",children:"Escaneie o QR Code do usurio para iniciar"})]}),a.jsx(zu,{className:"h-12 w-12"})]})}),a.jsx(ht,{children:a.jsx(Oe,{onClick:()=>w("/cooperative/scan-qrcode"),variant:"secondary",size:"lg",className:"w-full",children:"Escanear QR Code"})})]})]})]}):a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsx(it,{className:"max-w-md w-full",children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Cs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Carregando cooperativa..."})]})})})})}const fD="qr-code-reader-container";function vEt(){var Q,re,Z,se;const t=nn(),{user:e}=Si(),[r,n]=C.useState("idle"),[i,s]=C.useState(null),[o,l]=C.useState("entrega"),[c,u]=C.useState(""),[d,h]=C.useState([]),[f,m]=C.useState([]),[x,g]=C.useState(!0),y=C.useRef(null),w=C.useRef(!1),S=C.useRef(!0),E=C.useCallback(async()=>{const K=y.current;if(K){try{const X=K.getState();(X===Wa.SCANNING||X===Wa.PAUSED)&&await K.stop()}catch{}try{K.clear()}catch{}y.current=null}},[]);C.useEffect(()=>(S.current=!0,()=>{S.current=!1,E()}),[E]),C.useEffect(()=>{j(),T()},[e]);const j=async()=>{if(e)try{const{data:K}=await Ee.from("cooperativas").select("id").eq("id_user",e.id).single();if(!K)return;const{data:X,error:Y}=await Ee.from("entregas_reciclaveis").select("*").eq("id_cooperativa",K.id).eq("status_promessa","ativa").order("data_geracao",{ascending:!1}).limit(10);if(Y)throw console.error("Erro na query de entregas:",Y),Y;if(X&&X.length>0){const oe=[...new Set(X.map(J=>J.id_usuario))],{data:xe}=await Ee.from("profiles").select("id, nome, telefone").in("id",oe),H=X.map(J=>({...J,usuario:(xe==null?void 0:xe.find(ie=>ie.id===J.id_usuario))||null}));h(H)}else h([])}catch(K){console.error("Erro ao carregar entregas:",K)}finally{g(!1)}},T=async()=>{if(e)try{const{data:K}=await Ee.from("cooperativas").select("id").eq("id_user",e.id).single();if(!K)return;const{data:X,error:Y}=await Ee.from("rotas_coleta").select("*, adesoes_ativas:usuarios_rotas(count)").eq("id_operador",K.id).eq("status","ativa");if(Y)throw console.error("Erro na query de rotas:",Y),Y;X&&m(X)}catch(K){console.error("Erro ao carregar rotas:",K)}},O=async()=>{try{if(n("requesting"),s(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Seu navegador no suporta acesso  cmera");return(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(X=>X.stop()),S.current&&n("granted"),!0}catch(K){return console.error("Erro ao solicitar permisso:",K),S.current&&(K.name==="NotAllowedError"||K.name==="PermissionDeniedError"?(n("denied"),s("Voc negou o acesso  cmera. Permita o acesso nas configuraes do navegador.")):K.name==="NotFoundError"||K.name==="DevicesNotFoundError"?(n("error"),s("Nenhuma cmera foi encontrada no dispositivo.")):K.name==="NotReadableError"||K.name==="TrackStartError"?(n("error"),s("A cmera est sendo usada por outro aplicativo.")):(n("error"),s(K.message||"Erro ao acessar a cmera"))),!1}},I=async()=>{if(!w.current)try{if(await new Promise(Y=>requestAnimationFrame(Y)),!document.getElementById(fD)){console.error("Elemento reader no encontrado"),cr.error("Erro interno",{description:"Elemento do scanner no encontrado"}),n("idle");return}await E();const X=new nSe(fD,{verbose:!1});y.current=X,n("scanning"),await X.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},M,()=>{})}catch(K){if(console.error("Erro ao iniciar scanner:",K),await E(),S.current){const X=(K==null?void 0:K.message)||String(K);X.includes("NotAllowed")||X.includes("Permission")?(n("denied"),s("Permisso de cmera negada")):(n("error"),s("No foi possvel iniciar o scanner")),cr.error("Erro ao iniciar scanner",{description:"Verifique as permisses e tente novamente"})}}},M=async K=>{if(w.current){console.log("[Scanner] J est processando, ignorando leitura duplicada");return}console.log("[Scanner] QR Code lido com sucesso, iniciando processamento..."),w.current=!0,S.current&&n("processing"),await E(),await D(K),w.current=!1},D=async K=>{try{console.log("[QRCode] Dados lidos:",K);let X;try{X=JSON.parse(K),console.log("[QRCode] Dados parseados:",X)}catch(Y){console.error("[QRCode] Erro ao fazer parse do JSON:",Y),cr.error("QR Code invlido",{description:"Formato no reconhecido. Tente escanear novamente."}),S.current&&n("idle");return}console.log("[QRCode] Validando tipo:",X.tipo),X.tipo==="promessa_entrega_ciclik"?await F(X):X.tipo==="adesao_rota_ciclik"?await z(X):(console.warn("[QRCode] Tipo no suportado:",X.tipo),cr.error("QR Code no suportado",{description:`Este tipo de QR Code no pode ser processado aqui. Tipo: ${X.tipo||"indefinido"}`}),S.current&&n("idle"))}catch(X){console.error("[QRCode] Erro ao processar QR Code:",X),cr.error("Erro ao processar",{description:X.message||"Tente novamente"}),S.current&&n("idle")}},z=async K=>{var X,Y,oe,xe;try{console.log("[QRCode] Processando adeso a rota:",K),console.log("[QRCode] Buscando cooperativa do usurio:",e==null?void 0:e.id);const{data:H,error:J}=await Ee.from("cooperativas").select("id").eq("id_user",e==null?void 0:e.id).single();if(J||!H){console.error("[QRCode] Erro ao buscar cooperativa:",J),cr.error("Cooperativa no encontrada"),S.current&&n("idle");return}console.log("[QRCode] Cooperativa encontrada:",H.id),console.log("[QRCode] Buscando adeso - QRCode:",K.qrcode,"Hash:",K.hash);const{data:ie,error:ce}=await Ee.from("usuarios_rotas").select(`
          *,
          rota:rotas_coleta!id_rota (
            id,
            nome,
            id_operador
          ),
          usuario:profiles!id_usuario (
            id,
            nome
          )
        `).eq("qrcode_adesao",K.qrcode).eq("hash_qrcode",K.hash).eq("status","ativa").single();if(ce||!ie){console.error("[QRCode] Erro ao buscar adeso:",ce),cr.error("QR Code invlido",{description:"Adeso no encontrada ou inativa"}),S.current&&n("idle");return}if(console.log("[QRCode] Adeso encontrada:",ie),console.log("[QRCode] Verificando operador - Rota:",(X=ie.rota)==null?void 0:X.id_operador,"Cooperativa:",H.id),((Y=ie.rota)==null?void 0:Y.id_operador)!==H.id){cr.error("QR Code de outra rota",{description:"Esta rota no  operada por sua cooperativa"}),S.current&&n("idle");return}console.log("[QRCode] Criando nova entrega automtica para coleta de rota..."),console.log("[QRCode] ID Usurio Adeso:",ie.id_usuario),console.log("[QRCode] ID Cooperativa:",H.id),console.log("[QRCode] User Auth:",e==null?void 0:e.id);const me=crypto.randomUUID(),he=crypto.randomUUID(),_e=`${ie.id_usuario}-${Date.now()}-${Math.random().toString(36).substring(7)}`;console.log("[QRCode] Dados do INSERT:",{id:me,id_usuario:ie.id_usuario,id_cooperativa:H.id,qrcode_id:he,hash_qrcode:_e});const{data:ue,error:je}=await Ee.from("entregas_reciclaveis").insert({id:me,id_usuario:ie.id_usuario,id_cooperativa:H.id,qrcode_id:he,hash_qrcode:_e,tipo_material:"Rota de Coleta",status:"recebida",status_promessa:"em_coleta",data_geracao:new Date().toISOString(),data_recebimento:new Date().toISOString(),peso_estimado:0,itens_vinculados:{tipo:"rota",id_rota:ie.id_rota,nome_rota:(oe=ie.rota)==null?void 0:oe.nome,id_adesao:ie.id}}).select().single();if(je){console.error("[QRCode] Erro ao criar entrega:",je),cr.error("Erro ao criar entrega",{description:je.message}),S.current&&n("idle");return}console.log("[QRCode] Entrega criada com sucesso:",ue.id),cr.success("QR Code de Rota validado!",{description:`Usurio: ${((xe=ie.usuario)==null?void 0:xe.nome)||"N/A"}. Iniciando registro de coleta...`}),console.log("[QRCode] Redirecionando para registro de materiais:",ue.id),S.current&&t(`/cooperative/register-materials/${ue.id}`)}catch(H){console.error("[QRCode] Erro ao processar adeso a rota:",H),cr.error("Erro ao processar QR Code de rota",{description:H.message||"Tente novamente"}),S.current&&n("idle")}},F=async K=>{try{console.log("[QRCode] Buscando cooperativa do usurio:",e==null?void 0:e.id);const{data:X,error:Y}=await Ee.from("cooperativas").select("id").eq("id_user",e==null?void 0:e.id).single();if(Y||!X){console.error("[QRCode] Erro ao buscar cooperativa:",Y),cr.error("Cooperativa no encontrada"),S.current&&n("idle");return}console.log("[QRCode] Cooperativa encontrada:",X.id),console.log("[QRCode] Buscando entrega com id:",K.id_entrega,"hash:",K.hash);const{data:oe,error:xe}=await Ee.from("entregas_reciclaveis").select("*").eq("id",K.id_entrega).eq("hash_qrcode",K.hash).single();if(xe||!oe){console.error("[QRCode] Erro ao buscar entrega:",xe),console.log("[QRCode] Entrega encontrada:",oe);const{data:ce}=await Ee.from("entregas_reciclaveis").select("id, hash_qrcode, id_cooperativa, status_promessa").eq("id",K.id_entrega).single();ce&&ce.hash_qrcode!==K.hash?cr.error("QR Code invlido",{description:"Hash de segurana no corresponde. O QR Code pode ter sido adulterado."}):cr.error("QR Code invlido",{description:"Entrega no encontrada no sistema."}),S.current&&n("idle");return}if(console.log("[QRCode] Entrega encontrada:",oe.id,"Status:",oe.status_promessa),console.log("[QRCode] Verificando cooperativa - Entrega:",oe.id_cooperativa,"Usurio:",X.id),oe.id_cooperativa!==X.id){cr.error("QR Code de outra cooperativa",{description:"Esta entrega no  destinada  sua cooperativa"}),S.current&&n("idle");return}const H=new Date(oe.data_geracao),J=new Date,ie=(J.getTime()-H.getTime())/(1e3*60*60);if(console.log("[QRCode] Verificando validade - Gerao:",H,"Agora:",J,"Horas:",ie),ie>24){cr.error("QR Code expirado",{description:"Vlido por apenas 24 horas"}),await Ee.from("entregas_reciclaveis").update({status_promessa:"expirada",status:"expirada"}).eq("id",oe.id),S.current&&n("idle");return}if(console.log("[QRCode] Status da promessa:",oe.status_promessa),oe.status_promessa==="finalizada"){cr.error("Entrega j finalizada"),S.current&&n("idle");return}if(oe.status_promessa==="expirada"||oe.status_promessa==="cancelada"){cr.error(`Entrega ${oe.status_promessa}`),S.current&&n("idle");return}oe.status_promessa==="ativa"?(console.log("[QRCode] Atualizando status para em_coleta"),await Ee.from("entregas_reciclaveis").update({status_promessa:"em_coleta",status:"recebida",data_recebimento:new Date().toISOString()}).eq("id",oe.id),cr.success("QR Code validado!",{description:"Iniciando registro..."})):cr.success("Continuando registro..."),console.log("[QRCode] Preparando redirecionamento para:",oe.id),console.log("[QRCode] isMountedRef.current:",S.current),S.current?(console.log("[QRCode] Navegando para /cooperative/register-materials/"+oe.id),t(`/cooperative/register-materials/${oe.id}`)):console.warn("[QRCode] Componente foi desmontado, cancelando navegao")}catch(X){console.error("[QRCode] Erro ao processar entrega:",X),cr.error("Erro ao processar entrega",{description:X.message||"Tente novamente"}),S.current&&n("idle")}},q=async()=>{await O()&&await I()};return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs(Oe,{onClick:()=>t("/cooperative"),variant:"ghost",className:"mb-4",children:[a.jsx(Kn,{className:"mr-2 h-4 w-4"}),"Voltar"]}),a.jsxs(yc,{value:o,onValueChange:K=>l(K),className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-2 mb-6",children:[a.jsxs(ri,{value:"entrega",className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Entrega Direta"]}),a.jsxs(ri,{value:"rota",className:"flex items-center gap-2",children:[a.jsx(Fp,{className:"h-4 w-4"}),"Coleta de Rota"]})]}),a.jsx(Ti,{value:"entrega",className:"space-y-4",children:a.jsxs(it,{className:"border-l-4 border-l-primary",children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx(Ct,{children:"Escanear Entrega Direta"}),a.jsx(gr,{children:"Para usurios que vm at a cooperativa entregar materiais"})]})]})}),a.jsxs(ht,{className:"space-y-6",children:[!x&&d.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium",children:"Esperando agora:"}),a.jsxs(Bt,{variant:"secondary",children:[d.length," ",d.length===1?"entrega":"entregas"]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-primary/20 scrollbar-track-transparent",children:d.map(K=>{var X;return a.jsxs(ka,{className:"bg-primary/5",children:[a.jsx(_v,{className:"h-4 w-4 text-primary"}),a.jsx(Oa,{children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("strong",{children:((X=K.usuario)==null?void 0:X.nome)||"Usurio"}),a.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground mt-1",children:[a.jsx("span",{children:K.tipo_material}),a.jsx("span",{children:""}),a.jsx("span",{children:po(K.peso_estimado||0)}),a.jsx("span",{children:""}),a.jsx(Tg,{className:"h-3 w-3 inline"}),a.jsx("span",{children:$A(new Date(K.data_geracao),{locale:Wi,addSuffix:!0})})]})]})})})]},K.id)})})]}),!x&&d.length===0&&a.jsxs(ka,{children:[a.jsx(K5,{className:"h-4 w-4"}),a.jsx(Oa,{children:"Nenhuma entrega direta aguardando no momento"})]}),a.jsx("div",{id:fD,className:`w-full rounded-lg overflow-hidden bg-muted/30 ${r==="scanning"?"min-h-[300px]":"h-0 overflow-hidden"}`,style:{transition:"height 0.3s ease-in-out",visibility:r==="scanning"?"visible":"hidden"}}),r==="idle"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ka,{children:[a.jsx(K5,{className:"h-4 w-4"}),a.jsx(Oa,{children:"Para escanear QR Codes, precisamos acessar a cmera do seu dispositivo."})]}),a.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[a.jsx("p",{className:"font-medium text-sm",children:"Validaes Automticas:"}),a.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsx("li",{children:" Verifica se o QR Code pertence  sua cooperativa"}),a.jsx("li",{children:" Verifica se est dentro do prazo de 24h"}),a.jsx("li",{children:" Verifica se ainda no foi usado"})]})]}),a.jsxs(Oe,{onClick:q,className:"w-full",size:"lg",children:[a.jsx($S,{className:"mr-2 h-5 w-5"}),"Iniciar Scanner"]})]}),r==="requesting"&&a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx(jn,{className:"h-12 w-12 text-primary animate-spin mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:"Solicitando acesso  cmera..."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Autorize o acesso quando o navegador solicitar"})]})]}),r==="granted"&&a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx(au,{className:"h-12 w-12 text-primary mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:"Permisso concedida!"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Iniciando cmera..."})]})]}),r==="denied"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ka,{variant:"destructive",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:i||"Acesso  cmera foi negado."})]}),a.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Como permitir:"}),' Clique no cone de cadeado na barra de endereo e altere a permisso da cmera para "Permitir".']})}),a.jsxs(Oe,{onClick:q,className:"w-full",size:"lg",children:[a.jsx($S,{className:"mr-2 h-5 w-5"}),"Tentar Novamente"]})]}),r==="processing"&&a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx(jn,{className:"h-12 w-12 text-primary animate-spin mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:"Processando QR Code..."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Aguarde..."})]})]})]})]})}),a.jsx(Ti,{value:"rota",className:"space-y-4",children:a.jsxs(it,{className:"border-l-4 border-l-accent",children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fp,{className:"h-5 w-5 text-accent"}),a.jsxs("div",{children:[a.jsx(Ct,{children:"Escanear Coleta de Rota"}),a.jsx(gr,{children:"Para coletas em rotas programadas"})]})]})}),a.jsxs(ht,{className:"space-y-6",children:[!x&&f.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Selecione a rota que est coletando"}),a.jsxs(wi,{value:c,onValueChange:u,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Escolha a rota"})}),a.jsx(xi,{children:f.map(K=>{var X,Y;return a.jsxs(or,{value:K.id,children:[K.nome," (",((Y=(X=K.adesoes_ativas)==null?void 0:X[0])==null?void 0:Y.count)||0," adeses)"]},K.id)})})]})]}),!x&&f.length===0&&a.jsxs(ka,{children:[a.jsx(K5,{className:"h-4 w-4"}),a.jsx(Oa,{children:"Nenhuma rota ativa atribuda  sua cooperativa"})]}),c&&f.find(K=>K.id===c)&&a.jsxs(ka,{className:"bg-accent/5 border-accent/20",children:[a.jsx(Fp,{className:"h-4 w-4 text-accent"}),a.jsx(Oa,{children:a.jsxs("div",{children:[a.jsx("strong",{className:"text-accent",children:(Q=f.find(K=>K.id===c))==null?void 0:Q.nome}),a.jsxs("p",{className:"text-sm mt-1",children:[((se=(Z=(re=f.find(K=>K.id===c))==null?void 0:re.adesoes_ativas)==null?void 0:Z[0])==null?void 0:se.count)||0," adeses ativas nesta rota"]})]})})]}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{id:fD,className:`w-full rounded-lg overflow-hidden bg-muted/30 ${r==="scanning"?"min-h-[300px]":"h-0 overflow-hidden"}`,style:{transition:"height 0.3s ease-in-out",visibility:r==="scanning"?"visible":"hidden"}}),r==="idle"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ka,{children:[a.jsx(K5,{className:"h-4 w-4"}),a.jsx(Oa,{children:"Escaneie o QR Code do morador que aderiu a esta rota."})]}),a.jsxs(Oe,{onClick:q,className:"w-full",size:"lg",children:[a.jsx($S,{className:"mr-2 h-5 w-5"}),"Iniciar Scanner"]})]}),r==="requesting"&&a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx(jn,{className:"h-12 w-12 text-accent animate-spin mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:"Solicitando acesso  cmera..."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Autorize o acesso quando o navegador solicitar"})]})]}),r==="granted"&&a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx(au,{className:"h-12 w-12 text-accent mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:"Permisso concedida!"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Iniciando cmera..."})]})]}),r==="denied"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ka,{variant:"destructive",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:i||"Acesso  cmera foi negado."})]}),a.jsxs(Oe,{onClick:q,className:"w-full",size:"lg",children:[a.jsx($S,{className:"mr-2 h-5 w-5"}),"Tentar Novamente"]})]}),r==="processing"&&a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx(jn,{className:"h-12 w-12 text-accent animate-spin mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:"Processando QR Code..."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Aguarde..."})]})]})]}),!c&&f.length>0&&a.jsxs(ka,{children:[a.jsx(K5,{className:"h-4 w-4"}),a.jsx(Oa,{children:"Selecione uma rota acima para comear a escanear QR Codes"})]})]})]})})]})]})})}const Ja=C.forwardRef(({className:t,...e},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:Ut("w-full caption-bottom text-sm",t),...e})}));Ja.displayName="Table";const eo=C.forwardRef(({className:t,...e},r)=>a.jsx("thead",{ref:r,className:Ut("[&_tr]:border-b",t),...e}));eo.displayName="TableHeader";const to=C.forwardRef(({className:t,...e},r)=>a.jsx("tbody",{ref:r,className:Ut("[&_tr:last-child]:border-0",t),...e}));to.displayName="TableBody";const yEt=C.forwardRef(({className:t,...e},r)=>a.jsx("tfoot",{ref:r,className:Ut("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));yEt.displayName="TableFooter";const Dn=C.forwardRef(({className:t,...e},r)=>a.jsx("tr",{ref:r,className:Ut("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));Dn.displayName="TableRow";const It=C.forwardRef(({className:t,...e},r)=>a.jsx("th",{ref:r,className:Ut("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));It.displayName="TableHead";const jt=C.forwardRef(({className:t,...e},r)=>a.jsx("td",{ref:r,className:Ut("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));jt.displayName="TableCell";const bEt=C.forwardRef(({className:t,...e},r)=>a.jsx("caption",{ref:r,className:Ut("mt-4 text-sm text-muted-foreground",t),...e}));bEt.displayName="TableCaption";var FSe="AlertDialog",[wEt,u$t]=qo(FSe,[yye]),qv=yye(),BSe=t=>{const{__scopeAlertDialog:e,...r}=t,n=qv(e);return a.jsx(lI,{...n,...r,modal:!0})};BSe.displayName=FSe;var _Et="AlertDialogTrigger",$Se=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,i=qv(r);return a.jsx(h7,{...i,...n,ref:e})});$Se.displayName=_Et;var NEt="AlertDialogPortal",USe=t=>{const{__scopeAlertDialog:e,...r}=t,n=qv(e);return a.jsx(cI,{...n,...r})};USe.displayName=NEt;var SEt="AlertDialogOverlay",zSe=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,i=qv(r);return a.jsx(uN,{...i,...n,ref:e})});zSe.displayName=SEt;var _E="AlertDialogContent",[EEt,jEt]=wEt(_E),AEt=Zpe("AlertDialogContent"),VSe=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...i}=t,s=qv(r),o=C.useRef(null),l=An(e,o),c=C.useRef(null);return a.jsx(IHe,{contentName:_E,titleName:qSe,docsSlug:"alert-dialog",children:a.jsx(EEt,{scope:r,cancelRef:c,children:a.jsxs(dN,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:wr(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(AEt,{children:n}),a.jsx(TEt,{contentRef:o})]})})})});VSe.displayName=_E;var qSe="AlertDialogTitle",HSe=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,i=qv(r);return a.jsx(QC,{...i,...n,ref:e})});HSe.displayName=qSe;var WSe="AlertDialogDescription",GSe=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,i=qv(r);return a.jsx(JC,{...i,...n,ref:e})});GSe.displayName=WSe;var CEt="AlertDialogAction",KSe=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,i=qv(r);return a.jsx(uI,{...i,...n,ref:e})});KSe.displayName=CEt;var XSe="AlertDialogCancel",YSe=C.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:i}=jEt(XSe,r),s=qv(r),o=An(e,i);return a.jsx(uI,{...s,...n,ref:o})});YSe.displayName=XSe;var TEt=({contentRef:t})=>{const e=`\`${_E}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${_E}\` by passing a \`${WSe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${_E}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return C.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},PEt=BSe,kEt=$Se,OEt=USe,ZSe=zSe,QSe=VSe,JSe=KSe,eEe=YSe,tEe=HSe,rEe=GSe;const S_=PEt,IEt=kEt,REt=OEt,nEe=C.forwardRef(({className:t,...e},r)=>a.jsx(ZSe,{className:Ut("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));nEe.displayName=ZSe.displayName;const ib=C.forwardRef(({className:t,...e},r)=>a.jsxs(REt,{children:[a.jsx(nEe,{}),a.jsx(QSe,{ref:r,className:Ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));ib.displayName=QSe.displayName;const sb=({className:t,...e})=>a.jsx("div",{className:Ut("flex flex-col space-y-2 text-center sm:text-left",t),...e});sb.displayName="AlertDialogHeader";const ab=({className:t,...e})=>a.jsx("div",{className:Ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ab.displayName="AlertDialogFooter";const ob=C.forwardRef(({className:t,...e},r)=>a.jsx(tEe,{ref:r,className:Ut("text-lg font-semibold",t),...e}));ob.displayName=tEe.displayName;const lb=C.forwardRef(({className:t,...e},r)=>a.jsx(rEe,{ref:r,className:Ut("text-sm text-muted-foreground",t),...e}));lb.displayName=rEe.displayName;const cb=C.forwardRef(({className:t,...e},r)=>a.jsx(JSe,{ref:r,className:Ut(P3(),t),...e}));cb.displayName=JSe.displayName;const ub=C.forwardRef(({className:t,...e},r)=>a.jsx(eEe,{ref:r,className:Ut(P3({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));ub.displayName=eEe.displayName;const oue={Plstico:["PET","PP","PEAD","PEBD","PVC","PS","OUTROS_PLASTICOS"],Papel:["PAPEL_BRANCO","PAPEL_COLORIDO","PAPELAO_ONDULADO"],Vidro:["VIDRO_TRANSPARENTE","VIDRO_COLORIDO","VIDRO_TEMPERADO"],Metal:["ALUMINIO_LATA","ALUMINIO_PERFIL","ACO"],Alumnio:["ALUMINIO_LATA","ALUMINIO_PERFIL"],Laminado:["LAMINADO_CAFE","LAMINADO_SALGADINHO","LAMINADO_OUTROS"]},lue={PET:"PET (Garrafas)",PP:"PP (Potes)",PEAD:"PEAD (Embalagens rgidas)",PEBD:"PEBD (Sacolas)",PVC:"PVC",PS:"PS (Isopor)",OUTROS_PLASTICOS:"Outros Plsticos",PAPEL_BRANCO:"Papel Branco",PAPEL_COLORIDO:"Papel Colorido",PAPELAO_ONDULADO:"Papelo Ondulado",VIDRO_TRANSPARENTE:"Vidro Transparente",VIDRO_COLORIDO:"Vidro Colorido",VIDRO_TEMPERADO:"Vidro Temperado",ALUMINIO_LATA:"Lata de Alumnio",ALUMINIO_PERFIL:"Perfil de Alumnio",ACO:"Ao",LAMINADO_CAFE:"Laminado de Caf",LAMINADO_SALGADINHO:"Laminado de Salgadinho",LAMINADO_OUTROS:"Outros Laminados",REJEITO:"Rejeito (No Reciclvel)"};function DEt(){var K,X;const t=nn(),{entregaId:e}=o0(),{user:r}=Si(),[n,i]=C.useState(null),[s,o]=C.useState(""),[l,c]=C.useState([]),[u,d]=C.useState(""),[h,f]=C.useState(""),[m,x]=C.useState(""),[g,y]=C.useState(!0),[w,S]=C.useState(!1),[E,j]=C.useState(!1),[T,O]=C.useState(!1),[I,M]=C.useState(!1);C.useEffect(()=>{if(l.length>0&&!g){const Y=setTimeout(()=>{S(!0),setTimeout(()=>S(!1),1e3)},500);return()=>clearTimeout(Y)}},[l,g]),C.useEffect(()=>{D(),z()},[e]);const D=async()=>{try{const{data:Y,error:oe}=await Ee.from("cooperativas").select("id").eq("id_user",r==null?void 0:r.id).maybeSingle();if(oe)throw oe;if(!Y)throw new Error("Cooperativa no encontrada");o(Y.id);const{data:xe,error:H}=await Ee.from("entregas_reciclaveis").select("*").eq("id",e).maybeSingle();if(H)throw H;if(!xe)throw new Error("Entrega no encontrada");i(xe)}catch(Y){cr.error("Erro ao carregar entrega",{description:Y.message}),t("/cooperative")}finally{y(!1)}},z=async()=>{const{data:Y,error:oe}=await Ee.from("materiais_coletados_detalhado").select("*").eq("id_entrega",e);!oe&&Y&&c(Y)},F=async()=>{if(!u||!m){cr.error("Preencha tipo e peso");return}if(u!=="Rejeito"&&!h){cr.error("Selecione o submaterial");return}const Y=parseFloat(m);if(isNaN(Y)||Y<=0){cr.error("Peso invlido");return}try{const{data:oe,error:xe}=await Ee.from("materiais_coletados_detalhado").insert({id_entrega:e,id_cooperativa:s,tipo_material:u,subtipo_material:u==="Rejeito"?"REJEITO":h,peso_kg:Y}).select().single();if(xe)throw xe;c([...l,oe]),d(""),f(""),x(""),cr.success(" Salvo",{duration:1500})}catch(oe){cr.error("Erro ao registrar",{description:oe.message})}},q=async Y=>{try{const{error:oe}=await Ee.from("materiais_coletados_detalhado").delete().eq("id",Y);if(oe)throw oe;c(l.filter(xe=>xe.id!==Y)),cr.success(" Removido",{duration:1500})}catch(oe){cr.error("Erro ao remover",{description:oe.message})}},Q=async()=>{if(l.length===0){cr.error("Adicione pelo menos um material antes de finalizar");return}j(!0);try{const{data:Y,error:oe}=await Ee.from("entregas_reciclaveis").select("status_promessa, status").eq("id",e).single();if(oe)throw oe;if(Y.status_promessa==="finalizada"){cr.error("Esta entrega j foi finalizada anteriormente"),setTimeout(()=>t("/cooperative"),1500);return}const xe=l.reduce((je,ye)=>je+ye.peso_kg,0),H=l.filter(je=>je.subtipo_material==="REJEITO").reduce((je,ye)=>je+ye.peso_kg,0),J=xe-H,{data:ie,error:ce}=await Ee.rpc("calcular_pontos_entrega_finalizada",{p_id_entrega:e});if(ce)throw ce;const me=ie||0,{data:he}=await Ee.from("profiles").select("score_verde").eq("id",n.id_usuario).single();he&&await Ee.from("profiles").update({score_verde:(he.score_verde||0)+me}).eq("id",n.id_usuario);const{error:_e}=await Ee.from("entregas_reciclaveis").update({status_promessa:"finalizada",status:"validada",peso_validado:J,peso_rejeito_kg:H,data_validacao:new Date().toISOString()}).eq("id",e).eq("status_promessa","em_coleta");if(_e)throw _e;n.itens_vinculados&&n.itens_vinculados.length>0&&await Ee.from("materiais_reciclaveis_usuario").update({status:"entregue",data_entrega:new Date().toISOString()}).in("id",n.itens_vinculados);const ue=l.filter(je=>je.subtipo_material!=="REJEITO").map(je=>({id_usuario:n.id_usuario,id_cooperativa:n.id_cooperativa,id_entrega:e,kg:je.peso_kg,submaterial:je.subtipo_material,data_entrega:new Date().toISOString(),status:"disponivel"}));ue.length>0&&await Ee.from("estoque_residuos").insert(ue),await Ee.from("notificacoes").insert({id_usuario:n.id_usuario,tipo:"entrega_finalizada",mensagem:`Sua entrega foi processada! Peso: ${po(J)} | Pontos: +${me}`}),cr.success("Coleta finalizada com sucesso!",{description:`${me} pontos creditados ao usurio`}),setTimeout(()=>{t("/cooperative")},2e3)}catch(Y){cr.error("Erro ao finalizar coleta",{description:Y.message})}finally{j(!1)}},re=async()=>{O(!0);try{if(l.length>0){const{error:oe}=await Ee.from("materiais_coletados_detalhado").delete().eq("id_entrega",e);if(oe)throw oe}const{error:Y}=await Ee.from("entregas_reciclaveis").update({status_promessa:"ativa",status:"gerada",data_recebimento:null}).eq("id",e);if(Y)throw Y;cr.success("Coleta cancelada com sucesso",{description:"A entrega voltou ao status de promessa ativa"}),setTimeout(()=>{t("/cooperative")},1500)}catch(Y){cr.error("Erro ao cancelar coleta",{description:Y.message}),O(!1)}};if(g)return a.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:a.jsx("p",{children:"Carregando..."})});const Z=l.reduce((Y,oe)=>Y+oe.peso_kg,0),se=l.filter(Y=>Y.subtipo_material==="REJEITO").reduce((Y,oe)=>Y+oe.peso_kg,0);return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[a.jsxs(Oe,{onClick:()=>t("/cooperative"),variant:"ghost",children:[a.jsx(Kn,{className:"mr-2 h-4 w-4"}),"Voltar"]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-6 w-6 text-primary"}),"Registrar Materiais Coletados",w&&a.jsxs(Bt,{variant:"outline",className:"ml-auto",children:[a.jsx(FC,{className:"h-3 w-3 mr-1"}),"Salvando..."]})]}),a.jsxs(gr,{children:["Entrega #",(K=n==null?void 0:n.id)==null?void 0:K.slice(0,8)," | Peso estimado: ",po((n==null?void 0:n.peso_estimado)||0)]})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs(ka,{children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsxs(Oa,{children:[" Adicione todos os materiais coletados (mesmo alm dos prometidos)",a.jsx("br",{})," Os dados so salvos automaticamente",a.jsx("br",{}),' Use "Rejeito" para materiais no reciclveis']})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx(it,{className:"bg-primary/5",children:a.jsxs(ht,{className:"pt-6",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Registrado"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:po(Z)})]})}),a.jsx(it,{className:"bg-success/5",children:a.jsxs(ht,{className:"pt-6",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Reciclvel"}),a.jsx("p",{className:"text-2xl font-bold text-success",children:po(Z-se)})]})}),a.jsx(it,{className:"bg-destructive/5",children:a.jsxs(ht,{className:"pt-6",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejeito"}),a.jsx("p",{className:"text-2xl font-bold text-destructive",children:po(se)})]})})]}),a.jsxs(it,{className:"border-2 border-dashed",children:[a.jsx(At,{children:a.jsx(Ct,{className:"text-lg",children:"Adicionar Material"})}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Tipo de Material"}),a.jsxs(wi,{value:u,onValueChange:Y=>{d(Y),f("")},children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione"})}),a.jsxs(xi,{children:[Object.keys(oue).map(Y=>a.jsx(or,{value:Y,children:Y},Y)),a.jsx(or,{value:"Rejeito",children:"Rejeito (No Reciclvel)"})]})]})]}),u&&u!=="Rejeito"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Submaterial"}),a.jsxs(wi,{value:h,onValueChange:f,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione"})}),a.jsx(xi,{children:(X=oue[u])==null?void 0:X.map(Y=>a.jsx(or,{value:Y,children:lue[Y]},Y))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Peso (kg)"}),a.jsx(mt,{type:"number",step:"0.01",min:"0.01",placeholder:"Ex: 1.5",value:m,onChange:Y=>x(Y.target.value),onKeyPress:Y=>{Y.key==="Enter"&&F()}})]})]}),a.jsxs(Oe,{onClick:F,className:"w-full",children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Adicionar Material"]})]})]}),l.length>0&&a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{className:"text-lg",children:"Materiais Registrados"})}),a.jsx(ht,{children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Tipo"}),a.jsx(It,{children:"Submaterial"}),a.jsx(It,{className:"text-right",children:"Peso (kg)"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:l.map(Y=>a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:Y.tipo_material}),a.jsx(jt,{children:a.jsx(Bt,{variant:Y.subtipo_material==="REJEITO"?"destructive":"secondary",children:lue[Y.subtipo_material]})}),a.jsx(jt,{className:"text-right font-mono",children:po(Y.peso_kg)}),a.jsx(jt,{className:"text-right",children:a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>q(Y.id),children:a.jsx(vl,{className:"h-4 w-4 text-destructive"})})})]},Y.id))})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs(Oe,{onClick:()=>M(!0),disabled:T||E,variant:"outline",className:"flex-1 border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",size:"lg",children:[a.jsx(Xa,{className:"mr-2 h-5 w-5"}),T?"Cancelando...":"Cancelar Coleta"]}),a.jsxs(Oe,{onClick:Q,disabled:E||l.length===0||T,className:"flex-1",size:"lg",children:[a.jsx(ta,{className:"mr-2 h-5 w-5"}),E?"Finalizando...":"Finalizar Coleta"]})]})]})]}),a.jsx(S_,{open:I,onOpenChange:M,children:a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsxs(ob,{className:"flex items-center gap-2",children:[a.jsx(Pg,{className:"h-5 w-5 text-destructive"}),"Cancelar Coleta?"]}),a.jsxs(lb,{className:"space-y-3",children:[a.jsxs("p",{children:["Esta ao ir cancelar completamente o processo de coleta e reverter a entrega para o status de ",a.jsx("strong",{children:"promessa ativa"}),"."]}),l.length>0&&a.jsxs(ka,{variant:"destructive",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsxs(Oa,{children:[a.jsx("strong",{children:l.length})," ",l.length===1?"material registrado":"materiais registrados"," ",l.length===1?"ser removido":"sero removidos",a.jsx("br",{}),a.jsxs("span",{className:"text-sm",children:["Peso total: ",po(l.reduce((Y,oe)=>Y+oe.peso_kg,0))]})]})]}),a.jsx("p",{className:"text-sm",children:"Tem certeza que deseja continuar?"})]})]}),a.jsxs(ab,{children:[a.jsx(ub,{disabled:T,children:"No, voltar"}),a.jsx(cb,{onClick:Y=>{Y.preventDefault(),M(!1),re()},disabled:T,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:T?"Cancelando...":"Sim, cancelar coleta"})]})]})})]})})}function MEt(){var D,z;const{user:t}=Si(),[e,r]=C.useState(!1),[n,i]=C.useState(!1),[s,o]=C.useState(""),[l,c]=C.useState(null),[u,d]=C.useState(""),[h,f]=C.useState(!1),[m,x]=C.useState(null),[g,y]=C.useState([]),[w,S]=C.useState(null),E=nn(),{toast:j}=Qi(),T=async()=>{var F;if(!s.trim()){j({title:"Campo obrigatrio",description:"Digite o cdigo QR",variant:"destructive"});return}i(!0);try{const{data:q}=await Ee.from("cooperativas").select("id").eq("id_user",t==null?void 0:t.id).single();if(!q)throw new Error("Cooperativa no encontrada");const{data:Q,error:re}=await Ee.from("entregas_reciclaveis").select(`
          *,
          profiles:id_usuario (nome, telefone)
        `).eq("qrcode_id",s).eq("id_cooperativa",q.id).single();if(re)throw new Error("Entrega no encontrada");const Z=new Date(Q.data_geracao),se=new Date(Z);se.setHours(se.getHours()+24);const K=new Date;if(Q.status==="gerada"&&K>se)throw await Ee.from("entregas_reciclaveis").update({status:"expirada"}).eq("id",Q.id),new Error("Este QR code expirou aps 24 horas. O usurio deve gerar um novo cdigo.");if(Q.status==="expirada")throw new Error("Este QR code j expirou. O usurio deve gerar um novo cdigo.");if(Q.itens_vinculados&&Q.itens_vinculados.length>0){const{data:X,error:Y}=await Ee.from("materiais_reciclaveis_usuario").select("*").in("id",Q.itens_vinculados);!Y&&X&&y(X)}c(Q),d(((F=Q.peso_estimado)==null?void 0:F.toString())||"")}catch(q){j({title:"Erro",description:q.message,variant:"destructive"}),c(null)}finally{i(!1)}},O=async()=>{if(!u||!l){j({title:"Peso obrigatrio",description:"Informe o peso validado",variant:"destructive"});return}r(!0);try{const F=l.status==="gerada"?"recebida":"validada",q={peso_validado:parseFloat(u),status:F};F==="recebida"?q.data_recebimento=new Date().toISOString():F==="validada"&&(q.data_validacao=new Date().toISOString());const{error:Q}=await Ee.from("entregas_reciclaveis").update(q).eq("id",l.id);if(Q)throw Q;if(F==="validada"){const{error:re}=await Ee.functions.invoke("processar-entrega-validada",{body:{entrega_id:l.id,peso_validado:parseFloat(u)}});re&&console.error("Erro ao processar entrega:",re)}j({title:"Entrega validada!",description:`Peso de ${u}kg registrado com sucesso`}),F==="validada"&&(x({tipo_material:l.tipo_material,peso_validado:parseFloat(u)}),f(!0)),o(""),c(null),d("")}catch(F){j({title:"Erro",description:F.message,variant:"destructive"})}finally{r(!1)}},I=async(F,q)=>{if(!F||!q){S(null);return}try{const{data:Q}=await Ee.from("materiais_pontuacao").select("pontos_por_6kg").eq("tipo_material",(l==null?void 0:l.tipo_material)||"misto").single(),re=(Q==null?void 0:Q.pontos_por_6kg)||20,Z=Math.round(q*re/6),se=Math.abs((q-F)/F)*100,K=Math.abs(q-F),X=se<=10;let Y=1,oe=Z;X||(Y=Math.max(0,1-(se-10)/100),oe=Math.round(Z*Y)),S({variacao_percentual:se,variacao_absoluta:K,dentro_margem:X,fator_pontuacao:Y,pontos_base:Z,pontos_finais:oe})}catch(Q){console.error("Erro ao calcular variao:",Q)}};C.useEffect(()=>{l!=null&&l.peso_estimado&&u?I(l.peso_estimado,parseFloat(u)):S(null)},[u,l]);const M=F=>({gerada:a.jsx(Bt,{variant:"secondary",children:"Aguardando Recebimento"}),recebida:a.jsx(Bt,{className:"bg-warning",children:"Recebida"}),validada:a.jsx(Bt,{className:"bg-success",children:"Validada"}),fechada:a.jsx(Bt,{children:"Fechada"})})[F]||a.jsx(Bt,{children:F});return a.jsxs("div",{className:"min-h-screen bg-background p-4 md:p-8",children:[a.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>E("/cooperative"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Validar Entrega"}),a.jsx("p",{className:"text-muted-foreground",children:"Busque pelo cdigo QR e registre o peso"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Buscar Entrega"}),a.jsx(gr,{children:"Digite ou escaneie o cdigo QR da entrega"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"flex-1",children:[a.jsx(nt,{htmlFor:"qrcode",children:"Cdigo QR"}),a.jsx(mt,{id:"qrcode",placeholder:"CICLIK-...",value:s,onChange:F=>o(F.target.value),onKeyDown:F=>F.key==="Enter"&&T()})]})}),a.jsxs(Oe,{onClick:T,disabled:n,className:"w-full",children:[n?a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsx(Jp,{className:"mr-2 h-4 w-4"}),"Buscar Entrega"]})]})]}),l&&a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ct,{children:"Detalhes da Entrega"}),M(l.status)]})}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Usurio"}),a.jsx("p",{className:"font-medium",children:(D=l.profiles)==null?void 0:D.nome})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Telefone"}),a.jsx("p",{className:"font-medium",children:((z=l.profiles)==null?void 0:z.telefone)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Material"}),a.jsx("p",{className:"font-medium",children:l.tipo_material})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Peso Estimado"}),a.jsxs("p",{className:"font-medium",children:[l.peso_estimado||"N/A"," kg"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Data Gerao"}),a.jsx("p",{className:"font-medium",children:new Date(l.data_geracao).toLocaleDateString("pt-BR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Cdigo"}),a.jsx("p",{className:"font-mono text-xs",children:l.qrcode_id})]})]}),g.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[a.jsxs("p",{className:"font-medium text-sm",children:["Materiais para Entrega (",g.length,"):"]}),a.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(F=>a.jsxs("div",{className:"text-sm p-2 bg-muted rounded",children:[" ",F.descricao," (",F.tipo_embalagem," - ",F.percentual_reciclabilidade,"% reciclvel)"]},F.id))})]}),l.status!=="fechada"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[a.jsx(nt,{htmlFor:"peso",children:"Peso Validado (kg)"}),a.jsx(mt,{id:"peso",type:"number",step:"0.001",placeholder:"Ex: 5.5",value:u,onChange:F=>d(F.target.value)})]}),w&&l.peso_estimado&&a.jsx(it,{className:`border-2 ${w.dentro_margem?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-amber-500 bg-amber-50 dark:bg-amber-950/20"}`,children:a.jsxs(ht,{className:"pt-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(g3,{className:`h-5 w-5 ${w.dentro_margem?"text-green-600":"text-amber-600"}`}),a.jsx("span",{className:"font-semibold",children:"Anlise de Variao"})]}),a.jsx(Bt,{className:w.dentro_margem?"bg-green-600 hover:bg-green-700":"bg-amber-600 hover:bg-amber-700",children:w.dentro_margem?"Conforme":"Fora da Margem"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Peso Estimado"}),a.jsxs("p",{className:"text-lg font-bold",children:[l.peso_estimado.toFixed(3)," kg"]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Peso Validado"}),a.jsxs("p",{className:"text-lg font-bold",children:[parseFloat(u).toFixed(3)," kg"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[w.variacao_percentual===0?a.jsx(g3,{className:"h-4 w-4 text-green-600"}):parseFloat(u)>l.peso_estimado?a.jsx(Hs,{className:"h-4 w-4 text-amber-600"}):a.jsx(BX,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Variao:"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:`text-lg font-bold ${w.dentro_margem?"text-green-600":"text-amber-600"}`,children:[w.variacao_percentual.toFixed(2),"%"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",w.variacao_absoluta>0?"+":"",w.variacao_absoluta.toFixed(3)," kg)"]})]})]}),a.jsxs("div",{className:"border-t pt-3 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Pontos Base:"}),a.jsxs("span",{className:"font-medium",children:[w.pontos_base," pts"]})]}),!w.dentro_margem&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Fator de Reduo:"}),a.jsxs("span",{className:"font-medium text-amber-600",children:[(w.fator_pontuacao*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-lg font-bold border-t pt-2",children:[a.jsx("span",{children:"Pontos Finais:"}),a.jsxs("span",{className:w.dentro_margem?"text-green-600":"text-amber-600",children:[w.pontos_finais," pts"]})]})]}),!w.dentro_margem&&a.jsxs(ka,{className:"border-amber-600",children:[a.jsx(Pg,{className:"h-4 w-4 text-amber-600"}),a.jsxs(Oa,{className:"text-sm",children:["A variao de ",w.variacao_percentual.toFixed(2),"% excede a margem de 10%. Os pontos foram reduzidos proporcionalmente."]})]})]})}),a.jsxs(Oe,{onClick:O,disabled:e,className:"w-full",size:"lg",children:[e?a.jsx(jn,{className:"mr-2 h-5 w-5 animate-spin"}):a.jsx(ta,{className:"mr-2 h-5 w-5"}),"Confirmar Validao",w&&` (+${w.pontos_finais} pts)`]})]})]})]})]}),a.jsx(hs,{open:h,onOpenChange:f,children:a.jsxs(as,{className:"sm:max-w-md",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Entrega Validada com Sucesso! "})}),a.jsxs("div",{className:"space-y-4",children:[m&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[a.jsx("p",{className:"text-lg font-semibold",children:m.tipo_material}),a.jsxs("p",{className:"text-2xl font-bold text-primary mt-2",children:[m.peso_validado.toFixed(1)," kg"]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"validados pela cooperativa"})]}),a.jsx($Q,{shareData:{type:"entrega_validada",tipo_material:m.tipo_material,peso_validado:m.peso_validado}})]}),a.jsx(Oe,{onClick:()=>f(!1),className:"w-full",variant:"outline",children:"Fechar"})]})]})})]})}function LEt(){const{user:t}=Si(),[e,r]=C.useState([]),n=nn();C.useEffect(()=>{i()},[t]);const i=async()=>{if(!t)return;const{data:l}=await Ee.from("cooperativas").select("id").eq("id_user",t.id).single();if(!l)return;const{data:c}=await Ee.from("entregas_reciclaveis").select(`
        *,
        profiles:id_usuario (nome)
      `).eq("id_cooperativa",l.id).order("data_geracao",{ascending:!1});c&&r(c)},s=l=>({gerada:a.jsx(Bt,{variant:"secondary",children:"Aguardando"}),recebida:a.jsx(Bt,{className:"bg-warning",children:"Recebida"}),validada:a.jsx(Bt,{className:"bg-success",children:"Validada"}),fechada:a.jsx(Bt,{children:"Fechada"})})[l]||a.jsx(Bt,{children:l}),o=l=>l==="all"?e:e.filter(c=>c.status===l);return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>n("/cooperative"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Entregas Recebidas"}),a.jsx("p",{className:"text-muted-foreground",children:"Histrico de todas as entregas"})]})]}),a.jsxs(yc,{defaultValue:"all",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-4",children:[a.jsx(ri,{value:"all",children:"Todas"}),a.jsx(ri,{value:"gerada",children:"Pendentes"}),a.jsx(ri,{value:"recebida",children:"Recebidas"}),a.jsx(ri,{value:"validada",children:"Validadas"})]}),["all","gerada","recebida","validada"].map(l=>a.jsxs(Ti,{value:l,className:"space-y-4",children:[o(l).map(c=>{var u;return a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx(Yn,{className:"h-5 w-5 text-primary mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Ct,{className:"text-lg",children:c.tipo_material}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Usurio: ",(u=c.profiles)==null?void 0:u.nome]})]})]}),s(c.status)]})}),a.jsx(ht,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Peso Estimado"}),a.jsxs("p",{className:"font-medium",children:[c.peso_estimado||"N/A"," kg"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Peso Validado"}),a.jsxs("p",{className:"font-medium",children:[c.peso_validado||"N/A"," kg"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Data Gerao"}),a.jsx("p",{className:"font-medium",children:new Date(c.data_geracao).toLocaleDateString("pt-BR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Cdigo QR"}),a.jsx("p",{className:"font-mono text-xs",children:c.qrcode_id})]})]})})]},c.id)}),o(l).length===0&&a.jsx(it,{children:a.jsxs(ht,{className:"py-12 text-center",children:[a.jsx(Yn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma entrega encontrada"})]})})]},l))]})]})})}function FEt(){const{signOut:t}=Si(),[e,r]=C.useState({usuarios:0,missoes:0,cupons:0,cooperativas:0,empresas:0,entregas:0}),n=nn(),{run:i,completeTour:s,setRun:o}=kQ({tourKey:"admin_dashboard",autoStart:!0}),l=[{target:".tour-admin-header",content:"Bem-vindo ao Painel Administrativo! Aqui voc tem controle total do sistema ReciclaA.",disableBeacon:!0},{target:".tour-admin-stats",content:"Veja estatsticas gerais: total de usurios, misses, cupons, cooperativas, empresas e entregas registradas."},{target:".tour-admin-docs",content:"Gere documentao completa em PDF com todas as funcionalidades do sistema para referncia."},{target:".tour-admin-missions",content:"Crie e gerencie misses educativas que os usurios podem completar para ganhar pontos."},{target:".tour-admin-users",content:"Visualize e edite informaes dos usurios, incluindo pontuao e nvel."},{target:".tour-admin-kpis",content:"Acesse relatrios detalhados e KPIs do sistema com anlises comparativas e filtros geogrficos."}],c=()=>{s()};C.useEffect(()=>{u()},[]);const u=async()=>{const{data:f}=await Ee.from("profiles").select("id, tipo_pessoa, cpf, cnpj, email, created_at, data_cadastro").not("email","is",null).not("nome","is",null),x=((f==null?void 0:f.filter(j=>j.tipo_pessoa==="PF"&&j.cpf&&j.cpf.length>=11||j.tipo_pessoa==="PJ"&&j.cnpj&&j.cnpj.length>=14))||[]).reduce((j,T)=>{const O=T.tipo_pessoa==="PF"?T.cpf:T.cnpj,I=j.findIndex(M=>(M.tipo_pessoa==="PF"?M.cpf:M.cnpj)===O||M.email===T.email);if(I===-1)j.push(T);else{const M=j[I],D=new Date(M.created_at||M.data_cadastro);new Date(T.created_at||T.data_cadastro)>D&&(j[I]=T)}return j},[]),[g,y,w,S,E]=await Promise.all([Ee.from("missoes").select("id",{count:"exact",head:!0}),Ee.from("cupons").select("id",{count:"exact",head:!0}),Ee.from("cooperativas").select("id",{count:"exact",head:!0}),Ee.from("empresas").select("id",{count:"exact",head:!0}),Ee.from("entregas_reciclaveis").select("id",{count:"exact",head:!0})]);r({usuarios:x.length,missoes:g.count||0,cupons:y.count||0,cooperativas:w.count||0,empresas:S.count||0,entregas:E.count||0})},d={primary:{bg:"bg-primary/10",text:"text-primary"},accent:{bg:"bg-accent/10",text:"text-accent"},success:{bg:"bg-success/10",text:"text-success"},warning:{bg:"bg-warning/10",text:"text-warning"},secondary:{bg:"bg-secondary/10",text:"text-secondary-foreground"},muted:{bg:"bg-muted/50",text:"text-muted-foreground"}},h=[{title:"Documentao do Sistema",description:"Gerar e visualizar documentao completa",icon:Ql,color:"warning",path:"/admin/documentation"},{title:"Gesto de Termos de Uso",description:"Gerenciar termos, polticas e aceites",icon:ev,color:"primary",path:"/admin/termos"},{title:"Gesto de Misses",description:"Criar e gerenciar misses",icon:_m,color:"primary",path:"/admin/missions"},{title:"Gesto de Cupons",description:"Importar e gerenciar cupons",icon:Hu,color:"accent",path:"/admin/coupons"},{title:"Gesto de Operadores Logsticos",description:"Cooperativas, Rotas Ciclik e Operadores",icon:Cs,color:"success",path:"/admin/operadores-logisticos"},{title:"Gesto de Rotas de Coleta",description:"Configurar rotas, reas e adeses",icon:Fp,color:"primary",path:"/admin/rotas"},{title:"Interesses por Funcionalidade",description:"Demanda de usurios por localidade",icon:Dm,color:"warning",path:"/admin/interesses"},{title:"Gesto de Empresas",description:"Gerenciar empresas parceiras e mtricas",icon:eu,color:"secondary",path:"/admin/companies"},{title:"Gesto CDV",description:"Certificados Digitais Verdes e reconciliao",icon:_m,color:"success",path:"/admin/cdv"},{title:"Gesto de Produtos",description:"Cadastro de produtos Ciclik com GTIN e NCM",icon:Yn,color:"primary",path:"/admin/products"},{title:"Relatrio de Produtos",description:"Produtos no cadastrados nas notas fiscais",icon:Hs,color:"warning",path:"/admin/products/report"},{title:"Gesto de Usurios",description:"Ver e editar usurios",icon:yl,color:"muted",path:"/admin/users"},{title:"KPIs e Relatrios",description:"Visualizar mtricas gerais",icon:D_,color:"warning",path:"/admin/kpis"},{title:"Configuraes do Sistema",description:"Gerenciar configuraes globais",icon:OM,color:"secondary",path:"/admin/settings"},{title:"Gesto de Gamificao",description:"Configurar pontos de atividades",icon:_m,color:"primary",path:"/admin/gamification"},{title:"Auditoria de Pontos",description:"Relatrio de discrepncias e reclculo",icon:D_,color:"warning",path:"/admin/points-audit"},{title:"Promessas de Entrega",description:"Rastreamento de entregas via QR Code",icon:Yn,color:"primary",path:"/admin/delivery-promises"}];return a.jsxs($v,{children:[a.jsx(xZ,{steps:l,run:i,onComplete:c,onSkip:c}),a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between tour-admin-header",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"rounded-full bg-primary p-2",children:a.jsx(OM,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Painel Administrativo"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ciclik Digital Verde"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"hidden md:flex gap-2",children:[a.jsx(Nf,{className:"h-4 w-4"}),"Tour Guiado"]}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:t,children:a.jsx(wv,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6 tour-admin-stats",children:[a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Usurios"}),a.jsxs(Ct,{className:"text-2xl flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:a.jsx(yl,{className:"h-5 w-5 text-primary"})}),e.usuarios]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Misses"}),a.jsxs(Ct,{className:"text-2xl flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:a.jsx(_m,{className:"h-5 w-5 text-primary"})}),e.missoes]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Cupons"}),a.jsxs(Ct,{className:"text-2xl flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg bg-accent/10 p-2",children:a.jsx(Hu,{className:"h-5 w-5 text-accent"})}),e.cupons]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Operadores"}),a.jsxs(Ct,{className:"text-2xl flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg bg-success/10 p-2",children:a.jsx(Cs,{className:"h-5 w-5 text-success"})}),e.cooperativas]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Empresas"}),a.jsxs(Ct,{className:"text-2xl flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg bg-secondary/10 p-2",children:a.jsx(eu,{className:"h-5 w-5 text-secondary-foreground"})}),e.empresas]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Entregas"}),a.jsxs(Ct,{className:"text-2xl flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg bg-warning/10 p-2",children:a.jsx(Hs,{className:"h-5 w-5 text-warning"})}),e.entregas]})]})})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map((f,m)=>{const x=d[f.color];return a.jsx(it,{className:`cursor-pointer transition-all hover:shadow-lg hover:scale-105 ${m===0?"tour-admin-docs":m===2?"tour-admin-missions":m===5?"tour-admin-users":m===6?"tour-admin-kpis":""}`,onClick:()=>n(f.path),children:a.jsx(At,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`rounded-lg ${x.bg} p-3`,children:a.jsx(f.icon,{className:`h-8 w-8 ${x.text}`})}),a.jsxs("div",{children:[a.jsx(Ct,{className:"text-lg",children:f.title}),a.jsx(gr,{children:f.description})]})]})})},f.path)})})]})})]})}function BEt(){const[t,e]=C.useState([]),r=nn(),{toast:n}=Qi();C.useEffect(()=>{i()},[]);const i=async()=>{const{data:o}=await Ee.from("missoes").select("*, questoes_missao(*)").order("ordem",{ascending:!0});o&&e(o)},s=async o=>{if(confirm("Tem certeza que deseja excluir esta misso?"))try{const{error:l}=await Ee.from("missoes").delete().eq("id",o);if(l)throw l;n({title:"Misso excluda!"}),i()}catch(l){n({title:"Erro",description:l.message,variant:"destructive"})}};return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>r("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsx("h1",{className:"text-3xl font-bold",children:"Gerenciar Misses Educacionais"})]}),a.jsxs(Oe,{onClick:()=>r("/admin/missions/edit/new"),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Nova Misso"]})]}),a.jsx("div",{className:"grid gap-4",children:t.length===0?a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsx("p",{className:"text-center text-muted-foreground",children:"Nenhuma misso cadastrada"})})}):t.map(o=>{var l;return a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ct,{children:o.titulo}),a.jsx(Bt,{variant:o.status==="ativa"?"default":"secondary",children:o.status})]}),a.jsx(gr,{children:o.descricao}),a.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ql,{className:"h-4 w-4"}),o.apostila_pdf_url?"Com apostila":"Sem apostila"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(DM,{className:"h-4 w-4"}),o.video_url?"Com vdeo":"Sem vdeo"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Nf,{className:"h-4 w-4"}),((l=o.questoes_missao)==null?void 0:l.length)||0," questes"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>r(`/admin/missions/edit/${o.id}`),children:a.jsx(BC,{className:"h-4 w-4"})}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>s(o.id),children:a.jsx(vl,{className:"h-4 w-4"})})]})]})}),a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{children:["Ordem: ",o.ordem]}),a.jsxs("span",{children:[o.pontos," pontos"]})]})})]},o.id)})})]})})}function $Et(){const{id:t}=o0(),e=nn(),{toast:r}=Qi(),n=t==="new",[i,s]=C.useState(!n),[o,l]=C.useState(!1),[c,u]=C.useState({titulo:"",descricao:"",pontos:0,valor_credito:0,status:"ativa",video_url:"",ordem:0}),[d,h]=C.useState([]),[f,m]=C.useState({pergunta:"",alternativa_a:"",alternativa_b:"",alternativa_c:"",alternativa_d:"",resposta_correta:"A",explicacao:"",ordem:0});C.useEffect(()=>{!n&&t&&x(t)},[t,n]);const x=async S=>{try{const{data:E,error:j}=await Ee.from("missoes").select("*").eq("id",S).single();if(j)throw j;if(E){u({titulo:E.titulo,descricao:E.descricao,pontos:E.pontos,valor_credito:E.valor_credito||0,status:E.status||"ativa",video_url:E.video_url||"",ordem:E.ordem});const{data:T}=await Ee.from("questoes_missao").select("*").eq("id_missao",S).order("ordem",{ascending:!0});T&&h(T)}}catch(E){r({title:"Erro ao carregar misso",description:E.message,variant:"destructive"}),e("/admin/missions")}finally{s(!1)}},g=async S=>{S.preventDefault(),l(!0);try{let E=t;if(n){const{data:j,error:T}=await Ee.from("missoes").insert({...c,tipo:"educacao"}).select().single();if(T)throw T;E=j.id}else{const{error:j}=await Ee.from("missoes").update(c).eq("id",t);if(j)throw j}if(E&&(n||await Ee.from("questoes_missao").delete().eq("id_missao",E),d.length>0)){const j=d.map((O,I)=>({pergunta:O.pergunta,alternativa_a:O.alternativa_a,alternativa_b:O.alternativa_b,alternativa_c:O.alternativa_c,alternativa_d:O.alternativa_d,resposta_correta:O.resposta_correta,explicacao:O.explicacao,ordem:I,id_missao:E})),{error:T}=await Ee.from("questoes_missao").insert(j);if(T)throw T}r({title:n?"Misso criada!":"Misso atualizada!"}),e("/admin/missions")}catch(E){r({title:"Erro",description:E.message,variant:"destructive"})}finally{l(!1)}},y=()=>{if(!f.pergunta){r({title:"Preencha a pergunta",variant:"destructive"});return}h([...d,{...f,ordem:d.length}]),m({pergunta:"",alternativa_a:"",alternativa_b:"",alternativa_c:"",alternativa_d:"",resposta_correta:"A",explicacao:"",ordem:0})},w=S=>{h(d.filter((E,j)=>j!==S))};return i?a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8 flex items-center justify-center",children:a.jsx("p",{children:"Carregando..."})}):a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>e("/admin/missions"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-3xl font-bold",children:n?"Nova Misso":"Editar Misso"})]}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{children:"Informaes da Misso"})}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"titulo",children:"Ttulo"}),a.jsx(mt,{id:"titulo",value:c.titulo,onChange:S=>u({...c,titulo:S.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"descricao",children:"Descrio"}),a.jsx(Od,{id:"descricao",value:c.descricao,onChange:S=>u({...c,descricao:S.target.value}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"pontos",children:"Pontos"}),a.jsx(mt,{id:"pontos",type:"number",value:c.pontos,onChange:S=>u({...c,pontos:parseInt(S.target.value)||0}),required:!0})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"valor_credito",children:"Valor de Crdito (R$)"}),a.jsx(mt,{id:"valor_credito",type:"number",step:"0.01",value:c.valor_credito,onChange:S=>u({...c,valor_credito:parseFloat(S.target.value)||0}),placeholder:"20.00"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Crditos concedidos ao completar esta misso"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"ordem",children:"Ordem"}),a.jsx(mt,{id:"ordem",type:"number",value:c.ordem,onChange:S=>u({...c,ordem:parseInt(S.target.value)||0}),required:!0})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"status",children:"Status"}),a.jsxs(wi,{value:c.status,onValueChange:S=>u({...c,status:S}),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"ativa",children:"Ativa"}),a.jsx(or,{value:"inativa",children:"Inativa"})]})]})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"video_url",children:"URL do Vdeo"}),a.jsx(mt,{id:"video_url",value:c.video_url,onChange:S=>u({...c,video_url:S.target.value}),placeholder:"https://youtube.com/embed/..."}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Voc pode abrir o YouTube em outra aba para copiar o link"})]})]})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs(Ct,{children:["Questes do Quiz (",d.length,")"]})}),a.jsxs(ht,{className:"space-y-4",children:[d.length>0&&a.jsx("div",{className:"space-y-2",children:d.map((S,E)=>a.jsxs("div",{className:"flex items-start justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium",children:[E+1,". ",S.pergunta]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Resposta: ",S.resposta_correta]})]}),a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(E),children:a.jsx(vl,{className:"h-4 w-4"})})]},E))}),a.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/50",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Pergunta"}),a.jsx(mt,{value:f.pergunta,onChange:S=>m({...f,pergunta:S.target.value}),placeholder:"Digite a pergunta"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Alternativa A"}),a.jsx(mt,{value:f.alternativa_a,onChange:S=>m({...f,alternativa_a:S.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Alternativa B"}),a.jsx(mt,{value:f.alternativa_b,onChange:S=>m({...f,alternativa_b:S.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Alternativa C"}),a.jsx(mt,{value:f.alternativa_c,onChange:S=>m({...f,alternativa_c:S.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Alternativa D"}),a.jsx(mt,{value:f.alternativa_d,onChange:S=>m({...f,alternativa_d:S.target.value})})]})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Resposta Correta"}),a.jsxs(wi,{value:f.resposta_correta,onValueChange:S=>m({...f,resposta_correta:S}),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"A",children:"A"}),a.jsx(or,{value:"B",children:"B"}),a.jsx(or,{value:"C",children:"C"}),a.jsx(or,{value:"D",children:"D"})]})]})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Explicao da Resposta (opcional)"}),a.jsx(Od,{value:f.explicacao,onChange:S=>m({...f,explicacao:S.target.value}),placeholder:"Explique por que esta  a resposta correta...",rows:3})]}),a.jsxs(Oe,{type:"button",onClick:y,variant:"outline",className:"w-full",children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Adicionar Questo"]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(Oe,{type:"button",variant:"outline",onClick:()=>e("/admin/missions"),className:"flex-1",children:"Cancelar"}),a.jsxs(Oe,{type:"submit",className:"flex-1",disabled:o,children:[a.jsx(FC,{className:"mr-2 h-4 w-4"}),o?"Salvando...":n?"Criar Misso":"Salvar Alteraes"]})]})]})]})})}function UEt(){const[t,e]=C.useState([]),[r,n]=C.useState(!1),[i,s]=C.useState(!1),[o,l]=C.useState(""),c=nn(),{toast:u}=Qi(),[d,h]=C.useState({marketplace:"",codigo:"",valor:"",minimo_compra:"",data_validade:"",quantidade_total:"1"});C.useEffect(()=>{f()},[]);const f=async()=>{const{data:T}=await Ee.from("cupons").select("*").order("data_resgate",{ascending:!1,nullsFirst:!1});T&&e(T)},m=()=>{h({marketplace:"",codigo:"",valor:"",minimo_compra:"",data_validade:"",quantidade_total:"1"})},x=async T=>{T.preventDefault();try{const{error:O}=await Ee.from("cupons").insert({marketplace:d.marketplace,codigo:d.codigo,valor_reais:parseFloat(d.valor),minimo_compra:parseFloat(d.minimo_compra),data_validade:d.data_validade||null,quantidade_total:parseInt(d.quantidade_total),quantidade_disponivel:parseInt(d.quantidade_total),status:"disponivel"});if(O)throw O;u({title:"Cupom criado!"}),n(!1),m(),f()}catch(O){u({title:"Erro",description:O.message,variant:"destructive"})}},g=async()=>{try{const O=o.trim().split(`
`).filter(M=>M.trim()&&!M.startsWith("Marketplace")).map(M=>{const[D,z,F,q,Q,re]=M.split(","),Z=parseInt((re==null?void 0:re.trim())||"1");return{marketplace:D.trim(),codigo:z.trim(),valor_reais:parseFloat(F.trim()),minimo_compra:parseFloat(q.trim()),data_validade:(Q==null?void 0:Q.trim())||null,quantidade_total:Z,quantidade_disponivel:Z,status:"disponivel"}}),{error:I}=await Ee.from("cupons").insert(O);if(I)throw I;u({title:"Importao concluda!",description:`${O.length} cupons importados`}),s(!1),l(""),f()}catch(T){u({title:"Erro na importao",description:T.message,variant:"destructive"})}},y=()=>{const T=`Marketplace,Codigo,Valor,Minimo_Compra,Data_Validade,Quantidade
Amazon,VERDE50,50.00,200.00,2025-12-31,10
iFood,ECO30,30.00,150.00,2025-12-31,5
Rappi,SUSTENTA25,25.00,100.00,2025-06-30,15`,O=new Blob([T],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),M=URL.createObjectURL(O);I.setAttribute("href",M),I.setAttribute("download","modelo_importacao_cupons.csv"),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I),u({title:"Template baixado!",description:"Preencha a planilha e importe de volta"})},w=async T=>{if(confirm("Tem certeza que deseja excluir este cupom?"))try{const{error:O}=await Ee.from("cupons").delete().eq("id",T);if(O)throw O;u({title:"Cupom excludo!"}),f()}catch(O){u({title:"Erro",description:O.message,variant:"destructive"})}},S=T=>({disponivel:a.jsx(Bt,{className:"bg-success text-white",children:"Disponvel"}),reservado:a.jsx(Bt,{className:"bg-warning text-white",children:"Reservado"}),usado:a.jsx(Bt,{variant:"secondary",className:"text-white",children:"Usado"})})[T]||a.jsx(Bt,{className:"text-white",children:T}),E=T=>T==="all"?t:t.filter(O=>O.status===T),j=()=>{const T={};return t.forEach(O=>{T[O.marketplace]||(T[O.marketplace]={total:0,disponivel:0,usado:0}),T[O.marketplace].total++,O.status==="disponivel"&&T[O.marketplace].disponivel++,O.status==="usado"&&T[O.marketplace].usado++}),T};return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>c("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Gesto de Cupons"}),a.jsx("p",{className:"text-muted-foreground",children:"Criar e importar cupons em lote"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(hs,{open:i,onOpenChange:s,children:[a.jsx(X3,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",children:[a.jsx(x3,{className:"mr-2 h-4 w-4"}),"Importar em Lote"]})}),a.jsxs(as,{className:"max-w-2xl",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Importao em Lote"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(nt,{children:"Formato CSV"}),a.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:y,children:[a.jsx(ou,{className:"mr-2 h-4 w-4"}),"Baixar Modelo"]})]}),a.jsx("div",{className:"space-y-2",children:a.jsx(Od,{value:o,onChange:T=>l(T.target.value),placeholder:`Marketplace,Codigo,Valor,Minimo_Compra,Data_Validade,Quantidade
Amazon,VERDE50,50.00,200.00,2025-12-31,10`,rows:10,className:"font-mono text-sm"})}),a.jsxs("div",{className:"bg-muted p-3 rounded-lg text-sm",children:[a.jsx("p",{className:"font-semibold mb-2",children:"Formato:"}),a.jsxs("code",{className:"text-xs",children:["Marketplace,Codigo,Valor,Minimo_Compra,Data_Validade,Quantidade",a.jsx("br",{}),"Amazon,VERDE50,50.00,200.00,2025-12-31,10",a.jsx("br",{}),"iFood,ECO30,30.00,150.00,2025-12-31,5"]}),a.jsxs("p",{className:"mt-2 text-muted-foreground",children:[a.jsx("strong",{children:"Dica:"})," Baixe o modelo, preencha no Excel/Google Sheets e cole aqui."]})]}),a.jsx(Oe,{onClick:g,className:"w-full",children:"Importar Cupons"})]})]})]}),a.jsxs(hs,{open:r,onOpenChange:n,children:[a.jsx(X3,{asChild:!0,children:a.jsxs(Oe,{onClick:m,children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Novo Cupom"]})}),a.jsxs(as,{children:[a.jsx(fs,{children:a.jsx(ms,{children:"Novo Cupom"})}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Marketplace"}),a.jsx(mt,{value:d.marketplace,onChange:T=>h({...d,marketplace:T.target.value}),placeholder:"Amazon, iFood, Rappi...",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Cdigo do Cupom"}),a.jsx(mt,{value:d.codigo,onChange:T=>h({...d,codigo:T.target.value}),placeholder:"VERDE50OFF",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Valor (R$)"}),a.jsx(mt,{type:"number",step:"0.01",value:d.valor,onChange:T=>h({...d,valor:T.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Mnimo (R$)"}),a.jsx(mt,{type:"number",step:"0.01",value:d.minimo_compra,onChange:T=>h({...d,minimo_compra:T.target.value}),required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Data de Validade"}),a.jsx(mt,{type:"date",value:d.data_validade,onChange:T=>h({...d,data_validade:T.target.value}),min:new Date().toISOString().split("T")[0]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Deixe em branco para sem validade"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Quantidade"}),a.jsx(mt,{type:"number",min:"1",value:d.quantidade_total,onChange:T=>h({...d,quantidade_total:T.target.value}),required:!0})]})]}),a.jsx(Oe,{type:"submit",className:"w-full",children:"Criar Cupom"})]})]})]})]})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-5",children:Object.entries(j()).map(([T,O])=>a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsx(Ct,{className:"text-sm font-medium",children:T})}),a.jsx(ht,{children:a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total:"}),a.jsx("span",{className:"font-bold",children:O.total})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-success",children:"Disponvel:"}),a.jsx("span",{className:"font-bold",children:O.disponivel})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Usados:"}),a.jsx("span",{children:O.usado})]})]})})]},T))}),a.jsxs(yc,{defaultValue:"all",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-4",children:[a.jsxs(ri,{value:"all",children:["Todos (",t.length,")"]}),a.jsx(ri,{value:"disponivel",children:"Disponveis"}),a.jsx(ri,{value:"reservado",children:"Reservados"}),a.jsx(ri,{value:"usado",children:"Usados"})]}),["all","disponivel","reservado","usado"].map(T=>a.jsx(Ti,{value:T,className:"space-y-4",children:E(T).length===0?a.jsx(it,{children:a.jsxs(ht,{className:"py-12 text-center",children:[a.jsx(Hu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhum cupom nesta categoria"})]})}):a.jsx("div",{className:"rounded-md border",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Marketplace"}),a.jsx(It,{children:"Cdigo"}),a.jsx(It,{className:"text-right",children:"Valor"}),a.jsx(It,{className:"text-center",children:"Estoque"}),a.jsx(It,{children:"Validade"}),a.jsx(It,{children:"Status"}),a.jsx(It,{className:"text-center",children:"Aes"})]})}),a.jsx(to,{children:E(T).map(O=>{var I;return a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hu,{className:"h-4 w-4 text-primary"}),O.marketplace]})}),a.jsx(jt,{children:a.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs",children:O.codigo})}),a.jsxs(jt,{className:"text-right font-semibold",children:["R$ ",((I=O.valor_reais)==null?void 0:I.toFixed(2))||"0,00"]}),a.jsx(jt,{className:"text-center",children:a.jsxs("span",{className:"text-sm",children:[O.quantidade_disponivel||0,"/",O.quantidade_total||1]})}),a.jsx(jt,{children:O.data_validade?a.jsx("span",{className:"text-sm",children:new Date(O.data_validade).toLocaleDateString("pt-BR")}):a.jsx("span",{className:"text-xs text-muted-foreground",children:"Sem validade"})}),a.jsx(jt,{children:S(O.status)}),a.jsx(jt,{className:"text-center",children:O.status==="disponivel"&&a.jsx(Oe,{size:"icon",variant:"ghost",onClick:()=>w(O.id),children:a.jsx(vl,{className:"h-4 w-4"})})})]},O.id)})})]})})},T))]})]})})}var EW=["Enter"," "],zEt=["ArrowDown","PageUp","Home"],iEe=["ArrowUp","PageDown","End"],VEt=[...zEt,...iEe],qEt={ltr:[...EW,"ArrowRight"],rtl:[...EW,"ArrowLeft"]},HEt={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jI="Menu",[OP,WEt,GEt]=IC(jI),[yN,sEe]=qo(jI,[GEt,Ub,GC]),xB=Ub(),aEe=GC(),[KEt,bN]=yN(jI),[XEt,AI]=yN(jI),oEe=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:i,onOpenChange:s,modal:o=!0}=t,l=xB(e),[c,u]=C.useState(null),d=C.useRef(!1),h=Uo(s),f=Vb(i);return C.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),a.jsx(VF,{...l,children:a.jsx(KEt,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(XEt,{scope:e,onClose:C.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:n})})})};oEe.displayName=jI;var YEt="MenuAnchor",YQ=C.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=xB(r);return a.jsx(ZO,{...i,...n,ref:e})});YQ.displayName=YEt;var ZQ="MenuPortal",[ZEt,lEe]=yN(ZQ,{forceMount:void 0}),cEe=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:i}=t,s=bN(ZQ,e);return a.jsx(ZEt,{scope:e,forceMount:r,children:a.jsx(El,{present:r||s.open,children:a.jsx(RC,{asChild:!0,container:i,children:n})})})};cEe.displayName=ZQ;var Pm="MenuContent",[QEt,QQ]=yN(Pm),uEe=C.forwardRef((t,e)=>{const r=lEe(Pm,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,s=bN(Pm,t.__scopeMenu),o=AI(Pm,t.__scopeMenu);return a.jsx(OP.Provider,{scope:t.__scopeMenu,children:a.jsx(El,{present:n||s.open,children:a.jsx(OP.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(JEt,{...i,ref:e}):a.jsx(ejt,{...i,ref:e})})})})}),JEt=C.forwardRef((t,e)=>{const r=bN(Pm,t.__scopeMenu),n=C.useRef(null),i=An(e,n);return C.useEffect(()=>{const s=n.current;if(s)return e7(s)},[]),a.jsx(JQ,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:wr(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),ejt=C.forwardRef((t,e)=>{const r=bN(Pm,t.__scopeMenu);return a.jsx(JQ,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),tjt=vb("MenuContent.ScrollLock"),JQ=C.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:x,...g}=t,y=bN(Pm,r),w=AI(Pm,r),S=xB(r),E=aEe(r),j=WEt(r),[T,O]=C.useState(null),I=C.useRef(null),M=An(e,I,y.onContentChange),D=C.useRef(0),z=C.useRef(""),F=C.useRef(0),q=C.useRef(null),Q=C.useRef("right"),re=C.useRef(0),Z=x?rI:C.Fragment,se=x?{as:tjt,allowPinchZoom:!0}:void 0,K=Y=>{var he,_e;const oe=z.current+Y,xe=j().filter(ue=>!ue.disabled),H=document.activeElement,J=(he=xe.find(ue=>ue.ref.current===H))==null?void 0:he.textValue,ie=xe.map(ue=>ue.textValue),ce=fjt(ie,oe,J),me=(_e=xe.find(ue=>ue.textValue===ce))==null?void 0:_e.ref.current;(function ue(je){z.current=je,window.clearTimeout(D.current),je!==""&&(D.current=window.setTimeout(()=>ue(""),1e3))})(oe),me&&setTimeout(()=>me.focus())};C.useEffect(()=>()=>window.clearTimeout(D.current),[]),JF();const X=C.useCallback(Y=>{var xe,H;return Q.current===((xe=q.current)==null?void 0:xe.side)&&pjt(Y,(H=q.current)==null?void 0:H.area)},[]);return a.jsx(QEt,{scope:r,searchRef:z,onItemEnter:C.useCallback(Y=>{X(Y)&&Y.preventDefault()},[X]),onItemLeave:C.useCallback(Y=>{var oe;X(Y)||((oe=I.current)==null||oe.focus(),O(null))},[X]),onTriggerLeave:C.useCallback(Y=>{X(Y)&&Y.preventDefault()},[X]),pointerGraceTimerRef:F,onPointerGraceIntentChange:C.useCallback(Y=>{q.current=Y},[]),children:a.jsx(Z,{...se,children:a.jsx(eI,{asChild:!0,trapped:i,onMountAutoFocus:wr(s,Y=>{var oe;Y.preventDefault(),(oe=I.current)==null||oe.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(cN,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:a.jsx(dY,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:T,onCurrentTabStopIdChange:O,onEntryFocus:wr(c,Y=>{w.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(qF,{role:"menu","aria-orientation":"vertical","data-state":jEe(y.open),"data-radix-menu-content":"",dir:w.dir,...S,...g,ref:M,style:{outline:"none",...g.style},onKeyDown:wr(g.onKeyDown,Y=>{const xe=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,H=Y.ctrlKey||Y.altKey||Y.metaKey,J=Y.key.length===1;xe&&(Y.key==="Tab"&&Y.preventDefault(),!H&&J&&K(Y.key));const ie=I.current;if(Y.target!==ie||!VEt.includes(Y.key))return;Y.preventDefault();const me=j().filter(he=>!he.disabled).map(he=>he.ref.current);iEe.includes(Y.key)&&me.reverse(),djt(me)}),onBlur:wr(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(D.current),z.current="")}),onPointerMove:wr(t.onPointerMove,IP(Y=>{const oe=Y.target,xe=re.current!==Y.clientX;if(Y.currentTarget.contains(oe)&&xe){const H=Y.clientX>re.current?"right":"left";Q.current=H,re.current=Y.clientX}}))})})})})})})});uEe.displayName=Pm;var rjt="MenuGroup",eJ=C.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(Dr.div,{role:"group",...n,ref:e})});eJ.displayName=rjt;var njt="MenuLabel",dEe=C.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(Dr.div,{...n,ref:e})});dEe.displayName=njt;var bL="MenuItem",cue="menu.itemSelect",vB=C.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...i}=t,s=C.useRef(null),o=AI(bL,t.__scopeMenu),l=QQ(bL,t.__scopeMenu),c=An(e,s),u=C.useRef(!1),d=()=>{const h=s.current;if(!r&&h){const f=new CustomEvent(cue,{bubbles:!0,cancelable:!0});h.addEventListener(cue,m=>n==null?void 0:n(m),{once:!0}),kX(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(hEe,{...i,ref:c,disabled:r,onClick:wr(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:wr(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:wr(t.onKeyDown,h=>{const f=l.searchRef.current!=="";r||f&&h.key===" "||EW.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});vB.displayName=bL;var hEe=C.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...s}=t,o=QQ(bL,r),l=aEe(r),c=C.useRef(null),u=An(e,c),[d,h]=C.useState(!1),[f,m]=C.useState("");return C.useEffect(()=>{const x=c.current;x&&m((x.textContent??"").trim())},[s.children]),a.jsx(OP.ItemSlot,{scope:r,disabled:n,textValue:i??f,children:a.jsx(hY,{asChild:!0,...l,focusable:!n,children:a.jsx(Dr.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:u,onPointerMove:wr(t.onPointerMove,IP(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:wr(t.onPointerLeave,IP(x=>o.onItemLeave(x))),onFocus:wr(t.onFocus,()=>h(!0)),onBlur:wr(t.onBlur,()=>h(!1))})})})}),ijt="MenuCheckboxItem",fEe=C.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...i}=t;return a.jsx(vEe,{scope:t.__scopeMenu,checked:r,children:a.jsx(vB,{role:"menuitemcheckbox","aria-checked":wL(r)?"mixed":r,...i,ref:e,"data-state":rJ(r),onSelect:wr(i.onSelect,()=>n==null?void 0:n(wL(r)?!0:!r),{checkForDefaultPrevented:!1})})})});fEe.displayName=ijt;var mEe="MenuRadioGroup",[sjt,ajt]=yN(mEe,{value:void 0,onValueChange:()=>{}}),pEe=C.forwardRef((t,e)=>{const{value:r,onValueChange:n,...i}=t,s=Uo(n);return a.jsx(sjt,{scope:t.__scopeMenu,value:r,onValueChange:s,children:a.jsx(eJ,{...i,ref:e})})});pEe.displayName=mEe;var gEe="MenuRadioItem",xEe=C.forwardRef((t,e)=>{const{value:r,...n}=t,i=ajt(gEe,t.__scopeMenu),s=r===i.value;return a.jsx(vEe,{scope:t.__scopeMenu,checked:s,children:a.jsx(vB,{role:"menuitemradio","aria-checked":s,...n,ref:e,"data-state":rJ(s),onSelect:wr(n.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,r)},{checkForDefaultPrevented:!1})})})});xEe.displayName=gEe;var tJ="MenuItemIndicator",[vEe,ojt]=yN(tJ,{checked:!1}),yEe=C.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...i}=t,s=ojt(tJ,r);return a.jsx(El,{present:n||wL(s.checked)||s.checked===!0,children:a.jsx(Dr.span,{...i,ref:e,"data-state":rJ(s.checked)})})});yEe.displayName=tJ;var ljt="MenuSeparator",bEe=C.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(Dr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});bEe.displayName=ljt;var cjt="MenuArrow",wEe=C.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=xB(r);return a.jsx(HF,{...i,...n,ref:e})});wEe.displayName=cjt;var ujt="MenuSub",[d$t,_Ee]=yN(ujt),MT="MenuSubTrigger",NEe=C.forwardRef((t,e)=>{const r=bN(MT,t.__scopeMenu),n=AI(MT,t.__scopeMenu),i=_Ee(MT,t.__scopeMenu),s=QQ(MT,t.__scopeMenu),o=C.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:t.__scopeMenu},d=C.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return C.useEffect(()=>d,[d]),C.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(YQ,{asChild:!0,...u,children:a.jsx(hEe,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":jEe(r.open),...t,ref:bv(e,i.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:wr(t.onPointerMove,IP(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:wr(t.onPointerLeave,IP(h=>{var m,x;d();const f=(m=r.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(x=r.content)==null?void 0:x.dataset.side,y=g==="right",w=y?-5:5,S=f[y?"left":"right"],E=f[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:S,y:f.top},{x:E,y:f.top},{x:E,y:f.bottom},{x:S,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:wr(t.onKeyDown,h=>{var m;const f=s.searchRef.current!=="";t.disabled||f&&h.key===" "||qEt[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});NEe.displayName=MT;var SEe="MenuSubContent",EEe=C.forwardRef((t,e)=>{const r=lEe(Pm,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,s=bN(Pm,t.__scopeMenu),o=AI(Pm,t.__scopeMenu),l=_Ee(SEe,t.__scopeMenu),c=C.useRef(null),u=An(e,c);return a.jsx(OP.Provider,{scope:t.__scopeMenu,children:a.jsx(El,{present:n||s.open,children:a.jsx(OP.Slot,{scope:t.__scopeMenu,children:a.jsx(JQ,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:wr(t.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:wr(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:wr(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=HEt[o.dir].includes(d.key);h&&f&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});EEe.displayName=SEe;function jEe(t){return t?"open":"closed"}function wL(t){return t==="indeterminate"}function rJ(t){return wL(t)?"indeterminate":t?"checked":"unchecked"}function djt(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function hjt(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function fjt(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let o=hjt(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function mjt(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(i=!i)}return i}function pjt(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return mjt(r,e)}function IP(t){return e=>e.pointerType==="mouse"?t(e):void 0}var gjt=oEe,xjt=YQ,vjt=cEe,yjt=uEe,bjt=eJ,wjt=dEe,_jt=vB,Njt=fEe,Sjt=pEe,Ejt=xEe,jjt=yEe,Ajt=bEe,Cjt=wEe,Tjt=NEe,Pjt=EEe,yB="DropdownMenu",[kjt,h$t]=qo(yB,[sEe]),Dd=sEe(),[Ojt,AEe]=kjt(yB),CEe=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=t,c=Dd(e),u=C.useRef(null),[d,h]=Xu({prop:i,defaultProp:s??!1,onChange:o,caller:yB});return a.jsx(Ojt,{scope:e,triggerId:bl(),triggerRef:u,contentId:bl(),open:d,onOpenChange:h,onOpenToggle:C.useCallback(()=>h(f=>!f),[h]),modal:l,children:a.jsx(gjt,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};CEe.displayName=yB;var TEe="DropdownMenuTrigger",PEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=t,s=AEe(TEe,r),o=Dd(r);return a.jsx(xjt,{asChild:!0,...o,children:a.jsx(Dr.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:bv(e,s.triggerRef),onPointerDown:wr(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:wr(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});PEe.displayName=TEe;var Ijt="DropdownMenuPortal",kEe=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Dd(e);return a.jsx(vjt,{...n,...r})};kEe.displayName=Ijt;var OEe="DropdownMenuContent",IEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=AEe(OEe,r),s=Dd(r),o=C.useRef(!1);return a.jsx(yjt,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...n,ref:e,onCloseAutoFocus:wr(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:wr(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IEe.displayName=OEe;var Rjt="DropdownMenuGroup",Djt=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(bjt,{...i,...n,ref:e})});Djt.displayName=Rjt;var Mjt="DropdownMenuLabel",REe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(wjt,{...i,...n,ref:e})});REe.displayName=Mjt;var Ljt="DropdownMenuItem",DEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(_jt,{...i,...n,ref:e})});DEe.displayName=Ljt;var Fjt="DropdownMenuCheckboxItem",MEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Njt,{...i,...n,ref:e})});MEe.displayName=Fjt;var Bjt="DropdownMenuRadioGroup",$jt=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Sjt,{...i,...n,ref:e})});$jt.displayName=Bjt;var Ujt="DropdownMenuRadioItem",LEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Ejt,{...i,...n,ref:e})});LEe.displayName=Ujt;var zjt="DropdownMenuItemIndicator",FEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(jjt,{...i,...n,ref:e})});FEe.displayName=zjt;var Vjt="DropdownMenuSeparator",BEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Ajt,{...i,...n,ref:e})});BEe.displayName=Vjt;var qjt="DropdownMenuArrow",Hjt=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Cjt,{...i,...n,ref:e})});Hjt.displayName=qjt;var Wjt="DropdownMenuSubTrigger",$Ee=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Tjt,{...i,...n,ref:e})});$Ee.displayName=Wjt;var Gjt="DropdownMenuSubContent",UEe=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Dd(r);return a.jsx(Pjt,{...i,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UEe.displayName=Gjt;var Kjt=CEe,Xjt=PEe,Yjt=kEe,zEe=IEe,VEe=REe,qEe=DEe,HEe=MEe,WEe=LEe,GEe=FEe,KEe=BEe,XEe=$Ee,YEe=UEe;const nJ=Kjt,iJ=Xjt,Zjt=C.forwardRef(({className:t,inset:e,children:r,...n},i)=>a.jsxs(XEe,{ref:i,className:Ut("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,a.jsx(_f,{className:"ml-auto h-4 w-4"})]}));Zjt.displayName=XEe.displayName;const Qjt=C.forwardRef(({className:t,...e},r)=>a.jsx(YEe,{ref:r,className:Ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Qjt.displayName=YEe.displayName;const bB=C.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(Yjt,{children:a.jsx(zEe,{ref:n,sideOffset:e,className:Ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));bB.displayName=zEe.displayName;const Hl=C.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(qEe,{ref:n,className:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));Hl.displayName=qEe.displayName;const Jjt=C.forwardRef(({className:t,children:e,checked:r,...n},i)=>a.jsxs(HEe,{ref:i,className:Ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(GEe,{children:a.jsx(xl,{className:"h-4 w-4"})})}),e]}));Jjt.displayName=HEe.displayName;const eAt=C.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(WEe,{ref:n,className:Ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(GEe,{children:a.jsx(E0e,{className:"h-2 w-2 fill-current"})})}),e]}));eAt.displayName=WEe.displayName;const ZEe=C.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(VEe,{ref:n,className:Ut("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));ZEe.displayName=VEe.displayName;const jW=C.forwardRef(({className:t,...e},r)=>a.jsx(KEe,{ref:r,className:Ut("-mx-1 my-1 h-px bg-muted",t),...e}));jW.displayName=KEe.displayName;/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _L={};_L.version="0.18.5";var QEe=1252,tAt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],JEe=function(t){tAt.indexOf(t)!=-1&&(QEe=t)};function rAt(){JEe(1252)}var RP=function(t){JEe(t)};function nAt(){RP(1200),rAt()}var mD=function(e){return String.fromCharCode(e)},uue=function(e){return String.fromCharCode(e)},Tw,Uy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function DP(t){for(var e="",r=0,n=0,i=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,i=t.charCodeAt(u++),l=(n&15)<<2|i>>6,c=i&63,isNaN(n)?l=c=64:isNaN(i)&&(c=64),e+=Uy.charAt(s)+Uy.charAt(o)+Uy.charAt(l)+Uy.charAt(c);return e}function kv(t){var e="",r=0,n=0,i=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=Uy.indexOf(t.charAt(u++)),o=Uy.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=Uy.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=Uy.indexOf(t.charAt(u++)),i=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var Es=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Hv=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Q_(t){return Es?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function due(t){return Es?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Lp=function(e){return Es?Hv(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function wB(t){if(typeof ArrayBuffer>"u")return Lp(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function CI(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function iAt(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Zc=Es?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Hv(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function sAt(t){for(var e=[],r=0,n=t.length+250,i=Q_(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[r++]=o;else if(o<2048)i[r++]=192|o>>6&31,i[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;i[r++]=240|o>>8&7,i[r++]=128|o>>2&63,i[r++]=128|l>>6&15|(o&3)<<4,i[r++]=128|l&63}else i[r++]=224|o>>12&15,i[r++]=128|o>>6&63,i[r++]=128|o&63;r>n&&(e.push(i.slice(0,r)),r=0,i=Q_(65535),n=65530)}return e.push(i.slice(0,r)),Zc(e)}var L4=/\u0000/g,pD=/[\u0001-\u0006]/g;function NE(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Up(t,e){var r=""+t;return r.length>=e?r:$o("0",e-r.length)+r}function sJ(t,e){var r=""+t;return r.length>=e?r:$o(" ",e-r.length)+r}function NL(t,e){var r=""+t;return r.length>=e?r:r+$o(" ",e-r.length)}function aAt(t,e){var r=""+Math.round(t);return r.length>=e?r:$o("0",e-r.length)+r}function oAt(t,e){var r=""+t;return r.length>=e?r:$o("0",e-r.length)+r}var hue=Math.pow(2,32);function rS(t,e){if(t>hue||t<-hue)return aAt(t,e);var r=Math.round(t);return oAt(r,e)}function SL(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var fue=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],pU=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function lAt(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var zo={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},mue={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},cAt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function EL(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,o=1,l=0,c=1,u=0,d=0,h=Math.floor(i);u<e&&(h=Math.floor(i),l=h*o+s,d=h*u+c,!(i-h<5e-8));)i=1/(i-h),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var f=Math.floor(n*l/d);return[f,n*l-f*d,d]}function gD(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++i==86400&&(l.T=i=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=gAt(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=i%60,i=Math.floor(i/60),l.M=i%60,i=Math.floor(i/60),l.H=i,l.q=s,l}var eje=new Date(1899,11,31,0,0,0),uAt=eje.getTime(),dAt=new Date(1900,2,1,0,0,0);function tje(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=dAt&&(r+=24*60*60*1e3),(r-(uAt+(t.getTimezoneOffset()-eje.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function aJ(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function hAt(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function fAt(t){var e=t<0?12:11,r=aJ(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function mAt(t){var e=aJ(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function pAt(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=fAt(t):e===10?r=t.toFixed(10).substr(0,12):r=mAt(t),aJ(hAt(r.toUpperCase()))}function AW(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):pAt(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Cb(14,tje(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function gAt(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function xAt(t,e,r,n){var i="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return pU[r.m-1][1];case 5:return pU[r.m-1][0];default:return pU[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return fue[r.q][0];default:return fue[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Up(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=Up(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Up(c,u):"";return d}function zy(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var rje=/%/g;function vAt(t,e,r){var n=e.replace(rje,""),i=e.length-n.length;return uv(t,n,r*Math.pow(10,2*i))+$o("%",i)}function yAt(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return uv(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function nje(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+nje(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(i+s)%i)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var ije=/# (\?+)( ?)\/( ?)(\d+)/;function bAt(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),o=i-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?$o(" ",t[1].length+1+t[4].length):sJ(o,t[1].length)+t[2]+"/"+t[3]+Up(l,t[4].length))}function wAt(t,e,r){return r+(e===0?"":""+e)+$o(" ",t[1].length+2+t[4].length)}var sje=/^#*0*\.([0#]+)/,aje=/\).*[0#]/,oje=/\(###\) ###\\?-####/;function gd(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function pue(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function gue(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function _At(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function NAt(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Yf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(aje)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Yf("n",n,r):"("+Yf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return yAt(t,e,r);if(e.indexOf("%")!==-1)return vAt(t,e,r);if(e.indexOf("E")!==-1)return nje(e,r);if(e.charCodeAt(0)===36)return"$"+Yf(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+rS(c,e.length);if(e.match(/^[#?]+$/))return i=rS(r,0),i==="0"&&(i=""),i.length>e.length?i:gd(e.substr(0,e.length-i.length))+i;if(s=e.match(ije))return bAt(s,c,u);if(e.match(/^#+0+$/))return u+rS(c,e.length-e.indexOf("0"));if(s=e.match(sje))return i=pue(r,s[1].length).replace(/^([^\.]+)$/,"$1."+gd(s[1])).replace(/\.$/,"."+gd(s[1])).replace(/\.(\d*)$/,function(x,g){return"."+g+$o("0",gd(s[1]).length-g.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+pue(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+zy(rS(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Yf(t,e,-r):zy(""+(Math.floor(r)+_At(r,s[1].length)))+"."+Up(gue(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Yf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=NE(Yf(t,e.replace(/[\\-]/g,""),r)),o=0,NE(NE(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return o<i.length?i.charAt(o++):x==="0"?"0":""}));if(e.match(oje))return i=Yf(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=EL(c,Math.pow(10,o)-1,!1),i=""+u,d=uv("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+s[2]+"/"+s[3],d=NL(l[2],o),d.length<s[4].length&&(d=gd(s[4].substr(s[4].length-d.length))+d),i+=d,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=EL(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sJ(l[1],o)+s[2]+"/"+s[3]+NL(l[2],o):$o(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=rS(r,0),e.length<=i.length?i:gd(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return gd(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=gue(r,s[1].length),r<0?"-"+Yf(t,e,-r):zy(NAt(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Up(0,3-x.length):"")+x})+"."+Up(o,s[1].length);switch(e){case"###,##0.00":return Yf(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=zy(rS(c,0));return m!=="0"?u+m:"";case"###,###.00":return Yf(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Yf(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function SAt(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return uv(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function EAt(t,e,r){var n=e.replace(rje,""),i=e.length-n.length;return uv(t,n,r*Math.pow(10,2*i))+$o("%",i)}function lje(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+lje(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(i+s)%i)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function S0(t,e,r){if(t.charCodeAt(0)===40&&!e.match(aje)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?S0("n",n,r):"("+S0("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return SAt(t,e,r);if(e.indexOf("%")!==-1)return EAt(t,e,r);if(e.indexOf("E")!==-1)return lje(e,r);if(e.charCodeAt(0)===36)return"$"+S0(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Up(c,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:gd(e.substr(0,e.length-i.length))+i;if(s=e.match(ije))return wAt(s,c,u);if(e.match(/^#+0+$/))return u+Up(c,e.length-e.indexOf("0"));if(s=e.match(sje))return i=(""+r).replace(/^([^\.]+)$/,"$1."+gd(s[1])).replace(/\.$/,"."+gd(s[1])),i=i.replace(/\.(\d*)$/,function(x,g){return"."+g+$o("0",gd(s[1]).length-g.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+zy(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+S0(t,e,-r):zy(""+r)+"."+$o("0",s[1].length);if(s=e.match(/^#,#*,#0/))return S0(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=NE(S0(t,e.replace(/[\\-]/g,""),r)),o=0,NE(NE(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return o<i.length?i.charAt(o++):x==="0"?"0":""}));if(e.match(oje))return i=S0(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=EL(c,Math.pow(10,o)-1,!1),i=""+u,d=uv("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+s[2]+"/"+s[3],d=NL(l[2],o),d.length<s[4].length&&(d=gd(s[4].substr(s[4].length-d.length))+d),i+=d,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=EL(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sJ(l[1],o)+s[2]+"/"+s[3]+NL(l[2],o):$o(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:gd(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return gd(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+S0(t,e,-r):zy(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Up(0,3-x.length):"")+x})+"."+Up(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=zy(""+c);return m!=="0"?u+m:"";default:if(e.match(/\.[0#?]*$/))return S0(t,e.slice(0,e.lastIndexOf(".")),r)+gd(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function uv(t,e,r){return(r|0)===r?S0(t,e,r):Yf(t,e,r)}function jAt(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var cje=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function uje(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":SL(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(cje))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function AAt(t,e,r,n){for(var i=[],s="",o=0,l="",c="t",u,d,h,f="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!SL(t,o))throw new Error("unrecognized character "+l+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);i[i.length]={t:"t",v:s},++o;break;case"\\":var m=t.charAt(++o),x=m==="("||m===")"?m:"t";i[i.length]={t:x,v:m},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=gD(e,r,t.charAt(o+1)==="2"),u==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=gD(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),i[i.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(u==null&&(u=gD(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(g.v=u.H>=12?"P":"A"),g.t="T",f="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(g.v=u.H>=12?"PM":"AM"),g.t="T",o+=5,f="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(g.v=u.H>=12?"":""),g.t="T",o+=5,f="h"):(g.t="t",++o),u==null&&g.t==="T")return"";i[i.length]=g,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(cje)){if(u==null&&(u=gD(e,r),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",uje(t)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;i[i.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;i[i.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:l,v:l},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);i[i.length]={t:"t",v:l},++o;break}var y=0,w=0,S;for(o=i.length-1,c="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=f,c="h",y<1&&(y=1);break;case"s":(S=i[o].v.match(/\.0+$/))&&(w=Math.max(w,S[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=i[o].t;break;case"m":c==="s"&&(i[o].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&i[o].v.match(/[Hh]/)&&(y=1),y<2&&i[o].v.match(/[Mm]/)&&(y=2),y<3&&i[o].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var E="",j;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=xAt(i[o].t.charCodeAt(0),i[o].v,u,w),i[o].t="t";break;case"n":case"?":for(j=o+1;i[j]!=null&&((l=i[j].t)==="?"||l==="D"||(l===" "||l==="t")&&i[j+1]!=null&&(i[j+1].t==="?"||i[j+1].t==="t"&&i[j+1].v==="/")||i[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(i[j].v==="/"||i[j].v===" "&&i[j+1]!=null&&i[j+1].t=="?"));)i[o].v+=i[j].v,i[j]={v:"",t:";"},++j;E+=i[o].v,o=j-1;break;case"G":i[o].t="t",i[o].v=AW(e,r);break}var T="",O,I;if(E.length>0){E.charCodeAt(0)==40?(O=e<0&&E.charCodeAt(0)===45?-e:e,I=uv("n",E,O)):(O=e<0&&n>1?-e:e,I=uv("n",E,O),O<0&&i[0]&&i[0].t=="t"&&(I=I.substr(1),i[0].v="-"+i[0].v)),j=I.length-1;var M=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){M=o;break}var D=i.length;if(M===i.length&&I.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(j>=i[o].v.length-1?(j-=i[o].v.length,i[o].v=I.substr(j+1,i[o].v.length)):j<0?i[o].v="":(i[o].v=I.substr(0,j+1),j=-1),i[o].t="t",D=o);j>=0&&D<i.length&&(i[D].v=I.substr(0,j+1)+i[D].v)}else if(M!==i.length&&I.indexOf("E")===-1){for(j=I.indexOf(".")-1,o=M;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(d=i[o].v.indexOf(".")>-1&&o===M?i[o].v.indexOf(".")-1:i[o].v.length-1,T=i[o].v.substr(d+1);d>=0;--d)j>=0&&(i[o].v.charAt(d)==="0"||i[o].v.charAt(d)==="#")&&(T=I.charAt(j--)+T);i[o].v=T,i[o].t="t",D=o}for(j>=0&&D<i.length&&(i[D].v=I.substr(0,j+1)+i[D].v),j=I.indexOf(".")+1,o=M;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==M)){for(d=i[o].v.indexOf(".")>-1&&o===M?i[o].v.indexOf(".")+1:0,T=i[o].v.substr(0,d);d<i[o].v.length;++d)j<I.length&&(T+=I.charAt(j++));i[o].v=T,i[o].t="t",D=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(O=n>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=uv(i[o].t,i[o].v,O),i[o].t="t");var z="";for(o=0;o!==i.length;++o)i[o]!=null&&(z+=i[o].v);return z}var xue=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function vue(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function CAt(t,e){var r=jAt(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(xue),l=r[1].match(xue);return vue(e,o)?[n,r[0]]:vue(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Cb(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:zo)[t],n==null&&(n=r.table&&r.table[mue[t]]||zo[mue[t]]),n==null&&(n=cAt[t]||"General");break}if(SL(n,0))return AW(e,r);e instanceof Date&&(e=tje(e,r.date1904));var i=CAt(n,e);if(SL(i[1]))return AW(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return AAt(i[1],e,r,i[0])}function dje(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(zo[r]==null){e<0&&(e=r);continue}if(zo[r]==t){e=r;break}}e<0&&(e=391)}return zo[e]=t,e}function _B(t){for(var e=0;e!=392;++e)t[e]!==void 0&&dje(t[e],e)}function NB(){zo=lAt()}var hje=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function TAt(t){var e=typeof t=="number"?zo[t]:t;return e=e.replace(hje,"(\\d+)"),new RegExp("^"+e+"$")}function PAt(t,e,r){var n=-1,i=-1,s=-1,o=-1,l=-1,c=-1;(e.match(hje)||[]).forEach(function(h,f){var m=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:i=m;break}}),c>=0&&l==-1&&i>=0&&(l=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&i==-1&&s==-1?d:u+"T"+d}var kAt=function(){var t={};t.version="1.2.0";function e(){for(var I=0,M=new Array(256),D=0;D!=256;++D)I=D,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,M[D]=I;return typeof Int32Array<"u"?new Int32Array(M):M}var r=e();function n(I){var M=0,D=0,z=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)F[z]=I[z];for(z=0;z!=256;++z)for(D=I[z],M=256+z;M<4096;M+=256)D=F[M]=D>>>8^I[D&255];var q=[];for(z=1;z!=16;++z)q[z-1]=typeof Int32Array<"u"?F.subarray(z*256,z*256+256):F.slice(z*256,z*256+256);return q}var i=n(r),s=i[0],o=i[1],l=i[2],c=i[3],u=i[4],d=i[5],h=i[6],f=i[7],m=i[8],x=i[9],g=i[10],y=i[11],w=i[12],S=i[13],E=i[14];function j(I,M){for(var D=M^-1,z=0,F=I.length;z<F;)D=D>>>8^r[(D^I.charCodeAt(z++))&255];return~D}function T(I,M){for(var D=M^-1,z=I.length-15,F=0;F<z;)D=E[I[F++]^D&255]^S[I[F++]^D>>8&255]^w[I[F++]^D>>16&255]^y[I[F++]^D>>>24]^g[I[F++]]^x[I[F++]]^m[I[F++]]^f[I[F++]]^h[I[F++]]^d[I[F++]]^u[I[F++]]^c[I[F++]]^l[I[F++]]^o[I[F++]]^s[I[F++]]^r[I[F++]];for(z+=15;F<z;)D=D>>>8^r[(D^I[F++])&255];return~D}function O(I,M){for(var D=M^-1,z=0,F=I.length,q=0,Q=0;z<F;)q=I.charCodeAt(z++),q<128?D=D>>>8^r[(D^q)&255]:q<2048?(D=D>>>8^r[(D^(192|q>>6&31))&255],D=D>>>8^r[(D^(128|q&63))&255]):q>=55296&&q<57344?(q=(q&1023)+64,Q=I.charCodeAt(z++)&1023,D=D>>>8^r[(D^(240|q>>8&7))&255],D=D>>>8^r[(D^(128|q>>2&63))&255],D=D>>>8^r[(D^(128|Q>>6&15|(q&3)<<4))&255],D=D>>>8^r[(D^(128|Q&63))&255]):(D=D>>>8^r[(D^(224|q>>12&15))&255],D=D>>>8^r[(D^(128|q>>6&63))&255],D=D>>>8^r[(D^(128|q&63))&255]);return~D}return t.table=r,t.bstr=j,t.buf=T,t.str=O,t}(),Js=function(){var e={};e.version="1.2.1";function r(Ce,Me){for(var Ve=Ce.split("/"),He=Me.split("/"),Xe=0,Qe=0,bt=Math.min(Ve.length,He.length);Xe<bt;++Xe){if(Qe=Ve[Xe].length-He[Xe].length)return Qe;if(Ve[Xe]!=He[Xe])return Ve[Xe]<He[Xe]?-1:1}return Ve.length-He.length}function n(Ce){if(Ce.charAt(Ce.length-1)=="/")return Ce.slice(0,-1).indexOf("/")===-1?Ce:n(Ce.slice(0,-1));var Me=Ce.lastIndexOf("/");return Me===-1?Ce:Ce.slice(0,Me+1)}function i(Ce){if(Ce.charAt(Ce.length-1)=="/")return i(Ce.slice(0,-1));var Me=Ce.lastIndexOf("/");return Me===-1?Ce:Ce.slice(Me+1)}function s(Ce,Me){typeof Me=="string"&&(Me=new Date(Me));var Ve=Me.getHours();Ve=Ve<<6|Me.getMinutes(),Ve=Ve<<5|Me.getSeconds()>>>1,Ce.write_shift(2,Ve);var He=Me.getFullYear()-1980;He=He<<4|Me.getMonth()+1,He=He<<5|Me.getDate(),Ce.write_shift(2,He)}function o(Ce){var Me=Ce.read_shift(2)&65535,Ve=Ce.read_shift(2)&65535,He=new Date,Xe=Ve&31;Ve>>>=5;var Qe=Ve&15;Ve>>>=4,He.setMilliseconds(0),He.setFullYear(Ve+1980),He.setMonth(Qe-1),He.setDate(Xe);var bt=Me&31;Me>>>=5;var $t=Me&63;return Me>>>=6,He.setHours(Me),He.setMinutes($t),He.setSeconds(bt<<1),He}function l(Ce){df(Ce,0);for(var Me={},Ve=0;Ce.l<=Ce.length-4;){var He=Ce.read_shift(2),Xe=Ce.read_shift(2),Qe=Ce.l+Xe,bt={};switch(He){case 21589:Ve=Ce.read_shift(1),Ve&1&&(bt.mtime=Ce.read_shift(4)),Xe>5&&(Ve&2&&(bt.atime=Ce.read_shift(4)),Ve&4&&(bt.ctime=Ce.read_shift(4))),bt.mtime&&(bt.mt=new Date(bt.mtime*1e3));break}Ce.l=Qe,Me[He]=bt}return Me}var c;function u(){return c||(c={})}function d(Ce,Me){if(Ce[0]==80&&Ce[1]==75)return Rr(Ce,Me);if((Ce[0]|32)==109&&(Ce[1]|32)==105)return Fr(Ce,Me);if(Ce.length<512)throw new Error("CFB file size "+Ce.length+" < 512");var Ve=3,He=512,Xe=0,Qe=0,bt=0,$t=0,wt=0,Et=[],kt=Ce.slice(0,512);df(kt,0);var fr=h(kt);switch(Ve=fr[0],Ve){case 3:He=512;break;case 4:He=4096;break;case 0:if(fr[1]==0)return Rr(Ce,Me);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ve)}He!==512&&(kt=Ce.slice(0,He),df(kt,28));var br=Ce.slice(0,He);f(kt,Ve);var Nr=kt.read_shift(4,"i");if(Ve===3&&Nr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Nr);kt.l+=4,bt=kt.read_shift(4,"i"),kt.l+=4,kt.chk("00100000","Mini Stream Cutoff Size: "),$t=kt.read_shift(4,"i"),Xe=kt.read_shift(4,"i"),wt=kt.read_shift(4,"i"),Qe=kt.read_shift(4,"i");for(var Sr=-1,kr=0;kr<109&&(Sr=kt.read_shift(4,"i"),!(Sr<0));++kr)Et[kr]=Sr;var Tn=m(Ce,He);y(wt,Qe,Tn,He,Et);var qt=S(Tn,bt,Et,He);qt[bt].name="!Directory",Xe>0&&$t!==Q&&(qt[$t].name="!MiniFAT"),qt[Et[0]].name="!FAT",qt.fat_addrs=Et,qt.ssz=He;var Oi={},Jn=[],Ho=[],Al=[];E(bt,qt,Tn,Jn,Xe,Oi,Ho,$t),x(Ho,Al,Jn),Jn.shift();var si={FileIndex:Ho,FullPaths:Al};return Me&&Me.raw&&(si.raw={header:br,sectors:Tn}),si}function h(Ce){if(Ce[Ce.l]==80&&Ce[Ce.l+1]==75)return[0,0];Ce.chk(re,"Header Signature: "),Ce.l+=16;var Me=Ce.read_shift(2,"u");return[Ce.read_shift(2,"u"),Me]}function f(Ce,Me){var Ve=9;switch(Ce.l+=2,Ve=Ce.read_shift(2)){case 9:if(Me!=3)throw new Error("Sector Shift: Expected 9 saw "+Ve);break;case 12:if(Me!=4)throw new Error("Sector Shift: Expected 12 saw "+Ve);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ve)}Ce.chk("0600","Mini Sector Shift: "),Ce.chk("000000000000","Reserved: ")}function m(Ce,Me){for(var Ve=Math.ceil(Ce.length/Me)-1,He=[],Xe=1;Xe<Ve;++Xe)He[Xe-1]=Ce.slice(Xe*Me,(Xe+1)*Me);return He[Ve-1]=Ce.slice(Ve*Me),He}function x(Ce,Me,Ve){for(var He=0,Xe=0,Qe=0,bt=0,$t=0,wt=Ve.length,Et=[],kt=[];He<wt;++He)Et[He]=kt[He]=He,Me[He]=Ve[He];for(;$t<kt.length;++$t)He=kt[$t],Xe=Ce[He].L,Qe=Ce[He].R,bt=Ce[He].C,Et[He]===He&&(Xe!==-1&&Et[Xe]!==Xe&&(Et[He]=Et[Xe]),Qe!==-1&&Et[Qe]!==Qe&&(Et[He]=Et[Qe])),bt!==-1&&(Et[bt]=He),Xe!==-1&&He!=Et[He]&&(Et[Xe]=Et[He],kt.lastIndexOf(Xe)<$t&&kt.push(Xe)),Qe!==-1&&He!=Et[He]&&(Et[Qe]=Et[He],kt.lastIndexOf(Qe)<$t&&kt.push(Qe));for(He=1;He<wt;++He)Et[He]===He&&(Qe!==-1&&Et[Qe]!==Qe?Et[He]=Et[Qe]:Xe!==-1&&Et[Xe]!==Xe&&(Et[He]=Et[Xe]));for(He=1;He<wt;++He)if(Ce[He].type!==0){if($t=He,$t!=Et[$t])do $t=Et[$t],Me[He]=Me[$t]+"/"+Me[He];while($t!==0&&Et[$t]!==-1&&$t!=Et[$t]);Et[He]=-1}for(Me[0]+="/",He=1;He<wt;++He)Ce[He].type!==2&&(Me[He]+="/")}function g(Ce,Me,Ve){for(var He=Ce.start,Xe=Ce.size,Qe=[],bt=He;Ve&&Xe>0&&bt>=0;)Qe.push(Me.slice(bt*q,bt*q+q)),Xe-=q,bt=Pw(Ve,bt*4);return Qe.length===0?Yt(0):Zc(Qe).slice(0,Ce.size)}function y(Ce,Me,Ve,He,Xe){var Qe=Q;if(Ce===Q){if(Me!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ce!==-1){var bt=Ve[Ce],$t=(He>>>2)-1;if(!bt)return;for(var wt=0;wt<$t&&(Qe=Pw(bt,wt*4))!==Q;++wt)Xe.push(Qe);y(Pw(bt,He-4),Me-1,Ve,He,Xe)}}function w(Ce,Me,Ve,He,Xe){var Qe=[],bt=[];Xe||(Xe=[]);var $t=He-1,wt=0,Et=0;for(wt=Me;wt>=0;){Xe[wt]=!0,Qe[Qe.length]=wt,bt.push(Ce[wt]);var kt=Ve[Math.floor(wt*4/He)];if(Et=wt*4&$t,He<4+Et)throw new Error("FAT boundary crossed: "+wt+" 4 "+He);if(!Ce[kt])break;wt=Pw(Ce[kt],Et)}return{nodes:Qe,data:jue([bt])}}function S(Ce,Me,Ve,He){var Xe=Ce.length,Qe=[],bt=[],$t=[],wt=[],Et=He-1,kt=0,fr=0,br=0,Nr=0;for(kt=0;kt<Xe;++kt)if($t=[],br=kt+Me,br>=Xe&&(br-=Xe),!bt[br]){wt=[];var Sr=[];for(fr=br;fr>=0;){Sr[fr]=!0,bt[fr]=!0,$t[$t.length]=fr,wt.push(Ce[fr]);var kr=Ve[Math.floor(fr*4/He)];if(Nr=fr*4&Et,He<4+Nr)throw new Error("FAT boundary crossed: "+fr+" 4 "+He);if(!Ce[kr]||(fr=Pw(Ce[kr],Nr),Sr[fr]))break}Qe[br]={nodes:$t,data:jue([wt])}}return Qe}function E(Ce,Me,Ve,He,Xe,Qe,bt,$t){for(var wt=0,Et=He.length?2:0,kt=Me[Ce].data,fr=0,br=0,Nr;fr<kt.length;fr+=128){var Sr=kt.slice(fr,fr+128);df(Sr,64),br=Sr.read_shift(2),Nr=dJ(Sr,0,br-Et),He.push(Nr);var kr={name:Nr,type:Sr.read_shift(1),color:Sr.read_shift(1),L:Sr.read_shift(4,"i"),R:Sr.read_shift(4,"i"),C:Sr.read_shift(4,"i"),clsid:Sr.read_shift(16),state:Sr.read_shift(4,"i"),start:0,size:0},Tn=Sr.read_shift(2)+Sr.read_shift(2)+Sr.read_shift(2)+Sr.read_shift(2);Tn!==0&&(kr.ct=j(Sr,Sr.l-8));var qt=Sr.read_shift(2)+Sr.read_shift(2)+Sr.read_shift(2)+Sr.read_shift(2);qt!==0&&(kr.mt=j(Sr,Sr.l-8)),kr.start=Sr.read_shift(4,"i"),kr.size=Sr.read_shift(4,"i"),kr.size<0&&kr.start<0&&(kr.size=kr.type=0,kr.start=Q,kr.name=""),kr.type===5?(wt=kr.start,Xe>0&&wt!==Q&&(Me[wt].name="!StreamData")):kr.size>=4096?(kr.storage="fat",Me[kr.start]===void 0&&(Me[kr.start]=w(Ve,kr.start,Me.fat_addrs,Me.ssz)),Me[kr.start].name=kr.name,kr.content=Me[kr.start].data.slice(0,kr.size)):(kr.storage="minifat",kr.size<0?kr.size=0:wt!==Q&&kr.start!==Q&&Me[wt]&&(kr.content=g(kr,Me[wt].data,(Me[$t]||{}).data))),kr.content&&df(kr.content,0),Qe[Nr]=kr,bt.push(kr)}}function j(Ce,Me){return new Date((pf(Ce,Me+4)/1e7*Math.pow(2,32)+pf(Ce,Me)/1e7-11644473600)*1e3)}function T(Ce,Me){return u(),d(c.readFileSync(Ce),Me)}function O(Ce,Me){var Ve=Me&&Me.type;switch(Ve||Es&&Buffer.isBuffer(Ce)&&(Ve="buffer"),Ve||"base64"){case"file":return T(Ce,Me);case"base64":return d(Lp(kv(Ce)),Me);case"binary":return d(Lp(Ce),Me)}return d(Ce,Me)}function I(Ce,Me){var Ve=Me||{},He=Ve.root||"Root Entry";if(Ce.FullPaths||(Ce.FullPaths=[]),Ce.FileIndex||(Ce.FileIndex=[]),Ce.FullPaths.length!==Ce.FileIndex.length)throw new Error("inconsistent CFB structure");Ce.FullPaths.length===0&&(Ce.FullPaths[0]=He+"/",Ce.FileIndex[0]={name:He,type:5}),Ve.CLSID&&(Ce.FileIndex[0].clsid=Ve.CLSID),M(Ce)}function M(Ce){var Me="Sh33tJ5";if(!Js.find(Ce,"/"+Me)){var Ve=Yt(4);Ve[0]=55,Ve[1]=Ve[3]=50,Ve[2]=54,Ce.FileIndex.push({name:Me,type:2,content:Ve,size:4,L:69,R:69,C:69}),Ce.FullPaths.push(Ce.FullPaths[0]+Me),D(Ce)}}function D(Ce,Me){I(Ce);for(var Ve=!1,He=!1,Xe=Ce.FullPaths.length-1;Xe>=0;--Xe){var Qe=Ce.FileIndex[Xe];switch(Qe.type){case 0:He?Ve=!0:(Ce.FileIndex.pop(),Ce.FullPaths.pop());break;case 1:case 2:case 5:He=!0,isNaN(Qe.R*Qe.L*Qe.C)&&(Ve=!0),Qe.R>-1&&Qe.L>-1&&Qe.R==Qe.L&&(Ve=!0);break;default:Ve=!0;break}}if(!(!Ve&&!Me)){var bt=new Date(1987,1,19),$t=0,wt=Object.create?Object.create(null):{},Et=[];for(Xe=0;Xe<Ce.FullPaths.length;++Xe)wt[Ce.FullPaths[Xe]]=!0,Ce.FileIndex[Xe].type!==0&&Et.push([Ce.FullPaths[Xe],Ce.FileIndex[Xe]]);for(Xe=0;Xe<Et.length;++Xe){var kt=n(Et[Xe][0]);He=wt[kt],He||(Et.push([kt,{name:i(kt).replace("/",""),type:1,clsid:se,ct:bt,mt:bt,content:null}]),wt[kt]=!0)}for(Et.sort(function(Nr,Sr){return r(Nr[0],Sr[0])}),Ce.FullPaths=[],Ce.FileIndex=[],Xe=0;Xe<Et.length;++Xe)Ce.FullPaths[Xe]=Et[Xe][0],Ce.FileIndex[Xe]=Et[Xe][1];for(Xe=0;Xe<Et.length;++Xe){var fr=Ce.FileIndex[Xe],br=Ce.FullPaths[Xe];if(fr.name=i(br).replace("/",""),fr.L=fr.R=fr.C=-(fr.color=1),fr.size=fr.content?fr.content.length:0,fr.start=0,fr.clsid=fr.clsid||se,Xe===0)fr.C=Et.length>1?1:-1,fr.size=0,fr.type=5;else if(br.slice(-1)=="/"){for($t=Xe+1;$t<Et.length&&n(Ce.FullPaths[$t])!=br;++$t);for(fr.C=$t>=Et.length?-1:$t,$t=Xe+1;$t<Et.length&&n(Ce.FullPaths[$t])!=n(br);++$t);fr.R=$t>=Et.length?-1:$t,fr.type=1}else n(Ce.FullPaths[Xe+1]||"")==n(br)&&(fr.R=Xe+1),fr.type=2}}}function z(Ce,Me){var Ve=Me||{};if(Ve.fileType=="mad")return Bi(Ce,Ve);switch(D(Ce),Ve.fileType){case"zip":return Cr(Ce,Ve)}var He=function(Nr){for(var Sr=0,kr=0,Tn=0;Tn<Nr.FileIndex.length;++Tn){var qt=Nr.FileIndex[Tn];if(qt.content){var Oi=qt.content.length;Oi>0&&(Oi<4096?Sr+=Oi+63>>6:kr+=Oi+511>>9)}}for(var Jn=Nr.FullPaths.length+3>>2,Ho=Sr+7>>3,Al=Sr+127>>7,si=Ho+kr+Jn+Al,ei=si+127>>7,Un=ei<=109?0:Math.ceil((ei-109)/127);si+ei+Un+127>>7>ei;)Un=++ei<=109?0:Math.ceil((ei-109)/127);var On=[1,Un,ei,Al,Jn,kr,Sr,0];return Nr.FileIndex[0].size=Sr<<6,On[7]=(Nr.FileIndex[0].start=On[0]+On[1]+On[2]+On[3]+On[4]+On[5])+(On[6]+7>>3),On}(Ce),Xe=Yt(He[7]<<9),Qe=0,bt=0;{for(Qe=0;Qe<8;++Qe)Xe.write_shift(1,Z[Qe]);for(Qe=0;Qe<8;++Qe)Xe.write_shift(2,0);for(Xe.write_shift(2,62),Xe.write_shift(2,3),Xe.write_shift(2,65534),Xe.write_shift(2,9),Xe.write_shift(2,6),Qe=0;Qe<3;++Qe)Xe.write_shift(2,0);for(Xe.write_shift(4,0),Xe.write_shift(4,He[2]),Xe.write_shift(4,He[0]+He[1]+He[2]+He[3]-1),Xe.write_shift(4,0),Xe.write_shift(4,4096),Xe.write_shift(4,He[3]?He[0]+He[1]+He[2]-1:Q),Xe.write_shift(4,He[3]),Xe.write_shift(-4,He[1]?He[0]-1:Q),Xe.write_shift(4,He[1]),Qe=0;Qe<109;++Qe)Xe.write_shift(-4,Qe<He[2]?He[1]+Qe:-1)}if(He[1])for(bt=0;bt<He[1];++bt){for(;Qe<236+bt*127;++Qe)Xe.write_shift(-4,Qe<He[2]?He[1]+Qe:-1);Xe.write_shift(-4,bt===He[1]-1?Q:bt+1)}var $t=function(Nr){for(bt+=Nr;Qe<bt-1;++Qe)Xe.write_shift(-4,Qe+1);Nr&&(++Qe,Xe.write_shift(-4,Q))};for(bt=Qe=0,bt+=He[1];Qe<bt;++Qe)Xe.write_shift(-4,K.DIFSECT);for(bt+=He[2];Qe<bt;++Qe)Xe.write_shift(-4,K.FATSECT);$t(He[3]),$t(He[4]);for(var wt=0,Et=0,kt=Ce.FileIndex[0];wt<Ce.FileIndex.length;++wt)kt=Ce.FileIndex[wt],kt.content&&(Et=kt.content.length,!(Et<4096)&&(kt.start=bt,$t(Et+511>>9)));for($t(He[6]+7>>3);Xe.l&511;)Xe.write_shift(-4,K.ENDOFCHAIN);for(bt=Qe=0,wt=0;wt<Ce.FileIndex.length;++wt)kt=Ce.FileIndex[wt],kt.content&&(Et=kt.content.length,!(!Et||Et>=4096)&&(kt.start=bt,$t(Et+63>>6)));for(;Xe.l&511;)Xe.write_shift(-4,K.ENDOFCHAIN);for(Qe=0;Qe<He[4]<<2;++Qe){var fr=Ce.FullPaths[Qe];if(!fr||fr.length===0){for(wt=0;wt<17;++wt)Xe.write_shift(4,0);for(wt=0;wt<3;++wt)Xe.write_shift(4,-1);for(wt=0;wt<12;++wt)Xe.write_shift(4,0);continue}kt=Ce.FileIndex[Qe],Qe===0&&(kt.start=kt.size?kt.start-1:Q);var br=Qe===0&&Ve.root||kt.name;if(Et=2*(br.length+1),Xe.write_shift(64,br,"utf16le"),Xe.write_shift(2,Et),Xe.write_shift(1,kt.type),Xe.write_shift(1,kt.color),Xe.write_shift(-4,kt.L),Xe.write_shift(-4,kt.R),Xe.write_shift(-4,kt.C),kt.clsid)Xe.write_shift(16,kt.clsid,"hex");else for(wt=0;wt<4;++wt)Xe.write_shift(4,0);Xe.write_shift(4,kt.state||0),Xe.write_shift(4,0),Xe.write_shift(4,0),Xe.write_shift(4,0),Xe.write_shift(4,0),Xe.write_shift(4,kt.start),Xe.write_shift(4,kt.size),Xe.write_shift(4,0)}for(Qe=1;Qe<Ce.FileIndex.length;++Qe)if(kt=Ce.FileIndex[Qe],kt.size>=4096)if(Xe.l=kt.start+1<<9,Es&&Buffer.isBuffer(kt.content))kt.content.copy(Xe,Xe.l,0,kt.size),Xe.l+=kt.size+511&-512;else{for(wt=0;wt<kt.size;++wt)Xe.write_shift(1,kt.content[wt]);for(;wt&511;++wt)Xe.write_shift(1,0)}for(Qe=1;Qe<Ce.FileIndex.length;++Qe)if(kt=Ce.FileIndex[Qe],kt.size>0&&kt.size<4096)if(Es&&Buffer.isBuffer(kt.content))kt.content.copy(Xe,Xe.l,0,kt.size),Xe.l+=kt.size+63&-64;else{for(wt=0;wt<kt.size;++wt)Xe.write_shift(1,kt.content[wt]);for(;wt&63;++wt)Xe.write_shift(1,0)}if(Es)Xe.l=Xe.length;else for(;Xe.l<Xe.length;)Xe.write_shift(1,0);return Xe}function F(Ce,Me){var Ve=Ce.FullPaths.map(function(wt){return wt.toUpperCase()}),He=Ve.map(function(wt){var Et=wt.split("/");return Et[Et.length-(wt.slice(-1)=="/"?2:1)]}),Xe=!1;Me.charCodeAt(0)===47?(Xe=!0,Me=Ve[0].slice(0,-1)+Me):Xe=Me.indexOf("/")!==-1;var Qe=Me.toUpperCase(),bt=Xe===!0?Ve.indexOf(Qe):He.indexOf(Qe);if(bt!==-1)return Ce.FileIndex[bt];var $t=!Qe.match(pD);for(Qe=Qe.replace(L4,""),$t&&(Qe=Qe.replace(pD,"!")),bt=0;bt<Ve.length;++bt)if(($t?Ve[bt].replace(pD,"!"):Ve[bt]).replace(L4,"")==Qe||($t?He[bt].replace(pD,"!"):He[bt]).replace(L4,"")==Qe)return Ce.FileIndex[bt];return null}var q=64,Q=-2,re="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],se="00000000000000000000000000000000",K={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:se,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(Ce,Me,Ve){u();var He=z(Ce,Ve);c.writeFileSync(Me,He)}function Y(Ce){for(var Me=new Array(Ce.length),Ve=0;Ve<Ce.length;++Ve)Me[Ve]=String.fromCharCode(Ce[Ve]);return Me.join("")}function oe(Ce,Me){var Ve=z(Ce,Me);switch(Me&&Me.type||"buffer"){case"file":return u(),c.writeFileSync(Me.filename,Ve),Ve;case"binary":return typeof Ve=="string"?Ve:Y(Ve);case"base64":return DP(typeof Ve=="string"?Ve:Y(Ve));case"buffer":if(Es)return Buffer.isBuffer(Ve)?Ve:Hv(Ve);case"array":return typeof Ve=="string"?Lp(Ve):Ve}return Ve}var xe;function H(Ce){try{var Me=Ce.InflateRaw,Ve=new Me;if(Ve._processChunk(new Uint8Array([3,0]),Ve._finishFlushFlag),Ve.bytesRead)xe=Ce;else throw new Error("zlib does not expose bytesRead")}catch(He){console.error("cannot use native zlib: "+(He.message||He))}}function J(Ce,Me){if(!xe)return Wt(Ce,Me);var Ve=xe.InflateRaw,He=new Ve,Xe=He._processChunk(Ce.slice(Ce.l),He._finishFlushFlag);return Ce.l+=He.bytesRead,Xe}function ie(Ce){return xe?xe.deflateRawSync(Ce):ur(Ce)}var ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],he=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function _e(Ce){var Me=(Ce<<1|Ce<<11)&139536|(Ce<<5|Ce<<15)&558144;return(Me>>16|Me>>8|Me)&255}for(var ue=typeof Uint8Array<"u",je=ue?new Uint8Array(256):[],ye=0;ye<256;++ye)je[ye]=_e(ye);function Le(Ce,Me){var Ve=je[Ce&255];return Me<=8?Ve>>>8-Me:(Ve=Ve<<8|je[Ce>>8&255],Me<=16?Ve>>>16-Me:(Ve=Ve<<8|je[Ce>>16&255],Ve>>>24-Me))}function Ge(Ce,Me){var Ve=Me&7,He=Me>>>3;return(Ce[He]|(Ve<=6?0:Ce[He+1]<<8))>>>Ve&3}function Be(Ce,Me){var Ve=Me&7,He=Me>>>3;return(Ce[He]|(Ve<=5?0:Ce[He+1]<<8))>>>Ve&7}function Te(Ce,Me){var Ve=Me&7,He=Me>>>3;return(Ce[He]|(Ve<=4?0:Ce[He+1]<<8))>>>Ve&15}function ze(Ce,Me){var Ve=Me&7,He=Me>>>3;return(Ce[He]|(Ve<=3?0:Ce[He+1]<<8))>>>Ve&31}function tt(Ce,Me){var Ve=Me&7,He=Me>>>3;return(Ce[He]|(Ve<=1?0:Ce[He+1]<<8))>>>Ve&127}function Re(Ce,Me,Ve){var He=Me&7,Xe=Me>>>3,Qe=(1<<Ve)-1,bt=Ce[Xe]>>>He;return Ve<8-He||(bt|=Ce[Xe+1]<<8-He,Ve<16-He)||(bt|=Ce[Xe+2]<<16-He,Ve<24-He)||(bt|=Ce[Xe+3]<<24-He),bt&Qe}function Ue(Ce,Me,Ve){var He=Me&7,Xe=Me>>>3;return He<=5?Ce[Xe]|=(Ve&7)<<He:(Ce[Xe]|=Ve<<He&255,Ce[Xe+1]=(Ve&7)>>8-He),Me+3}function xt(Ce,Me,Ve){var He=Me&7,Xe=Me>>>3;return Ve=(Ve&1)<<He,Ce[Xe]|=Ve,Me+1}function st(Ce,Me,Ve){var He=Me&7,Xe=Me>>>3;return Ve<<=He,Ce[Xe]|=Ve&255,Ve>>>=8,Ce[Xe+1]=Ve,Me+8}function Xt(Ce,Me,Ve){var He=Me&7,Xe=Me>>>3;return Ve<<=He,Ce[Xe]|=Ve&255,Ve>>>=8,Ce[Xe+1]=Ve&255,Ce[Xe+2]=Ve>>>8,Me+16}function Jt(Ce,Me){var Ve=Ce.length,He=2*Ve>Me?2*Ve:Me+5,Xe=0;if(Ve>=Me)return Ce;if(Es){var Qe=due(He);if(Ce.copy)Ce.copy(Qe);else for(;Xe<Ce.length;++Xe)Qe[Xe]=Ce[Xe];return Qe}else if(ue){var bt=new Uint8Array(He);if(bt.set)bt.set(Ce);else for(;Xe<Ve;++Xe)bt[Xe]=Ce[Xe];return bt}return Ce.length=He,Ce}function _r(Ce){for(var Me=new Array(Ce),Ve=0;Ve<Ce;++Ve)Me[Ve]=0;return Me}function lt(Ce,Me,Ve){var He=1,Xe=0,Qe=0,bt=0,$t=0,wt=Ce.length,Et=ue?new Uint16Array(32):_r(32);for(Qe=0;Qe<32;++Qe)Et[Qe]=0;for(Qe=wt;Qe<Ve;++Qe)Ce[Qe]=0;wt=Ce.length;var kt=ue?new Uint16Array(wt):_r(wt);for(Qe=0;Qe<wt;++Qe)Et[Xe=Ce[Qe]]++,He<Xe&&(He=Xe),kt[Qe]=0;for(Et[0]=0,Qe=1;Qe<=He;++Qe)Et[Qe+16]=$t=$t+Et[Qe-1]<<1;for(Qe=0;Qe<wt;++Qe)$t=Ce[Qe],$t!=0&&(kt[Qe]=Et[$t+16]++);var fr=0;for(Qe=0;Qe<wt;++Qe)if(fr=Ce[Qe],fr!=0)for($t=Le(kt[Qe],He)>>He-fr,bt=(1<<He+4-fr)-1;bt>=0;--bt)Me[$t|bt<<fr]=fr&15|Qe<<4;return He}var pt=ue?new Uint16Array(512):_r(512),er=ue?new Uint16Array(32):_r(32);if(!ue){for(var Vt=0;Vt<512;++Vt)pt[Vt]=0;for(Vt=0;Vt<32;++Vt)er[Vt]=0}(function(){for(var Ce=[],Me=0;Me<32;Me++)Ce.push(5);lt(Ce,er,32);var Ve=[];for(Me=0;Me<=143;Me++)Ve.push(8);for(;Me<=255;Me++)Ve.push(9);for(;Me<=279;Me++)Ve.push(7);for(;Me<=287;Me++)Ve.push(8);lt(Ve,pt,288)})();var Kt=function(){for(var Me=ue?new Uint8Array(32768):[],Ve=0,He=0;Ve<he.length-1;++Ve)for(;He<he[Ve+1];++He)Me[He]=Ve;for(;He<32768;++He)Me[He]=29;var Xe=ue?new Uint8Array(259):[];for(Ve=0,He=0;Ve<me.length-1;++Ve)for(;He<me[Ve+1];++He)Xe[He]=Ve;function Qe($t,wt){for(var Et=0;Et<$t.length;){var kt=Math.min(65535,$t.length-Et),fr=Et+kt==$t.length;for(wt.write_shift(1,+fr),wt.write_shift(2,kt),wt.write_shift(2,~kt&65535);kt-- >0;)wt[wt.l++]=$t[Et++]}return wt.l}function bt($t,wt){for(var Et=0,kt=0,fr=ue?new Uint16Array(32768):[];kt<$t.length;){var br=Math.min(65535,$t.length-kt);if(br<10){for(Et=Ue(wt,Et,+(kt+br==$t.length)),Et&7&&(Et+=8-(Et&7)),wt.l=Et/8|0,wt.write_shift(2,br),wt.write_shift(2,~br&65535);br-- >0;)wt[wt.l++]=$t[kt++];Et=wt.l*8;continue}Et=Ue(wt,Et,+(kt+br==$t.length)+2);for(var Nr=0;br-- >0;){var Sr=$t[kt];Nr=(Nr<<5^Sr)&32767;var kr=-1,Tn=0;if((kr=fr[Nr])&&(kr|=kt&-32768,kr>kt&&(kr-=32768),kr<kt))for(;$t[kr+Tn]==$t[kt+Tn]&&Tn<250;)++Tn;if(Tn>2){Sr=Xe[Tn],Sr<=22?Et=st(wt,Et,je[Sr+1]>>1)-1:(st(wt,Et,3),Et+=5,st(wt,Et,je[Sr-23]>>5),Et+=3);var qt=Sr<8?0:Sr-4>>2;qt>0&&(Xt(wt,Et,Tn-me[Sr]),Et+=qt),Sr=Me[kt-kr],Et=st(wt,Et,je[Sr]>>3),Et-=3;var Oi=Sr<4?0:Sr-2>>1;Oi>0&&(Xt(wt,Et,kt-kr-he[Sr]),Et+=Oi);for(var Jn=0;Jn<Tn;++Jn)fr[Nr]=kt&32767,Nr=(Nr<<5^$t[kt])&32767,++kt;br-=Tn-1}else Sr<=143?Sr=Sr+48:Et=xt(wt,Et,1),Et=st(wt,Et,je[Sr]),fr[Nr]=kt&32767,++kt}Et=st(wt,Et,0)-1}return wt.l=(Et+7)/8|0,wt.l}return function(wt,Et){return wt.length<8?Qe(wt,Et):bt(wt,Et)}}();function ur(Ce){var Me=Yt(50+Math.floor(Ce.length*1.1)),Ve=Kt(Ce,Me);return Me.slice(0,Ve)}var rt=ue?new Uint16Array(32768):_r(32768),Lt=ue?new Uint16Array(32768):_r(32768),Dt=ue?new Uint16Array(128):_r(128),Fe=1,ut=1;function Mt(Ce,Me){var Ve=ze(Ce,Me)+257;Me+=5;var He=ze(Ce,Me)+1;Me+=5;var Xe=Te(Ce,Me)+4;Me+=4;for(var Qe=0,bt=ue?new Uint8Array(19):_r(19),$t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],wt=1,Et=ue?new Uint8Array(8):_r(8),kt=ue?new Uint8Array(8):_r(8),fr=bt.length,br=0;br<Xe;++br)bt[ce[br]]=Qe=Be(Ce,Me),wt<Qe&&(wt=Qe),Et[Qe]++,Me+=3;var Nr=0;for(Et[0]=0,br=1;br<=wt;++br)kt[br]=Nr=Nr+Et[br-1]<<1;for(br=0;br<fr;++br)(Nr=bt[br])!=0&&($t[br]=kt[Nr]++);var Sr=0;for(br=0;br<fr;++br)if(Sr=bt[br],Sr!=0){Nr=je[$t[br]]>>8-Sr;for(var kr=(1<<7-Sr)-1;kr>=0;--kr)Dt[Nr|kr<<Sr]=Sr&7|br<<3}var Tn=[];for(wt=1;Tn.length<Ve+He;)switch(Nr=Dt[tt(Ce,Me)],Me+=Nr&7,Nr>>>=3){case 16:for(Qe=3+Ge(Ce,Me),Me+=2,Nr=Tn[Tn.length-1];Qe-- >0;)Tn.push(Nr);break;case 17:for(Qe=3+Be(Ce,Me),Me+=3;Qe-- >0;)Tn.push(0);break;case 18:for(Qe=11+tt(Ce,Me),Me+=7;Qe-- >0;)Tn.push(0);break;default:Tn.push(Nr),wt<Nr&&(wt=Nr);break}var qt=Tn.slice(0,Ve),Oi=Tn.slice(Ve);for(br=Ve;br<286;++br)qt[br]=0;for(br=He;br<30;++br)Oi[br]=0;return Fe=lt(qt,rt,286),ut=lt(Oi,Lt,30),Me}function Ht(Ce,Me){if(Ce[0]==3&&!(Ce[1]&3))return[Q_(Me),2];for(var Ve=0,He=0,Xe=due(Me||1<<18),Qe=0,bt=Xe.length>>>0,$t=0,wt=0;!(He&1);){if(He=Be(Ce,Ve),Ve+=3,He>>>1)He>>1==1?($t=9,wt=5):(Ve=Mt(Ce,Ve),$t=Fe,wt=ut);else{Ve&7&&(Ve+=8-(Ve&7));var Et=Ce[Ve>>>3]|Ce[(Ve>>>3)+1]<<8;if(Ve+=32,Et>0)for(!Me&&bt<Qe+Et&&(Xe=Jt(Xe,Qe+Et),bt=Xe.length);Et-- >0;)Xe[Qe++]=Ce[Ve>>>3],Ve+=8;continue}for(;;){!Me&&bt<Qe+32767&&(Xe=Jt(Xe,Qe+32767),bt=Xe.length);var kt=Re(Ce,Ve,$t),fr=He>>>1==1?pt[kt]:rt[kt];if(Ve+=fr&15,fr>>>=4,!(fr>>>8&255))Xe[Qe++]=fr;else{if(fr==256)break;fr-=257;var br=fr<8?0:fr-4>>2;br>5&&(br=0);var Nr=Qe+me[fr];br>0&&(Nr+=Re(Ce,Ve,br),Ve+=br),kt=Re(Ce,Ve,wt),fr=He>>>1==1?er[kt]:Lt[kt],Ve+=fr&15,fr>>>=4;var Sr=fr<4?0:fr-2>>1,kr=he[fr];for(Sr>0&&(kr+=Re(Ce,Ve,Sr),Ve+=Sr),!Me&&bt<Nr&&(Xe=Jt(Xe,Nr+100),bt=Xe.length);Qe<Nr;)Xe[Qe]=Xe[Qe-kr],++Qe}}}return Me?[Xe,Ve+7>>>3]:[Xe.slice(0,Qe),Ve+7>>>3]}function Wt(Ce,Me){var Ve=Ce.slice(Ce.l||0),He=Ht(Ve,Me);return Ce.l+=He[1],He[0]}function zt(Ce,Me){if(Ce)typeof console<"u"&&console.error(Me);else throw new Error(Me)}function Rr(Ce,Me){var Ve=Ce;df(Ve,0);var He=[],Xe=[],Qe={FileIndex:He,FullPaths:Xe};I(Qe,{root:Me.root});for(var bt=Ve.length-4;(Ve[bt]!=80||Ve[bt+1]!=75||Ve[bt+2]!=5||Ve[bt+3]!=6)&&bt>=0;)--bt;Ve.l=bt+4,Ve.l+=4;var $t=Ve.read_shift(2);Ve.l+=6;var wt=Ve.read_shift(4);for(Ve.l=wt,bt=0;bt<$t;++bt){Ve.l+=20;var Et=Ve.read_shift(4),kt=Ve.read_shift(4),fr=Ve.read_shift(2),br=Ve.read_shift(2),Nr=Ve.read_shift(2);Ve.l+=8;var Sr=Ve.read_shift(4),kr=l(Ve.slice(Ve.l+fr,Ve.l+fr+br));Ve.l+=fr+br+Nr;var Tn=Ve.l;Ve.l=Sr+4,vr(Ve,Et,kt,Qe,kr),Ve.l=Tn}return Qe}function vr(Ce,Me,Ve,He,Xe){Ce.l+=2;var Qe=Ce.read_shift(2),bt=Ce.read_shift(2),$t=o(Ce);if(Qe&8257)throw new Error("Unsupported ZIP encryption");for(var wt=Ce.read_shift(4),Et=Ce.read_shift(4),kt=Ce.read_shift(4),fr=Ce.read_shift(2),br=Ce.read_shift(2),Nr="",Sr=0;Sr<fr;++Sr)Nr+=String.fromCharCode(Ce[Ce.l++]);if(br){var kr=l(Ce.slice(Ce.l,Ce.l+br));(kr[21589]||{}).mt&&($t=kr[21589].mt),((Xe||{})[21589]||{}).mt&&($t=Xe[21589].mt)}Ce.l+=br;var Tn=Ce.slice(Ce.l,Ce.l+Et);switch(bt){case 8:Tn=J(Ce,kt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+bt)}var qt=!1;Qe&8&&(wt=Ce.read_shift(4),wt==134695760&&(wt=Ce.read_shift(4),qt=!0),Et=Ce.read_shift(4),kt=Ce.read_shift(4)),Et!=Me&&zt(qt,"Bad compressed size: "+Me+" != "+Et),kt!=Ve&&zt(qt,"Bad uncompressed size: "+Ve+" != "+kt),$i(He,Nr,Tn,{unsafe:!0,mt:$t})}function Cr(Ce,Me){var Ve=Me||{},He=[],Xe=[],Qe=Yt(1),bt=Ve.compression?8:0,$t=0,wt=0,Et=0,kt=0,fr=0,br=Ce.FullPaths[0],Nr=br,Sr=Ce.FileIndex[0],kr=[],Tn=0;for(wt=1;wt<Ce.FullPaths.length;++wt)if(Nr=Ce.FullPaths[wt].slice(br.length),Sr=Ce.FileIndex[wt],!(!Sr.size||!Sr.content||Nr=="Sh33tJ5")){var qt=kt,Oi=Yt(Nr.length);for(Et=0;Et<Nr.length;++Et)Oi.write_shift(1,Nr.charCodeAt(Et)&127);Oi=Oi.slice(0,Oi.l),kr[fr]=kAt.buf(Sr.content,0);var Jn=Sr.content;bt==8&&(Jn=ie(Jn)),Qe=Yt(30),Qe.write_shift(4,67324752),Qe.write_shift(2,20),Qe.write_shift(2,$t),Qe.write_shift(2,bt),Sr.mt?s(Qe,Sr.mt):Qe.write_shift(4,0),Qe.write_shift(-4,kr[fr]),Qe.write_shift(4,Jn.length),Qe.write_shift(4,Sr.content.length),Qe.write_shift(2,Oi.length),Qe.write_shift(2,0),kt+=Qe.length,He.push(Qe),kt+=Oi.length,He.push(Oi),kt+=Jn.length,He.push(Jn),Qe=Yt(46),Qe.write_shift(4,33639248),Qe.write_shift(2,0),Qe.write_shift(2,20),Qe.write_shift(2,$t),Qe.write_shift(2,bt),Qe.write_shift(4,0),Qe.write_shift(-4,kr[fr]),Qe.write_shift(4,Jn.length),Qe.write_shift(4,Sr.content.length),Qe.write_shift(2,Oi.length),Qe.write_shift(2,0),Qe.write_shift(2,0),Qe.write_shift(2,0),Qe.write_shift(2,0),Qe.write_shift(4,0),Qe.write_shift(4,qt),Tn+=Qe.l,Xe.push(Qe),Tn+=Oi.length,Xe.push(Oi),++fr}return Qe=Yt(22),Qe.write_shift(4,101010256),Qe.write_shift(2,0),Qe.write_shift(2,0),Qe.write_shift(2,fr),Qe.write_shift(2,fr),Qe.write_shift(4,Tn),Qe.write_shift(4,kt),Qe.write_shift(2,0),Zc([Zc(He),Zc(Xe),Qe])}var Pr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Qr(Ce,Me){if(Ce.ctype)return Ce.ctype;var Ve=Ce.name||"",He=Ve.match(/\.([^\.]+)$/);return He&&Pr[He[1]]||Me&&(He=(Ve=Me).match(/[\.\\]([^\.\\])+$/),He&&Pr[He[1]])?Pr[He[1]]:"application/octet-stream"}function Tr(Ce){for(var Me=DP(Ce),Ve=[],He=0;He<Me.length;He+=76)Ve.push(Me.slice(He,He+76));return Ve.join(`\r
`)+`\r
`}function Gr(Ce){var Me=Ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Et){var kt=Et.charCodeAt(0).toString(16).toUpperCase();return"="+(kt.length==1?"0"+kt:kt)});Me=Me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Me.charAt(0)==`
`&&(Me="=0D"+Me.slice(1)),Me=Me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ve=[],He=Me.split(`\r
`),Xe=0;Xe<He.length;++Xe){var Qe=He[Xe];if(Qe.length==0){Ve.push("");continue}for(var bt=0;bt<Qe.length;){var $t=76,wt=Qe.slice(bt,bt+$t);wt.charAt($t-1)=="="?$t--:wt.charAt($t-2)=="="?$t-=2:wt.charAt($t-3)=="="&&($t-=3),wt=Qe.slice(bt,bt+$t),bt+=$t,bt<Qe.length&&(wt+="="),Ve.push(wt)}}return Ve.join(`\r
`)}function ln(Ce){for(var Me=[],Ve=0;Ve<Ce.length;++Ve){for(var He=Ce[Ve];Ve<=Ce.length&&He.charAt(He.length-1)=="=";)He=He.slice(0,He.length-1)+Ce[++Ve];Me.push(He)}for(var Xe=0;Xe<Me.length;++Xe)Me[Xe]=Me[Xe].replace(/[=][0-9A-Fa-f]{2}/g,function(Qe){return String.fromCharCode(parseInt(Qe.slice(1),16))});return Lp(Me.join(`\r
`))}function vi(Ce,Me,Ve){for(var He="",Xe="",Qe="",bt,$t=0;$t<10;++$t){var wt=Me[$t];if(!wt||wt.match(/^\s*$/))break;var Et=wt.match(/^(.*?):\s*([^\s].*)$/);if(Et)switch(Et[1].toLowerCase()){case"content-location":He=Et[2].trim();break;case"content-type":Qe=Et[2].trim();break;case"content-transfer-encoding":Xe=Et[2].trim();break}}switch(++$t,Xe.toLowerCase()){case"base64":bt=Lp(kv(Me.slice($t).join("")));break;case"quoted-printable":bt=ln(Me.slice($t));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Xe)}var kt=$i(Ce,He.slice(Ve.length),bt,{unsafe:!0});Qe&&(kt.ctype=Qe)}function Fr(Ce,Me){if(Y(Ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ve=Me&&Me.root||"",He=(Es&&Buffer.isBuffer(Ce)?Ce.toString("binary"):Y(Ce)).split(`\r
`),Xe=0,Qe="";for(Xe=0;Xe<He.length;++Xe)if(Qe=He[Xe],!!/^Content-Location:/i.test(Qe)&&(Qe=Qe.slice(Qe.indexOf("file")),Ve||(Ve=Qe.slice(0,Qe.lastIndexOf("/")+1)),Qe.slice(0,Ve.length)!=Ve))for(;Ve.length>0&&(Ve=Ve.slice(0,Ve.length-1),Ve=Ve.slice(0,Ve.lastIndexOf("/")+1),Qe.slice(0,Ve.length)!=Ve););var bt=(He[1]||"").match(/boundary="(.*?)"/);if(!bt)throw new Error("MAD cannot find boundary");var $t="--"+(bt[1]||""),wt=[],Et=[],kt={FileIndex:wt,FullPaths:Et};I(kt);var fr,br=0;for(Xe=0;Xe<He.length;++Xe){var Nr=He[Xe];Nr!==$t&&Nr!==$t+"--"||(br++&&vi(kt,He.slice(fr,Xe),Ve),fr=Xe)}return kt}function Bi(Ce,Me){var Ve=Me||{},He=Ve.boundary||"SheetJS";He="------="+He;for(var Xe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+He.slice(2)+'"',"","",""],Qe=Ce.FullPaths[0],bt=Qe,$t=Ce.FileIndex[0],wt=1;wt<Ce.FullPaths.length;++wt)if(bt=Ce.FullPaths[wt].slice(Qe.length),$t=Ce.FileIndex[wt],!(!$t.size||!$t.content||bt=="Sh33tJ5")){bt=bt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Tn){return"_x"+Tn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Tn){return"_u"+Tn.charCodeAt(0).toString(16)+"_"});for(var Et=$t.content,kt=Es&&Buffer.isBuffer(Et)?Et.toString("binary"):Y(Et),fr=0,br=Math.min(1024,kt.length),Nr=0,Sr=0;Sr<=br;++Sr)(Nr=kt.charCodeAt(Sr))>=32&&Nr<128&&++fr;var kr=fr>=br*4/5;Xe.push(He),Xe.push("Content-Location: "+(Ve.root||"file:///C:/SheetJS/")+bt),Xe.push("Content-Transfer-Encoding: "+(kr?"quoted-printable":"base64")),Xe.push("Content-Type: "+Qr($t,bt)),Xe.push(""),Xe.push(kr?Gr(kt):Tr(kt))}return Xe.push(He+`--\r
`),Xe.join(`\r
`)}function da(Ce){var Me={};return I(Me,Ce),Me}function $i(Ce,Me,Ve,He){var Xe=He&&He.unsafe;Xe||I(Ce);var Qe=!Xe&&Js.find(Ce,Me);if(!Qe){var bt=Ce.FullPaths[0];Me.slice(0,bt.length)==bt?bt=Me:(bt.slice(-1)!="/"&&(bt+="/"),bt=(bt+Me).replace("//","/")),Qe={name:i(Me),type:2},Ce.FileIndex.push(Qe),Ce.FullPaths.push(bt),Xe||Js.utils.cfb_gc(Ce)}return Qe.content=Ve,Qe.size=Ve?Ve.length:0,He&&(He.CLSID&&(Qe.clsid=He.CLSID),He.mt&&(Qe.mt=He.mt),He.ct&&(Qe.ct=He.ct)),Qe}function ks(Ce,Me){I(Ce);var Ve=Js.find(Ce,Me);if(Ve){for(var He=0;He<Ce.FileIndex.length;++He)if(Ce.FileIndex[He]==Ve)return Ce.FileIndex.splice(He,1),Ce.FullPaths.splice(He,1),!0}return!1}function $n(Ce,Me,Ve){I(Ce);var He=Js.find(Ce,Me);if(He){for(var Xe=0;Xe<Ce.FileIndex.length;++Xe)if(Ce.FileIndex[Xe]==He)return Ce.FileIndex[Xe].name=i(Ve),Ce.FullPaths[Xe]=Ve,!0}return!1}function Mr(Ce){D(Ce,!0)}return e.find=F,e.read=O,e.parse=d,e.write=oe,e.writeFile=X,e.utils={cfb_new:da,cfb_add:$i,cfb_del:ks,cfb_mov:$n,cfb_gc:Mr,ReadShift:B4,CheckField:Pje,prep_blob:df,bconcat:Zc,use_zlib:H,_deflateRaw:ur,_inflateRaw:Wt,consts:K},e}();function OAt(t){return typeof t=="string"?wB(t):Array.isArray(t)?iAt(t):t}function TI(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=wB(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?LP(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([OAt(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=CI(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function lu(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function yue(t,e){for(var r=[],n=lu(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function oJ(t){for(var e=[],r=lu(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function SB(t){for(var e=[],r=lu(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function IAt(t){for(var e=[],r=lu(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var jL=new Date(1899,11,30,0,0,0);function ph(t,e){var r=t.getTime(),n=jL.getTime()+(t.getTimezoneOffset()-jL.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var fje=new Date,RAt=jL.getTime()+(fje.getTimezoneOffset()-jL.getTimezoneOffset())*6e4,bue=fje.getTimezoneOffset();function mje(t){var e=new Date;return e.setTime(t*24*60*60*1e3+RAt),e.getTimezoneOffset()!==bue&&e.setTime(e.getTime()+(e.getTimezoneOffset()-bue)*6e4),e}var wue=new Date("2017-02-19T19:06:09.000Z"),pje=isNaN(wue.getFullYear())?new Date("2/19/17"):wue,DAt=pje.getFullYear()==2017;function Td(t,e){var r=new Date(t);if(DAt)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(pje.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function EB(t,e){if(Es&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function gh(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=gh(t[r]));return e}function $o(t,e){for(var r="";r.length<e;)r+=t;return r}function dv(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var MAt=["january","february","march","april","may","june","july","august","september","october","november","december"];function MP(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&MAt.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function Di(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Es?n=Hv(r):n=sAt(r),Js.utils.cfb_add(t,e,n)}Js.utils.cfb_add(t,e,r)}else t.file(e,r)}function lJ(){return Js.utils.cfb_new()}var jl=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,LAt={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},cJ=oJ(LAt),uJ=/[&<>'"]/g,FAt=/[\u0000-\u0008\u000b-\u001f]/g;function zs(t){var e=t+"";return e.replace(uJ,function(r){return cJ[r]}).replace(FAt,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function _ue(t){return zs(t).replace(/ /g,"_x0020_")}var gje=/[\u0000-\u001f]/g;function BAt(t){var e=t+"";return e.replace(uJ,function(r){return cJ[r]}).replace(/\n/g,"<br/>").replace(gje,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function $At(t){var e=t+"";return e.replace(uJ,function(r){return cJ[r]}).replace(gje,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function UAt(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function zAt(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function gU(t){for(var e="",r=0,n=0,i=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function Nue(t){var e=Q_(2*t.length),r,n,i=1,s=0,o=0,l;for(n=0;n<t.length;n+=i)i=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),i=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function Sue(t){return Hv(t,"binary").toString("utf8")}var xD="foo bar baz",F4=Es&&(Sue(xD)==gU(xD)&&Sue||Nue(xD)==gU(xD)&&Nue)||gU,LP=Es?function(t){return Hv(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},VAt=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),xje=/(^\s|\s$|\n)/;function Qc(t,e){return"<"+t+(e.match(xje)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function FP(t){return lu(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Lr(t,e,r){return"<"+t+(r!=null?FP(r):"")+(e!=null?(e.match(xje)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function CW(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function qAt(t,e){switch(typeof t){case"string":var r=Lr("vt:lpwstr",zs(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Lr((t|0)==t?"vt:i4":"vt:r8",zs(String(t)));case"boolean":return Lr("vt:bool",t?"true":"false")}if(t instanceof Date)return Lr("vt:filetime",CW(t));throw new Error("Unable to serialize "+t)}var hc={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},v5=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],mf={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function HAt(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function WAt(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=n?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var Eue=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},jue=Es?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Hv(e)})):Eue(t)}:Eue,Aue=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(LT(t,i)));return n.join("").replace(L4,"")},dJ=Es?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(L4,""):Aue(t,e,r)}:Aue,Cue=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},vje=Es?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):Cue(t,e,r)}:Cue,Tue=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(pS(t,i)));return n.join("")},PI=Es?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):Tue(e,r,n)}:Tue,yje=function(t,e){var r=pf(t,e);return r>0?PI(t,e+4,e+4+r-1):""},bje=yje,wje=function(t,e){var r=pf(t,e);return r>0?PI(t,e+4,e+4+r-1):""},_je=wje,Nje=function(t,e){var r=2*pf(t,e);return r>0?PI(t,e+4,e+4+r-1):""},Sje=Nje,Eje=function(e,r){var n=pf(e,r);return n>0?dJ(e,r+4,r+4+n):""},jje=Eje,Aje=function(t,e){var r=pf(t,e);return r>0?PI(t,e+4,e+4+r):""},Cje=Aje,Tje=function(t,e){return HAt(t,e)},AL=Tje,hJ=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Es&&(bje=function(e,r){if(!Buffer.isBuffer(e))return yje(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},_je=function(e,r){if(!Buffer.isBuffer(e))return wje(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Sje=function(e,r){if(!Buffer.isBuffer(e))return Nje(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},jje=function(e,r){if(!Buffer.isBuffer(e))return Eje(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Cje=function(e,r){if(!Buffer.isBuffer(e))return Aje(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},AL=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Tje(e,r)},hJ=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var pS=function(t,e){return t[e]},LT=function(t,e){return t[e+1]*256+t[e]},GAt=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},pf=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Pw=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},KAt=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function B4(t,e){var r="",n,i,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,Es&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(LT(this,u)),u+=2;t*=2;break;case"utf8":r=PI(this,this.l,this.l+t);break;case"utf16le":t*=2,r=dJ(this,this.l,this.l+t);break;case"wstr":return B4.call(this,t,"dbcs");case"lpstr-ansi":r=bje(this,this.l),t=4+pf(this,this.l);break;case"lpstr-cp":r=_je(this,this.l),t=4+pf(this,this.l);break;case"lpwstr":r=Sje(this,this.l),t=4+2*pf(this,this.l);break;case"lpp4":t=4+pf(this,this.l),r=jje(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+pf(this,this.l),r=Cje(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=pS(this,this.l+t++))!==0;)s.push(mD(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=LT(this,this.l+t))!==0;)s.push(mD(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=pS(this,u),this.l=u+1,l=B4.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(mD(LT(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=pS(this,u),this.l=u+1,l=B4.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(mD(pS(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=pS(this,this.l),this.l++,n;case 2:return n=(e==="i"?GAt:LT)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Pw:KAt)(this,this.l),this.l+=4,n):(i=pf(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=AL(this,this.l):i=AL([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=vje(this,this.l,t);break}}return this.l+=t,r}var XAt=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},YAt=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},ZAt=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function QAt(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)ZAt(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,XAt(this,e,this.l);break;case 8:if(n=8,r==="f"){WAt(this,e,this.l);break}case 16:break;case-4:n=4,YAt(this,e,this.l);break}return this.l+=n,this}function Pje(t,e){var r=vje(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function df(t,e){t.l=e,t.read_shift=B4,t.chk=Pje,t.write_shift=QAt}function Mg(t,e){t.l+=e}function Yt(t){var e=Q_(t);return df(e,0),e}function mh(){var t=[],e=Es?256:2048,r=function(u){var d=Yt(u);return df(d,0),d},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(i(),n=r(Math.max(u+1,e)))},o=function(){return i(),Zc(t)},l=function(u){i(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function xr(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=HPt[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&hJ(r)&&t.push(r)}}function $4(t,e,r){var n=gh(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Pue(t,e,r){var n=gh(t);return n.s=$4(n.s,e.s,r),n.e=$4(n.e,e.s,r),n}function U4(t,e){if(t.cRel&&t.c<0)for(t=gh(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=gh(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=qs(t);return!t.cRel&&t.cRel!=null&&(r=tCt(r)),!t.rRel&&t.rRel!=null&&(r=JAt(r)),r}function xU(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Wu(t.s.c)+":"+(t.e.cRel?"":"$")+Wu(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+iu(t.s.r)+":"+(t.e.rRel?"":"$")+iu(t.e.r):U4(t.s,e.biff)+":"+U4(t.e,e.biff)}function fJ(t){return parseInt(eCt(t),10)-1}function iu(t){return""+(t+1)}function JAt(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function eCt(t){return t.replace(/\$(\d+)$/,"$1")}function mJ(t){for(var e=rCt(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Wu(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function tCt(t){return t.replace(/^([A-Z])/,"$$$1")}function rCt(t){return t.replace(/^\$([A-Z])/,"$1")}function nCt(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function pc(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function qs(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Rf(t){var e=t.indexOf(":");return e==-1?{s:pc(t),e:pc(t)}:{s:pc(t.slice(0,e)),e:pc(t.slice(e+1))}}function _l(t,e){return typeof e>"u"||typeof e=="number"?_l(t.s,t.e):(typeof t!="string"&&(t=qs(t)),typeof e!="string"&&(e=qs(e)),t==e?t:t+":"+e)}function La(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function kue(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Cb(t.z,r?ph(e):e)}catch{}try{return t.w=Cb((t.XF||{}).numFmtId||(r?14:0),r?ph(e):e)}catch{return""+e}}function Ov(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?kI[t.v]||t.v:e==null?kue(t,t.v):kue(t,e))}function wN(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function kje(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?pc(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=La(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var m={v:e[h][f]},x=o+h,g=l+f;if(u.s.r>x&&(u.s.r=x),u.s.c>g&&(u.s.c=g),u.e.r<x&&(u.e.r=x),u.e.c<g&&(u.e.c=g),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))m=e[h][f];else if(Array.isArray(m.v)&&(m.f=e[h][f][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||zo[14],n.cellDates?(m.t="d",m.w=Cb(m.z,ph(m.v))):(m.t="n",m.v=ph(m.v),m.w=Cb(m.z,m.v))):m.t="s";if(i)s[x]||(s[x]=[]),s[x][g]&&s[x][g].z&&(m.z=s[x][g].z),s[x][g]=m;else{var y=qs({c:g,r:x});s[y]&&s[y].z&&(m.z=s[y].z),s[y]=m}}}return u.s.c<1e7&&(s["!ref"]=_l(u)),s}function y5(t,e){return kje(null,t,e)}function iCt(t){return t.read_shift(4,"i")}function Zp(t,e){return e||(e=Yt(4)),e.write_shift(4,t),e}function Gu(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function gc(t,e){var r=!1;return e==null&&(r=!0,e=Yt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function sCt(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function aCt(t,e){return e||(e=Yt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function pJ(t,e){var r=t.l,n=t.read_shift(1),i=Gu(t),s=[],o={t:i,h:i};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(sCt(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function oCt(t,e){var r=!1;return e==null&&(r=!0,e=Yt(15+4*t.t.length)),e.write_shift(1,0),gc(t.t,e),r?e.slice(0,e.l):e}var lCt=pJ;function cCt(t,e){var r=!1;return e==null&&(r=!0,e=Yt(23+4*t.t.length)),e.write_shift(1,1),gc(t.t,e),e.write_shift(4,1),aCt({ich:0,ifnt:0},e),r?e.slice(0,e.l):e}function Vm(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function _N(t,e){return e==null&&(e=Yt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function NN(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function SN(t,e){return e==null&&(e=Yt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var uCt=Gu,Oje=gc;function gJ(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function CL(t,e){var r=!1;return e==null&&(r=!0,e=Yt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var dCt=Gu,TW=gJ,xJ=CL;function Ije(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?AL([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Pw(e,0)>>2;return r?i/100:i}function Rje(t,e){e==null&&(e=Yt(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?n=1:i==(i|0)&&i>=-(1<<29)&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Dje(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function hCt(t,e){return e||(e=Yt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var EN=Dje,b5=hCt;function w5(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function J_(t,e){return(e||Yt(8)).write_shift(8,t,"f")}function fCt(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=_Ct[i];u&&(e.rgb=zue(u));break;case 2:e.rgb=zue([o,l,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function TL(t,e){if(e||(e=Yt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function mCt(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function pCt(t,e){e||(e=Yt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var Mje=2,of=3,vD=11,PL=19,yD=64,gCt=65,xCt=71,vCt=4108,yCt=4126,qc=80,Oue={1:{n:"CodePage",t:Mje},2:{n:"Category",t:qc},3:{n:"PresentationFormat",t:qc},4:{n:"ByteCount",t:of},5:{n:"LineCount",t:of},6:{n:"ParagraphCount",t:of},7:{n:"SlideCount",t:of},8:{n:"NoteCount",t:of},9:{n:"HiddenCount",t:of},10:{n:"MultimediaClipCount",t:of},11:{n:"ScaleCrop",t:vD},12:{n:"HeadingPairs",t:vCt},13:{n:"TitlesOfParts",t:yCt},14:{n:"Manager",t:qc},15:{n:"Company",t:qc},16:{n:"LinksUpToDate",t:vD},17:{n:"CharacterCount",t:of},19:{n:"SharedDoc",t:vD},22:{n:"HyperlinksChanged",t:vD},23:{n:"AppVersion",t:of,p:"version"},24:{n:"DigSig",t:gCt},26:{n:"ContentType",t:qc},27:{n:"ContentStatus",t:qc},28:{n:"Language",t:qc},29:{n:"Version",t:qc},255:{},2147483648:{n:"Locale",t:PL},2147483651:{n:"Behavior",t:PL},1919054434:{}},Iue={1:{n:"CodePage",t:Mje},2:{n:"Title",t:qc},3:{n:"Subject",t:qc},4:{n:"Author",t:qc},5:{n:"Keywords",t:qc},6:{n:"Comments",t:qc},7:{n:"Template",t:qc},8:{n:"LastAuthor",t:qc},9:{n:"RevNumber",t:qc},10:{n:"EditTime",t:yD},11:{n:"LastPrinted",t:yD},12:{n:"CreatedDate",t:yD},13:{n:"ModifiedDate",t:yD},14:{n:"PageCount",t:of},15:{n:"WordCount",t:of},16:{n:"CharCount",t:of},17:{n:"Thumbnail",t:xCt},18:{n:"Application",t:qc},19:{n:"DocSecurity",t:of},255:{},2147483648:{n:"Locale",t:PL},2147483651:{n:"Behavior",t:PL},1919054434:{}};function bCt(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var wCt=bCt([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_Ct=gh(wCt),kI={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},NCt={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},bD={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Lje(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Fje(t,e){var r=IAt(NCt),n=[],i;n[n.length]=jl,n[n.length]=Lr("Types",null,{xmlns:hc.CT,"xmlns:xsd":hc.xsd,"xmlns:xsi":hc.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Lr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(i=t[c][0],n[n.length]=Lr("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:bD[c][e.bookType]||bD[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Lr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:bD[c][e.bookType]||bD[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Lr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var us={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Bje(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function SE(t){var e=[jl,Lr("Relationships",null,{xmlns:hc.RELS})];return lu(t["!id"]).forEach(function(r){e[e.length]=Lr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function $s(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[us.HLINK,us.XPATH,us.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function SCt(t){var e=[jl];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Rue(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function ECt(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function jCt(t){var e=[jl];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(Rue(t[r][0],t[r][1])),e.push(ECt("",t[r][0]));return e.push(Rue("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function $je(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+_L.version+"</meta:generator></office:meta></office:document-meta>"}var E_=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function vU(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=zs(e),n[n.length]=r?Lr(t,e,r):Qc(t,e))}function Uje(t,e){var r=e||{},n=[jl,Lr("cp:coreProperties",null,{"xmlns:cp":hc.CORE_PROPS,"xmlns:dc":hc.dc,"xmlns:dcterms":hc.dcterms,"xmlns:dcmitype":hc.dcmitype,"xmlns:xsi":hc.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&vU("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:CW(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&vU("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:CW(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=E_.length;++s){var o=E_[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&vU(o[0],l,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var EE=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],zje=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Vje(t){var e=[],r=Lr;return t||(t={}),t.Application="SheetJS",e[e.length]=jl,e[e.length]=Lr("Properties",null,{xmlns:hc.EXT_PROPS,"xmlns:vt":hc.vt}),EE.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=zs(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+zs(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function qje(t){var e=[jl,Lr("Properties",null,{xmlns:hc.CUST_PROPS,"xmlns:vt":hc.vt})];if(!t)return e.join("");var r=1;return lu(t).forEach(function(i){++r,e[e.length]=Lr("property",qAt(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:zs(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Due={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ACt(t,e){var r=[];return lu(Due).map(function(n){for(var i=0;i<E_.length;++i)if(E_[i][1]==n)return E_[i];for(i=0;i<EE.length;++i)if(EE[i][1]==n)return EE[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(Qc(Due[n[1]]||n[1],i))}}),Lr("DocumentProperties",r.join(""),{xmlns:mf.o})}function CCt(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&lu(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<E_.length;++o)if(s==E_[o][1])return;for(o=0;o<EE.length;++o)if(s==EE[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),i.push(Lr(_ue(s),l,{"dt:dt":c}))}}),e&&lu(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),i.push(Lr(_ue(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+mf.o+'">'+i.join("")+"</"+n+">"}function TCt(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var o=Yt(8);return o.write_shift(4,n),o.write_shift(4,i),o}function Mue(t,e){var r=Yt(4),n=Yt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Yt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=TCt(e);break;case 31:case 80:for(n=Yt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Zc([r,n])}var Hje=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function PCt(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Lue(t,e,r){var n=Yt(8),i=[],s=[],o=8,l=0,c=Yt(8),u=Yt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),o+=8+c.length,!e){u=Yt(8),u.write_shift(4,0),i.unshift(u);var d=[Yt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var h=t[l][0];for(c=Yt(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Zc(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Hje.indexOf(t[l][0])>-1||zje.indexOf(t[l][0])>-1)&&t[l][1]!=null){var f=t[l][1],m=0;if(e){m=+e[t[l][0]];var x=r[m];if(x.p=="version"&&typeof f=="string"){var g=f.split(".");f=(+g[0]<<16)+(+g[1]||0)}c=Mue(x.t,f)}else{var y=PCt(f);y==-1&&(y=31,f=String(f)),c=Mue(y,f)}s.push(c),u=Yt(8),u.write_shift(4,e?m:2+l),i.push(u),o+=8+c.length}var w=8*(s.length+1);for(l=0;l<s.length;++l)i[l].write_shift(4,w),w+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Zc([n].concat(i).concat(s))}function Fue(t,e,r,n,i,s){var o=Yt(i?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Js.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var c=Lue(t,r,n);if(l.push(c),i){var u=Lue(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Zc(l)}function kCt(t,e){e||(e=Yt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function OCt(t,e){return t.read_shift(e)===1}function xd(t,e){return e||(e=Yt(2)),e.write_shift(2,+!!t),e}function Wje(t){return t.read_shift(2,"u")}function dm(t,e){return e||(e=Yt(2)),e.write_shift(2,t),e}function Gje(t,e,r){return r||(r=Yt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Kje(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var o=n?t.read_shift(n,i):"";return o}function ICt(t){var e=t.t||"",r=Yt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Yt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return Zc(i)}function RCt(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function DCt(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):RCt(t,n,r)}function MCt(t,e,r){if(r.biff>5)return DCt(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Xje(t,e,r){return r||(r=Yt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function Bue(t,e){e||(e=Yt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function LCt(t){var e=Yt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),Bue(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&Bue(i>-1?n.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function eN(t,e,r,n){return n||(n=Yt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function FCt(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[i,s,o]}function BCt(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function Yje(t,e){return e||(e=Yt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function vJ(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Yt(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $Ct(t,e){var r=!e||e.biff==8,n=Yt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function UCt(t,e){var r=!e||e.biff>=8?2:1,n=Yt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function zCt(t,e){var r=Yt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=ICt(t[i]);var s=Zc([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function VCt(){var t=Yt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function qCt(t){var e=Yt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function HCt(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=Yt(i);return s.write_shift(2,(t.sz||12)*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function WCt(t,e,r,n){var i=Yt(10);return eN(t,e,n,i),i.write_shift(4,r),i}function GCt(t,e,r,n,i){var s=!i||i.biff==8,o=Yt(8+ +s+(1+s)*r.length);return eN(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function KCt(t,e,r,n){var i=r&&r.biff==5;n||(n=Yt(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function XCt(t,e){var r=e.biff==8||!e.biff?4:2,n=Yt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function $ue(t,e,r,n){var i=r&&r.biff==5;n||(n=Yt(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function YCt(t){var e=Yt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function ZCt(t,e,r,n,i,s){var o=Yt(8);return eN(t,e,n,o),Gje(r,s,o),o}function QCt(t,e,r,n){var i=Yt(14);return eN(t,e,n,i),J_(r,i),i}function JCt(t,e,r){if(r.biff<8)return e5t(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(FCt(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function e5t(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Kje(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function t5t(t){var e=Yt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)Yje(t[r],e);return e}function r5t(t){var e=Yt(24),r=pc(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Zc([e,LCt(t[1])])}function n5t(t){var e=t[1].Tooltip,r=Yt(10+2*(e.length+1));r.write_shift(2,2048);var n=pc(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function i5t(t){return t||(t=Yt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function s5t(t,e,r){if(!r.cellStyles)return Mg(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:i,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function a5t(t,e){var r=Yt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function o5t(t){for(var e=Yt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function l5t(t,e,r){var n=Yt(15);return II(n,t,e),n.write_shift(8,r,"f"),n}function c5t(t,e,r){var n=Yt(9);return II(n,t,e),n.write_shift(2,r),n}var u5t=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=oJ({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Q_(1);switch(c.type){case"base64":d=Lp(kv(l));break;case"binary":d=Lp(l);break;case"buffer":case"array":d=l;break}df(d,0);var h=d.read_shift(1),f=!!(h&136),m=!1,x=!1;switch(h){case 2:break;case 3:break;case 48:m=!0,f=!0;break;case 49:m=!0,f=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,y=521;h==2&&(g=d.read_shift(2)),d.l+=3,h!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(y=d.read_shift(2));var w=d.read_shift(2),S=c.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=t[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var E=[],j={},T=Math.min(d.length,h==2?521:y-10-(m?264:0)),O=x?32:11;d.l<T&&d[d.l]!=13;)switch(j={},j.name=Tw.utils.decode(S,d.slice(d.l,d.l+O)).replace(/[\u0000\r\n].*$/g,""),d.l+=O,j.type=String.fromCharCode(d.read_shift(1)),h!=2&&!x&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),h==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&E.push(j),h!=2&&(d.l+=x?13:14),j.type){case"B":(!m||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=y-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=y;var I=0,M=0;for(u[0]=[],M=0;M!=E.length;++M)u[0][M]=E[M].name;for(;g-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,u[++I]=[],M=0,M=0;M!=E.length;++M){var D=d.slice(d.l,d.l+E[M].len);d.l+=E[M].len,df(D,0);var z=Tw.utils.decode(S,D);switch(E[M].type){case"C":z.trim().length&&(u[I][M]=z.replace(/\s+$/,""));break;case"D":z.length===8?u[I][M]=new Date(+z.slice(0,4),+z.slice(4,6)-1,+z.slice(6,8)):u[I][M]=z;break;case"F":u[I][M]=parseFloat(z.trim());break;case"+":case"I":u[I][M]=x?D.read_shift(-4,"i")^2147483648:D.read_shift(4,"i");break;case"L":switch(z.trim().toUpperCase()){case"Y":case"T":u[I][M]=!0;break;case"N":case"F":u[I][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+z+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[I][M]="##MEMO##"+(x?parseInt(z.trim(),10):D.read_shift(4));break;case"N":z=z.replace(/\u0000/g,"").trim(),z&&z!="."&&(u[I][M]=+z||0);break;case"@":u[I][M]=new Date(D.read_shift(-8,"f")-621356832e5);break;case"T":u[I][M]=new Date((D.read_shift(4)-2440588)*864e5+D.read_shift(4));break;case"Y":u[I][M]=D.read_shift(4,"i")/1e4+D.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[I][M]=-D.read_shift(-8,"f");break;case"B":if(m&&E[M].len==8){u[I][M]=D.read_shift(8,"f");break}case"G":case"P":D.l+=E[M].len;break;case"0":if(E[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[M].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=E,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=y5(r(l,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function i(l,c){try{return wN(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&RP(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=mh(),h=DL(l,{header:1,raw:!0,cellDates:!0}),f=h[0],m=h.slice(1),x=l["!cols"]||[],g=0,y=0,w=0,S=1;for(g=0;g<f.length;++g){if(((x[g]||{}).DBF||{}).name){f[g]=x[g].DBF.name,++w;continue}if(f[g]!=null){if(++w,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(y=0;y<1024;++y)if(f.indexOf(f[g]+"_"+y)==-1){f[g]+="_"+y;break}}}}var E=La(l["!ref"]),j=[],T=[],O=[];for(g=0;g<=E.e.c-E.s.c;++g){var I="",M="",D=0,z=[];for(y=0;y<m.length;++y)m[y][g]!=null&&z.push(m[y][g]);if(z.length==0||f[g]==null){j[g]="?";continue}for(y=0;y<z.length;++y){switch(typeof z[y]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=z[y]instanceof Date?"D":"C";break;default:M="C"}D=Math.max(D,String(z[y]).length),I=I&&I!=M?"C":M}D>250&&(D=250),M=((x[g]||{}).DBF||{}).type,M=="C"&&x[g].DBF.len>D&&(D=x[g].DBF.len),I=="B"&&M=="N"&&(I="N",O[g]=x[g].DBF.dec,D=x[g].DBF.len),T[g]=I=="C"||M=="N"?D:s[I]||0,S+=T[g],j[g]=I}var F=d.next(32);for(F.write_shift(4,318902576),F.write_shift(4,m.length),F.write_shift(2,296+32*w),F.write_shift(2,S),g=0;g<4;++g)F.write_shift(4,0);for(F.write_shift(4,0|(+e[QEe]||3)<<8),g=0,y=0;g<f.length;++g)if(f[g]!=null){var q=d.next(32),Q=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);q.write_shift(1,Q,"sbcs"),q.write_shift(1,j[g]=="?"?"C":j[g],"sbcs"),q.write_shift(4,y),q.write_shift(1,T[g]||s[j[g]]||0),q.write_shift(1,O[g]||0),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(1,0),q.write_shift(4,0),q.write_shift(4,0),y+=T[g]||s[j[g]]||0}var re=d.next(264);for(re.write_shift(4,13),g=0;g<65;++g)re.write_shift(4,0);for(g=0;g<m.length;++g){var Z=d.next(S);for(Z.write_shift(1,0),y=0;y<f.length;++y)if(f[y]!=null)switch(j[y]){case"L":Z.write_shift(1,m[g][y]==null?63:m[g][y]?84:70);break;case"B":Z.write_shift(8,m[g][y]||0,"f");break;case"N":var se="0";for(typeof m[g][y]=="number"&&(se=m[g][y].toFixed(O[y]||0)),w=0;w<T[y]-se.length;++w)Z.write_shift(1,32);Z.write_shift(1,se,"sbcs");break;case"D":m[g][y]?(Z.write_shift(4,("0000"+m[g][y].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(m[g][y].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+m[g][y].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var K=String(m[g][y]!=null?m[g][y]:"").slice(0,T[y]);for(Z.write_shift(1,K,"sbcs"),w=0;w<T[y]-K.length;++w)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:n,from_sheet:o}}(),d5t=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+lu(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,m){var x=t[m];return typeof x=="number"?uue(x):x},n=function(f,m,x){var g=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return g==59?f:uue(g)};t["|"]=254;function i(f,m){switch(m.type){case"base64":return s(kv(f),m);case"binary":return s(f,m);case"buffer":return s(Es&&Buffer.isBuffer(f)?f.toString("binary"):CI(f),m);case"array":return s(EB(f),m)}throw new Error("Unrecognized type "+m.type)}function s(f,m){var x=f.split(/[\n\r]+/),g=-1,y=-1,w=0,S=0,E=[],j=[],T=null,O={},I=[],M=[],D=[],z=0,F;for(+m.codepage>=0&&RP(+m.codepage);w!==x.length;++w){z=0;var q=x[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),Q=q.replace(/;;/g,"\0").split(";").map(function(ce){return ce.replace(/\u0000/g,";")}),re=Q[0],Z;if(q.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&j.push(q.slice(3).replace(/;;/g,";"));break;case"C":var se=!1,K=!1,X=!1,Y=!1,oe=-1,xe=-1;for(S=1;S<Q.length;++S)switch(Q[S].charAt(0)){case"A":break;case"X":y=parseInt(Q[S].slice(1))-1,K=!0;break;case"Y":for(g=parseInt(Q[S].slice(1))-1,K||(y=0),F=E.length;F<=g;++F)E[F]=[];break;case"K":Z=Q[S].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(dv(Z))?isNaN(MP(Z).getDate())||(Z=Td(Z)):(Z=dv(Z),T!==null&&uje(T)&&(Z=mje(Z))),se=!0;break;case"E":Y=!0;var H=cTt(Q[S].slice(1),{r:g,c:y});E[g][y]=[E[g][y],H];break;case"S":X=!0,E[g][y]=[E[g][y],"S5S"];break;case"G":break;case"R":oe=parseInt(Q[S].slice(1))-1;break;case"C":xe=parseInt(Q[S].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+q)}if(se&&(E[g][y]&&E[g][y].length==2?E[g][y][0]=Z:E[g][y]=Z,T=null),X){if(Y)throw new Error("SYLK shared formula cannot have own formula");var J=oe>-1&&E[oe][xe];if(!J||!J[1])throw new Error("SYLK shared formula cannot find base");E[g][y][1]=uTt(J[1],{r:g-oe,c:y-xe})}break;case"F":var ie=0;for(S=1;S<Q.length;++S)switch(Q[S].charAt(0)){case"X":y=parseInt(Q[S].slice(1))-1,++ie;break;case"Y":for(g=parseInt(Q[S].slice(1))-1,F=E.length;F<=g;++F)E[F]=[];break;case"M":z=parseInt(Q[S].slice(1))/20;break;case"F":break;case"G":break;case"P":T=j[parseInt(Q[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(D=Q[S].slice(1).split(" "),F=parseInt(D[0],10);F<=parseInt(D[1],10);++F)z=parseInt(D[2],10),M[F-1]=z===0?{hidden:!0}:{wch:z},yJ(M[F-1]);break;case"C":y=parseInt(Q[S].slice(1))-1,M[y]||(M[y]={});break;case"R":g=parseInt(Q[S].slice(1))-1,I[g]||(I[g]={}),z>0?(I[g].hpt=z,I[g].hpx=tAe(z)):z===0&&(I[g].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+q)}ie<1&&(T=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+q)}}return I.length>0&&(O["!rows"]=I),M.length>0&&(O["!cols"]=M),m&&m.sheetRows&&(E=E.slice(0,m.sheetRows)),[E,O]}function o(f,m){var x=i(f,m),g=x[0],y=x[1],w=y5(g,m);return lu(y).forEach(function(S){w[S]=y[S]}),w}function l(f,m){return wN(o(f,m),m)}function c(f,m,x,g){var y="C;Y"+(x+1)+";X"+(g+1)+";K";switch(f.t){case"n":y+=f.v||0,f.f&&!f.F&&(y+=";E"+wJ(f.f,{r:x,c:g}));break;case"b":y+=f.v?"TRUE":"FALSE";break;case"e":y+=f.w||f.v;break;case"d":y+='"'+(f.w||f.v)+'"';break;case"s":y+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(f,m){m.forEach(function(x,g){var y="F;W"+(g+1)+" "+(g+1)+" ";x.hidden?y+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=kL(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=OL(x.wpx)),typeof x.wch=="number"&&(y+=Math.round(x.wch))),y.charAt(y.length-1)!=" "&&f.push(y)})}function d(f,m){m.forEach(function(x,g){var y="F;";x.hidden?y+="M0;":x.hpt?y+="M"+20*x.hpt+";":x.hpx&&(y+="M"+20*IL(x.hpx)+";"),y.length>2&&f.push(y+"R"+(g+1))})}function h(f,m){var x=["ID;PWXL;N;E"],g=[],y=La(f["!ref"]),w,S=Array.isArray(f),E=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),f["!cols"]&&u(x,f["!cols"]),f["!rows"]&&d(x,f["!rows"]),x.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var j=y.s.r;j<=y.e.r;++j)for(var T=y.s.c;T<=y.e.c;++T){var O=qs({r:j,c:T});w=S?(f[j]||[])[T]:f[O],!(!w||w.v==null&&(!w.f||w.F))&&g.push(c(w,f,j,T))}return x.join(E)+E+g.join(E)+E+"E"+E}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),h5t=function(){function t(s,o){switch(o.type){case"base64":return e(kv(s),o);case"binary":return e(s,o);case"buffer":return e(Es&&Buffer.isBuffer(s)?s.toString("binary"):CI(s),o);case"array":return e(EB(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,h=[];d!==l.length;++d){if(l[d].trim()==="BOT"){h[++c]=[],u=0;continue}if(!(c<0)){var f=l[d].trim().split(","),m=f[0],x=f[1];++d;for(var g=l[d]||"";(g.match(/["]/g)||[]).length&1&&d<l.length-1;)g+=`
`+l[++d];switch(g=g.trim(),+m){case-1:if(g==="BOT"){h[++c]=[],u=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][u]=!0:g==="FALSE"?h[c][u]=!1:isNaN(dv(x))?isNaN(MP(x).getDate())?h[c][u]=x:h[c][u]=Td(x):h[c][u]=dv(x),++u;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][u++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(s,o){return y5(t(s,o),o)}function n(s,o){return wN(r(s,o),o)}var i=function(){var s=function(c,u,d,h,f){c.push(u),c.push(d+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},o=function(c,u,d,h){c.push(u+","+d),c.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var u=[],d=La(c["!ref"]),h,f=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var g=qs({r:m,c:x});if(h=f?(c[m]||[])[x]:c[g],!h){o(u,1,0,"");continue}switch(h.t){case"n":var y=h.w;!y&&h.v!=null&&(y=h.v),y==null?h.f&&!h.F?o(u,1,0,"="+h.f):o(u,1,0,""):o(u,0,y,"V");break;case"b":o(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Cb(h.z||zo[14],ph(Td(h.v)))),o(u,0,h.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var w=`\r
`,S=u.join(w);return S}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),Zje=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var m=h.split(`
`),x=-1,g=-1,y=0,w=[];y!==m.length;++y){var S=m[y].trim().split(":");if(S[0]==="cell"){var E=pc(S[1]);if(w.length<=E.r)for(x=w.length;x<=E.r;++x)w[x]||(w[x]=[]);switch(x=E.r,g=E.c,S[2]){case"t":w[x][g]=t(S[3]);break;case"v":w[x][g]=+S[3];break;case"vtf":var j=S[S.length-1];case"vtc":switch(S[3]){case"nl":w[x][g]=!!+S[4];break;default:w[x][g]=+S[4];break}S[2]=="vtf"&&(w[x][g]=[w[x][g],j])}}}return f&&f.sheetRows&&(w=w.slice(0,f.sheetRows)),w}function n(h,f){return y5(r(h,f),f)}function i(h,f){return wN(n(h,f),f)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var f=[],m=[],x,g="",y=Rf(h["!ref"]),w=Array.isArray(h),S=y.s.r;S<=y.e.r;++S)for(var E=y.s.c;E<=y.e.c;++E)if(g=qs({r:S,c:E}),x=w?(h[S]||[])[E]:h[g],!(!x||x.v==null||x.t==="z")){switch(m=["cell",g,"t"],x.t){case"s":case"str":m.push(e(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=e(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var j=ph(Td(x.v));m[2]="vtc",m[3]="nd",m[4]=""+j,m[5]=x.w||Cb(x.z||zo[14],j);break;case"e":continue}f.push(m.join(":"))}return f.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function d(h){return[s,o,l,o,u(h),c].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:d}}(),f5t=function(){function t(d,h,f,m,x){x.raw?h[f][m]=d:d===""||(d==="TRUE"?h[f][m]=!0:d==="FALSE"?h[f][m]=!1:isNaN(dv(d))?isNaN(MP(d).getDate())?h[f][m]=d:h[f][m]=Td(d):h[f][m]=dv(d))}function e(d,h){var f=h||{},m=[];if(!d||d.length===0)return m;for(var x=d.split(/[\r\n]/),g=x.length-1;g>=0&&x[g].length===0;)--g;for(var y=10,w=0,S=0;S<=g;++S)w=x[S].indexOf(" "),w==-1?w=x[S].length:w++,y=Math.max(y,w);for(S=0;S<=g;++S){m[S]=[];var E=0;for(t(x[S].slice(0,y).trim(),m,S,E,f),E=1;E<=(x[S].length-y)/10+1;++E)t(x[S].slice(y+(E-1)*10,y+E*10).trim(),m,S,E,f)}return f.sheetRows&&(m=m.slice(0,f.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(d){for(var h={},f=!1,m=0,x=0;m<d.length;++m)(x=d.charCodeAt(m))==34?f=!f:!f&&x in r&&(h[x]=(h[x]||0)+1);x=[];for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&x.push([h[m],m]);if(!x.length){h=n;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&x.push([h[m],m])}return x.sort(function(g,y){return g[0]-y[0]||n[g[1]]-n[y[1]]}),r[x.pop()[1]]||44}function s(d,h){var f=h||{},m="",x=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=i(d.slice(0,1024)):f&&f.FS?m=f.FS:m=i(d.slice(0,1024));var y=0,w=0,S=0,E=0,j=0,T=m.charCodeAt(0),O=!1,I=0,M=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var D=f.dateNF!=null?TAt(f.dateNF):null;function z(){var F=d.slice(E,j),q={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)q.t="z";else if(f.raw)q.t="s",q.v=F;else if(F.trim().length===0)q.t="s",q.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(q.t="s",q.v=F.slice(2,-1).replace(/""/g,'"')):dTt(F)?(q.t="n",q.f=F.slice(1)):(q.t="s",q.v=F);else if(F=="TRUE")q.t="b",q.v=!0;else if(F=="FALSE")q.t="b",q.v=!1;else if(!isNaN(S=dv(F)))q.t="n",f.cellText!==!1&&(q.w=F),q.v=S;else if(!isNaN(MP(F).getDate())||D&&F.match(D)){q.z=f.dateNF||zo[14];var Q=0;D&&F.match(D)&&(F=PAt(F,f.dateNF,F.match(D)||[]),Q=1),f.cellDates?(q.t="d",q.v=Td(F,Q)):(q.t="n",q.v=ph(Td(F,Q))),f.cellText!==!1&&(q.w=Cb(q.z,q.v instanceof Date?ph(q.v):q.v)),f.cellNF||delete q.z}else q.t="s",q.v=F;if(q.t=="z"||(f.dense?(x[y]||(x[y]=[]),x[y][w]=q):x[qs({c:w,r:y})]=q),E=j+1,M=d.charCodeAt(E),g.e.c<w&&(g.e.c=w),g.e.r<y&&(g.e.r=y),I==T)++w;else if(w=0,++y,f.sheetRows&&f.sheetRows<=y)return!0}e:for(;j<d.length;++j)switch(I=d.charCodeAt(j)){case 34:M===34&&(O=!O);break;case T:case 10:case 13:if(!O&&z())break e;break}return j-E>0&&z(),x["!ref"]=_l(g),x}function o(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):y5(e(d,h),h)}function l(d,h){var f="",m=h.type=="string"?[0,0,0,0]:Ekt(d,h);switch(h.type){case"base64":f=kv(d);break;case"binary":f=d;break;case"buffer":h.codepage==65001?f=d.toString("utf8"):h.codepage&&typeof Tw<"u"?f=Tw.utils.decode(h.codepage,d):f=Es&&Buffer.isBuffer(d)?d.toString("binary"):CI(d);break;case"array":f=EB(d);break;case"string":f=d;break;default:throw new Error("Unrecognized type "+h.type)}return m[0]==239&&m[1]==187&&m[2]==191?f=F4(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=F4(f):h.type=="binary"&&typeof Tw<"u"&&h.codepage&&(f=Tw.utils.decode(h.codepage,Tw.utils.encode(28591,f))),f.slice(0,19)=="socialcalc:version:"?Zje.to_sheet(h.type=="string"?f:F4(f),h):o(f,h)}function c(d,h){return wN(l(d,h),h)}function u(d){for(var h=[],f=La(d["!ref"]),m,x=Array.isArray(d),g=f.s.r;g<=f.e.r;++g){for(var y=[],w=f.s.c;w<=f.e.c;++w){var S=qs({r:g,c:w});if(m=x?(d[g]||[])[w]:d[S],!m||m.v==null){y.push("          ");continue}for(var E=(m.w||(Ov(m),m.w)||"").slice(0,10);E.length<10;)E+=" ";y.push(E+(w===0?" ":""))}h.push(y.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),Uue=function(){function t(H,J,ie){if(H){df(H,H.l||0);for(var ce=ie.Enum||oe;H.l<H.length;){var me=H.read_shift(2),he=ce[me]||ce[65535],_e=H.read_shift(2),ue=H.l+_e,je=he.f&&he.f(H,_e,ie);if(H.l=ue,J(je,he,me))return}}}function e(H,J){switch(J.type){case"base64":return r(Lp(kv(H)),J);case"binary":return r(Lp(H),J);case"buffer":case"array":return r(H,J)}throw"Unsupported type "+J.type}function r(H,J){if(!H)return H;var ie=J||{},ce=ie.dense?[]:{},me="Sheet1",he="",_e=0,ue={},je=[],ye=[],Le={s:{r:0,c:0},e:{r:0,c:0}},Ge=ie.sheetRows||0;if(H[2]==0&&(H[3]==8||H[3]==9)&&H.length>=16&&H[14]==5&&H[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(H[2]==2)ie.Enum=oe,t(H,function(tt,Re,Ue){switch(Ue){case 0:ie.vers=tt,tt>=4096&&(ie.qpro=!0);break;case 6:Le=tt;break;case 204:tt&&(he=tt);break;case 222:he=tt;break;case 15:case 51:ie.qpro||(tt[1].v=tt[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(tt[2]&112)==112&&(tt[2]&15)>1&&(tt[2]&15)<15&&(tt[1].z=ie.dateNF||zo[14],ie.cellDates&&(tt[1].t="d",tt[1].v=mje(tt[1].v))),ie.qpro&&tt[3]>_e&&(ce["!ref"]=_l(Le),ue[me]=ce,je.push(me),ce=ie.dense?[]:{},Le={s:{r:0,c:0},e:{r:0,c:0}},_e=tt[3],me=he||"Sheet"+(_e+1),he="");var xt=ie.dense?(ce[tt[0].r]||[])[tt[0].c]:ce[qs(tt[0])];if(xt){xt.t=tt[1].t,xt.v=tt[1].v,tt[1].z!=null&&(xt.z=tt[1].z),tt[1].f!=null&&(xt.f=tt[1].f);break}ie.dense?(ce[tt[0].r]||(ce[tt[0].r]=[]),ce[tt[0].r][tt[0].c]=tt[1]):ce[qs(tt[0])]=tt[1];break}},ie);else if(H[2]==26||H[2]==14)ie.Enum=xe,H[2]==14&&(ie.qpro=!0,H.l=0),t(H,function(tt,Re,Ue){switch(Ue){case 204:me=tt;break;case 22:tt[1].v=tt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(tt[3]>_e&&(ce["!ref"]=_l(Le),ue[me]=ce,je.push(me),ce=ie.dense?[]:{},Le={s:{r:0,c:0},e:{r:0,c:0}},_e=tt[3],me="Sheet"+(_e+1)),Ge>0&&tt[0].r>=Ge)break;ie.dense?(ce[tt[0].r]||(ce[tt[0].r]=[]),ce[tt[0].r][tt[0].c]=tt[1]):ce[qs(tt[0])]=tt[1],Le.e.c<tt[0].c&&(Le.e.c=tt[0].c),Le.e.r<tt[0].r&&(Le.e.r=tt[0].r);break;case 27:tt[14e3]&&(ye[tt[14e3][0]]=tt[14e3][1]);break;case 1537:ye[tt[0]]=tt[1],tt[0]==_e&&(me=tt[1]);break}},ie);else throw new Error("Unrecognized LOTUS BOF "+H[2]);if(ce["!ref"]=_l(Le),ue[he||me]=ce,je.push(he||me),!ye.length)return{SheetNames:je,Sheets:ue};for(var Be={},Te=[],ze=0;ze<ye.length;++ze)ue[je[ze]]?(Te.push(ye[ze]||je[ze]),Be[ye[ze]]=ue[ye[ze]]||ue[je[ze]]):(Te.push(ye[ze]),Be[ye[ze]]={"!ref":"A1"});return{SheetNames:Te,Sheets:Be}}function n(H,J){var ie=J||{};if(+ie.codepage>=0&&RP(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK1 to JS string");var ce=mh(),me=La(H["!ref"]),he=Array.isArray(H),_e=[];Br(ce,0,s(1030)),Br(ce,6,c(me));for(var ue=Math.min(me.e.r,8191),je=me.s.r;je<=ue;++je)for(var ye=iu(je),Le=me.s.c;Le<=me.e.c;++Le){je===me.s.r&&(_e[Le]=Wu(Le));var Ge=_e[Le]+ye,Be=he?(H[je]||[])[Le]:H[Ge];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?Br(ce,13,m(je,Le,Be.v)):Br(ce,14,g(je,Le,Be.v));else{var Te=Ov(Be);Br(ce,15,h(je,Le,Te.slice(0,239)))}}return Br(ce,1),ce.end()}function i(H,J){var ie=J||{};if(+ie.codepage>=0&&RP(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK3 to JS string");var ce=mh();Br(ce,0,o(H));for(var me=0,he=0;me<H.SheetNames.length;++me)(H.Sheets[H.SheetNames[me]]||{})["!ref"]&&Br(ce,27,Y(H.SheetNames[me],he++));var _e=0;for(me=0;me<H.SheetNames.length;++me){var ue=H.Sheets[H.SheetNames[me]];if(!(!ue||!ue["!ref"])){for(var je=La(ue["!ref"]),ye=Array.isArray(ue),Le=[],Ge=Math.min(je.e.r,8191),Be=je.s.r;Be<=Ge;++Be)for(var Te=iu(Be),ze=je.s.c;ze<=je.e.c;++ze){Be===je.s.r&&(Le[ze]=Wu(ze));var tt=Le[ze]+Te,Re=ye?(ue[Be]||[])[ze]:ue[tt];if(!(!Re||Re.t=="z"))if(Re.t=="n")Br(ce,23,z(Be,ze,_e,Re.v));else{var Ue=Ov(Re);Br(ce,22,I(Be,ze,_e,Ue.slice(0,239)))}}++_e}}return Br(ce,1),ce.end()}function s(H){var J=Yt(2);return J.write_shift(2,H),J}function o(H){var J=Yt(26);J.write_shift(2,4096),J.write_shift(2,4),J.write_shift(4,0);for(var ie=0,ce=0,me=0,he=0;he<H.SheetNames.length;++he){var _e=H.SheetNames[he],ue=H.Sheets[_e];if(!(!ue||!ue["!ref"])){++me;var je=Rf(ue["!ref"]);ie<je.e.r&&(ie=je.e.r),ce<je.e.c&&(ce=je.e.c)}}return ie>8191&&(ie=8191),J.write_shift(2,ie),J.write_shift(1,me),J.write_shift(1,ce),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(1,1),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(4,0),J}function l(H,J,ie){var ce={s:{c:0,r:0},e:{c:0,r:0}};return J==8&&ie.qpro?(ce.s.c=H.read_shift(1),H.l++,ce.s.r=H.read_shift(2),ce.e.c=H.read_shift(1),H.l++,ce.e.r=H.read_shift(2),ce):(ce.s.c=H.read_shift(2),ce.s.r=H.read_shift(2),J==12&&ie.qpro&&(H.l+=2),ce.e.c=H.read_shift(2),ce.e.r=H.read_shift(2),J==12&&ie.qpro&&(H.l+=2),ce.s.c==65535&&(ce.s.c=ce.e.c=ce.s.r=ce.e.r=0),ce)}function c(H){var J=Yt(8);return J.write_shift(2,H.s.c),J.write_shift(2,H.s.r),J.write_shift(2,H.e.c),J.write_shift(2,H.e.r),J}function u(H,J,ie){var ce=[{c:0,r:0},{t:"n",v:0},0,0];return ie.qpro&&ie.vers!=20768?(ce[0].c=H.read_shift(1),ce[3]=H.read_shift(1),ce[0].r=H.read_shift(2),H.l+=2):(ce[2]=H.read_shift(1),ce[0].c=H.read_shift(2),ce[0].r=H.read_shift(2)),ce}function d(H,J,ie){var ce=H.l+J,me=u(H,J,ie);if(me[1].t="s",ie.vers==20768){H.l++;var he=H.read_shift(1);return me[1].v=H.read_shift(he,"utf8"),me}return ie.qpro&&H.l++,me[1].v=H.read_shift(ce-H.l,"cstr"),me}function h(H,J,ie){var ce=Yt(7+ie.length);ce.write_shift(1,255),ce.write_shift(2,J),ce.write_shift(2,H),ce.write_shift(1,39);for(var me=0;me<ce.length;++me){var he=ie.charCodeAt(me);ce.write_shift(1,he>=128?95:he)}return ce.write_shift(1,0),ce}function f(H,J,ie){var ce=u(H,J,ie);return ce[1].v=H.read_shift(2,"i"),ce}function m(H,J,ie){var ce=Yt(7);return ce.write_shift(1,255),ce.write_shift(2,J),ce.write_shift(2,H),ce.write_shift(2,ie,"i"),ce}function x(H,J,ie){var ce=u(H,J,ie);return ce[1].v=H.read_shift(8,"f"),ce}function g(H,J,ie){var ce=Yt(13);return ce.write_shift(1,255),ce.write_shift(2,J),ce.write_shift(2,H),ce.write_shift(8,ie,"f"),ce}function y(H,J,ie){var ce=H.l+J,me=u(H,J,ie);if(me[1].v=H.read_shift(8,"f"),ie.qpro)H.l=ce;else{var he=H.read_shift(2);j(H.slice(H.l,H.l+he),me),H.l+=he}return me}function w(H,J,ie){var ce=J&32768;return J&=-32769,J=(ce?H:0)+(J>=8192?J-16384:J),(ce?"":"$")+(ie?Wu(J):iu(J))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(H,J){df(H,0);for(var ie=[],ce=0,me="",he="",_e="",ue="";H.l<H.length;){var je=H[H.l++];switch(je){case 0:ie.push(H.read_shift(8,"f"));break;case 1:he=w(J[0].c,H.read_shift(2),!0),me=w(J[0].r,H.read_shift(2),!1),ie.push(he+me);break;case 2:{var ye=w(J[0].c,H.read_shift(2),!0),Le=w(J[0].r,H.read_shift(2),!1);he=w(J[0].c,H.read_shift(2),!0),me=w(J[0].r,H.read_shift(2),!1),ie.push(ye+Le+":"+he+me)}break;case 3:if(H.l<H.length){console.error("WK1 premature formula end");return}break;case 4:ie.push("("+ie.pop()+")");break;case 5:ie.push(H.read_shift(2));break;case 6:{for(var Ge="";je=H[H.l++];)Ge+=String.fromCharCode(je);ie.push('"'+Ge.replace(/"/g,'""')+'"')}break;case 8:ie.push("-"+ie.pop());break;case 23:ie.push("+"+ie.pop());break;case 22:ie.push("NOT("+ie.pop()+")");break;case 20:case 21:ue=ie.pop(),_e=ie.pop(),ie.push(["AND","OR"][je-20]+"("+_e+","+ue+")");break;default:if(je<32&&E[je])ue=ie.pop(),_e=ie.pop(),ie.push(_e+E[je]+ue);else if(S[je]){if(ce=S[je][1],ce==69&&(ce=H[H.l++]),ce>ie.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+ie.join("|")+"|");return}var Be=ie.slice(-ce);ie.length-=ce,ie.push(S[je][0]+"("+Be.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}ie.length==1?J[1].f=""+ie[0]:console.error("WK1 bad formula parse |"+ie.join("|")+"|")}function T(H){var J=[{c:0,r:0},{t:"n",v:0},0];return J[0].r=H.read_shift(2),J[3]=H[H.l++],J[0].c=H[H.l++],J}function O(H,J){var ie=T(H);return ie[1].t="s",ie[1].v=H.read_shift(J-4,"cstr"),ie}function I(H,J,ie,ce){var me=Yt(6+ce.length);me.write_shift(2,H),me.write_shift(1,ie),me.write_shift(1,J),me.write_shift(1,39);for(var he=0;he<ce.length;++he){var _e=ce.charCodeAt(he);me.write_shift(1,_e>=128?95:_e)}return me.write_shift(1,0),me}function M(H,J){var ie=T(H);ie[1].v=H.read_shift(2);var ce=ie[1].v>>1;if(ie[1].v&1)switch(ce&7){case 0:ce=(ce>>3)*5e3;break;case 1:ce=(ce>>3)*500;break;case 2:ce=(ce>>3)/20;break;case 3:ce=(ce>>3)/200;break;case 4:ce=(ce>>3)/2e3;break;case 5:ce=(ce>>3)/2e4;break;case 6:ce=(ce>>3)/16;break;case 7:ce=(ce>>3)/64;break}return ie[1].v=ce,ie}function D(H,J){var ie=T(H),ce=H.read_shift(4),me=H.read_shift(4),he=H.read_shift(2);if(he==65535)return ce===0&&me===3221225472?(ie[1].t="e",ie[1].v=15):ce===0&&me===3489660928?(ie[1].t="e",ie[1].v=42):ie[1].v=0,ie;var _e=he&32768;return he=(he&32767)-16446,ie[1].v=(1-_e*2)*(me*Math.pow(2,he+32)+ce*Math.pow(2,he)),ie}function z(H,J,ie,ce){var me=Yt(14);if(me.write_shift(2,H),me.write_shift(1,ie),me.write_shift(1,J),ce==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var he=0,_e=0,ue=0,je=0;return ce<0&&(he=1,ce=-ce),_e=Math.log2(ce)|0,ce/=Math.pow(2,_e-31),je=ce>>>0,je&2147483648||(ce/=2,++_e,je=ce>>>0),ce-=je,je|=2147483648,je>>>=0,ce*=Math.pow(2,32),ue=ce>>>0,me.write_shift(4,ue),me.write_shift(4,je),_e+=16383+(he?32768:0),me.write_shift(2,_e),me}function F(H,J){var ie=D(H);return H.l+=J-14,ie}function q(H,J){var ie=T(H),ce=H.read_shift(4);return ie[1].v=ce>>6,ie}function Q(H,J){var ie=T(H),ce=H.read_shift(8,"f");return ie[1].v=ce,ie}function re(H,J){var ie=Q(H);return H.l+=J-10,ie}function Z(H,J){return H[H.l+J-1]==0?H.read_shift(J,"cstr"):""}function se(H,J){var ie=H[H.l++];ie>J-1&&(ie=J-1);for(var ce="";ce.length<ie;)ce+=String.fromCharCode(H[H.l++]);return ce}function K(H,J,ie){if(!(!ie.qpro||J<21)){var ce=H.read_shift(1);H.l+=17,H.l+=1,H.l+=2;var me=H.read_shift(J-21,"cstr");return[ce,me]}}function X(H,J){for(var ie={},ce=H.l+J;H.l<ce;){var me=H.read_shift(2);if(me==14e3){for(ie[me]=[0,""],ie[me][0]=H.read_shift(2);H[H.l];)ie[me][1]+=String.fromCharCode(H[H.l]),H.l++;H.l++}}return ie}function Y(H,J){var ie=Yt(5+H.length);ie.write_shift(2,14e3),ie.write_shift(2,J);for(var ce=0;ce<H.length;++ce){var me=H.charCodeAt(ce);ie[ie.l++]=me>127?95:me}return ie[ie.l++]=0,ie}var oe={0:{n:"BOF",f:Wje},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:se},65535:{n:""}},xe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:O},23:{n:"NUMBER17",f:D},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:q},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:K},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),m5t=/^\s|\s$|[\t\n\r]/;function Qje(t,e){if(!e.bookSST)return"";var r=[jl];r[r.length]=Lr("sst",null,{xmlns:v5[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(m5t)&&(s+=' xml:space="preserve"'),s+=">"+zs(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function p5t(t){return[t.read_shift(4),t.read_shift(4)]}function g5t(t,e){return e||(e=Yt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var x5t=oCt;function v5t(t){var e=mh();xr(e,159,g5t(t));for(var r=0;r<t.length;++r)xr(e,19,x5t(t[r]));return xr(e,160),e.end()}function y5t(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Jje(t){var e=0,r,n=y5t(t),i=n.length+1,s,o,l,c,u;for(r=Q_(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var b5t=function(){function t(i,s){switch(s.type){case"base64":return e(kv(i),s);case"binary":return e(i,s);case"buffer":return e(Es&&Buffer.isBuffer(i)?i.toString("binary"):CI(i),s);case"array":return e(EB(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},l=o.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,h){Array.isArray(l)&&(l[h]=[]);for(var f=/\\\w+\b/g,m=0,x,g=-1;x=f.exec(d);){switch(x[0]){case"\\cell":var y=d.slice(m,f.lastIndex-x[0].length);if(y[0]==" "&&(y=y.slice(1)),++g,y.length){var w={v:y,t:"s"};Array.isArray(l)?l[h][g]=w:l[qs({r:h,c:g})]=w}break}m=f.lastIndex}g>u.e.c&&(u.e.c=g)}),l["!ref"]=_l(u),l}function r(i,s){return wN(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],o=La(i["!ref"]),l,c=Array.isArray(i),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var h=qs({r:u,c:d});l=c?(i[u]||[])[d]:i[h],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Ov(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function zue(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var w5t=6,hv=w5t;function kL(t){return Math.floor((t+Math.round(128/hv)/256)*hv)}function OL(t){return Math.floor((t-5)/hv*100+.5)/100}function PW(t){return Math.round((t*hv+5)/hv*256)/256}function yJ(t){t.width?(t.wpx=kL(t.width),t.wch=OL(t.wpx),t.MDW=hv):t.wpx?(t.wch=OL(t.wpx),t.width=PW(t.wch),t.MDW=hv):typeof t.wch=="number"&&(t.width=PW(t.wch),t.wpx=kL(t.width),t.MDW=hv),t.customWidth&&delete t.customWidth}var _5t=96,eAe=_5t;function IL(t){return t*96/eAe}function tAe(t){return t*eAe/96}function N5t(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Lr("numFmt",null,{numFmtId:n,formatCode:zs(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Lr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function S5t(t){var e=[];return e[e.length]=Lr("cellXfs",null),t.forEach(function(r){e[e.length]=Lr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Lr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function rAe(t,e){var r=[jl,Lr("styleSheet",null,{xmlns:v5[0],"xmlns:vt":hc.vt})],n;return t.SSF&&(n=N5t(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=S5t(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function E5t(t,e){var r=t.read_shift(2),n=Gu(t);return[r,n]}function j5t(t,e,r){r||(r=Yt(6+4*e.length)),r.write_shift(2,t),gc(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function A5t(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=mCt(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=fCt(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Gu(t),n}function C5t(t,e){e||(e=Yt(25+4*32)),e.write_shift(2,t.sz*20),pCt(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),TL(t.color,e);var n=0;return t.scheme=="major"&&(n=1),t.scheme=="minor"&&(n=2),e.write_shift(1,n),gc(t.name,e),e.length>e.l?e.slice(0,e.l):e}var T5t=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],yU,P5t=Mg;function Vue(t,e){e||(e=Yt(4*3+8*7+16*1)),yU||(yU=oJ(T5t));var r=yU[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(TL({auto:1},e),TL({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function k5t(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function nAe(t,e,r){r||(r=Yt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function mT(t,e){return e||(e=Yt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var O5t=Mg;function I5t(t,e){return e||(e=Yt(51)),e.write_shift(1,0),mT(null,e),mT(null,e),mT(null,e),mT(null,e),mT(null,e),e.length>e.l?e.slice(0,e.l):e}function R5t(t,e){return e||(e=Yt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),CL(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function D5t(t,e,r){var n=Yt(2052);return n.write_shift(4,t),CL(e,n),CL(r,n),n.length>n.l?n.slice(0,n.l):n}function M5t(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(xr(t,615,Zp(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&xr(t,44,j5t(i,e[i]))}),xr(t,616))}}function L5t(t){var e=1;xr(t,611,Zp(e)),xr(t,43,C5t({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),xr(t,612)}function F5t(t){var e=2;xr(t,603,Zp(e)),xr(t,45,Vue({patternType:"none"})),xr(t,45,Vue({patternType:"gray125"})),xr(t,604)}function B5t(t){var e=1;xr(t,613,Zp(e)),xr(t,46,I5t()),xr(t,614)}function $5t(t){var e=1;xr(t,626,Zp(e)),xr(t,47,nAe({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),xr(t,627)}function U5t(t,e){xr(t,617,Zp(e.length)),e.forEach(function(r){xr(t,47,nAe(r,0))}),xr(t,618)}function z5t(t){var e=1;xr(t,619,Zp(e)),xr(t,48,R5t({xfId:0,builtinId:0,name:"Normal"})),xr(t,620)}function V5t(t){var e=0;xr(t,505,Zp(e)),xr(t,506)}function q5t(t){var e=0;xr(t,508,D5t(e,"TableStyleMedium9","PivotStyleMedium4")),xr(t,509)}function H5t(t,e){var r=mh();return xr(r,278),M5t(r,t.SSF),L5t(r),F5t(r),B5t(r),$5t(r),U5t(r,e.cellXfs),z5t(r),V5t(r),q5t(r),xr(r,279),r.end()}function iAe(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[jl];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function W5t(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Gu(t)}}function G5t(t){var e=Yt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),gc(t.name,e),e.slice(0,e.l)}function K5t(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function X5t(t){var e=Yt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Y5t(t,e){var r=Yt(8+2*e.length);return r.write_shift(4,t),gc(e,r),r.slice(0,r.l)}function Z5t(t){return t.l+=4,t.read_shift(4)!=0}function Q5t(t,e){var r=Yt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function J5t(){var t=mh();return xr(t,332),xr(t,334,Zp(1)),xr(t,335,G5t({name:"XLDAPR",version:12e4,flags:3496657072})),xr(t,336),xr(t,339,Y5t(1,"XLDAPR")),xr(t,52),xr(t,35,Zp(514)),xr(t,4096,Zp(0)),xr(t,4097,dm(1)),xr(t,36),xr(t,53),xr(t,340),xr(t,337,Q5t(1)),xr(t,51,X5t([[1,0]])),xr(t,338),xr(t,333),t.end()}function sAe(){var t=[jl];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function eTt(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=qs(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var JS=1024;function aAe(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Lr("xml",null,{"xmlns:v":mf.v,"xmlns:o":mf.o,"xmlns:x":mf.x,"xmlns:mv":mf.mv}).replace(/\/>/,">"),Lr("o:shapelayout",Lr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Lr("v:shapetype",[Lr("v:stroke",null,{joinstyle:"miter"}),Lr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];JS<t*1e3;)JS+=1e3;return e.forEach(function(s){var o=pc(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Lr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Lr("v:fill",c,l),d={on:"t",obscured:"t"};++JS,i=i.concat(["<v:shape"+FP({id:"_x0000_s"+JS,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Lr("v:shadow",null,d),Lr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Qc("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Qc("x:AutoFill","False"),Qc("x:Row",String(o.r)),Qc("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function oAe(t){var e=[jl,Lr("comments",null,{xmlns:v5[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=zs(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(i=r.indexOf(zs(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Qc("t",zs(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(Qc("t",zs(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function tTt(t,e,r){var n=[jl,Lr("ThreadedComments",null,{xmlns:hc.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Lr("threadedComment",Qc("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function rTt(t){var e=[jl,Lr("personList",null,{xmlns:hc.TCMNT,"xmlns:x":v5[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Lr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function nTt(t){var e={};e.iauthor=t.read_shift(4);var r=EN(t);return e.rfx=r.s,e.ref=qs(r.s),t.l+=16,e}function iTt(t,e){return e==null&&(e=Yt(36)),e.write_shift(4,t[1].iauthor),b5(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var sTt=Gu;function aTt(t){return gc(t.slice(0,54))}function oTt(t){var e=mh(),r=[];return xr(e,628),xr(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),xr(e,632,aTt(i.a)))})}),xr(e,631),xr(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:pc(n[0]),e:pc(n[0])};xr(e,635,iTt([s,i])),i.t&&i.t.length>0&&xr(e,637,cCt(i)),xr(e,636),delete i.iauthor})}),xr(e,634),xr(e,629),e.end()}function lTt(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Js.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var lAe=["xlsb","xlsm","xlam","biff8","xla"],cTt=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,i+(l?"":"$")+Wu(d)+(c?"":"$")+iu(u)}return function(i,s){return e=s,i.replace(t,r)}}(),bJ=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,wJ=function(){return function(e,r){return e.replace(bJ,function(n,i,s,o,l,c){var u=mJ(o)-(s?0:r.c),d=fJ(c)-(l?0:r.r),h=d==0?"":l?d+1:"["+d+"]",f=u==0?"":s?u+1:"["+u+"]";return i+"R"+h+"C"+f})}}();function uTt(t,e){return t.replace(bJ,function(r,n,i,s,o,l){return n+(i=="$"?i+s:Wu(mJ(s)+e.c))+(o=="$"?o+l:iu(fJ(l)+e.r))})}function dTt(t){return t.length!=1}function ul(t){t.l+=1}function Tb(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function cAe(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return uAe(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),o=Tb(t),l=Tb(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function uAe(t){var e=Tb(t),r=Tb(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function hTt(t,e,r){if(r.biff<8)return uAe(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=Tb(t),o=Tb(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function dAe(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return fTt(t);var n=t.read_shift(r&&r.biff==12?4:2),i=Tb(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function fTt(t){var e=Tb(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function mTt(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function pTt(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return gTt(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:l}}function gTt(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function xTt(t,e,r){var n=(t[t.l++]&96)>>5,i=cAe(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function vTt(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=cAe(t,s,r);return[n,i,o]}function yTt(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function bTt(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function wTt(t,e,r){var n=(t[t.l++]&96)>>5,i=hTt(t,e-1,r);return[n,i]}function _Tt(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function que(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function NTt(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function STt(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ETt(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function jTt(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function ATt(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function hAe(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function CTt(t){return t.read_shift(2),hAe(t)}function TTt(t){return t.read_shift(2),hAe(t)}function PTt(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=dAe(t,0,r);return[n,i]}function kTt(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=pTt(t,0,r);return[n,i]}function OTt(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=dAe(t,0,r);return[n,i,s]}function ITt(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[I4t[i],pAe[i],n]}function RTt(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:DTt(t);return[i,(s[0]===0?pAe:O4t)[s[1]]]}function DTt(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function MTt(t,e,r){t.l+=r&&r.biff==2?3:4}function LTt(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function FTt(t){return t.l++,kI[t.read_shift(1)]}function BTt(t){return t.l++,t.read_shift(2)}function $Tt(t){return t.l++,t.read_shift(1)!==0}function UTt(t){return t.l++,w5(t)}function zTt(t,e,r){return t.l++,Kje(t,e-1,r)}function VTt(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=OCt(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=kI[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=w5(t);break;case 2:r[1]=MCt(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function qTt(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?EN:BCt)(t));return i}function HTt(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=i;++l)o[s][l]=VTt(t,r.biff);return o}function WTt(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function GTt(t,e,r){if(r.biff==5)return KTt(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function KTt(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function XTt(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function YTt(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function ZTt(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function QTt(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var JTt=Mg,e4t=Mg,t4t=Mg;function OI(t,e,r){return t.l+=2,[mTt(t)]}function _J(t){return t.l+=6,[]}var r4t=OI,n4t=_J,i4t=_J,s4t=OI;function fAe(t){return t.l+=2,[Wje(t),t.read_shift(2)&1]}var a4t=OI,o4t=fAe,l4t=_J,c4t=OI,u4t=OI,d4t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function h4t(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=d4t[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:i,C:s}}function f4t(t){return t.l+=2,[t.read_shift(4)]}function m4t(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function p4t(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function g4t(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function x4t(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function v4t(t){return t.l+=4,[0,0]}var Hue={1:{n:"PtgExp",f:LTt},2:{n:"PtgTbl",f:t4t},3:{n:"PtgAdd",f:ul},4:{n:"PtgSub",f:ul},5:{n:"PtgMul",f:ul},6:{n:"PtgDiv",f:ul},7:{n:"PtgPower",f:ul},8:{n:"PtgConcat",f:ul},9:{n:"PtgLt",f:ul},10:{n:"PtgLe",f:ul},11:{n:"PtgEq",f:ul},12:{n:"PtgGe",f:ul},13:{n:"PtgGt",f:ul},14:{n:"PtgNe",f:ul},15:{n:"PtgIsect",f:ul},16:{n:"PtgUnion",f:ul},17:{n:"PtgRange",f:ul},18:{n:"PtgUplus",f:ul},19:{n:"PtgUminus",f:ul},20:{n:"PtgPercent",f:ul},21:{n:"PtgParen",f:ul},22:{n:"PtgMissArg",f:ul},23:{n:"PtgStr",f:zTt},26:{n:"PtgSheet",f:m4t},27:{n:"PtgEndSheet",f:p4t},28:{n:"PtgErr",f:FTt},29:{n:"PtgBool",f:$Tt},30:{n:"PtgInt",f:BTt},31:{n:"PtgNum",f:UTt},32:{n:"PtgArray",f:_Tt},33:{n:"PtgFunc",f:ITt},34:{n:"PtgFuncVar",f:RTt},35:{n:"PtgName",f:WTt},36:{n:"PtgRef",f:PTt},37:{n:"PtgArea",f:xTt},38:{n:"PtgMemArea",f:XTt},39:{n:"PtgMemErr",f:JTt},40:{n:"PtgMemNoMem",f:e4t},41:{n:"PtgMemFunc",f:YTt},42:{n:"PtgRefErr",f:ZTt},43:{n:"PtgAreaErr",f:yTt},44:{n:"PtgRefN",f:kTt},45:{n:"PtgAreaN",f:wTt},46:{n:"PtgMemAreaN",f:g4t},47:{n:"PtgMemNoMemN",f:x4t},57:{n:"PtgNameX",f:GTt},58:{n:"PtgRef3d",f:OTt},59:{n:"PtgArea3d",f:vTt},60:{n:"PtgRefErr3d",f:QTt},61:{n:"PtgAreaErr3d",f:bTt},255:{}},y4t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},b4t={1:{n:"PtgElfLel",f:fAe},2:{n:"PtgElfRw",f:c4t},3:{n:"PtgElfCol",f:r4t},6:{n:"PtgElfRwV",f:u4t},7:{n:"PtgElfColV",f:s4t},10:{n:"PtgElfRadical",f:a4t},11:{n:"PtgElfRadicalS",f:l4t},13:{n:"PtgElfColS",f:n4t},15:{n:"PtgElfColSV",f:i4t},16:{n:"PtgElfRadicalLel",f:o4t},25:{n:"PtgList",f:h4t},29:{n:"PtgSxName",f:f4t},255:{}},w4t={0:{n:"PtgAttrNoop",f:v4t},1:{n:"PtgAttrSemi",f:ATt},2:{n:"PtgAttrIf",f:ETt},4:{n:"PtgAttrChoose",f:NTt},8:{n:"PtgAttrGoto",f:STt},16:{n:"PtgAttrSum",f:MTt},32:{n:"PtgAttrBaxcel",f:que},33:{n:"PtgAttrBaxcel",f:que},64:{n:"PtgAttrSpace",f:CTt},65:{n:"PtgAttrSpaceSemi",f:TTt},128:{n:"PtgAttrIfError",f:jTt},255:{}};function _4t(t,e,r,n){if(n.biff<8)return Mg(t,e);for(var i=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=HTt(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=qTt(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=i-t.l,e!==0&&s.push(Mg(t,e)),s}function N4t(t,e,r){for(var n=t.l+e,i,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],i=Hue[s]||Hue[y4t[s]],(s===24||s===25)&&(i=(s===24?b4t:w4t)[t[t.l+1]]),!i||!i.f?Mg(t,e):o.push([i.n,i.f(t,e,r)]);return o}function S4t(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var E4t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function j4t(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function mAe(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Wue(t,e,r){var n=mAe(t,e,r);return n=="#REF"?n:j4t(n,r)}function wC(t,e,r,n,i){var s=i&&i.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,u,d,h=0,f=0,m,x="";if(!t[0]||!t[0][0])return"";for(var g=-1,y="",w=0,S=t[0].length;w<S;++w){var E=t[0][w];switch(E[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),g>=0){switch(t[0][g][1][0]){case 0:y=$o(" ",t[0][g][1][1]);break;case 1:y=$o("\r",t[0][g][1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}u=u+y,g=-1}l.push(u+E4t[E[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=$4(E[1][1],o,i),l.push(U4(d,s));break;case"PtgRefN":d=r?$4(E[1][1],r,i):E[1][1],l.push(U4(d,s));break;case"PtgRef3d":h=E[1][1],d=$4(E[1][2],o,i),x=Wue(n,h,i),l.push(x+"!"+U4(d,s));break;case"PtgFunc":case"PtgFuncVar":var j=E[1][0],T=E[1][1];j||(j=0),j&=127;var O=j==0?[]:l.slice(-j);l.length-=j,T==="User"&&(T=O.shift()),l.push(T+"("+O.join(",")+")");break;case"PtgBool":l.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(E[1]);break;case"PtgNum":l.push(String(E[1]));break;case"PtgStr":l.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(E[1]);break;case"PtgAreaN":m=Pue(E[1][1],r?{s:r}:o,i),l.push(xU(m,i));break;case"PtgArea":m=Pue(E[1][1],o,i),l.push(xU(m,i));break;case"PtgArea3d":h=E[1][1],m=E[1][2],x=Wue(n,h,i),l.push(x+"!"+xU(m,i));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=E[1][2];var I=(n.names||[])[f-1]||(n[0]||[])[f],M=I?I.Name:"SH33TJSNAME"+String(f);M&&M.slice(0,6)=="_xlfn."&&!i.xlfn&&(M=M.slice(6)),l.push(M);break;case"PtgNameX":var D=E[1][1];f=E[1][2];var z;if(i.biff<=5)D<0&&(D=-D),n[D]&&(z=n[D][f]);else{var F="";if(((n[D]||[])[0]||[])[0]==14849||(((n[D]||[])[0]||[])[0]==1025?n[D][f]&&n[D][f].itab>0&&(F=n.SheetNames[n[D][f].itab-1]+"!"):F=n.SheetNames[f-1]+"!"),n[D]&&n[D][f])F+=n[D][f].Name;else if(n[0]&&n[0][f])F+=n[0][f].Name;else{var q=(mAe(n,D,i)||"").split(";;");q[f-1]?F=q[f-1]:F+="SH33TJSERRX"}l.push(F);break}z||(z={Name:"SH33TJSERRY"}),l.push(z.Name);break;case"PtgParen":var Q="(",re=")";if(g>=0){switch(y="",t[0][g][1][0]){case 2:Q=$o(" ",t[0][g][1][1])+Q;break;case 3:Q=$o("\r",t[0][g][1][1])+Q;break;case 4:re=$o(" ",t[0][g][1][1])+re;break;case 5:re=$o("\r",t[0][g][1][1])+re;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}l.push(Q+l.pop()+re);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:E[1][1],r:E[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[qs(d)]){var se=n.sharedf[qs(d)];l.push(wC(se,o,Z,n,i))}else{var K=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(wC(u[1],o,Z,n,i)),K=!0;break}K||l.push(E[1])}break;case"PtgArray":l.push("{"+S4t(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&g>=0&&X.indexOf(t[0][w][0])==-1){E=t[0][g];var Y=!0;switch(E[1][0]){case 4:Y=!1;case 0:y=$o(" ",E[1][1]);break;case 5:Y=!1;case 1:y=$o("\r",E[1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}l.push((Y?y:"")+l.pop()+(Y?"":y)),g=-1}}if(l.length>1&&i.WTF)throw new Error("bad formula stack");return l[0]}function A4t(t){if(t==null){var e=Yt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return J_(t);return J_(0)}function C4t(t,e,r,n,i){var s=eN(e,r,i),o=A4t(t.v),l=Yt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Yt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Zc([s,o,l,u]);return h}function jB(t,e,r){var n=t.read_shift(4),i=N4t(t,n,r),s=t.read_shift(4),o=s>0?_4t(t,s,i,r):null;return[i,o]}var T4t=jB,AB=jB,P4t=jB,k4t=jB,O4t={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},pAe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},I4t={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function R4t(t){var e="of:="+t.replace(bJ,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function D4t(t){return t.replace(/\./,"!")}var z4=typeof Map<"u";function NJ(t,e,r){var n=0,i=t.length;if(r){if(z4?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=z4?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(z4?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function CB(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(hv=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=OL(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=PW(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function gAe(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Jb(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){dje(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function M4t(t,e,r){if(t&&t["!ref"]){var n=La(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function L4t(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+_l(t[r])+'"/>';return e+"</mergeCells>"}function F4t(t,e,r,n,i){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=LP(zs(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+Lr("outlinePr",null,u)}!s&&!l||(i[i.length]=Lr("sheetPr",l,o))}var B4t=["objects","scenarios","selectLockedCells","selectUnlockedCells"],$4t=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function U4t(t){var e={sheet:1};return B4t.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),$4t.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=Jje(t.password).toString(16).toUpperCase()),Lr("sheetProtection",null,e)}function z4t(t){return gAe(t),Lr("pageMargins",null,t)}function V4t(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Lr("col",null,CB(i,n)));return r[r.length]="</cols>",r.join("")}function q4t(t,e,r,n){var i=typeof t.ref=="string"?t.ref:_l(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Rf(i);o.s.r==o.e.r&&(o.e.r=Rf(e["!ref"]).e.r,i=_l(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Lr("autoFilter",null,{ref:i})}function H4t(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Lr("sheetViews",Lr("sheetView",null,i),{})}function W4t(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=kI[t.v];break;case"d":n&&n.cellDates?i=Td(t.v,-1).toISOString():(t=gh(t),t.t="n",i=""+(t.v=ph(Td(t.v)))),typeof t.z>"u"&&(t.z=zo[14]);break;default:i=t.v;break}var l=Qc("v",zs(i)),c={r:e},u=Jb(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Qc("v",""+NJ(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=Lr("f",zs(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),Lr("c",l,c)}function G4t(t,e,r,n){var i=[],s=[],o=La(t["!ref"]),l="",c,u="",d=[],h=0,f=0,m=t["!rows"],x=Array.isArray(t),g={r:u},y,w=-1;for(f=o.s.c;f<=o.e.c;++f)d[f]=Wu(f);for(h=o.s.r;h<=o.e.r;++h){for(s=[],u=iu(h),f=o.s.c;f<=o.e.c;++f){c=d[f]+u;var S=x?(t[h]||[])[f]:t[c];S!==void 0&&(l=W4t(S,c,t,e))!=null&&s.push(l)}(s.length>0||m&&m[h])&&(g={r:u},m&&m[h]&&(y=m[h],y.hidden&&(g.hidden=1),w=-1,y.hpx?w=IL(y.hpx):y.hpt&&(w=y.hpt),w>-1&&(g.ht=w,g.customHeight=1),y.level&&(g.outlineLevel=y.level)),i[i.length]=Lr("row",s.join(""),g))}if(m)for(;h<m.length;++h)m&&m[h]&&(g={r:h+1},y=m[h],y.hidden&&(g.hidden=1),w=-1,y.hpx?w=IL(y.hpx):y.hpt&&(w=y.hpt),w>-1&&(g.ht=w,g.customHeight=1),y.level&&(g.outlineLevel=y.level),i[i.length]=Lr("row","",g));return i.join("")}function xAe(t,e,r,n){var i=[jl,Lr("worksheet",null,{xmlns:v5[0],"xmlns:r":hc.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=La(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=_l(d)}n||(n={}),c["!comments"]=[];var h=[];F4t(c,r,t,e,i),i[i.length]=Lr("dimension",null,{ref:u}),i[i.length]=H4t(c,e,t,r),e.sheetFormat&&(i[i.length]=Lr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=V4t(c,c["!cols"])),i[o=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=G4t(c,e),l.length>0&&(i[i.length]=l)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),c["!protect"]&&(i[i.length]=U4t(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=q4t(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=L4t(c["!merges"]));var f=-1,m,x=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(m={ref:g[0]},g[1].Target.charAt(0)!="#"&&(x=$s(n,-1,zs(g[1].Target).replace(/#.*$/,""),us.HLINK),m["r:id"]="rId"+x),(f=g[1].Target.indexOf("#"))>-1&&(m.location=zs(g[1].Target.slice(f+1))),g[1].Tooltip&&(m.tooltip=zs(g[1].Tooltip)),i[i.length]=Lr("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=z4t(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Qc("ignoredErrors",Lr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(x=$s(n,-1,"../drawings/drawing"+(t+1)+".xml",us.DRAW),i[i.length]=Lr("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=h),c["!comments"].length>0&&(x=$s(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",us.VML),i[i.length]=Lr("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function K4t(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function X4t(t,e,r){var n=Yt(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=IL(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,f=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[qs(u)];x&&(h<0&&(h=m),f=m)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,f))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function Y4t(t,e,r,n){var i=X4t(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&xr(t,0,i)}var Z4t=EN,Q4t=b5;function J4t(){}function e3t(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=uCt(t),r}function t3t(t,e,r){r==null&&(r=Yt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return TL({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Oje(t,r),r.slice(0,r.l)}function r3t(t){var e=Vm(t);return[e]}function n3t(t,e,r){return r==null&&(r=Yt(8)),_N(e,r)}function i3t(t){var e=NN(t);return[e]}function s3t(t,e,r){return r==null&&(r=Yt(4)),SN(e,r)}function a3t(t){var e=Vm(t),r=t.read_shift(1);return[e,r,"b"]}function o3t(t,e,r){return r==null&&(r=Yt(9)),_N(e,r),r.write_shift(1,t.v?1:0),r}function l3t(t){var e=NN(t),r=t.read_shift(1);return[e,r,"b"]}function c3t(t,e,r){return r==null&&(r=Yt(5)),SN(e,r),r.write_shift(1,t.v?1:0),r}function u3t(t){var e=Vm(t),r=t.read_shift(1);return[e,r,"e"]}function d3t(t,e,r){return r==null&&(r=Yt(9)),_N(e,r),r.write_shift(1,t.v),r}function h3t(t){var e=NN(t),r=t.read_shift(1);return[e,r,"e"]}function f3t(t,e,r){return r==null&&(r=Yt(8)),SN(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function m3t(t){var e=Vm(t),r=t.read_shift(4);return[e,r,"s"]}function p3t(t,e,r){return r==null&&(r=Yt(12)),_N(e,r),r.write_shift(4,e.v),r}function g3t(t){var e=NN(t),r=t.read_shift(4);return[e,r,"s"]}function x3t(t,e,r){return r==null&&(r=Yt(8)),SN(e,r),r.write_shift(4,e.v),r}function v3t(t){var e=Vm(t),r=w5(t);return[e,r,"n"]}function y3t(t,e,r){return r==null&&(r=Yt(16)),_N(e,r),J_(t.v,r),r}function b3t(t){var e=NN(t),r=w5(t);return[e,r,"n"]}function w3t(t,e,r){return r==null&&(r=Yt(12)),SN(e,r),J_(t.v,r),r}function _3t(t){var e=Vm(t),r=Ije(t);return[e,r,"n"]}function N3t(t,e,r){return r==null&&(r=Yt(12)),_N(e,r),Rje(t.v,r),r}function S3t(t){var e=NN(t),r=Ije(t);return[e,r,"n"]}function E3t(t,e,r){return r==null&&(r=Yt(8)),SN(e,r),Rje(t.v,r),r}function j3t(t){var e=Vm(t),r=pJ(t);return[e,r,"is"]}function A3t(t){var e=Vm(t),r=Gu(t);return[e,r,"str"]}function C3t(t,e,r){return r==null&&(r=Yt(12+4*t.v.length)),_N(e,r),gc(t.v,r),r.length>r.l?r.slice(0,r.l):r}function T3t(t){var e=NN(t),r=Gu(t);return[e,r,"str"]}function P3t(t,e,r){return r==null&&(r=Yt(8+4*t.v.length)),SN(e,r),gc(t.v,r),r.length>r.l?r.slice(0,r.l):r}function k3t(t,e,r){var n=t.l+e,i=Vm(t);i.r=r["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(r.cellFormula){t.l+=2;var l=AB(t,n-t.l,r);o[3]=wC(l,null,i,r.supbooks,r)}else t.l=n;return o}function O3t(t,e,r){var n=t.l+e,i=Vm(t);i.r=r["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(r.cellFormula){t.l+=2;var l=AB(t,n-t.l,r);o[3]=wC(l,null,i,r.supbooks,r)}else t.l=n;return o}function I3t(t,e,r){var n=t.l+e,i=Vm(t);i.r=r["!row"];var s=w5(t),o=[i,s,"n"];if(r.cellFormula){t.l+=2;var l=AB(t,n-t.l,r);o[3]=wC(l,null,i,r.supbooks,r)}else t.l=n;return o}function R3t(t,e,r){var n=t.l+e,i=Vm(t);i.r=r["!row"];var s=Gu(t),o=[i,s,"str"];if(r.cellFormula){t.l+=2;var l=AB(t,n-t.l,r);o[3]=wC(l,null,i,r.supbooks,r)}else t.l=n;return o}var D3t=EN,M3t=b5;function L3t(t,e){return e==null&&(e=Yt(4)),e.write_shift(4,t),e}function F3t(t,e){var r=t.l+e,n=EN(t),i=gJ(t),s=Gu(t),o=Gu(t),l=Gu(t);t.l=r;var c={rfx:n,relId:i,loc:s,display:l};return o&&(c.Tooltip=o),c}function B3t(t,e){var r=Yt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));b5({s:pc(t[0]),e:pc(t[0])},r),xJ("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return gc(i||"",r),gc(t[1].Tooltip||"",r),gc("",r),r.slice(0,r.l)}function $3t(){}function U3t(t,e,r){var n=t.l+e,i=Dje(t),s=t.read_shift(1),o=[i];if(o[2]=s,r.cellFormula){var l=T4t(t,n-t.l,r);o[1]=l}else t.l=n;return o}function z3t(t,e,r){var n=t.l+e,i=EN(t),s=[i];if(r.cellFormula){var o=k4t(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function V3t(t,e,r){r==null&&(r=Yt(18));var n=CB(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var vAe=["left","right","top","bottom","header","footer"];function q3t(t){var e={};return vAe.forEach(function(r){e[r]=w5(t)}),e}function H3t(t,e){return e==null&&(e=Yt(6*8)),gAe(t),vAe.forEach(function(r){J_(t[r],e)}),e}function W3t(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function G3t(t,e,r){r==null&&(r=Yt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function K3t(t){var e=Yt(24);return e.write_shift(4,4),e.write_shift(4,1),b5(t,e),e}function X3t(t,e){return e==null&&(e=Yt(16*4+2)),e.write_shift(2,t.password?Jje(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function Y3t(){}function Z3t(){}function Q3t(t,e,r,n,i,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=gh(e),e.z=e.z||zo[14],e.v=ph(Td(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Jb(i.cellXfs,e,i),e.l&&s["!links"].push([qs(c),e.l]),e.c&&s["!comments"].push([qs(c),e.c]),e.t){case"s":case"str":return i.bookSST?(l=NJ(i.Strings,e.v,i.revStrings),c.t="s",c.v=l,o?xr(t,18,x3t(e,c)):xr(t,7,p3t(e,c))):(c.t="str",o?xr(t,17,P3t(e,c)):xr(t,6,C3t(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?xr(t,13,E3t(e,c)):xr(t,2,N3t(e,c)):o?xr(t,16,w3t(e,c)):xr(t,5,y3t(e,c)),!0;case"b":return c.t="b",o?xr(t,15,c3t(e,c)):xr(t,4,o3t(e,c)),!0;case"e":return c.t="e",o?xr(t,14,f3t(e,c)):xr(t,3,d3t(e,c)),!0}return o?xr(t,12,s3t(e,c)):xr(t,1,n3t(e,c)),!0}function J3t(t,e,r,n){var i=La(e["!ref"]||"A1"),s,o="",l=[];xr(t,145);var c=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var d=i.s.r;d<=u;++d){o=iu(d),Y4t(t,e,i,d);var h=!1;if(d<=i.e.r)for(var f=i.s.c;f<=i.e.c;++f){d===i.s.r&&(l[f]=Wu(f)),s=l[f]+o;var m=c?(e[d]||[])[f]:e[s];if(!m){h=!1;continue}h=Q3t(t,m,d,f,n,e,h)}}xr(t,146)}function ePt(t,e){!e||!e["!merges"]||(xr(t,177,L3t(e["!merges"].length)),e["!merges"].forEach(function(r){xr(t,176,M3t(r))}),xr(t,178))}function tPt(t,e){!e||!e["!cols"]||(xr(t,390),e["!cols"].forEach(function(r,n){r&&xr(t,60,V3t(n,r))}),xr(t,391))}function rPt(t,e){!e||!e["!ref"]||(xr(t,648),xr(t,649,K3t(La(e["!ref"]))),xr(t,650))}function nPt(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=$s(r,-1,n[1].Target.replace(/#.*$/,""),us.HLINK);xr(t,494,B3t(n,i))}}),delete e["!links"]}function iPt(t,e,r,n){if(e["!comments"].length>0){var i=$s(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",us.VML);xr(t,551,xJ("rId"+i)),e["!legacy"]=i}}function sPt(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:_l(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Rf(s);l.s.r==l.e.r&&(l.e.r=Rf(e["!ref"]).e.r,s=_l(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),xr(t,161,b5(La(s))),xr(t,162)}}function aPt(t,e,r){xr(t,133),xr(t,137,G3t(e,r)),xr(t,138),xr(t,134)}function oPt(t,e){e["!protect"]&&xr(t,535,X3t(e["!protect"]))}function lPt(t,e,r,n){var i=mh(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=La(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],xr(i,129),(r.vbaraw||o["!outline"])&&xr(i,147,t3t(l,o["!outline"])),xr(i,148,Q4t(c)),aPt(i,o,r.Workbook),tPt(i,o),J3t(i,o,t,e),oPt(i,o),sPt(i,o,r,t),ePt(i,o),nPt(i,o,n),o["!margins"]&&xr(i,476,H3t(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&rPt(i,o),iPt(i,o,t,n),xr(i,130),i.end()}function cPt(t,e){t.l+=10;var r=Gu(t);return{name:r}}var uPt=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function dPt(t){return!t.Workbook||!t.Workbook.WBProps?"false":zAt(t.Workbook.WBProps.date1904)?"true":"false"}var hPt="][*?/\\".split("");function yAe(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return hPt.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function fPt(t,e,r){t.forEach(function(n,i){yAe(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[i]&&e[i].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function mPt(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];fPt(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)M4t(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function bAe(t){var e=[jl];e[e.length]=Lr("workbook",null,{xmlns:v5[0],"xmlns:r":hc.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(uPt.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Lr("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:zs(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Lr("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=Lr("definedName",zs(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function pPt(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=TW(t),r.name=Gu(t),r}function gPt(t,e){return e||(e=Yt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),xJ(t.strRelID,e),gc(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function xPt(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?Gu(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function vPt(t,e){e||(e=Yt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Oje(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function yPt(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=dCt(t),o=P4t(t,0,r),l=gJ(t);t.l=n;var c={Name:s,Ptg:o};return i<268435455&&(c.Sheet=i),l&&(c.Comment=l),c}function bPt(t,e){xr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};xr(t,156,gPt(i))}xr(t,144)}function wPt(t,e){e||(e=Yt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return gc("SheetJS",e),gc(_L.version,e),gc(_L.version,e),gc("7262",e),e.length>e.l?e.slice(0,e.l):e}function _Pt(t,e){e||(e=Yt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function NPt(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(xr(t,135),xr(t,158,_Pt(i)),xr(t,136))}}function SPt(t,e){var r=mh();return xr(r,131),xr(r,128,wPt()),xr(r,153,vPt(t.Workbook&&t.Workbook.WBProps||null)),NPt(r,t),bPt(r,t),xr(r,132),r.end()}function EPt(t,e,r){return(e.slice(-4)===".bin"?SPt:bAe)(t)}function jPt(t,e,r,n,i){return(e.slice(-4)===".bin"?lPt:xAe)(t,r,n,i)}function APt(t,e,r){return(e.slice(-4)===".bin"?H5t:rAe)(t,r)}function CPt(t,e,r){return(e.slice(-4)===".bin"?v5t:Qje)(t,r)}function TPt(t,e,r){return(e.slice(-4)===".bin"?oTt:oAe)(t)}function PPt(t){return(t.slice(-4)===".bin"?J5t:sAe)()}function kPt(t,e){var r=[];return t.Props&&r.push(ACt(t.Props,e)),t.Custprops&&r.push(CCt(t.Props,t.Custprops)),r.join("")}function OPt(){return""}function IPt(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Lr("NumberFormat",null,{"ss:Format":zs(zo[n.numFmtId])}));var o={"ss:ID":"s"+(21+i)};r.push(Lr("Style",s.join(""),o))}),Lr("Styles",r.join(""))}function wAe(t){return Lr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+wJ(t.Ref,{r:0,c:0})})}function RPt(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(wAe(i)))}return Lr("Names",r.join(""))}function DPt(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],o=0;o<i.length;++o){var l=i[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(wAe(l)))}return s.join("")}function MPt(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Lr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Lr("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Lr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Lr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Qc("ProtectContents","True")),t["!protect"].objects&&i.push(Qc("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Qc("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Qc("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Qc("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":Lr("WorksheetOptions",i.join(""),{xmlns:mf.x})}function LPt(t){return t.map(function(e){var r=UAt(e.t||""),n=Lr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Lr("Comment",n,{"ss:Author":e.a})}).join("")}function FPt(t,e,r,n,i,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+zs(wJ(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=pc(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=zs(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=zs(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",f="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",f=String(t.v);break;case"b":h="Boolean",f=t.v?"1":"0";break;case"e":h="Error",f=kI[t.v];break;case"d":h="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||zo[14]);break;case"s":h="String",f=$At(t.v||"");break}var m=Jb(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var x=t.v!=null?f:"",g=t.t=="z"?"":'<Data ss:Type="'+h+'">'+x+"</Data>";return(t.c||[]).length>0&&(g+=LPt(t.c)),Lr("Cell",g,l)}function BPt(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=tAe(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function $Pt(t,e,r,n){if(!t["!ref"])return"";var i=La(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(y,w){yJ(y);var S=!!y.width,E=CB(w,y),j={"ss:Index":w+1};S&&(j["ss:Width"]=kL(E.width)),y.hidden&&(j["ss:Hidden"]="1"),l.push(Lr("Column",null,j))});for(var c=Array.isArray(t),u=i.s.r;u<=i.e.r;++u){for(var d=[BPt(u,(t["!rows"]||[])[u])],h=i.s.c;h<=i.e.c;++h){var f=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>u)&&!(s[o].e.c<h)&&!(s[o].e.r<u)){(s[o].s.c!=h||s[o].s.r!=u)&&(f=!0);break}if(!f){var m={r:u,c:h},x=qs(m),g=c?(t[u]||[])[h]:t[x];d.push(FPt(g,x,t,e,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function UPt(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],o=s?DPt(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?$Pt(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(MPt(s,e,t,r)),n.join("")}function zPt(t,e){e||(e={}),t.SSF||(t.SSF=gh(zo)),t.SSF&&(NB(),_B(t.SSF),e.revssf=SB(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Jb(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(kPt(t,e)),r.push(OPt()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Lr("Worksheet",UPt(n,e,t),{"ss:Name":zs(t.SheetNames[n])}));return r[2]=IPt(t,e),r[3]=RPt(t),jl+Lr("Workbook",r.join(""),{xmlns:mf.ss,"xmlns:o":mf.o,"xmlns:x":mf.x,"xmlns:ss":mf.ss,"xmlns:dt":mf.dt,"xmlns:html":mf.html})}var bU={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function VPt(t,e){var r=[],n=[],i=[],s=0,o,l=yue(Oue,"n"),c=yue(Iue,"n");if(t.Props)for(o=lu(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=lu(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:i).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<i.length;++s)Hje.indexOf(i[s][0])>-1||zje.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);n.length&&Js.utils.cfb_add(e,"/SummaryInformation",Fue(n,bU.SI,c,Iue)),(r.length||u.length)&&Js.utils.cfb_add(e,"/DocumentSummaryInformation",Fue(r,bU.DSI,l,Oue,u.length?u:null,bU.UDI))}function qPt(t,e){var r=e||{},n=Js.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Js.utils.cfb_add(n,i,_Ae(t,r)),r.biff==8&&(t.Props||t.Custprops)&&VPt(t,n),r.biff==8&&t.vbaraw&&lTt(n,Js.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var HPt={0:{f:K4t},1:{f:r3t},2:{f:_3t},3:{f:u3t},4:{f:a3t},5:{f:v3t},6:{f:A3t},7:{f:m3t},8:{f:R3t},9:{f:I3t},10:{f:k3t},11:{f:O3t},12:{f:i3t},13:{f:S3t},14:{f:h3t},15:{f:l3t},16:{f:b3t},17:{f:T3t},18:{f:g3t},19:{f:pJ},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:yPt},40:{},42:{},43:{f:A5t},44:{f:E5t},45:{f:P5t},46:{f:O5t},47:{f:k5t},48:{},49:{f:iCt},50:{},51:{f:K5t},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:s5t},62:{f:j3t},63:{f:eTt},64:{f:Y3t},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Mg,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:W3t},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:e3t},148:{f:Z4t,p:16},151:{f:$3t},152:{},153:{f:xPt},154:{},155:{},156:{f:pPt},157:{},158:{},159:{T:1,f:p5t},160:{T:-1},161:{T:1,f:EN},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:D3t},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:W5t},336:{T:-1},337:{f:Z5t,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:TW},357:{},358:{},359:{},360:{T:1},361:{},362:{f:JCt},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:U3t},427:{f:z3t},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:q3t},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:J4t},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:F3t},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:TW},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:sTt},633:{T:1},634:{T:-1},635:{T:1,f:nTt},636:{T:-1},637:{f:lCt},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:cPt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Z3t},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Br(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&hJ(r)&&t.push(r)}}function WPt(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return Br(t,e,r,i);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<i;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function II(t,e,r){return t||(t=Yt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function GPt(t,e,r,n){var i=Yt(9);return II(i,t,e),Gje(r,n||"b",i),i}function KPt(t,e,r){var n=Yt(8+2*r.length);return II(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function XPt(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?ph(Td(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Br(t,2,c5t(r,n,i)):Br(t,3,l5t(r,n,i));return;case"b":case"e":Br(t,5,GPt(r,n,e.v,e.t));return;case"s":case"str":Br(t,4,KPt(r,n,(e.v||"").slice(0,255)));return}Br(t,1,II(null,r,n))}function YPt(t,e,r,n){var i=Array.isArray(e),s=La(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=_l(s)}for(var u=s.s.r;u<=s.e.r;++u){l=iu(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Wu(d)),o=c[d]+l;var h=i?(e[u]||[])[d]:e[o];h&&XPt(t,h,u,d)}}}function ZPt(t,e){for(var r=e||{},n=mh(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Br(n,r.biff==4?1033:r.biff==3?521:9,vJ(t,16,r)),YPt(n,t.Sheets[t.SheetNames[i]],i,r),Br(n,10),n.end()}function QPt(t,e,r){Br(t,49,HCt({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function JPt(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Br(t,1054,KCt(i,e[i],r))})}function ekt(t,e){var r=Yt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Br(t,2151,r),r=Yt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Yje(La(e["!ref"]||"A1"),r),r.write_shift(4,4),Br(t,2152,r)}function tkt(t,e){for(var r=0;r<16;++r)Br(t,224,$ue({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Br(t,224,$ue(n,0,e))})}function rkt(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Br(t,440,r5t(n)),n[1].Tooltip&&Br(t,2048,n5t(n))}delete e["!links"]}function nkt(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Br(t,125,a5t(CB(i,n),i))})}}function ikt(t,e,r,n,i){var s=16+Jb(i.cellXfs,e,i);if(e.v==null&&!e.bf){Br(t,513,eN(r,n,s));return}if(e.bf)Br(t,6,C4t(e,r,n,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?ph(Td(e.v)):e.v;Br(t,515,QCt(r,n,o,s));break;case"b":case"e":Br(t,517,ZCt(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var l=NJ(i.Strings,e.v,i.revStrings);Br(t,253,WCt(r,n,l,s))}else Br(t,516,GCt(r,n,(e.v||"").slice(0,255),s,i));break;default:Br(t,513,eN(r,n,s))}}function skt(t,e,r){var n=mh(),i=r.SheetNames[t],s=r.Sheets[i]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,h="",f=[],m=La(s["!ref"]||"A1"),x=u?65536:16384;if(m.e.c>255||m.e.r>=x){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}Br(n,2057,vJ(r,16,e)),Br(n,13,dm(1)),Br(n,12,dm(100)),Br(n,15,xd(!0)),Br(n,17,xd(!1)),Br(n,16,J_(.001)),Br(n,95,xd(!0)),Br(n,42,xd(!1)),Br(n,43,xd(!1)),Br(n,130,dm(1)),Br(n,128,YCt()),Br(n,131,xd(!1)),Br(n,132,xd(!1)),u&&nkt(n,s["!cols"]),Br(n,512,XCt(m,e)),u&&(s["!links"]=[]);for(var g=m.s.r;g<=m.e.r;++g){h=iu(g);for(var y=m.s.c;y<=m.e.c;++y){g===m.s.r&&(f[y]=Wu(y)),d=f[y]+h;var w=c?(s[g]||[])[y]:s[d];w&&(ikt(n,w,g,y,e),u&&w.l&&s["!links"].push([d,w.l]))}}var S=l.CodeName||l.name||i;return u&&Br(n,574,qCt((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Br(n,229,t5t(s["!merges"])),u&&rkt(n,s),Br(n,442,Xje(S)),u&&ekt(n,s),Br(n,10),n.end()}function akt(t,e,r){var n=mh(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},l=r.biff==8,c=r.biff==5;if(Br(n,2057,vJ(t,5,r)),r.bookType=="xla"&&Br(n,135),Br(n,225,l?dm(1200):null),Br(n,193,kCt(2)),c&&Br(n,191),c&&Br(n,192),Br(n,226),Br(n,92,$Ct("SheetJS",r)),Br(n,66,dm(l?1200:1252)),l&&Br(n,353,dm(0)),l&&Br(n,448),Br(n,317,o5t(t.SheetNames.length)),l&&t.vbaraw&&Br(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";Br(n,442,Xje(u))}Br(n,156,dm(17)),Br(n,25,xd(!1)),Br(n,18,xd(!1)),Br(n,19,dm(0)),l&&Br(n,431,xd(!1)),l&&Br(n,444,dm(0)),Br(n,61,VCt()),Br(n,64,xd(!1)),Br(n,141,dm(0)),Br(n,34,xd(dPt(t)=="true")),Br(n,14,xd(!0)),l&&Br(n,439,xd(!1)),Br(n,218,dm(0)),QPt(n,t,r),JPt(n,t.SSF,r),tkt(n,r),l&&Br(n,352,xd(!1));var d=n.end(),h=mh();l&&Br(h,140,i5t()),l&&r.Strings&&WPt(h,252,zCt(r.Strings)),Br(h,10);var f=h.end(),m=mh(),x=0,g=0;for(g=0;g<t.SheetNames.length;++g)x+=(l?12:11)+(l?2:1)*t.SheetNames[g].length;var y=d.length+x+f.length;for(g=0;g<t.SheetNames.length;++g){var w=s[g]||{};Br(m,133,UCt({pos:y,hs:w.Hidden||0,dt:0,name:t.SheetNames[g]},r)),y+=e[g].length}var S=m.end();if(x!=S.length)throw new Error("BS8 "+x+" != "+S.length);var E=[];return d.length&&E.push(d),S.length&&E.push(S),f.length&&E.push(f),Zc(E)}function okt(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=gh(zo)),t&&t.SSF&&(NB(),_B(t.SSF),r.revssf=SB(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,SJ(r),r.cellXfs=[],Jb(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=skt(i,r,t);return n.unshift(akt(t,n,r)),Zc(n)}function _Ae(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Rf(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return okt(t,e);case 4:case 3:case 2:return ZPt(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function lkt(t,e,r,n){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<i.length;++u)if(!(i[u].s.r>r||i[u].s.c>o)&&!(i[u].e.r<r||i[u].e.c<o)){if(i[u].s.r<r||i[u].s.c<o){l=-1;break}l=i[u].e.r-i[u].s.r+1,c=i[u].e.c-i[u].s.c+1;break}if(!(l<0)){var d=qs({r,c:o}),h=n.dense?(t[r]||[])[o]:t[d],f=h&&h.v!=null&&(h.h||BAt(h.w||(Ov(h),h.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?f='<span contenteditable="true">'+f+"</span>":h&&(m["data-t"]=h&&h.t||"z",h.v!=null&&(m["data-v"]=h.v),h.z!=null&&(m["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Lr("td",f,m))}}var x="<tr>";return x+s.join("")+"</tr>"}var ckt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',ukt="</body></html>";function dkt(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function NAe(t,e){var r=e||{},n=r.header!=null?r.header:ckt,i=r.footer!=null?r.footer:ukt,s=[n],o=Rf(t["!ref"]);r.dense=Array.isArray(t),s.push(dkt(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(lkt(t,o,l,r));return s.push("</table>"+i),s.join("")}function SAe(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var o=typeof n.origin=="string"?pc(n.origin):n.origin;i=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var d=Rf(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),i==-1&&(u.e.r=i=d.e.r+1)}var h=[],f=0,m=t["!rows"]||(t["!rows"]=[]),x=0,g=0,y=0,w=0,S=0,E=0;for(t["!cols"]||(t["!cols"]=[]);x<l.length&&g<c;++x){var j=l[x];if(Gue(j)){if(n.display)continue;m[g]={hidden:!0}}var T=j.children;for(y=w=0;y<T.length;++y){var O=T[y];if(!(n.display&&Gue(O))){var I=O.hasAttribute("data-v")?O.getAttribute("data-v"):O.hasAttribute("v")?O.getAttribute("v"):VAt(O.innerHTML),M=O.getAttribute("data-z")||O.getAttribute("z");for(f=0;f<h.length;++f){var D=h[f];D.s.c==w+s&&D.s.r<g+i&&g+i<=D.e.r&&(w=D.e.c+1-s,f=-1)}E=+O.getAttribute("colspan")||1,((S=+O.getAttribute("rowspan")||1)>1||E>1)&&h.push({s:{r:g+i,c:w+s},e:{r:g+i+(S||1)-1,c:w+s+(E||1)-1}});var z={t:"s",v:I},F=O.getAttribute("data-t")||O.getAttribute("t")||"";I!=null&&(I.length==0?z.t=F||"z":n.raw||I.trim().length==0||F=="s"||(I==="TRUE"?z={t:"b",v:!0}:I==="FALSE"?z={t:"b",v:!1}:isNaN(dv(I))?isNaN(MP(I).getDate())||(z={t:"d",v:Td(I)},n.cellDates||(z={t:"n",v:ph(z.v)}),z.z=n.dateNF||zo[14]):z={t:"n",v:dv(I)})),z.z===void 0&&M!=null&&(z.z=M);var q="",Q=O.getElementsByTagName("A");if(Q&&Q.length)for(var re=0;re<Q.length&&!(Q[re].hasAttribute("href")&&(q=Q[re].getAttribute("href"),q.charAt(0)!="#"));++re);q&&q.charAt(0)!="#"&&(z.l={Target:q}),n.dense?(t[g+i]||(t[g+i]=[]),t[g+i][w+s]=z):t[qs({c:w+s,r:g+i})]=z,u.e.c<w+s&&(u.e.c=w+s),w+=E}}++g}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,g-1+i),t["!ref"]=_l(u),g>=c&&(t["!fullref"]=_l((u.e.r=l.length-x+g-1+i,u))),t}function EAe(t,e){var r=e||{},n=r.dense?[]:{};return SAe(n,t,e)}function hkt(t,e){return wN(EAe(t,e),e)}function Gue(t){var e="",r=fkt(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function fkt(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var mkt=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+FP({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return jl+e}}(),Kue=function(){var t=function(s){return zs(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+zs(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,h=Rf(s["!ref"]||"A1"),f=s["!merges"]||[],m=0,x=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var g="",y=s["!rows"]||[];for(u=0;u<h.s.r;++u)g=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;u<=h.e.r;++u){for(g=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+g+`>
`),d=0;d<h.s.c;++d)c.push(e);for(;d<=h.e.c;++d){var w=!1,S={},E="";for(m=0;m!=f.length;++m)if(!(f[m].s.c>d)&&!(f[m].s.r>u)&&!(f[m].e.c<d)&&!(f[m].e.r<u)){(f[m].s.c!=d||f[m].s.r!=u)&&(w=!0),S["table:number-columns-spanned"]=f[m].e.c-f[m].s.c+1,S["table:number-rows-spanned"]=f[m].e.r-f[m].s.r+1;break}if(w){c.push(r);continue}var j=qs({r:u,c:d}),T=x?(s[u]||[])[d]:s[j];if(T&&T.f&&(S["table:formula"]=zs(R4t(T.f)),T.F&&T.F.slice(0,j.length)==j)){var O=Rf(T.F);S["table:number-matrix-columns-spanned"]=O.e.c-O.s.c+1,S["table:number-matrix-rows-spanned"]=O.e.r-O.s.r+1}if(!T){c.push(e);continue}switch(T.t){case"b":E=T.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=T.v?"true":"false";break;case"n":E=T.w||String(T.v||0),S["office:value-type"]="float",S["office:value"]=T.v||0;break;case"s":case"str":E=T.v==null?"":T.v,S["office:value-type"]="string";break;case"d":E=T.w||Td(T.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=Td(T.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(e);continue}var I=t(E);if(T.l&&T.l.Target){var M=T.l.Target;M=M.charAt(0)=="#"?"#"+D4t(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),I=Lr("text:a",I,{"xlink:href":M.replace(/&/g,"&amp;")})}c.push("          "+Lr("table:table-cell",Lr("text:p",I,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;yJ(h),h.ods=l;var f=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var h=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[jl],u=FP({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=FP({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push($je().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),i(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(n(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function jAe(t,e){if(e.bookType=="fods")return Kue(t,e);var r=lJ(),n="",i=[],s=[];return n="mimetype",Di(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Di(r,n,Kue(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Di(r,n,mkt(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Di(r,n,jl+$je()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Di(r,n,jCt(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Di(r,n,SCt(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function RL(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pkt(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Lp(LP(t))}function gkt(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Pb(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function xkt(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function BP(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Fs(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function jE(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Fl(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=BP(t,r),s=i&7;i=Math.floor(i/8);var o=0,l;if(i==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=BP(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var u={data:l,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Rc(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(Fs(n*8+i.type)),i.type==2&&e.push(Fs(i.data.length)),e.push(i.data))})}),Pb(e)}function np(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=BP(t,n),s=Fl(t.slice(n[0],n[0]+i));n[0]+=i;var o={id:jE(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Fl(l.data),u=jE(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=jE(s[3][0].data)>>>0>0),r.push(o)}return r}function nS(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Fs(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Fs(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:Fs(o.data.length)}],n[2].push({data:Rc(o.meta),type:2})});var s=Rc(n);e.push(Fs(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),Pb(e)}function vkt(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=BP(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}i.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Pb(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(i.push(i[0].slice(-c)),u-=c;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-c,-c+u))}}var d=Pb(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function ip(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(vkt(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Pb(e)}function iS(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=Fs(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,r+=n}return Pb(e)}function wU(t,e){var r=new Uint8Array(32),n=RL(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,xkt(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function _U(t,e){var r=new Uint8Array(32),n=RL(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function a1(t){var e=Fl(t);return BP(e[1][0].data)}function ykt(t,e,r){var n,i,s,o;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&jE(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=RL(t[7][0].data),d=0,h=[],f=RL(t[4][0].data),m=0,x=[],g=0;g<e.length;++g){if(e[g]==null){u.setUint16(g*2,65535,!0),f.setUint16(g*2,65535);continue}u.setUint16(g*2,d,!0),f.setUint16(g*2,m,!0);var y,w;switch(typeof e[g]){case"string":y=wU({t:"s",v:e[g]},r),w=_U({t:"s",v:e[g]},r);break;case"number":y=wU({t:"n",v:e[g]},r),w=_U({t:"n",v:e[g]},r);break;case"boolean":y=wU({t:"b",v:e[g]},r),w=_U({t:"b",v:e[g]},r);break;default:throw new Error("Unsupported value "+e[g])}h.push(y),d+=y.length,x.push(w),m+=w.length,++c}for(t[2][0].data=Fs(c);g<t[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),f.setUint16(g*2,65535,!0);return t[6][0].data=Pb(h),t[3][0].data=Pb(x),c}function bkt(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Rf(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(_l(n)));var s=DL(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(J){return J.forEach(function(ie){typeof ie=="string"&&o.push(ie)})});var l={},c=[],u=Js.read(e.numbers,{type:"base64"});u.FileIndex.map(function(J,ie){return[J,u.FullPaths[ie]]}).forEach(function(J){var ie=J[0],ce=J[1];if(ie.type==2&&ie.name.match(/\.iwa/)){var me=ie.content,he=ip(me),_e=np(he);_e.forEach(function(ue){c.push(ue.id),l[ue.id]={deps:[],location:ce,type:jE(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(J,ie){return J-ie});var d=c.filter(function(J){return J>1}).map(function(J){return[J,Fs(J)]});u.FileIndex.map(function(J,ie){return[J,u.FullPaths[ie]]}).forEach(function(J){var ie=J[0];if(J[1],!!ie.name.match(/\.iwa/)){var ce=np(ip(ie.content));ce.forEach(function(me){me.messages.forEach(function(he){d.forEach(function(_e){me.messages.some(function(ue){return jE(ue.meta[1][0].data)!=11006&&gkt(ue.data,_e[1])})&&l[_e[0]].deps.push(me.id)})})})}});for(var h=Js.find(u,l[1].location),f=np(ip(h.content)),m,x=0;x<f.length;++x){var g=f[x];g.id==1&&(m=g)}var y=a1(Fl(m.messages[0].data)[1][0].data);for(h=Js.find(u,l[y].location),f=np(ip(h.content)),x=0;x<f.length;++x)g=f[x],g.id==y&&(m=g);for(y=a1(Fl(m.messages[0].data)[2][0].data),h=Js.find(u,l[y].location),f=np(ip(h.content)),x=0;x<f.length;++x)g=f[x],g.id==y&&(m=g);for(y=a1(Fl(m.messages[0].data)[2][0].data),h=Js.find(u,l[y].location),f=np(ip(h.content)),x=0;x<f.length;++x)g=f[x],g.id==y&&(m=g);var w=Fl(m.messages[0].data);{w[6][0].data=Fs(n.e.r+1),w[7][0].data=Fs(n.e.c+1);var S=a1(w[46][0].data),E=Js.find(u,l[S].location),j=np(ip(E.content));{for(var T=0;T<j.length&&j[T].id!=S;++T);if(j[T].id!=S)throw"Bad ColumnRowUIDMapArchive";var O=Fl(j[T].messages[0].data);O[1]=[],O[2]=[],O[3]=[];for(var I=0;I<=n.e.c;++I){var M=[];M[1]=M[2]=[{type:0,data:Fs(I+420690)}],O[1].push({type:2,data:Rc(M)}),O[2].push({type:0,data:Fs(I)}),O[3].push({type:0,data:Fs(I)})}O[4]=[],O[5]=[],O[6]=[];for(var D=0;D<=n.e.r;++D)M=[],M[1]=M[2]=[{type:0,data:Fs(D+726270)}],O[4].push({type:2,data:Rc(M)}),O[5].push({type:0,data:Fs(D)}),O[6].push({type:0,data:Fs(D)});j[T].messages[0].data=Rc(O)}E.content=iS(nS(j)),E.size=E.content.length,delete w[46];var z=Fl(w[4][0].data);{z[7][0].data=Fs(n.e.r+1);var F=Fl(z[1][0].data),q=a1(F[2][0].data);E=Js.find(u,l[q].location),j=np(ip(E.content));{if(j[0].id!=q)throw"Bad HeaderStorageBucket";var Q=Fl(j[0].messages[0].data);for(D=0;D<s.length;++D){var re=Fl(Q[2][0].data);re[1][0].data=Fs(D),re[4][0].data=Fs(s[D].length),Q[2][D]={type:Q[2][0].type,data:Rc(re)}}j[0].messages[0].data=Rc(Q)}E.content=iS(nS(j)),E.size=E.content.length;var Z=a1(z[2][0].data);E=Js.find(u,l[Z].location),j=np(ip(E.content));{if(j[0].id!=Z)throw"Bad HeaderStorageBucket";for(Q=Fl(j[0].messages[0].data),I=0;I<=n.e.c;++I)re=Fl(Q[2][0].data),re[1][0].data=Fs(I),re[4][0].data=Fs(n.e.r+1),Q[2][I]={type:Q[2][0].type,data:Rc(re)};j[0].messages[0].data=Rc(Q)}E.content=iS(nS(j)),E.size=E.content.length;var se=a1(z[4][0].data);(function(){for(var J=Js.find(u,l[se].location),ie=np(ip(J.content)),ce,me=0;me<ie.length;++me){var he=ie[me];he.id==se&&(ce=he)}var _e=Fl(ce.messages[0].data);{_e[3]=[];var ue=[];o.forEach(function(Le,Ge){ue[1]=[{type:0,data:Fs(Ge)}],ue[2]=[{type:0,data:Fs(1)}],ue[3]=[{type:2,data:pkt(Le)}],_e[3].push({type:2,data:Rc(ue)})})}ce.messages[0].data=Rc(_e);var je=nS(ie),ye=iS(je);J.content=ye,J.size=J.content.length})();var K=Fl(z[3][0].data);{var X=K[1][0];delete K[2];var Y=Fl(X.data);{var oe=a1(Y[2][0].data);(function(){for(var J=Js.find(u,l[oe].location),ie=np(ip(J.content)),ce,me=0;me<ie.length;++me){var he=ie[me];he.id==oe&&(ce=he)}var _e=Fl(ce.messages[0].data);{delete _e[6],delete K[7];var ue=new Uint8Array(_e[5][0].data);_e[5]=[];for(var je=0,ye=0;ye<=n.e.r;++ye){var Le=Fl(ue);je+=ykt(Le,s[ye],o),Le[1][0].data=Fs(ye),_e[5].push({data:Rc(Le),type:2})}_e[1]=[{type:0,data:Fs(n.e.c+1)}],_e[2]=[{type:0,data:Fs(n.e.r+1)}],_e[3]=[{type:0,data:Fs(je)}],_e[4]=[{type:0,data:Fs(n.e.r+1)}]}ce.messages[0].data=Rc(_e);var Ge=nS(ie),Be=iS(Ge);J.content=Be,J.size=J.content.length})()}X.data=Rc(Y)}z[3][0].data=Rc(K)}w[4][0].data=Rc(z)}m.messages[0].data=Rc(w);var xe=nS(f),H=iS(xe);return h.content=H,h.size=h.content.length,u}function wkt(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function SJ(t){wkt([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function _kt(t,e){return e.bookType=="ods"?jAe(t,e):e.bookType=="numbers"?bkt(t,e):e.bookType=="xlsb"?Nkt(t,e):Skt(t,e)}function Nkt(t,e){JS=1024,t&&!t.SSF&&(t.SSF=gh(zo)),t&&t.SSF&&(NB(),_B(t.SSF),e.revssf=SB(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,z4?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=lAe.indexOf(e.bookType)>-1,i=Lje();SJ(e=e||{});var s=lJ(),o="",l=0;if(e.cellXfs=[],Jb(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Di(s,o,Uje(t.Props,e)),i.coreprops.push(o),$s(e.rels,2,o,us.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Di(s,o,Vje(t.Props)),i.extprops.push(o),$s(e.rels,3,o,us.EXT_PROPS),t.Custprops!==t.Props&&lu(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Di(s,o,qje(t.Custprops)),i.custprops.push(o),$s(e.rels,4,o,us.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Di(s,o,jPt(l-1,o,e,t,d)),i.sheets.push(o),$s(e.wbrels,-1,"worksheets/sheet"+l+"."+r,us.WS[0])}if(h){var m=h["!comments"],x=!1,g="";m&&m.length>0&&(g="xl/comments"+l+"."+r,Di(s,g,TPt(m,g)),i.comments.push(g),$s(d,-1,"../comments"+l+"."+r,us.CMNT),x=!0),h["!legacy"]&&x&&Di(s,"xl/drawings/vmlDrawing"+l+".vml",aAe(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Di(s,Bje(o),SE(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Di(s,o,CPt(e.Strings,o,e)),i.strs.push(o),$s(e.wbrels,-1,"sharedStrings."+r,us.SST)),o="xl/workbook."+r,Di(s,o,EPt(t,o)),i.workbooks.push(o),$s(e.rels,1,o,us.WB),o="xl/theme/theme1.xml",Di(s,o,iAe(t.Themes,e)),i.themes.push(o),$s(e.wbrels,-1,"theme/theme1.xml",us.THEME),o="xl/styles."+r,Di(s,o,APt(t,o,e)),i.styles.push(o),$s(e.wbrels,-1,"styles."+r,us.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Di(s,o,t.vbaraw),i.vba.push(o),$s(e.wbrels,-1,"vbaProject.bin",us.VBA)),o="xl/metadata."+r,Di(s,o,PPt(o)),i.metadata.push(o),$s(e.wbrels,-1,"metadata."+r,us.XLMETA),Di(s,"[Content_Types].xml",Fje(i,e)),Di(s,"_rels/.rels",SE(e.rels)),Di(s,"xl/_rels/workbook."+r+".rels",SE(e.wbrels)),delete e.revssf,delete e.ssf,s}function Skt(t,e){JS=1024,t&&!t.SSF&&(t.SSF=gh(zo)),t&&t.SSF&&(NB(),_B(t.SSF),e.revssf=SB(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,z4?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=lAe.indexOf(e.bookType)>-1,i=Lje();SJ(e=e||{});var s=lJ(),o="",l=0;if(e.cellXfs=[],Jb(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Di(s,o,Uje(t.Props,e)),i.coreprops.push(o),$s(e.rels,2,o,us.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Di(s,o,Vje(t.Props)),i.extprops.push(o),$s(e.rels,3,o,us.EXT_PROPS),t.Custprops!==t.Props&&lu(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Di(s,o,qje(t.Custprops)),i.custprops.push(o),$s(e.rels,4,o,us.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var h={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Di(s,o,xAe(l-1,e,t,h)),i.sheets.push(o),$s(e.wbrels,-1,"worksheets/sheet"+l+"."+r,us.WS[0])}if(f){var x=f["!comments"],g=!1,y="";if(x&&x.length>0){var w=!1;x.forEach(function(S){S[1].forEach(function(E){E.T==!0&&(w=!0)})}),w&&(y="xl/threadedComments/threadedComment"+l+"."+r,Di(s,y,tTt(x,d,e)),i.threadedcomments.push(y),$s(h,-1,"../threadedComments/threadedComment"+l+"."+r,us.TCMNT)),y="xl/comments"+l+"."+r,Di(s,y,oAe(x)),i.comments.push(y),$s(h,-1,"../comments"+l+"."+r,us.CMNT),g=!0}f["!legacy"]&&g&&Di(s,"xl/drawings/vmlDrawing"+l+".vml",aAe(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Di(s,Bje(o),SE(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Di(s,o,Qje(e.Strings,e)),i.strs.push(o),$s(e.wbrels,-1,"sharedStrings."+r,us.SST)),o="xl/workbook."+r,Di(s,o,bAe(t)),i.workbooks.push(o),$s(e.rels,1,o,us.WB),o="xl/theme/theme1.xml",Di(s,o,iAe(t.Themes,e)),i.themes.push(o),$s(e.wbrels,-1,"theme/theme1.xml",us.THEME),o="xl/styles."+r,Di(s,o,rAe(t,e)),i.styles.push(o),$s(e.wbrels,-1,"styles."+r,us.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Di(s,o,t.vbaraw),i.vba.push(o),$s(e.wbrels,-1,"vbaProject.bin",us.VBA)),o="xl/metadata."+r,Di(s,o,sAe()),i.metadata.push(o),$s(e.wbrels,-1,"metadata."+r,us.XLMETA),d.length>1&&(o="xl/persons/person.xml",Di(s,o,rTt(d)),i.people.push(o),$s(e.wbrels,-1,"persons/person.xml",us.PEOPLE)),Di(s,"[Content_Types].xml",Fje(i,e)),Di(s,"_rels/.rels",SE(e.rels)),Di(s,"xl/_rels/workbook."+r+".rels",SE(e.wbrels)),delete e.revssf,delete e.ssf,s}function Ekt(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=kv(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function AAe(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return TI(e.file,Js.write(t,{type:Es?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Js.write(t,e)}function jkt(t,e){var r=gh(e||{}),n=_kt(t,r);return Akt(n,r)}function Akt(t,e){var r={},n=Es?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Js.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(wB(i))}return e.password&&typeof encrypt_agile<"u"?AAe(encrypt_agile(i,e.password),e):e.type==="file"?TI(e.file,i):e.type=="string"?F4(i):i}function Ckt(t,e){var r=e||{},n=qPt(t,r);return AAe(n,r)}function E0(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return DP(LP(n));case"binary":return LP(n);case"string":return t;case"file":return TI(e.file,n,"utf8");case"buffer":return Es?Hv(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):E0(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Tkt(t,e){switch(e.type){case"base64":return DP(t);case"binary":return t;case"string":return t;case"file":return TI(e.file,t,"binary");case"buffer":return Es?Hv(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function wD(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?DP(r):e.type=="string"?F4(r):r;case"file":return TI(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function CAe(t,e){nAt(),mPt(t);var r=gh(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=CAe(t,r);return r.type="array",wB(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return E0(zPt(t,r),r);case"slk":case"sylk":return E0(d5t.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return E0(NAe(t.Sheets[t.SheetNames[i]],r),r);case"txt":return Tkt(TAe(t.Sheets[t.SheetNames[i]],r),r);case"csv":return E0(EJ(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return E0(h5t.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return wD(u5t.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return E0(f5t.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return E0(b5t.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return E0(Zje.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return E0(jAe(t,r),r);case"wk1":return wD(Uue.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return wD(Uue.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),wD(_Ae(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Ckt(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return jkt(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Pkt(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function kkt(t,e,r){var n={};return n.type="file",n.file=e,Pkt(n),CAe(t,n)}function Okt(t,e,r,n,i,s,o,l){var c=iu(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,f=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!o||t[r])for(var m=e.s.c;m<=e.e.c;++m){var x=o?t[r][m]:t[n[m]+c];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[m]!=null&&(f[s[m]]=u);continue}var g=x.v;switch(x.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[m]!=null){if(g==null)if(x.t=="e"&&g===null)f[s[m]]=null;else if(u!==void 0)f[s[m]]=u;else if(d&&g===null)f[s[m]]=null;else continue;else f[s[m]]=d&&(x.t!=="n"||x.t==="n"&&l.rawNumbers!==!1)?g:Ov(x,g,l);g!=null&&(h=!1)}}return{row:f,isempty:h}}function DL(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=La(d);break;case"number":c=La(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(i=0);var h=iu(c.s.r),f=[],m=[],x=0,g=0,y=Array.isArray(t),w=c.s.r,S=0,E={};y&&!t[w]&&(t[w]=[]);var j=u.skipHidden&&t["!cols"]||[],T=u.skipHidden&&t["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(j[S]||{}).hidden)switch(f[S]=Wu(S),r=y?t[w][S]:t[f[S]+h],n){case 1:s[S]=S-c.s.c;break;case 2:s[S]=f[S];break;case 3:s[S]=u.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Ov(r,null,u),g=E[o]||0,!g)E[o]=1;else{do l=o+"_"+g++;while(E[l]);E[o]=g,E[l]=1}s[S]=l}for(w=c.s.r+i;w<=c.e.r;++w)if(!(T[w]||{}).hidden){var O=Okt(t,c,w,f,n,s,y,u);(O.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[x++]=O.row)}return m.length=x,m}var Xue=/"/g;function Ikt(t,e,r,n,i,s,o,l){for(var c=!0,u=[],d="",h=iu(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var m=l.dense?(t[r]||[])[f]:t[n[f]+h];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Ov(m,null,l));for(var x=0,g=0;x!==d.length;++x)if((g=d.charCodeAt(x))===i||g===s||g===34||l.forceQuotes){d='"'+d.replace(Xue,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(Xue,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function EJ(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=La(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(f[x]||{}).hidden||(h[x]=Wu(x));for(var g=0,y=i.s.r;y<=i.e.r;++y)(m[y]||{}).hidden||(d=Ikt(t,i,y,h,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((g++?l:"")+d)));return delete n.dense,r.join("")}function TAe(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=EJ(t,e);return r}function Rkt(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=La(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=i.s.c;l<=i.e.c;++l)o[l]=Wu(l);for(var d=i.s.r;d<=i.e.r;++d)for(s=iu(d),l=i.s.c;l<=i.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function PAe(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?pc(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+i}};if(s["!ref"]){var h=La(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),o==-1&&(o=h.e.r+1,d.e.r=o+e.length-1+i)}else o==-1&&(o=0,d.e.r=e.length-1+i);var f=n.header||[],m=0;e.forEach(function(g,y){lu(g).forEach(function(w){(m=f.indexOf(w))==-1&&(f[m=f.length]=w);var S=g[w],E="z",j="",T=qs({c:l+m,r:o+y+i});u=$P(s,T),S&&typeof S=="object"&&!(S instanceof Date)?s[T]=S:(typeof S=="number"?E="n":typeof S=="boolean"?E="b":typeof S=="string"?E="s":S instanceof Date?(E="d",n.cellDates||(E="n",S=ph(S)),j=n.dateNF||zo[14]):S===null&&n.nullError&&(E="e",S=0),u?(u.t=E,u.v=S,delete u.w,delete u.R,j&&(u.z=j)):s[T]=u={t:E,v:S},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,l+f.length-1);var x=iu(o);if(i)for(m=0;m<f.length;++m)s[Wu(m+l)+x]={t:"s",v:f[m]};return s["!ref"]=_l(d),s}function Dkt(t,e){return PAe(null,t,e)}function $P(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=pc(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?$P(t,qs(e)):$P(t,qs({r:e,c:r||0}))}function Mkt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Lkt(){return{SheetNames:[],Sheets:{}}}function Fkt(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=o+i)!=-1;++i);}if(yAe(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Bkt(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Mkt(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function $kt(t,e){return t.z=e,t}function kAe(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Ukt(t,e,r){return kAe(t,"#"+e,r)}function zkt(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Vkt(t,e,r,n){for(var i=typeof e!="string"?e:La(e),s=typeof e=="string"?e:_l(e),o=i.s.r;o<=i.e.r;++o)for(var l=i.s.c;l<=i.e.c;++l){var c=$P(t,o,l);c.t="n",c.F=s,delete c.v,o==i.s.r&&l==i.s.c&&(c.f=r,n&&(c.D=!0))}return t}var NU={encode_col:Wu,encode_row:iu,encode_cell:qs,encode_range:_l,decode_col:mJ,decode_row:fJ,split_cell:nCt,decode_cell:pc,decode_range:Rf,format_cell:Ov,sheet_add_aoa:kje,sheet_add_json:PAe,sheet_add_dom:SAe,aoa_to_sheet:y5,json_to_sheet:Dkt,table_to_sheet:EAe,table_to_book:hkt,sheet_to_csv:EJ,sheet_to_txt:TAe,sheet_to_json:DL,sheet_to_html:NAe,sheet_to_formulae:Rkt,sheet_to_row_object_array:DL,sheet_get_cell:$P,book_new:Lkt,book_append_sheet:Fkt,book_set_sheet_visibility:Bkt,cell_set_number_format:$kt,cell_set_hyperlink:kAe,cell_set_internal_link:Ukt,cell_add_comment:zkt,sheet_set_array_formula:Vkt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};async function OAe(t,e=!1){try{console.log(` Iniciando geocodificao para cooperativa ${t}`);const{data:r,error:n}=await Ee.from("cooperativas").select("id, nome_fantasia, logradouro, numero, bairro, cidade, uf, cep, latitude, longitude").eq("id",t).single();if(n||!r)throw new Error("Cooperativa no encontrada");if(!e&&r.latitude&&r.longitude)return console.log(` Cooperativa j tem coordenadas: ${r.latitude}, ${r.longitude}`),{success:!0,latitude:r.latitude,longitude:r.longitude,precision:"cached",cached:!0,message:"Cooperativa j possui coordenadas"};const i={latitude:r.latitude,longitude:r.longitude};e&&r.latitude&&r.longitude&&console.log(` Forando atualizao de coordenadas existentes: ${r.latitude}, ${r.longitude}`);const o=[r.logradouro,r.numero,r.bairro,r.cidade,r.uf,r.cep,"Brasil"].filter(Boolean).join(", ");console.log(` Buscando coordenadas para: ${o}`);let l=null,c=null,u="unknown";const d="pk.be1a87c6f8f1ceb800977d7c8842a3ab";try{console.log(" Tentativa 0: LocationIQ com endereo completo...");const f=`https://us1.locationiq.com/v1/search?key=${d}&q=${encodeURIComponent(o)}&format=json&countrycodes=br&limit=1&addressdetails=1`,m=await fetch(f,{headers:{Accept:"application/json"}});if(m.ok){const x=await m.json();if(x.length>0){l=parseFloat(x[0].lat),c=parseFloat(x[0].lon);const g=x[0].display_name||"";g.includes(r.logradouro||"")&&g.includes(r.numero||"")?(u="address",console.log(` Coordenadas encontradas via LocationIQ (endereo completo): ${l}, ${c}`)):g.includes(r.cep||"")?(u="postal_code",console.log(` Coordenadas encontradas via LocationIQ (CEP): ${l}, ${c}`)):(u="street",console.log(` Coordenadas encontradas via LocationIQ (rua): ${l}, ${c}`))}}}catch(f){console.log(" LocationIQ no disponvel, tentando outras fontes...",f)}if((!l||!c)&&r.cep)try{const f=r.cep.replace(/\D/g,"");console.log(` Tentando AwesomeAPI com CEP: ${f}`);const m=`https://cep.awesomeapi.com.br/json/${f}`,x=await fetch(m,{headers:{Accept:"application/json"}});if(x.ok){const g=await x.json();g.lat&&g.lng&&(l=parseFloat(g.lat),c=parseFloat(g.lng),u="postal_code",console.log(` Coordenadas encontradas via AwesomeAPI (CEP): ${l}, ${c}`),console.log(` Endereo: ${g.address}, ${g.district} - ${g.city}/${g.state}`))}}catch{console.log(" AwesomeAPI no disponvel ou CEP sem coordenadas, tentando outras fontes...")}if(!l||!c){const f=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(o)}&countrycodes=br&limit=1`,x=await(await fetch(f,{headers:{"User-Agent":"Ciclik-App/1.0",Accept:"application/json"}})).json();x.length>0&&(l=parseFloat(x[0].lat),c=parseFloat(x[0].lon),u="address",console.log(` Coordenadas encontradas (endereo completo): ${l}, ${c}`))}if(!l||!c){console.log(" Endereo completo no encontrado, tentando rua + bairro + cidade");const f=[r.logradouro,r.bairro,r.cidade,r.uf,"Brasil"].filter(Boolean).join(", "),m=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}&countrycodes=br&limit=1`;await new Promise(y=>setTimeout(y,1e3));const g=await(await fetch(m,{headers:{"User-Agent":"Ciclik-App/1.0",Accept:"application/json"}})).json();if(g.length>0)l=parseFloat(g[0].lat),c=parseFloat(g[0].lon),u="street",console.log(` Coordenadas encontradas (rua + bairro): ${l}, ${c}`);else{if(r.cep&&u!=="postal_code"){console.log(" Rua + bairro no encontrado, tentando CEP + cidade via Nominatim");const y=`${r.cep}, ${r.cidade}, ${r.uf}, Brasil`,w=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(y)}&countrycodes=br&limit=1`;await new Promise(j=>setTimeout(j,1e3));const E=await(await fetch(w,{headers:{"User-Agent":"Ciclik-App/1.0",Accept:"application/json"}})).json();E.length>0&&(l=parseFloat(E[0].lat),c=parseFloat(E[0].lon),u="postal_code",console.log(` Coordenadas encontradas (CEP): ${l}, ${c}`))}if(!l||!c){console.log(" Todas as tentativas anteriores falharam, tentando apenas cidade + UF (ltimo recurso)");const y=`${r.cidade}, ${r.uf}, Brasil`,w=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(y)}&countrycodes=br&limit=1`;await new Promise(j=>setTimeout(j,1e3));const E=await(await fetch(w,{headers:{"User-Agent":"Ciclik-App/1.0",Accept:"application/json"}})).json();if(E.length>0){if(l=parseFloat(E[0].lat),c=parseFloat(E[0].lon),u="city",console.log(` Coordenadas encontradas (cidade - genrico): ${l}, ${c}`),i.latitude&&i.longitude)return console.warn(" Coordenadas genricas (centro da cidade). Mantendo coordenadas existentes."),{success:!0,latitude:i.latitude,longitude:i.longitude,precision:"cached",cached:!0,message:"Endereo no encontrado com preciso. Coordenadas anteriores mantidas."}}else throw new Error(`No foi possvel encontrar coordenadas para: ${r.cidade}, ${r.uf}`)}}}if(l&&c){if(!(l>=-34&&l<=6&&c>=-75&&c<=-28)){if(console.error(` ERRO: Coordenadas fora do Brasil! [${l}, ${c}]`),i.latitude&&i.longitude)return console.warn(" Mantendo coordenadas anteriores por segurana."),{success:!0,latitude:i.latitude,longitude:i.longitude,precision:"cached",cached:!0,message:"Coordenadas encontradas esto fora do Brasil. Coordenadas anteriores mantidas."};throw new Error(`Coordenadas encontradas esto fora do Brasil (${l}, ${c}). Verifique o endereo.`)}console.log(" Coordenadas validadas: dentro do territrio brasileiro")}console.log(` Salvando coordenadas no banco: [${l}, ${c}]`);const{error:h}=await Ee.from("cooperativas").update({latitude:l,longitude:c}).eq("id",t).select().single();if(h)throw console.error(" Erro ao atualizar coordenadas no banco:",h),h.code==="P0001"&&e?(console.warn(" Erro de duplicatas ao atualizar a mesma cooperativa. Isso indica um problema na trigger/policy do banco."),new Error("Erro ao atualizar coordenadas: A validao de duplicatas no est considerando que  a mesma cooperativa sendo atualizada. Por favor, ajuste a trigger/policy no Supabase para excluir a prpria cooperativa (NEW.id ou id atual) da verificao durante UPDATE.")):new Error(`Erro ao atualizar coordenadas: ${h.message}`);return console.log(` Cooperativa atualizada com sucesso! Nova localizao: [${l}, ${c}]`),{success:!0,latitude:l,longitude:c,precision:u,cached:!1,message:"Coordenadas adicionadas com sucesso"}}catch(r){throw console.error(" Erro na geocodificao:",r),new Error(r.message||"Erro ao geocodificar cooperativa")}}async function qkt(t){try{cr.loading("Buscando localizao...",{id:"geocoding"});const e=await OAe(t);if(cr.dismiss("geocoding"),e.cached)cr.info("Cooperativa j possui coordenadas");else{let r="desconhecido",n="";e.precision==="address"?(r="endereo completo (alta preciso)",n=""):e.precision==="street"?(r="rua + bairro (preciso mdia)",n=""):e.precision==="postal_code"?(r="CEP brasileiro (preciso boa) ",n=""):e.precision==="city"?(r="centro da cidade (preciso baixa)",n=""):e.precision==="cached"&&(r="coordenadas anteriores mantidas",n=""),cr.success("Localizao encontrada!",{description:`${n} Coordenadas baseadas em: ${r}`,duration:e.precision==="city"?8e3:4e3})}return e}catch(e){throw cr.dismiss("geocoding"),cr.error("Erro ao buscar localizao",{description:e.message}),e}}async function Hkt(t){try{cr.loading("Atualizando localizao no mapa...",{id:"geocoding"});const e=await OAe(t,!0);cr.dismiss("geocoding");let r="desconhecido",n="";e.precision==="address"?(r="endereo completo (alta preciso)",n=""):e.precision==="street"?(r="rua + bairro (preciso mdia)",n=""):e.precision==="postal_code"?(r="CEP brasileiro (preciso boa) ",n=""):e.precision==="city"?(r="centro da cidade (preciso baixa)",n=""):e.precision==="cached"&&(r="coordenadas anteriores mantidas (endereo no encontrado)",n="");const i=e.precision==="city"||e.precision==="cached";return cr[i?"warning":"success"]("Localizao atualizada!",{description:`${n} ${r}`,duration:i?8e3:4e3}),e}catch(e){throw cr.dismiss("geocoding"),cr.error("Erro ao atualizar localizao",{description:e.message}),e}}const _D=t=>{let e=t.replace(/[^\d,]/g,"");const r=e.split(",");r.length>2&&(e=r[0]+","+r.slice(1).join(""));const[n,i]=e.split(","),s=n.replace(/\B(?=(\d{3})+(?!\d))/g,".");return i!==void 0?`${s},${i.substring(0,2)}`:s},Yue=t=>t.replace(/\./g,"").replace(",",".");function Wkt(){const[t,e]=C.useState([]),[r,n]=C.useState(null),[i,s]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[d,h]=C.useState(!1),[f,m]=C.useState(!1),[x,g]=C.useState([]),[y,w]=C.useState(""),[S,E]=C.useState({}),[j,T]=C.useState(!1),[O,I]=C.useState({cnpj:"",razao_social:"",nome_fantasia:"",email:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:"",whatsapp:"",capacidade_mensal_ton:"",tipo_operador:"cooperativa",tipo_pj:"Outro"}),[M,D]=C.useState(null),[z,F]=C.useState(null),[q,Q]=C.useState(""),[re,Z]=C.useState("all"),[se,K]=C.useState("all"),X=nn(),{toast:Y}=Qi();C.useEffect(()=>{oe()},[]);const oe=async()=>{const{data:Re}=await Ee.from("cooperativas").select("*").order("data_cadastro",{ascending:!1});Re&&(e(Re),Re.forEach(H))},xe=async Re=>{const Ue=Re.replace(/\D/g,"");if(Ue.length===8){T(!0);try{const st=await(await fetch(`https://viacep.com.br/ws/${Ue}/json/`)).json();if(st.erro){Y({title:"CEP no encontrado",description:"Verifique o CEP informado",variant:"destructive"});return}I(Xt=>({...Xt,logradouro:st.logradouro||"",bairro:st.bairro||"",cidade:st.localidade||"",uf:st.uf||"",complemento:st.complemento||""})),Y({title:"Endereo encontrado! ",description:`${st.logradouro}, ${st.bairro} - ${st.localidade}/${st.uf}`})}catch{Y({title:"Erro ao buscar CEP",description:"No foi possvel consultar o CEP. Preencha manualmente.",variant:"destructive"})}finally{T(!1)}}},H=async Re=>{const{data:Ue}=await Ee.from("entregas_reciclaveis").select("peso_validado, status").eq("id_cooperativa",Re.id),xt=(Ue==null?void 0:Ue.length)||0,st=(Ue==null?void 0:Ue.reduce((Jt,_r)=>Jt+(_r.peso_validado||0),0))||0,Xt=(Ue==null?void 0:Ue.filter(Jt=>Jt.status==="validada").length)||0;E(Jt=>({...Jt,[Re.id]:{totalEntregas:xt,pesoTotal:st,validadas:Xt}}))},J=async(Re,Ue)=>{try{const{error:xt}=await Ee.from("cooperativas").update({status:Ue}).eq("id",Re);if(xt)throw xt;Y({title:"Status atualizado!",description:`Operador ${Ue==="aprovada"?"aprovado":Ue==="suspensa"?"bloqueado":"atualizado"} com sucesso`}),oe()}catch(xt){Y({title:"Erro",description:xt.message,variant:"destructive"})}},ie=async(Re,Ue)=>{try{const{error:xt}=await Ee.from("cooperativas").update({pontuacao_confiabilidade:Ue}).eq("id",Re);if(xt)throw xt;Y({title:"Pontuao atualizada!"}),oe(),s(!1)}catch(xt){Y({title:"Erro",description:xt.message,variant:"destructive"})}},ce=async Re=>{if(confirm("Tem certeza que deseja excluir este operador? Esta ao no pode ser desfeita."))try{const{error:Ue}=await Ee.from("cooperativas").delete().eq("id",Re);if(Ue)throw Ue;Y({title:"Operador excludo!",description:"O operador foi removido do sistema"}),oe()}catch(Ue){Y({title:"Erro ao excluir",description:Ue.message,variant:"destructive"})}},me=async Re=>{try{const{data:Ue,error:xt}=await Ee.from("emails_cooperativas").select("*").eq("id_cooperativa",Re).order("data_envio",{ascending:!1});if(xt)throw xt;g(Ue||[])}catch(Ue){Y({title:"Erro ao carregar histrico",description:Ue.message,variant:"destructive"})}},he=async()=>{if(!r||!y){Y({title:"Email obrigatrio",description:"Por favor, informe um email vlido",variant:"destructive"});return}if(!y.includes("@")){Y({title:"Email invlido",description:"Por favor, informe um email vlido",variant:"destructive"});return}T(!0);try{const{error:Re}=await Ee.from("cooperativas").update({email:y}).eq("id",r.id);if(Re)throw Re;const{error:Ue}=await Ee.auth.resetPasswordForEmail(y,{redirectTo:Ng("/reset-password")});if(Ue)throw Ue;Y({title:"Sucesso! ",description:`Email atualizado para ${y} e link de reset enviado.`}),m(!1),w(""),oe()}catch(Re){Y({title:"Erro",description:Re.message,variant:"destructive"})}finally{T(!1)}},_e=async()=>{var Re,Ue;if(!PA(O.cnpj)){Y({title:"CNPJ invlido",description:"Por favor, verifique o CNPJ informado",variant:"destructive"});return}if(!O.razao_social||!O.nome_fantasia||!O.cep||!O.whatsapp||!O.email){Y({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios",variant:"destructive"});return}T(!0);try{const xt={cnpj:O.cnpj,razao_social:O.razao_social,nome_fantasia:O.nome_fantasia,email:O.email,cep:O.cep,logradouro:O.logradouro,numero:O.numero,complemento:O.complemento,bairro:O.bairro,cidade:O.cidade,uf:O.uf,whatsapp:O.whatsapp,tipo_operador:O.tipo_operador};O.capacidade_mensal_ton&&(xt.capacidade_mensal_ton=parseFloat(O.capacidade_mensal_ton));const{error:st}=await Ee.from("cooperativas").update(xt).eq("id",r.id);if(st)throw st;const{error:Xt}=await Ee.from("profiles").update({nome:O.nome_fantasia,cnpj:O.cnpj,cep:O.cep,logradouro:O.logradouro,numero:O.numero,complemento:O.complemento,bairro:O.bairro,cidade:O.cidade,uf:O.uf,telefone:O.whatsapp,tipo_pj:O.tipo_pj}).eq("id",r.id_user);Xt&&console.error("Erro ao atualizar profile:",Xt);const Jt=O.cep!==r.cep||O.logradouro!==r.logradouro||O.numero!==r.numero||O.cidade!==r.cidade||O.uf!==r.uf;let _r=!1;if(Jt)try{await Hkt(r.id),_r=!0}catch(lt){console.error("Erro ao geocodificar cooperativa:",lt),(Re=lt.message)!=null&&Re.includes("P0001")||(Ue=lt.message)!=null&&Ue.includes("duplicadas")?(console.warn(" Erro de coordenadas duplicadas (possivelmente da prpria cooperativa). Favor corrigir trigger no banco."),Y({title:"Aviso",description:"Dados atualizados, mas h um problema na validao de coordenadas duplicadas. O mapa pode no atualizar corretamente.",variant:"default",duration:5e3})):Y({title:"Aviso",description:"Dados atualizados, mas no foi possvel atualizar a localizao no mapa.",variant:"default"})}Y({title:"Operador atualizado!",description:_r?"Dados e localizao no mapa atualizados com sucesso":"Os dados cadastrais foram atualizados com sucesso"}),u(!1),await new Promise(lt=>setTimeout(lt,500)),oe()}catch(xt){Y({title:"Erro ao atualizar",description:xt.message,variant:"destructive"})}finally{T(!1)}},ue=async(Re,Ue,xt)=>{const st=Re.name.split(".").pop(),Xt=`${Ue}/${xt}_${Date.now()}.${st}`,{error:Jt}=await Ee.storage.from("cooperative-documents").upload(Xt,Re);if(Jt)throw Jt;const{data:{publicUrl:_r}}=Ee.storage.from("cooperative-documents").getPublicUrl(Xt);return _r},je=async()=>{if(!PA(O.cnpj)){Y({title:"CNPJ invlido",description:"Por favor, verifique o CNPJ informado",variant:"destructive"});return}if(!O.razao_social||!O.nome_fantasia||!O.cep||!O.whatsapp||!O.email){Y({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios, incluindo o email",variant:"destructive"});return}T(!0);try{const{data:Re,error:Ue}=await Ee.auth.signUp({email:O.email,password:Math.random().toString(36).slice(-12)+"A1!",options:{data:{nome:O.nome_fantasia,tipo_pessoa:"PJ",tipo_pj:O.tipo_pj,cnpj:O.cnpj,cep:O.cep,logradouro:O.logradouro,numero:O.numero,complemento:O.complemento,bairro:O.bairro,cidade:O.cidade,uf:O.uf,telefone:O.whatsapp,role:"cooperativa"}}});if(Ue)throw Ue;if(!Re.user)throw new Error("Falha ao criar usurio");await new Promise(Jt=>setTimeout(Jt,1e3));try{await Ee.rpc("confirmar_email_usuario",{usuario_id:Re.user.id})}catch(Jt){console.error("Erro ao confirmar email automaticamente:",Jt)}const{data:xt,error:st}=await Ee.from("cooperativas").insert({id_user:Re.user.id,cnpj:O.cnpj,razao_social:O.razao_social,nome_fantasia:O.nome_fantasia,email:O.email,cep:O.cep,logradouro:O.logradouro,numero:O.numero,complemento:O.complemento,bairro:O.bairro,cidade:O.cidade,uf:O.uf,whatsapp:O.whatsapp,capacidade_mensal_ton:O.capacidade_mensal_ton?parseFloat(O.capacidade_mensal_ton):null,tipo_operador:O.tipo_operador,status:"aprovada"}).select().single();if(st)throw st;if(M&&xt){const Jt=await ue(M,xt.id,"constituicao");await Ee.from("cooperativas").update({documento_constituicao_url:Jt}).eq("id",xt.id)}if(z&&xt){const Jt=await ue(z,xt.id,"representante");await Ee.from("cooperativas").update({documento_representante_url:Jt}).eq("id",xt.id)}try{await qkt(xt.id)}catch(Jt){console.error("Erro ao geocodificar cooperativa:",Jt),Y({title:"Aviso",description:"Cooperativa criada, mas no foi possvel obter a localizao automaticamente. Voc pode geocodificar depois.",variant:"default"})}const{error:Xt}=await Ee.auth.resetPasswordForEmail(O.email,{redirectTo:Ng("/reset-password")});Y(Xt?{title:"Operador criado!",description:"O operador foi cadastrado com sucesso"}:{title:"Operador criado com sucesso! ",description:`Email de reset de senha enviado para ${O.email}. O operador deve verificar a caixa de entrada.`}),l(!1),ye(),oe()}catch(Re){Y({title:"Erro ao criar operador",description:Re.message,variant:"destructive"})}finally{T(!1)}},ye=()=>{I({cnpj:"",razao_social:"",nome_fantasia:"",email:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:"",whatsapp:"",capacidade_mensal_ton:"",tipo_operador:"cooperativa",tipo_pj:"Outro"}),D(null),F(null)},Le=Re=>({aprovada:a.jsx(Bt,{className:"bg-success text-white",children:"Aprovada"}),pendente_aprovacao:a.jsx(Bt,{className:"bg-warning text-white",children:"Pendente"}),suspensa:a.jsx(Bt,{variant:"destructive",className:"text-white",children:"Bloqueada"})})[Re]||a.jsx(Bt,{className:"text-white",children:Re}),Ge=Re=>({cooperativa:a.jsx(Bt,{variant:"default",className:"bg-success text-white",children:"Cooperativa"}),rota_ciclik:a.jsx(Bt,{variant:"default",className:"bg-primary text-white",children:"Rota Ciclik"}),operador_parceiro:a.jsx(Bt,{variant:"default",className:"bg-secondary text-white",children:"Operador Parceiro"})})[Re]||a.jsx(Bt,{className:"text-white",children:Re}),Be=Re=>({cooperativa:"Cooperativa",rota_ciclik:"Rota Ciclik",operador_parceiro:"Operador Parceiro"})[Re]||Re,Te=Re=>{let Ue=Re==="all"?t:t.filter(xt=>xt.status===Re);return q&&(Ue=Ue.filter(xt=>xt.cnpj.includes(q))),re!=="all"&&(Ue=Ue.filter(xt=>xt.uf===re)),se!=="all"&&(Ue=Ue.filter(xt=>xt.tipo_operador===se)),Ue},ze=()=>{const Re=t.map(st=>{var Xt,Jt,_r,lt;return{Tipo:Be(st.tipo_operador),"Nome Fantasia":st.nome_fantasia,"Razo Social":st.razao_social,CNPJ:st.cnpj,CEP:st.cep,Logradouro:st.logradouro,Nmero:st.numero,Bairro:st.bairro,Cidade:st.cidade,UF:st.uf,WhatsApp:st.whatsapp,Status:st.status,Confiabilidade:st.pontuacao_confiabilidade,"Total Entregas":((Xt=S[st.id])==null?void 0:Xt.totalEntregas)||0,"Peso Total (kg)":((_r=(Jt=S[st.id])==null?void 0:Jt.pesoTotal)==null?void 0:_r.toFixed(2))||0,"Entregas Validadas":((lt=S[st.id])==null?void 0:lt.validadas)||0,"Data Cadastro":new Date(st.data_cadastro).toLocaleDateString("pt-BR")}}),Ue=NU.json_to_sheet(Re),xt=NU.book_new();NU.book_append_sheet(xt,Ue,"Operadores Logsticos"),kkt(xt,`operadores_logisticos_${new Date().toISOString().split("T")[0]}.xlsx`),Y({title:"Exportado com sucesso!",description:"Arquivo Excel baixado"})},tt=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>X("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Oe,{variant:"outline",onClick:ze,children:[a.jsx(ou,{className:"mr-2 h-4 w-4"}),"Exportar Excel"]}),a.jsxs(Oe,{onClick:()=>l(!0),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Novo Operador"]})]})]}),a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Gesto de Operadores Logsticos"}),a.jsx(it,{className:"mb-6",children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"search-cnpj",children:"Buscar por CNPJ"}),a.jsxs("div",{className:"relative",children:[a.jsx(Jp,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(mt,{id:"search-cnpj",placeholder:"Digite o CNPJ...",value:q,onChange:Re=>Q(Re.target.value),className:"pl-9"})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"search-uf",children:"Filtrar por Estado"}),a.jsxs("select",{id:"search-uf",value:re,onChange:Re=>Z(Re.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring",children:[a.jsx("option",{value:"all",children:"Todos os Estados"}),tt.map(Re=>a.jsx("option",{value:Re,children:Re},Re))]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"filter-tipo",children:"Filtrar por Tipo"}),a.jsxs(wi,{value:se,onValueChange:Re=>K(Re),children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Todos os tipos"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"all",children:"Todos os tipos"}),a.jsx(or,{value:"cooperativa",children:"Cooperativas"}),a.jsx(or,{value:"rota_ciclik",children:"Rotas Ciclik"}),a.jsx(or,{value:"operador_parceiro",children:"Operadores Parceiros"})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx(Oe,{variant:"outline",onClick:()=>{Q(""),Z("all"),K("all")},className:"w-full",children:"Limpar Filtros"})})]})})}),a.jsxs(yc,{defaultValue:"all",className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-4 mb-8",children:[a.jsx(ri,{value:"all",children:"Todos"}),a.jsx(ri,{value:"pendente_aprovacao",children:"Pendentes"}),a.jsx(ri,{value:"aprovada",children:"Aprovados"}),a.jsx(ri,{value:"suspensa",children:"Bloqueados"})]}),["all","pendente_aprovacao","aprovada","suspensa"].map(Re=>a.jsx(Ti,{value:Re,children:a.jsx(it,{children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Tipo"}),a.jsx(It,{children:"Nome Fantasia"}),a.jsx(It,{children:"Razo Social"}),a.jsx(It,{children:"CNPJ"}),a.jsx(It,{children:"Email"}),a.jsx(It,{children:"Cidade/UF"}),a.jsx(It,{className:"text-center",children:"Status"}),a.jsx(It,{className:"text-center",children:"Confiabilidade"}),a.jsx(It,{className:"text-center",children:"Entregas"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:Te(Re).length===0?a.jsx(Dn,{children:a.jsx(jt,{colSpan:10,className:"text-center text-muted-foreground h-32",children:"Nenhum operador encontrado"})}):Te(Re).map(Ue=>{var xt;return a.jsxs(Dn,{children:[a.jsx(jt,{children:Ge(Ue.tipo_operador)}),a.jsx(jt,{className:"font-medium",children:Ue.nome_fantasia}),a.jsx(jt,{children:Ue.razao_social}),a.jsx(jt,{className:"text-sm",children:Ue.cnpj}),a.jsx(jt,{className:"text-sm",children:Ue.email||"No informado"}),a.jsxs(jt,{className:"text-sm",children:[Ue.cidade,"/",Ue.uf]}),a.jsx(jt,{className:"text-center",children:Le(Ue.status)}),a.jsx(jt,{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(RM,{className:"h-4 w-4 text-warning fill-warning"}),a.jsx("span",{className:"font-semibold",children:Ue.pontuacao_confiabilidade||100})]})}),a.jsx(jt,{className:"text-center font-semibold",children:((xt=S[Ue.id])==null?void 0:xt.totalEntregas)||0}),a.jsx(jt,{className:"text-right",children:a.jsxs(nJ,{children:[a.jsx(iJ,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"sm",children:a.jsx(C0e,{className:"h-4 w-4"})})}),a.jsxs(bB,{align:"end",children:[Ue.status==="pendente_aprovacao"&&a.jsxs(Hl,{onClick:()=>J(Ue.id,"aprovada"),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),"Aprovar"]}),Ue.status==="aprovada"&&a.jsxs(Hl,{onClick:()=>J(Ue.id,"suspensa"),className:"text-destructive",children:[a.jsx(kRe,{className:"h-4 w-4 mr-2"}),"Bloquear"]}),Ue.status==="suspensa"&&a.jsxs(Hl,{onClick:()=>J(Ue.id,"aprovada"),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),"Desbloquear"]}),a.jsxs(Hl,{onClick:()=>{n(Ue),s(!0)},children:[a.jsx(RM,{className:"h-4 w-4 mr-2"}),"Ajustar Pontuao"]}),a.jsxs(Hl,{onClick:()=>{var st;n(Ue),I({cnpj:Ue.cnpj||"",razao_social:Ue.razao_social||"",nome_fantasia:Ue.nome_fantasia||"",email:Ue.email||"",cep:Ue.cep||"",logradouro:Ue.logradouro||"",numero:Ue.numero||"",complemento:Ue.complemento||"",bairro:Ue.bairro||"",cidade:Ue.cidade||"",uf:Ue.uf||"",whatsapp:Ue.whatsapp||"",capacidade_mensal_ton:((st=Ue.capacidade_mensal_ton)==null?void 0:st.toString())||"",tipo_operador:Ue.tipo_operador||"cooperativa",tipo_pj:Ue.tipo_pj||"Outro"}),u(!0)},children:[a.jsx(BC,{className:"h-4 w-4 mr-2"}),"Editar Dados Cadastrais"]}),a.jsxs(Hl,{onClick:()=>{n(Ue),w(Ue.email||""),m(!0)},children:[a.jsx(NA,{className:"h-4 w-4 mr-2"}),"Editar Email e Reenviar Convite"]}),a.jsxs(Hl,{onClick:()=>{n(Ue),me(Ue.id),h(!0)},children:[a.jsx(Ql,{className:"h-4 w-4 mr-2"}),"Histrico de Emails"]}),a.jsxs(Hl,{onClick:()=>ce(Ue.id),className:"text-destructive",children:[a.jsx(vl,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})})]},Ue.id)})})]})})},Re))]}),a.jsx(hs,{open:i,onOpenChange:s,children:a.jsxs(as,{children:[a.jsx(fs,{children:a.jsx(ms,{children:"Ajustar Pontuao de Confiabilidade"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Operador"}),a.jsx("p",{className:"text-sm",children:r==null?void 0:r.nome_fantasia})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"pontuacao",children:"Nova Pontuao (0-100)"}),a.jsx(mt,{id:"pontuacao",type:"number",min:"0",max:"100",defaultValue:(r==null?void 0:r.pontuacao_confiabilidade)||100,onChange:Re=>{r&&n({...r,pontuacao_confiabilidade:parseInt(Re.target.value)})}})]}),a.jsx(Oe,{onClick:()=>ie(r==null?void 0:r.id,r==null?void 0:r.pontuacao_confiabilidade),className:"w-full",children:"Atualizar"})]})]})}),a.jsx(hs,{open:o,onOpenChange:l,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Cadastrar Novo Operador Logstico"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"tipo_operador",children:"Tipo de Operador *"}),a.jsxs(wi,{value:O.tipo_operador,onValueChange:Re=>I({...O,tipo_operador:Re}),children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o tipo"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"cooperativa",children:"Cooperativa"}),a.jsx(or,{value:"rota_ciclik",children:"Rota Ciclik"}),a.jsx(or,{value:"operador_parceiro",children:"Operador Parceiro"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"cnpj",children:"CNPJ *"}),a.jsx(mt,{id:"cnpj",value:O.cnpj,onChange:Re=>I({...O,cnpj:D3(Re.target.value)}),placeholder:"00.000.000/0000-00",maxLength:18})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"whatsapp",children:"WhatsApp *"}),a.jsx(mt,{id:"whatsapp",value:O.whatsapp,onChange:Re=>I({...O,whatsapp:M3(Re.target.value)}),placeholder:"(00) 00000-0000",maxLength:15})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"razao_social",children:"Razo Social *"}),a.jsx(mt,{id:"razao_social",value:O.razao_social,onChange:Re=>I({...O,razao_social:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"nome_fantasia",children:"Nome Fantasia *"}),a.jsx(mt,{id:"nome_fantasia",value:O.nome_fantasia,onChange:Re=>I({...O,nome_fantasia:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"email",children:"Email *"}),a.jsx(mt,{id:"email",type:"email",value:O.email,onChange:Re=>I({...O,email:Re.target.value}),placeholder:"email@operador.com"})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"tipo_pj",children:"Tipo de Organizao *"}),a.jsxs("select",{id:"tipo_pj",value:O.tipo_pj,onChange:Re=>I({...O,tipo_pj:Re.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring",children:[a.jsx("option",{value:"Condominio",children:"Condomnio"}),a.jsx("option",{value:"Restaurante",children:"Restaurante"}),a.jsx("option",{value:"Comercio",children:"Comrcio"}),a.jsx("option",{value:"Servico",children:"Servio"}),a.jsx("option",{value:"Industria",children:"Indstria"}),a.jsx("option",{value:"Outro",children:"Outro"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(nt,{htmlFor:"cep",children:["CEP * ",j&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"(buscando...)"})]}),a.jsx(mt,{id:"cep",value:O.cep,onChange:Re=>{const Ue=L3(Re.target.value);I({...O,cep:Ue}),Ue.replace(/\D/g,"").length===8&&xe(Ue)},placeholder:"00000-000",maxLength:9,disabled:j,className:j?"animate-pulse":""}),O.cep&&O.cep.replace(/\D/g,"").length===8&&O.logradouro&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Endereo preenchido automaticamente"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"logradouro",children:"Logradouro"}),a.jsx(mt,{id:"logradouro",value:O.logradouro,onChange:Re=>I({...O,logradouro:Re.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"numero",children:"Nmero"}),a.jsx(mt,{id:"numero",value:O.numero,onChange:Re=>I({...O,numero:Re.target.value})})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"complemento",children:"Complemento"}),a.jsx(mt,{id:"complemento",value:O.complemento,onChange:Re=>I({...O,complemento:Re.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"bairro",children:"Bairro"}),a.jsx(mt,{id:"bairro",value:O.bairro,onChange:Re=>I({...O,bairro:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"cidade",children:"Cidade"}),a.jsx(mt,{id:"cidade",value:O.cidade,onChange:Re=>I({...O,cidade:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"uf",children:"UF"}),a.jsx(mt,{id:"uf",value:O.uf,onChange:Re=>I({...O,uf:Re.target.value.toUpperCase()}),maxLength:2})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"capacidade",children:"Capacidade Mensal (toneladas)"}),a.jsx(mt,{id:"capacidade",type:"text",value:_D(O.capacidade_mensal_ton),onChange:Re=>{const Ue=_D(Re.target.value),xt=Yue(Ue);I({...O,capacidade_mensal_ton:xt})},placeholder:"0,00"})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"doc_constituicao",children:"Documento de Constituio"}),a.jsx(mt,{id:"doc_constituicao",type:"file",onChange:Re=>{var Ue;return D(((Ue=Re.target.files)==null?void 0:Ue[0])||null)},accept:".pdf,.jpg,.jpeg,.png"})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"doc_representante",children:"Documento do Representante"}),a.jsx(mt,{id:"doc_representante",type:"file",onChange:Re=>{var Ue;return F(((Ue=Re.target.files)==null?void 0:Ue[0])||null)},accept:".pdf,.jpg,.jpeg,.png"})]}),a.jsx(Oe,{onClick:je,disabled:j,className:"w-full",children:j?"Criando...":"Criar Operador"})]})]})}),a.jsx(hs,{open:c,onOpenChange:u,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Editar Dados Cadastrais do Operador"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_tipo_operador",children:"Tipo de Operador *"}),a.jsxs(wi,{value:O.tipo_operador,onValueChange:Re=>I({...O,tipo_operador:Re}),children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o tipo"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"cooperativa",children:"Cooperativa"}),a.jsx(or,{value:"rota_ciclik",children:"Rota Ciclik"}),a.jsx(or,{value:"operador_parceiro",children:"Operador Parceiro"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_cnpj",children:"CNPJ *"}),a.jsx(mt,{id:"edit_cnpj",value:O.cnpj,onChange:Re=>I({...O,cnpj:D3(Re.target.value)}),placeholder:"00.000.000/0000-00",maxLength:18})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_whatsapp",children:"WhatsApp *"}),a.jsx(mt,{id:"edit_whatsapp",value:O.whatsapp,onChange:Re=>I({...O,whatsapp:M3(Re.target.value)}),placeholder:"(00) 00000-0000",maxLength:15})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_razao_social",children:"Razo Social *"}),a.jsx(mt,{id:"edit_razao_social",value:O.razao_social,onChange:Re=>I({...O,razao_social:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_nome_fantasia",children:"Nome Fantasia *"}),a.jsx(mt,{id:"edit_nome_fantasia",value:O.nome_fantasia,onChange:Re=>I({...O,nome_fantasia:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_email",children:"Email *"}),a.jsx(mt,{id:"edit_email",type:"email",value:O.email,onChange:Re=>I({...O,email:Re.target.value}),placeholder:"email@operador.com"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Nota: Para reenviar convite com novo email, use a opo "Editar Email e Reenviar Convite"'})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_tipo_pj",children:"Tipo de Organizao *"}),a.jsxs("select",{id:"edit_tipo_pj",value:O.tipo_pj,onChange:Re=>I({...O,tipo_pj:Re.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring",children:[a.jsx("option",{value:"Condominio",children:"Condomnio"}),a.jsx("option",{value:"Restaurante",children:"Restaurante"}),a.jsx("option",{value:"Comercio",children:"Comrcio"}),a.jsx("option",{value:"Servico",children:"Servio"}),a.jsx("option",{value:"Industria",children:"Indstria"}),a.jsx("option",{value:"Outro",children:"Outro"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(nt,{htmlFor:"edit_cep",children:["CEP * ",j&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"(buscando...)"})]}),a.jsx(mt,{id:"edit_cep",value:O.cep,onChange:Re=>{const Ue=L3(Re.target.value);I({...O,cep:Ue}),Ue.replace(/\D/g,"").length===8&&xe(Ue)},placeholder:"00000-000",maxLength:9,disabled:j,className:j?"animate-pulse":""}),O.cep&&O.cep.replace(/\D/g,"").length===8&&O.logradouro&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Endereo preenchido automaticamente"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"edit_logradouro",children:"Logradouro"}),a.jsx(mt,{id:"edit_logradouro",value:O.logradouro,onChange:Re=>I({...O,logradouro:Re.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_numero",children:"Nmero"}),a.jsx(mt,{id:"edit_numero",value:O.numero,onChange:Re=>I({...O,numero:Re.target.value})})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"edit_complemento",children:"Complemento"}),a.jsx(mt,{id:"edit_complemento",value:O.complemento,onChange:Re=>I({...O,complemento:Re.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_bairro",children:"Bairro"}),a.jsx(mt,{id:"edit_bairro",value:O.bairro,onChange:Re=>I({...O,bairro:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_cidade",children:"Cidade"}),a.jsx(mt,{id:"edit_cidade",value:O.cidade,onChange:Re=>I({...O,cidade:Re.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_uf",children:"UF"}),a.jsx(mt,{id:"edit_uf",value:O.uf,onChange:Re=>I({...O,uf:Re.target.value.toUpperCase()}),maxLength:2})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_capacidade",children:"Capacidade Mensal (toneladas)"}),a.jsx(mt,{id:"edit_capacidade",type:"text",value:_D(O.capacidade_mensal_ton),onChange:Re=>{const Ue=_D(Re.target.value),xt=Yue(Ue);I({...O,capacidade_mensal_ton:xt})},placeholder:"0,00"})]}),a.jsx(Oe,{onClick:_e,disabled:j,className:"w-full",children:j?"Atualizando...":"Salvar Alteraes"})]})]})}),a.jsx(hs,{open:f,onOpenChange:m,children:a.jsxs(as,{children:[a.jsx(fs,{children:a.jsx(ms,{children:"Editar Email e Reenviar Convite"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Operador"}),a.jsx("p",{className:"text-sm",children:r==null?void 0:r.nome_fantasia})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"novo_email",children:"Novo Email"}),a.jsx(mt,{id:"novo_email",type:"email",value:y,onChange:Re=>w(Re.target.value),placeholder:"novo@email.com"})]}),a.jsx(Oe,{onClick:he,disabled:j,className:"w-full",children:j?"Processando...":"Atualizar e Reenviar Convite"})]})]})}),a.jsx(hs,{open:d,onOpenChange:h,children:a.jsxs(as,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[a.jsx(fs,{children:a.jsxs(ms,{children:["Histrico de Emails - ",r==null?void 0:r.nome_fantasia]})}),a.jsx("div",{className:"space-y-4",children:x.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum email enviado"}):a.jsx("div",{className:"space-y-4",children:x.map(Re=>a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:Re.assunto}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Re.tipo_email})]}),a.jsx(Bt,{className:Re.status_envio==="enviado"?"bg-success":"bg-destructive",children:Re.status_envio})]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Para:"})," ",Re.email_destino]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Data:"})," ",new Date(Re.data_envio).toLocaleString("pt-BR")]}),Re.mensagem_erro&&a.jsxs("p",{className:"text-sm text-destructive",children:[a.jsx("strong",{children:"Erro:"})," ",Re.mensagem_erro]})]})})},Re.id))})})]})})]})})}function Gkt(){const[t,e]=C.useState([]),[r,n]=C.useState(!1),[i,s]=C.useState(!1),[o,l]=C.useState({cnpj:"",razao_social:"",nome_fantasia:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:"",telefone:"",tipo_empresa:"marketplace",plano_atual:""}),c=nn(),{toast:u}=Qi();C.useEffect(()=>{d()},[]);const d=async()=>{const{data:g}=await Ee.from("empresas").select(`
        *,
        profiles:id_user (nome, email, telefone, cnpj)
      `).order("created_at",{ascending:!1});g&&e(g)},h=async g=>{if(confirm("Tem certeza que deseja excluir esta empresa? Esta ao no pode ser desfeita."))try{const{error:y}=await Ee.from("empresas").delete().eq("id",g);if(y)throw y;u({title:"Empresa excluda!",description:"A empresa foi removida do sistema"}),d()}catch(y){u({title:"Erro ao excluir",description:y.message,variant:"destructive"})}},f=async()=>{if(!PA(o.cnpj)){u({title:"CNPJ invlido",description:"Por favor, verifique o CNPJ informado",variant:"destructive"});return}if(!o.razao_social||!o.nome_fantasia||!o.cep||!o.telefone){u({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios",variant:"destructive"});return}s(!0);try{const g=`empresa_${o.cnpj.replace(/\D/g,"")}@temp.com`,{data:y,error:w}=await Ee.auth.signUp({email:g,password:Math.random().toString(36).slice(-12)+"A1!",options:{data:{nome:o.nome_fantasia,tipo_pessoa:"PJ",cnpj:o.cnpj,cep:o.cep,logradouro:o.logradouro,numero:o.numero,complemento:o.complemento,bairro:o.bairro,cidade:o.cidade,uf:o.uf,telefone:o.telefone,tipo_pj:"empresa",role:"empresa"}}});if(w)throw w;if(!y.user)throw new Error("Falha ao criar usurio");const{error:S}=await Ee.from("user_roles").insert({user_id:y.user.id,role:"empresa"});if(S)throw S;const{error:E}=await Ee.from("empresas").insert({id_user:y.user.id,tipo_empresa:o.tipo_empresa,plano_atual:o.plano_atual||null});if(E)throw E;u({title:"Empresa criada!",description:"A empresa foi cadastrada com sucesso"}),n(!1),m(),d()}catch(g){u({title:"Erro ao criar empresa",description:g.message,variant:"destructive"})}finally{s(!1)}},m=()=>{l({cnpj:"",razao_social:"",nome_fantasia:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:"",telefone:"",tipo_empresa:"marketplace",plano_atual:""})},x=g=>({marketplace:a.jsx(Bt,{className:"bg-primary",children:"Marketplace"}),fabricante:a.jsx(Bt,{className:"bg-accent",children:"Fabricante"}),varejista:a.jsx(Bt,{className:"bg-secondary",children:"Varejista"})})[g]||a.jsx(Bt,{children:g});return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>c("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Gerenciar Empresas"}),a.jsx("p",{className:"text-muted-foreground",children:"Visualize e gerencie empresas parceiras"})]}),a.jsxs(Oe,{onClick:()=>n(!0),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Nova Empresa"]})]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(g=>{var y,w,S,E;return a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:((y=g.profiles)==null?void 0:y.nome)||"Nome no disponvel"}),a.jsxs(gr,{children:["CNPJ: ",((w=g.profiles)==null?void 0:w.cnpj)||"N/A"]})]}),x(g.tipo_empresa)]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[a.jsx(eu,{className:"h-4 w-4"}),"Informaes"]}),((S=g.profiles)==null?void 0:S.email)&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Email: ",g.profiles.email]}),((E=g.profiles)==null?void 0:E.telefone)&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Telefone: ",g.profiles.telefone]}),g.plano_atual&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Plano: ",g.plano_atual]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[a.jsx(Hs,{className:"h-4 w-4"}),"Mtricas"]}),a.jsxs("div",{className:"space-y-2",children:[g.percentual_faturamento_verde!==null&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Faturamento Verde:"}),a.jsxs("span",{className:"font-semibold",children:[g.percentual_faturamento_verde,"%"]})]}),g.percentual_recuperacao!==null&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Taxa Recuperao:"}),a.jsxs("span",{className:"font-semibold",children:[g.percentual_recuperacao,"%"]})]}),g.nivel_selo_venda_limpa&&g.nivel_selo_venda_limpa!=="Nenhum"&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Selo Venda Limpa:"}),a.jsx("span",{className:"font-semibold",children:g.nivel_selo_venda_limpa})]}),g.nivel_selo_origem&&g.nivel_selo_origem!=="Nenhum"&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Selo Origem:"}),a.jsx("span",{className:"font-semibold",children:g.nivel_selo_origem})]})]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>c(`/admin/companies/${g.id}/metrics`),children:[a.jsx(D_,{className:"mr-2 h-4 w-4"}),"Ver Mtricas"]}),a.jsxs(Oe,{size:"sm",variant:"destructive",onClick:()=>h(g.id),children:[a.jsx(vl,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})]},g.id)}),t.length===0&&a.jsx(it,{children:a.jsx(ht,{className:"py-8 text-center text-muted-foreground",children:"Nenhuma empresa cadastrada ainda."})})]}),a.jsx(hs,{open:r,onOpenChange:n,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Cadastrar Nova Empresa"}),a.jsx(Sl,{children:"Adicione uma nova empresa parceira ao sistema"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"cnpj",children:"CNPJ *"}),a.jsx(mt,{id:"cnpj",value:o.cnpj,onChange:g=>l({...o,cnpj:D3(g.target.value)}),placeholder:"00.000.000/0000-00",maxLength:18})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"telefone",children:"Telefone *"}),a.jsx(mt,{id:"telefone",value:o.telefone,onChange:g=>l({...o,telefone:M3(g.target.value)}),placeholder:"(00) 00000-0000",maxLength:15})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"razao_social",children:"Razo Social *"}),a.jsx(mt,{id:"razao_social",value:o.razao_social,onChange:g=>l({...o,razao_social:g.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"nome_fantasia",children:"Nome Fantasia *"}),a.jsx(mt,{id:"nome_fantasia",value:o.nome_fantasia,onChange:g=>l({...o,nome_fantasia:g.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"tipo_empresa",children:"Tipo de Empresa *"}),a.jsxs(wi,{value:o.tipo_empresa,onValueChange:g=>l({...o,tipo_empresa:g}),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"marketplace",children:"Marketplace"}),a.jsx(or,{value:"fabricante",children:"Fabricante"}),a.jsx(or,{value:"varejista",children:"Varejista"})]})]})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"plano_atual",children:"Plano Atual"}),a.jsx(mt,{id:"plano_atual",value:o.plano_atual,onChange:g=>l({...o,plano_atual:g.target.value}),placeholder:"Ex: Premium, Bsico, etc."})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"cep",children:"CEP *"}),a.jsx(mt,{id:"cep",value:o.cep,onChange:g=>l({...o,cep:L3(g.target.value)}),placeholder:"00000-000",maxLength:9})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"logradouro",children:"Logradouro"}),a.jsx(mt,{id:"logradouro",value:o.logradouro,onChange:g=>l({...o,logradouro:g.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"numero",children:"Nmero"}),a.jsx(mt,{id:"numero",value:o.numero,onChange:g=>l({...o,numero:g.target.value})})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"complemento",children:"Complemento"}),a.jsx(mt,{id:"complemento",value:o.complemento,onChange:g=>l({...o,complemento:g.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"bairro",children:"Bairro"}),a.jsx(mt,{id:"bairro",value:o.bairro,onChange:g=>l({...o,bairro:g.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"cidade",children:"Cidade"}),a.jsx(mt,{id:"cidade",value:o.cidade,onChange:g=>l({...o,cidade:g.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"uf",children:"UF"}),a.jsx(mt,{id:"uf",value:o.uf,onChange:g=>l({...o,uf:g.target.value.toUpperCase()}),maxLength:2})]})]}),a.jsx(Oe,{onClick:f,className:"w-full",disabled:i,children:i?"Criando...":"Criar Empresa"})]})]})})]})})}var Qn=function(){return Qn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qn.apply(this,arguments)};function Kkt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function IAe(t,e,r){for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function RI(t){return t.mode==="multiple"}function DI(t){return t.mode==="range"}function TB(t){return t.mode==="single"}var Xkt={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ykt(t,e){return Mi(t,"LLLL y",e)}function Zkt(t,e){return Mi(t,"d",e)}function Qkt(t,e){return Mi(t,"LLLL",e)}function Jkt(t){return"".concat(t)}function eOt(t,e){return Mi(t,"cccccc",e)}function tOt(t,e){return Mi(t,"yyyy",e)}var rOt=Object.freeze({__proto__:null,formatCaption:Ykt,formatDay:Zkt,formatMonthCaption:Qkt,formatWeekNumber:Jkt,formatWeekdayName:eOt,formatYearCaption:tOt}),nOt=function(t,e,r){return Mi(t,"do MMMM (EEEE)",r)},iOt=function(){return"Month: "},sOt=function(){return"Go to next month"},aOt=function(){return"Go to previous month"},oOt=function(t,e){return Mi(t,"cccc",e)},lOt=function(t){return"Week n. ".concat(t)},cOt=function(){return"Year: "},uOt=Object.freeze({__proto__:null,labelDay:nOt,labelMonthDropdown:iOt,labelNext:sOt,labelPrevious:aOt,labelWeekNumber:lOt,labelWeekday:oOt,labelYearDropdown:cOt});function dOt(){var t="buttons",e=Xkt,r=_Z,n={},i={},s=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:rOt,labels:uOt,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:s,styles:o,today:l,mode:"default"}}function hOt(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,i=t.toMonth,s=t.fromDate,o=t.toDate;return n?s=ru(n):e&&(s=new Date(e,0,1)),i?o=G_(i):r&&(o=new Date(r,11,31)),{fromDate:s?W_(s):void 0,toDate:o?W_(o):void 0}}var RAe=C.createContext(void 0);function fOt(t){var e,r=t.initialProps,n=dOt(),i=hOt(r),s=i.fromDate,o=i.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(TB(r)||RI(r)||DI(r))&&(c=r.onSelect);var u=Qn(Qn(Qn({},n),r),{captionLayout:l,classNames:Qn(Qn({},n.classNames),r.classNames),components:Qn({},r.components),formatters:Qn(Qn({},n.formatters),r.formatters),fromDate:s,labels:Qn(Qn({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Qn(Qn({},n.modifiers),r.modifiers),modifiersClassNames:Qn(Qn({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Qn(Qn({},n.styles),r.styles),toDate:o});return a.jsx(RAe.Provider,{value:u,children:t.children})}function _a(){var t=C.useContext(RAe);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function DAe(t){var e=_a(),r=e.locale,n=e.classNames,i=e.styles,s=e.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:r})})}function mOt(t){return a.jsx("svg",Qn({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function MAe(t){var e,r,n=t.onChange,i=t.value,s=t.children,o=t.caption,l=t.className,c=t.style,u=_a(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:mOt;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:n,children:s}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function pOt(t){var e,r=_a(),n=r.fromDate,i=r.toDate,s=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});var h=[];if(ZXe(n,i))for(var f=ru(n),m=n.getMonth();m<=i.getMonth();m++)h.push(I$(f,m));else for(var f=ru(new Date),m=0;m<=11;m++)h.push(I$(f,m));var x=function(y){var w=Number(y.target.value),S=I$(ru(t.displayMonth),w);t.onChange(S)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:MAe;return a.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:x,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(y){return a.jsx("option",{value:y.getMonth(),children:l(y,{locale:o})},y.getMonth())})})}function gOt(t){var e,r=t.displayMonth,n=_a(),i=n.fromDate,s=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,f=[];if(!i)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});for(var m=i.getFullYear(),x=s.getFullYear(),g=m;g<=x;g++)f.push(Use(kbe(new Date),g));var y=function(S){var E=Use(ru(r),Number(S.target.value));t.onChange(E)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:MAe;return a.jsx(w,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:y,value:r.getFullYear(),caption:d(r,{locale:o}),children:f.map(function(S){return a.jsx("option",{value:S.getFullYear(),children:d(S,{locale:o})},S.getFullYear())})})}function xOt(t,e){var r=C.useState(t),n=r[0],i=r[1],s=e===void 0?n:e;return[s,i]}function vOt(t){var e=t.month,r=t.defaultMonth,n=t.today,i=e||r||n||new Date,s=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(s&&BA(s,i)<0){var u=-1*(c-1);i=Mm(s,u)}return o&&BA(i,o)<0&&(i=o),ru(i)}function yOt(){var t=_a(),e=vOt(t),r=xOt(e,t.month),n=r[0],i=r[1],s=function(o){var l;if(!t.disableNavigation){var c=ru(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,s]}function bOt(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,i=ru(t),s=ru(Mm(i,n)),o=BA(s,i),l=[],c=0;c<o;c++){var u=Mm(i,c);l.push(u)}return r&&(l=l.reverse()),l}function wOt(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=n?s:1,l=ru(t);if(!r)return Mm(l,o);var c=BA(r,t);if(!(c<s))return Mm(l,o)}}function _Ot(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=n?s:1,l=ru(t);if(!r)return Mm(l,-o);var c=BA(l,r);if(!(c<=0))return Mm(l,-o)}}var LAe=C.createContext(void 0);function NOt(t){var e=_a(),r=yOt(),n=r[0],i=r[1],s=bOt(n,e),o=wOt(n,e),l=_Ot(n,e),c=function(h){return s.some(function(f){return NZ(h,f)})},u=function(h,f){c(h)||(f&&Fbe(h,f)?i(Mm(h,1+e.numberOfMonths*-1)):i(h))},d={currentMonth:n,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return a.jsx(LAe.Provider,{value:d,children:t.children})}function MI(){var t=C.useContext(LAe);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Zue(t){var e,r=_a(),n=r.classNames,i=r.styles,s=r.components,o=MI().goToMonth,l=function(d){o(Mm(d,t.displayIndex?-t.displayIndex:0))},c=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:DAe,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:u}),a.jsx(pOt,{onChange:l,displayMonth:t.displayMonth}),a.jsx(gOt,{onChange:l,displayMonth:t.displayMonth})]})}function SOt(t){return a.jsx("svg",Qn({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function EOt(t){return a.jsx("svg",Qn({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ML=C.forwardRef(function(t,e){var r=_a(),n=r.classNames,i=r.styles,s=[n.button_reset,n.button];t.className&&s.push(t.className);var o=s.join(" "),l=Qn(Qn({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),a.jsx("button",Qn({},t,{ref:e,type:"button",className:o,style:l}))});function jOt(t){var e,r,n=_a(),i=n.dir,s=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var f=u(t.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),x=d(t.nextMonth,{locale:s}),g=[o.nav_button,o.nav_button_next].join(" "),y=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:EOt,w=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:SOt;return a.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx(ML,{name:"previous-month","aria-label":f,className:m,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?a.jsx(y,{className:o.nav_icon,style:l.nav_icon}):a.jsx(w,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx(ML,{name:"next-month","aria-label":x,className:g,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?a.jsx(w,{className:o.nav_icon,style:l.nav_icon}):a.jsx(y,{className:o.nav_icon,style:l.nav_icon})})]})}function Que(t){var e=_a().numberOfMonths,r=MI(),n=r.previousMonth,i=r.nextMonth,s=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(x){return NZ(t.displayMonth,x)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),f=function(){n&&s(n)},m=function(){i&&s(i)};return a.jsx(jOt,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:i,previousMonth:n,onPreviousClick:f,onNextClick:m})}function AOt(t){var e,r=_a(),n=r.classNames,i=r.disableNavigation,s=r.styles,o=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:DAe,u;return i?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=a.jsx(Zue,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(Zue,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(Que,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(Que,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:n.caption,style:s.caption,children:u})}function COt(t){var e=_a(),r=e.footer,n=e.styles,i=e.classNames.tfoot;return r?a.jsx("tfoot",{className:i,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:r})})}):a.jsx(a.Fragment,{})}function TOt(t,e,r){for(var n=r?H_(new Date):Ig(new Date,{locale:t,weekStartsOn:e}),i=[],s=0;s<7;s++){var o=pd(n,s);i.push(o)}return i}function POt(){var t=_a(),e=t.classNames,r=t.styles,n=t.showWeekNumber,i=t.locale,s=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=TOt(i,s,o);return a.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&a.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},h)})]})}function kOt(){var t,e=_a(),r=e.classNames,n=e.styles,i=e.components,s=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:POt;return a.jsx("thead",{style:n.head,className:r.head,children:a.jsx(s,{})})}function OOt(t){var e=_a(),r=e.locale,n=e.formatters.formatDay;return a.jsx(a.Fragment,{children:n(t.date,{locale:r})})}var jJ=C.createContext(void 0);function IOt(t){if(!RI(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(jJ.Provider,{value:e,children:t.children})}return a.jsx(ROt,{initialProps:t.initialProps,children:t.children})}function ROt(t){var e=t.initialProps,r=t.children,n=e.selected,i=e.min,s=e.max,o=function(u,d,h){var f,m;(f=e.onDayClick)===null||f===void 0||f.call(e,u,d,h);var x=!!(d.selected&&i&&(n==null?void 0:n.length)===i);if(!x){var g=!!(!d.selected&&s&&(n==null?void 0:n.length)===s);if(!g){var y=n?IAe([],n):[];if(d.selected){var w=y.findIndex(function(S){return Vu(u,S)});y.splice(w,1)}else y.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,y,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=s&&n.length>s-1,h=n.some(function(f){return Vu(f,u)});return!!(d&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return a.jsx(jJ.Provider,{value:c,children:r})}function AJ(){var t=C.useContext(jJ);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function DOt(t,e){var r=e||{},n=r.from,i=r.to;return n&&i?Vu(i,t)&&Vu(n,t)?void 0:Vu(i,t)?{from:i,to:void 0}:Vu(n,t)?void 0:Uq(n,t)?{from:t,to:i}:{from:n,to:t}:i?Uq(t,i)?{from:i,to:t}:{from:t,to:i}:n?Fbe(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var CJ=C.createContext(void 0);function MOt(t){if(!DI(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(CJ.Provider,{value:e,children:t.children})}return a.jsx(LOt,{initialProps:t.initialProps,children:t.children})}function LOt(t){var e=t.initialProps,r=t.children,n=e.selected,i=n||{},s=i.from,o=i.to,l=e.min,c=e.max,u=function(m,x,g){var y,w;(y=e.onDayClick)===null||y===void 0||y.call(e,m,x,g);var S=DOt(m,n);(w=e.onSelect)===null||w===void 0||w.call(e,S,m,x,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],Vu(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:zl(s,l-1),before:pd(s,l-1)}),s&&o&&d.disabled.push({after:s,before:pd(s,l-1)}),!s&&o&&d.disabled.push({after:zl(o,l-1),before:pd(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:pd(s,-c+1)}),d.disabled.push({after:pd(s,c-1)})),s&&o){var h=pg(o,s)+1,f=c-h;d.disabled.push({before:zl(s,f)}),d.disabled.push({after:pd(o,f)})}!s&&o&&(d.disabled.push({before:pd(o,-c+1)}),d.disabled.push({after:pd(o,c-1)}))}return a.jsx(CJ.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function TJ(){var t=C.useContext(CJ);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function S6(t){return Array.isArray(t)?IAe([],t):t!==void 0?[t]:[]}function FOt(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],i=r[1];e[n]=S6(i)}),e}var n0;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(n0||(n0={}));var BOt=n0.Selected,Jg=n0.Disabled,$Ot=n0.Hidden,UOt=n0.Today,SU=n0.RangeEnd,EU=n0.RangeMiddle,jU=n0.RangeStart,zOt=n0.Outside;function VOt(t,e,r){var n,i=(n={},n[BOt]=S6(t.selected),n[Jg]=S6(t.disabled),n[$Ot]=S6(t.hidden),n[UOt]=[t.today],n[SU]=[],n[EU]=[],n[jU]=[],n[zOt]=[],n);return t.fromDate&&i[Jg].push({before:t.fromDate}),t.toDate&&i[Jg].push({after:t.toDate}),RI(t)?i[Jg]=i[Jg].concat(e.modifiers[Jg]):DI(t)&&(i[Jg]=i[Jg].concat(r.modifiers[Jg]),i[jU]=r.modifiers[jU],i[EU]=r.modifiers[EU],i[SU]=r.modifiers[SU]),i}var FAe=C.createContext(void 0);function qOt(t){var e=_a(),r=AJ(),n=TJ(),i=VOt(e,r,n),s=FOt(e.modifiers),o=Qn(Qn({},i),s);return a.jsx(FAe.Provider,{value:o,children:t.children})}function BAe(){var t=C.useContext(FAe);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function HOt(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function WOt(t){return!!(t&&typeof t=="object"&&"from"in t)}function GOt(t){return!!(t&&typeof t=="object"&&"after"in t)}function KOt(t){return!!(t&&typeof t=="object"&&"before"in t)}function XOt(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function YOt(t,e){var r,n=e.from,i=e.to;if(n&&i){var s=pg(i,n)<0;s&&(r=[i,n],n=r[0],i=r[1]);var o=pg(t,n)>=0&&pg(i,t)>=0;return o}return i?Vu(i,t):n?Vu(n,t):!1}function ZOt(t){return bZ(t)}function QOt(t){return Array.isArray(t)&&t.every(bZ)}function JOt(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(ZOt(r))return Vu(t,r);if(QOt(r))return r.includes(t);if(WOt(r))return YOt(t,r);if(XOt(r))return r.dayOfWeek.includes(t.getDay());if(HOt(r)){var n=pg(r.before,t),i=pg(r.after,t),s=n>0,o=i<0,l=Uq(r.before,r.after);return l?o&&s:s||o}return GOt(r)?pg(t,r.after)>0:KOt(r)?pg(r.before,t)>0:typeof r=="function"?r(t):!1})}function PJ(t,e,r){var n=Object.keys(e).reduce(function(s,o){var l=e[o];return JOt(t,l)&&s.push(o),s},[]),i={};return n.forEach(function(s){return i[s]=!0}),r&&!NZ(t,r)&&(i.outside=!0),i}function eIt(t,e){for(var r=ru(t[0]),n=G_(t[t.length-1]),i,s,o=r;o<=n;){var l=PJ(o,e),c=!l.disabled&&!l.hidden;if(!c){o=pd(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),i||(i=o),o=pd(o,1)}return s||i}var tIt=365;function $Ae(t,e){var r=e.moveBy,n=e.direction,i=e.context,s=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,h=i.locale,f={day:pd,week:Bq,month:Mm,year:UKe,startOfWeek:function(y){return i.ISOWeek?H_(y):Ig(y,{locale:h,weekStartsOn:c})},endOfWeek:function(y){return i.ISOWeek?Obe(y):wZ(y,{locale:h,weekStartsOn:c})}},m=f[r](t,n==="after"?1:-1);n==="before"&&u?m=zKe([u,m]):n==="after"&&d&&(m=VKe([d,m]));var x=!0;if(s){var g=PJ(m,s);x=!g.disabled&&!g.hidden}return x?m:l.count>tIt?l.lastFocused:$Ae(m,{moveBy:r,direction:n,context:i,modifiers:s,retry:Qn(Qn({},l),{count:l.count+1})})}var UAe=C.createContext(void 0);function rIt(t){var e=MI(),r=BAe(),n=C.useState(),i=n[0],s=n[1],o=C.useState(),l=o[0],c=o[1],u=eIt(e.displayMonths,r),d=i??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(i),s(void 0)},f=function(y){s(y)},m=_a(),x=function(y,w){if(i){var S=$Ae(i,{moveBy:y,direction:w,context:m,modifiers:r});Vu(i,S)||(e.goToDate(S,i),f(S))}},g={focusedDay:i,focusTarget:d,blur:h,focus:f,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return a.jsx(UAe.Provider,{value:g,children:t.children})}function kJ(){var t=C.useContext(UAe);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function nIt(t,e){var r=BAe(),n=PJ(t,r,e);return n}var OJ=C.createContext(void 0);function iIt(t){if(!TB(t.initialProps)){var e={selected:void 0};return a.jsx(OJ.Provider,{value:e,children:t.children})}return a.jsx(sIt,{initialProps:t.initialProps,children:t.children})}function sIt(t){var e=t.initialProps,r=t.children,n=function(s,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,s,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,s,s,o,l)},i={selected:e.selected,onDayClick:n};return a.jsx(OJ.Provider,{value:i,children:r})}function zAe(){var t=C.useContext(OJ);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function aIt(t,e){var r=_a(),n=zAe(),i=AJ(),s=TJ(),o=kJ(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,f=o.focus,m=o.focusMonthBefore,x=o.focusMonthAfter,g=o.focusYearBefore,y=o.focusYearAfter,w=o.focusStartOfWeek,S=o.focusEndOfWeek,E=function(K){var X,Y,oe,xe;TB(r)?(X=n.onDayClick)===null||X===void 0||X.call(n,t,e,K):RI(r)?(Y=i.onDayClick)===null||Y===void 0||Y.call(i,t,e,K):DI(r)?(oe=s.onDayClick)===null||oe===void 0||oe.call(s,t,e,K):(xe=r.onDayClick)===null||xe===void 0||xe.call(r,t,e,K)},j=function(K){var X;f(t),(X=r.onDayFocus)===null||X===void 0||X.call(r,t,e,K)},T=function(K){var X;h(),(X=r.onDayBlur)===null||X===void 0||X.call(r,t,e,K)},O=function(K){var X;(X=r.onDayMouseEnter)===null||X===void 0||X.call(r,t,e,K)},I=function(K){var X;(X=r.onDayMouseLeave)===null||X===void 0||X.call(r,t,e,K)},M=function(K){var X;(X=r.onDayPointerEnter)===null||X===void 0||X.call(r,t,e,K)},D=function(K){var X;(X=r.onDayPointerLeave)===null||X===void 0||X.call(r,t,e,K)},z=function(K){var X;(X=r.onDayTouchCancel)===null||X===void 0||X.call(r,t,e,K)},F=function(K){var X;(X=r.onDayTouchEnd)===null||X===void 0||X.call(r,t,e,K)},q=function(K){var X;(X=r.onDayTouchMove)===null||X===void 0||X.call(r,t,e,K)},Q=function(K){var X;(X=r.onDayTouchStart)===null||X===void 0||X.call(r,t,e,K)},re=function(K){var X;(X=r.onDayKeyUp)===null||X===void 0||X.call(r,t,e,K)},Z=function(K){var X;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),u();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),d();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?g():m();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?y():x();break;case"Home":K.preventDefault(),K.stopPropagation(),w();break;case"End":K.preventDefault(),K.stopPropagation(),S();break}(X=r.onDayKeyDown)===null||X===void 0||X.call(r,t,e,K)},se={onClick:E,onFocus:j,onBlur:T,onKeyDown:Z,onKeyUp:re,onMouseEnter:O,onMouseLeave:I,onPointerEnter:M,onPointerLeave:D,onTouchCancel:z,onTouchEnd:F,onTouchMove:q,onTouchStart:Q};return se}function oIt(){var t=_a(),e=zAe(),r=AJ(),n=TJ(),i=TB(t)?e.selected:RI(t)?r.selected:DI(t)?n.selected:void 0;return i}function lIt(t){return Object.values(n0).includes(t)}function cIt(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var i=t.modifiersClassNames[n];if(i)r.push(i);else if(lIt(n)){var s=t.classNames["day_".concat(n)];s&&r.push(s)}}),r}function uIt(t,e){var r=Qn({},t.styles.day);return Object.keys(e).forEach(function(n){var i;r=Qn(Qn({},r),(i=t.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function dIt(t,e,r){var n,i,s,o=_a(),l=kJ(),c=nIt(t,e),u=aIt(t,c),d=oIt(),h=!!(o.onDayClick||o.mode!=="default");C.useEffect(function(){var O;c.outside||l.focusedDay&&h&&Vu(l.focusedDay,t)&&((O=r.current)===null||O===void 0||O.focus())},[l.focusedDay,t,r,h,c.outside]);var f=cIt(o,c).join(" "),m=uIt(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),g=(s=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:OOt,y=a.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),w={style:m,className:f,children:y,role:"gridcell"},S=l.focusTarget&&Vu(l.focusTarget,t)&&!c.outside,E=l.focusedDay&&Vu(l.focusedDay,t),j=Qn(Qn(Qn({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=E||S?0:-1,n)),u),T={isButton:h,isHidden:x,activeModifiers:c,selectedDays:d,buttonProps:j,divProps:w};return T}function hIt(t){var e=C.useRef(null),r=dIt(t.date,t.displayMonth,e);return r.isHidden?a.jsx("div",{role:"gridcell"}):r.isButton?a.jsx(ML,Qn({name:"day",ref:e},r.buttonProps)):a.jsx("div",Qn({},r.divProps))}function fIt(t){var e=t.number,r=t.dates,n=_a(),i=n.onWeekNumberClick,s=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return a.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var h=c(Number(e),{locale:l}),f=function(m){i(e,r,m)};return a.jsx(ML,{name:"week-number","aria-label":h,className:o.weeknumber,style:s.weeknumber,onClick:f,children:d})}function mIt(t){var e,r,n=_a(),i=n.styles,s=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:hIt,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:fIt,d;return o&&(d=a.jsx("td",{className:s.cell,style:i.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:s.row,style:i.row,children:[d,t.dates.map(function(h){return a.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:h})},GXe(h))})]})}function Jue(t,e,r){for(var n=r!=null&&r.ISOWeek?Obe(e):wZ(e,r),i=r!=null&&r.ISOWeek?H_(t):Ig(t,r),s=pg(n,i),o=[],l=0;l<=s;l++)o.push(pd(i,l));var c=o.reduce(function(u,d){var h=r!=null&&r.ISOWeek?Rbe(d):Mbe(d,r),f=u.find(function(m){return m.weekNumber===h});return f?(f.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function pIt(t,e){var r=Jue(ru(t),G_(t),e);if(e!=null&&e.useFixedWeeks){var n=XXe(t,e);if(n<6){var i=r[r.length-1],s=i.dates[i.dates.length-1],o=Bq(s,6-n),l=Jue(Bq(s,1),o,e);r.push.apply(r,l)}}return r}function gIt(t){var e,r,n,i=_a(),s=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,h=i.weekStartsOn,f=i.firstWeekContainsDate,m=i.ISOWeek,x=pIt(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:h,firstWeekContainsDate:f}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:kOt,y=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:mIt,w=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:COt;return a.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(g,{}),a.jsx("tbody",{className:o.tbody,style:l.tbody,children:x.map(function(S){return a.jsx(y,{displayMonth:t.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),a.jsx(w,{displayMonth:t.displayMonth})]})}function xIt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var vIt=xIt()?C.useLayoutEffect:C.useEffect,AU=!1,yIt=0;function ede(){return"react-day-picker-".concat(++yIt)}function bIt(t){var e,r=t??(AU?ede():null),n=C.useState(r),i=n[0],s=n[1];return vIt(function(){i===null&&s(ede())},[]),C.useEffect(function(){AU===!1&&(AU=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function wIt(t){var e,r,n=_a(),i=n.dir,s=n.classNames,o=n.styles,l=n.components,c=MI().displayMonths,u=bIt(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[s.month],f=o.month,m=t.displayIndex===0,x=t.displayIndex===c.length-1,g=!m&&!x;i==="rtl"&&(e=[m,x],x=e[0],m=e[1]),m&&(h.push(s.caption_start),f=Qn(Qn({},f),o.caption_start)),x&&(h.push(s.caption_end),f=Qn(Qn({},f),o.caption_end)),g&&(h.push(s.caption_between),f=Qn(Qn({},f),o.caption_between));var y=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:AOt;return a.jsxs("div",{className:h.join(" "),style:f,children:[a.jsx(y,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(gIt,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function _It(t){var e=_a(),r=e.classNames,n=e.styles;return a.jsx("div",{className:r.months,style:n.months,children:t.children})}function NIt(t){var e,r,n=t.initialProps,i=_a(),s=kJ(),o=MI(),l=C.useState(!1),c=l[0],u=l[1];C.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var h=Qn(Qn({},i.styles.root),i.style),f=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,g){var y;return Qn(Qn({},x),(y={},y[g]=n[g],y))},{}),m=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:_It;return a.jsx("div",Qn({className:d.join(" "),style:h,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:a.jsx(m,{children:o.displayMonths.map(function(x,g){return a.jsx(wIt,{displayIndex:g,displayMonth:x},g)})})}))}function SIt(t){var e=t.children,r=Kkt(t,["children"]);return a.jsx(fOt,{initialProps:r,children:a.jsx(NOt,{children:a.jsx(iIt,{initialProps:r,children:a.jsx(IOt,{initialProps:r,children:a.jsx(MOt,{initialProps:r,children:a.jsx(qOt,{children:a.jsx(rIt,{children:e})})})})})})})}function EIt(t){return a.jsx(SIt,Qn({},t,{children:a.jsx(NIt,{initialProps:t})}))}function px({className:t,classNames:e,showOutsideDays:r=!0,...n}){return a.jsx(EIt,{showOutsideDays:r,className:Ut("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ut(P3({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ut(P3({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>a.jsx(S0e,{className:"h-4 w-4"}),IconRight:({...i})=>a.jsx(_f,{className:"h-4 w-4"})},...n})}px.displayName="Calendar";function jIt(){var se,K,X,Y;const{id:t}=o0(),[e,r]=C.useState(null),[n,i]=C.useState([]),[s,o]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[h,f]=C.useState(zl(new Date,30)),[m,x]=C.useState(new Date),[g,y]=C.useState(zl(new Date,60)),[w,S]=C.useState(zl(new Date,31)),[E,j]=C.useState({data_registro:Mi(new Date,"yyyy-MM-dd"),faturamento_verde:"",faturamento_total:"",taxa_recuperacao:"",toneladas_recuperadas:"",cupons_emitidos:"",notas_fiscais_validadas:""}),T=nn(),{toast:O}=Qi();C.useEffect(()=>{t&&(I(),M(),D())},[t,h,m,g,w]);const I=async()=>{const{data:oe}=await Ee.from("empresas").select(`
        *,
        profiles:id_user (nome, email, cnpj)
      `).eq("id",t).single();oe&&r(oe)},M=async()=>{const{data:oe}=await Ee.from("metricas_empresas").select("*").eq("id_empresa",t).order("data_registro",{ascending:!0});oe&&i(oe)},D=async()=>{if(!h||!m)return;const{data:oe}=await Ee.from("metricas_empresas").select("*").eq("id_empresa",t).gte("data_registro",h.toISOString()).lte("data_registro",m.toISOString()).order("data_registro",{ascending:!1});let xe=null;g&&w&&(xe=(await Ee.from("metricas_empresas").select("*").eq("id_empresa",t).gte("data_registro",g.toISOString()).lte("data_registro",w.toISOString()).order("data_registro",{ascending:!1})).data);const H=(ie,ce)=>!ie||ie.length===0?0:ie.reduce((he,_e)=>he+(Number(_e[ce])||0),0)/ie.length,J=(ie,ce)=>!ie||ie.length===0?0:ie.reduce((me,he)=>me+(Number(he[ce])||0),0);if(oe&&oe.length>0){const ie={percentual_faturamento_verde:H(oe,"percentual_faturamento_verde"),taxa_recuperacao:H(oe,"taxa_recuperacao"),toneladas_recuperadas:J(oe,"toneladas_recuperadas"),cupons_emitidos:J(oe,"cupons_emitidos"),notas_fiscais_validadas:J(oe,"notas_fiscais_validadas"),faturamento_verde:J(oe,"faturamento_verde"),faturamento_total:J(oe,"faturamento_total")},ce=xe&&xe.length>0?{percentual_faturamento_verde:H(xe,"percentual_faturamento_verde"),taxa_recuperacao:H(xe,"taxa_recuperacao"),toneladas_recuperadas:J(xe,"toneladas_recuperadas"),cupons_emitidos:J(xe,"cupons_emitidos"),notas_fiscais_validadas:J(xe,"notas_fiscais_validadas"),faturamento_verde:J(xe,"faturamento_verde"),faturamento_total:J(xe,"faturamento_total")}:null;o({atual:ie,anterior:ce})}},z=async()=>{if(!E.data_registro){O({title:"Campo obrigatrio",description:"Data de registro  obrigatria",variant:"destructive"});return}d(!0);try{const oe=E.faturamento_verde?parseFloat(E.faturamento_verde):null,xe=E.faturamento_total?parseFloat(E.faturamento_total):null;let H=null;oe&&xe&&xe>0&&(H=oe/xe*100);const{error:J}=await Ee.from("metricas_empresas").insert({id_empresa:t,data_registro:E.data_registro,faturamento_verde:oe,faturamento_total:xe,percentual_faturamento_verde:H,taxa_recuperacao:E.taxa_recuperacao?parseFloat(E.taxa_recuperacao):null,toneladas_recuperadas:E.toneladas_recuperadas?parseFloat(E.toneladas_recuperadas):null,cupons_emitidos:E.cupons_emitidos?parseInt(E.cupons_emitidos):0,notas_fiscais_validadas:E.notas_fiscais_validadas?parseInt(E.notas_fiscais_validadas):0});if(J)throw J;O({title:"Mtrica adicionada!",description:"Os dados foram salvos com sucesso"}),c(!1),F(),M(),I()}catch(oe){O({title:"Erro ao salvar mtrica",description:oe.message,variant:"destructive"})}finally{d(!1)}},F=()=>{j({data_registro:Mi(new Date,"yyyy-MM-dd"),faturamento_verde:"",faturamento_total:"",taxa_recuperacao:"",toneladas_recuperadas:"",cupons_emitidos:"",notas_fiscais_validadas:""})},q=()=>n.map(oe=>{var xe,H,J;return{data:Mi(new Date(oe.data_registro),"dd/MM/yy",{locale:Wi}),"Faturamento Verde (%)":((xe=oe.percentual_faturamento_verde)==null?void 0:xe.toFixed(2))||0,"Taxa Recuperao (%)":((H=oe.taxa_recuperacao)==null?void 0:H.toFixed(2))||0,Toneladas:((J=oe.toneladas_recuperadas)==null?void 0:J.toFixed(2))||0}}),Q=()=>n.map(oe=>({data:Mi(new Date(oe.data_registro),"dd/MM/yy",{locale:Wi}),Cupons:oe.cupons_emitidos||0,"Notas Fiscais":oe.notas_fiscais_validadas||0})),Z=n.length>0?n[n.length-1]:null;return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs(Oe,{variant:"ghost",onClick:()=>T("/admin/companies"),children:[a.jsx(Kn,{className:"mr-2 h-4 w-4"}),"Voltar"]}),a.jsxs(Oe,{onClick:()=>c(!0),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Adicionar Mtrica"]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold",children:((se=e==null?void 0:e.profiles)==null?void 0:se.nome)||"Carregando..."}),a.jsx("p",{className:"text-muted-foreground",children:"Dashboard de Mtricas e Performance"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-8",children:[a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(MX,{className:"h-4 w-4"}),"Faturamento Verde"]}),a.jsxs(Ct,{className:"text-2xl",children:[((K=Z==null?void 0:Z.percentual_faturamento_verde)==null?void 0:K.toFixed(1))||"0","%"]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(Cs,{className:"h-4 w-4"}),"Taxa Recuperao"]}),a.jsxs(Ct,{className:"text-2xl",children:[((X=Z==null?void 0:Z.taxa_recuperacao)==null?void 0:X.toFixed(1))||"0","%"]})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(Hs,{className:"h-4 w-4"}),"Toneladas Recuperadas"]}),a.jsx(Ct,{className:"text-2xl",children:((Y=Z==null?void 0:Z.toneladas_recuperadas)==null?void 0:Y.toFixed(1))||"0"})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(Ql,{className:"h-4 w-4"}),"Cupons Emitidos"]}),a.jsx(Ct,{className:"text-2xl",children:(Z==null?void 0:Z.cupons_emitidos)||0})]})})]}),n.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(it,{className:"mb-6",children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Evoluo de Faturamento Verde e Recuperao"}),a.jsx(gr,{children:"Percentuais ao longo do tempo"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(mL,{data:q(),children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(Sd,{type:"monotone",dataKey:"Faturamento Verde (%)",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{r:4}}),a.jsx(Sd,{type:"monotone",dataKey:"Taxa Recuperao (%)",stroke:"hsl(var(--success))",strokeWidth:2,dot:{r:4}})]})})})]}),a.jsxs(it,{className:"mb-6",children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Toneladas Recuperadas"}),a.jsx(gr,{children:"Volume de material reciclado ao longo do tempo"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(N_,{data:q(),children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(nu,{dataKey:"Toneladas",fill:"hsl(var(--accent))"})]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Atividade Operacional"}),a.jsx(gr,{children:"Cupons emitidos e notas fiscais validadas"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(N_,{data:Q(),children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(nu,{dataKey:"Cupons",fill:"hsl(var(--primary))"}),a.jsx(nu,{dataKey:"Notas Fiscais",fill:"hsl(var(--secondary))"})]})})})]})]}):a.jsx(it,{children:a.jsxs(ht,{className:"py-12 text-center",children:[a.jsx(px,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma mtrica registrada"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Comece adicionando mtricas para visualizar a evoluo da empresa"}),a.jsxs(Oe,{onClick:()=>c(!0),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Adicionar Primeira Mtrica"]})]})}),a.jsx(hs,{open:l,onOpenChange:c,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Adicionar Nova Mtrica"}),a.jsx(Sl,{children:"Registre os dados de performance da empresa"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"data_registro",children:"Data de Registro *"}),a.jsx(mt,{id:"data_registro",type:"date",value:E.data_registro,onChange:oe=>j({...E,data_registro:oe.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"faturamento_verde",children:"Faturamento Verde (R$)"}),a.jsx(mt,{id:"faturamento_verde",type:"number",step:"0.01",value:E.faturamento_verde,onChange:oe=>j({...E,faturamento_verde:oe.target.value}),placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"faturamento_total",children:"Faturamento Total (R$)"}),a.jsx(mt,{id:"faturamento_total",type:"number",step:"0.01",value:E.faturamento_total,onChange:oe=>j({...E,faturamento_total:oe.target.value}),placeholder:"0.00"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"taxa_recuperacao",children:"Taxa de Recuperao (%)"}),a.jsx(mt,{id:"taxa_recuperacao",type:"number",step:"0.01",min:"0",max:"100",value:E.taxa_recuperacao,onChange:oe=>j({...E,taxa_recuperacao:oe.target.value}),placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"toneladas_recuperadas",children:"Toneladas Recuperadas"}),a.jsx(mt,{id:"toneladas_recuperadas",type:"number",step:"0.01",value:E.toneladas_recuperadas,onChange:oe=>j({...E,toneladas_recuperadas:oe.target.value}),placeholder:"0.00"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"cupons_emitidos",children:"Cupons Emitidos"}),a.jsx(mt,{id:"cupons_emitidos",type:"number",value:E.cupons_emitidos,onChange:oe=>j({...E,cupons_emitidos:oe.target.value}),placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"notas_fiscais_validadas",children:"Notas Fiscais Validadas"}),a.jsx(mt,{id:"notas_fiscais_validadas",type:"number",value:E.notas_fiscais_validadas,onChange:oe=>j({...E,notas_fiscais_validadas:oe.target.value}),placeholder:"0"})]})]}),a.jsx(Oe,{onClick:z,className:"w-full",disabled:u,children:u?"Salvando...":"Salvar Mtrica"})]})]})})]})})}function AIt(){var g,y,w,S;const{user:t,profile:e,signOut:r}=Si(),[n,i]=C.useState(null),[s,o]=C.useState(null),[l,c]=C.useState(!0),u=nn();C.useEffect(()=>{d()},[t]);const d=async()=>{c(!0),await Promise.all([h(),f()]),c(!1)},h=async()=>{if(!t)return;const{data:E}=await Ee.from("empresas").select("*, profiles:id_user (nome, cnpj)").eq("id_user",t.id).single();E&&i(E)},f=async()=>{if(!t)return;const{data:E}=await Ee.from("empresas").select("id").eq("id_user",t.id).single();if(!E)return;const{data:j}=await Ee.from("metricas_empresas").select("*").eq("id_empresa",E.id).order("data_registro",{ascending:!1}).limit(1).maybeSingle();j&&o(j)};if(l)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/5 flex items-center justify-center p-4",children:a.jsx(Ke.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(ps,{className:"w-12 h-12 text-primary"})})});if(!n)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/5 flex items-center justify-center p-4",children:a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsxs(it,{className:"max-w-md w-full border-2 shadow-xl",children:[a.jsxs(At,{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-4",children:a.jsx(eu,{className:"w-8 h-8 text-destructive"})}),a.jsx(Ct,{children:"Empresa no encontrada"}),a.jsx(gr,{children:"Sua conta no est vinculada a nenhuma empresa"})]}),a.jsx(ht,{children:a.jsxs(Oe,{onClick:r,className:"w-full",variant:"outline",children:[a.jsx(wv,{className:"mr-2 h-4 w-4"}),"Sair"]})})]})})});const m={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},x={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/5 p-4 md:p-8",children:a.jsxs(Ke.div,{className:"mx-auto max-w-7xl space-y-6",variants:m,initial:"hidden",animate:"show",children:[a.jsx(Ke.div,{variants:x,children:a.jsx(it,{className:"border-2 shadow-lg bg-card/50 backdrop-blur",children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(KQ,{className:"h-16 w-16 border-2 border-primary",children:a.jsx(XQ,{className:"bg-primary text-primary-foreground text-xl font-bold",children:((g=e==null?void 0:e.nome)==null?void 0:g.charAt(0))||"E"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold",children:e==null?void 0:e.nome}),a.jsxs("p",{className:"text-muted-foreground flex items-center gap-2",children:[a.jsx(eu,{className:"w-4 h-4"}),"Painel Empresarial"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>u("/company/own-metrics"),children:[a.jsx(D_,{className:"mr-2 h-4 w-4"}),"Minhas Mtricas"]}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:r,children:a.jsx(wv,{className:"h-5 w-5"})})]})]})})})}),a.jsxs(Ke.div,{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",variants:x,children:[a.jsxs(it,{className:"border-2 hover:border-primary/50 transition-colors shadow-lg",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Tipo de Empresa"}),a.jsx(eu,{className:"h-5 w-5 text-primary"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-display font-bold capitalize mb-1",children:n.tipo_empresa}),a.jsx(Bt,{variant:"secondary",className:"text-xs",children:n.plano_atual||"Plano Bsico"})]})]}),a.jsxs(it,{className:"border-2 hover:border-primary/50 transition-colors shadow-lg",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Faturamento Verde"}),a.jsx(Hs,{className:"h-5 w-5 text-green-500"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-display font-bold text-green-600",children:s!=null&&s.percentual_faturamento_verde?`${s.percentual_faturamento_verde.toFixed(1)}%`:"0%"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[a.jsx(Gl,{className:"w-3 h-3"}),"ltima atualizao"]})]})]}),a.jsxs(it,{className:"border-2 hover:border-primary/50 transition-colors shadow-lg",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Taxa Recuperao"}),a.jsx(cRe,{className:"h-5 w-5 text-blue-500"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-display font-bold text-blue-600",children:s!=null&&s.taxa_recuperacao?`${s.taxa_recuperacao.toFixed(1)}%`:"0%"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Eficincia de reciclagem"})]})]}),a.jsxs(it,{className:"border-2 hover:border-primary/50 transition-colors shadow-lg",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Status"}),a.jsx(Wp,{className:"h-5 w-5 text-primary"})]}),a.jsxs(ht,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),a.jsx("span",{className:"text-2xl font-display font-bold",children:"Ativo"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Compliance verificado"})]})]})]}),a.jsx(Ke.div,{variants:x,children:a.jsxs(it,{className:"border-2 shadow-lg",children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Dm,{className:"w-5 h-5 text-primary"}),"Aes Rpidas"]}),a.jsx(gr,{children:"Acesse as principais funcionalidades da plataforma"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs(Oe,{onClick:()=>u("/company/metrics"),className:"h-auto py-4 justify-start",variant:"outline",children:[a.jsxs("div",{className:"flex items-start gap-3 text-left",children:[a.jsx(D_,{className:"h-5 w-5 text-primary flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-1",children:"Mtricas Detalhadas"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Visualize relatrios completos de desempenho"})]})]}),a.jsx(Lu,{className:"ml-auto h-5 w-5"})]}),a.jsxs(Oe,{onClick:()=>u("/company/own-metrics"),className:"h-auto py-4 justify-start",variant:"outline",children:[a.jsxs("div",{className:"flex items-start gap-3 text-left",children:[a.jsx(Yn,{className:"h-5 w-5 text-secondary flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-1",children:"Minhas Mtricas"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Gerencie suas metas e indicadores"})]})]}),a.jsx(Lu,{className:"ml-auto h-5 w-5"})]})]})})]})}),a.jsx(Ke.div,{variants:x,children:a.jsxs(it,{className:"border-2 shadow-lg",children:[a.jsx(At,{children:a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(eu,{className:"w-5 h-5 text-primary"}),"Informaes da Empresa"]})}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"CNPJ"}),a.jsx("p",{className:"text-lg font-mono font-semibold",children:((y=n.profiles)==null?void 0:y.cnpj)||"No informado"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tipo de Empresa"}),a.jsx("p",{className:"text-lg font-semibold capitalize",children:n.tipo_empresa})]})]}),a.jsx(r0,{}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Plano Atual"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-lg font-semibold",children:n.plano_atual||"Plano Bsico"}),a.jsxs(Bt,{variant:"outline",className:"text-xs",children:[a.jsx(ps,{className:"w-3 h-3 mr-1"}),"Ativo"]})]})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx(r0,{}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"ltima Atualizao de Mtricas"}),a.jsx("p",{className:"text-lg font-semibold",children:new Date(s.data_registro).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})})]})]})]})]})}),s&&a.jsx(Ke.div,{variants:x,children:a.jsxs(it,{className:"border-2 shadow-lg bg-gradient-to-br from-primary/5 to-secondary/5",children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(ps,{className:"w-5 h-5 text-primary"}),"Resumo de Impacto Ambiental"]}),a.jsx(gr,{children:"Suas contribuies para a sustentabilidade"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-card rounded-lg border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(yl,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Impacto Social"})]}),a.jsxs("p",{className:"text-2xl font-bold text-primary",children:[((w=s.percentual_faturamento_verde)==null?void 0:w.toFixed(0))||"0","%"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Faturamento Verde"})]}),a.jsxs("div",{className:"p-4 bg-card rounded-lg border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Yn,{className:"w-4 h-4 text-secondary"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Reciclagem"})]}),a.jsxs("p",{className:"text-2xl font-bold text-secondary",children:[((S=s.taxa_recuperacao)==null?void 0:S.toFixed(0))||"0","%"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Taxa de Recuperao"})]}),a.jsxs("div",{className:"p-4 bg-card rounded-lg border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Hs,{className:"w-4 h-4 text-accent"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Crescimento"})]}),a.jsx("p",{className:"text-2xl font-bold text-accent",children:"+15%"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"vs. ms anterior"})]})]})})]})})]})})}function CIt(){var x,g;const{user:t,profile:e}=Si(),[r,n]=C.useState(null),[i,s]=C.useState([]),o=nn();C.useEffect(()=>{l()},[t]);const l=async()=>{if(!t)return;const{data:y}=await Ee.from("empresas").select("*").eq("id_user",t.id).single();y&&(n(y),c(y.id))},c=async y=>{const{data:w}=await Ee.from("metricas_empresas").select("*").eq("id_empresa",y).order("data_registro",{ascending:!0});w&&s(w)},u=()=>i.map(y=>{var w,S;return{data:Mi(new Date(y.data_registro),"dd/MMM",{locale:Wi}),"Faturamento Verde (%)":((w=y.percentual_faturamento_verde)==null?void 0:w.toFixed(1))||0,"Taxa Recuperao (%)":((S=y.taxa_recuperacao)==null?void 0:S.toFixed(1))||0}}),d=()=>i.map(y=>({data:Mi(new Date(y.data_registro),"dd/MMM",{locale:Wi}),Toneladas:y.toneladas_recuperadas||0})),h=()=>i.map(y=>({data:Mi(new Date(y.data_registro),"dd/MMM",{locale:Wi}),"Cupons Emitidos":y.cupons_emitidos||0,"Notas Validadas":y.notas_fiscais_validadas||0})),m=i.length===0?null:i[i.length-1];return r?a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>o("/company"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:e==null?void 0:e.nome}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Mtricas de Desempenho"})]})]})}),m&&a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Faturamento Verde (%)"}),a.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-2xl font-bold",children:[((x=m.percentual_faturamento_verde)==null?void 0:x.toFixed(1))||0,"%"]})})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Taxa Recuperao (%)"}),a.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-2xl font-bold",children:[((g=m.taxa_recuperacao)==null?void 0:g.toFixed(1))||0,"%"]})})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Toneladas Recuperadas"}),a.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:m.toneladas_recuperadas||0})})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Cupons Emitidos"}),a.jsx(c6,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:m.cupons_emitidos||0})})]})]}),i.length===0?a.jsx(it,{children:a.jsx(ht,{className:"pt-6 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma mtrica registrada ainda. Aguarde os administradores adicionarem dados."})})}):a.jsxs(a.Fragment,{children:[a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Evoluo de Faturamento Verde e Recuperao"}),a.jsx(gr,{children:"Percentuais ao longo do tempo"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(mL,{data:u(),children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(Sd,{type:"monotone",dataKey:"Faturamento Verde (%)",stroke:"hsl(var(--primary))",strokeWidth:2}),a.jsx(Sd,{type:"monotone",dataKey:"Taxa Recuperao (%)",stroke:"hsl(var(--accent))",strokeWidth:2})]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Toneladas Recuperadas"}),a.jsx(gr,{children:"Volume recuperado por perodo"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(N_,{data:d(),children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(nu,{dataKey:"Toneladas",fill:"hsl(var(--primary))"})]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Atividade Operacional"}),a.jsx(gr,{children:"Cupons emitidos e notas fiscais validadas"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(N_,{data:h(),children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(nu,{dataKey:"Cupons Emitidos",fill:"hsl(var(--primary))"}),a.jsx(nu,{dataKey:"Notas Validadas",fill:"hsl(var(--accent))"})]})})})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Carregando dados da empresa..."})})}function TIt(){const[t,e]=C.useState([]),[r,n]=C.useState([]),[i,s]=C.useState(0),[o,l]=C.useState(""),[c,u]=C.useState(null),[d,h]=C.useState(!1),[f,m]=C.useState(!1),[x,g]=C.useState({}),[y,w]=C.useState({}),[S,E]=C.useState(!1),[j,T]=C.useState({nome:"",email:"",telefone:"",cpf:"",cnpj:"",tipo_pessoa:"PF",tipo_pj:"Outro",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""}),O=nn(),{toast:I}=Qi();C.useEffect(()=>{M()},[]),C.useEffect(()=>{if(o){const X=t.filter(Y=>{var oe,xe;return Y.nome.toLowerCase().includes(o.toLowerCase())||Y.email.toLowerCase().includes(o.toLowerCase())||((oe=Y.cpf)==null?void 0:oe.includes(o))||((xe=Y.cnpj)==null?void 0:xe.includes(o))});n(X)}else n(t)},[o,t]);const M=async()=>{const{data:X,error:Y}=await Ee.from("profiles").select(`
        *,
        user_roles (role)
      `).not("email","is",null).not("nome","is",null).neq("email","").neq("nome","").order("created_at",{ascending:!1});if(Y){console.error(" [AdminUsers] Erro ao carregar profiles:",Y),I({title:"Erro ao carregar usurios",description:Y.message,variant:"destructive"});return}const oe=X||[];s(oe.length),e(oe),n(oe),await D(oe)},D=async X=>{const Y={};for(const oe of X)try{const{data:xe,error:H}=await Ee.rpc("verificar_status_email_frontend",{usuario_id:oe.id});xe&&xe.success&&(Y[oe.id]={emailConfirmed:xe.email_confirmado,confirmedAt:xe.confirmado_em,createdAt:xe.criado_em})}catch(xe){console.error(`Erro ao verificar status de email para ${oe.email}:`,xe)}g(Y)},z=X=>{const Y=x[X];return Y?Y.emailConfirmed?a.jsxs(Bt,{className:"bg-green-500 text-white flex items-center gap-1",children:[a.jsx(ta,{className:"h-3 w-3"}),"Email confirmado"]}):a.jsxs(Bt,{variant:"destructive",className:"flex items-center gap-1",children:[a.jsx(al,{className:"h-3 w-3"}),"Email no confirmado"]}):a.jsxs(Bt,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Za,{className:"h-3 w-3"}),"Verificando..."]})},F=async X=>{const Y=x[X.id];if(Y!=null&&Y.emailConfirmed){I({title:"Email j confirmado",description:`O email de ${X.nome} j foi confirmado em ${new Date(Y.confirmedAt).toLocaleDateString("pt-BR")}.`,variant:"default"});return}w(oe=>({...oe,[X.id]:!0}));try{const{error:oe}=await Ee.auth.resend({type:"signup",email:X.email});if(oe)throw oe;I({title:"Email reenviado com sucesso!",description:`Email de confirmao reenviado para ${X.email}. Pea ao usurio para verificar a caixa de entrada e spam.`})}catch(oe){console.error(` [REENVIO] Erro ao reenviar email para ${X.email}:`,oe),I({title:"Erro ao reenviar email",description:oe.message||"Ocorreu um erro ao tentar reenviar o email de confirmao.",variant:"destructive"})}finally{w(oe=>({...oe,[X.id]:!1}))}},q=async(X,Y)=>{try{const{error:oe}=await Ee.from("profiles").update({score_verde:Y}).eq("id",X);if(oe)throw oe;I({title:"Score atualizado!"}),M(),h(!1)}catch(oe){I({title:"Erro",description:oe.message,variant:"destructive"})}},Q=async X=>{const Y=X.replace(/\D/g,"");if(Y.length===8){E(!0);try{const xe=await(await fetch(`https://viacep.com.br/ws/${Y}/json/`)).json();if(xe.erro){I({title:"CEP no encontrado",description:"Verifique o CEP informado",variant:"destructive"});return}T(H=>({...H,logradouro:xe.logradouro||"",bairro:xe.bairro||"",cidade:xe.localidade||"",uf:xe.uf||""}))}catch(oe){console.error("Erro ao buscar CEP:",oe)}finally{E(!1)}}},re=async()=>{if(j.tipo_pessoa==="PF"){if(!dq(j.cpf)){I({title:"CPF invlido",description:"Por favor, verifique o CPF informado",variant:"destructive"});return}}else if(!PA(j.cnpj)){I({title:"CNPJ invlido",description:"Por favor, verifique o CNPJ informado",variant:"destructive"});return}if(!j.nome||!j.email||!j.cep||!j.telefone){I({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios",variant:"destructive"});return}E(!0);try{const X={nome:j.nome,email:j.email,telefone:j.telefone,tipo_pessoa:j.tipo_pessoa,cep:j.cep,logradouro:j.logradouro,numero:j.numero,complemento:j.complemento,bairro:j.bairro,cidade:j.cidade,uf:j.uf};j.tipo_pessoa==="PF"?(X.cpf=j.cpf,X.cnpj=null,X.tipo_pj=null):(X.cnpj=j.cnpj,X.cpf=null,X.tipo_pj=j.tipo_pj);const{error:Y}=await Ee.from("profiles").update(X).eq("id",c.id);if(Y)throw Y;I({title:"Usurio atualizado!",description:"Os dados cadastrais foram atualizados com sucesso"}),m(!1),M()}catch(X){I({title:"Erro ao atualizar",description:X.message,variant:"destructive"})}finally{E(!1)}},Z=X=>({Iniciante:a.jsx(Bt,{variant:"secondary",children:"Iniciante"}),Ativo:a.jsx(Bt,{className:"bg-success",children:"Ativo"}),"Guardiao Verde":a.jsx(Bt,{className:"bg-accent",children:"Guardio Verde"})})[X]||a.jsx(Bt,{children:X}),se=(X,Y)=>X==="PF"?a.jsx(Bt,{variant:"outline",children:"Pessoa Fsica"}):a.jsxs(Bt,{variant:"outline",children:["PJ - ",Y]}),K=X=>X==="all"?r:X==="pf"?r.filter(Y=>Y.tipo_pessoa==="PF"):X==="pj"?r.filter(Y=>Y.tipo_pessoa==="PJ"):r.filter(Y=>Y.nivel===X);return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>O("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Gesto de Usurios"}),a.jsx("p",{className:"text-muted-foreground",children:"Ver e editar informaes dos usurios"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full max-w-sm",children:[a.jsx(Jp,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(mt,{placeholder:"Buscar por nome, email ou documento...",value:o,onChange:X=>l(X.target.value)})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Total de Usurios"}),a.jsx(Ct,{className:"text-2xl",children:t.length})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Pessoas Fsicas"}),a.jsx(Ct,{className:"text-2xl",children:t.filter(X=>X.tipo_pessoa==="PF").length})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Pessoas Jurdicas"}),a.jsx(Ct,{className:"text-2xl",children:t.filter(X=>X.tipo_pessoa==="PJ").length})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{className:"text-xs",children:"Guardies Verde"}),a.jsx(Ct,{className:"text-2xl",children:t.filter(X=>X.nivel==="Guardiao Verde").length})]})})]}),a.jsxs(yc,{defaultValue:"all",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-5",children:[a.jsx(ri,{value:"all",children:"Todos"}),a.jsx(ri,{value:"pf",children:"PF"}),a.jsx(ri,{value:"pj",children:"PJ"}),a.jsx(ri,{value:"Ativo",children:"Ativos"}),a.jsx(ri,{value:"Guardiao Verde",children:"Guardies"})]}),["all","pf","pj","Ativo","Guardiao Verde"].map(X=>a.jsxs(Ti,{value:X,className:"space-y-4",children:[K(X).map(Y=>{var oe;return a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:a.jsx(_v,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsx(Ct,{className:"text-lg",children:Y.nome}),Z(Y.nivel),se(Y.tipo_pessoa,Y.tipo_pj),z(Y.id)]}),a.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Email:"})," ",Y.email]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Telefone:"})," ",Y.telefone||"N/A"]}),Y.tipo_pessoa==="PF"?a.jsxs("div",{children:[a.jsx("strong",{children:"CPF:"})," ",Y.cpf]}):a.jsxs("div",{children:[a.jsx("strong",{children:"CNPJ:"})," ",Y.cnpj]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Endereo:"})," ",Y.logradouro,", ",Y.numero||"S/N"," - ",Y.bairro,", ",Y.cidade,"/",Y.uf]}),a.jsxs("div",{className:"text-xs pt-1",children:["Cadastrado em: ",new Date(Y.data_cadastro).toLocaleDateString("pt-BR")]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[!((oe=x[Y.id])!=null&&oe.emailConfirmed)&&a.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>F(Y),disabled:y[Y.id],className:"gap-2",children:[a.jsx(NA,{className:"h-4 w-4"}),y[Y.id]?"Enviando...":"Reenviar Email"]}),a.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>{u(Y),T({nome:Y.nome||"",email:Y.email||"",telefone:Y.telefone||"",cpf:Y.cpf||"",cnpj:Y.cnpj||"",tipo_pessoa:Y.tipo_pessoa||"PF",tipo_pj:Y.tipo_pj||"Outro",cep:Y.cep||"",logradouro:Y.logradouro||"",numero:Y.numero||"",complemento:Y.complemento||"",bairro:Y.bairro||"",cidade:Y.cidade||"",uf:Y.uf||""}),m(!0)},className:"gap-2",children:[a.jsx(BC,{className:"h-4 w-4"}),"Editar Cadastro"]}),a.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>{u(Y),h(!0)},children:a.jsx(_m,{className:"h-4 w-4"})})]})]})}),a.jsx(ht,{children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"flex items-center justify-center mb-1",children:a.jsx(_m,{className:"h-4 w-4 text-primary mr-1"})}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:Y.score_verde}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Pontos Verdes"})]}),a.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"flex items-center justify-center mb-1",children:a.jsx(Dm,{className:"h-4 w-4 text-success mr-1"})}),a.jsx("p",{className:"text-2xl font-bold",children:Y.missoes_concluidas}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Misses"})]}),a.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"flex items-center justify-center mb-1",children:a.jsx(Hu,{className:"h-4 w-4 text-accent mr-1"})}),a.jsx("p",{className:"text-2xl font-bold",children:Y.cupons_resgatados}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Cupons"})]})]})})]},Y.id)}),K(X).length===0&&a.jsx(it,{children:a.jsxs(ht,{className:"py-12 text-center",children:[a.jsx(_v,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhum usurio encontrado"})]})})]},X))]}),a.jsx(hs,{open:f,onOpenChange:m,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Editar Dados Cadastrais do Usurio"})}),c&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_nome",children:"Nome Completo *"}),a.jsx(mt,{id:"edit_nome",value:j.nome,onChange:X=>T({...j,nome:X.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_email",children:"Email *"}),a.jsx(mt,{id:"edit_email",type:"email",value:j.email,onChange:X=>T({...j,email:X.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_telefone",children:"Telefone *"}),a.jsx(mt,{id:"edit_telefone",value:j.telefone,onChange:X=>T({...j,telefone:M3(X.target.value)}),placeholder:"(00) 00000-0000",maxLength:15})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_tipo_pessoa",children:"Tipo de Pessoa *"}),a.jsxs(wi,{value:j.tipo_pessoa,onValueChange:X=>T({...j,tipo_pessoa:X}),children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o tipo"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"PF",children:"Pessoa Fsica"}),a.jsx(or,{value:"PJ",children:"Pessoa Jurdica"})]})]})]}),j.tipo_pessoa==="PF"?a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_cpf",children:"CPF *"}),a.jsx(mt,{id:"edit_cpf",value:j.cpf,onChange:X=>T({...j,cpf:Nve(X.target.value)}),placeholder:"000.000.000-00",maxLength:14})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_cnpj",children:"CNPJ *"}),a.jsx(mt,{id:"edit_cnpj",value:j.cnpj,onChange:X=>T({...j,cnpj:D3(X.target.value)}),placeholder:"00.000.000/0000-00",maxLength:18})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_tipo_pj",children:"Tipo de Organizao *"}),a.jsxs("select",{id:"edit_tipo_pj",value:j.tipo_pj,onChange:X=>T({...j,tipo_pj:X.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring",children:[a.jsx("option",{value:"Condominio",children:"Condomnio"}),a.jsx("option",{value:"Restaurante",children:"Restaurante"}),a.jsx("option",{value:"Comercio",children:"Comrcio"}),a.jsx("option",{value:"Servico",children:"Servio"}),a.jsx("option",{value:"Industria",children:"Indstria"}),a.jsx("option",{value:"Outro",children:"Outro"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(nt,{htmlFor:"edit_cep",children:["CEP * ",S&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"(buscando...)"})]}),a.jsx(mt,{id:"edit_cep",value:j.cep,onChange:X=>{const Y=L3(X.target.value);T({...j,cep:Y}),Y.replace(/\D/g,"").length===8&&Q(Y)},placeholder:"00000-000",maxLength:9,disabled:S,className:S?"animate-pulse":""}),j.cep&&j.cep.replace(/\D/g,"").length===8&&j.logradouro&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Endereo preenchido automaticamente"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"edit_logradouro",children:"Logradouro"}),a.jsx(mt,{id:"edit_logradouro",value:j.logradouro,onChange:X=>T({...j,logradouro:X.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_numero",children:"Nmero"}),a.jsx(mt,{id:"edit_numero",value:j.numero,onChange:X=>T({...j,numero:X.target.value})})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{htmlFor:"edit_complemento",children:"Complemento"}),a.jsx(mt,{id:"edit_complemento",value:j.complemento,onChange:X=>T({...j,complemento:X.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_bairro",children:"Bairro"}),a.jsx(mt,{id:"edit_bairro",value:j.bairro,onChange:X=>T({...j,bairro:X.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_cidade",children:"Cidade"}),a.jsx(mt,{id:"edit_cidade",value:j.cidade,onChange:X=>T({...j,cidade:X.target.value})})]}),a.jsxs("div",{children:[a.jsx(nt,{htmlFor:"edit_uf",children:"UF"}),a.jsx(mt,{id:"edit_uf",value:j.uf,onChange:X=>T({...j,uf:X.target.value.toUpperCase()}),maxLength:2})]})]}),a.jsxs(Oe,{onClick:re,disabled:S,className:"w-full",children:[a.jsx(FC,{className:"h-4 w-4 mr-2"}),S?"Salvando...":"Salvar Alteraes"]})]})]})}),a.jsx(hs,{open:d,onOpenChange:h,children:a.jsxs(as,{children:[a.jsx(fs,{children:a.jsx(ms,{children:"Editar Usurio"})}),c&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:c.nome}),a.jsx("p",{className:"text-sm text-muted-foreground",children:c.email})]}),x[c.id]&&a.jsxs(ka,{variant:x[c.id].emailConfirmed?"default":"destructive",children:[x[c.id].emailConfirmed?a.jsx(ta,{className:"h-4 w-4"}):a.jsx(al,{className:"h-4 w-4"}),a.jsx(JNe,{children:x[c.id].emailConfirmed?" Email Confirmado":" Email No Confirmado"}),a.jsx(Oa,{children:x[c.id].emailConfirmed?`Email confirmado em ${new Date(x[c.id].confirmedAt).toLocaleDateString("pt-BR")}`:'O usurio ainda no confirmou o email. Use o boto "Reenviar Email" na lista de usurios para reenviar o email de confirmao.'})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Score Verde (pontos)"}),a.jsx(mt,{type:"number",min:"0",defaultValue:c.score_verde,id:"novo-score"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Score atual: ",c.score_verde," | Nvel: ",c.nivel]})]}),a.jsx(Oe,{onClick:()=>{const X=document.getElementById("novo-score");q(c.id,parseInt(X.value))},className:"w-full",children:"Atualizar Score"})]})]})})]})})}var PB="Popover",[VAe,f$t]=qo(PB,[Ub]),LI=Ub(),[PIt,ew]=VAe(PB),qAe=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,l=LI(e),c=C.useRef(null),[u,d]=C.useState(!1),[h,f]=Xu({prop:n,defaultProp:i??!1,onChange:s,caller:PB});return a.jsx(VF,{...l,children:a.jsx(PIt,{scope:e,contentId:bl(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:u,onCustomAnchorAdd:C.useCallback(()=>d(!0),[]),onCustomAnchorRemove:C.useCallback(()=>d(!1),[]),modal:o,children:r})})};qAe.displayName=PB;var HAe="PopoverAnchor",kIt=C.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=ew(HAe,r),s=LI(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return C.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(ZO,{...s,...n,ref:e})});kIt.displayName=HAe;var WAe="PopoverTrigger",GAe=C.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=ew(WAe,r),s=LI(r),o=An(e,i.triggerRef),l=a.jsx(Dr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":QAe(i.open),...n,ref:o,onClick:wr(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:a.jsx(ZO,{asChild:!0,...s,children:l})});GAe.displayName=WAe;var IJ="PopoverPortal",[OIt,IIt]=VAe(IJ,{forceMount:void 0}),KAe=t=>{const{__scopePopover:e,forceMount:r,children:n,container:i}=t,s=ew(IJ,e);return a.jsx(OIt,{scope:e,forceMount:r,children:a.jsx(El,{present:r||s.open,children:a.jsx(RC,{asChild:!0,container:i,children:n})})})};KAe.displayName=IJ;var _C="PopoverContent",XAe=C.forwardRef((t,e)=>{const r=IIt(_C,t.__scopePopover),{forceMount:n=r.forceMount,...i}=t,s=ew(_C,t.__scopePopover);return a.jsx(El,{present:n||s.open,children:s.modal?a.jsx(DIt,{...i,ref:e}):a.jsx(MIt,{...i,ref:e})})});XAe.displayName=_C;var RIt=vb("PopoverContent.RemoveScroll"),DIt=C.forwardRef((t,e)=>{const r=ew(_C,t.__scopePopover),n=C.useRef(null),i=An(e,n),s=C.useRef(!1);return C.useEffect(()=>{const o=n.current;if(o)return e7(o)},[]),a.jsx(rI,{as:RIt,allowPinchZoom:!0,children:a.jsx(YAe,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wr(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:wr(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:wr(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),MIt=C.forwardRef((t,e)=>{const r=ew(_C,t.__scopePopover),n=C.useRef(!1),i=C.useRef(!1);return a.jsx(YAe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),YAe=C.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,f=ew(_C,r),m=LI(r);return JF(),a.jsx(eI,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(cN,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:a.jsx(qF,{"data-state":QAe(f.open),role:"dialog",id:f.contentId,...m,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ZAe="PopoverClose",LIt=C.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=ew(ZAe,r);return a.jsx(Dr.button,{type:"button",...n,ref:e,onClick:wr(t.onClick,()=>i.onOpenChange(!1))})});LIt.displayName=ZAe;var FIt="PopoverArrow",BIt=C.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,i=LI(r);return a.jsx(HF,{...i,...n,ref:e})});BIt.displayName=FIt;function QAe(t){return t?"open":"closed"}var $It=qAe,UIt=GAe,zIt=KAe,JAe=XAe;const ng=$It,ig=UIt,Rp=C.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},i)=>a.jsx(zIt,{children:a.jsx(JAe,{ref:i,align:e,sideOffset:r,className:Ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Rp.displayName=JAe.displayName;const tde=["hsl(var(--primary))","hsl(var(--accent))","hsl(var(--secondary))","hsl(var(--chart-3))"];function VIt(){const t=nn(),[e,r]=C.useState({usuarios_totais:0,usuarios_ativos:0,cooperativas_ativas:0,entregas_total:0,peso_total_kg:0,cupons_disponiveis:0,cupons_resgatados:0,cupons_usados:0,notas_pendentes:0,notas_validadas:0,missoes_ativas:0}),[n,i]=C.useState(null),[s,o]=C.useState(!0),[l,c]=C.useState(zl(new Date,30)),[u,d]=C.useState(new Date),[h,f]=C.useState(zl(new Date,60)),[m,x]=C.useState(zl(new Date,31)),[g,y]=C.useState("todos"),[w,S]=C.useState("todas"),[E,j]=C.useState([]),[T,O]=C.useState("todas"),[I,M]=C.useState("todos"),[D,z]=C.useState("todas"),[F,q]=C.useState(void 0),[Q,re]=C.useState(void 0),[Z,se]=C.useState([]),[K,X]=C.useState(!1),[Y,oe]=C.useState([]);C.useEffect(()=>{xe(),J(),ie()},[l,u,h,m,g,w]),C.useEffect(()=>{ce()},[T,I,D,F,Q]);const xe=async()=>{try{const ye=await H(l,u,g,w);if(r(ye),h&&m){const Le=await H(h,m,g,w);i(Le)}else i(null)}catch(ye){console.error("Error loading KPIs:",ye)}finally{o(!1)}},H=async(ye,Le,Ge,Be)=>{let Te=Ee.from("profiles").select("id",{count:"exact",head:!0});if(ye&&(Te=Te.gte("data_cadastro",ye.toISOString())),Le){const rt=new Date(Le);rt.setHours(23,59,59,999),Te=Te.lte("data_cadastro",rt.toISOString())}Ge&&Ge!=="todos"&&(Te=Te.eq("uf",Ge)),Be&&Be!=="todas"&&(Te=Te.eq("cidade",Be));let ze=Ee.from("cooperativas").select("id",{count:"exact",head:!0}).eq("status","aprovada");if(ye&&(ze=ze.gte("data_cadastro",ye.toISOString())),Le){const rt=new Date(Le);rt.setHours(23,59,59,999),ze=ze.lte("data_cadastro",rt.toISOString())}Ge&&Ge!=="todos"&&(ze=ze.eq("uf",Ge)),Be&&Be!=="todas"&&(ze=ze.eq("cidade",Be));let tt=Ee.from("entregas_reciclaveis").select("peso_validado, data_validacao, cooperativas!inner(uf, cidade)").eq("status","validada");if(ye&&(tt=tt.gte("data_validacao",ye.toISOString())),Le){const rt=new Date(Le);rt.setHours(23,59,59,999),tt=tt.lte("data_validacao",rt.toISOString())}Ge&&Ge!=="todos"&&(tt=tt.eq("cooperativas.uf",Ge)),Be&&Be!=="todas"&&(tt=tt.eq("cooperativas.cidade",Be));let Re=Ee.from("cupons_resgates").select("id",{count:"exact",head:!0});if(ye&&(Re=Re.gte("data_resgate",ye.toISOString())),Le){const rt=new Date(Le);rt.setHours(23,59,59,999),Re=Re.lte("data_resgate",rt.toISOString())}const Ue=Ee.from("notas_fiscais").select("id",{count:"exact",head:!0}).eq("status_validacao","valida"),xt=Ee.from("notas_fiscais").select("id",{count:"exact",head:!0}).eq("status_validacao","pendente"),[st,Xt,Jt,_r,lt,pt,er,Vt,Kt]=await Promise.allSettled([Te,ze,tt,Ee.from("cupons").select("id",{count:"exact",head:!0}).eq("status","disponivel"),Re,Ee.from("cupons").select("id",{count:"exact",head:!0}).eq("status","usado"),xt,Ue,Ee.from("missoes").select("id",{count:"exact",head:!0}).eq("status","ativa")]),ur=Jt.status==="fulfilled"&&Jt.value.data?Jt.value.data.reduce((rt,Lt)=>rt+(Number(Lt.peso_validado)||0),0):0;return{usuarios_totais:st.status==="fulfilled"&&st.value.count||0,usuarios_ativos:st.status==="fulfilled"&&st.value.count||0,cooperativas_ativas:Xt.status==="fulfilled"&&Xt.value.count||0,entregas_total:Jt.status==="fulfilled"&&Jt.value.data?Jt.value.data.length:0,peso_total_kg:Math.round(ur),cupons_disponiveis:_r.status==="fulfilled"&&_r.value.count||0,cupons_resgatados:lt.status==="fulfilled"&&lt.value.count||0,cupons_usados:pt.status==="fulfilled"&&pt.value.count||0,notas_pendentes:er.status==="fulfilled"&&er.value.count||0,notas_validadas:Vt.status==="fulfilled"&&Vt.value.count||0,missoes_ativas:Kt.status==="fulfilled"&&Kt.value.count||0}},J=async()=>{const{data:ye}=await Ee.from("cooperativas").select("id, nome_fantasia, cidade, uf").eq("status","aprovada").order("nome_fantasia");ye&&j(ye)},ie=async()=>{if(!(!l||!u))try{let ye=Ee.from("entregas_reciclaveis").select("data_validacao, peso_validado, cooperativas!inner(uf, cidade)").eq("status","validada").gte("data_validacao",l.toISOString()).lte("data_validacao",u.toISOString());g&&g!=="todos"&&(ye=ye.eq("cooperativas.uf",g)),w&&w!=="todas"&&(ye=ye.eq("cooperativas.cidade",w)),ye=ye.order("data_validacao");const{data:Le}=await ye;let Ge=null;if(h&&m){let Re=Ee.from("entregas_reciclaveis").select("data_validacao, peso_validado, cooperativas!inner(uf, cidade)").eq("status","validada").gte("data_validacao",h.toISOString()).lte("data_validacao",m.toISOString());g&&g!=="todos"&&(Re=Re.eq("cooperativas.uf",g)),w&&w!=="todas"&&(Re=Re.eq("cooperativas.cidade",w)),Re=Re.order("data_validacao"),Ge=(await Re).data}const Be=Re=>Re?Re.reduce((Ue,xt)=>{const st=Mi(new Date(xt.data_validacao),"dd/MM/yyyy",{locale:Wi});return Ue[st]||(Ue[st]={peso:0,count:0}),Ue[st].peso+=Number(xt.peso_validado)||0,Ue[st].count+=1,Ue},{}):{},Te=Be(Le||[]),ze=Be(Ge||[]),tt=[];Le&&Object.keys(Te).forEach(Re=>{tt.push({data:Re,"Perodo Atual - Peso (kg)":Te[Re].peso,"Perodo Atual - Entregas":Te[Re].count})}),Ge&&Object.keys(ze).forEach(Re=>{const Ue=tt.find(xt=>xt.data===Re);Ue?(Ue["Perodo Anterior - Peso (kg)"]=ze[Re].peso,Ue["Perodo Anterior - Entregas"]=ze[Re].count):tt.push({data:Re,"Perodo Anterior - Peso (kg)":ze[Re].peso,"Perodo Anterior - Entregas":ze[Re].count})}),oe(tt)}catch(ye){console.error("Error loading timeline data:",ye)}},ce=async()=>{X(!0);try{let ye=Ee.from("entregas_reciclaveis").select("tipo_material, peso_validado, data_validacao, cooperativas!inner(id, cidade, uf)").eq("status","validada");if(T!=="todas"&&(ye=ye.eq("id_cooperativa",T)),I!=="todos"&&(ye=ye.eq("cooperativas.uf",I)),D!=="todas"&&(ye=ye.eq("cooperativas.cidade",D)),F&&(ye=ye.gte("data_validacao",F.toISOString())),Q){const Ge=new Date(Q);Ge.setHours(23,59,59,999),ye=ye.lte("data_validacao",Ge.toISOString())}const{data:Le}=await ye;if(Le){const Ge=Le.reduce((Te,ze)=>{const tt=ze.tipo_material;return Te[tt]||(Te[tt]=0),Te[tt]+=Number(ze.peso_validado)||0,Te},{}),Be=Object.entries(Ge).map(([Te,ze])=>({tipo_material:Te,peso_total:Number(ze)}));se(Be)}}catch(ye){console.error("Error loading entregas:",ye)}finally{X(!1)}},me=[...new Set(E.map(ye=>ye.uf))].filter(Boolean).sort(),he=[...new Set(E.filter(ye=>I==="todos"||ye.uf===I).map(ye=>ye.cidade))].filter(Boolean).sort(),_e=[{name:"Disponveis",value:e.cupons_disponiveis},{name:"Resgatados",value:e.cupons_resgatados},{name:"Usados",value:e.cupons_usados}],ue=[{name:"Pendentes",value:e.notas_pendentes},{name:"Validadas",value:e.notas_validadas}],je=[{name:"Usurios",value:e.usuarios_totais},{name:"Cooperativas",value:e.cooperativas_ativas},{name:"Entregas",value:e.entregas_total},{name:"Misses",value:e.missoes_ativas}];return a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"KPIs e Anlises"}),a.jsx("p",{className:"text-muted-foreground",children:"Acompanhe as mtricas detalhadas do sistema"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Filtros de Anlise"}),a.jsx(gr,{children:"Selecione perodos e localizao para anlise comparativa"})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{const ye=new Date;c(zl(ye,7)),d(ye),f(zl(ye,14)),x(zl(ye,8))},children:"ltimos 7 dias vs anterior"}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{const ye=new Date;c(zl(ye,30)),d(ye),f(zl(ye,60)),x(zl(ye,31))},children:"ltimos 30 dias vs anterior"}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{const ye=new Date;c(zl(ye,90)),d(ye),f(zl(ye,180)),x(zl(ye,91))},children:"ltimos 90 dias vs anterior"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Perodo Atual"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Data Incio"}),a.jsxs(ng,{children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",className:Ut("w-full justify-start text-left font-normal",!l&&"text-muted-foreground"),children:[a.jsx(Gl,{className:"mr-2 h-4 w-4"}),l?Mi(l,"PPP",{locale:Wi}):"Selecione"]})}),a.jsx(Rp,{className:"w-auto p-0",align:"start",children:a.jsx(px,{mode:"single",selected:l,onSelect:c,initialFocus:!0,className:Ut("p-3 pointer-events-auto")})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Data Fim"}),a.jsxs(ng,{children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",className:Ut("w-full justify-start text-left font-normal",!u&&"text-muted-foreground"),children:[a.jsx(Gl,{className:"mr-2 h-4 w-4"}),u?Mi(u,"PPP",{locale:Wi}):"Selecione"]})}),a.jsx(Rp,{className:"w-auto p-0",align:"start",children:a.jsx(px,{mode:"single",selected:u,onSelect:d,initialFocus:!0,className:Ut("p-3 pointer-events-auto")})})]})]})]})]}),a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Perodo de Comparao"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Data Incio"}),a.jsxs(ng,{children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",className:Ut("w-full justify-start text-left font-normal",!h&&"text-muted-foreground"),children:[a.jsx(Gl,{className:"mr-2 h-4 w-4"}),h?Mi(h,"PPP",{locale:Wi}):"Selecione"]})}),a.jsx(Rp,{className:"w-auto p-0",align:"start",children:a.jsx(px,{mode:"single",selected:h,onSelect:f,initialFocus:!0,className:Ut("p-3 pointer-events-auto")})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Data Fim"}),a.jsxs(ng,{children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",className:Ut("w-full justify-start text-left font-normal",!m&&"text-muted-foreground"),children:[a.jsx(Gl,{className:"mr-2 h-4 w-4"}),m?Mi(m,"PPP",{locale:Wi}):"Selecione"]})}),a.jsx(Rp,{className:"w-auto p-0",align:"start",children:a.jsx(px,{mode:"single",selected:m,onSelect:x,initialFocus:!0,className:Ut("p-3 pointer-events-auto")})})]})]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Estado (UF)"}),a.jsxs(wi,{value:g,onValueChange:y,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Todos os estados"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:"Todos os estados"}),Array.from(new Set(E.map(ye=>ye.uf))).sort().map(ye=>a.jsx(or,{value:ye,children:ye},ye))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Cidade"}),a.jsxs(wi,{value:w,onValueChange:S,disabled:g==="todos",children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Todas as cidades"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todas",children:"Todas as cidades"}),E.filter(ye=>g==="todos"||ye.uf===g).map(ye=>ye.cidade).filter((ye,Le,Ge)=>Ge.indexOf(ye)===Le).sort().map(ye=>a.jsx(or,{value:ye,children:ye},ye))]})]})]})]})]})]}),s?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"Carregando mtricas..."})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"h-4 w-4"}),"Usurios Totais"]}),a.jsx(Ct,{className:"text-3xl",children:e.usuarios_totais})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(Cs,{className:"h-4 w-4"}),"Cooperativas Ativas"]}),a.jsx(Ct,{className:"text-3xl",children:e.cooperativas_ativas})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(Hs,{className:"h-4 w-4"}),"Entregas Realizadas"]}),a.jsx(Ct,{className:"text-3xl",children:e.entregas_total})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsxs(gr,{className:"flex items-center gap-2",children:[a.jsx(Cs,{className:"h-4 w-4"}),"Peso Total (kg)"]}),a.jsx(Ct,{className:"text-3xl",children:e.peso_total_kg})]})})]}),Y.length>0&&a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Evoluo do Peso de Resduos"}),a.jsx(gr,{children:"Comparao entre perodos (kg validados)"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:350,children:a.jsxs(mL,{data:Y,children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data",tick:{fontSize:11}}),a.jsx(Yc,{label:{value:"Peso (kg)",angle:-90,position:"insideLeft"}}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(Sd,{type:"monotone",dataKey:"Perodo Atual - Peso (kg)",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))"}}),a.jsx(Sd,{type:"monotone",dataKey:"Perodo Anterior - Peso (kg)",stroke:"hsl(var(--muted-foreground))",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"hsl(var(--muted-foreground))"}})]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Evoluo de Entregas Validadas"}),a.jsx(gr,{children:"Comparao entre perodos (quantidade)"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:350,children:a.jsxs(mL,{data:Y,children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"data",tick:{fontSize:11}}),a.jsx(Yc,{label:{value:"Entregas",angle:-90,position:"insideLeft"}}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(Sd,{type:"monotone",dataKey:"Perodo Atual - Entregas",stroke:"hsl(var(--accent))",strokeWidth:2,dot:{fill:"hsl(var(--accent))"}}),a.jsx(Sd,{type:"monotone",dataKey:"Perodo Anterior - Entregas",stroke:"hsl(var(--muted-foreground))",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"hsl(var(--muted-foreground))"}})]})})})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Hu,{className:"h-5 w-5"}),"Status dos Cupons"]}),a.jsx(gr,{children:"Distribuio de cupons por status"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(PQ,{children:[a.jsx(h0,{data:_e,cx:"50%",cy:"45%",labelLine:!0,label:({name:ye,value:Le})=>`${ye}: ${Le}`,outerRadius:70,fill:"#8884d8",dataKey:"value",children:_e.map((ye,Le)=>a.jsx(mN,{fill:tde[Le%tde.length]},`cell-${Le}`))}),a.jsx(Ga,{}),a.jsx(Kc,{verticalAlign:"bottom",height:36})]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Ql,{className:"h-5 w-5"}),"Status das Notas Fiscais"]}),a.jsx(gr,{children:"Notas fiscais pendentes vs validadas"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(N_,{data:ue,children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"name"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(nu,{dataKey:"value",fill:"hsl(var(--primary))"})]})})})]}),a.jsxs(it,{className:"md:col-span-2",children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(eu,{className:"h-5 w-5"}),"Viso Geral da Plataforma"]}),a.jsx(gr,{children:"Mtricas de engajamento e uso"})]}),a.jsx(ht,{children:a.jsx(vd,{width:"100%",height:300,children:a.jsxs(N_,{data:je,children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"name"}),a.jsx(Yc,{}),a.jsx(Ga,{}),a.jsx(Kc,{}),a.jsx(nu,{dataKey:"value",fill:"hsl(var(--accent))"})]})})})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(PRe,{className:"h-5 w-5"}),"Resduos Entregues"]}),a.jsx(gr,{children:"Anlise de resduos por cooperativa, estado e cidade"})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Cooperativa"}),a.jsxs(wi,{value:T,onValueChange:O,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Todas as cooperativas"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todas",children:"Todas as cooperativas"}),E.map(ye=>a.jsx(or,{value:ye.id,children:ye.nome_fantasia},ye.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Estado"}),a.jsxs(wi,{value:I,onValueChange:ye=>{M(ye),z("todas")},children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Todos os estados"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:"Todos os estados"}),me.map(ye=>a.jsx(or,{value:ye,children:ye},ye))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Cidade"}),a.jsxs(wi,{value:D,onValueChange:z,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Todas as cidades"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todas",children:"Todas as cidades"}),he.map(ye=>a.jsx(or,{value:ye,children:ye},ye))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Data Incio"}),a.jsxs(ng,{children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",className:Ut("w-full justify-start text-left font-normal",!F&&"text-muted-foreground"),children:[a.jsx(Gl,{className:"mr-2 h-4 w-4"}),F?Mi(F,"dd/MM/yyyy",{locale:Wi}):"Selecionar"]})}),a.jsxs(Rp,{className:"w-auto p-0",align:"start",children:[a.jsx(px,{mode:"single",selected:F,onSelect:q,initialFocus:!0,className:Ut("p-3 pointer-events-auto")}),F&&a.jsx("div",{className:"p-3 border-t",children:a.jsx(Oe,{variant:"ghost",className:"w-full",onClick:()=>q(void 0),children:"Limpar"})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Data Fim"}),a.jsxs(ng,{children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",className:Ut("w-full justify-start text-left font-normal",!Q&&"text-muted-foreground"),children:[a.jsx(Gl,{className:"mr-2 h-4 w-4"}),Q?Mi(Q,"dd/MM/yyyy",{locale:Wi}):"Selecionar"]})}),a.jsxs(Rp,{className:"w-auto p-0",align:"start",children:[a.jsx(px,{mode:"single",selected:Q,onSelect:re,disabled:ye=>F?ye<F:!1,initialFocus:!0,className:Ut("p-3 pointer-events-auto")}),Q&&a.jsx("div",{className:"p-3 border-t",children:a.jsx(Oe,{variant:"ghost",className:"w-full",onClick:()=>re(void 0),children:"Limpar"})})]})]})]})]}),K?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"Carregando dados..."})}):Z.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"Nenhum dado encontrado para os filtros selecionados"})}):a.jsx(vd,{width:"100%",height:400,children:a.jsxs(N_,{data:Z,children:[a.jsx(bf,{strokeDasharray:"3 3"}),a.jsx(Xc,{dataKey:"tipo_material"}),a.jsx(Yc,{label:{value:"Peso (kg)",angle:-90,position:"insideLeft"}}),a.jsx(Ga,{formatter:ye=>[`${ye} kg`,"Peso Total"]}),a.jsx(Kc,{}),a.jsx(nu,{dataKey:"peso_total",fill:"hsl(var(--primary))",name:"Peso Total (kg)"})]})})]})]})]})]})})}const qIt="modulepreload",HIt=function(t){return"/Ciclik_validacoes/"+t},rde={},AE=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=HIt(c),c in rde)return;rde[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":qIt,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Us(t){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Us(t)}var i0=Uint8Array,Sf=Uint16Array,RJ=Int32Array,DJ=new i0([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),MJ=new i0([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nde=new i0([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eCe=function(t,e){for(var r=new Sf(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new RJ(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},tCe=eCe(DJ,2),WIt=tCe.b,kW=tCe.r;WIt[28]=258,kW[258]=28;var GIt=eCe(MJ,0),ide=GIt.r,OW=new Sf(32768);for(var Ra=0;Ra<32768;++Ra){var o1=(Ra&43690)>>1|(Ra&21845)<<1;o1=(o1&52428)>>2|(o1&13107)<<2,o1=(o1&61680)>>4|(o1&3855)<<4,OW[Ra]=((o1&65280)>>8|(o1&255)<<8)>>1}var V4=function(t,e,r){for(var n=t.length,i=0,s=new Sf(e);i<n;++i)t[i]&&++s[t[i]-1];var o=new Sf(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(r){l=new Sf(1<<e);var c=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],h=o[t[i]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)l[OW[h]>>c]=u}else for(l=new Sf(n),i=0;i<n;++i)t[i]&&(l[i]=OW[o[t[i]-1]++]>>15-t[i]);return l},tN=new i0(288);for(var Ra=0;Ra<144;++Ra)tN[Ra]=8;for(var Ra=144;Ra<256;++Ra)tN[Ra]=9;for(var Ra=256;Ra<280;++Ra)tN[Ra]=7;for(var Ra=280;Ra<288;++Ra)tN[Ra]=8;var LL=new i0(32);for(var Ra=0;Ra<32;++Ra)LL[Ra]=5;var KIt=V4(tN,9,0),XIt=V4(LL,5,0),rCe=function(t){return(t+7)/8|0},YIt=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new i0(t.subarray(e,r))},ex=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},pT=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},CU=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:iCe,l:0};if(i==1){var o=new i0(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(T,O){return T.f-O.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=r[r[u].f<r[h].f?u++:h++],c=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var f=s[0].s,n=1;n<i;++n)s[n].s>f&&(f=s[n].s);var m=new Sf(f+1),x=IW(r[d-1],m,0);if(x>e){var n=0,g=0,y=x-e,w=1<<y;for(s.sort(function(O,I){return m[I.s]-m[O.s]||O.f-I.f});n<i;++n){var S=s[n].s;if(m[S]>e)g+=w-(1<<x-m[S]),m[S]=e;else break}for(g>>=y;g>0;){var E=s[n].s;m[E]<e?g-=1<<e-m[E]++-1:++n}for(;n>=0&&g;--n){var j=s[n].s;m[j]==e&&(--m[j],++g)}x=e}return{t:new i0(m),l:x}},IW=function(t,e,r){return t.s==-1?Math.max(IW(t.l,e,r+1),IW(t.r,e,r+1)):e[t.s]=r},sde=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Sf(++e),n=0,i=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[l]}return{c:r.subarray(0,n),n:e}},gT=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},nCe=function(t,e,r){var n=r.length,i=rCe(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},ade=function(t,e,r,n,i,s,o,l,c,u,d){ex(e,d++,r),++i[256];for(var h=CU(i,15),f=h.t,m=h.l,x=CU(s,15),g=x.t,y=x.l,w=sde(f),S=w.c,E=w.n,j=sde(g),T=j.c,O=j.n,I=new Sf(19),M=0;M<S.length;++M)++I[S[M]&31];for(var M=0;M<T.length;++M)++I[T[M]&31];for(var D=CU(I,7),z=D.t,F=D.l,q=19;q>4&&!z[nde[q-1]];--q);var Q=u+5<<3,re=gT(i,tN)+gT(s,LL)+o,Z=gT(i,f)+gT(s,g)+o+14+3*q+gT(I,z)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&Q<=re&&Q<=Z)return nCe(e,d,t.subarray(c,c+u));var se,K,X,Y;if(ex(e,d,1+(Z<re)),d+=2,Z<re){se=V4(f,m,0),K=f,X=V4(g,y,0),Y=g;var oe=V4(z,F,0);ex(e,d,E-257),ex(e,d+5,O-1),ex(e,d+10,q-4),d+=14;for(var M=0;M<q;++M)ex(e,d+3*M,z[nde[M]]);d+=3*q;for(var xe=[S,T],H=0;H<2;++H)for(var J=xe[H],M=0;M<J.length;++M){var ie=J[M]&31;ex(e,d,oe[ie]),d+=z[ie],ie>15&&(ex(e,d,J[M]>>5&127),d+=J[M]>>12)}}else se=KIt,K=tN,X=XIt,Y=LL;for(var M=0;M<l;++M){var ce=n[M];if(ce>255){var ie=ce>>18&31;pT(e,d,se[ie+257]),d+=K[ie+257],ie>7&&(ex(e,d,ce>>23&31),d+=DJ[ie]);var me=ce&31;pT(e,d,X[me]),d+=Y[me],me>3&&(pT(e,d,ce>>5&8191),d+=MJ[me])}else pT(e,d,se[ce]),d+=K[ce]}return pT(e,d,se[256]),d+K[256]},ZIt=new RJ([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),iCe=new i0(0),QIt=function(t,e,r,n,i,s){var o=s.z||t.length,l=new i0(n+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(n,l.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var h=ZIt[e-1],f=h>>13,m=h&8191,x=(1<<r)-1,g=s.p||new Sf(32768),y=s.h||new Sf(x+1),w=Math.ceil(r/3),S=2*w,E=function(Be){return(t[Be]^t[Be+1]<<w^t[Be+2]<<S)&x},j=new RJ(25e3),T=new Sf(288),O=new Sf(32),I=0,M=0,D=s.i||0,z=0,F=s.w||0,q=0;D+2<o;++D){var Q=E(D),re=D&32767,Z=y[Q];if(g[re]=Z,y[Q]=re,F<=D){var se=o-D;if((I>7e3||z>24576)&&(se>423||!u)){d=ade(t,c,0,j,T,O,M,z,q,D-q,d),z=I=M=0,q=D;for(var K=0;K<286;++K)T[K]=0;for(var K=0;K<30;++K)O[K]=0}var X=2,Y=0,oe=m,xe=re-Z&32767;if(se>2&&Q==E(D-xe))for(var H=Math.min(f,se)-1,J=Math.min(32767,D),ie=Math.min(258,se);xe<=J&&--oe&&re!=Z;){if(t[D+X]==t[D+X-xe]){for(var ce=0;ce<ie&&t[D+ce]==t[D+ce-xe];++ce);if(ce>X){if(X=ce,Y=xe,ce>H)break;for(var me=Math.min(xe,ce-2),he=0,K=0;K<me;++K){var _e=D-xe+K&32767,ue=g[_e],je=_e-ue&32767;je>he&&(he=je,Z=_e)}}}re=Z,Z=g[re],xe+=re-Z&32767}if(Y){j[z++]=268435456|kW[X]<<18|ide[Y];var ye=kW[X]&31,Le=ide[Y]&31;M+=DJ[ye]+MJ[Le],++T[257+ye],++O[Le],F=D+X,++I}else j[z++]=t[D],++T[t[D]]}}for(D=Math.max(D,F);D<o;++D)j[z++]=t[D],++T[t[D]];d=ade(t,c,u,j,T,O,M,z,q,D-q,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=y,s.p=g,s.i=D,s.w=F)}else{for(var D=s.w||0;D<o+u;D+=65535){var Ge=D+65535;Ge>=o&&(c[d/8|0]=u,Ge=o),d=nCe(c,d+1,t.subarray(D,Ge))}s.i=o}return YIt(l,0,n+rCe(d)+i)},sCe=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},JIt=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new i0(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return QIt(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},aCe=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},eRt=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=sCe();i.p(e.dictionary),aCe(t,2,i.d())}};function RW(t,e){e||(e={});var r=sCe();r.p(t);var n=JIt(t,e,e.dictionary?6:2,4);return eRt(n,e),aCe(n,n.length-4,r.d()),n}var tRt=typeof TextDecoder<"u"&&new TextDecoder,rRt=0;try{tRt.decode(iCe,{stream:!0}),rRt=1}catch{}function nRt(t){if(Array.isArray(t))return t}function iRt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ode(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function sRt(t,e){if(t){if(typeof t=="string")return ode(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ode(t,e):void 0}}function aRt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lde(t,e){return nRt(t)||iRt(t,e)||sRt(t,e)||aRt()}function cde(t,e="utf8"){return new TextDecoder(e).decode(t)}const oRt=new TextEncoder;function lRt(t){return oRt.encode(t)}const cRt=1024*8,uRt=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),TU={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class LJ{constructor(e=cRt,r={}){rr(this,"buffer");rr(this,"byteLength");rr(this,"byteOffset");rr(this,"length");rr(this,"offset");rr(this,"lastWrittenByte");rr(this,"littleEndian");rr(this,"_data");rr(this,"_mark");rr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof LJ)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=TU[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===uRt&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const c=new TU[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new TU[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return cde(this.readBytes(e))}decodeText(e=1,r="utf8"){return cde(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(lRt(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const dRt=4,ude=0,dde=1,hRt=2;function _5(t){let e=t.length;for(;--e>=0;)t[e]=0}const fRt=0,oCe=1,mRt=2,pRt=3,gRt=258,FJ=29,FI=256,UP=FI+1+FJ,CE=30,BJ=19,lCe=2*UP+1,Ww=15,PU=16,xRt=7,$J=256,cCe=16,uCe=17,dCe=18,DW=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),E6=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),vRt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),hCe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yRt=512,gx=new Array((UP+2)*2);_5(gx);const q4=new Array(CE*2);_5(q4);const zP=new Array(yRt);_5(zP);const VP=new Array(gRt-pRt+1);_5(VP);const UJ=new Array(FJ);_5(UJ);const FL=new Array(CE);_5(FL);function kU(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let fCe,mCe,pCe;function OU(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const gCe=t=>t<256?zP[t]:zP[256+(t>>>7)],qP=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},uh=(t,e,r)=>{t.bi_valid>PU-r?(t.bi_buf|=e<<t.bi_valid&65535,qP(t,t.bi_buf),t.bi_buf=e>>PU-t.bi_valid,t.bi_valid+=r-PU):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},cg=(t,e,r)=>{uh(t,r[e*2],r[e*2+1])},xCe=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},bRt=t=>{t.bi_valid===16?(qP(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},wRt=(t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,l=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,d,h,f,m,x,g=0;for(f=0;f<=Ww;f++)t.bl_count[f]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<lCe;u++)d=t.heap[u],f=r[r[d*2+1]*2+1]+1,f>c&&(f=c,g++),r[d*2+1]=f,!(d>n)&&(t.bl_count[f]++,m=0,d>=l&&(m=o[d-l]),x=r[d*2],t.opt_len+=x*(f+m),s&&(t.static_len+=x*(i[d*2+1]+m)));if(g!==0){do{for(f=c-1;t.bl_count[f]===0;)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(f=c;f!==0;f--)for(d=t.bl_count[f];d!==0;)h=t.heap[--u],!(h>n)&&(r[h*2+1]!==f&&(t.opt_len+=(f-r[h*2+1])*r[h*2],r[h*2+1]=f),d--)}},vCe=(t,e,r)=>{const n=new Array(Ww+1);let i=0,s,o;for(s=1;s<=Ww;s++)i=i+r[s-1]<<1,n[s]=i;for(o=0;o<=e;o++){let l=t[o*2+1];l!==0&&(t[o*2]=xCe(n[l]++,l))}},_Rt=()=>{let t,e,r,n,i;const s=new Array(Ww+1);for(r=0,n=0;n<FJ-1;n++)for(UJ[n]=r,t=0;t<1<<DW[n];t++)VP[r++]=n;for(VP[r-1]=n,i=0,n=0;n<16;n++)for(FL[n]=i,t=0;t<1<<E6[n];t++)zP[i++]=n;for(i>>=7;n<CE;n++)for(FL[n]=i<<7,t=0;t<1<<E6[n]-7;t++)zP[256+i++]=n;for(e=0;e<=Ww;e++)s[e]=0;for(t=0;t<=143;)gx[t*2+1]=8,t++,s[8]++;for(;t<=255;)gx[t*2+1]=9,t++,s[9]++;for(;t<=279;)gx[t*2+1]=7,t++,s[7]++;for(;t<=287;)gx[t*2+1]=8,t++,s[8]++;for(vCe(gx,UP+1,s),t=0;t<CE;t++)q4[t*2+1]=5,q4[t*2]=xCe(t,5);fCe=new kU(gx,DW,FI+1,UP,Ww),mCe=new kU(q4,E6,0,CE,Ww),pCe=new kU(new Array(0),vRt,0,BJ,xRt)},yCe=t=>{let e;for(e=0;e<UP;e++)t.dyn_ltree[e*2]=0;for(e=0;e<CE;e++)t.dyn_dtree[e*2]=0;for(e=0;e<BJ;e++)t.bl_tree[e*2]=0;t.dyn_ltree[$J*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bCe=t=>{t.bi_valid>8?qP(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},hde=(t,e,r,n)=>{const i=e*2,s=r*2;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]},IU=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&hde(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!hde(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},fde=(t,e,r)=>{let n,i,s=0,o,l;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+s++]&255,n+=(t.pending_buf[t.sym_buf+s++]&255)<<8,i=t.pending_buf[t.sym_buf+s++],n===0?cg(t,i,e):(o=VP[i],cg(t,o+FI+1,e),l=DW[o],l!==0&&(i-=UJ[o],uh(t,i,l)),n--,o=gCe(n),cg(t,o,r),l=E6[o],l!==0&&(n-=FL[o],uh(t,n,l)));while(s<t.sym_next);cg(t,$J,e)},MW=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,l,c=-1,u;for(t.heap_len=0,t.heap_max=lCe,o=0;o<s;o++)r[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=n[u*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)IU(t,r,o);u=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],IU(t,r,1),l=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=l,r[u*2]=r[o*2]+r[l*2],t.depth[u]=(t.depth[o]>=t.depth[l]?t.depth[o]:t.depth[l])+1,r[o*2+1]=r[l*2+1]=u,t.heap[1]=u++,IU(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],wRt(t,e),vCe(r,c,t.bl_count)},mde=(t,e,r)=>{let n,i=-1,s,o=e[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)s=o,o=e[(n+1)*2+1],!(++l<c&&s===o)&&(l<u?t.bl_tree[s*2]+=l:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[cCe*2]++):l<=10?t.bl_tree[uCe*2]++:t.bl_tree[dCe*2]++,l=0,i=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4))},pde=(t,e,r)=>{let n,i=-1,s,o=e[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),n=0;n<=r;n++)if(s=o,o=e[(n+1)*2+1],!(++l<c&&s===o)){if(l<u)do cg(t,s,t.bl_tree);while(--l!==0);else s!==0?(s!==i&&(cg(t,s,t.bl_tree),l--),cg(t,cCe,t.bl_tree),uh(t,l-3,2)):l<=10?(cg(t,uCe,t.bl_tree),uh(t,l-3,3)):(cg(t,dCe,t.bl_tree),uh(t,l-11,7));l=0,i=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4)}},NRt=t=>{let e;for(mde(t,t.dyn_ltree,t.l_desc.max_code),mde(t,t.dyn_dtree,t.d_desc.max_code),MW(t,t.bl_desc),e=BJ-1;e>=3&&t.bl_tree[hCe[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},SRt=(t,e,r,n)=>{let i;for(uh(t,e-257,5),uh(t,r-1,5),uh(t,n-4,4),i=0;i<n;i++)uh(t,t.bl_tree[hCe[i]*2+1],3);pde(t,t.dyn_ltree,e-1),pde(t,t.dyn_dtree,r-1)},ERt=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return ude;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return dde;for(r=32;r<FI;r++)if(t.dyn_ltree[r*2]!==0)return dde;return ude};let gde=!1;const jRt=t=>{gde||(_Rt(),gde=!0),t.l_desc=new OU(t.dyn_ltree,fCe),t.d_desc=new OU(t.dyn_dtree,mCe),t.bl_desc=new OU(t.bl_tree,pCe),t.bi_buf=0,t.bi_valid=0,yCe(t)},wCe=(t,e,r,n)=>{uh(t,(fRt<<1)+(n?1:0),3),bCe(t),qP(t,r),qP(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},ARt=t=>{uh(t,oCe<<1,3),cg(t,$J,gx),bRt(t)},CRt=(t,e,r,n)=>{let i,s,o=0;t.level>0?(t.strm.data_type===hRt&&(t.strm.data_type=ERt(t)),MW(t,t.l_desc),MW(t,t.d_desc),o=NRt(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&e!==-1?wCe(t,e,r,n):t.strategy===dRt||s===i?(uh(t,(oCe<<1)+(n?1:0),3),fde(t,gx,q4)):(uh(t,(mRt<<1)+(n?1:0),3),SRt(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),fde(t,t.dyn_ltree,t.dyn_dtree)),yCe(t),n&&bCe(t)},TRt=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(VP[r]+FI+1)*2]++,t.dyn_dtree[gCe(e)*2]++),t.sym_next===t.sym_end);var PRt=jRt,kRt=wCe,ORt=CRt,IRt=TRt,RRt=ARt,DRt={_tr_init:PRt,_tr_stored_block:kRt,_tr_flush_block:ORt,_tr_tally:IRt,_tr_align:RRt};const MRt=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+e[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var HP=MRt;const LRt=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},FRt=new Uint32Array(LRt()),BRt=(t,e,r,n)=>{const i=FRt,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var lc=BRt,NC={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},BI={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:$Rt,_tr_stored_block:LW,_tr_flush_block:URt,_tr_tally:db,_tr_align:zRt}=DRt,{Z_NO_FLUSH:hb,Z_PARTIAL_FLUSH:VRt,Z_FULL_FLUSH:qRt,Z_FINISH:vm,Z_BLOCK:xde,Z_OK:zc,Z_STREAM_END:vde,Z_STREAM_ERROR:Ag,Z_DATA_ERROR:HRt,Z_BUF_ERROR:RU,Z_DEFAULT_COMPRESSION:WRt,Z_FILTERED:GRt,Z_HUFFMAN_ONLY:ND,Z_RLE:KRt,Z_FIXED:XRt,Z_DEFAULT_STRATEGY:YRt,Z_UNKNOWN:ZRt,Z_DEFLATED:kB}=BI,QRt=9,JRt=15,eDt=8,tDt=29,rDt=256,FW=rDt+1+tDt,nDt=30,iDt=19,sDt=2*FW+1,aDt=15,Yi=3,Vy=258,Cg=Vy+Yi+1,oDt=32,SC=42,zJ=57,BW=69,$W=73,UW=91,zW=103,Gw=113,FT=666,Ed=1,N5=2,rN=3,S5=4,lDt=3,Kw=(t,e)=>(t.msg=NC[e],e),yde=t=>t*2-(t>4?9:0),A1=t=>{let e=t.length;for(;--e>=0;)t[e]=0},cDt=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=i?r-i:0;while(--e);e=i,n=e;do r=t.prev[--n],t.prev[n]=r>=i?r-i:0;while(--e)};let uDt=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,fb=uDt;const zh=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},Ef=(t,e)=>{URt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,zh(t.strm)},Ns=(t,e)=>{t.pending_buf[t.pending++]=e},xT=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},VW=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),t.state.wrap===1?t.adler=HP(t.adler,e,i,r):t.state.wrap===2&&(t.adler=lc(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},_Ce=(t,e)=>{let r=t.max_chain_length,n=t.strstart,i,s,o=t.prev_length,l=t.nice_match;const c=t.strstart>t.w_size-Cg?t.strstart-(t.w_size-Cg):0,u=t.window,d=t.w_mask,h=t.prev,f=t.strstart+Vy;let m=u[n+o-1],x=u[n+o];t.prev_length>=t.good_match&&(r>>=2),l>t.lookahead&&(l=t.lookahead);do if(i=e,!(u[i+o]!==x||u[i+o-1]!==m||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<f);if(s=Vy-(f-n),n=f-Vy,s>o){if(t.match_start=e,o=s,s>=l)break;m=u[n+o-1],x=u[n+o]}}while((e=h[e&d])>c&&--r!==0);return o<=t.lookahead?o:t.lookahead},EC=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Cg)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),cDt(t),n+=e),t.strm.avail_in===0)break;if(r=VW(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=Yi)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=fb(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=fb(t,t.ins_h,t.window[i+Yi-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<Yi)););}while(t.lookahead<Cg&&t.strm.avail_in!==0)},NCe=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,i,s,o=0,l=t.strm.avail_in;do{if(n=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s||(s=t.strm.avail_out-s,i=t.strstart-t.block_start,n>i+t.strm.avail_in&&(n=i+t.strm.avail_in),n>s&&(n=s),n<r&&(n===0&&e!==vm||e===hb||n!==i+t.strm.avail_in)))break;o=e===vm&&n===i+t.strm.avail_in?1:0,LW(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,zh(t.strm),i&&(i>n&&(i=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,n-=i),n&&(VW(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(o===0);return l-=t.strm.avail_in,l&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?S5:e!==hb&&e!==vm&&t.strm.avail_in===0&&t.strstart===t.block_start?N5:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(VW(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,r=s>t.w_size?t.w_size:s,i=t.strstart-t.block_start,(i>=r||(i||e===vm)&&e!==hb&&t.strm.avail_in===0&&i<=s)&&(n=i>s?s:i,o=e===vm&&t.strm.avail_in===0&&n===i?1:0,LW(t,t.block_start,n,o),t.block_start+=n,zh(t.strm)),o?rN:Ed)},DU=(t,e)=>{let r,n;for(;;){if(t.lookahead<Cg){if(EC(t),t.lookahead<Cg&&e===hb)return Ed;if(t.lookahead===0)break}if(r=0,t.lookahead>=Yi&&(t.ins_h=fb(t,t.ins_h,t.window[t.strstart+Yi-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Cg&&(t.match_length=_Ce(t,r)),t.match_length>=Yi)if(n=db(t,t.strstart-t.match_start,t.match_length-Yi),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Yi){t.match_length--;do t.strstart++,t.ins_h=fb(t,t.ins_h,t.window[t.strstart+Yi-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=fb(t,t.ins_h,t.window[t.strstart+1]);else n=db(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Ef(t,!1),t.strm.avail_out===0))return Ed}return t.insert=t.strstart<Yi-1?t.strstart:Yi-1,e===vm?(Ef(t,!0),t.strm.avail_out===0?rN:S5):t.sym_next&&(Ef(t,!1),t.strm.avail_out===0)?Ed:N5},sS=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<Cg){if(EC(t),t.lookahead<Cg&&e===hb)return Ed;if(t.lookahead===0)break}if(r=0,t.lookahead>=Yi&&(t.ins_h=fb(t,t.ins_h,t.window[t.strstart+Yi-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Yi-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Cg&&(t.match_length=_Ce(t,r),t.match_length<=5&&(t.strategy===GRt||t.match_length===Yi&&t.strstart-t.match_start>4096)&&(t.match_length=Yi-1)),t.prev_length>=Yi&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-Yi,n=db(t,t.strstart-1-t.prev_match,t.prev_length-Yi),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=fb(t,t.ins_h,t.window[t.strstart+Yi-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Yi-1,t.strstart++,n&&(Ef(t,!1),t.strm.avail_out===0))return Ed}else if(t.match_available){if(n=db(t,0,t.window[t.strstart-1]),n&&Ef(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Ed}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=db(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Yi-1?t.strstart:Yi-1,e===vm?(Ef(t,!0),t.strm.avail_out===0?rN:S5):t.sym_next&&(Ef(t,!1),t.strm.avail_out===0)?Ed:N5},dDt=(t,e)=>{let r,n,i,s;const o=t.window;for(;;){if(t.lookahead<=Vy){if(EC(t),t.lookahead<=Vy&&e===hb)return Ed;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Yi&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=t.strstart+Vy;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=Vy-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Yi?(r=db(t,1,t.match_length-Yi),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=db(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Ef(t,!1),t.strm.avail_out===0))return Ed}return t.insert=0,e===vm?(Ef(t,!0),t.strm.avail_out===0?rN:S5):t.sym_next&&(Ef(t,!1),t.strm.avail_out===0)?Ed:N5},hDt=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(EC(t),t.lookahead===0)){if(e===hb)return Ed;break}if(t.match_length=0,r=db(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Ef(t,!1),t.strm.avail_out===0))return Ed}return t.insert=0,e===vm?(Ef(t,!0),t.strm.avail_out===0?rN:S5):t.sym_next&&(Ef(t,!1),t.strm.avail_out===0)?Ed:N5};function w0(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const BT=[new w0(0,0,0,0,NCe),new w0(4,4,8,4,DU),new w0(4,5,16,8,DU),new w0(4,6,32,32,DU),new w0(4,4,16,16,sS),new w0(8,16,32,32,sS),new w0(8,16,128,128,sS),new w0(8,32,128,256,sS),new w0(32,128,258,1024,sS),new w0(32,258,258,4096,sS)],fDt=t=>{t.window_size=2*t.w_size,A1(t.head),t.max_lazy_match=BT[t.level].max_lazy,t.good_match=BT[t.level].good_length,t.nice_match=BT[t.level].nice_length,t.max_chain_length=BT[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Yi-1,t.match_available=0,t.ins_h=0};function mDt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=kB,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(sDt*2),this.dyn_dtree=new Uint16Array((2*nDt+1)*2),this.bl_tree=new Uint16Array((2*iDt+1)*2),A1(this.dyn_ltree),A1(this.dyn_dtree),A1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(aDt+1),this.heap=new Uint16Array(2*FW+1),A1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*FW+1),A1(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $I=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==SC&&e.status!==zJ&&e.status!==BW&&e.status!==$W&&e.status!==UW&&e.status!==zW&&e.status!==Gw&&e.status!==FT?1:0},SCe=t=>{if($I(t))return Kw(t,Ag);t.total_in=t.total_out=0,t.data_type=ZRt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?zJ:e.wrap?SC:Gw,t.adler=e.wrap===2?0:1,e.last_flush=-2,$Rt(e),zc},ECe=t=>{const e=SCe(t);return e===zc&&fDt(t.state),e},pDt=(t,e)=>$I(t)||t.state.wrap!==2?Ag:(t.state.gzhead=e,zc),jCe=(t,e,r,n,i,s)=>{if(!t)return Ag;let o=1;if(e===WRt&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>QRt||r!==kB||n<8||n>15||e<0||e>9||s<0||s>XRt||n===8&&o!==1)return Kw(t,Ag);n===8&&(n=9);const l=new mDt;return t.state=l,l.strm=t,l.status=SC,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Yi-1)/Yi),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=e,l.strategy=s,l.method=r,ECe(t)},gDt=(t,e)=>jCe(t,e,kB,JRt,eDt,YRt),xDt=(t,e)=>{if($I(t)||e>xde||e<0)return t?Kw(t,Ag):Ag;const r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===FT&&e!==vm)return Kw(t,t.avail_out===0?RU:Ag);const n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(zh(t),t.avail_out===0)return r.last_flush=-1,zc}else if(t.avail_in===0&&yde(e)<=yde(n)&&e!==vm)return Kw(t,RU);if(r.status===FT&&t.avail_in!==0)return Kw(t,RU);if(r.status===SC&&r.wrap===0&&(r.status=Gw),r.status===SC){let i=kB+(r.w_bits-8<<4)<<8,s=-1;if(r.strategy>=ND||r.level<2?s=0:r.level<6?s=1:r.level===6?s=2:s=3,i|=s<<6,r.strstart!==0&&(i|=oDt),i+=31-i%31,xT(r,i),r.strstart!==0&&(xT(r,t.adler>>>16),xT(r,t.adler&65535)),t.adler=1,r.status=Gw,zh(t),r.pending!==0)return r.last_flush=-1,zc}if(r.status===zJ){if(t.adler=0,Ns(r,31),Ns(r,139),Ns(r,8),r.gzhead)Ns(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ns(r,r.gzhead.time&255),Ns(r,r.gzhead.time>>8&255),Ns(r,r.gzhead.time>>16&255),Ns(r,r.gzhead.time>>24&255),Ns(r,r.level===9?2:r.strategy>=ND||r.level<2?4:0),Ns(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Ns(r,r.gzhead.extra.length&255),Ns(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=lc(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=BW;else if(Ns(r,0),Ns(r,0),Ns(r,0),Ns(r,0),Ns(r,0),Ns(r,r.level===9?2:r.strategy>=ND||r.level<2?4:0),Ns(r,lDt),r.status=Gw,zh(t),r.pending!==0)return r.last_flush=-1,zc}if(r.status===BW){if(r.gzhead.extra){let i=r.pending,s=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+s>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(t.adler=lc(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=l,zh(t),r.pending!==0)return r.last_flush=-1,zc;i=0,s-=l}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending+=s,r.gzhead.hcrc&&r.pending>i&&(t.adler=lc(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=$W}if(r.status===$W){if(r.gzhead.name){let i=r.pending,s;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(t.adler=lc(t.adler,r.pending_buf,r.pending-i,i)),zh(t),r.pending!==0)return r.last_flush=-1,zc;i=0}r.gzindex<r.gzhead.name.length?s=r.gzhead.name.charCodeAt(r.gzindex++)&255:s=0,Ns(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=lc(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=UW}if(r.status===UW){if(r.gzhead.comment){let i=r.pending,s;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(t.adler=lc(t.adler,r.pending_buf,r.pending-i,i)),zh(t),r.pending!==0)return r.last_flush=-1,zc;i=0}r.gzindex<r.gzhead.comment.length?s=r.gzhead.comment.charCodeAt(r.gzindex++)&255:s=0,Ns(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=lc(t.adler,r.pending_buf,r.pending-i,i))}r.status=zW}if(r.status===zW){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(zh(t),r.pending!==0))return r.last_flush=-1,zc;Ns(r,t.adler&255),Ns(r,t.adler>>8&255),t.adler=0}if(r.status=Gw,zh(t),r.pending!==0)return r.last_flush=-1,zc}if(t.avail_in!==0||r.lookahead!==0||e!==hb&&r.status!==FT){let i=r.level===0?NCe(r,e):r.strategy===ND?hDt(r,e):r.strategy===KRt?dDt(r,e):BT[r.level].func(r,e);if((i===rN||i===S5)&&(r.status=FT),i===Ed||i===rN)return t.avail_out===0&&(r.last_flush=-1),zc;if(i===N5&&(e===VRt?zRt(r):e!==xde&&(LW(r,0,0,!1),e===qRt&&(A1(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),zh(t),t.avail_out===0))return r.last_flush=-1,zc}return e!==vm?zc:r.wrap<=0?vde:(r.wrap===2?(Ns(r,t.adler&255),Ns(r,t.adler>>8&255),Ns(r,t.adler>>16&255),Ns(r,t.adler>>24&255),Ns(r,t.total_in&255),Ns(r,t.total_in>>8&255),Ns(r,t.total_in>>16&255),Ns(r,t.total_in>>24&255)):(xT(r,t.adler>>>16),xT(r,t.adler&65535)),zh(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?zc:vde)},vDt=t=>{if($I(t))return Ag;const e=t.state.status;return t.state=null,e===Gw?Kw(t,HRt):zc},yDt=(t,e)=>{let r=e.length;if($I(t))return Ag;const n=t.state,i=n.wrap;if(i===2||i===1&&n.status!==SC||n.lookahead)return Ag;if(i===1&&(t.adler=HP(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){i===0&&(A1(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(r-n.w_size,r),0),e=c,r=n.w_size}const s=t.avail_in,o=t.next_in,l=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,EC(n);n.lookahead>=Yi;){let c=n.strstart,u=n.lookahead-(Yi-1);do n.ins_h=fb(n,n.ins_h,n.window[c+Yi-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=Yi-1,EC(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Yi-1,n.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,n.wrap=i,zc};var bDt=gDt,wDt=jCe,_Dt=ECe,NDt=SCe,SDt=pDt,EDt=xDt,jDt=vDt,ADt=yDt,CDt="pako deflate (from Nodeca project)",H4={deflateInit:bDt,deflateInit2:wDt,deflateReset:_Dt,deflateResetKeep:NDt,deflateSetHeader:SDt,deflate:EDt,deflateEnd:jDt,deflateSetDictionary:ADt,deflateInfo:CDt};const TDt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var PDt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)TDt(r,n)&&(t[n]=r[n])}}return t},kDt=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let o=t[n];r.set(o,i),i+=o.length}return r},OB={assign:PDt,flattenChunks:kDt};let ACe=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ACe=!1}const WP=new Uint8Array(256);for(let t=0;t<256;t++)WP[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;WP[254]=WP[254]=1;var ODt=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,o=t.length,l=0;for(i=0;i<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const IDt=(t,e)=>{if(e<65534&&t.subarray&&ACe)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var RDt=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let o=t[n++];if(o<128){s[i++]=o;continue}let l=WP[o];if(l>4){s[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return IDt(s,i)},DDt=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+WP[t[r]]>e?r:e},GP={string2buf:ODt,buf2string:RDt,utf8border:DDt};function MDt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var CCe=MDt;const TCe=Object.prototype.toString,{Z_NO_FLUSH:LDt,Z_SYNC_FLUSH:FDt,Z_FULL_FLUSH:BDt,Z_FINISH:$Dt,Z_OK:BL,Z_STREAM_END:UDt,Z_DEFAULT_COMPRESSION:zDt,Z_DEFAULT_STRATEGY:VDt,Z_DEFLATED:qDt}=BI;function VJ(t){this.options=OB.assign({level:zDt,method:qDt,chunkSize:16384,windowBits:15,memLevel:8,strategy:VDt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CCe,this.strm.avail_out=0;let r=H4.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==BL)throw new Error(NC[r]);if(e.header&&H4.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=GP.string2buf(e.dictionary):TCe.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=H4.deflateSetDictionary(this.strm,n),r!==BL)throw new Error(NC[r]);this._dict_set=!0}}VJ.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?$Dt:LDt,typeof t=="string"?r.input=GP.string2buf(t):TCe.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===FDt||s===BDt)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=H4.deflate(r,s),i===UDt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=H4.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===BL;if(r.avail_out===0){this.onData(r.output);continue}if(s>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};VJ.prototype.onData=function(t){this.chunks.push(t)};VJ.prototype.onEnd=function(t){t===BL&&(this.result=OB.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const SD=16209,HDt=16191;var WDt=function(e,r){let n,i,s,o,l,c,u,d,h,f,m,x,g,y,w,S,E,j,T,O,I,M,D,z;const F=e.state;n=e.next_in,D=e.input,i=n+(e.avail_in-5),s=e.next_out,z=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=F.dmax,u=F.wsize,d=F.whave,h=F.wnext,f=F.window,m=F.hold,x=F.bits,g=F.lencode,y=F.distcode,w=(1<<F.lenbits)-1,S=(1<<F.distbits)-1;e:do{x<15&&(m+=D[n++]<<x,x+=8,m+=D[n++]<<x,x+=8),E=g[m&w];t:for(;;){if(j=E>>>24,m>>>=j,x-=j,j=E>>>16&255,j===0)z[s++]=E&65535;else if(j&16){T=E&65535,j&=15,j&&(x<j&&(m+=D[n++]<<x,x+=8),T+=m&(1<<j)-1,m>>>=j,x-=j),x<15&&(m+=D[n++]<<x,x+=8,m+=D[n++]<<x,x+=8),E=y[m&S];r:for(;;){if(j=E>>>24,m>>>=j,x-=j,j=E>>>16&255,j&16){if(O=E&65535,j&=15,x<j&&(m+=D[n++]<<x,x+=8,x<j&&(m+=D[n++]<<x,x+=8)),O+=m&(1<<j)-1,O>c){e.msg="invalid distance too far back",F.mode=SD;break e}if(m>>>=j,x-=j,j=s-o,O>j){if(j=O-j,j>d&&F.sane){e.msg="invalid distance too far back",F.mode=SD;break e}if(I=0,M=f,h===0){if(I+=u-j,j<T){T-=j;do z[s++]=f[I++];while(--j);I=s-O,M=z}}else if(h<j){if(I+=u+h-j,j-=h,j<T){T-=j;do z[s++]=f[I++];while(--j);if(I=0,h<T){j=h,T-=j;do z[s++]=f[I++];while(--j);I=s-O,M=z}}}else if(I+=h-j,j<T){T-=j;do z[s++]=f[I++];while(--j);I=s-O,M=z}for(;T>2;)z[s++]=M[I++],z[s++]=M[I++],z[s++]=M[I++],T-=3;T&&(z[s++]=M[I++],T>1&&(z[s++]=M[I++]))}else{I=s-O;do z[s++]=z[I++],z[s++]=z[I++],z[s++]=z[I++],T-=3;while(T>2);T&&(z[s++]=z[I++],T>1&&(z[s++]=z[I++]))}}else if(j&64){e.msg="invalid distance code",F.mode=SD;break e}else{E=y[(E&65535)+(m&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){F.mode=HDt;break e}else{e.msg="invalid literal/length code",F.mode=SD;break e}else{E=g[(E&65535)+(m&(1<<j)-1)];continue t}break}}while(n<i&&s<l);T=x>>3,n-=T,x-=T<<3,m&=(1<<x)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<l?257+(l-s):257-(s-l),F.hold=m,F.bits=x};const aS=15,bde=852,wde=592,_de=0,MU=1,Nde=2,GDt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),KDt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XDt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),YDt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ZDt=(t,e,r,n,i,s,o,l)=>{const c=l.bits;let u=0,d=0,h=0,f=0,m=0,x=0,g=0,y=0,w=0,S=0,E,j,T,O,I,M=null,D;const z=new Uint16Array(aS+1),F=new Uint16Array(aS+1);let q=null,Q,re,Z;for(u=0;u<=aS;u++)z[u]=0;for(d=0;d<n;d++)z[e[r+d]]++;for(m=c,f=aS;f>=1&&z[f]===0;f--);if(m>f&&(m=f),f===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<f&&z[h]===0;h++);for(m<h&&(m=h),y=1,u=1;u<=aS;u++)if(y<<=1,y-=z[u],y<0)return-1;if(y>0&&(t===_de||f!==1))return-1;for(F[1]=0,u=1;u<aS;u++)F[u+1]=F[u]+z[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[F[e[r+d]]++]=d);if(t===_de?(M=q=o,D=20):t===MU?(M=GDt,q=KDt,D=257):(M=XDt,q=YDt,D=0),S=0,d=0,u=h,I=s,x=m,g=0,T=-1,w=1<<m,O=w-1,t===MU&&w>bde||t===Nde&&w>wde)return 1;for(;;){Q=u-g,o[d]+1<D?(re=0,Z=o[d]):o[d]>=D?(re=q[o[d]-D],Z=M[o[d]-D]):(re=96,Z=0),E=1<<u-g,j=1<<x,h=j;do j-=E,i[I+(S>>g)+j]=Q<<24|re<<16|Z|0;while(j!==0);for(E=1<<u-1;S&E;)E>>=1;if(E!==0?(S&=E-1,S+=E):S=0,d++,--z[u]===0){if(u===f)break;u=e[r+o[d]]}if(u>m&&(S&O)!==T){for(g===0&&(g=m),I+=h,x=u-g,y=1<<x;x+g<f&&(y-=z[x+g],!(y<=0));)x++,y<<=1;if(w+=1<<x,t===MU&&w>bde||t===Nde&&w>wde)return 1;T=S&O,i[T]=m<<24|x<<16|I-s|0}}return S!==0&&(i[I+S]=u-g<<24|64<<16|0),l.bits=m,0};var W4=ZDt;const QDt=0,PCe=1,kCe=2,{Z_FINISH:Sde,Z_BLOCK:JDt,Z_TREES:ED,Z_OK:nN,Z_STREAM_END:e6t,Z_NEED_DICT:t6t,Z_STREAM_ERROR:Bm,Z_DATA_ERROR:OCe,Z_MEM_ERROR:ICe,Z_BUF_ERROR:r6t,Z_DEFLATED:Ede}=BI,IB=16180,jde=16181,Ade=16182,Cde=16183,Tde=16184,Pde=16185,kde=16186,Ode=16187,Ide=16188,Rde=16189,$L=16190,tx=16191,LU=16192,Dde=16193,FU=16194,Mde=16195,Lde=16196,Fde=16197,Bde=16198,jD=16199,AD=16200,$de=16201,Ude=16202,zde=16203,Vde=16204,qde=16205,BU=16206,Hde=16207,Wde=16208,Ua=16209,RCe=16210,DCe=16211,n6t=852,i6t=592,s6t=15,a6t=s6t,Gde=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function o6t(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const jN=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<IB||e.mode>DCe?1:0},MCe=t=>{if(jN(t))return Bm;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=IB,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(n6t),e.distcode=e.distdyn=new Int32Array(i6t),e.sane=1,e.back=-1,nN},LCe=t=>{if(jN(t))return Bm;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,MCe(t)},FCe=(t,e)=>{let r;if(jN(t))return Bm;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Bm:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,LCe(t))},BCe=(t,e)=>{if(!t)return Bm;const r=new o6t;t.state=r,r.strm=t,r.window=null,r.mode=IB;const n=FCe(t,e);return n!==nN&&(t.state=null),n},l6t=t=>BCe(t,a6t);let Kde=!0,$U,UU;const c6t=t=>{if(Kde){$U=new Int32Array(512),UU=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(W4(PCe,t.lens,0,288,$U,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;W4(kCe,t.lens,0,32,UU,0,t.work,{bits:5}),Kde=!1}t.lencode=$U,t.lenbits=9,t.distcode=UU,t.distbits=5},$Ce=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},u6t=(t,e)=>{let r,n,i,s,o,l,c,u,d,h,f,m,x,g,y=0,w,S,E,j,T,O,I,M;const D=new Uint8Array(4);let z,F;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jN(t)||!t.output||!t.input&&t.avail_in!==0)return Bm;r=t.state,r.mode===tx&&(r.mode=LU),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,h=l,f=c,M=nN;e:for(;;)switch(r.mode){case IB:if(r.wrap===0){r.mode=LU;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,D[0]=u&255,D[1]=u>>>8&255,r.check=lc(r.check,D,2,0),u=0,d=0,r.mode=jde;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Ua;break}if((u&15)!==Ede){t.msg="unknown compression method",r.mode=Ua;break}if(u>>>=4,d-=4,I=(u&15)+8,r.wbits===0&&(r.wbits=I),I>15||I>r.wbits){t.msg="invalid window size",r.mode=Ua;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?Rde:tx,u=0,d=0;break;case jde:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==Ede){t.msg="unknown compression method",r.mode=Ua;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Ua;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,r.check=lc(r.check,D,2,0)),u=0,d=0,r.mode=Ade;case Ade:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,D[2]=u>>>16&255,D[3]=u>>>24&255,r.check=lc(r.check,D,4,0)),u=0,d=0,r.mode=Cde;case Cde:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,r.check=lc(r.check,D,2,0)),u=0,d=0,r.mode=Tde;case Tde:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,r.check=lc(r.check,D,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=Pde;case Pde:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+m),I)),r.flags&512&&r.wrap&4&&(r.check=lc(r.check,n,m,s)),l-=m,s+=m,r.length-=m),r.length))break e;r.length=0,r.mode=kde;case kde:if(r.flags&2048){if(l===0)break e;m=0;do I=n[s+m++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I));while(I&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=lc(r.check,n,m,s)),l-=m,s+=m,I)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Ode;case Ode:if(r.flags&4096){if(l===0)break e;m=0;do I=n[s+m++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I));while(I&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=lc(r.check,n,m,s)),l-=m,s+=m,I)break e}else r.head&&(r.head.comment=null);r.mode=Ide;case Ide:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Ua;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=tx;break;case Rde:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=Gde(u),u=0,d=0,r.mode=$L;case $L:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,t6t;t.adler=r.check=1,r.mode=tx;case tx:if(e===JDt||e===ED)break e;case LU:if(r.last){u>>>=d&7,d-=d&7,r.mode=BU;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=Dde;break;case 1:if(c6t(r),r.mode=jD,e===ED){u>>>=2,d-=2;break e}break;case 2:r.mode=Lde;break;case 3:t.msg="invalid block type",r.mode=Ua}u>>>=2,d-=2;break;case Dde:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Ua;break}if(r.length=u&65535,u=0,d=0,r.mode=FU,e===ED)break e;case FU:r.mode=Mde;case Mde:if(m=r.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;i.set(n.subarray(s,s+m),o),l-=m,s+=m,c-=m,o+=m,r.length-=m;break}r.mode=tx;break;case Lde:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Ua;break}r.have=0,r.mode=Fde;case Fde:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[q[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},M=W4(QDt,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,M){t.msg="invalid code lengths set",r.mode=Ua;break}r.have=0,r.mode=Bde;case Bde:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[u&(1<<r.lenbits)-1],w=y>>>24,S=y>>>16&255,E=y&65535,!(w<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(E<16)u>>>=w,d-=w,r.lens[r.have++]=E;else{if(E===16){for(F=w+2;d<F;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=w,d-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=Ua;break}I=r.lens[r.have-1],m=3+(u&3),u>>>=2,d-=2}else if(E===17){for(F=w+3;d<F;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,I=0,m=3+(u&7),u>>>=3,d-=3}else{for(F=w+7;d<F;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,I=0,m=11+(u&127),u>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Ua;break}for(;m--;)r.lens[r.have++]=I}}if(r.mode===Ua)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Ua;break}if(r.lenbits=9,z={bits:r.lenbits},M=W4(PCe,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,M){t.msg="invalid literal/lengths set",r.mode=Ua;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},M=W4(kCe,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,M){t.msg="invalid distances set",r.mode=Ua;break}if(r.mode=jD,e===ED)break e;case jD:r.mode=AD;case AD:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,WDt(t,f),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===tx&&(r.back=-1);break}for(r.back=0;y=r.lencode[u&(1<<r.lenbits)-1],w=y>>>24,S=y>>>16&255,E=y&65535,!(w<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(S&&!(S&240)){for(j=w,T=S,O=E;y=r.lencode[O+((u&(1<<j+T)-1)>>j)],w=y>>>24,S=y>>>16&255,E=y&65535,!(j+w<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=w,d-=w,r.back+=w,r.length=E,S===0){r.mode=qde;break}if(S&32){r.back=-1,r.mode=tx;break}if(S&64){t.msg="invalid literal/length code",r.mode=Ua;break}r.extra=S&15,r.mode=$de;case $de:if(r.extra){for(F=r.extra;d<F;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Ude;case Ude:for(;y=r.distcode[u&(1<<r.distbits)-1],w=y>>>24,S=y>>>16&255,E=y&65535,!(w<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(S&240)){for(j=w,T=S,O=E;y=r.distcode[O+((u&(1<<j+T)-1)>>j)],w=y>>>24,S=y>>>16&255,E=y&65535,!(j+w<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=j,d-=j,r.back+=j}if(u>>>=w,d-=w,r.back+=w,S&64){t.msg="invalid distance code",r.mode=Ua;break}r.offset=E,r.extra=S&15,r.mode=zde;case zde:if(r.extra){for(F=r.extra;d<F;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Ua;break}r.mode=Vde;case Vde:if(c===0)break e;if(m=f-c,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Ua;break}m>r.wnext?(m-=r.wnext,x=r.wsize-m):x=r.wnext-m,m>r.length&&(m=r.length),g=r.window}else g=i,x=o-r.offset,m=r.length;m>c&&(m=c),c-=m,r.length-=m;do i[o++]=g[x++];while(--m);r.length===0&&(r.mode=AD);break;case qde:if(c===0)break e;i[o++]=r.length,c--,r.mode=AD;break;case BU:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(f-=c,t.total_out+=f,r.total+=f,r.wrap&4&&f&&(t.adler=r.check=r.flags?lc(r.check,i,f,o-f):HP(r.check,i,f,o-f)),f=c,r.wrap&4&&(r.flags?u:Gde(u))!==r.check){t.msg="incorrect data check",r.mode=Ua;break}u=0,d=0}r.mode=Hde;case Hde:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Ua;break}u=0,d=0}r.mode=Wde;case Wde:M=e6t;break e;case Ua:M=OCe;break e;case RCe:return ICe;case DCe:default:return Bm}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||f!==t.avail_out&&r.mode<Ua&&(r.mode<BU||e!==Sde))&&$Ce(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,r.total+=f,r.wrap&4&&f&&(t.adler=r.check=r.flags?lc(r.check,i,f,t.next_out-f):HP(r.check,i,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===tx?128:0)+(r.mode===jD||r.mode===FU?256:0),(h===0&&f===0||e===Sde)&&M===nN&&(M=r6t),M},d6t=t=>{if(jN(t))return Bm;let e=t.state;return e.window&&(e.window=null),t.state=null,nN},h6t=(t,e)=>{if(jN(t))return Bm;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,nN):Bm},f6t=(t,e)=>{const r=e.length;let n,i,s;return jN(t)||(n=t.state,n.wrap!==0&&n.mode!==$L)?Bm:n.mode===$L&&(i=1,i=HP(i,e,r,0),i!==n.check)?OCe:(s=$Ce(t,e,r,r),s?(n.mode=RCe,ICe):(n.havedict=1,nN))};var m6t=LCe,p6t=FCe,g6t=MCe,x6t=l6t,v6t=BCe,y6t=u6t,b6t=d6t,w6t=h6t,_6t=f6t,N6t="pako inflate (from Nodeca project)",xx={inflateReset:m6t,inflateReset2:p6t,inflateResetKeep:g6t,inflateInit:x6t,inflateInit2:v6t,inflate:y6t,inflateEnd:b6t,inflateGetHeader:w6t,inflateSetDictionary:_6t,inflateInfo:N6t};function S6t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var E6t=S6t;const UCe=Object.prototype.toString,{Z_NO_FLUSH:j6t,Z_FINISH:A6t,Z_OK:KP,Z_STREAM_END:zU,Z_NEED_DICT:VU,Z_STREAM_ERROR:C6t,Z_DATA_ERROR:Xde,Z_MEM_ERROR:T6t}=BI;function UI(t){this.options=OB.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CCe,this.strm.avail_out=0;let r=xx.inflateInit2(this.strm,e.windowBits);if(r!==KP)throw new Error(NC[r]);if(this.header=new E6t,xx.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=GP.string2buf(e.dictionary):UCe.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=xx.inflateSetDictionary(this.strm,e.dictionary),r!==KP)))throw new Error(NC[r])}UI.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?A6t:j6t,UCe.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=xx.inflate(r,o),s===VU&&i&&(s=xx.inflateSetDictionary(r,i),s===KP?s=xx.inflate(r,o):s===Xde&&(s=VU));r.avail_in>0&&s===zU&&r.state.wrap>0&&t[r.next_in]!==0;)xx.inflateReset(r),s=xx.inflate(r,o);switch(s){case C6t:case Xde:case VU:case T6t:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===zU))if(this.options.to==="string"){let c=GP.utf8border(r.output,r.next_out),u=r.next_out-c,d=GP.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===KP&&l===0)){if(s===zU)return s=xx.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};UI.prototype.onData=function(t){this.chunks.push(t)};UI.prototype.onEnd=function(t){t===KP&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=OB.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function qJ(t,e){const r=new UI(e);if(r.push(t),r.err)throw r.msg||NC[r.err];return r.result}function P6t(t,e){return e=e||{},e.raw=!0,qJ(t,e)}var k6t=UI,O6t=qJ,I6t=P6t,R6t=qJ,D6t=BI,M6t={Inflate:k6t,inflate:O6t,inflateRaw:I6t,ungzip:R6t,constants:D6t};const{Inflate:L6t,inflate:F6t,inflateRaw:m$t,ungzip:p$t}=M6t;var Yde=L6t,B6t=F6t;const zCe=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;zCe[t]=e}const Zde=4294967295;function $6t(t,e,r){let n=t;for(let i=0;i<r;i++)n=zCe[(n^e[i])&255]^n>>>8;return n}function U6t(t,e){return($6t(Zde,t,e)^Zde)>>>0}function Qde(t,e,r){const n=t.readUint32(),i=U6t(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function VCe(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function qCe(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function HCe(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function WCe(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function GCe(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+z6t(e[s-i],r[s],r[s-i])&255}}function z6t(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return i<=s&&i<=o?t:s<=o?e:r}function V6t(t,e,r,n,i,s){switch(t){case 0:VCe(e,r,i);break;case 1:qCe(e,r,i,s);break;case 2:HCe(e,r,n,i);break;case 3:WCe(e,r,n,i,s);break;case 4:GCe(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const q6t=new Uint16Array([255]),H6t=new Uint8Array(q6t.buffer),W6t=H6t[0]===255;function G6t(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const h=o[d],f=Math.ceil((r-h.x)/h.xStep),m=Math.ceil((n-h.y)/h.yStep);if(f<=0||m<=0)continue;const x=f*l,g=new Uint8Array(x);for(let y=0;y<m;y++){const w=e[u++],S=e.subarray(u,u+x);u+=x;const E=new Uint8Array(x);V6t(w,S,E,g,x,l),g.set(E);for(let j=0;j<f;j++){const T=h.x+j*h.xStep,O=h.y+y*h.yStep;if(!(T>=r||O>=n))for(let I=0;I<l;I++)c[(O*r+T)*l+I]=E[j*l+I]}}}if(s===16){const d=new Uint16Array(c.buffer);if(W6t)for(let h=0;h<d.length;h++)d[h]=K6t(d[h]);return d}else return c}function K6t(t){return(t&255)<<8|t>>8&255}const X6t=new Uint16Array([255]),Y6t=new Uint8Array(X6t.buffer),Z6t=Y6t[0]===255,Q6t=new Uint8Array(0);function Jde(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*r),c=new Uint8Array(n*l);let u=Q6t,d=0,h,f;for(let m=0;m<n;m++){switch(h=e.subarray(d+1,d+1+l),f=c.subarray(m*l,(m+1)*l),e[d]){case 0:VCe(h,f,l);break;case 1:qCe(h,f,l,o);break;case 2:HCe(h,f,u,l);break;case 3:WCe(h,f,u,l,o);break;case 4:GCe(h,f,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=f,d+=l+1}if(s===16){const m=new Uint16Array(c.buffer);if(Z6t)for(let x=0;x<m.length;x++)m[x]=J6t(m[x]);return m}else return c}function J6t(t){return(t&255)<<8|t>>8&255}const j6=Uint8Array.of(137,80,78,71,13,10,26,10);function ehe(t){if(!eMt(t.readBytes(j6.length)))throw new Error("wrong PNG signature")}function eMt(t){if(t.length<j6.length)return!1;for(let e=0;e<j6.length;e++)if(t[e]!==j6[e])return!1;return!0}const tMt="tEXt",rMt=0,KCe=new TextDecoder("latin1");function nMt(t){if(sMt(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const iMt=/^[\u0000-\u00FF]*$/;function sMt(t){if(!iMt.test(t))throw new Error("invalid latin1 text")}function aMt(t,e,r){const n=XCe(e);t[n]=oMt(e,r-n.length-1)}function XCe(t){for(t.mark();t.readByte()!==rMt;);const e=t.offset;t.reset();const r=KCe.decode(t.readBytes(e-t.offset-1));return t.skip(1),nMt(r),r}function oMt(t,e){return KCe.decode(t.readBytes(e))}const Mh={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},qU={UNKNOWN:-1,DEFLATE:0},the={UNKNOWN:-1,ADAPTIVE:0},HU={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},CD={NONE:0,BACKGROUND:1,PREVIOUS:2},WU={SOURCE:0,OVER:1};class lMt extends LJ{constructor(r,n={}){super(r);rr(this,"_checkCrc");rr(this,"_inflator");rr(this,"_png");rr(this,"_apng");rr(this,"_end");rr(this,"_hasPalette");rr(this,"_palette");rr(this,"_hasTransparency");rr(this,"_transparency");rr(this,"_compressionMethod");rr(this,"_filterMethod");rr(this,"_interlaceMethod");rr(this,"_colorType");rr(this,"_isAnimated");rr(this,"_numberOfFrames");rr(this,"_numberOfPlays");rr(this,"_frames");rr(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Yde,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=qU.UNKNOWN,this._filterMethod=the.UNKNOWN,this._interlaceMethod=HU.UNKNOWN,this._colorType=Mh.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ehe(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(ehe(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case tMt:aMt(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Qde(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Qde(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=cMt(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Mh.GREYSCALE:i=1;break;case Mh.TRUECOLOUR:i=3;break;case Mh.INDEXED_COLOUR:i=1;break;case Mh.GREYSCALE_ALPHA:i=2;break;case Mh.TRUECOLOUR_ALPHA:i=4;break;case Mh.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==qU.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Mh.GREYSCALE:case Mh.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Mh.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Mh.UNKNOWN:case Mh.GREYSCALE_ALPHA:case Mh.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=XCe(this),i=this.readUint8();if(i!==qU.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:B6t(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=Jde({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case CD.NONE:break;case CD.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case CD.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case WU.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case WU.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const h=n.data[u+this._png.channels-1]/i,f=d%(this._png.channels-1)===0?1:n.data[u+d],m=Math.floor(h*f+(1-h)*r.data[c+d]);r.data[c+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==the.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===HU.NO_INTERLACE)this._png.data=Jde({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===HU.ADAM7)this._png.data=G6t({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:CD.NONE,blendOp:WU.SOURCE,data:r}),this._inflator=new Yde,this._writingDataChunks=!1}}function cMt(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var rhe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(rhe||(rhe={}));function uMt(t,e){return new lMt(t,e).decode()}var ti=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function GU(){ti.console&&typeof ti.console.log=="function"&&ti.console.log.apply(ti.console,arguments)}var oa={log:GU,warn:function(t){ti.console&&(typeof ti.console.warn=="function"?ti.console.warn.apply(ti.console,arguments):GU.call(null,arguments))},error:function(t){ti.console&&(typeof ti.console.error=="function"?ti.console.error.apply(ti.console,arguments):GU(t))}};function KU(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){_w(n.response,e,r)},n.onerror=function(){oa.error("could not download file")},n.send()}function nhe(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function TD(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var _w=ti.saveAs||((typeof window>"u"?"undefined":Us(window))!=="object"||window!==ti?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=ti.URL||ti.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?nhe(i.href)?KU(t,e,r):TD(i,i.target="_blank"):TD(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){TD(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(nhe(t))KU(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){TD(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Us(s)!=="object"&&(oa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return KU(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(ti.HTMLElement)||ti.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Us(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=ti.URL||ti.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function YCe(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var A6=ti.atob.bind(ti),ihe=ti.btoa.bind(ti);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function XU(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=bu(r,n,i,s,e[0],7,-680876936),s=bu(s,r,n,i,e[1],12,-389564586),i=bu(i,s,r,n,e[2],17,606105819),n=bu(n,i,s,r,e[3],22,-1044525330),r=bu(r,n,i,s,e[4],7,-176418897),s=bu(s,r,n,i,e[5],12,1200080426),i=bu(i,s,r,n,e[6],17,-1473231341),n=bu(n,i,s,r,e[7],22,-45705983),r=bu(r,n,i,s,e[8],7,1770035416),s=bu(s,r,n,i,e[9],12,-1958414417),i=bu(i,s,r,n,e[10],17,-42063),n=bu(n,i,s,r,e[11],22,-1990404162),r=bu(r,n,i,s,e[12],7,1804603682),s=bu(s,r,n,i,e[13],12,-40341101),i=bu(i,s,r,n,e[14],17,-1502002290),r=wu(r,n=bu(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=wu(s,r,n,i,e[6],9,-1069501632),i=wu(i,s,r,n,e[11],14,643717713),n=wu(n,i,s,r,e[0],20,-373897302),r=wu(r,n,i,s,e[5],5,-701558691),s=wu(s,r,n,i,e[10],9,38016083),i=wu(i,s,r,n,e[15],14,-660478335),n=wu(n,i,s,r,e[4],20,-405537848),r=wu(r,n,i,s,e[9],5,568446438),s=wu(s,r,n,i,e[14],9,-1019803690),i=wu(i,s,r,n,e[3],14,-187363961),n=wu(n,i,s,r,e[8],20,1163531501),r=wu(r,n,i,s,e[13],5,-1444681467),s=wu(s,r,n,i,e[2],9,-51403784),i=wu(i,s,r,n,e[7],14,1735328473),r=_u(r,n=wu(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=_u(s,r,n,i,e[8],11,-2022574463),i=_u(i,s,r,n,e[11],16,1839030562),n=_u(n,i,s,r,e[14],23,-35309556),r=_u(r,n,i,s,e[1],4,-1530992060),s=_u(s,r,n,i,e[4],11,1272893353),i=_u(i,s,r,n,e[7],16,-155497632),n=_u(n,i,s,r,e[10],23,-1094730640),r=_u(r,n,i,s,e[13],4,681279174),s=_u(s,r,n,i,e[0],11,-358537222),i=_u(i,s,r,n,e[3],16,-722521979),n=_u(n,i,s,r,e[6],23,76029189),r=_u(r,n,i,s,e[9],4,-640364487),s=_u(s,r,n,i,e[12],11,-421815835),i=_u(i,s,r,n,e[15],16,530742520),r=Nu(r,n=_u(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Nu(s,r,n,i,e[7],10,1126891415),i=Nu(i,s,r,n,e[14],15,-1416354905),n=Nu(n,i,s,r,e[5],21,-57434055),r=Nu(r,n,i,s,e[12],6,1700485571),s=Nu(s,r,n,i,e[3],10,-1894986606),i=Nu(i,s,r,n,e[10],15,-1051523),n=Nu(n,i,s,r,e[1],21,-2054922799),r=Nu(r,n,i,s,e[8],6,1873313359),s=Nu(s,r,n,i,e[15],10,-30611744),i=Nu(i,s,r,n,e[6],15,-1560198380),n=Nu(n,i,s,r,e[13],21,1309151649),r=Nu(r,n,i,s,e[4],6,-145523070),s=Nu(s,r,n,i,e[11],10,-1120210379),i=Nu(i,s,r,n,e[2],15,718787259),n=Nu(n,i,s,r,e[9],21,-343485551),t[0]=qy(r,t[0]),t[1]=qy(n,t[1]),t[2]=qy(i,t[2]),t[3]=qy(s,t[3])}function RB(t,e,r,n,i,s){return e=qy(qy(e,t),qy(n,s)),qy(e<<i|e>>>32-i,r)}function bu(t,e,r,n,i,s,o){return RB(e&r|~e&n,t,e,i,s,o)}function wu(t,e,r,n,i,s,o){return RB(e&n|r&~n,t,e,i,s,o)}function _u(t,e,r,n,i,s,o){return RB(e^r^n,t,e,i,s,o)}function Nu(t,e,r,n,i,s,o){return RB(r^(e|~n),t,e,i,s,o)}function ZCe(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)XU(n,dMt(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(XU(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,XU(n,i),n}function dMt(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var she="0123456789abcdef".split("");function hMt(t){for(var e="",r=0;r<4;r++)e+=she[t>>8*r+4&15]+she[t>>8*r&15];return e}function fMt(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function qW(t){return ZCe(t).map(fMt).join("")}var mMt=function(t){for(var e=0;e<t.length;e++)t[e]=hMt(t[e]);return t.join("")}(ZCe("hello"))!="5d41402abc4b2a76b9719d911017c592";function qy(t,e){if(mMt){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function HW(t,e){var r,n,i,s;if(t!==r){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var h=e.length,f=0,m=0,x="";for(c=0;c<h;c++)m=(m+(d=l[f=(f+1)%256]))%256,l[f]=l[m],l[m]=d,o=l[(l[f]+l[m])%256],x+=String.fromCharCode(e.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ahe={print:4,modify:8,copy:16,"annot-forms":32};function gS(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(ahe.perm!==void 0)throw new Error("Invalid permission: "+l);i+=ahe[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=qW(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=HW(this.encryptionKey,this.padding)}function xS(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function ohe(t){if(Us(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){ti.console&&oa.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function XP(t){if(!(this instanceof XP))return new XP(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function QCe(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function C1(t,e,r,n,i){if(!(this instanceof C1))return new C1(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,QCe.call(this,n,i)}function Xw(t,e,r,n,i){if(!(this instanceof Xw))return new Xw(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,QCe.call(this,n,i)}function wn(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Us(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},m={internal:{},__private__:{}};m.__private__.PubSub=ohe;var x="1.3",g=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(ee){x=ee};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return y};var w=m.__private__.getPageFormat=function(ee){return y[ee]};i=i||"a4";var S="compat",E="advanced",j=S;function T(){this.saveGraphicsState(),Te(new Fr(ur,0,0,-ur,0,Km()*ur).toString()+" cm"),this.setFontSize(this.getFontSize()/ur),u="n",j=E}function O(){this.restoreGraphicsState(),u="S",j=S}var I=m.__private__.combineFontStyleAndFontWeight=function(ee,Se){if(ee=="bold"&&Se=="normal"||ee=="bold"&&Se==400||ee=="normal"&&Se=="italic"||ee=="bold"&&Se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Se&&(ee=Se==400||Se==="normal"?ee==="italic"?"italic":"normal":Se!=700&&Se!=="bold"||ee!=="normal"?(Se==700?"bold":Se)+""+ee:"bold"),ee};m.advancedAPI=function(ee){var Se=j===S;return Se&&T.call(this),typeof ee!="function"||(ee(this),Se&&O.call(this)),this},m.compatAPI=function(ee){var Se=j===E;return Se&&O.call(this),typeof ee!="function"||(ee(this),Se&&T.call(this)),this},m.isAdvancedAPI=function(){return j===E};var M,D=function(ee){if(j!==E)throw new Error(ee+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=m.roundToPrecision=m.__private__.roundToPrecision=function(ee,Se){var Ye=e||Se;if(isNaN(ee)||isNaN(Ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ee.toFixed(Ye).replace(/0+$/,"")};M=m.hpf=m.__private__.hpf=typeof c=="number"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return z(ee,c)}:c==="smart"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return z(ee,ee>-1&&ee<1?16:5)}:function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return z(ee,16)};var F=m.f2=m.__private__.f2=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f2");return z(ee,2)},q=m.__private__.f3=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f3");return z(ee,3)},Q=m.scale=m.__private__.scale=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.scale");return j===S?ee*ur:j===E?ee:void 0},re=function(ee){return Q(function(Se){return j===S?Km()-Se:j===E?Se:void 0}(ee))};m.__private__.setPrecision=m.setPrecision=function(ee){typeof parseInt(ee,10)=="number"&&(e=parseInt(ee,10))};var Z,se="00000000000000000000000000000000",K=m.__private__.getFileId=function(){return se},X=m.__private__.setFileId=function(ee){return se=ee!==void 0&&/^[a-fA-F0-9]{32}$/.test(ee)?ee.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(rs=new gS(d.userPermissions,d.userPassword,d.ownerPassword,se)),se};m.setFileId=function(ee){return X(ee),this},m.getFileId=function(){return K()};var Y=m.__private__.convertDateToPDFDate=function(ee){var Se=ee.getTimezoneOffset(),Ye=Se<0?"+":"-",ct=Math.floor(Math.abs(Se/60)),vt=Math.abs(Se%60),Gt=[Ye,ie(ct),"'",ie(vt),"'"].join("");return["D:",ee.getFullYear(),ie(ee.getMonth()+1),ie(ee.getDate()),ie(ee.getHours()),ie(ee.getMinutes()),ie(ee.getSeconds()),Gt].join("")},oe=m.__private__.convertPDFDateToDate=function(ee){var Se=parseInt(ee.substr(2,4),10),Ye=parseInt(ee.substr(6,2),10)-1,ct=parseInt(ee.substr(8,2),10),vt=parseInt(ee.substr(10,2),10),Gt=parseInt(ee.substr(12,2),10),mr=parseInt(ee.substr(14,2),10);return new Date(Se,Ye,ct,vt,Gt,mr,0)},xe=m.__private__.setCreationDate=function(ee){var Se;if(ee===void 0&&(ee=new Date),ee instanceof Date)Se=Y(ee);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ee))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Se=ee}return Z=Se},H=m.__private__.getCreationDate=function(ee){var Se=Z;return ee==="jsDate"&&(Se=oe(Z)),Se};m.setCreationDate=function(ee){return xe(ee),this},m.getCreationDate=function(ee){return H(ee)};var J,ie=m.__private__.padd2=function(ee){return("0"+parseInt(ee)).slice(-2)},ce=m.__private__.padd2Hex=function(ee){return("00"+(ee=ee.toString())).substr(ee.length)},me=0,he=[],_e=[],ue=0,je=[],ye=[],Le=!1,Ge=_e;m.__private__.setCustomOutputDestination=function(ee){Le=!0,Ge=ee};var Be=function(ee){Le||(Ge=ee)};m.__private__.resetCustomOutputDestination=function(){Le=!1,Ge=_e};var Te=m.__private__.out=function(ee){return ee=ee.toString(),ue+=ee.length+1,Ge.push(ee),Ge},ze=m.__private__.write=function(ee){return Te(arguments.length===1?ee.toString():Array.prototype.join.call(arguments," "))},tt=m.__private__.getArrayBuffer=function(ee){for(var Se=ee.length,Ye=new ArrayBuffer(Se),ct=new Uint8Array(Ye);Se--;)ct[Se]=ee.charCodeAt(Se);return Ye},Re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Re};var Ue=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(ee){return Ue=j===E?ee/ur:ee,this};var xt,st=m.__private__.getFontSize=m.getFontSize=function(){return j===S?Ue:Ue*ur},Xt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(ee){return Xt=ee,this},m.__private__.getR2L=m.getR2L=function(){return Xt};var Jt,_r=m.__private__.setZoomMode=function(ee){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ee))xt=ee;else if(isNaN(ee)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(ee)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ee+'" is not recognized.');xt=ee}else xt=parseInt(ee,10)};m.__private__.getZoomMode=function(){return xt};var lt,pt=m.__private__.setPageMode=function(ee){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ee)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ee+'" is not recognized.');Jt=ee};m.__private__.getPageMode=function(){return Jt};var er=m.__private__.setLayoutMode=function(ee){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ee)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ee+'" is not recognized.');lt=ee};m.__private__.getLayoutMode=function(){return lt},m.__private__.setDisplayMode=m.setDisplayMode=function(ee,Se,Ye){return _r(ee),er(Se),pt(Ye),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(ee){if(Object.keys(Vt).indexOf(ee)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[ee]},m.__private__.getDocumentProperties=function(){return Vt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(ee){for(var Se in Vt)Vt.hasOwnProperty(Se)&&ee[Se]&&(Vt[Se]=ee[Se]);return this},m.__private__.setDocumentProperty=function(ee,Se){if(Object.keys(Vt).indexOf(ee)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[ee]=Se};var Kt,ur,rt,Lt,Dt,Fe={},ut={},Mt=[],Ht={},Wt={},zt={},Rr={},vr=null,Cr=0,Pr=[],Qr=new ohe(m),Tr=t.hotfixes||[],Gr={},ln={},vi=[],Fr=function ee(Se,Ye,ct,vt,Gt,mr){if(!(this instanceof ee))return new ee(Se,Ye,ct,vt,Gt,mr);isNaN(Se)&&(Se=1),isNaN(Ye)&&(Ye=0),isNaN(ct)&&(ct=0),isNaN(vt)&&(vt=1),isNaN(Gt)&&(Gt=0),isNaN(mr)&&(mr=0),this._matrix=[Se,Ye,ct,vt,Gt,mr]};Object.defineProperty(Fr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Fr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Fr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Fr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Fr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Fr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Fr.prototype,"a",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Fr.prototype,"b",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Fr.prototype,"c",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Fr.prototype,"d",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Fr.prototype,"e",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Fr.prototype,"f",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Fr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Fr.prototype.join=function(ee){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(ee)},Fr.prototype.multiply=function(ee){var Se=ee.sx*this.sx+ee.shy*this.shx,Ye=ee.sx*this.shy+ee.shy*this.sy,ct=ee.shx*this.sx+ee.sy*this.shx,vt=ee.shx*this.shy+ee.sy*this.sy,Gt=ee.tx*this.sx+ee.ty*this.shx+this.tx,mr=ee.tx*this.shy+ee.ty*this.sy+this.ty;return new Fr(Se,Ye,ct,vt,Gt,mr)},Fr.prototype.decompose=function(){var ee=this.sx,Se=this.shy,Ye=this.shx,ct=this.sy,vt=this.tx,Gt=this.ty,mr=Math.sqrt(ee*ee+Se*Se),Xr=(ee/=mr)*Ye+(Se/=mr)*ct;Ye-=ee*Xr,ct-=Se*Xr;var $r=Math.sqrt(Ye*Ye+ct*ct);return Xr/=$r,ee*(ct/=$r)<Se*(Ye/=$r)&&(ee=-ee,Se=-Se,Xr=-Xr,mr=-mr),{scale:new Fr(mr,0,0,$r,0,0),translate:new Fr(1,0,0,1,vt,Gt),rotate:new Fr(ee,Se,-Se,ee,0,0),skew:new Fr(1,0,Xr,1,0,0)}},Fr.prototype.toString=function(ee){return this.join(" ")},Fr.prototype.inversed=function(){var ee=this.sx,Se=this.shy,Ye=this.shx,ct=this.sy,vt=this.tx,Gt=this.ty,mr=1/(ee*ct-Se*Ye),Xr=ct*mr,$r=-Se*mr,Rn=-Ye*mr,Yr=ee*mr;return new Fr(Xr,$r,Rn,Yr,-Xr*vt-Rn*Gt,-$r*vt-Yr*Gt)},Fr.prototype.applyToPoint=function(ee){var Se=ee.x*this.sx+ee.y*this.shx+this.tx,Ye=ee.x*this.shy+ee.y*this.sy+this.ty;return new Fa(Se,Ye)},Fr.prototype.applyToRectangle=function(ee){var Se=this.applyToPoint(ee),Ye=this.applyToPoint(new Fa(ee.x+ee.w,ee.y+ee.h));return new Wm(Se.x,Se.y,Ye.x-Se.x,Ye.y-Se.y)},Fr.prototype.clone=function(){var ee=this.sx,Se=this.shy,Ye=this.shx,ct=this.sy,vt=this.tx,Gt=this.ty;return new Fr(ee,Se,Ye,ct,vt,Gt)},m.Matrix=Fr;var Bi=m.matrixMult=function(ee,Se){return Se.multiply(ee)},da=new Fr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=da;var $i=function(ee,Se){if(!Wt[ee]){var Ye=(Se instanceof C1?"Sh":"P")+(Object.keys(Ht).length+1).toString(10);Se.id=Ye,Wt[ee]=Ye,Ht[Ye]=Se,Qr.publish("addPattern",Se)}};m.ShadingPattern=C1,m.TilingPattern=Xw,m.addShadingPattern=function(ee,Se){return D("addShadingPattern()"),$i(ee,Se),this},m.beginTilingPattern=function(ee){D("beginTilingPattern()"),x0(ee.boundingBox[0],ee.boundingBox[1],ee.boundingBox[2]-ee.boundingBox[0],ee.boundingBox[3]-ee.boundingBox[1],ee.matrix)},m.endTilingPattern=function(ee,Se){D("endTilingPattern()"),Se.stream=ye[J].join(`
`),$i(ee,Se),Qr.publish("endTilingPattern",Se),vi.pop().restore()};var ks,$n=m.__private__.newObject=function(){var ee=Mr();return Ce(ee,!0),ee},Mr=m.__private__.newObjectDeferred=function(){return me++,he[me]=function(){return ue},me},Ce=function(ee,Se){return Se=typeof Se=="boolean"&&Se,he[ee]=ue,Se&&Te(ee+" 0 obj"),ee},Me=m.__private__.newAdditionalObject=function(){var ee={objId:Mr(),content:""};return je.push(ee),ee},Ve=Mr(),He=Mr(),Xe=m.__private__.decodeColorString=function(ee){var Se=ee.split(" ");if(Se.length!==2||Se[1]!=="g"&&Se[1]!=="G")Se.length!==5||Se[4]!=="k"&&Se[4]!=="K"||(Se=[(1-Se[0])*(1-Se[3]),(1-Se[1])*(1-Se[3]),(1-Se[2])*(1-Se[3]),"r"]);else{var Ye=parseFloat(Se[0]);Se=[Ye,Ye,Ye,"r"]}for(var ct="#",vt=0;vt<3;vt++)ct+=("0"+Math.floor(255*parseFloat(Se[vt])).toString(16)).slice(-2);return ct},Qe=m.__private__.encodeColorString=function(ee){var Se;typeof ee=="string"&&(ee={ch1:ee});var Ye=ee.ch1,ct=ee.ch2,vt=ee.ch3,Gt=ee.ch4,mr=ee.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ye=="string"&&Ye.charAt(0)!=="#"){var Xr=new YCe(Ye);if(Xr.ok)Ye=Xr.toHex();else if(!/^\d*\.?\d*$/.test(Ye))throw new Error('Invalid color "'+Ye+'" passed to jsPDF.encodeColorString.')}if(typeof Ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ye)&&(Ye="#"+Ye[1]+Ye[1]+Ye[2]+Ye[2]+Ye[3]+Ye[3]),typeof Ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ye)){var $r=parseInt(Ye.substr(1),16);Ye=$r>>16&255,ct=$r>>8&255,vt=255&$r}if(ct===void 0||Gt===void 0&&Ye===ct&&ct===vt)Se=typeof Ye=="string"?Ye+" "+mr[0]:ee.precision===2?F(Ye/255)+" "+mr[0]:q(Ye/255)+" "+mr[0];else if(Gt===void 0||Us(Gt)==="object"){if(Gt&&!isNaN(Gt.a)&&Gt.a===0)return["1.","1.","1.",mr[1]].join(" ");Se=typeof Ye=="string"?[Ye,ct,vt,mr[1]].join(" "):ee.precision===2?[F(Ye/255),F(ct/255),F(vt/255),mr[1]].join(" "):[q(Ye/255),q(ct/255),q(vt/255),mr[1]].join(" ")}else Se=typeof Ye=="string"?[Ye,ct,vt,Gt,mr[2]].join(" "):ee.precision===2?[F(Ye),F(ct),F(vt),F(Gt),mr[2]].join(" "):[q(Ye),q(ct),q(vt),q(Gt),mr[2]].join(" ");return Se},bt=m.__private__.getFilters=function(){return o},$t=m.__private__.putStream=function(ee){var Se=(ee=ee||{}).data||"",Ye=ee.filters||bt(),ct=ee.alreadyAppliedFilters||[],vt=ee.addLength1||!1,Gt=Se.length,mr=ee.objectId,Xr=function(io){return io};if(d!==null&&mr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Xr=rs.encryptor(mr,0));var $r={};Ye===!0&&(Ye=["FlateEncode"]);var Rn=ee.additionalKeyValues||[],Yr=($r=wn.API.processDataByFilters!==void 0?wn.API.processDataByFilters(Se,Ye):{data:Se,reverseChain:[]}).reverseChain+(Array.isArray(ct)?ct.join(" "):ct.toString());if($r.data.length!==0&&(Rn.push({key:"Length",value:$r.data.length}),vt===!0&&Rn.push({key:"Length1",value:Gt})),Yr.length!=0)if(Yr.split("/").length-1==1)Rn.push({key:"Filter",value:Yr});else{Rn.push({key:"Filter",value:"["+Yr+"]"});for(var Li=0;Li<Rn.length;Li+=1)if(Rn[Li].key==="DecodeParms"){for(var ns=[],zn=0;zn<$r.reverseChain.split("/").length-1;zn+=1)ns.push("null");ns.push(Rn[Li].value),Rn[Li].value="["+ns.join(" ")+"]"}}Te("<<");for(var Ur=0;Ur<Rn.length;Ur++)Te("/"+Rn[Ur].key+" "+Rn[Ur].value);Te(">>"),$r.data.length!==0&&(Te("stream"),Te(Xr($r.data)),Te("endstream"))},wt=m.__private__.putPage=function(ee){var Se=ee.number,Ye=ee.data,ct=ee.objId,vt=ee.contentsObjId;Ce(ct,!0),Te("<</Type /Page"),Te("/Parent "+ee.rootDictionaryObjId+" 0 R"),Te("/Resources "+ee.resourceDictionaryObjId+" 0 R"),Te("/MediaBox ["+parseFloat(M(ee.mediaBox.bottomLeftX))+" "+parseFloat(M(ee.mediaBox.bottomLeftY))+" "+M(ee.mediaBox.topRightX)+" "+M(ee.mediaBox.topRightY)+"]"),ee.cropBox!==null&&Te("/CropBox ["+M(ee.cropBox.bottomLeftX)+" "+M(ee.cropBox.bottomLeftY)+" "+M(ee.cropBox.topRightX)+" "+M(ee.cropBox.topRightY)+"]"),ee.bleedBox!==null&&Te("/BleedBox ["+M(ee.bleedBox.bottomLeftX)+" "+M(ee.bleedBox.bottomLeftY)+" "+M(ee.bleedBox.topRightX)+" "+M(ee.bleedBox.topRightY)+"]"),ee.trimBox!==null&&Te("/TrimBox ["+M(ee.trimBox.bottomLeftX)+" "+M(ee.trimBox.bottomLeftY)+" "+M(ee.trimBox.topRightX)+" "+M(ee.trimBox.topRightY)+"]"),ee.artBox!==null&&Te("/ArtBox ["+M(ee.artBox.bottomLeftX)+" "+M(ee.artBox.bottomLeftY)+" "+M(ee.artBox.topRightX)+" "+M(ee.artBox.topRightY)+"]"),typeof ee.userUnit=="number"&&ee.userUnit!==1&&Te("/UserUnit "+ee.userUnit),Qr.publish("putPage",{objId:ct,pageContext:Pr[Se],pageNumber:Se,page:Ye}),Te("/Contents "+vt+" 0 R"),Te(">>"),Te("endobj");var Gt=Ye.join(`
`);return j===E&&(Gt+=`
Q`),Ce(vt,!0),$t({data:Gt,filters:bt(),objectId:vt}),Te("endobj"),ct},Et=m.__private__.putPages=function(){var ee,Se,Ye=[];for(ee=1;ee<=Cr;ee++)Pr[ee].objId=Mr(),Pr[ee].contentsObjId=Mr();for(ee=1;ee<=Cr;ee++)Ye.push(wt({number:ee,data:ye[ee],objId:Pr[ee].objId,contentsObjId:Pr[ee].contentsObjId,mediaBox:Pr[ee].mediaBox,cropBox:Pr[ee].cropBox,bleedBox:Pr[ee].bleedBox,trimBox:Pr[ee].trimBox,artBox:Pr[ee].artBox,userUnit:Pr[ee].userUnit,rootDictionaryObjId:Ve,resourceDictionaryObjId:He}));Ce(Ve,!0),Te("<</Type /Pages");var ct="/Kids [";for(Se=0;Se<Cr;Se++)ct+=Ye[Se]+" 0 R ";Te(ct+"]"),Te("/Count "+Cr),Te(">>"),Te("endobj"),Qr.publish("postPutPages")},kt=function(ee){Qr.publish("putFont",{font:ee,out:Te,newObject:$n,putStream:$t}),ee.isAlreadyPutted!==!0&&(ee.objectNumber=$n(),Te("<<"),Te("/Type /Font"),Te("/BaseFont /"+xS(ee.postScriptName)),Te("/Subtype /Type1"),typeof ee.encoding=="string"&&Te("/Encoding /"+ee.encoding),Te("/FirstChar 32"),Te("/LastChar 255"),Te(">>"),Te("endobj"))},fr=function(ee){ee.objectNumber=$n();var Se=[];Se.push({key:"Type",value:"/XObject"}),Se.push({key:"Subtype",value:"/Form"}),Se.push({key:"BBox",value:"["+[M(ee.x),M(ee.y),M(ee.x+ee.width),M(ee.y+ee.height)].join(" ")+"]"}),Se.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"});var Ye=ee.pages[1].join(`
`);$t({data:Ye,additionalKeyValues:Se,objectId:ee.objectNumber}),Te("endobj")},br=function(ee,Se){Se||(Se=21);var Ye=$n(),ct=function(mr,Xr){var $r,Rn=[],Yr=1/(Xr-1);for($r=0;$r<1;$r+=Yr)Rn.push($r);if(Rn.push(1),mr[0].offset!=0){var Li={offset:0,color:mr[0].color};mr.unshift(Li)}if(mr[mr.length-1].offset!=1){var ns={offset:1,color:mr[mr.length-1].color};mr.push(ns)}for(var zn="",Ur=0,io=0;io<Rn.length;io++){for($r=Rn[io];$r>mr[Ur+1].offset;)Ur++;var Xn=mr[Ur].offset,Gs=($r-Xn)/(mr[Ur+1].offset-Xn),Ba=mr[Ur].color,$a=mr[Ur+1].color;zn+=ce(Math.round((1-Gs)*Ba[0]+Gs*$a[0]).toString(16))+ce(Math.round((1-Gs)*Ba[1]+Gs*$a[1]).toString(16))+ce(Math.round((1-Gs)*Ba[2]+Gs*$a[2]).toString(16))}return zn.trim()}(ee.colors,Se),vt=[];vt.push({key:"FunctionType",value:"0"}),vt.push({key:"Domain",value:"[0.0 1.0]"}),vt.push({key:"Size",value:"["+Se+"]"}),vt.push({key:"BitsPerSample",value:"8"}),vt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$t({data:ct,additionalKeyValues:vt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ye}),Te("endobj"),ee.objectNumber=$n(),Te("<< /ShadingType "+ee.type),Te("/ColorSpace /DeviceRGB");var Gt="/Coords ["+M(parseFloat(ee.coords[0]))+" "+M(parseFloat(ee.coords[1]))+" ";ee.type===2?Gt+=M(parseFloat(ee.coords[2]))+" "+M(parseFloat(ee.coords[3])):Gt+=M(parseFloat(ee.coords[2]))+" "+M(parseFloat(ee.coords[3]))+" "+M(parseFloat(ee.coords[4]))+" "+M(parseFloat(ee.coords[5])),Te(Gt+="]"),ee.matrix&&Te("/Matrix ["+ee.matrix.toString()+"]"),Te("/Function "+Ye+" 0 R"),Te("/Extend [true true]"),Te(">>"),Te("endobj")},Nr=function(ee,Se){var Ye=Mr(),ct=$n();Se.push({resourcesOid:Ye,objectOid:ct}),ee.objectNumber=ct;var vt=[];vt.push({key:"Type",value:"/Pattern"}),vt.push({key:"PatternType",value:"1"}),vt.push({key:"PaintType",value:"1"}),vt.push({key:"TilingType",value:"1"}),vt.push({key:"BBox",value:"["+ee.boundingBox.map(M).join(" ")+"]"}),vt.push({key:"XStep",value:M(ee.xStep)}),vt.push({key:"YStep",value:M(ee.yStep)}),vt.push({key:"Resources",value:Ye+" 0 R"}),ee.matrix&&vt.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"}),$t({data:ee.stream,additionalKeyValues:vt,objectId:ee.objectNumber}),Te("endobj")},Sr=function(ee){for(var Se in ee.objectNumber=$n(),Te("<<"),ee)switch(Se){case"opacity":Te("/ca "+F(ee[Se]));break;case"stroke-opacity":Te("/CA "+F(ee[Se]))}Te(">>"),Te("endobj")},kr=function(ee){Ce(ee.resourcesOid,!0),Te("<<"),Te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Se in Te("/Font <<"),Fe)Fe.hasOwnProperty(Se)&&(h===!1||h===!0&&f.hasOwnProperty(Se))&&Te("/"+Se+" "+Fe[Se].objectNumber+" 0 R");Te(">>")}(),function(){if(Object.keys(Ht).length>0){for(var Se in Te("/Shading <<"),Ht)Ht.hasOwnProperty(Se)&&Ht[Se]instanceof C1&&Ht[Se].objectNumber>=0&&Te("/"+Se+" "+Ht[Se].objectNumber+" 0 R");Qr.publish("putShadingPatternDict"),Te(">>")}}(),function(Se){if(Object.keys(Ht).length>0){for(var Ye in Te("/Pattern <<"),Ht)Ht.hasOwnProperty(Ye)&&Ht[Ye]instanceof m.TilingPattern&&Ht[Ye].objectNumber>=0&&Ht[Ye].objectNumber<Se&&Te("/"+Ye+" "+Ht[Ye].objectNumber+" 0 R");Qr.publish("putTilingPatternDict"),Te(">>")}}(ee.objectOid),function(){if(Object.keys(zt).length>0){var Se;for(Se in Te("/ExtGState <<"),zt)zt.hasOwnProperty(Se)&&zt[Se].objectNumber>=0&&Te("/"+Se+" "+zt[Se].objectNumber+" 0 R");Qr.publish("putGStateDict"),Te(">>")}}(),function(){for(var Se in Te("/XObject <<"),Gr)Gr.hasOwnProperty(Se)&&Gr[Se].objectNumber>=0&&Te("/"+Se+" "+Gr[Se].objectNumber+" 0 R");Qr.publish("putXobjectDict"),Te(">>")}(),Te(">>"),Te("endobj")},Tn=function(ee){ut[ee.fontName]=ut[ee.fontName]||{},ut[ee.fontName][ee.fontStyle]=ee.id},qt=function(ee,Se,Ye,ct,vt){var Gt={id:"F"+(Object.keys(Fe).length+1).toString(10),postScriptName:ee,fontName:Se,fontStyle:Ye,encoding:ct,isStandardFont:vt||!1,metadata:{}};return Qr.publish("addFont",{font:Gt,instance:this}),Fe[Gt.id]=Gt,Tn(Gt),Gt.id},Oi=m.__private__.pdfEscape=m.pdfEscape=function(ee,Se){return function(Ye,ct){var vt,Gt,mr,Xr,$r,Rn,Yr,Li,ns;if(mr=(ct=ct||{}).sourceEncoding||"Unicode",$r=ct.outputEncoding,(ct.autoencode||$r)&&Fe[Kt].metadata&&Fe[Kt].metadata[mr]&&Fe[Kt].metadata[mr].encoding&&(Xr=Fe[Kt].metadata[mr].encoding,!$r&&Fe[Kt].encoding&&($r=Fe[Kt].encoding),!$r&&Xr.codePages&&($r=Xr.codePages[0]),typeof $r=="string"&&($r=Xr[$r]),$r)){for(Yr=!1,Rn=[],vt=0,Gt=Ye.length;vt<Gt;vt++)(Li=$r[Ye.charCodeAt(vt)])?Rn.push(String.fromCharCode(Li)):Rn.push(Ye[vt]),Rn[vt].charCodeAt(0)>>8&&(Yr=!0);Ye=Rn.join("")}for(vt=Ye.length;Yr===void 0&&vt!==0;)Ye.charCodeAt(vt-1)>>8&&(Yr=!0),vt--;if(!Yr)return Ye;for(Rn=ct.noBOM?[]:[254,255],vt=0,Gt=Ye.length;vt<Gt;vt++){if((ns=(Li=Ye.charCodeAt(vt))>>8)>>8)throw new Error("Character at position "+vt+" of string '"+Ye+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rn.push(ns),Rn.push(Li-(ns<<8))}return String.fromCharCode.apply(void 0,Rn)}(ee,Se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jn=m.__private__.beginPage=function(ee){ye[++Cr]=[],Pr[Cr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ee[0]),topRightY:Number(ee[1])}},si(Cr),Be(ye[J])},Ho=function(ee,Se){var Ye,ct,vt;switch(r=Se||r,typeof ee=="string"&&(Ye=w(ee.toLowerCase()),Array.isArray(Ye)&&(ct=Ye[0],vt=Ye[1])),Array.isArray(ee)&&(ct=ee[0]*ur,vt=ee[1]*ur),isNaN(ct)&&(ct=i[0],vt=i[1]),(ct>14400||vt>14400)&&(oa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ct=Math.min(14400,ct),vt=Math.min(14400,vt)),i=[ct,vt],r.substr(0,1)){case"l":vt>ct&&(i=[vt,ct]);break;case"p":ct>vt&&(i=[vt,ct])}Jn(i),In(Hm),Te(Eh),g0!==0&&Te(g0+" J"),Ld!==0&&Te(Ld+" j"),Qr.publish("addPage",{pageNumber:Cr})},Al=function(ee){ee>0&&ee<=Cr&&(ye.splice(ee,1),Pr.splice(ee,1),Cr--,J>Cr&&(J=Cr),this.setPage(J))},si=function(ee){ee>0&&ee<=Cr&&(J=ee)},ei=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ye.length-1},Un=function(ee,Se,Ye){var ct,vt=void 0;return Ye=Ye||{},ee=ee!==void 0?ee:Fe[Kt].fontName,Se=Se!==void 0?Se:Fe[Kt].fontStyle,ct=ee.toLowerCase(),ut[ct]!==void 0&&ut[ct][Se]!==void 0?vt=ut[ct][Se]:ut[ee]!==void 0&&ut[ee][Se]!==void 0?vt=ut[ee][Se]:Ye.disableWarning===!1&&oa.warn("Unable to look up font label for font '"+ee+"', '"+Se+"'. Refer to getFontList() for available fonts."),vt||Ye.noFallback||(vt=ut.times[Se])==null&&(vt=ut.times.normal),vt},On=m.__private__.putInfo=function(){var ee=$n(),Se=function(ct){return ct};for(var Ye in d!==null&&(Se=rs.encryptor(ee,0)),Te("<<"),Te("/Producer ("+Oi(Se("jsPDF "+wn.version))+")"),Vt)Vt.hasOwnProperty(Ye)&&Vt[Ye]&&Te("/"+Ye.substr(0,1).toUpperCase()+Ye.substr(1)+" ("+Oi(Se(Vt[Ye]))+")");Te("/CreationDate ("+Oi(Se(Z))+")"),Te(">>"),Te("endobj")},xs=m.__private__.putCatalog=function(ee){var Se=(ee=ee||{}).rootDictionaryObjId||Ve;switch($n(),Te("<<"),Te("/Type /Catalog"),Te("/Pages "+Se+" 0 R"),xt||(xt="fullwidth"),xt){case"fullwidth":Te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Te("/OpenAction [3 0 R /Fit]");break;case"original":Te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ye=""+xt;Ye.substr(Ye.length-1)==="%"&&(xt=parseInt(xt)/100),typeof xt=="number"&&Te("/OpenAction [3 0 R /XYZ null null "+F(xt)+"]")}switch(lt||(lt="continuous"),lt){case"continuous":Te("/PageLayout /OneColumn");break;case"single":Te("/PageLayout /SinglePage");break;case"two":case"twoleft":Te("/PageLayout /TwoColumnLeft");break;case"tworight":Te("/PageLayout /TwoColumnRight")}Jt&&Te("/PageMode /"+Jt),Qr.publish("putCatalog"),Te(">>"),Te("endobj")},Os=m.__private__.putTrailer=function(){Te("trailer"),Te("<<"),Te("/Size "+(me+1)),Te("/Root "+me+" 0 R"),Te("/Info "+(me-1)+" 0 R"),d!==null&&Te("/Encrypt "+rs.oid+" 0 R"),Te("/ID [ <"+se+"> <"+se+"> ]"),Te(">>")},vs=m.__private__.putHeader=function(){Te("%PDF-"+x),Te("%")},ll=m.__private__.putXRef=function(){var ee="0000000000";Te("xref"),Te("0 "+(me+1)),Te("0000000000 65535 f ");for(var Se=1;Se<=me;Se++)typeof he[Se]=="function"?Te((ee+he[Se]()).slice(-10)+" 00000 n "):he[Se]!==void 0?Te((ee+he[Se]).slice(-10)+" 00000 n "):Te("0000000000 00000 n ")},Yu=m.__private__.buildDocument=function(){var ee;me=0,ue=0,_e=[],he=[],je=[],Ve=Mr(),He=Mr(),Be(_e),Qr.publish("buildDocument"),vs(),Et(),function(){Qr.publish("putAdditionalObjects");for(var Ye=0;Ye<je.length;Ye++){var ct=je[Ye];Ce(ct.objId,!0),Te(ct.content),Te("endobj")}Qr.publish("postPutAdditionalObjects")}(),ee=[],function(){for(var Ye in Fe)Fe.hasOwnProperty(Ye)&&(h===!1||h===!0&&f.hasOwnProperty(Ye))&&kt(Fe[Ye])}(),function(){var Ye;for(Ye in zt)zt.hasOwnProperty(Ye)&&Sr(zt[Ye])}(),function(){for(var Ye in Gr)Gr.hasOwnProperty(Ye)&&fr(Gr[Ye])}(),function(Ye){var ct;for(ct in Ht)Ht.hasOwnProperty(ct)&&(Ht[ct]instanceof C1?br(Ht[ct]):Ht[ct]instanceof Xw&&Nr(Ht[ct],Ye))}(ee),Qr.publish("putResources"),ee.forEach(kr),kr({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),Qr.publish("postPutResources"),d!==null&&(rs.oid=$n(),Te("<<"),Te("/Filter /Standard"),Te("/V "+rs.v),Te("/R "+rs.r),Te("/U <"+rs.toHexString(rs.U)+">"),Te("/O <"+rs.toHexString(rs.O)+">"),Te("/P "+rs.P),Te(">>"),Te("endobj")),On(),xs();var Se=ue;return ll(),Os(),Te("startxref"),Te(""+Se),Te("%%EOF"),Be(ye[J]),_e.join(`
`)},Kr=m.__private__.getBlob=function(ee){return new Blob([tt(ee)],{type:"application/pdf"})},yi=m.output=m.__private__.output=(ks=function(ee,Se){switch(typeof(Se=Se||{})=="string"?Se={filename:Se}:Se.filename=Se.filename||"generated.pdf",ee){case void 0:return Yu();case"save":m.save(Se.filename);break;case"arraybuffer":return tt(Yu());case"blob":return Kr(Yu());case"bloburi":case"bloburl":if(ti.URL!==void 0&&typeof ti.URL.createObjectURL=="function")return ti.URL&&ti.URL.createObjectURL(Kr(Yu()))||void 0;oa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ye="",ct=Yu();try{Ye=ihe(ct)}catch{Ye=ihe(unescape(encodeURIComponent(ct)))}return"data:application/pdf;filename="+Se.filename+";base64,"+Ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ti)==="[object Window]"){var vt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Se.pdfObjectUrl&&(vt=Se.pdfObjectUrl,Gt="");var mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+vt+'"'+Gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Se)+");<\/script></body></html>",Xr=ti.open();return Xr!==null&&Xr.document.write(mr),Xr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ti)==="[object Window]"){var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Se.filename+'" width="500px" height="400px" /></body></html>',Rn=ti.open();if(Rn!==null){Rn.document.write($r);var Yr=this;Rn.document.documentElement.querySelector("#pdfViewer").onload=function(){Rn.document.title=Se.filename,Rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Yr.output("bloburl"))}}return Rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ti)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Li='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Se)+'"></iframe></body></html>',ns=ti.open();if(ns!==null&&(ns.document.write(Li),ns.document.title=Se.filename),ns||typeof safari>"u")return ns;break;case"datauri":case"dataurl":return ti.document.location.href=this.output("datauristring",Se);default:return null}},ks.foo=function(){try{return ks.apply(this,arguments)}catch(Ye){var ee=Ye.stack||"";~ee.indexOf(" at ")&&(ee=ee.split(" at ")[1]);var Se="Error in function "+ee.split(`
`)[0].split("<")[0]+": "+Ye.message;if(!ti.console)throw new Error(Se);ti.console.error(Se,Ye),ti.alert&&alert(Se)}},ks.foo.bar=ks,ks.foo),bh=function(ee){return Array.isArray(Tr)===!0&&Tr.indexOf(ee)>-1};switch(n){case"pt":ur=1;break;case"mm":ur=72/25.4;break;case"cm":ur=72/2.54;break;case"in":ur=72;break;case"px":ur=bh("px_scaling")==1?.75:96/72;break;case"pc":case"em":ur=12;break;case"ex":ur=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ur=n}var rs=null;xe(),X();var ni=m.__private__.getPageInfo=m.getPageInfo=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pr[ee].objId,pageNumber:ee,pageContext:Pr[ee]}},bo=m.__private__.getPageInfoByObjId=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Se in Pr)if(Pr[Se].objId===ee)break;return ni(Se)},_t=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Pr[J].objId,pageNumber:J,pageContext:Pr[J]}};m.addPage=function(){return Ho.apply(this,arguments),this},m.setPage=function(){return si.apply(this,arguments),Be.call(this,ye[J]),this},m.insertPage=function(ee){return this.addPage(),this.movePage(J,ee),this},m.movePage=function(ee,Se){var Ye,ct;if(ee>Se){Ye=ye[ee],ct=Pr[ee];for(var vt=ee;vt>Se;vt--)ye[vt]=ye[vt-1],Pr[vt]=Pr[vt-1];ye[Se]=Ye,Pr[Se]=ct,this.setPage(Se)}else if(ee<Se){Ye=ye[ee],ct=Pr[ee];for(var Gt=ee;Gt<Se;Gt++)ye[Gt]=ye[Gt+1],Pr[Gt]=Pr[Gt+1];ye[Se]=Ye,Pr[Se]=ct,this.setPage(Se)}return this},m.deletePage=function(){return Al.apply(this,arguments),this},m.__private__.text=m.text=function(ee,Se,Ye,ct,vt){var Gt,mr,Xr,$r,Rn,Yr,Li,ns,zn,Ur=(ct=ct||{}).scope||this;if(typeof ee=="number"&&typeof Se=="number"&&(typeof Ye=="string"||Array.isArray(Ye))){var io=Ye;Ye=Se,Se=ee,ee=io}if(arguments[3]instanceof Fr==0?(Xr=arguments[4],$r=arguments[5],Us(Li=arguments[3])==="object"&&Li!==null||(typeof Xr=="string"&&($r=Xr,Xr=null),typeof Li=="string"&&($r=Li,Li=null),typeof Li=="number"&&(Xr=Li,Li=null),ct={flags:Li,angle:Xr,align:$r})):(D("The transform parameter of text() with a Matrix value"),zn=vt),isNaN(Se)||isNaN(Ye)||ee==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ee.length===0)return Ur;var Xn,Gs="",Ba=typeof ct.lineHeightFactor=="number"?ct.lineHeightFactor:Md,$a=Ur.internal.scaleFactor;function _c(tr){return tr=tr.split("	").join(Array(ct.TabLen||9).join(" ")),Oi(tr,Li)}function fu(tr){for(var ar,sr=tr.concat(),Nn=[],kn=sr.length;kn--;)typeof(ar=sr.shift())=="string"?Nn.push(ar):Array.isArray(tr)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?Nn.push(ar[0]):Nn.push([ar[0],ar[1],ar[2]]);return Nn}function so(tr,ar){var sr;if(typeof tr=="string")sr=ar(tr)[0];else if(Array.isArray(tr)){for(var Nn,kn,_s=tr.concat(),oo=[],Xo=_s.length;Xo--;)typeof(Nn=_s.shift())=="string"?oo.push(ar(Nn)[0]):Array.isArray(Nn)&&typeof Nn[0]=="string"&&(kn=ar(Nn[0],Nn[1],Nn[2]),oo.push([kn[0],kn[1],kn[2]]));sr=oo}return sr}var Ju=!1,jh=!0;if(typeof ee=="string")Ju=!0;else if(Array.isArray(ee)){var Uf=ee.concat();mr=[];for(var Ah,na=Uf.length;na--;)(typeof(Ah=Uf.shift())!="string"||Array.isArray(Ah)&&typeof Ah[0]!="string")&&(jh=!1);Ju=jh}if(Ju===!1)throw new Error('Type of text must be string or Array. "'+ee+'" is not recognized.');typeof ee=="string"&&(ee=ee.match(/[\r?\n]/)?ee.split(/\r\n|\r|\n/g):[ee]);var Ch=Ue/Ur.internal.scaleFactor,Xm=Ch*(Ba-1);switch(ct.baseline){case"bottom":Ye-=Xm;break;case"top":Ye+=Ch-Xm;break;case"hanging":Ye+=Ch-2*Xm;break;case"middle":Ye+=Ch/2-Xm}if((Yr=ct.maxWidth||0)>0&&(typeof ee=="string"?ee=Ur.splitTextToSize(ee,Yr):Object.prototype.toString.call(ee)==="[object Array]"&&(ee=ee.reduce(function(tr,ar){return tr.concat(Ur.splitTextToSize(ar,Yr))},[]))),Gt={text:ee,x:Se,y:Ye,options:ct,mutex:{pdfEscape:Oi,activeFontKey:Kt,fonts:Fe,activeFontSize:Ue}},Qr.publish("preProcessText",Gt),ee=Gt.text,Xr=(ct=Gt.options).angle,zn instanceof Fr==0&&Xr&&typeof Xr=="number"){Xr*=Math.PI/180,ct.rotationDirection===0&&(Xr=-Xr),j===E&&(Xr=-Xr);var Fd=Math.cos(Xr),Gg=Math.sin(Xr);zn=new Fr(Fd,Gg,-Gg,Fd,0,0)}else Xr&&Xr instanceof Fr&&(zn=Xr);j!==E||zn||(zn=da),(Rn=ct.charSpace||Qu)!==void 0&&(Gs+=M(Q(Rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ns=ct.horizontalScale)!==void 0&&(Gs+=M(100*ns)+` Tz
`),ct.lang;var hi=-1,Go=ct.renderingMode!==void 0?ct.renderingMode:ct.stroke,Ko=Ur.internal.getCurrentPageInfo().pageContext;switch(Go){case 0:case!1:case"fill":hi=0;break;case 1:case!0:case"stroke":hi=1;break;case 2:case"fillThenStroke":hi=2;break;case 3:case"invisible":hi=3;break;case 4:case"fillAndAddForClipping":hi=4;break;case 5:case"strokeAndAddPathForClipping":hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hi=6;break;case 7:case"addToPathForClipping":hi=7}var Nc=Ko.usedRenderingMode!==void 0?Ko.usedRenderingMode:-1;hi!==-1?Gs+=hi+` Tr
`:Nc!==-1&&(Gs+=`0 Tr
`),hi!==-1&&(Ko.usedRenderingMode=hi),$r=ct.align||"left";var Na,mu=Ue*Ba,Ym=Ur.internal.pageSize.getWidth(),Th=Fe[Kt];Rn=ct.charSpace||Qu,Yr=ct.maxWidth||0,Li=Object.assign({autoencode:!0,noBOM:!0},ct.flags);var Bd=[],ao=function(tr){return Ur.getStringUnitWidth(tr,{font:Th,charSpace:Rn,fontSize:Ue,doKerning:!1})*Ue/$a};if(Object.prototype.toString.call(ee)==="[object Array]"){var Sc;mr=fu(ee),$r!=="left"&&(Na=mr.map(ao));var ha,Tl=0;if($r==="right"){Se-=Na[0],ee=[],na=mr.length;for(var ii=0;ii<na;ii++)ii===0?(ha=Pn(Se),Sc=ws(Ye)):(ha=Q(Tl-Na[ii]),Sc=-mu),ee.push([mr[ii],ha,Sc]),Tl=Na[ii]}else if($r==="center"){Se-=Na[0]/2,ee=[],na=mr.length;for(var Ec=0;Ec<na;Ec++)Ec===0?(ha=Pn(Se),Sc=ws(Ye)):(ha=Q((Tl-Na[Ec])/2),Sc=-mu),ee.push([mr[Ec],ha,Sc]),Tl=Na[Ec]}else if($r==="left"){ee=[],na=mr.length;for(var Ne=0;Ne<na;Ne++)ee.push(mr[Ne])}else if($r==="justify"&&Th.encoding==="Identity-H"){ee=[],na=mr.length,Yr=Yr!==0?Yr:Ym;for(var p=0,v=0;v<na;v++)if(Sc=v===0?ws(Ye):-mu,ha=v===0?Pn(Se):p,v<na-1){var _=Q((Yr-Na[v])/(mr[v].split(" ").length-1)),A=mr[v].split(" ");ee.push([A[0]+" ",ha,Sc]),p=0;for(var P=1;P<A.length;P++){var R=(ao(A[P-1]+" "+A[P])-ao(A[P]))*$a+_;P==A.length-1?ee.push([A[P],R,0]):ee.push([A[P]+" ",R,0]),p-=R}}else ee.push([mr[v],ha,Sc]);ee.push(["",p,0])}else{if($r!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ee=[],na=mr.length,Yr=Yr!==0?Yr:Ym,v=0;v<na;v++){Sc=v===0?ws(Ye):-mu,ha=v===0?Pn(Se):0;var U=mr[v].split(" ").length-1,G=U>0?(Yr-Na[v])/U:0;v<na-1?Bd.push(M(Q(G))):Bd.push(0),ee.push([mr[v],ha,Sc])}}}(typeof ct.R2L=="boolean"?ct.R2L:Xt)===!0&&(ee=so(ee,function(tr,ar,sr){return[tr.split("").reverse().join(""),ar,sr]})),Gt={text:ee,x:Se,y:Ye,options:ct,mutex:{pdfEscape:Oi,activeFontKey:Kt,fonts:Fe,activeFontSize:Ue}},Qr.publish("postProcessText",Gt),ee=Gt.text,Xn=Gt.mutex.isHex||!1;var te=Fe[Kt].encoding;te!=="WinAnsiEncoding"&&te!=="StandardEncoding"||(ee=so(ee,function(tr,ar,sr){return[_c(tr),ar,sr]})),mr=fu(ee),ee=[];for(var de,we,Pe,Ze=Array.isArray(mr[0])?1:0,at="",dt=function(tr,ar,sr){var Nn="";return sr instanceof Fr?(sr=typeof ct.angle=="number"?Bi(sr,new Fr(1,0,0,1,tr,ar)):Bi(new Fr(1,0,0,1,tr,ar),sr),j===E&&(sr=Bi(new Fr(1,0,0,-1,0,0),sr)),Nn=sr.join(" ")+` Tm
`):Nn=M(tr)+" "+M(ar)+` Td
`,Nn},yt=0;yt<mr.length;yt++){switch(at="",Ze){case 1:Pe=(Xn?"<":"(")+mr[yt][0]+(Xn?">":")"),de=parseFloat(mr[yt][1]),we=parseFloat(mr[yt][2]);break;case 0:Pe=(Xn?"<":"(")+mr[yt]+(Xn?">":")"),de=Pn(Se),we=ws(Ye)}Bd!==void 0&&Bd[yt]!==void 0&&(at=Bd[yt]+` Tw
`),yt===0?ee.push(at+dt(de,we,zn)+Pe):Ze===0?ee.push(at+Pe):Ze===1&&ee.push(at+dt(de,we,zn)+Pe)}ee=Ze===0?ee.join(` Tj
T* `):ee.join(` Tj
`),ee+=` Tj
`;var Pt=`BT
/`;return Pt+=Kt+" "+Ue+` Tf
`,Pt+=M(Ue*Ba)+` TL
`,Pt+=ra+`
`,Pt+=Gs,Pt+=ee,Te(Pt+="ET"),f[Kt]=!0,Ur};var We=m.__private__.clip=m.clip=function(ee){return Te(ee==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return We("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Te("n"),this};var Or=m.__private__.isValidStyle=function(ee){var Se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ee)!==-1&&(Se=!0),Se};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(ee){return Or(ee)&&(u=ee),this};var ys=m.__private__.getStyle=m.getStyle=function(ee){var Se=u;switch(ee){case"D":case"S":Se="S";break;case"F":Se="f";break;case"FD":case"DF":Se="B";break;case"f":case"f*":case"B":case"B*":Se=ee}return Se},ro=m.close=function(){return Te("h"),this};m.stroke=function(){return Te("S"),this},m.fill=function(ee){return cu("f",ee),this},m.fillEvenOdd=function(ee){return cu("f*",ee),this},m.fillStroke=function(ee){return cu("B",ee),this},m.fillStrokeEvenOdd=function(ee){return cu("B*",ee),this};var cu=function(ee,Se){Us(Se)==="object"?gn(Se,ee):Te(ee)},wh=function(ee){ee===null||j===E&&ee===void 0||(ee=ys(ee),Te(ee))};function wo(ee,Se,Ye,ct,vt){var Gt=new Xw(Se||this.boundingBox,Ye||this.xStep,ct||this.yStep,this.gState,vt||this.matrix);Gt.stream=this.stream;var mr=ee+"$$"+this.cloneIndex+++"$$";return $i(mr,Gt),Gt}var gn=function(ee,Se){var Ye=Wt[ee.key],ct=Ht[Ye];if(ct instanceof C1)Te("q"),Te(bs(Se)),ct.gState&&m.setGState(ct.gState),Te(ee.matrix.toString()+" cm"),Te("/"+Ye+" sh"),Te("Q");else if(ct instanceof Xw){var vt=new Fr(1,0,0,-1,0,Km());ee.matrix&&(vt=vt.multiply(ee.matrix||da),Ye=wo.call(ct,ee.key,ee.boundingBox,ee.xStep,ee.yStep,vt).id),Te("q"),Te("/Pattern cs"),Te("/"+Ye+" scn"),ct.gState&&m.setGState(ct.gState),Te(Se),Te("Q")}},bs=function(ee){switch(ee){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_h=m.moveTo=function(ee,Se){return Te(M(Q(ee))+" "+M(re(Se))+" m"),this},Nh=m.lineTo=function(ee,Se){return Te(M(Q(ee))+" "+M(re(Se))+" l"),this},uu=m.curveTo=function(ee,Se,Ye,ct,vt,Gt){return Te([M(Q(ee)),M(re(Se)),M(Q(Ye)),M(re(ct)),M(Q(vt)),M(re(Gt)),"c"].join(" ")),this};m.__private__.line=m.line=function(ee,Se,Ye,ct,vt){if(isNaN(ee)||isNaN(Se)||isNaN(Ye)||isNaN(ct)||!Or(vt))throw new Error("Invalid arguments passed to jsPDF.line");return j===S?this.lines([[Ye-ee,ct-Se]],ee,Se,[1,1],vt||"S"):this.lines([[Ye-ee,ct-Se]],ee,Se,[1,1]).stroke()},m.__private__.lines=m.lines=function(ee,Se,Ye,ct,vt,Gt){var mr,Xr,$r,Rn,Yr,Li,ns,zn,Ur,io,Xn,Gs;if(typeof ee=="number"&&(Gs=Ye,Ye=Se,Se=ee,ee=Gs),ct=ct||[1,1],Gt=Gt||!1,isNaN(Se)||isNaN(Ye)||!Array.isArray(ee)||!Array.isArray(ct)||!Or(vt)||typeof Gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_h(Se,Ye),mr=ct[0],Xr=ct[1],Rn=ee.length,io=Se,Xn=Ye,$r=0;$r<Rn;$r++)(Yr=ee[$r]).length===2?(io=Yr[0]*mr+io,Xn=Yr[1]*Xr+Xn,Nh(io,Xn)):(Li=Yr[0]*mr+io,ns=Yr[1]*Xr+Xn,zn=Yr[2]*mr+io,Ur=Yr[3]*Xr+Xn,io=Yr[4]*mr+io,Xn=Yr[5]*Xr+Xn,uu(Li,ns,zn,Ur,io,Xn));return Gt&&ro(),wh(vt),this},m.path=function(ee){for(var Se=0;Se<ee.length;Se++){var Ye=ee[Se],ct=Ye.c;switch(Ye.op){case"m":_h(ct[0],ct[1]);break;case"l":Nh(ct[0],ct[1]);break;case"c":uu.apply(this,ct);break;case"h":ro()}}return this},m.__private__.rect=m.rect=function(ee,Se,Ye,ct,vt){if(isNaN(ee)||isNaN(Se)||isNaN(Ye)||isNaN(ct)||!Or(vt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===S&&(ct=-ct),Te([M(Q(ee)),M(re(Se)),M(Q(Ye)),M(Q(ct)),"re"].join(" ")),wh(vt),this},m.__private__.triangle=m.triangle=function(ee,Se,Ye,ct,vt,Gt,mr){if(isNaN(ee)||isNaN(Se)||isNaN(Ye)||isNaN(ct)||isNaN(vt)||isNaN(Gt)||!Or(mr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ye-ee,ct-Se],[vt-Ye,Gt-ct],[ee-vt,Se-Gt]],ee,Se,[1,1],mr,!0),this},m.__private__.roundedRect=m.roundedRect=function(ee,Se,Ye,ct,vt,Gt,mr){if(isNaN(ee)||isNaN(Se)||isNaN(Ye)||isNaN(ct)||isNaN(vt)||isNaN(Gt)||!Or(mr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Xr=4/3*(Math.SQRT2-1);return vt=Math.min(vt,.5*Ye),Gt=Math.min(Gt,.5*ct),this.lines([[Ye-2*vt,0],[vt*Xr,0,vt,Gt-Gt*Xr,vt,Gt],[0,ct-2*Gt],[0,Gt*Xr,-vt*Xr,Gt,-vt,Gt],[2*vt-Ye,0],[-vt*Xr,0,-vt,-Gt*Xr,-vt,-Gt],[0,2*Gt-ct],[0,-Gt*Xr,vt*Xr,-Gt,vt,-Gt]],ee+vt,Se,[1,1],mr,!0),this},m.__private__.ellipse=m.ellipse=function(ee,Se,Ye,ct,vt){if(isNaN(ee)||isNaN(Se)||isNaN(Ye)||isNaN(ct)||!Or(vt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Gt=4/3*(Math.SQRT2-1)*Ye,mr=4/3*(Math.SQRT2-1)*ct;return _h(ee+Ye,Se),uu(ee+Ye,Se-mr,ee+Gt,Se-ct,ee,Se-ct),uu(ee-Gt,Se-ct,ee-Ye,Se-mr,ee-Ye,Se),uu(ee-Ye,Se+mr,ee-Gt,Se+ct,ee,Se+ct),uu(ee+Gt,Se+ct,ee+Ye,Se+mr,ee+Ye,Se),wh(vt),this},m.__private__.circle=m.circle=function(ee,Se,Ye,ct){if(isNaN(ee)||isNaN(Se)||isNaN(Ye)||!Or(ct))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ee,Se,Ye,Ye,ct)},m.setFont=function(ee,Se,Ye){return Ye&&(Se=I(Se,Ye)),Kt=Un(ee,Se,{disableWarning:!1}),this};var Sh=m.__private__.getFont=m.getFont=function(){return Fe[Un.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var ee,Se,Ye={};for(ee in ut)if(ut.hasOwnProperty(ee))for(Se in Ye[ee]=[],ut[ee])ut[ee].hasOwnProperty(Se)&&Ye[ee].push(Se);return Ye},m.addFont=function(ee,Se,Ye,ct,vt){var Gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Gt.indexOf(arguments[3])!==-1?vt=arguments[3]:arguments[3]&&Gt.indexOf(arguments[3])==-1&&(Ye=I(Ye,ct)),qt.call(this,ee,Se,Ye,vt=vt||"Identity-H")};var Md,Hm=t.lineWidth||.200025,sn=m.__private__.getLineWidth=m.getLineWidth=function(){return Hm},In=m.__private__.setLineWidth=m.setLineWidth=function(ee){return Hm=ee,Te(M(Q(ee))+" w"),this};m.__private__.setLineDash=wn.API.setLineDash=wn.API.setLineDashPattern=function(ee,Se){if(ee=ee||[],Se=Se||0,isNaN(Se)||!Array.isArray(ee))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ee=ee.map(function(Ye){return M(Q(Ye))}).join(" "),Se=M(Q(Se)),Te("["+ee+"] "+Se+" d"),this};var no=m.__private__.getLineHeight=m.getLineHeight=function(){return Ue*Md};m.__private__.getLineHeight=m.getLineHeight=function(){return Ue*Md};var zr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(ee){return typeof(ee=ee||1.15)=="number"&&(Md=ee),this},Gv=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Md};zr(t.lineHeight);var Pn=m.__private__.getHorizontalCoordinate=function(ee){return Q(ee)},ws=m.__private__.getVerticalCoordinate=function(ee){return j===E?ee:Pr[J].mediaBox.topRightY-Pr[J].mediaBox.bottomLeftY-Q(ee)},Hg=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(ee){return M(Pn(ee))},Zu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(ee){return M(ws(ee))},Eh=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Xe(Eh)},m.__private__.setStrokeColor=m.setDrawColor=function(ee,Se,Ye,ct){return Eh=Qe({ch1:ee,ch2:Se,ch3:Ye,ch4:ct,pdfColorType:"draw",precision:2}),Te(Eh),this};var Cl=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Xe(Cl)},m.__private__.setFillColor=m.setFillColor=function(ee,Se,Ye,ct){return Cl=Qe({ch1:ee,ch2:Se,ch3:Ye,ch4:ct,pdfColorType:"fill",precision:2}),Te(Cl),this};var ra=t.textColor||"0 g",cl=m.__private__.getTextColor=m.getTextColor=function(){return Xe(ra)};m.__private__.setTextColor=m.setTextColor=function(ee,Se,Ye,ct){return ra=Qe({ch1:ee,ch2:Se,ch3:Ye,ch4:ct,pdfColorType:"text",precision:3}),this};var Qu=t.charSpace,Bf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Qu||0)};m.__private__.setCharSpace=m.setCharSpace=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qu=ee,this};var g0=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(ee){var Se=m.CapJoinStyles[ee];if(Se===void 0)throw new Error("Line cap style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return g0=Se,Te(Se+" J"),this};var Ld=0;m.__private__.setLineJoin=m.setLineJoin=function(ee){var Se=m.CapJoinStyles[ee];if(Se===void 0)throw new Error("Line join style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ld=Se,Te(Se+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(ee){if(ee=ee||0,isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Te(M(Q(ee))+" M"),this},m.GState=XP,m.setGState=function(ee){(ee=typeof ee=="string"?zt[Rr[ee]]:wc(null,ee)).equals(vr)||(Te("/"+ee.id+" gs"),vr=ee)};var wc=function(ee,Se){if(!ee||!Rr[ee]){var Ye=!1;for(var ct in zt)if(zt.hasOwnProperty(ct)&&zt[ct].equals(Se)){Ye=!0;break}if(Ye)Se=zt[ct];else{var vt="GS"+(Object.keys(zt).length+1).toString(10);zt[vt]=Se,Se.id=vt}return ee&&(Rr[ee]=Se.id),Qr.publish("addGState",Se),Se}};m.addGState=function(ee,Se){return wc(ee,Se),this},m.saveGraphicsState=function(){return Te("q"),Mt.push({key:Kt,size:Ue,color:ra}),this},m.restoreGraphicsState=function(){Te("Q");var ee=Mt.pop();return Kt=ee.key,Ue=ee.size,ra=ee.color,vr=null,this},m.setCurrentTransformationMatrix=function(ee){return Te(ee.toString()+" cm"),this},m.comment=function(ee){return Te("#"+ee),this};var Fa=function(ee,Se){var Ye=ee||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ye},set:function(Gt){isNaN(Gt)||(Ye=parseFloat(Gt))}});var ct=Se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ct},set:function(Gt){isNaN(Gt)||(ct=parseFloat(Gt))}});var vt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return vt},set:function(Gt){vt=Gt.toString()}}),this},Wm=function(ee,Se,Ye,ct){Fa.call(this,ee,Se),this.type="rect";var vt=Ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return vt},set:function(mr){isNaN(mr)||(vt=parseFloat(mr))}});var Gt=ct||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Gt},set:function(mr){isNaN(mr)||(Gt=parseFloat(mr))}}),this},ai=function(){this.page=Cr,this.currentPage=J,this.pages=ye.slice(0),this.pagesContext=Pr.slice(0),this.x=rt,this.y=Lt,this.matrix=Dt,this.width=$f(J),this.height=Ii(J),this.outputDestination=Ge,this.id="",this.objectNumber=-1};ai.prototype.restore=function(){Cr=this.page,J=this.currentPage,Pr=this.pagesContext,ye=this.pages,rt=this.x,Lt=this.y,Dt=this.matrix,Wg(J,this.width),du(J,this.height),Ge=this.outputDestination};var x0=function(ee,Se,Ye,ct,vt){vi.push(new ai),Cr=J=0,ye=[],rt=ee,Lt=Se,Dt=vt,Jn([Ye,ct])};for(var Wo in m.beginFormObject=function(ee,Se,Ye,ct,vt){return x0(ee,Se,Ye,ct,vt),this},m.endFormObject=function(ee){return function(Se){if(ln[Se])vi.pop().restore();else{var Ye=new ai,ct="Xo"+(Object.keys(Gr).length+1).toString(10);Ye.id=ct,ln[Se]=ct,Gr[ct]=Ye,Qr.publish("addFormObject",Ye),vi.pop().restore()}}(ee),this},m.doFormObject=function(ee,Se){var Ye=Gr[ln[ee]];return Te("q"),Te(Se.toString()+" cm"),Te("/"+Ye.id+" Do"),Te("Q"),this},m.getFormObject=function(ee){var Se=Gr[ln[ee]];return{x:Se.x,y:Se.y,width:Se.width,height:Se.height,matrix:Se.matrix}},m.save=function(ee,Se){return ee=ee||"generated.pdf",(Se=Se||{}).returnPromise=Se.returnPromise||!1,Se.returnPromise===!1?(_w(Kr(Yu()),ee),typeof _w.unload=="function"&&ti.setTimeout&&setTimeout(_w.unload,911),this):new Promise(function(Ye,ct){try{var vt=_w(Kr(Yu()),ee);typeof _w.unload=="function"&&ti.setTimeout&&setTimeout(_w.unload,911),Ye(vt)}catch(Gt){ct(Gt.message)}})},wn.API)wn.API.hasOwnProperty(Wo)&&(Wo==="events"&&wn.API.events.length?function(ee,Se){var Ye,ct,vt;for(vt=Se.length-1;vt!==-1;vt--)Ye=Se[vt][0],ct=Se[vt][1],ee.subscribe.apply(ee,[Ye].concat(typeof ct=="function"?[ct]:ct))}(Qr,wn.API.events):m[Wo]=wn.API[Wo]);function $f(ee){return Pr[ee].mediaBox.topRightX-Pr[ee].mediaBox.bottomLeftX}function Wg(ee,Se){Pr[ee].mediaBox.topRightX=Se+Pr[ee].mediaBox.bottomLeftX}function Ii(ee){return Pr[ee].mediaBox.topRightY-Pr[ee].mediaBox.bottomLeftY}function du(ee,Se){Pr[ee].mediaBox.topRightY=Se+Pr[ee].mediaBox.bottomLeftY}var Gm=m.getPageWidth=function(ee){return $f(ee=ee||J)/ur},hu=m.setPageWidth=function(ee,Se){Wg(ee,Se*ur)},Km=m.getPageHeight=function(ee){return Ii(ee=ee||J)/ur},Rt=m.setPageHeight=function(ee,Se){du(ee,Se*ur)};return m.internal={pdfEscape:Oi,getStyle:ys,getFont:Sh,getFontSize:st,getCharSpace:Bf,getTextColor:cl,getLineHeight:no,getLineHeightFactor:Gv,getLineWidth:sn,write:ze,getHorizontalCoordinate:Pn,getVerticalCoordinate:ws,getCoordinateString:Hg,getVerticalCoordinateString:Zu,collections:{},newObject:$n,newAdditionalObject:Me,newObjectDeferred:Mr,newObjectDeferredBegin:Ce,getFilters:bt,putStream:$t,events:Qr,scaleFactor:ur,pageSize:{getWidth:function(){return Gm(J)},setWidth:function(ee){hu(J,ee)},getHeight:function(){return Km(J)},setHeight:function(ee){Rt(J,ee)}},encryptionOptions:d,encryption:rs,getEncryptor:function(ee){return d!==null?rs.encryptor(ee,0):function(Se){return Se}},output:yi,getNumberOfPages:ei,pages:ye,out:Te,f2:F,f3:q,getPageInfo:ni,getPageInfoByObjId:bo,getCurrentPageInfo:_t,getPDFVersion:g,Point:Fa,Rectangle:Wm,Matrix:Fr,hasHotfix:bh},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Gm(J)},set:function(ee){hu(J,ee)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Km(J)},set:function(ee){Rt(J,ee)},enumerable:!0,configurable:!0}),(function(ee){for(var Se=0,Ye=Re.length;Se<Ye;Se++){var ct=qt.call(this,ee[Se][0],ee[Se][1],ee[Se][2],Re[Se][3],!0);h===!1&&(f[ct]=!0);var vt=ee[Se][0].split("-");Tn({id:ct,fontName:vt[0],fontStyle:vt[1]||""})}Qr.publish("addFonts",{fonts:Fe,dictionary:ut})}).call(m,Re),Kt="F1",Ho(i,r),Qr.publish("initialized"),m}gS.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},gS.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gS.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},gS.prototype.processOwnerPassword=function(t,e){return HW(qW(e).substr(0,5),t)},gS.prototype.encryptor=function(t,e){var r=qW(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return HW(r,n)}},XP.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Us(t)!==Us(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},wn.API={events:[]},wn.version="3.0.3";var Oo=wn.API,HJ=1,AN=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oS=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},oi=function(t){return t.toFixed(2)},l1=function(t){return t.toFixed(5)};Oo.__acroform__={};var vh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},lhe=function(t){return t*HJ},j0=function(t){var e=new e5e,r=hn.internal.getHeight(t)||0,n=hn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(oi(n)),Number(oi(r))],e},pMt=Oo.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},gMt=Oo.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},xMt=Oo.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},nl=Oo.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return xMt(t,e-1)},il=Oo.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pMt(t,e-1)},sl=Oo.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return gMt(t,e-1)},vMt=Oo.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=n(s)||0,[Number(oi(c.lowerLeft_X)),Number(oi(c.lowerLeft_Y)),Number(oi(c.upperRight_X)),Number(oi(c.upperRight_Y))]},yMt=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=WW(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+oi(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=j0(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},WW=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(F){return F.split(`
`)}):i.map(function(F){return[F]});var s=r,o=hn.internal.getHeight(t)||0;o=o<0?-o:o;var l=hn.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(F,q,Q){if(F+1<i.length){var re=q+" "+i[F+1][0];return PD(re,t,Q).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,h=PD("3",t,s).height,f=t.multiline?o-s:(o-h)/2,m=f+=2,x=0,g=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+PD(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var w="",S=0,E=0;E<i.length;E++)if(i.hasOwnProperty(E)){var j=!1;if(i[E].length!==1&&y!==i[E].length-1){if((h+2)*(S+2)+2>o)continue e;w+=i[E][y],j=!0,g=E,E--}else{w=(w+=i[E][y]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var T=parseInt(E),O=c(T,w,s),I=E>=i.length-1;if(O&&!I){w+=" ",y=0;continue}if(O||I){if(I)g=T;else if(t.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(S+2)+2>o)continue e;g=T}}for(var M="",D=x;D<=g;D++){var z=i[D];if(t.multiline){if(D===g){M+=z[y]+" ",y=(y+1)%z.length;continue}if(D===x){M+=z[z.length-1]+" ";continue}}M+=z[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,d=PD(M,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=oi(u)+" "+oi(m)+` Td
`,e+="("+AN(M)+`) Tj
`,e+=-oi(u)+` 0 Td
`,m=-(s+2),d=0,x=j?g:g+1,S++,w=""}break}return n.text=e,n.fontSize=s,n},PD=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},bMt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wMt=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},_Mt=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(f0.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(bMt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");HJ=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new t5e,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&wMt(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=vMt(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=hn.createDefaultAppearanceStream(l),Us(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=yMt(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var m=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,l)),h+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,l)),h+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&function(g,y){for(var w in g)if(g.hasOwnProperty(w)){var S=w,E=g[w];y.internal.newObjectDeferredBegin(E.objId,!0),Us(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete g[S]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},JCe=Oo.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Us(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+AN(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},YU=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+AN(n(t))+")"},vg=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vg.prototype.toString=function(){return this.objId+" 0 R"},vg.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},vg.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:JCe(i,this.objId,this.scope)}):i instanceof vg?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var e5e=function(){vg.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};vh(e5e,vg);var t5e=function(){vg.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+AN(r(t))+")"}},set:function(r){t=r}})};vh(t5e,vg);var f0=function t(){vg.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nl(e,3)},set:function(w){w?this.F=il(e,3):this.F=sl(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof UL)return;s="FieldObject"+t.FieldNum++}var w=function(S){return S};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+AN(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/HJ:u},set:function(w){u=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof UL||this instanceof mb))return YU(h,this.objId,this.scope)},set:function(w){w=w.toString(),h=w}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Wl==0?YU(f,this.objId,this.scope):f},set:function(w){w=w.toString(),f=this instanceof Wl==0?w.substr(0,1)==="("?oS(w.substr(1,w.length-2)):oS(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wl==1?oS(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof Wl==1?"/"+w:w}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Wl==0?YU(m,this.objId,this.scope):m},set:function(w){w=w.toString(),m=this instanceof Wl==0?w.substr(0,1)==="("?oS(w.substr(1,w.length-2)):oS(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wl==1?oS(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Wl==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(w){w=!!w,g=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(w){x=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,1)},set:function(w){w?this.Ff=il(this.Ff,1):this.Ff=sl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,2)},set:function(w){w?this.Ff=il(this.Ff,2):this.Ff=sl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,3)},set:function(w){w?this.Ff=il(this.Ff,3):this.Ff=sl(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');y=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(y){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};vh(f0,vg);var j_=function(){f0.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return JCe(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,18)},set:function(r){r?this.Ff=il(this.Ff,18):this.Ff=sl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=il(this.Ff,19):this.Ff=sl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,20)},set:function(r){r?(this.Ff=il(this.Ff,20),e.sort()):this.Ff=sl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,22)},set:function(r){r?this.Ff=il(this.Ff,22):this.Ff=sl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,23)},set:function(r){r?this.Ff=il(this.Ff,23):this.Ff=sl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,27)},set:function(r){r?this.Ff=il(this.Ff,27):this.Ff=sl(this.Ff,27)}}),this.hasAppearanceStream=!1};vh(j_,f0);var A_=function(){j_.call(this),this.fontName="helvetica",this.combo=!1};vh(A_,j_);var C_=function(){A_.call(this),this.combo=!0};vh(C_,A_);var G4=function(){C_.call(this),this.edit=!0};vh(G4,C_);var Wl=function(){f0.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,15)},set:function(r){r?this.Ff=il(this.Ff,15):this.Ff=sl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,16)},set:function(r){r?this.Ff=il(this.Ff,16):this.Ff=sl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,17)},set:function(r){r?this.Ff=il(this.Ff,17):this.Ff=sl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,26)},set:function(r){r?this.Ff=il(this.Ff,26):this.Ff=sl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+AN(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Us(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};vh(Wl,f0);var K4=function(){Wl.call(this),this.pushButton=!0};vh(K4,Wl);var T_=function(){Wl.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};vh(T_,Wl);var UL=function(){var t,e;f0.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+AN(i(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Us(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=hn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};vh(UL,f0),T_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},T_.prototype.createOption=function(t){var e=new UL;return e.Parent=this,e.optionName=t,this.Kids.push(e),NMt.call(this.scope,e),e};var X4=function(){Wl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=hn.CheckBox.createAppearanceStream()};vh(X4,Wl);var mb=function(){f0.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,13)},set:function(e){e?this.Ff=il(this.Ff,13):this.Ff=sl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,21)},set:function(e){e?this.Ff=il(this.Ff,21):this.Ff=sl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,23)},set:function(e){e?this.Ff=il(this.Ff,23):this.Ff=sl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,24)},set:function(e){e?this.Ff=il(this.Ff,24):this.Ff=sl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,25)},set:function(e){e?this.Ff=il(this.Ff,25):this.Ff=sl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,26)},set:function(e){e?this.Ff=il(this.Ff,26):this.Ff=sl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};vh(mb,f0);var Y4=function(){mb.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nl(this.Ff,14)},set:function(t){t?this.Ff=il(this.Ff,14):this.Ff=sl(this.Ff,14)}}),this.password=!0};vh(Y4,mb);var hn={CheckBox:{createAppearanceStream:function(){return{N:{On:hn.CheckBox.YesNormal},D:{On:hn.CheckBox.YesPushDown,Off:hn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=j0(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=WW(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+oi(hn.internal.getWidth(t))+" "+oi(hn.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+oi(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=j0(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=hn.internal.getHeight(t),o=hn.internal.getWidth(t),l=WW(t,t.caption);return i.push("1 g"),i.push("0 0 "+oi(o)+" "+oi(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+oi(o-1)+" "+oi(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+oi(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=j0(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+oi(hn.internal.getWidth(t))+" "+oi(hn.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:hn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=hn.RadioButton.Circle.YesNormal,e.D[t]=hn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=j0(t);e.scope=t.scope;var r=[],n=hn.internal.getWidth(t)<=hn.internal.getHeight(t)?hn.internal.getWidth(t)/4:hn.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=hn.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+l1(hn.internal.getWidth(t)/2)+" "+l1(hn.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=j0(t);e.scope=t.scope;var r=[],n=hn.internal.getWidth(t)<=hn.internal.getHeight(t)?hn.internal.getWidth(t)/4:hn.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*hn.internal.Bezier_C).toFixed(5)),o=Number((n*hn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+l1(hn.internal.getWidth(t)/2)+" "+l1(hn.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+l1(hn.internal.getWidth(t)/2)+" "+l1(hn.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=j0(t);e.scope=t.scope;var r=[],n=hn.internal.getWidth(t)<=hn.internal.getHeight(t)?hn.internal.getWidth(t)/4:hn.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*hn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+l1(hn.internal.getWidth(t)/2)+" "+l1(hn.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:hn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=hn.RadioButton.Cross.YesNormal,e.D[t]=hn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=j0(t);e.scope=t.scope;var r=[],n=hn.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+oi(hn.internal.getWidth(t)-2)+" "+oi(hn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(oi(n.x1.x)+" "+oi(n.x1.y)+" m"),r.push(oi(n.x2.x)+" "+oi(n.x2.y)+" l"),r.push(oi(n.x4.x)+" "+oi(n.x4.y)+" m"),r.push(oi(n.x3.x)+" "+oi(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=j0(t);e.scope=t.scope;var r=hn.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+oi(hn.internal.getWidth(t))+" "+oi(hn.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+oi(hn.internal.getWidth(t)-2)+" "+oi(hn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(oi(r.x1.x)+" "+oi(r.x1.y)+" m"),n.push(oi(r.x2.x)+" "+oi(r.x2.y)+" l"),n.push(oi(r.x4.x)+" "+oi(r.x4.y)+" m"),n.push(oi(r.x3.x)+" "+oi(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=j0(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+oi(hn.internal.getWidth(t))+" "+oi(hn.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};hn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=hn.internal.getWidth(t),r=hn.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},hn.internal.getWidth=function(t){var e=0;return Us(t)==="object"&&(e=lhe(t.Rect[2])),e},hn.internal.getHeight=function(t){var e=0;return Us(t)==="object"&&(e=lhe(t.Rect[3])),e};var NMt=Oo.addField=function(t){if(_Mt(this,t),!(t instanceof f0))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Oo.AcroFormChoiceField=j_,Oo.AcroFormListBox=A_,Oo.AcroFormComboBox=C_,Oo.AcroFormEditBox=G4,Oo.AcroFormButton=Wl,Oo.AcroFormPushButton=K4,Oo.AcroFormRadioButton=T_,Oo.AcroFormCheckBox=X4,Oo.AcroFormTextField=mb,Oo.AcroFormPasswordField=Y4,Oo.AcroFormAppearance=hn,Oo.AcroForm={ChoiceField:j_,ListBox:A_,ComboBox:C_,EditBox:G4,Button:Wl,PushButton:K4,RadioButton:T_,CheckBox:X4,TextField:mb,PasswordField:Y4,Appearance:hn},wn.AcroForm={ChoiceField:j_,ListBox:A_,ComboBox:C_,EditBox:G4,Button:Wl,PushButton:K4,RadioButton:T_,CheckBox:X4,TextField:mb,PasswordField:Y4,Appearance:hn};wn.AcroForm;function r5e(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(F,q){var Q,re,Z,se,K,X=r;if((q=q||r)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(O(F))for(K in n)for(Z=n[K],Q=0;Q<Z.length;Q+=1){for(se=!0,re=0;re<Z[Q].length;re+=1)if(Z[Q][re]!==void 0&&Z[Q][re]!==F[re]){se=!1;break}if(se===!0){X=K;break}}else for(K in n)for(Z=n[K],Q=0;Q<Z.length;Q+=1){for(se=!0,re=0;re<Z[Q].length;re+=1)if(Z[Q][re]!==void 0&&Z[Q][re]!==F.charCodeAt(re)){se=!1;break}if(se===!0){X=K;break}}return X===r&&q!==r&&(X=q),X},s=function F(q){for(var Q=this.internal.write,re=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:q.width}),se.push({key:"Height",value:q.height}),q.colorSpace===w.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===w.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var K="",X=0,Y=q.transparency.length;X<Y;X++)K+=q.transparency[X]+" "+q.transparency[X]+" ";se.push({key:"Mask",value:"["+K+"]"})}q.sMask!==void 0&&se.push({key:"SMask",value:q.objectId+1+" 0 R"});var oe=q.filter!==void 0?["/"+q.filter]:void 0;if(re({data:q.data,additionalKeyValues:se,alreadyAppliedFilters:oe,objectId:q.objectId}),Q("endobj"),"sMask"in q&&q.sMask!==void 0){var xe,H=(xe=q.sMaskBitsPerComponent)!==null&&xe!==void 0?xe:q.bitsPerComponent,J={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:H,data:q.sMask};"filter"in q&&(J.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(H," /Columns ").concat(q.width),J.filter=q.filter),F.call(this,J)}if(q.colorSpace===w.INDEXED){var ie=this.internal.newObject();re({data:M(new Uint8Array(q.palette)),objectId:ie}),Q("endobj")}},o=function(){var F=this.internal.collections[e+"images"];for(var q in F)s.call(this,F[q])},l=function(){var F,q=this.internal.collections[e+"images"],Q=this.internal.write;for(var re in q)Q("/I"+(F=q[re]).index,F.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var F=this.internal.collections[e+"images"];return c.call(this),F},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(F){return typeof t["process"+F.toUpperCase()]=="function"},f=function(F){return Us(F)==="object"&&F.nodeType===1},m=function(F,q){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var Q=""+F.getAttribute("src");if(Q.indexOf("data:image/")===0)return A6(unescape(Q).split("base64,").pop());var re=t.loadFile(Q,!0);if(re!==void 0)return re}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var Z;switch(q){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return A6(F.toDataURL(Z,1).split("base64,").pop())}},x=function(F){var q=this.internal.collections[e+"images"];if(q){for(var Q in q)if(F===q[Q].alias)return q[Q]}},g=function(F,q,Q){return F||q||(F=-96,q=-96),F<0&&(F=-1*Q.width*72/F/this.internal.scaleFactor),q<0&&(q=-1*Q.height*72/q/this.internal.scaleFactor),F===0&&(F=q*Q.width/Q.height),q===0&&(q=F*Q.height/Q.width),[F,q]},y=function(F,q,Q,re,Z,se){var K=g.call(this,Q,re,Z),X=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,oe=u.call(this);if(Q=K[0],re=K[1],oe[Z.index]=Z,se){se*=Math.PI/180;var xe=Math.cos(se),H=Math.sin(se),J=function(ce){return ce.toFixed(4)},ie=[J(xe),J(H),J(-1*H),J(xe),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,X(F),Y(q+re),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([X(Q),"0","0",X(re),"0","0","cm"].join(" "))):this.internal.write([X(Q),"0","0",X(re),X(F),Y(q+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=t.__addimage__.sHashCode=function(F){var q,Q,re=0;if(typeof F=="string")for(Q=F.length,q=0;q<Q;q++)re=(re<<5)-re+F.charCodeAt(q),re|=0;else if(O(F))for(Q=F.byteLength/2,q=0;q<Q;q++)re=(re<<5)-re+F[q],re|=0;return re},j=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var q=!0;return F.length===0&&(q=!1),F.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(q=!1),q},T=t.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var q=F.indexOf(",");return q<0?null:F.substring(0,q).trim().endsWith("base64")?F.substring(q+1):null};t.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var O=t.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},I=t.__addimage__.binaryStringToUint8Array=function(F){for(var q=F.length,Q=new Uint8Array(q),re=0;re<q;re++)Q[re]=F.charCodeAt(re);return Q},M=t.__addimage__.arrayBufferToBinaryString=function(F){for(var q="",Q=O(F)?F:new Uint8Array(F),re=0;re<Q.length;re+=8192)q+=String.fromCharCode.apply(null,Q.subarray(re,re+8192));return q};t.addImage=function(){var F,q,Q,re,Z,se,K,X,Y;if(typeof arguments[1]=="number"?(q=r,Q=arguments[1],re=arguments[2],Z=arguments[3],se=arguments[4],K=arguments[5],X=arguments[6],Y=arguments[7]):(q=arguments[1],Q=arguments[2],re=arguments[3],Z=arguments[4],se=arguments[5],K=arguments[6],X=arguments[7],Y=arguments[8]),Us(F=arguments[0])==="object"&&!f(F)&&"imageData"in F){var oe=F;F=oe.imageData,q=oe.format||q||r,Q=oe.x||Q||0,re=oe.y||re||0,Z=oe.w||oe.width||Z,se=oe.h||oe.height||se,K=oe.alias||K,X=oe.compression||X,Y=oe.rotation||oe.angle||Y}var xe=this.internal.getFilters();if(X===void 0&&xe.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(Q)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var H=D.call(this,F,q,K,X);return y.call(this,Q,re,Z,se,H,Y),this};var D=function(F,q,Q,re){var Z,se,K;if(typeof F=="string"&&i(F)===r){F=unescape(F);var X=z(F,!1);(X!==""||(X=t.loadFile(F,!0))!==void 0)&&(F=X)}if(f(F)&&(F=m(F,q)),q=i(F,q),!h(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((K=Q)==null||K.length===0)&&(Q=function(Y){return typeof Y=="string"||O(Y)?E(Y):O(Y.data)?E(Y.data):null}(F)),(Z=x.call(this,Q))||(F instanceof Uint8Array||q==="RGBA"||(se=F,F=I(F)),Z=this["process"+q.toUpperCase()](F,d.call(this),Q,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:S.NONE}(re),se)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},z=t.__addimage__.convertBase64ToBinaryString=function(F,q){q=typeof q!="boolean"||q;var Q,re="";if(typeof F=="string"){var Z;Q=(Z=T(F))!==null&&Z!==void 0?Z:F;try{re=A6(Q)}catch(se){if(q)throw j(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(F){var q,Q,re="";if(f(F)&&(F=m(F)),typeof F=="string"&&i(F)===r&&((re=z(F,!1))===""&&(re=t.loadFile(F)||""),F=re),Q=i(F),!h(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(F instanceof Uint8Array||(F=I(F)),!(q=this["process"+Q.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=Q,q}})(wn.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};wn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){n=u[f];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(g.objId),S=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(w(n.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(w(S))+") >>",g.content=s;var E=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+E,n.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var T=this.annotations._nameMap[n.options.name];n.options.pageNumber=T.page,n.options.top=T.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var O=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+O+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+i),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,i,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,i,s),i+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(wn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(g){var y=0,w=r,S="",E=0;for(y=0;y<g.length;y+=1)w[g.charCodeAt(y)]!==void 0?(E++,typeof(w=w[g.charCodeAt(y)])=="number"&&(S+=String.fromCharCode(w),w=r,E=0),y===g.length-1&&(w=r,S+=g.charAt(y-(E-1)),y-=E-1,E=0)):(w=r,S+=g.charAt(y-E),y-=E,E=0);return S};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(g,y,w){return o(g)?s(g)===!1?-1:!u(g)||!o(y)&&!o(w)||!o(w)&&l(y)||l(g)&&!o(y)||l(g)&&c(y)||l(g)&&l(y)?0:d(g)&&o(y)&&!l(y)&&o(w)&&u(w)?3:l(g)||!o(w)?1:2:-1},m=function(g){var y=0,w=0,S=0,E="",j="",T="",O=(g=g||"").split("\\s+"),I=[];for(y=0;y<O.length;y+=1){for(I.push(""),w=0;w<O[y].length;w+=1)E=O[y][w],j=O[y][w-1],T=O[y][w+1],o(E)?(S=f(E,j,T),I[y]+=S!==-1?String.fromCharCode(e[E.charCodeAt(0)][S]):E):I[y]+=E;I[y]=h(I[y])}return I.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(y)){var S=0;for(w=[],S=0;S<y.length;S+=1)Array.isArray(y[S])?w.push([m(y[S][0]),y[S][1],y[S][2]]):w.push([m(y[S])]);g=w}else g=m(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",x])}(wn.API),wn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wn.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(g){x=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,m=0,x=0,g=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=u.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(E,j){return E.concat(y.splitTextToSize(j,w))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)m<(g=this.getStringUnitWidth(c[S],{font:h})*d)&&(m=g);return m!==0&&(x=c.length),{w:m/=f,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,m&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,h,f){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,x,g,y,w=[],S=[],E=[],j={},T={},O=[],I=[],M=(f=f||{}).autoSize||!1,D=f.printHeaders!==!1,z=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,F=f.margins||Object.assign({width:this.getPageWidth()},e),q=typeof f.padding=="number"?f.padding:3,Q=f.headerBackgroundColor||"#c8c8c8",re=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=re,this.setFontSize(z),h==null)S=w=Object.keys(d[0]),E=w.map(function(){return"left"});else if(Array.isArray(h)&&Us(h[0])==="object")for(w=h.map(function(oe){return oe.name}),S=h.map(function(oe){return oe.prompt||oe.name||""}),E=h.map(function(oe){return oe.align||"left"}),m=0;m<h.length;m+=1)T[h[m].name]=.7499990551181103*h[m].width;else Array.isArray(h)&&typeof h[0]=="string"&&(S=w=h,E=w.map(function(){return"left"}));if(M||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<w.length;m+=1){for(j[y=w[m]]=d.map(function(oe){return oe[y]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(S[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=j[y],this.setFont(void 0,"normal"),g=0;g<x.length;g+=1)O.push(this.getTextDimensions(x[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[y]=Math.max.apply(null,O)+q+q,O=[]}if(D){var Z={};for(m=0;m<w.length;m+=1)Z[w[m]]={},Z[w[m]].text=S[m],Z[w[m]].align=E[m];var se=l.call(this,Z,T);I=w.map(function(oe){return new s(c,u,T[oe],se,Z[oe].text,void 0,Z[oe].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var K=h.reduce(function(oe,xe){return oe[xe.name]=xe.align,oe},{});for(m=0;m<d.length;m+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:m,data:d[m]},this);var X=l.call(this,d[m],T);for(g=0;g<w.length;g+=1){var Y=d[m][w[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:m,col:g,data:Y},this),o.call(this,new s(c,u,T[w[g]],X,Y,m+2,K[w[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(m){var x=c[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/f+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,f.push(d)),d.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(wn.API);var n5e={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},i5e=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],GW=r5e(i5e),s5e=[100,200,300,400,500,600,700,800,900],SMt=r5e(s5e);function ZU(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return n5e[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof GW[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function che(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var EMt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uhe={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dhe(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function hhe(t){return t.trimLeft()}function jMt(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function AMt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var kD,fhe,mhe,lS,OD,phe,ghe,xhe,QU=["times"];function vhe(t,e,r,n,i){var s=4,o=bhe;switch(i){case wn.API.image_compression.FAST:s=1,o=yhe;break;case wn.API.image_compression.MEDIUM:s=6,o=whe;break;case wn.API.image_compression.SLOW:s=9,o=_he}t=function(c,u,d,h){for(var f,m=c.length/u,x=new Uint8Array(c.length+m),g=[CMt,yhe,bhe,whe,_he],y=0;y<m;y+=1){var w=y*u,S=c.subarray(w,w+u);if(h)x.set(h(S,d,f),w+y);else{for(var E=g.length,j=[],T=0;T<E;T+=1)j[T]=g[T](S,d,f);var O=PMt(j.concat());x.set(j[O],w+y)}f=S}return x}(t,e,Math.ceil(r*n/8),o);var l=RW(t,{level:s});return wn.API.__addimage__.arrayBufferToBinaryString(l)}function CMt(t){var e=Array.apply([],t);return e.unshift(0),e}function yhe(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function bhe(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;i[s+1]=t[s]-o+256&255}return i}function whe(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;i[s+1]=t[s]+256-(o+l>>>1)&255}return i}function _he(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var o=TMt(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function TMt(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function PMt(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function JU(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),o=(1<<r)-1;return a5e(t,i)>>s&o}function Nhe(t,e,r,n){var i=r*n,s=Math.floor(i/8),o=16-(i-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,h){if(d+1<u.byteLength)u.setUint16(d,h,!1);else{var f=h>>8&255;u.setUint8(d,f)}})(t,s,a5e(t,s)&~(l<<o)&65535|c)}function a5e(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function kMt(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],h=0,f=null,m=0,x=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],1&g||(f=null),m=g>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,E=t[e++]|t[e++]<<8,j=t[e++],T=j>>6&1,O=1<<1+(7&j),I=l,M=c,D=!1;j>>7&&(D=!0,I=e,M=O,e+=3*O);var z=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}d.push({x:y,y:w,width:S,height:E,has_local_palette:D,palette_offset:I,palette_size:M,data_offset:z,data_length:e-z,transparent_index:f,interlaced:!!T,delay:h,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(q){if(q<0||q>=d.length)throw new Error("Frame index out of range.");return d[q]},this.decodeAndBlitFrameBGRA=function(q,Q){var re=this.frameInfo(q),Z=re.width*re.height,se=new Uint8Array(Z);She(t,re.data_offset,se,Z);var K=re.palette_offset,X=re.transparent_index;X===null&&(X=256);var Y=re.width,oe=r-Y,xe=Y,H=4*(re.y*r+re.x),J=4*((re.y+re.height)*r+re.x),ie=H,ce=4*oe;re.interlaced===!0&&(ce+=4*r*7);for(var me=8,he=0,_e=se.length;he<_e;++he){var ue=se[he];if(xe===0&&(xe=Y,(ie+=ce)>=J&&(ce=4*oe+4*r*(me-1),ie=H+(Y+oe)*(me<<1),me>>=1)),ue===X)ie+=4;else{var je=t[K+3*ue],ye=t[K+3*ue+1],Le=t[K+3*ue+2];Q[ie++]=Le,Q[ie++]=ye,Q[ie++]=je,Q[ie++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(q,Q){var re=this.frameInfo(q),Z=re.width*re.height,se=new Uint8Array(Z);She(t,re.data_offset,se,Z);var K=re.palette_offset,X=re.transparent_index;X===null&&(X=256);var Y=re.width,oe=r-Y,xe=Y,H=4*(re.y*r+re.x),J=4*((re.y+re.height)*r+re.x),ie=H,ce=4*oe;re.interlaced===!0&&(ce+=4*r*7);for(var me=8,he=0,_e=se.length;he<_e;++he){var ue=se[he];if(xe===0&&(xe=Y,(ie+=ce)>=J&&(ce=4*oe+4*r*(me-1),ie=H+(Y+oe)*(me<<1),me>>=1)),ue===X)ie+=4;else{var je=t[K+3*ue],ye=t[K+3*ue+1],Le=t[K+3*ue+2];Q[ie++]=je,Q[ie++]=ye,Q[ie++]=Le,Q[ie++]=255}--xe}}}function She(t,e,r,n){for(var i=t[e++],s=1<<i,o=s+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,h=0,f=0,m=t[e++],x=new Int32Array(4096),g=null;;){for(;d<16&&m!==0;)h|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<c)break;var y=h&u;if(h>>=c,d-=c,y!==s){if(y===o)break;for(var w=y<l?y:g,S=0,E=w;E>s;)E=x[E]>>8,++S;var j=E;if(f+S+(w!==y?1:0)>n)return void oa.log("Warning, gif stream longer than expected.");r[f++]=j;var T=f+=S;for(w!==y&&(r[f++]=j),E=w;S--;)E=x[E],r[--T]=255&E,E>>=8;g!==null&&l<4096&&(x[l++]=g<<8|j,l>=u+1&&c<12&&(++c,u=u<<1|1)),g=y}else l=o+1,u=(1<<(c=i+1))-1,g=null}return f!==n&&oa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ez(t){var e,r,n,i,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),f=new Array(65535),m=new Array(64),x=new Array(64),g=[],y=0,w=7,S=new Array(64),E=new Array(64),j=new Array(64),T=new Array(256),O=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(H,J){for(var ie=0,ce=0,me=new Array,he=1;he<=16;he++){for(var _e=1;_e<=H[he];_e++)me[J[ce]]=[],me[J[ce]][0]=ie,me[J[ce]][1]=he,ce++,ie++;ie*=2}return me}function K(H){for(var J=H[0],ie=H[1]-1;ie>=0;)J&1<<ie&&(y|=1<<w),ie--,--w<0&&(y==255?(X(255),X(0)):X(y),w=7,y=0)}function X(H){g.push(H)}function Y(H){X(H>>8&255),X(255&H)}function oe(H,J,ie,ce,me){for(var he,_e=me[0],ue=me[240],je=function(Ue,xt){var st,Xt,Jt,_r,lt,pt,er,Vt,Kt,ur,rt=0;for(Kt=0;Kt<8;++Kt){st=Ue[rt],Xt=Ue[rt+1],Jt=Ue[rt+2],_r=Ue[rt+3],lt=Ue[rt+4],pt=Ue[rt+5],er=Ue[rt+6];var Lt=st+(Vt=Ue[rt+7]),Dt=st-Vt,Fe=Xt+er,ut=Xt-er,Mt=Jt+pt,Ht=Jt-pt,Wt=_r+lt,zt=_r-lt,Rr=Lt+Wt,vr=Lt-Wt,Cr=Fe+Mt,Pr=Fe-Mt;Ue[rt]=Rr+Cr,Ue[rt+4]=Rr-Cr;var Qr=.707106781*(Pr+vr);Ue[rt+2]=vr+Qr,Ue[rt+6]=vr-Qr;var Tr=.382683433*((Rr=zt+Ht)-(Pr=ut+Dt)),Gr=.5411961*Rr+Tr,ln=1.306562965*Pr+Tr,vi=.707106781*(Cr=Ht+ut),Fr=Dt+vi,Bi=Dt-vi;Ue[rt+5]=Bi+Gr,Ue[rt+3]=Bi-Gr,Ue[rt+1]=Fr+ln,Ue[rt+7]=Fr-ln,rt+=8}for(rt=0,Kt=0;Kt<8;++Kt){st=Ue[rt],Xt=Ue[rt+8],Jt=Ue[rt+16],_r=Ue[rt+24],lt=Ue[rt+32],pt=Ue[rt+40],er=Ue[rt+48];var da=st+(Vt=Ue[rt+56]),$i=st-Vt,ks=Xt+er,$n=Xt-er,Mr=Jt+pt,Ce=Jt-pt,Me=_r+lt,Ve=_r-lt,He=da+Me,Xe=da-Me,Qe=ks+Mr,bt=ks-Mr;Ue[rt]=He+Qe,Ue[rt+32]=He-Qe;var $t=.707106781*(bt+Xe);Ue[rt+16]=Xe+$t,Ue[rt+48]=Xe-$t;var wt=.382683433*((He=Ve+Ce)-(bt=$n+$i)),Et=.5411961*He+wt,kt=1.306562965*bt+wt,fr=.707106781*(Qe=Ce+$n),br=$i+fr,Nr=$i-fr;Ue[rt+40]=Nr+Et,Ue[rt+24]=Nr-Et,Ue[rt+8]=br+kt,Ue[rt+56]=br-kt,rt++}for(Kt=0;Kt<64;++Kt)ur=Ue[Kt]*xt[Kt],m[Kt]=ur>0?ur+.5|0:ur-.5|0;return m}(H,J),ye=0;ye<64;++ye)x[I[ye]]=je[ye];var Le=x[0]-ie;ie=x[0],Le==0?K(ce[0]):(K(ce[f[he=32767+Le]]),K(h[he]));for(var Ge=63;Ge>0&&x[Ge]==0;)Ge--;if(Ge==0)return K(_e),ie;for(var Be,Te=1;Te<=Ge;){for(var ze=Te;x[Te]==0&&Te<=Ge;)++Te;var tt=Te-ze;if(tt>=16){Be=tt>>4;for(var Re=1;Re<=Be;++Re)K(ue);tt&=15}he=32767+x[Te],K(me[(tt<<4)+f[he]]),K(h[he]),Te++}return Ge!=63&&K(_e),ie}function xe(H){H=Math.min(Math.max(H,1),100),s!=H&&(function(J){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var me=o((ie[ce]*J+50)/100);me=Math.min(Math.max(me,1),255),l[I[ce]]=me}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var ue=o((he[_e]*J+50)/100);ue=Math.min(Math.max(ue,1),255),c[I[_e]]=ue}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,Le=0;Le<8;Le++)for(var Ge=0;Ge<8;Ge++)u[ye]=1/(l[I[ye]]*je[Le]*je[Ge]*8),d[ye]=1/(c[I[ye]]*je[Le]*je[Ge]*8),ye++}(H<50?Math.floor(5e3/H):Math.floor(200-2*H)),s=H)}this.encode=function(H,J){J&&xe(J),g=new Array,y=0,w=7,Y(65496),Y(65504),Y(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),Y(1),Y(1),X(0),X(0),function(){Y(65499),Y(132),X(0);for(var Xt=0;Xt<64;Xt++)X(l[Xt]);X(1);for(var Jt=0;Jt<64;Jt++)X(c[Jt])}(),function(Xt,Jt){Y(65472),Y(17),X(8),Y(Jt),Y(Xt),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(H.width,H.height),function(){Y(65476),Y(418),X(0);for(var Xt=0;Xt<16;Xt++)X(M[Xt+1]);for(var Jt=0;Jt<=11;Jt++)X(D[Jt]);X(16);for(var _r=0;_r<16;_r++)X(z[_r+1]);for(var lt=0;lt<=161;lt++)X(F[lt]);X(1);for(var pt=0;pt<16;pt++)X(q[pt+1]);for(var er=0;er<=11;er++)X(Q[er]);X(17);for(var Vt=0;Vt<16;Vt++)X(re[Vt+1]);for(var Kt=0;Kt<=161;Kt++)X(Z[Kt])}(),Y(65498),Y(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var ie=0,ce=0,me=0;y=0,w=7,this.encode.displayName="_encode_";for(var he,_e,ue,je,ye,Le,Ge,Be,Te,ze=H.data,tt=H.width,Re=H.height,Ue=4*tt,xt=0;xt<Re;){for(he=0;he<Ue;){for(ye=Ue*xt+he,Ge=-1,Be=0,Te=0;Te<64;Te++)Le=ye+(Be=Te>>3)*Ue+(Ge=4*(7&Te)),xt+Be>=Re&&(Le-=Ue*(xt+1+Be-Re)),he+Ge>=Ue&&(Le-=he+Ge-Ue+4),_e=ze[Le++],ue=ze[Le++],je=ze[Le++],S[Te]=(O[_e]+O[ue+256|0]+O[je+512|0]>>16)-128,E[Te]=(O[_e+768|0]+O[ue+1024|0]+O[je+1280|0]>>16)-128,j[Te]=(O[_e+1280|0]+O[ue+1536|0]+O[je+1792|0]>>16)-128;ie=oe(S,u,ie,e,n),ce=oe(E,d,ce,r,i),me=oe(j,d,me,r,i),he+=32}xt+=8}if(w>=0){var st=[];st[1]=w+1,st[0]=(1<<w+1)-1,K(st)}return Y(65497),new Uint8Array(g)},t=t||50,function(){for(var H=String.fromCharCode,J=0;J<256;J++)T[J]=H(J)}(),e=se(M,D),r=se(q,Q),n=se(z,F),i=se(re,Z),function(){for(var H=1,J=2,ie=1;ie<=15;ie++){for(var ce=H;ce<J;ce++)f[32767+ce]=ie,h[32767+ce]=[],h[32767+ce][1]=ie,h[32767+ce][0]=ce;for(var me=-(J-1);me<=-H;me++)f[32767+me]=ie,h[32767+me]=[],h[32767+me][1]=ie,h[32767+me][0]=J-1+me;H<<=1,J<<=1}}(),function(){for(var H=0;H<256;H++)O[H]=19595*H,O[H+256|0]=38470*H,O[H+512|0]=7471*H+32768,O[H+768|0]=-11059*H,O[H+1024|0]=-21709*H,O[H+1280|0]=32768*H+8421375,O[H+1536|0]=-27439*H,O[H+1792|0]=-5329*H}(),xe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ehe(t){function e(D){if(!D)throw Error("assert :P")}function r(D,z,F){for(var q=0;4>q;q++)if(D[z+q]!=F.charCodeAt(q))return!0;return!1}function n(D,z,F,q,Q){for(var re=0;re<Q;re++)D[z+re]=F[q+re]}function i(D,z,F,q){for(var Q=0;Q<q;Q++)D[z+Q]=F}function s(D){return new Int32Array(D)}function o(D,z){for(var F=[],q=0;q<D;q++)F.push(new z);return F}function l(D,z){var F=[];return function q(Q,re,Z){for(var se=Z[re],K=0;K<se&&(Q.push(Z.length>re+1?[]:new z),!(Z.length<re+1));K++)q(Q[K],re+1,Z)}(F,0,D),F}var c=function(){var D=this;function z(B,W){for(var le=1<<W-1>>>0;B&le;)le>>>=1;return le?(B&le-1)+le:B}function F(B,W,le,fe,Ae){e(!(fe%le));do B[W+(fe-=le)]=Ae;while(0<fe)}function q(B,W,le,fe,Ae){if(e(2328>=Ae),512>=Ae)var ke=s(512);else if((ke=s(Ae))==null)return 0;return function(De,$e,qe,Je,ft,Ot){var et,gt,Nt=$e,Zt=1<<qe,Tt=s(16),ir=s(16);for(e(ft!=0),e(Je!=null),e(De!=null),e(0<qe),gt=0;gt<ft;++gt){if(15<Je[gt])return 0;++Tt[Je[gt]]}if(Tt[0]==ft)return 0;for(ir[1]=0,et=1;15>et;++et){if(Tt[et]>1<<et)return 0;ir[et+1]=ir[et]+Tt[et]}for(gt=0;gt<ft;++gt)et=Je[gt],0<Je[gt]&&(Ot[ir[et]++]=gt);if(ir[15]==1)return(Je=new Q).g=0,Je.value=Ot[0],F(De,Nt,1,Zt,Je),Zt;var lr,Er=-1,yr=Zt-1,Sn=0,cn=1,Ei=1,xn=1<<qe;for(gt=0,et=1,ft=2;et<=qe;++et,ft<<=1){if(cn+=Ei<<=1,0>(Ei-=Tt[et]))return 0;for(;0<Tt[et];--Tt[et])(Je=new Q).g=et,Je.value=Ot[gt++],F(De,Nt+Sn,ft,xn,Je),Sn=z(Sn,et)}for(et=qe+1,ft=2;15>=et;++et,ft<<=1){if(cn+=Ei<<=1,0>(Ei-=Tt[et]))return 0;for(;0<Tt[et];--Tt[et]){if(Je=new Q,(Sn&yr)!=Er){for(Nt+=xn,lr=1<<(Er=et)-qe;15>Er&&!(0>=(lr-=Tt[Er]));)++Er,lr<<=1;Zt+=xn=1<<(lr=Er-qe),De[$e+(Er=Sn&yr)].g=lr+qe,De[$e+Er].value=Nt-$e-Er}Je.g=et-qe,Je.value=Ot[gt++],F(De,Nt+(Sn>>qe),ft,xn,Je),Sn=z(Sn,et)}}return cn!=2*ir[15]-1?0:Zt}(B,W,le,fe,Ae,ke)}function Q(){this.value=this.g=0}function re(){this.value=this.g=0}function Z(){this.G=o(5,Q),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ao,re)}function se(B,W,le,fe){e(B!=null),e(W!=null),e(2147483648>fe),B.Ca=254,B.I=0,B.b=-8,B.Ka=0,B.oa=W,B.pa=le,B.Jd=W,B.Yc=le+fe,B.Zc=4<=fe?le+fe-4+1:le,_e(B)}function K(B,W){for(var le=0;0<W--;)le|=je(B,128)<<W;return le}function X(B,W){var le=K(B,W);return ue(B)?-le:le}function Y(B,W,le,fe){var Ae,ke=0;for(e(B!=null),e(W!=null),e(4294967288>fe),B.Sb=fe,B.Ra=0,B.u=0,B.h=0,4<fe&&(fe=4),Ae=0;Ae<fe;++Ae)ke+=W[le+Ae]<<8*Ae;B.Ra=ke,B.bb=fe,B.oa=W,B.pa=le}function oe(B){for(;8<=B.u&&B.bb<B.Sb;)B.Ra>>>=8,B.Ra+=B.oa[B.pa+B.bb]<<Tl-8>>>0,++B.bb,B.u-=8;ce(B)&&(B.h=1,B.u=0)}function xe(B,W){if(e(0<=W),!B.h&&W<=ha){var le=ie(B)&Sc[W];return B.u+=W,oe(B),le}return B.h=1,B.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(B){return B.Ra>>>(B.u&Tl-1)>>>0}function ce(B){return e(B.bb<=B.Sb),B.h||B.bb==B.Sb&&B.u>Tl}function me(B,W){B.u=W,B.h=ce(B)}function he(B){B.u>=ii&&(e(B.u>=ii),oe(B))}function _e(B){e(B!=null&&B.oa!=null),B.pa<B.Zc?(B.I=(B.oa[B.pa++]|B.I<<8)>>>0,B.b+=8):(e(B!=null&&B.oa!=null),B.pa<B.Yc?(B.b+=8,B.I=B.oa[B.pa++]|B.I<<8):B.Ka?B.b=0:(B.I<<=8,B.b+=8,B.Ka=1))}function ue(B){return K(B,1)}function je(B,W){var le=B.Ca;0>B.b&&_e(B);var fe=B.b,Ae=le*W>>>8,ke=(B.I>>>fe>Ae)+0;for(ke?(le-=Ae,B.I-=Ae+1<<fe>>>0):le=Ae+1,fe=le,Ae=0;256<=fe;)Ae+=8,fe>>=8;return fe=7^Ae+Ec[fe],B.b-=fe,B.Ca=(le<<fe)-1,ke}function ye(B,W,le){B[W+0]=le>>24&255,B[W+1]=le>>16&255,B[W+2]=le>>8&255,B[W+3]=255&le}function Le(B,W){return B[W+0]|B[W+1]<<8}function Ge(B,W){return Le(B,W)|B[W+2]<<16}function Be(B,W){return Le(B,W)|Le(B,W+2)<<16}function Te(B,W){var le=1<<W;return e(B!=null),e(0<W),B.X=s(le),B.X==null?0:(B.Mb=32-W,B.Xa=W,1)}function ze(B,W){e(B!=null),e(W!=null),e(B.Xa==W.Xa),n(W.X,0,B.X,0,1<<W.Xa)}function tt(){this.X=[],this.Xa=this.Mb=0}function Re(B,W,le,fe){e(le!=null),e(fe!=null);var Ae=le[0],ke=fe[0];return Ae==0&&(Ae=(B*ke+W/2)/W),ke==0&&(ke=(W*Ae+B/2)/B),0>=Ae||0>=ke?0:(le[0]=Ae,fe[0]=ke,1)}function Ue(B,W){return B+(1<<W)-1>>>W}function xt(B,W){return((4278255360&B)+(4278255360&W)>>>0&4278255360)+((16711935&B)+(16711935&W)>>>0&16711935)>>>0}function st(B,W){D[W]=function(le,fe,Ae,ke,De,$e,qe){var Je;for(Je=0;Je<De;++Je){var ft=D[B]($e[qe+Je-1],Ae,ke+Je);$e[qe+Je]=xt(le[fe+Je],ft)}}}function Xt(){this.ud=this.hd=this.jd=0}function Jt(B,W){return((4278124286&(B^W))>>>1)+(B&W)>>>0}function _r(B){return 0<=B&&256>B?B:0>B?0:255<B?255:void 0}function lt(B,W){return _r(B+(B-W+.5>>1))}function pt(B,W,le){return Math.abs(W-le)-Math.abs(B-le)}function er(B,W,le,fe,Ae,ke,De){for(fe=ke[De-1],le=0;le<Ae;++le)ke[De+le]=fe=xt(B[W+le],fe)}function Vt(B,W,le,fe,Ae){var ke;for(ke=0;ke<le;++ke){var De=B[W+ke],$e=De>>8&255,qe=16711935&(qe=(qe=16711935&De)+(($e<<16)+$e));fe[Ae+ke]=(4278255360&De)+qe>>>0}}function Kt(B,W){W.jd=255&B,W.hd=B>>8&255,W.ud=B>>16&255}function ur(B,W,le,fe,Ae,ke){var De;for(De=0;De<fe;++De){var $e=W[le+De],qe=$e>>>8,Je=$e,ft=255&(ft=(ft=$e>>>16)+((B.jd<<24>>24)*(qe<<24>>24)>>>5));Je=255&(Je=(Je+=(B.hd<<24>>24)*(qe<<24>>24)>>>5)+((B.ud<<24>>24)*(ft<<24>>24)>>>5)),Ae[ke+De]=(4278255360&$e)+(ft<<16)+Je}}function rt(B,W,le,fe,Ae){D[W]=function(ke,De,$e,qe,Je,ft,Ot,et,gt){for(qe=Ot;qe<et;++qe)for(Ot=0;Ot<gt;++Ot)Je[ft++]=Ae($e[fe(ke[De++])])},D[B]=function(ke,De,$e,qe,Je,ft,Ot){var et=8>>ke.b,gt=ke.Ea,Nt=ke.K[0],Zt=ke.w;if(8>et)for(ke=(1<<ke.b)-1,Zt=(1<<et)-1;De<$e;++De){var Tt,ir=0;for(Tt=0;Tt<gt;++Tt)Tt&ke||(ir=fe(qe[Je++])),ft[Ot++]=Ae(Nt[ir&Zt]),ir>>=et}else D["VP8LMapColor"+le](qe,Je,Nt,Zt,ft,Ot,De,$e,gt)}}function Lt(B,W,le,fe,Ae){for(le=W+le;W<le;){var ke=B[W++];fe[Ae++]=ke>>16&255,fe[Ae++]=ke>>8&255,fe[Ae++]=255&ke}}function Dt(B,W,le,fe,Ae){for(le=W+le;W<le;){var ke=B[W++];fe[Ae++]=ke>>16&255,fe[Ae++]=ke>>8&255,fe[Ae++]=255&ke,fe[Ae++]=ke>>24&255}}function Fe(B,W,le,fe,Ae){for(le=W+le;W<le;){var ke=(De=B[W++])>>16&240|De>>12&15,De=240&De|De>>28&15;fe[Ae++]=ke,fe[Ae++]=De}}function ut(B,W,le,fe,Ae){for(le=W+le;W<le;){var ke=(De=B[W++])>>16&248|De>>13&7,De=De>>5&224|De>>3&31;fe[Ae++]=ke,fe[Ae++]=De}}function Mt(B,W,le,fe,Ae){for(le=W+le;W<le;){var ke=B[W++];fe[Ae++]=255&ke,fe[Ae++]=ke>>8&255,fe[Ae++]=ke>>16&255}}function Ht(B,W,le,fe,Ae,ke){if(ke==0)for(le=W+le;W<le;)ye(fe,((ke=B[W++])[0]>>24|ke[1]>>8&65280|ke[2]<<8&16711680|ke[3]<<24)>>>0),Ae+=32;else n(fe,Ae,B,W,le)}function Wt(B,W){D[W][0]=D[B+"0"],D[W][1]=D[B+"1"],D[W][2]=D[B+"2"],D[W][3]=D[B+"3"],D[W][4]=D[B+"4"],D[W][5]=D[B+"5"],D[W][6]=D[B+"6"],D[W][7]=D[B+"7"],D[W][8]=D[B+"8"],D[W][9]=D[B+"9"],D[W][10]=D[B+"10"],D[W][11]=D[B+"11"],D[W][12]=D[B+"12"],D[W][13]=D[B+"13"],D[W][14]=D[B+"0"],D[W][15]=D[B+"0"]}function zt(B){return B==IN||B==RN||B==DN||B==b}function Rr(){this.eb=[],this.size=this.A=this.fb=0}function vr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rr,this.f.kb=new vr,this.sd=null}function Pr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tr(B){return alert("todo:WebPSamplerProcessPlane"),B.T}function Gr(B,W){var le=B.T,fe=W.ba.f.RGBA,Ae=fe.eb,ke=fe.fb+B.ka*fe.A,De=Ac[W.ba.S],$e=B.y,qe=B.O,Je=B.f,ft=B.N,Ot=B.ea,et=B.W,gt=W.cc,Nt=W.dc,Zt=W.Mc,Tt=W.Nc,ir=B.ka,lr=B.ka+B.T,Er=B.U,yr=Er+1>>1;for(ir==0?De($e,qe,null,null,Je,ft,Ot,et,Je,ft,Ot,et,Ae,ke,null,null,Er):(De(W.ec,W.fc,$e,qe,gt,Nt,Zt,Tt,Je,ft,Ot,et,Ae,ke-fe.A,Ae,ke,Er),++le);ir+2<lr;ir+=2)gt=Je,Nt=ft,Zt=Ot,Tt=et,ft+=B.Rc,et+=B.Rc,ke+=2*fe.A,De($e,(qe+=2*B.fa)-B.fa,$e,qe,gt,Nt,Zt,Tt,Je,ft,Ot,et,Ae,ke-fe.A,Ae,ke,Er);return qe+=B.fa,B.j+lr<B.o?(n(W.ec,W.fc,$e,qe,Er),n(W.cc,W.dc,Je,ft,yr),n(W.Mc,W.Nc,Ot,et,yr),le--):1&lr||De($e,qe,null,null,Je,ft,Ot,et,Je,ft,Ot,et,Ae,ke+fe.A,null,null,Er),le}function ln(B,W,le){var fe=B.F,Ae=[B.J];if(fe!=null){var ke=B.U,De=W.ba.S,$e=De==nw||De==DN;W=W.ba.f.RGBA;var qe=[0],Je=B.ka;qe[0]=B.T,B.Kb&&(Je==0?--qe[0]:(--Je,Ae[0]-=B.width),B.j+B.ka+B.T==B.o&&(qe[0]=B.o-B.j-Je));var ft=W.eb;Je=W.fb+Je*W.A,B=P5(fe,Ae[0],B.width,ke,qe,ft,Je+($e?0:3),W.A),e(le==qe),B&&zt(De)&&$d(ft,Je,$e,ke,qe,W.A)}return 0}function vi(B){var W=B.ma,le=W.ba.S,fe=11>le,Ae=le==tw||le==rw||le==nw||le==ON||le==12||zt(le);if(W.memory=null,W.Ib=null,W.Jb=null,W.Nd=null,!Ym(W.Oa,B,Ae?11:12))return 0;if(Ae&&zt(le)&&_c(),B.da)alert("todo:use_scaling");else{if(fe){if(W.Ib=Tr,B.Kb){if(le=B.U+1>>1,W.memory=s(B.U+2*le),W.memory==null)return 0;W.ec=W.memory,W.fc=0,W.cc=W.ec,W.dc=W.fc+B.U,W.Mc=W.cc,W.Nc=W.dc+le,W.Ib=Gr,_c()}}else alert("todo:EmitYUV");Ae&&(W.Jb=ln,fe&&Ba())}if(fe&&!Aee){for(B=0;256>B;++B)yPe[B]=89858*(B-128)+nR>>rR,_Pe[B]=-22014*(B-128)+nR,wPe[B]=-45773*(B-128),bPe[B]=113618*(B-128)+nR>>rR;for(B=M5;B<r9;++B)W=76283*(B-16)+nR>>rR,NPe[B-M5]=hi(W,255),SPe[B-M5]=hi(W+8>>4,15);Aee=1}return 1}function Fr(B){var W=B.ma,le=B.U,fe=B.T;return e(!(1&B.ka)),0>=le||0>=fe?0:(le=W.Ib(B,W),W.Jb!=null&&W.Jb(B,W,le),W.Dc+=le,1)}function Bi(B){B.ma.memory=null}function da(B,W,le,fe){return xe(B,8)!=47?0:(W[0]=xe(B,14)+1,le[0]=xe(B,14)+1,fe[0]=xe(B,1),xe(B,3)!=0?0:!B.h)}function $i(B,W){if(4>B)return B+1;var le=B-2>>1;return(2+(1&B)<<le)+xe(W,le)+1}function ks(B,W){return 120<W?W-120:1<=(le=((le=ot[W-1])>>4)*B+(8-(15&le)))?le:1;var le}function $n(B,W,le){var fe=ie(le),Ae=B[W+=255&fe].g-8;return 0<Ae&&(me(le,le.u+8),fe=ie(le),W+=B[W].value,W+=fe&(1<<Ae)-1),me(le,le.u+B[W].g),B[W].value}function Mr(B,W,le){return le.g+=B.g,le.value+=B.value<<W>>>0,e(8>=le.g),B.g}function Ce(B,W,le){var fe=B.xc;return e((W=fe==0?0:B.vc[B.md*(le>>fe)+(W>>fe)])<B.Wb),B.Ya[W]}function Me(B,W,le,fe){var Ae=B.ab,ke=B.c*W,De=B.C;W=De+W;var $e=le,qe=fe;for(fe=B.Ta,le=B.Ua;0<Ae--;){var Je=B.gc[Ae],ft=De,Ot=W,et=$e,gt=qe,Nt=(qe=fe,$e=le,Je.Ea);switch(e(ft<Ot),e(Ot<=Je.nc),Je.hc){case 2:v(et,gt,(Ot-ft)*Nt,qe,$e);break;case 0:var Zt=ft,Tt=Ot,ir=qe,lr=$e,Er=(xn=Je).Ea;Zt==0&&(Ne(et,gt,null,null,1,ir,lr),er(et,gt+1,0,0,Er-1,ir,lr+1),gt+=Er,lr+=Er,++Zt);for(var yr=1<<xn.b,Sn=yr-1,cn=Ue(Er,xn.b),Ei=xn.K,xn=xn.w+(Zt>>xn.b)*cn;Zt<Tt;){var Ki=Ei,kl=xn,ji=1;for(p(et,gt,ir,lr-Er,1,ir,lr);ji<Er;){var vn=(ji&~Sn)+yr;vn>Er&&(vn=Er),(0,U[Ki[kl++]>>8&15])(et,gt+ +ji,ir,lr+ji-Er,vn-ji,ir,lr+ji),ji=vn}gt+=Er,lr+=Er,++Zt&Sn||(xn+=cn)}Ot!=Je.nc&&n(qe,$e-Nt,qe,$e+(Ot-ft-1)*Nt,Nt);break;case 1:for(Nt=et,Tt=gt,Er=(et=Je.Ea)-(lr=et&~(ir=(gt=1<<Je.b)-1)),Zt=Ue(et,Je.b),yr=Je.K,Je=Je.w+(ft>>Je.b)*Zt;ft<Ot;){for(Sn=yr,cn=Je,Ei=new Xt,xn=Tt+lr,Ki=Tt+et;Tt<xn;)Kt(Sn[cn++],Ei),G(Ei,Nt,Tt,gt,qe,$e),Tt+=gt,$e+=gt;Tt<Ki&&(Kt(Sn[cn++],Ei),G(Ei,Nt,Tt,Er,qe,$e),Tt+=Er,$e+=Er),++ft&ir||(Je+=Zt)}break;case 3:if(et==qe&&gt==$e&&0<Je.b){for(Tt=qe,et=Nt=$e+(Ot-ft)*Nt-(lr=(Ot-ft)*Ue(Je.Ea,Je.b)),gt=qe,ir=$e,Zt=[],lr=(Er=lr)-1;0<=lr;--lr)Zt[lr]=gt[ir+lr];for(lr=Er-1;0<=lr;--lr)Tt[et+lr]=Zt[lr];_(Je,ft,Ot,qe,Nt,qe,$e)}else _(Je,ft,Ot,et,gt,qe,$e)}$e=fe,qe=le}qe!=le&&n(fe,le,$e,qe,ke)}function Ve(B,W){var le=B.V,fe=B.Ba+B.c*B.C,Ae=W-B.C;if(e(W<=B.l.o),e(16>=Ae),0<Ae){var ke=B.l,De=B.Ta,$e=B.Ua,qe=ke.width;if(Me(B,Ae,le,fe),Ae=$e=[$e],e((le=B.C)<(fe=W)),e(ke.v<ke.va),fe>ke.o&&(fe=ke.o),le<ke.j){var Je=ke.j-le;le=ke.j,Ae[0]+=Je*qe}if(le>=fe?le=0:(Ae[0]+=4*ke.v,ke.ka=le-ke.j,ke.U=ke.va-ke.v,ke.T=fe-le,le=1),le){if($e=$e[0],11>(le=B.ca).S){var ft=le.f.RGBA,Ot=(fe=le.S,Ae=ke.U,ke=ke.T,Je=ft.eb,ft.A),et=ke;for(ft=ft.fb+B.Ma*ft.A;0<et--;){var gt=De,Nt=$e,Zt=Ae,Tt=Je,ir=ft;switch(fe){case kN:te(gt,Nt,Zt,Tt,ir);break;case tw:de(gt,Nt,Zt,Tt,ir);break;case IN:de(gt,Nt,Zt,Tt,ir),$d(Tt,ir,0,Zt,1,0);break;case I5:Ze(gt,Nt,Zt,Tt,ir);break;case rw:Ht(gt,Nt,Zt,Tt,ir,1);break;case RN:Ht(gt,Nt,Zt,Tt,ir,1),$d(Tt,ir,0,Zt,1,0);break;case nw:Ht(gt,Nt,Zt,Tt,ir,0);break;case DN:Ht(gt,Nt,Zt,Tt,ir,0),$d(Tt,ir,1,Zt,1,0);break;case ON:we(gt,Nt,Zt,Tt,ir);break;case b:we(gt,Nt,Zt,Tt,ir),T5(Tt,ir,Zt,1,0);break;case JI:Pe(gt,Nt,Zt,Tt,ir);break;default:e(0)}$e+=qe,ft+=Ot}B.Ma+=ke}else alert("todo:EmitRescaledRowsYUVA");e(B.Ma<=le.height)}}B.C=W,e(B.C<=B.i)}function He(B){var W;if(0<B.ua)return 0;for(W=0;W<B.Wb;++W){var le=B.Ya[W].G,fe=B.Ya[W].H;if(0<le[1][fe[1]+0].g||0<le[2][fe[2]+0].g||0<le[3][fe[3]+0].g)return 0}return 1}function Xe(B,W,le,fe,Ae,ke){if(B.Z!=0){var De=B.qd,$e=B.rd;for(e(Is[B.Z]!=null);W<le;++W)Is[B.Z](De,$e,fe,Ae,fe,Ae,ke),De=fe,$e=Ae,Ae+=ke;B.qd=De,B.rd=$e}}function Qe(B,W){var le=B.l.ma,fe=le.Z==0||le.Z==1?B.l.j:B.C;if(fe=B.C<fe?fe:B.C,e(W<=B.l.o),W>fe){var Ae=B.l.width,ke=le.ca,De=le.tb+Ae*fe,$e=B.V,qe=B.Ba+B.c*fe,Je=B.gc;e(B.ab==1),e(Je[0].hc==3),P(Je[0],fe,W,$e,qe,ke,De),Xe(le,fe,W,ke,De,Ae)}B.C=B.Ma=W}function bt(B,W,le,fe,Ae,ke,De){var $e=B.$/fe,qe=B.$%fe,Je=B.m,ft=B.s,Ot=le+B.$,et=Ot;Ae=le+fe*Ae;var gt=le+fe*ke,Nt=280+ft.ua,Zt=B.Pb?$e:16777216,Tt=0<ft.ua?ft.Wa:null,ir=ft.wc,lr=Ot<gt?Ce(ft,qe,$e):null;e(B.C<ke),e(gt<=Ae);var Er=!1;e:for(;;){for(;Er||Ot<gt;){var yr=0;if($e>=Zt){var Sn=Ot-le;e((Zt=B).Pb),Zt.wd=Zt.m,Zt.xd=Sn,0<Zt.s.ua&&ze(Zt.s.Wa,Zt.s.vb),Zt=$e+Ft}if(qe&ir||(lr=Ce(ft,qe,$e)),e(lr!=null),lr.Qb&&(W[Ot]=lr.qb,Er=!0),!Er)if(he(Je),lr.jc){yr=Je,Sn=W;var cn=Ot,Ei=lr.pd[ie(yr)&ao-1];e(lr.jc),256>Ei.g?(me(yr,yr.u+Ei.g),Sn[cn]=Ei.value,yr=0):(me(yr,yr.u+Ei.g-256),e(256<=Ei.value),yr=Ei.value),yr==0&&(Er=!0)}else yr=$n(lr.G[0],lr.H[0],Je);if(Je.h)break;if(Er||256>yr){if(!Er)if(lr.nd)W[Ot]=(lr.qb|yr<<8)>>>0;else{if(he(Je),Er=$n(lr.G[1],lr.H[1],Je),he(Je),Sn=$n(lr.G[2],lr.H[2],Je),cn=$n(lr.G[3],lr.H[3],Je),Je.h)break;W[Ot]=(cn<<24|Er<<16|yr<<8|Sn)>>>0}if(Er=!1,++Ot,++qe>=fe&&(qe=0,++$e,De!=null&&$e<=ke&&!($e%16)&&De(B,$e),Tt!=null))for(;et<Ot;)yr=W[et++],Tt.X[(506832829*yr&4294967295)>>>Tt.Mb]=yr}else if(280>yr){if(yr=$i(yr-256,Je),Sn=$n(lr.G[4],lr.H[4],Je),he(Je),Sn=ks(fe,Sn=$i(Sn,Je)),Je.h)break;if(Ot-le<Sn||Ae-Ot<yr)break e;for(cn=0;cn<yr;++cn)W[Ot+cn]=W[Ot+cn-Sn];for(Ot+=yr,qe+=yr;qe>=fe;)qe-=fe,++$e,De!=null&&$e<=ke&&!($e%16)&&De(B,$e);if(e(Ot<=Ae),qe&ir&&(lr=Ce(ft,qe,$e)),Tt!=null)for(;et<Ot;)yr=W[et++],Tt.X[(506832829*yr&4294967295)>>>Tt.Mb]=yr}else{if(!(yr<Nt))break e;for(Er=yr-280,e(Tt!=null);et<Ot;)yr=W[et++],Tt.X[(506832829*yr&4294967295)>>>Tt.Mb]=yr;yr=Ot,e(!(Er>>>(Sn=Tt).Xa)),W[yr]=Sn.X[Er],Er=!0}Er||e(Je.h==ce(Je))}if(B.Pb&&Je.h&&Ot<Ae)e(B.m.h),B.a=5,B.m=B.wd,B.$=B.xd,0<B.s.ua&&ze(B.s.vb,B.s.Wa);else{if(Je.h)break e;De!=null&&De(B,$e>ke?ke:$e),B.a=0,B.$=Ot-le}return 1}return B.a=3,0}function $t(B){e(B!=null),B.vc=null,B.yc=null,B.Ya=null;var W=B.Wa;W!=null&&(W.X=null),B.vb=null,e(B!=null)}function wt(){var B=new $r;return B==null?null:(B.a=0,B.xb=R5,Wt("Predictor","VP8LPredictors"),Wt("Predictor","VP8LPredictors_C"),Wt("PredictorAdd","VP8LPredictorsAdd"),Wt("PredictorAdd","VP8LPredictorsAdd_C"),v=Vt,G=ur,te=Lt,de=Dt,we=Fe,Pe=ut,Ze=Mt,D.VP8LMapColor32b=A,D.VP8LMapColor8b=R,B)}function Et(B,W,le,fe,Ae){var ke=1,De=[B],$e=[W],qe=fe.m,Je=fe.s,ft=null,Ot=0;e:for(;;){if(le)for(;ke&&xe(qe,1);){var et=De,gt=$e,Nt=fe,Zt=1,Tt=Nt.m,ir=Nt.gc[Nt.ab],lr=xe(Tt,2);if(Nt.Oc&1<<lr)ke=0;else{switch(Nt.Oc|=1<<lr,ir.hc=lr,ir.Ea=et[0],ir.nc=gt[0],ir.K=[null],++Nt.ab,e(4>=Nt.ab),lr){case 0:case 1:ir.b=xe(Tt,3)+2,Zt=Et(Ue(ir.Ea,ir.b),Ue(ir.nc,ir.b),0,Nt,ir.K),ir.K=ir.K[0];break;case 3:var Er,yr=xe(Tt,8)+1,Sn=16<yr?0:4<yr?1:2<yr?2:3;if(et[0]=Ue(ir.Ea,Sn),ir.b=Sn,Er=Zt=Et(yr,1,0,Nt,ir.K)){var cn,Ei=yr,xn=ir,Ki=1<<(8>>xn.b),kl=s(Ki);if(kl==null)Er=0;else{var ji=xn.K[0],vn=xn.w;for(kl[0]=xn.K[0][0],cn=1;cn<1*Ei;++cn)kl[cn]=xt(ji[vn+cn],kl[cn-1]);for(;cn<4*Ki;++cn)kl[cn]=0;xn.K[0]=null,xn.K[0]=kl,Er=1}}Zt=Er;break;case 2:break;default:e(0)}ke=Zt}}if(De=De[0],$e=$e[0],ke&&xe(qe,1)&&!(ke=1<=(Ot=xe(qe,4))&&11>=Ot)){fe.a=3;break e}var Vr;if(Vr=ke)t:{var Zo,fi,Ji,Sa=fe,Cc=De,rd=$e,No=Ot,xu=le,nd=Sa.m,Ol=Sa.s,is=[null],Rs=1,So=0,Ds=St[No];r:for(;;){if(xu&&xe(nd,1)){var Tc=xe(nd,3)+2,Qm=Ue(Cc,Tc),Qo=Ue(rd,Tc),zd=Qm*Qo;if(!Et(Qm,Qo,0,Sa,is))break r;for(is=is[0],Ol.xc=Tc,Zo=0;Zo<zd;++Zo){var ia=is[Zo]>>8&65535;is[Zo]=ia,ia>=Rs&&(Rs=ia+1)}}if(nd.h)break r;for(fi=0;5>fi;++fi){var Il=ne[fi];!fi&&0<No&&(Il+=1<<No),So<Il&&(So=Il)}var kh=o(Rs*Ds,Q),id=Rs,Oh=o(id,Z);if(Oh==null)var Ih=null;else e(65536>=id),Ih=Oh;var Vd=s(So);if(Ih==null||Vd==null||kh==null){Sa.a=1;break r}var Rh=kh;for(Zo=Ji=0;Zo<Rs;++Zo){var fa=Ih[Zo],Dh=fa.G,Jm=fa.H,iw=0,Kg=1,Pc=0;for(fi=0;5>fi;++fi){Il=ne[fi],Dh[fi]=Rh,Jm[fi]=Ji,!fi&&0<No&&(Il+=1<<No);i:{var sR,n9=Il,aR=Sa,L5=Vd,APe=Rh,CPe=Ji,i9=0,Zv=aR.m,TPe=xe(Zv,1);if(i(L5,0,0,n9),TPe){var PPe=xe(Zv,1)+1,kPe=xe(Zv,1),Pee=xe(Zv,kPe==0?1:8);L5[Pee]=1,PPe==2&&(L5[Pee=xe(Zv,8)]=1);var oR=1}else{var kee=s(19),Oee=xe(Zv,4)+4;if(19<Oee){aR.a=3;var lR=0;break i}for(sR=0;sR<Oee;++sR)kee[Ie[sR]]=xe(Zv,3);var s9=void 0,F5=void 0,Iee=aR,OPe=kee,cR=n9,Ree=L5,a9=0,Qv=Iee.m,Dee=8,Mee=o(128,Q);n:for(;q(Mee,0,7,OPe,19);){if(xe(Qv,1)){var IPe=2+2*xe(Qv,3);if((s9=2+xe(Qv,IPe))>cR)break n}else s9=cR;for(F5=0;F5<cR&&s9--;){he(Qv);var Lee=Mee[0+(127&ie(Qv))];me(Qv,Qv.u+Lee.g);var LN=Lee.value;if(16>LN)Ree[F5++]=LN,LN!=0&&(Dee=LN);else{var RPe=LN==16,Fee=LN-16,DPe=V[Fee],Bee=xe(Qv,k[Fee])+DPe;if(F5+Bee>cR)break n;for(var MPe=RPe?Dee:0;0<Bee--;)Ree[F5++]=MPe}}a9=1;break n}a9||(Iee.a=3),oR=a9}(oR=oR&&!Zv.h)&&(i9=q(APe,CPe,8,L5,n9)),oR&&i9!=0?lR=i9:(aR.a=3,lR=0)}if(lR==0)break r;if(Kg&&pe[fi]==1&&(Kg=Rh[Ji].g==0),iw+=Rh[Ji].g,Ji+=lR,3>=fi){var B5,o9=Vd[0];for(B5=1;B5<Il;++B5)Vd[B5]>o9&&(o9=Vd[B5]);Pc+=o9}}if(fa.nd=Kg,fa.Qb=0,Kg&&(fa.qb=(Dh[3][Jm[3]+0].value<<24|Dh[1][Jm[1]+0].value<<16|Dh[2][Jm[2]+0].value)>>>0,iw==0&&256>Dh[0][Jm[0]+0].value&&(fa.Qb=1,fa.qb+=Dh[0][Jm[0]+0].value<<8)),fa.jc=!fa.Qb&&6>Pc,fa.jc){var uR,Xg=fa;for(uR=0;uR<ao;++uR){var Jv=uR,e1=Xg.pd[Jv],dR=Xg.G[0][Xg.H[0]+Jv];256<=dR.value?(e1.g=dR.g+256,e1.value=dR.value):(e1.g=0,e1.value=0,Jv>>=Mr(dR,8,e1),Jv>>=Mr(Xg.G[1][Xg.H[1]+Jv],16,e1),Jv>>=Mr(Xg.G[2][Xg.H[2]+Jv],0,e1),Mr(Xg.G[3][Xg.H[3]+Jv],24,e1))}}}Ol.vc=is,Ol.Wb=Rs,Ol.Ya=Ih,Ol.yc=kh,Vr=1;break t}Vr=0}if(!(ke=Vr)){fe.a=3;break e}if(0<Ot){if(Je.ua=1<<Ot,!Te(Je.Wa,Ot)){fe.a=1,ke=0;break e}}else Je.ua=0;var l9=fe,$ee=De,LPe=$e,c9=l9.s,u9=c9.xc;if(l9.c=$ee,l9.i=LPe,c9.md=Ue($ee,u9),c9.wc=u9==0?-1:(1<<u9)-1,le){fe.xb=JB;break e}if((ft=s(De*$e))==null){fe.a=1,ke=0;break e}ke=(ke=bt(fe,ft,0,De,$e,$e,null))&&!qe.h;break e}return ke?(Ae!=null?Ae[0]=ft:(e(ft==null),e(le)),fe.$=0,le||$t(Je)):$t(Je),ke}function kt(B,W){var le=B.c*B.i,fe=le+W+16*W;return e(B.c<=W),B.V=s(fe),B.V==null?(B.Ta=null,B.Ua=0,B.a=1,0):(B.Ta=B.V,B.Ua=B.Ba+le+W,1)}function fr(B,W){var le=B.C,fe=W-le,Ae=B.V,ke=B.Ba+B.c*le;for(e(W<=B.l.o);0<fe;){var De=16<fe?16:fe,$e=B.l.ma,qe=B.l.width,Je=qe*De,ft=$e.ca,Ot=$e.tb+qe*le,et=B.Ta,gt=B.Ua;Me(B,De,Ae,ke),ZI(et,gt,ft,Ot,Je),Xe($e,le,le+De,ft,Ot,qe),fe-=De,Ae+=De*B.c,le+=De}e(le==W),B.C=B.Ma=W}function br(){this.ub=this.yd=this.td=this.Rb=0}function Nr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function kr(){this.Yb=function(){var B=[];return function W(le,fe,Ae){for(var ke=Ae[fe],De=0;De<ke&&(le.push(Ae.length>fe+1?[]:0),!(Ae.length<fe+1));De++)W(le[De],fe+1,Ae)}(B,0,[3,11]),B}()}function Tn(){this.jb=s(3),this.Wc=l([4,8],kr),this.Xc=l([4,17],kr)}function qt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Oi(){this.ld=this.La=this.dd=this.tc=0}function Jn(){this.Na=this.la=0}function Ho(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Al(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function si(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oi),this.Y=0,this.ya=Array(new Al),this.aa=0,this.l=new On}function ei(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Un(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new br,this.Kc=new Nr,this.ed=new qt,this.Qa=new Sr,this.Ic=this.$c=this.Aa=0,this.D=new si,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,H),this.ia=0,this.pb=o(4,Ho),this.Pa=new Tn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ei),this.Hd=0,this.rb=Array(new Jn),this.sb=0,this.wa=Array(new Oi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Al),this.L=this.aa=0,this.gd=l([4,2],Oi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function On(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xs(){var B=new Un;return B!=null&&(B.a=0,B.sc="OK",B.cb=0,B.Xb=0,Cn||(Cn=Yu)),B}function Os(B,W,le){return B.a==0&&(B.a=W,B.sc=le,B.cb=0),0}function vs(B,W,le){return 3<=le&&B[W+0]==157&&B[W+1]==1&&B[W+2]==42}function ll(B,W){if(B==null)return 0;if(B.a=0,B.sc="OK",W==null)return Os(B,2,"null VP8Io passed to VP8GetHeaders()");var le=W.data,fe=W.w,Ae=W.ha;if(4>Ae)return Os(B,7,"Truncated header.");var ke=le[fe+0]|le[fe+1]<<8|le[fe+2]<<16,De=B.Od;if(De.Rb=!(1&ke),De.td=ke>>1&7,De.yd=ke>>4&1,De.ub=ke>>5,3<De.td)return Os(B,3,"Incorrect keyframe parameters.");if(!De.yd)return Os(B,4,"Frame not displayable.");fe+=3,Ae-=3;var $e=B.Kc;if(De.Rb){if(7>Ae)return Os(B,7,"cannot parse picture header");if(!vs(le,fe,Ae))return Os(B,3,"Bad code word");$e.c=16383&(le[fe+4]<<8|le[fe+3]),$e.Td=le[fe+4]>>6,$e.i=16383&(le[fe+6]<<8|le[fe+5]),$e.Ud=le[fe+6]>>6,fe+=7,Ae-=7,B.za=$e.c+15>>4,B.Ub=$e.i+15>>4,W.width=$e.c,W.height=$e.i,W.Da=0,W.j=0,W.v=0,W.va=W.width,W.o=W.height,W.da=0,W.ib=W.width,W.hb=W.height,W.U=W.width,W.T=W.height,i((ke=B.Pa).jb,0,255,ke.jb.length),e((ke=B.Qa)!=null),ke.Cb=0,ke.Bb=0,ke.Fb=1,i(ke.Zb,0,0,ke.Zb.length),i(ke.Lb,0,0,ke.Lb)}if(De.ub>Ae)return Os(B,7,"bad partition length");se(ke=B.m,le,fe,De.ub),fe+=De.ub,Ae-=De.ub,De.Rb&&($e.Ld=ue(ke),$e.Kd=ue(ke)),$e=B.Qa;var qe,Je=B.Pa;if(e(ke!=null),e($e!=null),$e.Cb=ue(ke),$e.Cb){if($e.Bb=ue(ke),ue(ke)){for($e.Fb=ue(ke),qe=0;4>qe;++qe)$e.Zb[qe]=ue(ke)?X(ke,7):0;for(qe=0;4>qe;++qe)$e.Lb[qe]=ue(ke)?X(ke,6):0}if($e.Bb)for(qe=0;3>qe;++qe)Je.jb[qe]=ue(ke)?K(ke,8):255}else $e.Bb=0;if(ke.Ka)return Os(B,3,"cannot parse segment header");if(($e=B.ed).zd=ue(ke),$e.Tb=K(ke,6),$e.wb=K(ke,3),$e.Pc=ue(ke),$e.Pc&&ue(ke)){for(Je=0;4>Je;++Je)ue(ke)&&($e.vd[Je]=X(ke,6));for(Je=0;4>Je;++Je)ue(ke)&&($e.od[Je]=X(ke,6))}if(B.L=$e.Tb==0?0:$e.zd?1:2,ke.Ka)return Os(B,3,"cannot parse filter header");var ft=Ae;if(Ae=qe=fe,fe=qe+ft,$e=ft,B.Xb=(1<<K(B.m,2))-1,ft<3*(Je=B.Xb))le=7;else{for(qe+=3*Je,$e-=3*Je,ft=0;ft<Je;++ft){var Ot=le[Ae+0]|le[Ae+1]<<8|le[Ae+2]<<16;Ot>$e&&(Ot=$e),se(B.Jc[+ft],le,qe,Ot),qe+=Ot,$e-=Ot,Ae+=3}se(B.Jc[+Je],le,qe,$e),le=qe<fe?0:5}if(le!=0)return Os(B,le,"cannot parse partitions");for(le=K(qe=B.m,7),Ae=ue(qe)?X(qe,4):0,fe=ue(qe)?X(qe,4):0,$e=ue(qe)?X(qe,4):0,Je=ue(qe)?X(qe,4):0,qe=ue(qe)?X(qe,4):0,ft=B.Qa,Ot=0;4>Ot;++Ot){if(ft.Cb){var et=ft.Zb[Ot];ft.Fb||(et+=le)}else{if(0<Ot){B.pb[Ot]=B.pb[0];continue}et=le}var gt=B.pb[Ot];gt.Sc[0]=pr[hi(et+Ae,127)],gt.Sc[1]=Hr[hi(et+0,127)],gt.Eb[0]=2*pr[hi(et+fe,127)],gt.Eb[1]=101581*Hr[hi(et+$e,127)]>>16,8>gt.Eb[1]&&(gt.Eb[1]=8),gt.Qc[0]=pr[hi(et+Je,117)],gt.Qc[1]=Hr[hi(et+qe,127)],gt.lc=et+qe}if(!De.Rb)return Os(B,4,"Not a key frame.");for(ue(ke),De=B.Pa,le=0;4>le;++le){for(Ae=0;8>Ae;++Ae)for(fe=0;3>fe;++fe)for($e=0;11>$e;++$e)Je=je(ke,Yv[le][Ae][fe][$e])?K(ke,8):Ud[le][Ae][fe][$e],De.Wc[le][Ae].Yb[fe][$e]=Je;for(Ae=0;17>Ae;++Ae)De.Xc[le][Ae]=De.Wc[le][QB[Ae]]}return B.kc=ue(ke),B.kc&&(B.Bd=K(ke,8)),B.cb=1}function Yu(B,W,le,fe,Ae,ke,De){var $e=W[Ae].Yb[le];for(le=0;16>Ae;++Ae){if(!je(B,$e[le+0]))return Ae;for(;!je(B,$e[le+1]);)if($e=W[++Ae].Yb[0],le=0,Ae==16)return 16;var qe=W[Ae+1].Yb;if(je(B,$e[le+2])){var Je=B,ft=0;if(je(Je,(et=$e)[(Ot=le)+3]))if(je(Je,et[Ot+6])){for($e=0,Ot=2*(ft=je(Je,et[Ot+8]))+(et=je(Je,et[Ot+9+ft])),ft=0,et=Ri[Ot];et[$e];++$e)ft+=ft+je(Je,et[$e]);ft+=3+(8<<Ot)}else je(Je,et[Ot+7])?(ft=7+2*je(Je,165),ft+=je(Je,145)):ft=5+je(Je,159);else ft=je(Je,et[Ot+4])?3+je(Je,et[Ot+5]):2;$e=qe[2]}else ft=1,$e=qe[1];qe=De+jc[Ae],0>(Je=B).b&&_e(Je);var Ot,et=Je.b,gt=(Ot=Je.Ca>>1)-(Je.I>>et)>>31;--Je.b,Je.Ca+=gt,Je.Ca|=1,Je.I-=(Ot+1&gt)<<et,ke[qe]=((ft^gt)-gt)*fe[(0<Ae)+0]}return 16}function Kr(B){var W=B.rb[B.sb-1];W.la=0,W.Na=0,i(B.zc,0,0,B.zc.length),B.ja=0}function yi(B,W,le,fe,Ae){Ae=B[W+le+32*fe]+(Ae>>3),B[W+le+32*fe]=-256&Ae?0>Ae?0:255:Ae}function bh(B,W,le,fe,Ae,ke){yi(B,W,0,le,fe+Ae),yi(B,W,1,le,fe+ke),yi(B,W,2,le,fe-ke),yi(B,W,3,le,fe-Ae)}function rs(B){return(20091*B>>16)+B}function ni(B,W,le,fe){var Ae,ke=0,De=s(16);for(Ae=0;4>Ae;++Ae){var $e=B[W+0]+B[W+8],qe=B[W+0]-B[W+8],Je=(35468*B[W+4]>>16)-rs(B[W+12]),ft=rs(B[W+4])+(35468*B[W+12]>>16);De[ke+0]=$e+ft,De[ke+1]=qe+Je,De[ke+2]=qe-Je,De[ke+3]=$e-ft,ke+=4,W++}for(Ae=ke=0;4>Ae;++Ae)$e=(B=De[ke+0]+4)+De[ke+8],qe=B-De[ke+8],Je=(35468*De[ke+4]>>16)-rs(De[ke+12]),yi(le,fe,0,0,$e+(ft=rs(De[ke+4])+(35468*De[ke+12]>>16))),yi(le,fe,1,0,qe+Je),yi(le,fe,2,0,qe-Je),yi(le,fe,3,0,$e-ft),ke++,fe+=32}function bo(B,W,le,fe){var Ae=B[W+0]+4,ke=35468*B[W+4]>>16,De=rs(B[W+4]),$e=35468*B[W+1]>>16;bh(le,fe,0,Ae+De,B=rs(B[W+1]),$e),bh(le,fe,1,Ae+ke,B,$e),bh(le,fe,2,Ae-ke,B,$e),bh(le,fe,3,Ae-De,B,$e)}function _t(B,W,le,fe,Ae){ni(B,W,le,fe),Ae&&ni(B,W+16,le,fe+4)}function We(B,W,le,fe){dt(B,W+0,le,fe,1),dt(B,W+32,le,fe+128,1)}function Or(B,W,le,fe){var Ae;for(B=B[W+0]+4,Ae=0;4>Ae;++Ae)for(W=0;4>W;++W)yi(le,fe,W,Ae,B)}function ys(B,W,le,fe){B[W+0]&&tr(B,W+0,le,fe),B[W+16]&&tr(B,W+16,le,fe+4),B[W+32]&&tr(B,W+32,le,fe+128),B[W+48]&&tr(B,W+48,le,fe+128+4)}function ro(B,W,le,fe){var Ae,ke=s(16);for(Ae=0;4>Ae;++Ae){var De=B[W+0+Ae]+B[W+12+Ae],$e=B[W+4+Ae]+B[W+8+Ae],qe=B[W+4+Ae]-B[W+8+Ae],Je=B[W+0+Ae]-B[W+12+Ae];ke[0+Ae]=De+$e,ke[8+Ae]=De-$e,ke[4+Ae]=Je+qe,ke[12+Ae]=Je-qe}for(Ae=0;4>Ae;++Ae)De=(B=ke[0+4*Ae]+3)+ke[3+4*Ae],$e=ke[1+4*Ae]+ke[2+4*Ae],qe=ke[1+4*Ae]-ke[2+4*Ae],Je=B-ke[3+4*Ae],le[fe+0]=De+$e>>3,le[fe+16]=Je+qe>>3,le[fe+32]=De-$e>>3,le[fe+48]=Je-qe>>3,fe+=64}function cu(B,W,le){var fe,Ae=W-32,ke=pu,De=255-B[Ae-1];for(fe=0;fe<le;++fe){var $e,qe=ke,Je=De+B[W-1];for($e=0;$e<le;++$e)B[W+$e]=qe[Je+B[Ae+$e]];W+=32}}function wh(B,W){cu(B,W,4)}function wo(B,W){cu(B,W,8)}function gn(B,W){cu(B,W,16)}function bs(B,W){var le;for(le=0;16>le;++le)n(B,W+32*le,B,W-32,16)}function _h(B,W){var le;for(le=16;0<le;--le)i(B,W,B[W-1],16),W+=32}function Nh(B,W,le){var fe;for(fe=0;16>fe;++fe)i(W,le+32*fe,B,16)}function uu(B,W){var le,fe=16;for(le=0;16>le;++le)fe+=B[W-1+32*le]+B[W+le-32];Nh(fe>>5,B,W)}function Sh(B,W){var le,fe=8;for(le=0;16>le;++le)fe+=B[W-1+32*le];Nh(fe>>4,B,W)}function Md(B,W){var le,fe=8;for(le=0;16>le;++le)fe+=B[W+le-32];Nh(fe>>4,B,W)}function Hm(B,W){Nh(128,B,W)}function sn(B,W,le){return B+2*W+le+2>>2}function In(B,W){var le,fe=W-32;for(fe=new Uint8Array([sn(B[fe-1],B[fe+0],B[fe+1]),sn(B[fe+0],B[fe+1],B[fe+2]),sn(B[fe+1],B[fe+2],B[fe+3]),sn(B[fe+2],B[fe+3],B[fe+4])]),le=0;4>le;++le)n(B,W+32*le,fe,0,fe.length)}function no(B,W){var le=B[W-1],fe=B[W-1+32],Ae=B[W-1+64],ke=B[W-1+96];ye(B,W+0,16843009*sn(B[W-1-32],le,fe)),ye(B,W+32,16843009*sn(le,fe,Ae)),ye(B,W+64,16843009*sn(fe,Ae,ke)),ye(B,W+96,16843009*sn(Ae,ke,ke))}function zr(B,W){var le,fe=4;for(le=0;4>le;++le)fe+=B[W+le-32]+B[W-1+32*le];for(fe>>=3,le=0;4>le;++le)i(B,W+32*le,fe,4)}function Gv(B,W){var le=B[W-1+0],fe=B[W-1+32],Ae=B[W-1+64],ke=B[W-1-32],De=B[W+0-32],$e=B[W+1-32],qe=B[W+2-32],Je=B[W+3-32];B[W+0+96]=sn(fe,Ae,B[W-1+96]),B[W+1+96]=B[W+0+64]=sn(le,fe,Ae),B[W+2+96]=B[W+1+64]=B[W+0+32]=sn(ke,le,fe),B[W+3+96]=B[W+2+64]=B[W+1+32]=B[W+0+0]=sn(De,ke,le),B[W+3+64]=B[W+2+32]=B[W+1+0]=sn($e,De,ke),B[W+3+32]=B[W+2+0]=sn(qe,$e,De),B[W+3+0]=sn(Je,qe,$e)}function Pn(B,W){var le=B[W+1-32],fe=B[W+2-32],Ae=B[W+3-32],ke=B[W+4-32],De=B[W+5-32],$e=B[W+6-32],qe=B[W+7-32];B[W+0+0]=sn(B[W+0-32],le,fe),B[W+1+0]=B[W+0+32]=sn(le,fe,Ae),B[W+2+0]=B[W+1+32]=B[W+0+64]=sn(fe,Ae,ke),B[W+3+0]=B[W+2+32]=B[W+1+64]=B[W+0+96]=sn(Ae,ke,De),B[W+3+32]=B[W+2+64]=B[W+1+96]=sn(ke,De,$e),B[W+3+64]=B[W+2+96]=sn(De,$e,qe),B[W+3+96]=sn($e,qe,qe)}function ws(B,W){var le=B[W-1+0],fe=B[W-1+32],Ae=B[W-1+64],ke=B[W-1-32],De=B[W+0-32],$e=B[W+1-32],qe=B[W+2-32],Je=B[W+3-32];B[W+0+0]=B[W+1+64]=ke+De+1>>1,B[W+1+0]=B[W+2+64]=De+$e+1>>1,B[W+2+0]=B[W+3+64]=$e+qe+1>>1,B[W+3+0]=qe+Je+1>>1,B[W+0+96]=sn(Ae,fe,le),B[W+0+64]=sn(fe,le,ke),B[W+0+32]=B[W+1+96]=sn(le,ke,De),B[W+1+32]=B[W+2+96]=sn(ke,De,$e),B[W+2+32]=B[W+3+96]=sn(De,$e,qe),B[W+3+32]=sn($e,qe,Je)}function Hg(B,W){var le=B[W+0-32],fe=B[W+1-32],Ae=B[W+2-32],ke=B[W+3-32],De=B[W+4-32],$e=B[W+5-32],qe=B[W+6-32],Je=B[W+7-32];B[W+0+0]=le+fe+1>>1,B[W+1+0]=B[W+0+64]=fe+Ae+1>>1,B[W+2+0]=B[W+1+64]=Ae+ke+1>>1,B[W+3+0]=B[W+2+64]=ke+De+1>>1,B[W+0+32]=sn(le,fe,Ae),B[W+1+32]=B[W+0+96]=sn(fe,Ae,ke),B[W+2+32]=B[W+1+96]=sn(Ae,ke,De),B[W+3+32]=B[W+2+96]=sn(ke,De,$e),B[W+3+64]=sn(De,$e,qe),B[W+3+96]=sn($e,qe,Je)}function Zu(B,W){var le=B[W-1+0],fe=B[W-1+32],Ae=B[W-1+64],ke=B[W-1+96];B[W+0+0]=le+fe+1>>1,B[W+2+0]=B[W+0+32]=fe+Ae+1>>1,B[W+2+32]=B[W+0+64]=Ae+ke+1>>1,B[W+1+0]=sn(le,fe,Ae),B[W+3+0]=B[W+1+32]=sn(fe,Ae,ke),B[W+3+32]=B[W+1+64]=sn(Ae,ke,ke),B[W+3+64]=B[W+2+64]=B[W+0+96]=B[W+1+96]=B[W+2+96]=B[W+3+96]=ke}function Eh(B,W){var le=B[W-1+0],fe=B[W-1+32],Ae=B[W-1+64],ke=B[W-1+96],De=B[W-1-32],$e=B[W+0-32],qe=B[W+1-32],Je=B[W+2-32];B[W+0+0]=B[W+2+32]=le+De+1>>1,B[W+0+32]=B[W+2+64]=fe+le+1>>1,B[W+0+64]=B[W+2+96]=Ae+fe+1>>1,B[W+0+96]=ke+Ae+1>>1,B[W+3+0]=sn($e,qe,Je),B[W+2+0]=sn(De,$e,qe),B[W+1+0]=B[W+3+32]=sn(le,De,$e),B[W+1+32]=B[W+3+64]=sn(fe,le,De),B[W+1+64]=B[W+3+96]=sn(Ae,fe,le),B[W+1+96]=sn(ke,Ae,fe)}function Cl(B,W){var le;for(le=0;8>le;++le)n(B,W+32*le,B,W-32,8)}function ra(B,W){var le;for(le=0;8>le;++le)i(B,W,B[W-1],8),W+=32}function cl(B,W,le){var fe;for(fe=0;8>fe;++fe)i(W,le+32*fe,B,8)}function Qu(B,W){var le,fe=8;for(le=0;8>le;++le)fe+=B[W+le-32]+B[W-1+32*le];cl(fe>>4,B,W)}function Bf(B,W){var le,fe=4;for(le=0;8>le;++le)fe+=B[W+le-32];cl(fe>>3,B,W)}function g0(B,W){var le,fe=4;for(le=0;8>le;++le)fe+=B[W-1+32*le];cl(fe>>3,B,W)}function Ld(B,W){cl(128,B,W)}function wc(B,W,le){var fe=B[W-le],Ae=B[W+0],ke=3*(Ae-fe)+Xv[1020+B[W-2*le]-B[W+le]],De=v0[112+(ke+4>>3)];B[W-le]=pu[255+fe+v0[112+(ke+3>>3)]],B[W+0]=pu[255+Ae-De]}function Fa(B,W,le,fe){var Ae=B[W+0],ke=B[W+le];return td[255+B[W-2*le]-B[W-le]]>fe||td[255+ke-Ae]>fe}function Wm(B,W,le,fe){return 4*td[255+B[W-le]-B[W+0]]+td[255+B[W-2*le]-B[W+le]]<=fe}function ai(B,W,le,fe,Ae){var ke=B[W-3*le],De=B[W-2*le],$e=B[W-le],qe=B[W+0],Je=B[W+le],ft=B[W+2*le],Ot=B[W+3*le];return 4*td[255+$e-qe]+td[255+De-Je]>fe?0:td[255+B[W-4*le]-ke]<=Ae&&td[255+ke-De]<=Ae&&td[255+De-$e]<=Ae&&td[255+Ot-ft]<=Ae&&td[255+ft-Je]<=Ae&&td[255+Je-qe]<=Ae}function x0(B,W,le,fe){var Ae=2*fe+1;for(fe=0;16>fe;++fe)Wm(B,W+fe,le,Ae)&&wc(B,W+fe,le)}function Wo(B,W,le,fe){var Ae=2*fe+1;for(fe=0;16>fe;++fe)Wm(B,W+fe*le,1,Ae)&&wc(B,W+fe*le,1)}function $f(B,W,le,fe){var Ae;for(Ae=3;0<Ae;--Ae)x0(B,W+=4*le,le,fe)}function Wg(B,W,le,fe){var Ae;for(Ae=3;0<Ae;--Ae)Wo(B,W+=4,le,fe)}function Ii(B,W,le,fe,Ae,ke,De,$e){for(ke=2*ke+1;0<Ae--;){if(ai(B,W,le,ke,De))if(Fa(B,W,le,$e))wc(B,W,le);else{var qe=B,Je=W,ft=le,Ot=qe[Je-2*ft],et=qe[Je-ft],gt=qe[Je+0],Nt=qe[Je+ft],Zt=qe[Je+2*ft],Tt=27*(lr=Xv[1020+3*(gt-et)+Xv[1020+Ot-Nt]])+63>>7,ir=18*lr+63>>7,lr=9*lr+63>>7;qe[Je-3*ft]=pu[255+qe[Je-3*ft]+lr],qe[Je-2*ft]=pu[255+Ot+ir],qe[Je-ft]=pu[255+et+Tt],qe[Je+0]=pu[255+gt-Tt],qe[Je+ft]=pu[255+Nt-ir],qe[Je+2*ft]=pu[255+Zt-lr]}W+=fe}}function du(B,W,le,fe,Ae,ke,De,$e){for(ke=2*ke+1;0<Ae--;){if(ai(B,W,le,ke,De))if(Fa(B,W,le,$e))wc(B,W,le);else{var qe=B,Je=W,ft=le,Ot=qe[Je-ft],et=qe[Je+0],gt=qe[Je+ft],Nt=v0[112+(4+(Zt=3*(et-Ot))>>3)],Zt=v0[112+(Zt+3>>3)],Tt=Nt+1>>1;qe[Je-2*ft]=pu[255+qe[Je-2*ft]+Tt],qe[Je-ft]=pu[255+Ot+Zt],qe[Je+0]=pu[255+et-Nt],qe[Je+ft]=pu[255+gt-Tt]}W+=fe}}function Gm(B,W,le,fe,Ae,ke){Ii(B,W,le,1,16,fe,Ae,ke)}function hu(B,W,le,fe,Ae,ke){Ii(B,W,1,le,16,fe,Ae,ke)}function Km(B,W,le,fe,Ae,ke){var De;for(De=3;0<De;--De)du(B,W+=4*le,le,1,16,fe,Ae,ke)}function Rt(B,W,le,fe,Ae,ke){var De;for(De=3;0<De;--De)du(B,W+=4,1,le,16,fe,Ae,ke)}function ee(B,W,le,fe,Ae,ke,De,$e){Ii(B,W,Ae,1,8,ke,De,$e),Ii(le,fe,Ae,1,8,ke,De,$e)}function Se(B,W,le,fe,Ae,ke,De,$e){Ii(B,W,1,Ae,8,ke,De,$e),Ii(le,fe,1,Ae,8,ke,De,$e)}function Ye(B,W,le,fe,Ae,ke,De,$e){du(B,W+4*Ae,Ae,1,8,ke,De,$e),du(le,fe+4*Ae,Ae,1,8,ke,De,$e)}function ct(B,W,le,fe,Ae,ke,De,$e){du(B,W+4,1,Ae,8,ke,De,$e),du(le,fe+4,1,Ae,8,ke,De,$e)}function vt(){this.ba=new Cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function mr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xr(){this.ua=0,this.Wa=new tt,this.vb=new tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new Q}function $r(){this.xb=this.a=0,this.l=new On,this.ca=new Cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xr,this.ab=0,this.gc=o(4,mr),this.Oc=0}function Rn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new On,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yr(B,W,le,fe,Ae,ke,De){for(B=B==null?0:B[W+0],W=0;W<De;++W)Ae[ke+W]=B+le[fe+W]&255,B=Ae[ke+W]}function Li(B,W,le,fe,Ae,ke,De){var $e;if(B==null)Yr(null,null,le,fe,Ae,ke,De);else for($e=0;$e<De;++$e)Ae[ke+$e]=B[W+$e]+le[fe+$e]&255}function ns(B,W,le,fe,Ae,ke,De){if(B==null)Yr(null,null,le,fe,Ae,ke,De);else{var $e,qe=B[W+0],Je=qe,ft=qe;for($e=0;$e<De;++$e)Je=ft+(qe=B[W+$e])-Je,ft=le[fe+$e]+(-256&Je?0>Je?0:255:Je)&255,Je=qe,Ae[ke+$e]=ft}}function zn(B,W,le,fe){var Ae=W.width,ke=W.o;if(e(B!=null&&W!=null),0>le||0>=fe||le+fe>ke)return null;if(!B.Cc){if(B.ga==null){var De;if(B.ga=new Rn,(De=B.ga==null)||(De=W.width*W.o,e(B.Gb.length==0),B.Gb=s(De),B.Uc=0,B.Gb==null?De=0:(B.mb=B.Gb,B.nb=B.Uc,B.rc=null,De=1),De=!De),!De){De=B.ga;var $e=B.Fa,qe=B.P,Je=B.qc,ft=B.mb,Ot=B.nb,et=qe+1,gt=Je-1,Nt=De.l;if(e($e!=null&&ft!=null&&W!=null),Is[0]=null,Is[1]=Yr,Is[2]=Li,Is[3]=ns,De.ca=ft,De.tb=Ot,De.c=W.width,De.i=W.height,e(0<De.c&&0<De.i),1>=Je)W=0;else if(De.$a=3&$e[qe+0],De.Z=$e[qe+0]>>2&3,De.Lc=$e[qe+0]>>4&3,qe=$e[qe+0]>>6&3,0>De.$a||1<De.$a||4<=De.Z||1<De.Lc||qe)W=0;else if(Nt.put=Fr,Nt.ac=vi,Nt.bc=Bi,Nt.ma=De,Nt.width=W.width,Nt.height=W.height,Nt.Da=W.Da,Nt.v=W.v,Nt.va=W.va,Nt.j=W.j,Nt.o=W.o,De.$a)e:{e(De.$a==1),W=wt();t:for(;;){if(W==null){W=0;break e}if(e(De!=null),De.mc=W,W.c=De.c,W.i=De.i,W.l=De.l,W.l.ma=De,W.l.width=De.c,W.l.height=De.i,W.a=0,Y(W.m,$e,et,gt),!Et(De.c,De.i,1,W,null)||(W.ab==1&&W.gc[0].hc==3&&He(W.s)?(De.ic=1,$e=W.c*W.i,W.Ta=null,W.Ua=0,W.V=s($e),W.Ba=0,W.V==null?(W.a=1,W=0):W=1):(De.ic=0,W=kt(W,De.c)),!W))break t;W=1;break e}De.mc=null,W=0}else W=gt>=De.c*De.i;De=!W}if(De)return null;B.ga.Lc!=1?B.Ga=0:fe=ke-le}e(B.ga!=null),e(le+fe<=ke);e:{if(W=($e=B.ga).c,ke=$e.l.o,$e.$a==0){if(et=B.rc,gt=B.Vc,Nt=B.Fa,qe=B.P+1+le*W,Je=B.mb,ft=B.nb+le*W,e(qe<=B.P+B.qc),$e.Z!=0)for(e(Is[$e.Z]!=null),De=0;De<fe;++De)Is[$e.Z](et,gt,Nt,qe,Je,ft,W),et=Je,gt=ft,ft+=W,qe+=W;else for(De=0;De<fe;++De)n(Je,ft,Nt,qe,W),et=Je,gt=ft,ft+=W,qe+=W;B.rc=et,B.Vc=gt}else{if(e($e.mc!=null),W=le+fe,e((De=$e.mc)!=null),e(W<=De.i),De.C>=W)W=1;else if($e.ic||Ba(),$e.ic){$e=De.V,et=De.Ba,gt=De.c;var Zt=De.i,Tt=(Nt=1,qe=De.$/gt,Je=De.$%gt,ft=De.m,Ot=De.s,De.$),ir=gt*Zt,lr=gt*W,Er=Ot.wc,yr=Tt<lr?Ce(Ot,Je,qe):null;e(Tt<=ir),e(W<=Zt),e(He(Ot));t:for(;;){for(;!ft.h&&Tt<lr;){if(Je&Er||(yr=Ce(Ot,Je,qe)),e(yr!=null),he(ft),256>(Zt=$n(yr.G[0],yr.H[0],ft)))$e[et+Tt]=Zt,++Tt,++Je>=gt&&(Je=0,++qe<=W&&!(qe%16)&&Qe(De,qe));else{if(!(280>Zt)){Nt=0;break t}Zt=$i(Zt-256,ft);var Sn,cn=$n(yr.G[4],yr.H[4],ft);if(he(ft),!(Tt>=(cn=ks(gt,cn=$i(cn,ft)))&&ir-Tt>=Zt)){Nt=0;break t}for(Sn=0;Sn<Zt;++Sn)$e[et+Tt+Sn]=$e[et+Tt+Sn-cn];for(Tt+=Zt,Je+=Zt;Je>=gt;)Je-=gt,++qe<=W&&!(qe%16)&&Qe(De,qe);Tt<lr&&Je&Er&&(yr=Ce(Ot,Je,qe))}e(ft.h==ce(ft))}Qe(De,qe>W?W:qe);break t}!Nt||ft.h&&Tt<ir?(Nt=0,De.a=ft.h?5:3):De.$=Tt,W=Nt}else W=bt(De,De.V,De.Ba,De.c,De.i,W,fr);if(!W){fe=0;break e}}le+fe>=ke&&(B.Cc=1),fe=1}if(!fe)return null;if(B.Cc&&((fe=B.ga)!=null&&(fe.mc=null),B.ga=null,0<B.Ga))return alert("todo:WebPDequantizeLevels"),null}return B.nb+le*Ae}function Ur(B,W,le,fe,Ae,ke){for(;0<Ae--;){var De,$e=B,qe=W+(le?1:0),Je=B,ft=W+(le?0:3);for(De=0;De<fe;++De){var Ot=Je[ft+4*De];Ot!=255&&(Ot*=32897,$e[qe+4*De+0]=$e[qe+4*De+0]*Ot>>23,$e[qe+4*De+1]=$e[qe+4*De+1]*Ot>>23,$e[qe+4*De+2]=$e[qe+4*De+2]*Ot>>23)}W+=ke}}function io(B,W,le,fe,Ae){for(;0<fe--;){var ke;for(ke=0;ke<le;++ke){var De=B[W+2*ke+0],$e=15&(Je=B[W+2*ke+1]),qe=4369*$e,Je=(240&Je|Je>>4)*qe>>16;B[W+2*ke+0]=(240&De|De>>4)*qe>>16&240|(15&De|De<<4)*qe>>16>>4&15,B[W+2*ke+1]=240&Je|$e}W+=Ae}}function Xn(B,W,le,fe,Ae,ke,De,$e){var qe,Je,ft=255;for(Je=0;Je<Ae;++Je){for(qe=0;qe<fe;++qe){var Ot=B[W+qe];ke[De+4*qe]=Ot,ft&=Ot}W+=le,De+=$e}return ft!=255}function Gs(B,W,le,fe,Ae){var ke;for(ke=0;ke<Ae;++ke)le[fe+ke]=B[W+ke]>>8}function Ba(){$d=Ur,T5=io,P5=Xn,ZI=Gs}function $a(B,W,le){D[B]=function(fe,Ae,ke,De,$e,qe,Je,ft,Ot,et,gt,Nt,Zt,Tt,ir,lr,Er){var yr,Sn=Er-1>>1,cn=$e[qe+0]|Je[ft+0]<<16,Ei=Ot[et+0]|gt[Nt+0]<<16;e(fe!=null);var xn=3*cn+Ei+131074>>2;for(W(fe[Ae+0],255&xn,xn>>16,Zt,Tt),ke!=null&&(xn=3*Ei+cn+131074>>2,W(ke[De+0],255&xn,xn>>16,ir,lr)),yr=1;yr<=Sn;++yr){var Ki=$e[qe+yr]|Je[ft+yr]<<16,kl=Ot[et+yr]|gt[Nt+yr]<<16,ji=cn+Ki+Ei+kl+524296,vn=ji+2*(Ki+Ei)>>3;xn=vn+cn>>1,cn=(ji=ji+2*(cn+kl)>>3)+Ki>>1,W(fe[Ae+2*yr-1],255&xn,xn>>16,Zt,Tt+(2*yr-1)*le),W(fe[Ae+2*yr-0],255&cn,cn>>16,Zt,Tt+(2*yr-0)*le),ke!=null&&(xn=ji+Ei>>1,cn=vn+kl>>1,W(ke[De+2*yr-1],255&xn,xn>>16,ir,lr+(2*yr-1)*le),W(ke[De+2*yr+0],255&cn,cn>>16,ir,lr+(2*yr+0)*le)),cn=Ki,Ei=kl}1&Er||(xn=3*cn+Ei+131074>>2,W(fe[Ae+Er-1],255&xn,xn>>16,Zt,Tt+(Er-1)*le),ke!=null&&(xn=3*Ei+cn+131074>>2,W(ke[De+Er-1],255&xn,xn>>16,ir,lr+(Er-1)*le)))}}function _c(){Ac[kN]=e9,Ac[tw]=eR,Ac[I5]=t9,Ac[rw]=MN,Ac[nw]=D5,Ac[ON]=tR,Ac[JI]=xPe,Ac[IN]=eR,Ac[RN]=MN,Ac[DN]=D5,Ac[b]=tR}function fu(B){return B&~vPe?0>B?0:255:B>>jee}function so(B,W){return fu((19077*B>>8)+(26149*W>>8)-14234)}function Ju(B,W,le){return fu((19077*B>>8)-(6419*W>>8)-(13320*le>>8)+8708)}function jh(B,W){return fu((19077*B>>8)+(33050*W>>8)-17685)}function Uf(B,W,le,fe,Ae){fe[Ae+0]=so(B,le),fe[Ae+1]=Ju(B,W,le),fe[Ae+2]=jh(B,W)}function Ah(B,W,le,fe,Ae){fe[Ae+0]=jh(B,W),fe[Ae+1]=Ju(B,W,le),fe[Ae+2]=so(B,le)}function na(B,W,le,fe,Ae){var ke=Ju(B,W,le);W=ke<<3&224|jh(B,W)>>3,fe[Ae+0]=248&so(B,le)|ke>>5,fe[Ae+1]=W}function Ch(B,W,le,fe,Ae){var ke=240&jh(B,W)|15;fe[Ae+0]=240&so(B,le)|Ju(B,W,le)>>4,fe[Ae+1]=ke}function Xm(B,W,le,fe,Ae){fe[Ae+0]=255,Uf(B,W,le,fe,Ae+1)}function Fd(B,W,le,fe,Ae){Ah(B,W,le,fe,Ae),fe[Ae+3]=255}function Gg(B,W,le,fe,Ae){Uf(B,W,le,fe,Ae),fe[Ae+3]=255}function hi(B,W){return 0>B?0:B>W?W:B}function Go(B,W,le){D[B]=function(fe,Ae,ke,De,$e,qe,Je,ft,Ot){for(var et=ft+(-2&Ot)*le;ft!=et;)W(fe[Ae+0],ke[De+0],$e[qe+0],Je,ft),W(fe[Ae+1],ke[De+0],$e[qe+0],Je,ft+le),Ae+=2,++De,++qe,ft+=2*le;1&Ot&&W(fe[Ae+0],ke[De+0],$e[qe+0],Je,ft)}}function Ko(B,W,le){return le==0?B==0?W==0?6:5:W==0?4:0:le}function Nc(B,W,le,fe,Ae){switch(B>>>30){case 3:dt(W,le,fe,Ae,0);break;case 2:yt(W,le,fe,Ae);break;case 1:tr(W,le,fe,Ae)}}function Na(B,W){var le,fe,Ae=W.M,ke=W.Nb,De=B.oc,$e=B.pc+40,qe=B.oc,Je=B.pc+584,ft=B.oc,Ot=B.pc+600;for(le=0;16>le;++le)De[$e+32*le-1]=129;for(le=0;8>le;++le)qe[Je+32*le-1]=129,ft[Ot+32*le-1]=129;for(0<Ae?De[$e-1-32]=qe[Je-1-32]=ft[Ot-1-32]=129:(i(De,$e-32-1,127,21),i(qe,Je-32-1,127,9),i(ft,Ot-32-1,127,9)),fe=0;fe<B.za;++fe){var et=W.ya[W.aa+fe];if(0<fe){for(le=-1;16>le;++le)n(De,$e+32*le-4,De,$e+32*le+12,4);for(le=-1;8>le;++le)n(qe,Je+32*le-4,qe,Je+32*le+4,4),n(ft,Ot+32*le-4,ft,Ot+32*le+4,4)}var gt=B.Gd,Nt=B.Hd+fe,Zt=et.ad,Tt=et.Hc;if(0<Ae&&(n(De,$e-32,gt[Nt].y,0,16),n(qe,Je-32,gt[Nt].f,0,8),n(ft,Ot-32,gt[Nt].ea,0,8)),et.Za){var ir=De,lr=$e-32+16;for(0<Ae&&(fe>=B.za-1?i(ir,lr,gt[Nt].y[15],4):n(ir,lr,gt[Nt+1].y,0,4)),le=0;4>le;le++)ir[lr+128+le]=ir[lr+256+le]=ir[lr+384+le]=ir[lr+0+le];for(le=0;16>le;++le,Tt<<=2)ir=De,lr=$e+Cee[le],Ph[et.Ob[le]](ir,lr),Nc(Tt,Zt,16*+le,ir,lr)}else if(ir=Ko(fe,Ae,et.Ob[0]),y0[ir](De,$e),Tt!=0)for(le=0;16>le;++le,Tt<<=2)Nc(Tt,Zt,16*+le,De,$e+Cee[le]);for(le=et.Gc,ir=Ko(fe,Ae,et.Dd),Vf[ir](qe,Je),Vf[ir](ft,Ot),Tt=Zt,ir=qe,lr=Je,255&(et=0|le)&&(170&et?Pt(Tt,256,ir,lr):ar(Tt,256,ir,lr)),et=ft,Tt=Ot,255&(le>>=8)&&(170&le?Pt(Zt,320,et,Tt):ar(Zt,320,et,Tt)),Ae<B.Ub-1&&(n(gt[Nt].y,0,De,$e+480,16),n(gt[Nt].f,0,qe,Je+224,8),n(gt[Nt].ea,0,ft,Ot+224,8)),le=8*ke*B.B,gt=B.sa,Nt=B.ta+16*fe+16*ke*B.R,Zt=B.qa,et=B.ra+8*fe+le,Tt=B.Ha,ir=B.Ia+8*fe+le,le=0;16>le;++le)n(gt,Nt+le*B.R,De,$e+32*le,16);for(le=0;8>le;++le)n(Zt,et+le*B.B,qe,Je+32*le,8),n(Tt,ir+le*B.B,ft,Ot+32*le,8)}}function mu(B,W,le,fe,Ae,ke,De,$e,qe){var Je=[0],ft=[0],Ot=0,et=qe!=null?qe.kd:0,gt=qe??new Gt;if(B==null||12>le)return 7;gt.data=B,gt.w=W,gt.ha=le,W=[W],le=[le],gt.gb=[gt.gb];e:{var Nt=W,Zt=le,Tt=gt.gb;if(e(B!=null),e(Zt!=null),e(Tt!=null),Tt[0]=0,12<=Zt[0]&&!r(B,Nt[0],"RIFF")){if(r(B,Nt[0]+8,"WEBP")){Tt=3;break e}var ir=Be(B,Nt[0]+4);if(12>ir||4294967286<ir){Tt=3;break e}if(et&&ir>Zt[0]-8){Tt=7;break e}Tt[0]=ir,Nt[0]+=12,Zt[0]-=12}Tt=0}if(Tt!=0)return Tt;for(ir=0<gt.gb[0],le=le[0];;){e:{var lr=B;Zt=W,Tt=le;var Er=Je,yr=ft,Sn=Nt=[0];if((xn=Ot=[Ot])[0]=0,8>Tt[0])Tt=7;else{if(!r(lr,Zt[0],"VP8X")){if(Be(lr,Zt[0]+4)!=10){Tt=3;break e}if(18>Tt[0]){Tt=7;break e}var cn=Be(lr,Zt[0]+8),Ei=1+Ge(lr,Zt[0]+12);if(2147483648<=Ei*(lr=1+Ge(lr,Zt[0]+15))){Tt=3;break e}Sn!=null&&(Sn[0]=cn),Er!=null&&(Er[0]=Ei),yr!=null&&(yr[0]=lr),Zt[0]+=18,Tt[0]-=18,xn[0]=1}Tt=0}}if(Ot=Ot[0],Nt=Nt[0],Tt!=0)return Tt;if(Zt=!!(2&Nt),!ir&&Ot)return 3;if(ke!=null&&(ke[0]=!!(16&Nt)),De!=null&&(De[0]=Zt),$e!=null&&($e[0]=0),De=Je[0],Nt=ft[0],Ot&&Zt&&qe==null){Tt=0;break}if(4>le){Tt=7;break}if(ir&&Ot||!ir&&!Ot&&!r(B,W[0],"ALPH")){le=[le],gt.na=[gt.na],gt.P=[gt.P],gt.Sa=[gt.Sa];e:{cn=B,Tt=W,ir=le;var xn=gt.gb;Er=gt.na,yr=gt.P,Sn=gt.Sa,Ei=22,e(cn!=null),e(ir!=null),lr=Tt[0];var Ki=ir[0];for(e(Er!=null),e(Sn!=null),Er[0]=null,yr[0]=null,Sn[0]=0;;){if(Tt[0]=lr,ir[0]=Ki,8>Ki){Tt=7;break e}var kl=Be(cn,lr+4);if(4294967286<kl){Tt=3;break e}var ji=8+kl+1&-2;if(Ei+=ji,0<xn&&Ei>xn){Tt=3;break e}if(!r(cn,lr,"VP8 ")||!r(cn,lr,"VP8L")){Tt=0;break e}if(Ki[0]<ji){Tt=7;break e}r(cn,lr,"ALPH")||(Er[0]=cn,yr[0]=lr+8,Sn[0]=kl),lr+=ji,Ki-=ji}}if(le=le[0],gt.na=gt.na[0],gt.P=gt.P[0],gt.Sa=gt.Sa[0],Tt!=0)break}le=[le],gt.Ja=[gt.Ja],gt.xa=[gt.xa];e:if(xn=B,Tt=W,ir=le,Er=gt.gb[0],yr=gt.Ja,Sn=gt.xa,cn=Tt[0],lr=!r(xn,cn,"VP8 "),Ei=!r(xn,cn,"VP8L"),e(xn!=null),e(ir!=null),e(yr!=null),e(Sn!=null),8>ir[0])Tt=7;else{if(lr||Ei){if(xn=Be(xn,cn+4),12<=Er&&xn>Er-12){Tt=3;break e}if(et&&xn>ir[0]-8){Tt=7;break e}yr[0]=xn,Tt[0]+=8,ir[0]-=8,Sn[0]=Ei}else Sn[0]=5<=ir[0]&&xn[cn+0]==47&&!(xn[cn+4]>>5),yr[0]=ir[0];Tt=0}if(le=le[0],gt.Ja=gt.Ja[0],gt.xa=gt.xa[0],W=W[0],Tt!=0)break;if(4294967286<gt.Ja)return 3;if($e==null||Zt||($e[0]=gt.xa?2:1),De=[De],Nt=[Nt],gt.xa){if(5>le){Tt=7;break}$e=De,et=Nt,Zt=ke,B==null||5>le?B=0:5<=le&&B[W+0]==47&&!(B[W+4]>>5)?(ir=[0],xn=[0],Er=[0],Y(yr=new J,B,W,le),da(yr,ir,xn,Er)?($e!=null&&($e[0]=ir[0]),et!=null&&(et[0]=xn[0]),Zt!=null&&(Zt[0]=Er[0]),B=1):B=0):B=0}else{if(10>le){Tt=7;break}$e=Nt,B==null||10>le||!vs(B,W+3,le-3)?B=0:(et=B[W+0]|B[W+1]<<8|B[W+2]<<16,Zt=16383&(B[W+7]<<8|B[W+6]),B=16383&(B[W+9]<<8|B[W+8]),1&et||3<(et>>1&7)||!(et>>4&1)||et>>5>=gt.Ja||!Zt||!B?B=0:(De&&(De[0]=Zt),$e&&($e[0]=B),B=1))}if(!B||(De=De[0],Nt=Nt[0],Ot&&(Je[0]!=De||ft[0]!=Nt)))return 3;qe!=null&&(qe[0]=gt,qe.offset=W-qe.w,e(4294967286>W-qe.w),e(qe.offset==qe.ha-le));break}return Tt==0||Tt==7&&Ot&&qe==null?(ke!=null&&(ke[0]|=gt.na!=null&&0<gt.na.length),fe!=null&&(fe[0]=De),Ae!=null&&(Ae[0]=Nt),0):Tt}function Ym(B,W,le){var fe=W.width,Ae=W.height,ke=0,De=0,$e=fe,qe=Ae;if(W.Da=B!=null&&0<B.Da,W.Da&&($e=B.cd,qe=B.bd,ke=B.v,De=B.j,11>le||(ke&=-2,De&=-2),0>ke||0>De||0>=$e||0>=qe||ke+$e>fe||De+qe>Ae))return 0;if(W.v=ke,W.j=De,W.va=ke+$e,W.o=De+qe,W.U=$e,W.T=qe,W.da=B!=null&&0<B.da,W.da){if(!Re($e,qe,le=[B.ib],ke=[B.hb]))return 0;W.ib=le[0],W.hb=ke[0]}return W.ob=B!=null&&B.ob,W.Kb=B==null||!B.Sd,W.da&&(W.ob=W.ib<3*fe/4&&W.hb<3*Ae/4,W.Kb=0),1}function Th(B){if(B==null)return 2;if(11>B.S){var W=B.f.RGBA;W.fb+=(B.height-1)*W.A,W.A=-W.A}else W=B.f.kb,B=B.height,W.O+=(B-1)*W.fa,W.fa=-W.fa,W.N+=(B-1>>1)*W.Ab,W.Ab=-W.Ab,W.W+=(B-1>>1)*W.Db,W.Db=-W.Db,W.F!=null&&(W.J+=(B-1)*W.lb,W.lb=-W.lb);return 0}function Bd(B,W,le,fe){if(fe==null||0>=B||0>=W)return 2;if(le!=null){if(le.Da){var Ae=le.cd,ke=le.bd,De=-2&le.v,$e=-2&le.j;if(0>De||0>$e||0>=Ae||0>=ke||De+Ae>B||$e+ke>W)return 2;B=Ae,W=ke}if(le.da){if(!Re(B,W,Ae=[le.ib],ke=[le.hb]))return 2;B=Ae[0],W=ke[0]}}fe.width=B,fe.height=W;e:{var qe=fe.width,Je=fe.height;if(B=fe.S,0>=qe||0>=Je||!(B>=kN&&13>B))B=2;else{if(0>=fe.Rd&&fe.sd==null){De=ke=Ae=W=0;var ft=($e=qe*Tee[B])*Je;if(11>B||(ke=(Je+1)/2*(W=(qe+1)/2),B==12&&(De=(Ae=qe)*Je)),(Je=s(ft+2*ke+De))==null){B=1;break e}fe.sd=Je,11>B?((qe=fe.f.RGBA).eb=Je,qe.fb=0,qe.A=$e,qe.size=ft):((qe=fe.f.kb).y=Je,qe.O=0,qe.fa=$e,qe.Fd=ft,qe.f=Je,qe.N=0+ft,qe.Ab=W,qe.Cd=ke,qe.ea=Je,qe.W=0+ft+ke,qe.Db=W,qe.Ed=ke,B==12&&(qe.F=Je,qe.J=0+ft+2*ke),qe.Tc=De,qe.lb=Ae)}if(W=1,Ae=fe.S,ke=fe.width,De=fe.height,Ae>=kN&&13>Ae)if(11>Ae)B=fe.f.RGBA,W&=($e=Math.abs(B.A))*(De-1)+ke<=B.size,W&=$e>=ke*Tee[Ae],W&=B.eb!=null;else{B=fe.f.kb,$e=(ke+1)/2,ft=(De+1)/2,qe=Math.abs(B.fa),Je=Math.abs(B.Ab);var Ot=Math.abs(B.Db),et=Math.abs(B.lb),gt=et*(De-1)+ke;W&=qe*(De-1)+ke<=B.Fd,W&=Je*(ft-1)+$e<=B.Cd,W=(W&=Ot*(ft-1)+$e<=B.Ed)&qe>=ke&Je>=$e&Ot>=$e,W&=B.y!=null,W&=B.f!=null,W&=B.ea!=null,Ae==12&&(W&=et>=ke,W&=gt<=B.Tc,W&=B.F!=null)}else W=0;B=W?0:2}}return B!=0||le!=null&&le.fd&&(B=Th(fe)),B}var ao=64,Sc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ha=24,Tl=32,ii=8,Ec=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(B){return B},D.Predictor2=function(B,W,le){return W[le+0]},D.Predictor3=function(B,W,le){return W[le+1]},D.Predictor4=function(B,W,le){return W[le-1]},D.Predictor5=function(B,W,le){return Jt(Jt(B,W[le+1]),W[le+0])},D.Predictor6=function(B,W,le){return Jt(B,W[le-1])},D.Predictor7=function(B,W,le){return Jt(B,W[le+0])},D.Predictor8=function(B,W,le){return Jt(W[le-1],W[le+0])},D.Predictor9=function(B,W,le){return Jt(W[le+0],W[le+1])},D.Predictor10=function(B,W,le){return Jt(Jt(B,W[le-1]),Jt(W[le+0],W[le+1]))},D.Predictor11=function(B,W,le){var fe=W[le+0];return 0>=pt(fe>>24&255,B>>24&255,(W=W[le-1])>>24&255)+pt(fe>>16&255,B>>16&255,W>>16&255)+pt(fe>>8&255,B>>8&255,W>>8&255)+pt(255&fe,255&B,255&W)?fe:B},D.Predictor12=function(B,W,le){var fe=W[le+0];return(_r((B>>24&255)+(fe>>24&255)-((W=W[le-1])>>24&255))<<24|_r((B>>16&255)+(fe>>16&255)-(W>>16&255))<<16|_r((B>>8&255)+(fe>>8&255)-(W>>8&255))<<8|_r((255&B)+(255&fe)-(255&W)))>>>0},D.Predictor13=function(B,W,le){var fe=W[le-1];return(lt((B=Jt(B,W[le+0]))>>24&255,fe>>24&255)<<24|lt(B>>16&255,fe>>16&255)<<16|lt(B>>8&255,fe>>8&255)<<8|lt(255&B,255&fe))>>>0};var Ne=D.PredictorAdd0;D.PredictorAdd1=er,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var p=D.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(B){return B>>8&255},function(B){return B}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(B){return B},function(B){return B>>8&255});var v,_=D.ColorIndexInverseTransform,A=D.MapARGB,P=D.VP8LColorIndexInverseTransformAlpha,R=D.MapAlpha,U=D.VP8LPredictorsAdd=[];U.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var G,te,de,we,Pe,Ze,at,dt,yt,Pt,tr,ar,sr,Nn,kn,_s,oo,Xo,Gi,_o,Pl,Zm,ed,PN,$d,T5,P5,ZI,zf=s(511),k5=s(2041),O5=s(225),Kv=s(767),QI=0,Xv=k5,v0=O5,pu=Kv,td=zf,kN=0,tw=1,I5=2,rw=3,nw=4,ON=5,JI=6,IN=7,RN=8,DN=9,b=10,k=[2,3,7],V=[3,3,11],ne=[280,256,256,256,40],pe=[0,1,1,1,0],Ie=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ot=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],St=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ft=8,pr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Cn=null,Ri=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ud=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gu=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Yv=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],QB=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],y0=[],Ph=[],Vf=[],JB=1,R5=2,Is=[],Ac=[];$a("UpsampleRgbLinePair",Uf,3),$a("UpsampleBgrLinePair",Ah,3),$a("UpsampleRgbaLinePair",Gg,4),$a("UpsampleBgraLinePair",Fd,4),$a("UpsampleArgbLinePair",Xm,4),$a("UpsampleRgba4444LinePair",Ch,2),$a("UpsampleRgb565LinePair",na,2);var e9=D.UpsampleRgbLinePair,t9=D.UpsampleBgrLinePair,eR=D.UpsampleRgbaLinePair,MN=D.UpsampleBgraLinePair,D5=D.UpsampleArgbLinePair,tR=D.UpsampleRgba4444LinePair,xPe=D.UpsampleRgb565LinePair,rR=16,nR=1<<rR-1,M5=-227,r9=482,jee=6,vPe=(256<<jee)-1,Aee=0,yPe=s(256),bPe=s(256),wPe=s(256),_Pe=s(256),NPe=s(r9-M5),SPe=s(r9-M5);Go("YuvToRgbRow",Uf,3),Go("YuvToBgrRow",Ah,3),Go("YuvToRgbaRow",Gg,4),Go("YuvToBgraRow",Fd,4),Go("YuvToArgbRow",Xm,4),Go("YuvToRgba4444Row",Ch,2),Go("YuvToRgb565Row",na,2);var Cee=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],iR=[0,2,8],EPe=[8,7,6,4,4,2,2,2,1,1,1,1],jPe=1;this.WebPDecodeRGBA=function(B,W,le,fe,Ae){var ke=tw,De=new vt,$e=new Cr;De.ba=$e,$e.S=ke,$e.width=[$e.width],$e.height=[$e.height];var qe=$e.width,Je=$e.height,ft=new Pr;if(ft==null||B==null)var Ot=2;else e(ft!=null),Ot=mu(B,W,le,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(Ot!=0?qe=0:(qe!=null&&(qe[0]=ft.width[0]),Je!=null&&(Je[0]=ft.height[0]),qe=1),qe){$e.width=$e.width[0],$e.height=$e.height[0],fe!=null&&(fe[0]=$e.width),Ae!=null&&(Ae[0]=$e.height);e:{if(fe=new On,(Ae=new Gt).data=B,Ae.w=W,Ae.ha=le,Ae.kd=1,W=[0],e(Ae!=null),((B=mu(Ae.data,Ae.w,Ae.ha,null,null,null,W,null,Ae))==0||B==7)&&W[0]&&(B=4),(W=B)==0){if(e(De!=null),fe.data=Ae.data,fe.w=Ae.w+Ae.offset,fe.ha=Ae.ha-Ae.offset,fe.put=Fr,fe.ac=vi,fe.bc=Bi,fe.ma=De,Ae.xa){if((B=wt())==null){De=1;break e}if(function(et,gt){var Nt=[0],Zt=[0],Tt=[0];t:for(;;){if(et==null)return 0;if(gt==null)return et.a=2,0;if(et.l=gt,et.a=0,Y(et.m,gt.data,gt.w,gt.ha),!da(et.m,Nt,Zt,Tt)){et.a=3;break t}if(et.xb=R5,gt.width=Nt[0],gt.height=Zt[0],!Et(Nt[0],Zt[0],1,et,null))break t;return 1}return e(et.a!=0),0}(B,fe)){if(fe=(W=Bd(fe.width,fe.height,De.Oa,De.ba))==0){t:{fe=B;r:for(;;){if(fe==null){fe=0;break t}if(e(fe.s.yc!=null),e(fe.s.Ya!=null),e(0<fe.s.Wb),e((le=fe.l)!=null),e((Ae=le.ma)!=null),fe.xb!=0){if(fe.ca=Ae.ba,fe.tb=Ae.tb,e(fe.ca!=null),!Ym(Ae.Oa,le,rw)){fe.a=2;break r}if(!kt(fe,le.width)||le.da)break r;if((le.da||zt(fe.ca.S))&&Ba(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&Ba()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!Te(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!bt(fe,fe.V,fe.Ba,fe.c,fe.i,le.o,Ve))break r;Ae.Dc=fe.Ma,fe=1;break t}e(fe.a!=0),fe=0}fe=!fe}fe&&(W=B.a)}else W=B.a}else{if((B=new xs)==null){De=1;break e}if(B.Fa=Ae.na,B.P=Ae.P,B.qc=Ae.Sa,ll(B,fe)){if((W=Bd(fe.width,fe.height,De.Oa,De.ba))==0){if(B.Aa=0,le=De.Oa,e((Ae=B)!=null),le!=null){if(0<(qe=0>(qe=le.Md)?0:100<qe?255:255*qe/100)){for(Je=ft=0;4>Je;++Je)12>(Ot=Ae.pb[Je]).lc&&(Ot.ia=qe*EPe[0>Ot.lc?0:Ot.lc]>>3),ft|=Ot.ia;ft&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=le.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}(function(et,gt){if(et==null)return 0;if(gt==null)return Os(et,2,"NULL VP8Io parameter in VP8Decode().");if(!et.cb&&!ll(et,gt))return 0;if(e(et.cb),gt.ac==null||gt.ac(gt)){gt.ob&&(et.L=0);var Nt=iR[et.L];if(et.L==2?(et.yb=0,et.zb=0):(et.yb=gt.v-Nt>>4,et.zb=gt.j-Nt>>4,0>et.yb&&(et.yb=0),0>et.zb&&(et.zb=0)),et.Va=gt.o+15+Nt>>4,et.Hb=gt.va+15+Nt>>4,et.Hb>et.za&&(et.Hb=et.za),et.Va>et.Ub&&(et.Va=et.Ub),0<et.L){var Zt=et.ed;for(Nt=0;4>Nt;++Nt){var Tt;if(et.Qa.Cb){var ir=et.Qa.Lb[Nt];et.Qa.Fb||(ir+=Zt.Tb)}else ir=Zt.Tb;for(Tt=0;1>=Tt;++Tt){var lr=et.gd[Nt][Tt],Er=ir;if(Zt.Pc&&(Er+=Zt.vd[0],Tt&&(Er+=Zt.od[0])),0<(Er=0>Er?0:63<Er?63:Er)){var yr=Er;0<Zt.wb&&(yr=4<Zt.wb?yr>>2:yr>>1)>9-Zt.wb&&(yr=9-Zt.wb),1>yr&&(yr=1),lr.dd=yr,lr.tc=2*Er+yr,lr.ld=40<=Er?2:15<=Er?1:0}else lr.tc=0;lr.La=Tt}}}Nt=0}else Os(et,6,"Frame setup failed"),Nt=et.a;if(Nt=Nt==0){if(Nt){et.$c=0,0<et.Aa||(et.Ic=jPe);t:{Nt=et.Ic,Zt=4*(yr=et.za);var Sn=32*yr,cn=yr+1,Ei=0<et.L?yr*(0<et.Aa?2:1):0,xn=(et.Aa==2?2:1)*yr;if((lr=Zt+832+(Tt=3*(16*Nt+iR[et.L])/2*Sn)+(ir=et.Fa!=null&&0<et.Fa.length?et.Kc.c*et.Kc.i:0))!=lr)Nt=0;else{if(lr>et.Vb){if(et.Vb=0,et.Ec=s(lr),et.Fc=0,et.Ec==null){Nt=Os(et,1,"no memory during frame initialization.");break t}et.Vb=lr}lr=et.Ec,Er=et.Fc,et.Ac=lr,et.Bc=Er,Er+=Zt,et.Gd=o(Sn,ei),et.Hd=0,et.rb=o(cn+1,Jn),et.sb=1,et.wa=Ei?o(Ei,Oi):null,et.Y=0,et.D.Nb=0,et.D.wa=et.wa,et.D.Y=et.Y,0<et.Aa&&(et.D.Y+=yr),e(!0),et.oc=lr,et.pc=Er,Er+=832,et.ya=o(xn,Al),et.aa=0,et.D.ya=et.ya,et.D.aa=et.aa,et.Aa==2&&(et.D.aa+=yr),et.R=16*yr,et.B=8*yr,yr=(Sn=iR[et.L])*et.R,Sn=Sn/2*et.B,et.sa=lr,et.ta=Er+yr,et.qa=et.sa,et.ra=et.ta+16*Nt*et.R+Sn,et.Ha=et.qa,et.Ia=et.ra+8*Nt*et.B+Sn,et.$c=0,Er+=Tt,et.mb=ir?lr:null,et.nb=ir?Er:null,e(Er+ir<=et.Fc+et.Vb),Kr(et),i(et.Ac,et.Bc,0,Zt),Nt=1}}if(Nt){if(gt.ka=0,gt.y=et.sa,gt.O=et.ta,gt.f=et.qa,gt.N=et.ra,gt.ea=et.Ha,gt.Vd=et.Ia,gt.fa=et.R,gt.Rc=et.B,gt.F=null,gt.J=0,!QI){for(Nt=-255;255>=Nt;++Nt)zf[255+Nt]=0>Nt?-Nt:Nt;for(Nt=-1020;1020>=Nt;++Nt)k5[1020+Nt]=-128>Nt?-128:127<Nt?127:Nt;for(Nt=-112;112>=Nt;++Nt)O5[112+Nt]=-16>Nt?-16:15<Nt?15:Nt;for(Nt=-255;510>=Nt;++Nt)Kv[255+Nt]=0>Nt?0:255<Nt?255:Nt;QI=1}at=ro,dt=_t,Pt=We,tr=Or,ar=ys,yt=bo,sr=Gm,Nn=hu,kn=ee,_s=Se,oo=Km,Xo=Rt,Gi=Ye,_o=ct,Pl=x0,Zm=Wo,ed=$f,PN=Wg,Ph[0]=zr,Ph[1]=wh,Ph[2]=In,Ph[3]=no,Ph[4]=Gv,Ph[5]=ws,Ph[6]=Pn,Ph[7]=Hg,Ph[8]=Eh,Ph[9]=Zu,y0[0]=uu,y0[1]=gn,y0[2]=bs,y0[3]=_h,y0[4]=Sh,y0[5]=Md,y0[6]=Hm,Vf[0]=Qu,Vf[1]=wo,Vf[2]=Cl,Vf[3]=ra,Vf[4]=g0,Vf[5]=Bf,Vf[6]=Ld,Nt=1}else Nt=0}Nt&&(Nt=function(Ki,kl){for(Ki.M=0;Ki.M<Ki.Va;++Ki.M){var ji,vn=Ki.Jc[Ki.M&Ki.Xb],Vr=Ki.m,Zo=Ki;for(ji=0;ji<Zo.za;++ji){var fi=Vr,Ji=Zo,Sa=Ji.Ac,Cc=Ji.Bc+4*ji,rd=Ji.zc,No=Ji.ya[Ji.aa+ji];if(Ji.Qa.Bb?No.$b=je(fi,Ji.Pa.jb[0])?2+je(fi,Ji.Pa.jb[2]):je(fi,Ji.Pa.jb[1]):No.$b=0,Ji.kc&&(No.Ad=je(fi,Ji.Bd)),No.Za=!je(fi,145)+0,No.Za){var xu=No.Ob,nd=0;for(Ji=0;4>Ji;++Ji){var Ol,is=rd[0+Ji];for(Ol=0;4>Ol;++Ol){is=gu[Sa[Cc+Ol]][is];for(var Rs=Yo[je(fi,is[0])];0<Rs;)Rs=Yo[2*Rs+je(fi,is[Rs])];is=-Rs,Sa[Cc+Ol]=is}n(xu,nd,Sa,Cc,4),nd+=4,rd[0+Ji]=is}}else is=je(fi,156)?je(fi,128)?1:3:je(fi,163)?2:0,No.Ob[0]=is,i(Sa,Cc,is,4),i(rd,0,is,4);No.Dd=je(fi,142)?je(fi,114)?je(fi,183)?1:3:2:0}if(Zo.m.Ka)return Os(Ki,7,"Premature end-of-partition0 encountered.");for(;Ki.ja<Ki.za;++Ki.ja){if(Zo=vn,fi=(Vr=Ki).rb[Vr.sb-1],Sa=Vr.rb[Vr.sb+Vr.ja],ji=Vr.ya[Vr.aa+Vr.ja],Cc=Vr.kc?ji.Ad:0)fi.la=Sa.la=0,ji.Za||(fi.Na=Sa.Na=0),ji.Hc=0,ji.Gc=0,ji.ia=0;else{var So,Ds;if(fi=Sa,Sa=Zo,Cc=Vr.Pa.Xc,rd=Vr.ya[Vr.aa+Vr.ja],No=Vr.pb[rd.$b],Ji=rd.ad,xu=0,nd=Vr.rb[Vr.sb-1],is=Ol=0,i(Ji,xu,0,384),rd.Za)var Tc=0,Qm=Cc[3];else{Rs=s(16);var Qo=fi.Na+nd.Na;if(Qo=Cn(Sa,Cc[1],Qo,No.Eb,0,Rs,0),fi.Na=nd.Na=(0<Qo)+0,1<Qo)at(Rs,0,Ji,xu);else{var zd=Rs[0]+3>>3;for(Rs=0;256>Rs;Rs+=16)Ji[xu+Rs]=zd}Tc=1,Qm=Cc[0]}var ia=15&fi.la,Il=15&nd.la;for(Rs=0;4>Rs;++Rs){var kh=1&Il;for(zd=Ds=0;4>zd;++zd)ia=ia>>1|(kh=(Qo=Cn(Sa,Qm,Qo=kh+(1&ia),No.Sc,Tc,Ji,xu))>Tc)<<7,Ds=Ds<<2|(3<Qo?3:1<Qo?2:Ji[xu+0]!=0),xu+=16;ia>>=4,Il=Il>>1|kh<<7,Ol=(Ol<<8|Ds)>>>0}for(Qm=ia,Tc=Il>>4,So=0;4>So;So+=2){for(Ds=0,ia=fi.la>>4+So,Il=nd.la>>4+So,Rs=0;2>Rs;++Rs){for(kh=1&Il,zd=0;2>zd;++zd)Qo=kh+(1&ia),ia=ia>>1|(kh=0<(Qo=Cn(Sa,Cc[2],Qo,No.Qc,0,Ji,xu)))<<3,Ds=Ds<<2|(3<Qo?3:1<Qo?2:Ji[xu+0]!=0),xu+=16;ia>>=2,Il=Il>>1|kh<<5}is|=Ds<<4*So,Qm|=ia<<4<<So,Tc|=(240&Il)<<So}fi.la=Qm,nd.la=Tc,rd.Hc=Ol,rd.Gc=is,rd.ia=43690&is?0:No.ia,Cc=!(Ol|is)}if(0<Vr.L&&(Vr.wa[Vr.Y+Vr.ja]=Vr.gd[ji.$b][ji.Za],Vr.wa[Vr.Y+Vr.ja].La|=!Cc),Zo.Ka)return Os(Ki,7,"Premature end-of-file encountered.")}if(Kr(Ki),Vr=kl,Zo=1,ji=(vn=Ki).D,fi=0<vn.L&&vn.M>=vn.zb&&vn.M<=vn.Va,vn.Aa==0)t:{if(ji.M=vn.M,ji.uc=fi,Na(vn,ji),Zo=1,ji=(Ds=vn.D).Nb,fi=(is=iR[vn.L])*vn.R,Sa=is/2*vn.B,Rs=16*ji*vn.R,zd=8*ji*vn.B,Cc=vn.sa,rd=vn.ta-fi+Rs,No=vn.qa,Ji=vn.ra-Sa+zd,xu=vn.Ha,nd=vn.Ia-Sa+zd,Il=(ia=Ds.M)==0,Ol=ia>=vn.Va-1,vn.Aa==2&&Na(vn,Ds),Ds.uc)for(kh=(Qo=vn).D.M,e(Qo.D.uc),Ds=Qo.yb;Ds<Qo.Hb;++Ds){Tc=Ds,Qm=kh;var id=(Oh=(Pc=Qo).D).Nb;So=Pc.R;var Oh=Oh.wa[Oh.Y+Tc],Ih=Pc.sa,Vd=Pc.ta+16*id*So+16*Tc,Rh=Oh.dd,fa=Oh.tc;if(fa!=0)if(e(3<=fa),Pc.L==1)0<Tc&&Zm(Ih,Vd,So,fa+4),Oh.La&&PN(Ih,Vd,So,fa),0<Qm&&Pl(Ih,Vd,So,fa+4),Oh.La&&ed(Ih,Vd,So,fa);else{var Dh=Pc.B,Jm=Pc.qa,iw=Pc.ra+8*id*Dh+8*Tc,Kg=Pc.Ha,Pc=Pc.Ia+8*id*Dh+8*Tc;id=Oh.ld,0<Tc&&(Nn(Ih,Vd,So,fa+4,Rh,id),_s(Jm,iw,Kg,Pc,Dh,fa+4,Rh,id)),Oh.La&&(Xo(Ih,Vd,So,fa,Rh,id),_o(Jm,iw,Kg,Pc,Dh,fa,Rh,id)),0<Qm&&(sr(Ih,Vd,So,fa+4,Rh,id),kn(Jm,iw,Kg,Pc,Dh,fa+4,Rh,id)),Oh.La&&(oo(Ih,Vd,So,fa,Rh,id),Gi(Jm,iw,Kg,Pc,Dh,fa,Rh,id))}}if(vn.ia&&alert("todo:DitherRow"),Vr.put!=null){if(Ds=16*ia,ia=16*(ia+1),Il?(Vr.y=vn.sa,Vr.O=vn.ta+Rs,Vr.f=vn.qa,Vr.N=vn.ra+zd,Vr.ea=vn.Ha,Vr.W=vn.Ia+zd):(Ds-=is,Vr.y=Cc,Vr.O=rd,Vr.f=No,Vr.N=Ji,Vr.ea=xu,Vr.W=nd),Ol||(ia-=is),ia>Vr.o&&(ia=Vr.o),Vr.F=null,Vr.J=null,vn.Fa!=null&&0<vn.Fa.length&&Ds<ia&&(Vr.J=zn(vn,Vr,Ds,ia-Ds),Vr.F=vn.mb,Vr.F==null&&Vr.F.length==0)){Zo=Os(vn,3,"Could not decode alpha data.");break t}Ds<Vr.j&&(is=Vr.j-Ds,Ds=Vr.j,e(!(1&is)),Vr.O+=vn.R*is,Vr.N+=vn.B*(is>>1),Vr.W+=vn.B*(is>>1),Vr.F!=null&&(Vr.J+=Vr.width*is)),Ds<ia&&(Vr.O+=Vr.v,Vr.N+=Vr.v>>1,Vr.W+=Vr.v>>1,Vr.F!=null&&(Vr.J+=Vr.v),Vr.ka=Ds-Vr.j,Vr.U=Vr.va-Vr.v,Vr.T=ia-Ds,Zo=Vr.put(Vr))}ji+1!=vn.Ic||Ol||(n(vn.sa,vn.ta-fi,Cc,rd+16*vn.R,fi),n(vn.qa,vn.ra-Sa,No,Ji+8*vn.B,Sa),n(vn.Ha,vn.Ia-Sa,xu,nd+8*vn.B,Sa))}if(!Zo)return Os(Ki,6,"Output aborted.")}return 1}(et,gt)),gt.bc!=null&&gt.bc(gt),Nt&=1}return Nt?(et.cb=0,Nt):0})(B,fe)||(W=B.a)}}else W=B.a}W==0&&De.Oa!=null&&De.Oa.fd&&(W=Th(De.ba))}De=W}ke=De!=0?null:11>ke?$e.f.RGBA.eb:$e.f.kb.y}else ke=null;return ke};var Tee=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(D,z){for(var F="",q=0;q<4;q++)F+=String.fromCharCode(D[z++]);return F}function d(D,z){return D[z+0]|D[z+1]<<8}function h(D,z){return(D[z+0]|D[z+1]<<8|D[z+2]<<16)>>>0}function f(D,z){return(D[z+0]|D[z+1]<<8|D[z+2]<<16|D[z+3]<<24)>>>0}new c;var m=[0],x=[0],g=[],y=new c,w=t,S=function(D,z){var F={},q=0,Q=!1,re=0,Z=0;if(F.frames=[],!function(H,J){for(var ie=0;ie<4;ie++)if(H[J+ie]!="RIFF".charCodeAt(ie))return!0;return!1}(D,z)){for(f(D,z+=4),z+=8;z<D.length;){var se=u(D,z),K=f(D,z+=4);z+=4;var X=K+(1&K);switch(se){case"VP8 ":case"VP8L":F.frames[q]===void 0&&(F.frames[q]={}),(xe=F.frames[q]).src_off=Q?Z:z-8,xe.src_size=re+K+8,q++,Q&&(Q=!1,re=0,Z=0);break;case"VP8X":(xe=F.header={}).feature_flags=D[z];var Y=z+4;xe.canvas_width=1+h(D,Y),Y+=3,xe.canvas_height=1+h(D,Y),Y+=3;break;case"ALPH":Q=!0,re=X+8,Z=z-8;break;case"ANIM":(xe=F.header).bgcolor=f(D,z),Y=z+4,xe.loop_count=d(D,Y),Y+=2;break;case"ANMF":var oe,xe;(xe=F.frames[q]={}).offset_x=2*h(D,z),z+=3,xe.offset_y=2*h(D,z),z+=3,xe.width=1+h(D,z),z+=3,xe.height=1+h(D,z),z+=3,xe.duration=h(D,z),z+=3,oe=D[z++],xe.dispose=1&oe,xe.blend=oe>>1&1}se!="ANMF"&&(z+=X)}return F}}(w,0);S.response=w,S.rgbaoutput=!0,S.dataurl=!1;var E=S.header?S.header:null,j=S.frames?S.frames:null;if(E){E.loop_counter=E.loop_count,m=[E.canvas_height],x=[E.canvas_width];for(var T=0;T<j.length&&j[T].blend!=0;T++);}var O=j[0],I=y.WebPDecodeRGBA(w,O.src_off,O.src_size,x,m);O.rgba=I,O.imgwidth=x[0],O.imgheight=m[0];for(var M=0;M<x[0]*m[0]*4;M++)g[M]=I[M];return this.width=x,this.height=m,this.data=g,this}(function(t){var e,r,n,i,s,o,l,c,u,d=function(H){return H=H||{},this.isStrokeTransparent=H.isStrokeTransparent||!1,this.strokeOpacity=H.strokeOpacity||1,this.strokeStyle=H.strokeStyle||"#000000",this.fillStyle=H.fillStyle||"#000000",this.isFillTransparent=H.isFillTransparent||!1,this.fillOpacity=H.fillOpacity||1,this.font=H.font||"10px sans-serif",this.textBaseline=H.textBaseline||"alphabetic",this.textAlign=H.textAlign||"left",this.lineWidth=H.lineWidth||1,this.lineJoin=H.lineJoin||"miter",this.lineCap=H.lineCap||"butt",this.path=H.path||[],this.transform=H.transform!==void 0?H.transform.clone():new c,this.globalCompositeOperation=H.globalCompositeOperation||"normal",this.globalAlpha=H.globalAlpha||1,this.clip_path=H.clip_path||[],this.currentPoint=H.currentPoint||new o,this.miterLimit=H.miterLimit||10,this.lastPoint=H.lastPoint||new o,this.lineDashOffset=H.lineDashOffset||0,this.lineDash=H.lineDash||[],this.margin=H.margin||[0,0,0,0],this.prevPageLastElemOffset=H.prevPageLastElemOffset||0,this.ignoreClearRect=typeof H.ignoreClearRect!="boolean"||H.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(H){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=H;Object.defineProperty(this,"pdf",{get:function(){return J}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(Be){ie=!!Be}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(Be){ce=!!Be}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(Be){isNaN(Be)||(me=Be)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(Be){isNaN(Be)||(he=Be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Be){var Te;typeof Be=="number"?Te=[Be,Be,Be,Be]:((Te=new Array(4))[0]=Be[0],Te[1]=Be.length>=2?Be[1]:Te[0],Te[2]=Be.length>=3?Be[2]:Te[0],Te[3]=Be.length>=4?Be[3]:Te[1]),u.margin=Te}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(Be){_e=Be}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Be){ue=Be}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(Be){je=Be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Be){Be instanceof d&&(u=Be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Be){u.path=Be}});var ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return ye},set:function(Be){ye=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var Te;Te=f(Be),this.ctx.fillStyle=Te.style,this.ctx.isFillTransparent=Te.a===0,this.ctx.fillOpacity=Te.a,this.pdf.setFillColor(Te.r,Te.g,Te.b,{a:Te.a}),this.pdf.setTextColor(Te.r,Te.g,Te.b,{a:Te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var Te=f(Be);this.ctx.strokeStyle=Te.style,this.ctx.isStrokeTransparent=Te.a===0,this.ctx.strokeOpacity=Te.a,Te.a===0?this.pdf.setDrawColor(255,255,255):(Te.a,this.pdf.setDrawColor(Te.r,Te.g,Te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var Le=null,Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(Be){Le=null,Ge=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var Te;if(this.ctx.font=Be,(Te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var ze=Te[1];Te[2];var tt=Te[3],Re=Te[4];Te[5];var Ue=Te[6],xt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Re)[2];Re=Math.floor(xt==="px"?parseFloat(Re)*this.pdf.internal.scaleFactor:xt==="em"?parseFloat(Re)*this.pdf.getFontSize():parseFloat(Re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Re);var st=function(ur){var rt,Lt,Dt=[],Fe=ur.trim();if(Fe==="")return QU;if(Fe in uhe)return[uhe[Fe]];for(;Fe!=="";){switch(Lt=null,rt=(Fe=hhe(Fe)).charAt(0)){case'"':case"'":Lt=jMt(Fe.substring(1),rt);break;default:Lt=AMt(Fe)}if(Lt===null||(Dt.push(Lt[0]),(Fe=hhe(Lt[1]))!==""&&Fe.charAt(0)!==","))return QU;Fe=Fe.replace(/^,/,"")}return Dt}(Ue);if(this.fontFaces){var Xt=function(ur,rt){if(Le===null){var Lt=function(Dt){var Fe=[];return Object.keys(Dt).forEach(function(ut){Dt[ut].forEach(function(Mt){var Ht=null;switch(Mt){case"bold":Ht={family:ut,weight:"bold"};break;case"italic":Ht={family:ut,style:"italic"};break;case"bolditalic":Ht={family:ut,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:ut}}Ht!==null&&(Ht.ref={name:ut,style:Mt},Fe.push(Ht))})}),Fe}(ur.getFontList());Le=function(Dt){for(var Fe={},ut=0;ut<Dt.length;++ut){var Mt=ZU(Dt[ut]),Ht=Mt.family,Wt=Mt.stretch,zt=Mt.style,Rr=Mt.weight;Fe[Ht]=Fe[Ht]||{},Fe[Ht][Wt]=Fe[Ht][Wt]||{},Fe[Ht][Wt][zt]=Fe[Ht][Wt][zt]||{},Fe[Ht][Wt][zt][Rr]=Mt}return Fe}(Lt.concat(rt))}return Le}(this.pdf,this.fontFaces),Jt=st.map(function(ur){return{family:ur,stretch:"normal",weight:tt,style:ze}}),_r=function(ur,rt,Lt){for(var Dt=(Lt=Lt||{}).defaultFontFamily||"times",Fe=Object.assign({},EMt,Lt.genericFontFamilies||{}),ut=null,Mt=null,Ht=0;Ht<rt.length;++Ht)if(Fe[(ut=ZU(rt[Ht])).family]&&(ut.family=Fe[ut.family]),ur.hasOwnProperty(ut.family)){Mt=ur[ut.family];break}if(!(Mt=Mt||ur[Dt]))throw new Error("Could not find a font-family for the rule '"+dhe(ut)+"' and default family '"+Dt+"'.");if(Mt=function(Wt,zt){if(zt[Wt])return zt[Wt];var Rr=GW[Wt],vr=Rr<=GW.normal?-1:1,Cr=che(zt,i5e,Rr,vr);if(!Cr)throw new Error("Could not find a matching font-stretch value for "+Wt);return Cr}(ut.stretch,Mt),Mt=function(Wt,zt){if(zt[Wt])return zt[Wt];for(var Rr=n5e[Wt],vr=0;vr<Rr.length;++vr)if(zt[Rr[vr]])return zt[Rr[vr]];throw new Error("Could not find a matching font-style for "+Wt)}(ut.style,Mt),!(Mt=function(Wt,zt){if(zt[Wt])return zt[Wt];if(Wt===400&&zt[500])return zt[500];if(Wt===500&&zt[400])return zt[400];var Rr=SMt[Wt],vr=che(zt,s5e,Rr,Wt<400?-1:1);if(!vr)throw new Error("Could not find a matching font-weight for value "+Wt);return vr}(ut.weight,Mt)))throw new Error("Failed to resolve a font for the rule '"+dhe(ut)+"'.");return Mt}(Xt,Jt);this.pdf.setFont(_r.ref.name,_r.ref.style)}else{var lt="";(tt==="bold"||parseInt(tt,10)>=700||ze==="bold")&&(lt="bold"),ze==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var pt="",er={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<st.length;Vt++){if(this.pdf.internal.getFont(st[Vt],lt,{noFallback:!0,disableWarning:!0})!==void 0){pt=st[Vt];break}if(lt==="bolditalic"&&this.pdf.internal.getFont(st[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pt=st[Vt],lt="bold";else if(this.pdf.internal.getFont(st[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pt=st[Vt],lt="normal";break}}if(pt===""){for(var Kt=0;Kt<st.length;Kt++)if(er[st[Kt]]){pt=er[st[Kt]];break}}pt=pt===""?"Times":pt,this.pdf.setFont(pt,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};h.prototype.setLineDash=function(H){this.lineDash=H},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){j.call(this,"fill",!1)},h.prototype.stroke=function(){j.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(H,J){if(isNaN(H)||isNaN(J))throw oa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new o(H,J));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(H,J)},h.prototype.closePath=function(){var H=new o(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Us(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){H=new o(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(H.x,H.y)},h.prototype.lineTo=function(H,J){if(isNaN(H)||isNaN(J))throw oa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new o(H,J));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},h.prototype.quadraticCurveTo=function(H,J,ie,ce){if(isNaN(ie)||isNaN(ce)||isNaN(H)||isNaN(J))throw oa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new o(ie,ce)),he=this.ctx.transform.applyToPoint(new o(H,J));this.path.push({type:"qct",x1:he.x,y1:he.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},h.prototype.bezierCurveTo=function(H,J,ie,ce,me,he){if(isNaN(me)||isNaN(he)||isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce))throw oa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new o(me,he)),ue=this.ctx.transform.applyToPoint(new o(H,J)),je=this.ctx.transform.applyToPoint(new o(ie,ce));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:je.x,y2:je.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(_e.x,_e.y)},h.prototype.arc=function(H,J,ie,ce,me,he){if(isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce)||isNaN(me))throw oa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new o(H,J));H=_e.x,J=_e.y;var ue=this.ctx.transform.applyToPoint(new o(0,ie)),je=this.ctx.transform.applyToPoint(new o(0,0));ie=Math.sqrt(Math.pow(ue.x-je.x,2)+Math.pow(ue.y-je.y,2))}Math.abs(me-ce)>=2*Math.PI&&(ce=0,me=2*Math.PI),this.path.push({type:"arc",x:H,y:J,radius:ie,startAngle:ce,endAngle:me,counterclockwise:he})},h.prototype.arcTo=function(H,J,ie,ce,me){throw new Error("arcTo not implemented.")},h.prototype.rect=function(H,J,ie,ce){if(isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce))throw oa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(H,J),this.lineTo(H+ie,J),this.lineTo(H+ie,J+ce),this.lineTo(H,J+ce),this.lineTo(H,J),this.lineTo(H+ie,J),this.lineTo(H,J)},h.prototype.fillRect=function(H,J,ie,ce){if(isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce))throw oa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(H,J,ie,ce),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},h.prototype.strokeRect=function(H,J,ie,ce){if(isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce))throw oa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(H,J,ie,ce),this.stroke())},h.prototype.clearRect=function(H,J,ie,ce){if(isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce))throw oa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(H,J,ie,ce))},h.prototype.save=function(H){H=typeof H!="boolean"||H;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),H){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},h.prototype.restore=function(H){H=typeof H!="boolean"||H;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(J),H&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(H){var J,ie,ce,me;if(H.isCanvasGradient===!0&&(H=H.getColor()),!H)return{r:0,g:0,b:0,a:0,style:H};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(H))J=0,ie=0,ce=0,me=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(H);if(he!==null)J=parseInt(he[1]),ie=parseInt(he[2]),ce=parseInt(he[3]),me=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(H))!==null)J=parseInt(he[1]),ie=parseInt(he[2]),ce=parseInt(he[3]),me=parseFloat(he[4]);else{if(me=1,typeof H=="string"&&H.charAt(0)!=="#"){var _e=new YCe(H);H=_e.ok?_e.toHex():"#000000"}H.length===4?(J=H.substring(1,2),J+=J,ie=H.substring(2,3),ie+=ie,ce=H.substring(3,4),ce+=ce):(J=H.substring(1,3),ie=H.substring(3,5),ce=H.substring(5,7)),J=parseInt(J,16),ie=parseInt(ie,16),ce=parseInt(ce,16)}}return{r:J,g:ie,b:ce,a:me,style:H}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(H,J,ie,ce){if(isNaN(J)||isNaN(ie)||typeof H!="string")throw oa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!m.call(this)){var me=X(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;q.call(this,{text:H,x:J,y:ie,scale:he,angle:me,align:this.textAlign,maxWidth:ce})}},h.prototype.strokeText=function(H,J,ie,ce){if(isNaN(J)||isNaN(ie)||typeof H!="string")throw oa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ce=isNaN(ce)?void 0:ce;var me=X(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;q.call(this,{text:H,x:J,y:ie,scale:he,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:ce})}},h.prototype.measureText=function(H){if(typeof H!="string")throw oa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,ie=this.pdf.internal.scaleFactor,ce=J.internal.getFontSize(),me=J.getStringUnitWidth(H)*ce/J.internal.scaleFactor;return new function(he){var _e=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this}({width:me*=Math.round(96*ie/72*1e4)/1e4})},h.prototype.scale=function(H,J){if(isNaN(H)||isNaN(J))throw oa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new c(H,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},h.prototype.rotate=function(H){if(isNaN(H))throw oa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new c(Math.cos(H),Math.sin(H),-Math.sin(H),Math.cos(H),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.translate=function(H,J){if(isNaN(H)||isNaN(J))throw oa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new c(1,0,0,1,H,J);this.ctx.transform=this.ctx.transform.multiply(ie)},h.prototype.transform=function(H,J,ie,ce,me,he){if(isNaN(H)||isNaN(J)||isNaN(ie)||isNaN(ce)||isNaN(me)||isNaN(he))throw oa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new c(H,J,ie,ce,me,he);this.ctx.transform=this.ctx.transform.multiply(_e)},h.prototype.setTransform=function(H,J,ie,ce,me,he){H=isNaN(H)?1:H,J=isNaN(J)?0:J,ie=isNaN(ie)?0:ie,ce=isNaN(ce)?1:ce,me=isNaN(me)?0:me,he=isNaN(he)?0:he,this.ctx.transform=new c(H,J,ie,ce,me,he)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(H,J,ie,ce,me,he,_e,ue,je){var ye=this.pdf.getImageProperties(H),Le=1,Ge=1,Be=1,Te=1;ce!==void 0&&ue!==void 0&&(Be=ue/ce,Te=je/me,Le=ye.width/ce*ue/ce,Ge=ye.height/me*je/me),he===void 0&&(he=J,_e=ie,J=0,ie=0),ce!==void 0&&ue===void 0&&(ue=ce,je=me),ce===void 0&&ue===void 0&&(ue=ye.width,je=ye.height);for(var ze,tt=this.ctx.transform.decompose(),Re=X(tt.rotate.shx),Ue=new c,xt=(Ue=(Ue=(Ue=Ue.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale)).applyToRectangle(new l(he-J*Be,_e-ie*Te,ce*Le,me*Ge)),st=y.call(this,xt),Xt=[],Jt=0;Jt<st.length;Jt+=1)Xt.indexOf(st[Jt])===-1&&Xt.push(st[Jt]);if(E(Xt),this.autoPaging)for(var _r=Xt[0],lt=Xt[Xt.length-1],pt=_r;pt<lt+1;pt++){this.pdf.setPage(pt);var er=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=pt===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ur=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=pt===1?0:Kt+(pt-2)*ur;if(this.ctx.clip_path.length!==0){var Lt=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ze,this.posX+this.margin[3],-rt+Vt+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=Lt}var Dt=JSON.parse(JSON.stringify(xt));Dt=S([Dt],this.posX+this.margin[3],-rt+Vt+this.ctx.prevPageLastElemOffset)[0];var Fe=(pt>_r||pt<lt)&&g.call(this);Fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],er,ur,null).clip().discardPath()),this.pdf.addImage(H,"JPEG",Dt.x,Dt.y,Dt.w,Dt.h,null,null,Re),Fe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(H,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,Re)};var y=function(H,J,ie){var ce=[];J=J||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(H.type){default:case"mt":case"lt":ce.push(Math.floor((H.y+me)/ie)+1);break;case"arc":ce.push(Math.floor((H.y+me-H.radius)/ie)+1),ce.push(Math.floor((H.y+me+H.radius)/ie)+1);break;case"qct":var he=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x,H.y);ce.push(Math.floor((he.y+me)/ie)+1),ce.push(Math.floor((he.y+he.h+me)/ie)+1);break;case"bct":var _e=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x2,H.y2,H.x,H.y);ce.push(Math.floor((_e.y+me)/ie)+1),ce.push(Math.floor((_e.y+_e.h+me)/ie)+1);break;case"rect":ce.push(Math.floor((H.y+me)/ie)+1),ce.push(Math.floor((H.y+H.h+me)/ie)+1)}for(var ue=0;ue<ce.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<ce[ue];)w.call(this);return ce},w=function(){var H=this.fillStyle,J=this.strokeStyle,ie=this.font,ce=this.lineCap,me=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=H,this.strokeStyle=J,this.font=ie,this.lineCap=ce,this.lineWidth=me,this.lineJoin=he},S=function(H,J,ie){for(var ce=0;ce<H.length;ce++)switch(H[ce].type){case"bct":H[ce].x2+=J,H[ce].y2+=ie;case"qct":H[ce].x1+=J,H[ce].y1+=ie;default:H[ce].x+=J,H[ce].y+=ie}return H},E=function(H){return H.sort(function(J,ie){return J-ie})},j=function(H,J){for(var ie,ce,me=this.fillStyle,he=this.strokeStyle,_e=this.lineCap,ue=this.lineWidth,je=Math.abs(ue*this.ctx.transform.scaleX),ye=this.lineJoin,Le=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),Be=[],Te=0;Te<Ge.length;Te++)if(Ge[Te].x!==void 0)for(var ze=y.call(this,Ge[Te]),tt=0;tt<ze.length;tt+=1)Be.indexOf(ze[tt])===-1&&Be.push(ze[tt]);for(var Re=0;Re<Be.length;Re++)for(;this.pdf.internal.getNumberOfPages()<Be[Re];)w.call(this);if(E(Be),this.autoPaging)for(var Ue=Be[0],xt=Be[Be.length-1],st=Ue;st<xt+1;st++){this.pdf.setPage(st),this.fillStyle=me,this.strokeStyle=he,this.lineCap=_e,this.lineWidth=je,this.lineJoin=ye;var Xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jt=st===1?this.posY+this.margin[0]:this.margin[0],_r=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=st===1?0:_r+(st-2)*lt;if(this.ctx.clip_path.length!==0){var er=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ie,this.posX+this.margin[3],-pt+Jt+this.ctx.prevPageLastElemOffset),T.call(this,H,!0),this.path=er}if(ce=JSON.parse(JSON.stringify(Le)),this.path=S(ce,this.posX+this.margin[3],-pt+Jt+this.ctx.prevPageLastElemOffset),J===!1||st===0){var Vt=(st>Ue||st<xt)&&g.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,lt,null).clip().discardPath()),T.call(this,H,J),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=je,T.call(this,H,J),this.lineWidth=ue;this.path=Le},T=function(H,J){if((H!=="stroke"||J||!x.call(this))&&(H==="stroke"||J||!m.call(this))){for(var ie,ce,me=[],he=this.path,_e=0;_e<he.length;_e++){var ue=he[_e];switch(ue.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:ue,deltas:[],abs:[]});break;case"lt":var je=me.length;if(he[_e-1]&&!isNaN(he[_e-1].x)&&(ie=[ue.x-he[_e-1].x,ue.y-he[_e-1].y],je>0)){for(;je>=0;je--)if(me[je-1].close!==!0&&me[je-1].begin!==!0){me[je-1].deltas.push(ie),me[je-1].abs.push(ue);break}}break;case"bct":ie=[ue.x1-he[_e-1].x,ue.y1-he[_e-1].y,ue.x2-he[_e-1].x,ue.y2-he[_e-1].y,ue.x-he[_e-1].x,ue.y-he[_e-1].y],me[me.length-1].deltas.push(ie);break;case"qct":var ye=he[_e-1].x+2/3*(ue.x1-he[_e-1].x),Le=he[_e-1].y+2/3*(ue.y1-he[_e-1].y),Ge=ue.x+2/3*(ue.x1-ue.x),Be=ue.y+2/3*(ue.y1-ue.y),Te=ue.x,ze=ue.y;ie=[ye-he[_e-1].x,Le-he[_e-1].y,Ge-he[_e-1].x,Be-he[_e-1].y,Te-he[_e-1].x,ze-he[_e-1].y],me[me.length-1].deltas.push(ie);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(ue)}}ce=J?null:H==="stroke"?"stroke":"fill";for(var tt=!1,Re=0;Re<me.length;Re++)if(me[Re].arc)for(var Ue=me[Re].abs,xt=0;xt<Ue.length;xt++){var st=Ue[xt];st.type==="arc"?M.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,J,!tt):Q.call(this,st.x,st.y),tt=!0}else if(me[Re].close===!0)this.pdf.internal.out("h"),tt=!1;else if(me[Re].begin!==!0){var Xt=me[Re].start.x,Jt=me[Re].start.y;re.call(this,me[Re].deltas,Xt,Jt),tt=!0}ce&&D.call(this,ce),J&&z.call(this)}},O=function(H){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return H-ie;case"top":return H+J-ie;case"hanging":return H+J-2*ie;case"middle":return H+J/2-ie;default:return H}},I=function(H){return H+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var H=function(){};return H.colorStops=[],H.addColorStop=function(J,ie){this.colorStops.push([J,ie])},H.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},H.isCanvasGradient=!0,H},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(H,J,ie,ce,me,he,_e,ue,je){for(var ye=se.call(this,ie,ce,me,he),Le=0;Le<ye.length;Le++){var Ge=ye[Le];Le===0&&(je?F.call(this,Ge.x1+H,Ge.y1+J):Q.call(this,Ge.x1+H,Ge.y1+J)),Z.call(this,H,J,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}ue?z.call(this):D.call(this,_e)},D=function(H){switch(H){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(H,J){this.pdf.internal.out(r(H)+" "+n(J)+" m")},q=function(H){var J;switch(H.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var ie=this.pdf.getTextDimensions(H.text),ce=O.call(this,H.y),me=I.call(this,ce)-ie.h,he=this.ctx.transform.applyToPoint(new o(H.x,ce)),_e=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var je,ye,Le,Ge=this.ctx.transform.applyToRectangle(new l(H.x,ce,ie.w,ie.h)),Be=ue.applyToRectangle(new l(H.x,me,ie.w,ie.h)),Te=y.call(this,Be),ze=[],tt=0;tt<Te.length;tt+=1)ze.indexOf(Te[tt])===-1&&ze.push(Te[tt]);if(E(ze),this.autoPaging)for(var Re=ze[0],Ue=ze[ze.length-1],xt=Re;xt<Ue+1;xt++){this.pdf.setPage(xt);var st=xt===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[2],_r=Jt-this.margin[0],lt=this.pdf.internal.pageSize.width-this.margin[1],pt=lt-this.margin[3],er=xt===1?0:Xt+(xt-2)*_r;if(this.ctx.clip_path.length!==0){var Vt=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(je,this.posX+this.margin[3],-1*er+st),T.call(this,"fill",!0),this.path=Vt}var Kt=S([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-er+st+this.ctx.prevPageLastElemOffset)[0];H.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*H.scale),Le=this.lineWidth,this.lineWidth=Le*H.scale);var ur=this.autoPaging!=="text";if(ur||Kt.y+Kt.h<=Jt){if(ur||Kt.y>=st&&Kt.x<=lt){var rt=ur?H.text:this.pdf.splitTextToSize(H.text,H.maxWidth||lt-Kt.x)[0],Lt=S([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-er+st+this.ctx.prevPageLastElemOffset)[0],Dt=ur&&(xt>Re||xt<Ue)&&g.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,_r,null).clip().discardPath()),this.pdf.text(rt,Lt.x,Lt.y,{angle:H.angle,align:J,renderingMode:H.renderingMode}),Dt&&this.pdf.restoreGraphicsState()}}else Kt.y<Jt&&(this.ctx.prevPageLastElemOffset+=Jt-Kt.y);H.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=Le)}else H.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*H.scale),Le=this.lineWidth,this.lineWidth=Le*H.scale),this.pdf.text(H.text,he.x+this.posX,he.y+this.posY,{angle:H.angle,align:J,renderingMode:H.renderingMode,maxWidth:H.maxWidth}),H.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=Le)},Q=function(H,J,ie,ce){ie=ie||0,ce=ce||0,this.pdf.internal.out(r(H+ie)+" "+n(J+ce)+" l")},re=function(H,J,ie){return this.pdf.lines(H,J,ie,null,null)},Z=function(H,J,ie,ce,me,he,_e,ue){this.pdf.internal.out([e(i(ie+H)),e(s(ce+J)),e(i(me+H)),e(s(he+J)),e(i(_e+H)),e(s(ue+J)),"c"].join(" "))},se=function(H,J,ie,ce){for(var me=2*Math.PI,he=Math.PI/2;J>ie;)J-=me;var _e=Math.abs(ie-J);_e<me&&ce&&(_e=me-_e);for(var ue=[],je=ce?-1:1,ye=J;_e>1e-5;){var Le=ye+je*Math.min(_e,he);ue.push(K.call(this,H,ye,Le)),_e-=Math.abs(Le-ye),ye=Le}return ue},K=function(H,J,ie){var ce=(ie-J)/2,me=H*Math.cos(ce),he=H*Math.sin(ce),_e=me,ue=-he,je=_e*_e+ue*ue,ye=je+_e*me+ue*he,Le=4/3*(Math.sqrt(2*je*ye)-ye)/(_e*he-ue*me),Ge=_e-Le*ue,Be=ue+Le*_e,Te=Ge,ze=-Be,tt=ce+J,Re=Math.cos(tt),Ue=Math.sin(tt);return{x1:H*Math.cos(J),y1:H*Math.sin(J),x2:Ge*Re-Be*Ue,y2:Ge*Ue+Be*Re,x3:Te*Re-ze*Ue,y3:Te*Ue+ze*Re,x4:H*Math.cos(ie),y4:H*Math.sin(ie)}},X=function(H){return 180*H/Math.PI},Y=function(H,J,ie,ce,me,he){var _e=H+.5*(ie-H),ue=J+.5*(ce-J),je=me+.5*(ie-me),ye=he+.5*(ce-he),Le=Math.min(H,me,_e,je),Ge=Math.max(H,me,_e,je),Be=Math.min(J,he,ue,ye),Te=Math.max(J,he,ue,ye);return new l(Le,Be,Ge-Le,Te-Be)},oe=function(H,J,ie,ce,me,he,_e,ue){var je,ye,Le,Ge,Be,Te,ze,tt,Re,Ue,xt,st,Xt,Jt,_r=ie-H,lt=ce-J,pt=me-ie,er=he-ce,Vt=_e-me,Kt=ue-he;for(ye=0;ye<41;ye++)Re=(ze=(Le=H+(je=ye/40)*_r)+je*((Be=ie+je*pt)-Le))+je*(Be+je*(me+je*Vt-Be)-ze),Ue=(tt=(Ge=J+je*lt)+je*((Te=ce+je*er)-Ge))+je*(Te+je*(he+je*Kt-Te)-tt),ye==0?(xt=Re,st=Ue,Xt=Re,Jt=Ue):(xt=Math.min(xt,Re),st=Math.min(st,Ue),Xt=Math.max(Xt,Re),Jt=Math.max(Jt,Ue));return new l(Math.round(xt),Math.round(st),Math.round(Xt-xt),Math.round(Jt-st))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var H,J,ie=(H=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:H,lineDashOffset:J}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(wn.API),function(t){var e=function(o){var l,c,u,d,h,f,m,x,g,y;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(h=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(f=(h=((h=((h=((h=(h-(y=h%85))/85)-(g=h%85))/85)-(x=h%85))/85)-(m=h%85))/85)%85,c.push(f+33,m+33,x+33,g+33,y+33)):c.push(122);return function(w,S){for(var E=S;E>0;E--)w.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,h,f=String,m="length",x=255,g="charCodeAt",y="slice",w="replace";for(o[y](-2),o=o[y](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),u=[],d=0,h=(o+=l="uuuuu"[y](o[m]%5||5))[m];h>d;d+=5)c=52200625*(o[g](d)-33)+614125*(o[g](d+1)-33)+7225*(o[g](d+2)-33)+85*(o[g](d+3)-33)+(o[g](d+4)-33),u.push(x&c>>24,x&c>>16,x&c>>8,x&c);return function(S,E){for(var j=E;j>0;j--)S.pop()}(u,l[m]),f.fromCharCode.apply(f,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=RW(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(wn.API),function(t){t.loadFile=function(e,r,n){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var h=new XMLHttpRequest,f=0,m=function(x){var g=x.length,y=[],w=String.fromCharCode;for(f=0;f<g;f+=1)y.push(w(255&x.charCodeAt(f)));return y.join("")};if(h.open("GET",c,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(m(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return m(h.responseText)}(i,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(wn.API),function(t){function e(){return(ti.html2canvas?Promise.resolve(ti.html2canvas):AE(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(ti.DOMPurify?Promise.resolve(ti.DOMPurify):AE(()=>import("./purify.es-sOfw8HaZ.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Us(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var x=d[m],g=x.src.find(function(y){return y.format==="truetype"});g&&u.addFont(g.url,x.ref.name,x.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,u.context2d.save(!0),c(this.prop.container,f)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||wn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,h){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(f){return u.updateProgress(null,d),f}).then(d,h).then(function(f){return u.updateProgress(1),f})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),f=u.call(h,l,c);return o.convert(f,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,wn.getPageSize=function(l,c,u){if(Us(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var h,f=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var x,g=0,y=0;if(m.hasOwnProperty(f))g=m[f][1]/h,y=m[f][0]/h;else try{g=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",y>g&&(x=y,y=g,g=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>y&&(x=y,y=g,g=x)}return{width:y,height:g,unit:c,k:h,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(ZU):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(wn.API),wn.API.addJS=function(t){return mhe=t,this.internal.events.subscribe("postPutResources",function(){kD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kD+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fhe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mhe+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){kD!==void 0&&fhe!==void 0&&this.internal.out("/Names <</JavaScript "+kD+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var h=r.internal.newObject();d.push(h);var f=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var o={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(wn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(h){for(var f,m=256*h.charCodeAt(4)+h.charCodeAt(5),x=h.length,g={width:0,height:0,numcomponents:1},y=4;y<x;y+=2){if(y+=m,e.indexOf(h.charCodeAt(y+1))!==-1){f=256*h.charCodeAt(y+5)+h.charCodeAt(y+6),g={width:256*h.charCodeAt(y+7)+h.charCodeAt(y+8),height:f,numcomponents:h.charCodeAt(y+9)};break}m=256*h.charCodeAt(y+2)+h.charCodeAt(y+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:i}}return d}}(wn.API),wn.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=uMt(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;i=u&&c===1?function(M){for(var D=M.width,z=M.height,F=M.data,q=M.palette,Q=M.depth,re=!1,Z=[],se=[],K=void 0,X=!1,Y=0,oe=0;oe<q.length;oe++){var xe=lde(q[oe],4),H=xe[0],J=xe[1],ie=xe[2],ce=xe[3];Z.push(H,J,ie),ce!=null&&(ce===0?(Y++,se.length<1&&se.push(oe)):ce<255&&(X=!0))}if(X||Y>1){re=!0,se=void 0;var me=D*z;K=new Uint8Array(me);for(var he=new DataView(F.buffer),_e=0;_e<me;_e++){var ue=JU(he,_e,Q),je=lde(q[ue],4)[3];K[_e]=je}}else Y===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:re?8:void 0,colorBytes:F,alphaBytes:K,needSMask:re,palette:Z,mask:se}}(s):c===2||c===4?function(M){for(var D=M.data,z=M.width,F=M.height,q=M.channels,Q=M.depth,re=q===2?"DeviceGray":"DeviceRGB",Z=q-1,se=z*F,K=Z,X=se*K,Y=1*se,oe=Math.ceil(X*Q/8),xe=Math.ceil(Y*Q/8),H=new Uint8Array(oe),J=new Uint8Array(xe),ie=new DataView(D.buffer),ce=new DataView(H.buffer),me=new DataView(J.buffer),he=!1,_e=0;_e<se;_e++){for(var ue=_e*q,je=0;je<K;je++)Nhe(ce,JU(ie,ue+je,Q),_e*K+je,Q);var ye=JU(ie,ue+K,Q);ye<(1<<Q)-1&&(he=!0),Nhe(me,ye,1*_e,Q)}return{colorSpace:re,colorsPerPixel:Z,sMaskBitsPerComponent:he?Q:void 0,colorBytes:H,alphaBytes:J,needSMask:he}}(s):function(M){var D=M.data,z=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:z,colorsPerPixel:z==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?function(F){for(var q=F.length,Q=new Uint8Array(2*q),re=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),Z=0;Z<q;Z++)re.setUint16(2*Z,F[Z],!1);return Q}(D):D,needSMask:!1}}(s);var h,f,m,x=i,g=x.colorSpace,y=x.colorsPerPixel,w=x.sMaskBitsPerComponent,S=x.colorBytes,E=x.alphaBytes,j=x.needSMask,T=x.palette,O=x.mask,I=null;return n!==wn.API.image_compression.NONE&&typeof RW=="function"?(I=function(M){var D;switch(M){case wn.API.image_compression.FAST:D=11;break;case wn.API.image_compression.MEDIUM:D=13;break;case wn.API.image_compression.SLOW:D=14;break;default:D=12}return D}(n),h=this.decode.FLATE_DECODE,f="/Predictor ".concat(I," /Colors ").concat(y," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=vhe(S,Math.ceil(o*y*d/8),y,d,n),j&&(m=vhe(E,Math.ceil(o*w/8),1,w,n))):(h=void 0,f=void 0,t=S,j&&(m=E)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:t,index:e,filter:h,decodeParameters:f,transparency:O,palette:T,sMask:m,predictor:I,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:w,colorSpace:g}}},function(t){t.processGIF89A=function(e,r,n,i){var s=new kMt(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new ez(100).encode(u,100);return t.processJPEG.call(this,d,r,n,i)},t.processGIF87A=t.processGIF89A}(wn.API),sp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){oa.log("bit decode error:"+r)}},sp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},sp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},sp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},sp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},sp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},sp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},sp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},sp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var s=new sp(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new ez(100).encode(c,100);return t.processJPEG.call(this,u,r,n,i)}}(wn.API),Ehe.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var s=new Ehe(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new ez(100).encode(c,100);return t.processJPEG.call(this,u,r,n,i)}}(wn.API),wn.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=n[u],h=n[u+1],f=n[u+2],m=n[u+3];s[l++]=d,s[l++]=h,s[l++]=f,o[c++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},lS=wn.API,OD=lS.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,f=0,m=t.length,x=0,g=l[0]||c,y=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(f=h&&Us(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/d:0,y.push((l[n]||g)/c+f)),x=n;return y},phe=lS.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return lS.processArabic&&(t=lS.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:OD.apply(this,arguments).reduce(function(s,o){return s+o},0)},ghe=function(t,e,r,n){for(var i=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;i.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(i.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&i.push(t.slice(c,s)),i},xhe=function(t,e,r){r||(r={});var n,i,s,o,l,c,u,d=[],h=[d],f=r.textIndent||0,m=0,x=0,g=t.split(" "),y=OD.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var w=Array(c).join(" "),S=[];g.map(function(j){(j=j.split(/\s*\n/)).length>1?S=S.concat(j.map(function(T,O){return(O&&T.length?`
`:"")+T})):S.push(j[0])}),g=S,c=phe.apply(this,[w,r])}for(s=0,o=g.length;s<o;s++){var E=0;if(n=g[s],c&&n[0]==`
`&&(n=n.substr(1),E=1),f+m+(x=(i=OD.apply(this,[n,r])).reduce(function(j,T){return j+T},0))>e||E){if(x>e){for(l=ghe.apply(this,[n,i,e-(f+m),e]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);x=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,T){return j+T},0)}else d=[n];h.push(d),f=x+c,m=y}else d.push(n),f+=m+x,m=y}return u=c?function(j,T){return(T?w:"")+j.join(" ")}:function(j){return j.join(" ")},h.map(u)},lS.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle),f="Unicode";return h.metadata[f]?{widths:h.metadata[f].widths||{0:1},kerning:h.metadata[f].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(xhe.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var o=function(f){return"0x"+parseInt(f,10).toString(16)},l=t.__fontmetrics__.compress=function(f){var m,x,g,y,w=["{"];for(var S in f){if(m=f[S],isNaN(parseInt(S,10))?x="'"+S+"'":(S=parseInt(S,10),x=(x=o(S).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof m=="number")m<0?(g=o(m).slice(3),y="-"):(g=o(m).slice(2),y=""),g=y+g.slice(0,-1)+i[g.slice(-1)];else{if(Us(m)!=="object")throw new Error("Don't know what to do with value type "+Us(m)+".");g=l(m)}w.push(x+g)}return w.push("}"),w.join("")},c=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,x,g,y,w={},S=1,E=w,j=[],T="",O="",I=f.length-1,M=1;M<I;M+=1)(y=f[M])=="'"?m?(g=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(j.push([E,g]),E={},g=void 0):y=="}"?((x=j.pop())[0][x[1]]=E,g=void 0,E=x[0]):y=="-"?S=-1:g===void 0?n.hasOwnProperty(y)?(T+=n[y],g=parseInt(T,16)*S,S=1,T=""):T+=y:n.hasOwnProperty(y)?(O+=n[y],E[g]=parseInt(O,16)*S,S=1,g=void 0,O=""):O+=y;return w},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var m=f.font,x=h.Unicode[m.postScriptName];x&&(m.metadata.Unicode={},m.metadata.Unicode.widths=x.widths,m.metadata.Unicode.kerning=x.kerning);var g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode.encoding=g,m.encoding=g.codePages[0])}])}(wn.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(A6(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(wn),wn.API.addSvgAsImage=function(t,e,r,n,i,s,o,l){if(isNaN(e)||isNaN(r))throw oa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw oa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(ti.canvg?Promise.resolve(ti.canvg):AE(()=>import("./index.es-Bl2bzzr-.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(d)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,r,n,i,o,l)})},wn.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},wn.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,h=0;function f(x,g){var y,w=!1;for(y=0;y<x.length;y+=1)x[y]===g&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=l.length;for(h=0;h<m;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Us(t)==="object"){for(i in t)if(s=t[i],f(l,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&f(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,g=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?g.push("/"+x+" /"+r[x].value):g.push("/"+x+" "+r[x].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(wn.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,f=s.length;h<f;++h){if(l=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,h,f;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(s).sort(function(m,x){return m-x})).length;h<f;h++)o=l[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",x=0;x<f.length;x++)m+=String.fromCharCode(f[x]);var g=u();d({data:m,addLength1:!0,objectId:g}),c("endobj");var y=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var w=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+xS(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+xS(l.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+xS(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var x=u();d({data:f,addLength1:!0,objectId:x}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+xS(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+xS(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},h=s.mutex||{},f=h.pdfEscape,m=h.activeFontKey,x=h.fonts,g=m,y="",w=0,S="",E=x[g].encoding;if(x[g].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:h};for(S=l,g=m,Array.isArray(l)&&(S=l[0]),w=0;w<S.length;w+=1)x[g].metadata.hasOwnProperty("cmap")&&(o=x[g].metadata.cmap.unicode.codeMap[S[w].charCodeAt(0)]),o||S[w].charCodeAt(0)<256&&x[g].metadata.hasOwnProperty("Unicode")?y+=S[w]:y+="";var j="";return parseInt(g.slice(1))<14||E==="WinAnsiEncoding"?j=f(y,g).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(j=r(y,x[g])),h.isHex=!0,{text:j,x:c,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:o})).text}])}(wn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(wn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,o,l,c,u,d,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,E=0;this.__bidiEngine__={};var j=function(F){var q=F.charCodeAt(),Q=q>>8,re=g[Q];return re!==void 0?h[256*re+(255&q)]:Q===252||Q===253?"AL":w.test(Q)?"L":Q===8?"R":"N"},T=function(F){for(var q,Q=0;Q<F.length;Q++){if((q=j(F.charAt(Q)))==="L")return!1;if(q==="R")return!0}return!1},O=function(F,q,Q,re){var Z,se,K,X,Y=q[re];switch(Y){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(Y="AN");break;case"AL":S=!0,Y="R";break;case"WS":case"BN":Y="N";break;case"CS":re<1||re+1>=q.length||(Z=Q[re-1])!=="EN"&&Z!=="AN"||(se=q[re+1])!=="EN"&&se!=="AN"?Y="N":S&&(se="AN"),Y=se===Z?se:"N";break;case"ES":Y=(Z=re>0?Q[re-1]:"B")==="EN"&&re+1<q.length&&q[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&Q[re-1]==="EN"){Y="EN";break}if(S){Y="N";break}for(K=re+1,X=q.length;K<X&&q[K]==="ET";)K++;Y=K<X&&q[K]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(X=q.length,K=re+1;K<X&&q[K]==="NSM";)K++;if(K<X){var oe=F[re],xe=oe>=1425&&oe<=2303||oe===64286;if(Z=q[K],xe&&(Z==="R"||Z==="AL")){Y="R";break}}}Y=re<1||(Z=q[re-1])==="B"?"N":Q[re-1];break;case"B":S=!1,i=!0,Y=E;break;case"S":s=!0,Y="N"}return Y},I=function(F,q,Q){var re=F.split("");return Q&&M(re,Q,{hiLevel:E}),re.reverse(),q&&q.reverse(),re.join("")},M=function(F,q,Q){var re,Z,se,K,X,Y=-1,oe=F.length,xe=0,H=[],J=E?m:f,ie=[];for(S=!1,i=!1,s=!1,Z=0;Z<oe;Z++)ie[Z]=j(F[Z]);for(se=0;se<oe;se++){if(X=xe,H[se]=O(F,ie,H,se),re=240&(xe=J[X][x[H[se]]]),xe&=15,q[se]=K=J[xe][5],re>0)if(re===16){for(Z=Y;Z<se;Z++)q[Z]=1;Y=-1}else Y=-1;if(J[xe][6])Y===-1&&(Y=se);else if(Y>-1){for(Z=Y;Z<se;Z++)q[Z]=K;Y=-1}ie[se]==="B"&&(q[se]=0),Q.hiLevel|=K}s&&function(ce,me,he){for(var _e=0;_e<he;_e++)if(ce[_e]==="S"){me[_e]=E;for(var ue=_e-1;ue>=0&&ce[ue]==="WS";ue--)me[ue]=E}}(ie,q,oe)},D=function(F,q,Q,re,Z){if(!(Z.hiLevel<F)){if(F===1&&E===1&&!i)return q.reverse(),void(Q&&Q.reverse());for(var se,K,X,Y,oe=q.length,xe=0;xe<oe;){if(re[xe]>=F){for(X=xe+1;X<oe&&re[X]>=F;)X++;for(Y=xe,K=X-1;Y<K;Y++,K--)se=q[Y],q[Y]=q[K],q[K]=se,Q&&(se=Q[Y],Q[Y]=Q[K],Q[K]=se);xe=X}xe++}}},z=function(F,q,Q){var re=F.split(""),Z={hiLevel:E};return Q||(Q=[]),M(re,Q,Z),function(se,K,X){if(X.hiLevel!==0&&d)for(var Y,oe=0;oe<se.length;oe++)K[oe]===1&&(Y=y.indexOf(se[oe]))>=0&&(se[oe]=y[Y+1])}(re,Q,Z),D(2,re,q,Q,Z),D(1,re,q,Q,Z),re.join("")};return this.__bidiEngine__.doBidiReorder=function(F,q,Q){if(function(Z,se){if(se)for(var K=0;K<Z.length;K++)se[K]=K;l===void 0&&(l=T(Z)),u===void 0&&(u=T(Z))}(F,q),o||!c||u)if(o&&c&&l^u)E=l?1:0,F=I(F,q,Q);else if(!o&&c&&u)E=l?1:0,F=z(F,q,Q),F=I(F,q);else if(!o||l||c||u){if(o&&!c&&l^u)F=I(F,q),l?(E=0,F=z(F,q,Q)):(E=1,F=z(F,q,Q),F=I(F,q));else if(o&&l&&!c&&u)E=1,F=z(F,q,Q),F=I(F,q);else if(!o&&!c&&l^u){var re=d;l?(E=1,F=z(F,q,Q),E=0,d=!1,F=z(F,q,Q),d=re):(E=0,F=z(F,q,Q),F=I(F,q),E=1,d=!1,F=z(F,q,Q),d=re,F=I(F,q))}}else E=0,F=z(F,q,Q);else E=l?1:0,F=z(F,q,Q);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,c=F.isOutputVisual,l=F.isInputRtl,u=F.isOutputRtl,d=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(wn),wn.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new kb(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new WMt(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new OMt(this.contents),this.head=new RMt(this),this.name=new BMt(this),this.cmap=new o5e(this),this.toUnicode={},this.hhea=new DMt(this),this.maxp=new $Mt(this),this.hmtx=new UMt(this),this.post=new LMt(this),this.os2=new MMt(this),this.loca=new HMt(this),this.glyf=new zMt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var m0,kb=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),OMt=function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,o,l,c,u,d,h,f,m,x,g;for(g in m=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(m)/c),o=Math.floor(h/c),d=16*m-h,(i=new kb).writeInt(this.scalarType),i.writeShort(m),i.writeShort(h),i.writeShort(o),i.writeShort(d),s=16*m,u=i.pos+s,l=null,x=[],r)for(f=r[g],i.writeString(g),i.writeInt(t(f)),i.writeInt(u),i.writeInt(f.length),x=x.concat(f),g==="head"&&(l=u),u+=f.length;u%4;)x.push(0),u++;return i.write(x),n=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,o;for(r=l5e.call(r);r.length%4;)r.push(0);for(s=new kb(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),IMt={}.hasOwnProperty,Vg=function(t,e){for(var r in e)IMt.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};m0=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var RMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new kb).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),jhe=function(){function t(e,r){var n,i,s,o,l,c,u,d,h,f,m,x,g,y,w,S,E;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),f=m/2,e.pos+=6,s=function(){var j,T;for(T=[],c=j=0;0<=f?j<f:j>f;c=0<=f?++j:--j)T.push(e.readUInt16());return T}(),e.pos+=2,g=function(){var j,T;for(T=[],c=j=0;0<=f?j<f:j>f;c=0<=f?++j:--j)T.push(e.readUInt16());return T}(),u=function(){var j,T;for(T=[],c=j=0;0<=f?j<f:j>f;c=0<=f?++j:--j)T.push(e.readUInt16());return T}(),d=function(){var j,T;for(T=[],c=j=0;0<=f?j<f:j>f;c=0<=f?++j:--j)T.push(e.readUInt16());return T}(),i=(this.length-e.pos+this.offset)/2,l=function(){var j,T;for(T=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)T.push(e.readUInt16());return T}(),c=w=0,E=s.length;w<E;c=++w)for(y=s[c],n=S=x=g[c];x<=y?S<=y:S>=y;n=x<=y?++S:--S)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-x)-(f-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=h}return t.encode=function(e,r){var n,i,s,o,l,c,u,d,h,f,m,x,g,y,w,S,E,j,T,O,I,M,D,z,F,q,Q,re,Z,se,K,X,Y,oe,xe,H,J,ie,ce,me,he,_e,ue,je,ye,Le;switch(re=new kb,o=Object.keys(e).sort(function(Ge,Be){return Ge-Be}),r){case"macroman":for(g=0,y=function(){var Ge=[];for(x=0;x<256;++x)Ge.push(0);return Ge}(),S={0:0},s={},Z=0,Y=o.length;Z<Y;Z++)S[ue=e[i=o[Z]]]==null&&(S[ue]=++g),s[i]={old:e[i],new:S[e[i]]},y[i]=S[e[i]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(y),{charMap:s,subtable:re.data,maxGlyphID:g+1};case"unicode":for(q=[],h=[],E=0,S={},n={},w=u=null,se=0,oe=o.length;se<oe;se++)S[T=e[i=o[se]]]==null&&(S[T]=++E),n[i]={old:T,new:S[T]},l=S[T]-i,w!=null&&l===u||(w&&h.push(w),q.push(i),u=l),w=i;for(w&&h.push(w),h.push(65535),q.push(65535),z=2*(D=q.length),M=2*Math.pow(Math.log(D)/Math.LN2,2),f=Math.log(M/2)/Math.LN2,I=2*D-M,c=[],O=[],m=[],x=K=0,xe=q.length;K<xe;x=++K){if(F=q[x],d=h[x],F===65535){c.push(0),O.push(0);break}if(F-(Q=n[F].new)>=32768)for(c.push(0),O.push(2*(m.length+D-x)),i=X=F;F<=d?X<=d:X>=d;i=F<=d?++X:--X)m.push(n[i].new);else c.push(Q-F),O.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*D+2*m.length),re.writeUInt16(0),re.writeUInt16(z),re.writeUInt16(M),re.writeUInt16(f),re.writeUInt16(I),he=0,H=h.length;he<H;he++)i=h[he],re.writeUInt16(i);for(re.writeUInt16(0),_e=0,J=q.length;_e<J;_e++)i=q[_e],re.writeUInt16(i);for(je=0,ie=c.length;je<ie;je++)l=c[je],re.writeUInt16(l);for(ye=0,ce=O.length;ye<ce;ye++)j=O[ye],re.writeUInt16(j);for(Le=0,me=m.length;Le<me;Le++)g=m[Le],re.writeUInt16(g);return{charMap:n,subtable:re.data,maxGlyphID:E+1}}},t}(),o5e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new jhe(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=jhe.encode(e,r),(i=new kb).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),DMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),MMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),LMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),FMt=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},BMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,o,l,c,u,d,h,f;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,h=n.length;d<h;s=++d)i=n[s],e.pos=i.offset,u=e.readString(i.length),o=new FMt(u,i),c[f=i.nameID]==null&&(c[f]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),$Mt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),UMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)s=h[u],f.push(s.advance);return f}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),l5e=[].slice,zMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,o,l,c,u,d,h;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new kb(r.read(i))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new qMt(l,u,h,c,d):new VMt(l,o,u,h,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)i=e[r[l]],s.push(o.length),i&&(o=o.concat(i.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),VMt=function(){function t(e,r,n,i,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),qMt=function(){function t(e,r,n,i,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new kb(l5e.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),HMt=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Vg(t,m0),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<n.length;++o)if(n[o]=i,s<r.length&&r[s]==o){++s,n[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),WMt=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,o,l,c,u,d,h,f,m,x,g,y,w;for(i in n=o5e.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},w=n.charMap)m[(c=w[i]).old]=c.new;for(x in f=n.maxGlyphID,o)x in m||(m[x]=f++);return d=function(S){var E,j;for(E in j={},S)j[S[E]]=E;return j}(m),h=Object.keys(d).sort(function(S,E){return S-E}),g=function(){var S,E,j;for(j=[],S=0,E=h.length;S<E;S++)l=h[S],j.push(d[l]);return j}(),s=this.font.glyf.encode(o,g,m),u=this.font.loca.encode(s.offsets,g),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t}();wn.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)o=r[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();const GMt=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:hn,AcroFormButton:Wl,AcroFormCheckBox:X4,AcroFormChoiceField:j_,AcroFormComboBox:C_,AcroFormEditBox:G4,AcroFormListBox:A_,AcroFormPasswordField:Y4,AcroFormPushButton:K4,AcroFormRadioButton:T_,AcroFormTextField:mb,GState:XP,ShadingPattern:C1,TilingPattern:Xw,default:wn,jsPDF:wn},Symbol.toStringTag,{value:"Module"})),KMt=()=>{const t=nn(),{toast:e}=Qi(),[r,n]=C.useState(!1),[i,s]=C.useState(""),[o,l]=C.useState(!0);C.useEffect(()=>{c()},[]);const c=async()=>{try{l(!0);const g=await(await fetch("/RELATORIO_FUNCIONAL_CICLIK.md")).text();s(g)}catch(x){console.error("Erro ao carregar relatrio:",x),e({title:"Erro ao carregar relatrio",description:"No foi possvel carregar o contedo do relatrio.",variant:"destructive"})}finally{l(!1)}},u=()=>{const x=new Blob([i],{type:"text/markdown"}),g=URL.createObjectURL(x),y=document.createElement("a");y.href=g,y.download="RELATORIO_FUNCIONAL_CICLIK.md",document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g),e({title:"Download iniciado",description:"O arquivo Markdown est sendo baixado."})},d=async()=>{n(!0);try{const x=new wn({orientation:"portrait",unit:"mm",format:"a4"}),g=x.internal.pageSize.getWidth(),y=x.internal.pageSize.getHeight(),w=15,S=g-2*w;let E=w;x.setFontSize(18),x.setFont("helvetica","bold"),x.text("Relatrio Funcional Completo - Ciclik",w,E),E+=10,x.setFontSize(10),x.setFont("helvetica","normal"),x.text(`Gerado em: ${new Date().toLocaleDateString("pt-BR")}`,w,E),E+=10;const j=i.split(`
`);for(let T=0;T<j.length;T++){const O=j[T];if(E>y-w&&(x.addPage(),E=w),O.startsWith("# ")){E+=5,x.setFontSize(16),x.setFont("helvetica","bold");const I=O.replace("# ","");x.text(I,w,E),E+=8}else if(O.startsWith("## ")){E+=4,x.setFontSize(14),x.setFont("helvetica","bold");const I=O.replace("## ","");x.text(I,w,E),E+=7}else if(O.startsWith("### ")){E+=3,x.setFontSize(12),x.setFont("helvetica","bold");const I=O.replace("### ","");x.text(I,w,E),E+=6}else if(O.startsWith("#### ")){x.setFontSize(11),x.setFont("helvetica","bold");const I=O.replace("#### ","");x.text(I,w,E),E+=5}else if(O.startsWith("- ")||O.startsWith("* ")){x.setFontSize(10),x.setFont("helvetica","normal");const I=" "+O.substring(2),M=x.splitTextToSize(I,S-5);x.text(M,w+5,E),E+=M.length*4.5}else if(O.startsWith("```")){for(x.setFontSize(9),x.setFont("courier","normal"),T++;T<j.length&&!j[T].startsWith("```");)E>y-w&&(x.addPage(),E=w),x.text(j[T],w+3,E),E+=4,T++;x.setFont("helvetica","normal")}else if(O.trim()!==""){x.setFontSize(10),x.setFont("helvetica","normal");const I=x.splitTextToSize(O,S);E+I.length*5>y-w&&(x.addPage(),E=w),x.text(I,w,E),E+=I.length*5}else E+=4}x.save("Relatorio_Funcional_Ciclik.pdf"),e({title:"PDF gerado com sucesso!",description:"O relatrio foi baixado em formato PDF."})}catch(x){console.error("Erro ao gerar PDF:",x),e({title:"Erro ao gerar PDF",description:"Ocorreu um erro durante a gerao do PDF.",variant:"destructive"})}finally{n(!1)}},h=()=>o?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsx("div",{className:"prose prose-sm max-w-none",children:i.split(`
`).map((x,g)=>{if(x.startsWith("# "))return a.jsx("h1",{className:"text-3xl font-bold mt-8 mb-4 text-foreground",children:x.replace("# ","")},g);if(x.startsWith("## "))return a.jsx("h2",{className:"text-2xl font-bold mt-6 mb-3 text-foreground",children:x.replace("## ","")},g);if(x.startsWith("### "))return a.jsx("h3",{className:"text-xl font-semibold mt-5 mb-2 text-foreground",children:x.replace("### ","")},g);if(x.startsWith("#### "))return a.jsx("h4",{className:"text-lg font-semibold mt-4 mb-2 text-foreground",children:x.replace("#### ","")},g);if(x.startsWith("- ")||x.startsWith("* "))return a.jsx("li",{className:"ml-6 text-sm text-muted-foreground",children:x.substring(2)},g);if(x.startsWith("```"))return null;if(x.trim()==="---")return a.jsx("hr",{className:"my-6 border-border"},g);if(x.includes("**")){const y=x.split("**");return a.jsx("p",{className:"text-sm text-muted-foreground my-1",children:y.map((w,S)=>S%2===0?w:a.jsx("strong",{className:"font-semibold text-foreground",children:w},S))},g)}return x.trim()===""?a.jsx("div",{className:"h-2"},g):a.jsx("p",{className:"text-sm text-muted-foreground my-1",children:x},g)})}),m=i?(()=>{const x=[];return i.split(`
`).forEach((y,w)=>{y.startsWith("# ")?x.push({title:y.replace("# ",""),level:1,index:w}):y.startsWith("## ")?x.push({title:y.replace("## ",""),level:2,index:w}):y.startsWith("### ")&&x.push({title:y.replace("### ",""),level:3,index:w})}),x})():[];return a.jsx($v,{children:a.jsx("div",{className:"min-h-screen bg-background p-4 md:p-8",children:a.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"rounded-full bg-warning/10 p-2",children:a.jsx(Ql,{className:"h-6 w-6 text-warning"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Documentao do Sistema"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Relatrio Funcional Completo - Ciclik"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Oe,{variant:"outline",onClick:u,className:"gap-2",disabled:o,children:[a.jsx(yRe,{className:"h-4 w-4"}),"Baixar MD"]}),a.jsxs(Oe,{onClick:d,disabled:r||o,className:"gap-2",children:[r?a.jsx(jn,{className:"h-4 w-4 animate-spin"}):a.jsx(ou,{className:"h-4 w-4"}),"Baixar PDF"]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Relatrio Funcional Completo"}),a.jsx(gr,{children:"Documentao tcnica completa sobre todas as funcionalidades, fluxos, modelos de dados e impactos ambientais do aplicativo Ciclik"})]}),a.jsx(ht,{children:a.jsxs(yc,{defaultValue:"content",className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-2",children:[a.jsx(ri,{value:"content",children:"Contedo Completo"}),a.jsx(ri,{value:"toc",children:"ndice"})]}),a.jsx(Ti,{value:"content",className:"mt-6",children:a.jsx("div",{className:"max-h-[calc(100vh-300px)] overflow-y-auto pr-4 space-y-2",children:h()})}),a.jsx(Ti,{value:"toc",className:"mt-6",children:a.jsx("div",{className:"max-h-[calc(100vh-300px)] overflow-y-auto pr-4",children:o?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsx("div",{className:"space-y-2",children:m.map((x,g)=>a.jsx("div",{className:`py-2 px-4 hover:bg-muted rounded-lg cursor-pointer transition-colors ${x.level===1?"font-bold text-foreground":x.level===2?"ml-4 font-semibold text-foreground":"ml-8 text-muted-foreground"}`,children:a.jsx("span",{className:"text-sm",children:x.title})},g))})})})]})})]})]})})})};async function c5e(t){try{const{data:e,error:r}=await Ee.from("termos_uso").select("*").eq("id",t).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Erro ao buscar termo por ID:",r),new Error("No foi possvel carregar o termo")}return e}catch(e){throw console.error("Erro em buscarTermoPorId:",e),e}}async function XMt(t={},e=1,r=10){try{const{data:{user:n}}=await Ee.auth.getUser();if(!n)throw new Error("Usurio no autenticado");const{data:i,error:s}=await Ee.from("user_roles").select("role").eq("user_id",n.id).single();if(s||i.role!=="admin")throw new Error("Apenas administradores podem listar todos os termos");let o=Ee.from("termos_uso").select("*",{count:"exact"});t.tipo&&(o=o.eq("tipo",t.tipo)),t.ativo!==void 0&&(o=o.eq("ativo",t.ativo)),t.versao&&(o=o.eq("versao",t.versao)),t.busca&&(o=o.or(`titulo.ilike.%${t.busca}%,resumo.ilike.%${t.busca}%`));const l=(e-1)*r;o=o.order("criado_em",{ascending:!1}).range(l,l+r-1);const{data:c,error:u,count:d}=await o;if(u)throw console.error("Erro ao listar termos:",u),new Error("No foi possvel carregar a lista de termos");return{dados:c||[],total:d||0,pagina:e,porPagina:r,totalPaginas:Math.ceil((d||0)/r)}}catch(n){throw console.error("Erro em listarTodosTermos:",n),n}}async function YMt(t){try{const{data:{user:e}}=await Ee.auth.getUser();if(!e)throw new Error("Usurio no autenticado");const{data:r,error:n}=await Ee.from("user_roles").select("role").eq("user_id",e.id).single();if(n||r.role!=="admin")throw new Error("Apenas administradores podem criar termos");if(!t.titulo||!t.tipo||!t.versao||!t.pdf_url)throw new Error("Campos obrigatrios faltando: ttulo, tipo, verso e PDF");if(!t.roles_aplicaveis||t.roles_aplicaveis.length===0)throw new Error("Pelo menos um role deve ser selecionado");const{data:i,error:s}=await Ee.from("termos_uso").insert({tipo:t.tipo,versao:t.versao,titulo:t.titulo,resumo:t.descricao,conteudo_html:t.conteudo_html,pdf_url:t.pdf_url,pdf_path:`v${t.versao}/${t.tipo.replace(/_/g,"-")}-v${t.versao}.pdf`,roles_aplicaveis:t.roles_aplicaveis,obrigatorio:t.obrigatorio??!0,ativo:t.ativo??!0}).select().single();if(s)throw console.error("Erro ao criar termo:",s),s.code==="23505"?new Error("J existe um termo com essa combinao de tipo e verso"):new Error("No foi possvel criar o termo");return i}catch(e){throw console.error("Erro em criarTermo:",e),e}}async function ZMt(t,e){try{const{data:{user:r}}=await Ee.auth.getUser();if(!r)throw new Error("Usurio no autenticado");const{data:n,error:i}=await Ee.from("user_roles").select("role").eq("user_id",r.id).single();if(i||n.role!=="admin")throw new Error("Apenas administradores podem atualizar termos");const{data:s,error:o}=await Ee.from("termos_uso").update({titulo:e.titulo,resumo:e.descricao,conteudo_html:e.conteudo_html,pdf_url:e.pdf_url,obrigatorio:e.obrigatorio,ativo:e.ativo}).eq("id",t).select().single();if(o)throw console.error("Erro ao atualizar termo:",o),o.code==="PGRST116"?new Error("Termo no encontrado"):new Error("No foi possvel atualizar o termo");return s}catch(r){throw console.error("Erro em atualizarTermo:",r),r}}async function Ahe(t,e){try{const{data:{user:r}}=await Ee.auth.getUser();if(!r)throw new Error("Usurio no autenticado");const{data:n,error:i}=await Ee.from("user_roles").select("role").eq("user_id",r.id).single();if(i||n.role!=="admin")throw new Error("Apenas administradores podem alterar status de termos");const{data:s,error:o}=await Ee.from("termos_uso").update({ativo:e}).eq("id",t).select().single();if(o)throw console.error("Erro ao alterar status do termo:",o),o.code==="PGRST116"?new Error("Termo no encontrado"):new Error("No foi possvel alterar o status do termo");return s}catch(r){throw console.error("Erro em alterarStatusTermo:",r),r}}async function QMt(t){try{const{data:{user:e}}=await Ee.auth.getUser();if(!e)throw new Error("Usurio no autenticado");const{data:r,error:n}=await Ee.from("user_roles").select("role").eq("user_id",e.id).single();if(n||r.role!=="admin")throw new Error("Apenas administradores podem deletar termos");const{data:i,error:s}=await Ee.from("aceites_termos").select("id").eq("termo_id",t).limit(1);if(s)throw console.error("Erro ao verificar aceites:",s),new Error("No foi possvel verificar aceites do termo");if(i&&i.length>0)throw new Error("No  possvel deletar um termo que j possui aceites");const{error:o}=await Ee.from("termos_uso").delete().eq("id",t);if(o)throw console.error("Erro ao deletar termo:",o),o.code==="PGRST116"?new Error("Termo no encontrado"):new Error("No foi possvel deletar o termo")}catch(e){throw console.error("Erro em deletarTermo:",e),e}}async function JMt(t){try{const{data:e,error:r}=await Ee.from("termos_uso").select("*").eq("tipo",t).order("versao",{ascending:!1});if(r)throw console.error("Erro ao buscar histrico:",r),new Error("No foi possvel carregar o histrico de verses");return e||[]}catch(e){throw console.error("Erro em buscarHistoricoVersoes:",e),e}}function e8t(t){const e=[],r=t.size/1048576;return t.type!=="application/pdf"&&e.push("O arquivo deve ser um PDF"),r>i$.TAMANHO_MAX_PDF_MB&&e.push(`O arquivo deve ter no mximo ${i$.TAMANHO_MAX_PDF_MB}MB`),i$.PDF_NAME_PATTERN.test(t.name)||e.push("Nome do arquivo invlido. Use apenas letras, nmeros, hfens e underscores"),{valido:e.length===0,erros:e,tamanho_mb:r}}function t8t(t,e){const r=e.replace(/[^0-9.]/g,""),n=t.replace(/_/g,"-");return`v${r}/${n}-v${r}.pdf`}async function u5e(t,e,r){try{const{data:{user:n}}=await Ee.auth.getUser();if(!n)return{success:!1,error:"Usurio no autenticado"};const{data:i,error:s}=await Ee.from("user_roles").select("role").eq("user_id",n.id).single();if(s||i.role!=="admin")return{success:!1,error:"Apenas administradores podem fazer upload de PDFs"};const o=e8t(t);if(!o.valido)return{success:!1,error:o.erros.join(", ")};const l=t8t(e,r),{error:c}=await Ee.storage.from("termos-uso").upload(l,t,{cacheControl:"3600",upsert:!0,contentType:"application/pdf"});if(c)return console.error("Erro no upload:",c),c.message.includes("Bucket not found")?{success:!1,error:"Bucket de storage no encontrado. Configure o storage primeiro."}:{success:!1,error:`Erro ao fazer upload: ${c.message}`};const{data:u,error:d}=await Ee.storage.from("termos-uso").createSignedUrl(l,31536e3);return d?(console.error("Erro ao gerar URL:",d),{success:!1,error:"PDF enviado, mas erro ao gerar URL de acesso"}):{success:!0,pdf_path:l,pdf_url:u.signedUrl}}catch(n){return console.error("Erro em uploadPDF:",n),{success:!1,error:n instanceof Error?n.message:"Erro desconhecido no upload"}}}function d5e(){const{user:t}=Si(),[e,r]=C.useState([]),[n,i]=C.useState(0),[s,o]=C.useState(1),[l,c]=C.useState(0),[u,d]=C.useState(!1),[h,f]=C.useState(null),[m,x]=C.useState(!1);C.useEffect(()=>{async function M(){if(!(t!=null&&t.id)){x(!1);return}try{const{supabase:D}=await AE(async()=>{const{supabase:q}=await Promise.resolve().then(()=>K7e);return{supabase:q}},void 0),{data:z,error:F}=await D.from("user_roles").select("role").eq("user_id",t.id).single();!F&&(z==null?void 0:z.role)==="admin"?x(!0):x(!1)}catch(D){console.error("Erro ao verificar admin:",D),x(!1)}}M()},[t==null?void 0:t.id]);const g=C.useCallback(async(M={},D=1)=>{if(!m){f("Apenas administradores podem listar termos");return}try{d(!0),f(null);const z=await XMt(M,D,10);r(z.dados),i(z.total),o(z.pagina),c(z.totalPaginas)}catch(z){const F=z instanceof Error?z.message:"Erro ao listar termos";f(F),console.error("Erro em listar:",z)}finally{d(!1)}},[m]),y=C.useCallback(async M=>{if(!m)return f("Apenas administradores podem criar termos"),null;try{d(!0),f(null);const D=await YMt(M);return await g(),console.log(" Termo criado:",D.id),D}catch(D){const z=D instanceof Error?D.message:"Erro ao criar termo";return f(z),console.error("Erro em criar:",D),null}finally{d(!1)}},[m,g]),w=C.useCallback(async(M,D)=>{if(!m)return f("Apenas administradores podem atualizar termos"),null;try{d(!0),f(null);const z=await ZMt(M,D);return r(F=>F.map(q=>q.id===M?z:q)),console.log(" Termo atualizado:",M),z}catch(z){const F=z instanceof Error?z.message:"Erro ao atualizar termo";return f(F),console.error("Erro em atualizar:",z),null}finally{d(!1)}},[m]),S=C.useCallback(async M=>{if(!m)return f("Apenas administradores podem ativar termos"),!1;try{d(!0),f(null);const D=await Ahe(M,!0);return r(z=>z.map(F=>F.id===M?D:F)),console.log(" Termo ativado:",M),!0}catch(D){const z=D instanceof Error?D.message:"Erro ao ativar termo";return f(z),console.error("Erro em ativar:",D),!1}finally{d(!1)}},[m]),E=C.useCallback(async M=>{if(!m)return f("Apenas administradores podem desativar termos"),!1;try{d(!0),f(null);const D=await Ahe(M,!1);return r(z=>z.map(F=>F.id===M?D:F)),console.log(" Termo desativado:",M),!0}catch(D){const z=D instanceof Error?D.message:"Erro ao desativar termo";return f(z),console.error("Erro em desativar:",D),!1}finally{d(!1)}},[m]),j=C.useCallback(async M=>{if(!m)return f("Apenas administradores podem deletar termos"),!1;try{return d(!0),f(null),await QMt(M),r(D=>D.filter(z=>z.id!==M)),i(D=>D-1),console.log(" Termo deletado:",M),!0}catch(D){const z=D instanceof Error?D.message:"Erro ao deletar termo";return f(z),console.error("Erro em deletar:",D),!1}finally{d(!1)}},[m]),T=C.useCallback(async M=>{if(!m)return f("Apenas administradores podem ver histrico"),[];try{d(!0),f(null);const D=await JMt(M);return console.log(` Histrico carregado: ${D.length} verses`),D}catch(D){const z=D instanceof Error?D.message:"Erro ao buscar histrico";return f(z),console.error("Erro em buscarHistorico:",D),[]}finally{d(!1)}},[m]),O=C.useCallback(async(M,D,z)=>{if(!m)return{success:!1,error:"Apenas administradores podem fazer upload"};try{d(!0),f(null);const F=await u5e(M,D,z);return F.success?console.log(" PDF enviado:",F.pdf_path):f(F.error||"Erro no upload"),F}catch(F){const q=F instanceof Error?F.message:"Erro ao fazer upload";return f(q),console.error("Erro em upload:",F),{success:!1,error:q}}finally{d(!1)}},[m]),I=C.useCallback(async()=>{await g({},s)},[g,s]);return{termos:e,total:n,pagina:s,totalPaginas:l,loading:u,error:h,listar:g,criar:y,atualizar:w,ativar:S,desativar:E,deletar:j,buscarHistorico:T,upload:O,isAdmin:m,refetch:I}}function r8t(t){const[e,r]=C.useState(null),[n,i]=C.useState([]),[s,o]=C.useState(!1),[l,c]=C.useState(null),u=C.useCallback(async()=>{if(!t){r(null),i([]);return}try{o(!0),c(null);const d=await iBe(t);r(d);const{aceites:h}=await nBe(t,1,10);i(h)}catch(d){const h=d instanceof Error?d.message:"Erro ao carregar estatsticas";c(h),console.error("Erro em useEstatisticasTermo:",d)}finally{o(!1)}},[t]);return C.useEffect(()=>{u()},[u]),{stats:e,aceites:n,loading:s,error:l,refetch:u}}function n8t(){const[t,e]=C.useState([]),[r,n]=C.useState(!1),[i,s]=C.useState(null),o=C.useCallback(async c=>{try{n(!0),s(null);const u=await sBe(c);e(u),console.log(` Relatrio gerado: ${u.length} registros`)}catch(u){const d=u instanceof Error?u.message:"Erro ao gerar relatrio";s(d),console.error("Erro em gerar:",u)}finally{n(!1)}},[]),l=C.useCallback(()=>{if(t.length===0){console.warn("Nenhum dado para exportar");return}const c=["Usurio ID","Nome","Email","Role","Tipo Termo","Verso","Ttulo","Data Aceite","IP"],u=t.map(m=>[m.usuario_id,m.usuario_nome,m.usuario_email,m.usuario_role,m.termo_tipo,m.termo_versao,m.termo_titulo,new Date(m.aceito_em).toLocaleString("pt-BR"),m.ip_aceite||"N/A"]),d=[c.join(","),...u.map(m=>m.map(x=>`"${x}"`).join(","))].join(`
`),h=new Blob([d],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a");f.href=URL.createObjectURL(h),f.download=`relatorio-aceites-${new Date().toISOString().split("T")[0]}.csv`,f.click(),console.log(" CSV exportado")},[t]);return{gerar:o,relatorio:t,loading:r,error:i,exportarCSV:l}}function i8t(){const t=nn(),{termos:e,loading:r,desativar:n,ativar:i,listar:s}=d5e(),[o,l]=C.useState(""),[c,u]=C.useState("todos"),[d,h]=C.useState("todos"),[f,m]=C.useState(null),[x,g]=C.useState(!1);C.useEffect(()=>{s()},[s]);const y=e.filter(F=>{var q;if(o){const Q=o.toLowerCase();if(!(F.titulo.toLowerCase().includes(Q)||((q=F.resumo)==null?void 0:q.toLowerCase().includes(Q))))return!1}return!(c!=="todos"&&F.tipo!==c||d==="ativos"&&!F.ativo||d==="inativos"&&F.ativo)}),w=async()=>{if(f){g(!0);try{await n(f.id),m(null)}catch(F){console.error("Erro ao desativar termo:",F)}finally{g(!1)}}},S=async F=>{try{await i(F)}catch(q){console.error("Erro ao reativar termo:",q)}},E=()=>{t("/admin/termos/novo")},j=F=>{t(`/admin/termos/${F}/editar`)},T=F=>{t(`/admin/termos/${F}`)},O=F=>{t(`/admin/termos/${F}/relatorio`)},I=F=>{F.pdf_url&&window.open(F.pdf_url,"_blank")},M=F=>new Date(F).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),D=F=>F.ativo?a.jsx(Bt,{variant:"default",children:"Ativo"}):a.jsx(Bt,{variant:"secondary",children:"Inativo"}),z=F=>({termos_uso:"Termos de Uso",politica_privacidade:"Poltica de Privacidade",lgpd:"LGPD",contrato:"Contrato",outro:"Outro"})[F]||F;return a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Gerenciar Termos de Uso"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Crie, edite e gerencie os termos de uso da plataforma"})]}),a.jsxs(Oe,{onClick:E,size:"lg",children:[a.jsx(ya,{className:"h-5 w-5 mr-2"}),"Novo Termo"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsx(Ct,{className:"text-sm font-medium text-muted-foreground",children:"Total de Termos"})}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsx(Ct,{className:"text-sm font-medium text-muted-foreground",children:"Termos Ativos"})}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:e.filter(F=>F.ativo).length})})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsx(Ct,{className:"text-sm font-medium text-muted-foreground",children:"Obrigatrios"})}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:e.filter(F=>F.obrigatorio).length})})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsx(Ct,{className:"text-sm font-medium text-muted-foreground",children:"Inativos"})}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:e.filter(F=>!F.ativo).length})})]})]}),a.jsxs(it,{className:"mb-6",children:[a.jsx(At,{children:a.jsxs(Ct,{className:"text-lg flex items-center gap-2",children:[a.jsx(LC,{className:"h-5 w-5"}),"Filtros"]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jp,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(mt,{placeholder:"Buscar por ttulo ou descrio...",value:o,onChange:F=>l(F.target.value),className:"pl-9"})]}),a.jsxs(wi,{value:c,onValueChange:u,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Filtrar por tipo"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:"Todos os tipos"}),a.jsx(or,{value:"termos_uso",children:"Termos de Uso"}),a.jsx(or,{value:"politica_privacidade",children:"Poltica de Privacidade"}),a.jsx(or,{value:"lgpd",children:"LGPD"}),a.jsx(or,{value:"contrato",children:"Contrato"}),a.jsx(or,{value:"outro",children:"Outro"})]})]}),a.jsxs(wi,{value:d,onValueChange:h,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Filtrar por status"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:"Todos"}),a.jsx(or,{value:"ativos",children:"Apenas Ativos"}),a.jsx(or,{value:"inativos",children:"Apenas Inativos"})]})]})]}),(o||c!=="todos"||d!=="todos")&&a.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Mostrando ",y.length," de ",e.length," termo(s)"]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Lista de Termos"}),a.jsx(gr,{children:"Gerencie todos os termos de uso cadastrados"})]}),a.jsx(ht,{children:r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"})}):y.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ql,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),a.jsx("p",{className:"text-muted-foreground",children:o||c!=="todos"||d!=="todos"?"Nenhum termo encontrado com os filtros aplicados":"Nenhum termo cadastrado ainda"}),!o&&c==="todos"&&d==="todos"&&a.jsxs(Oe,{onClick:E,variant:"outline",className:"mt-4",children:[a.jsx(ya,{className:"h-4 w-4 mr-2"}),"Criar Primeiro Termo"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Ttulo"}),a.jsx(It,{children:"Tipo"}),a.jsx(It,{children:"Verso"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Criado em"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:y.map(F=>a.jsxs(Dn,{children:[a.jsx(jt,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:F.titulo}),F.resumo&&a.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:F.resumo})]})}),a.jsx(jt,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[z(F.tipo),F.obrigatorio&&a.jsx(Bt,{variant:"destructive",className:"text-xs",children:"Obrigatrio"})]})}),a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",children:F.versao})}),a.jsx(jt,{children:D(F)}),a.jsx(jt,{className:"text-muted-foreground",children:M(F.criado_em)}),a.jsx(jt,{className:"text-right",children:a.jsxs(nJ,{children:[a.jsx(iJ,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"sm",children:a.jsx(C0e,{className:"h-4 w-4"})})}),a.jsxs(bB,{align:"end",children:[a.jsx(ZEe,{children:"Aes"}),a.jsx(jW,{}),a.jsxs(Hl,{onClick:()=>T(F.id),children:[a.jsx(Am,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),F.ativo&&a.jsxs(Hl,{onClick:()=>j(F.id),children:[a.jsx(BC,{className:"h-4 w-4 mr-2"}),"Editar"]}),a.jsxs(Hl,{onClick:()=>O(F.id),children:[a.jsx(N0e,{className:"h-4 w-4 mr-2"}),"Relatrio de Aceites"]}),F.pdf_url&&a.jsxs(Hl,{onClick:()=>I(F),children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Baixar PDF"]}),a.jsx(jW,{}),F.ativo?a.jsxs(Hl,{onClick:()=>m(F),className:"text-destructive",children:[a.jsx(vl,{className:"h-4 w-4 mr-2"}),"Desativar"]}):a.jsx(Hl,{onClick:()=>S(F.id),children:"Reativar Termo"})]})]})})]},F.id))})]})})})]}),a.jsx(S_,{open:!!f,onOpenChange:F=>!F&&m(null),children:a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsx(ob,{children:"Desativar termo?"}),a.jsxs(lb,{children:['Tem certeza que deseja desativar o termo "',a.jsx("strong",{children:f==null?void 0:f.titulo}),'"?',a.jsx("br",{}),a.jsx("br",{}),"Termos desativados no sero exibidos para novos usurios, mas os aceites existentes sero mantidos. Voc pode reativar o termo posteriormente."]})]}),a.jsxs(ab,{children:[a.jsx(ub,{disabled:x,children:"Cancelar"}),a.jsx(cb,{onClick:w,disabled:x,className:"bg-destructive hover:bg-destructive/90",children:x?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-4 w-4 mr-2 animate-spin"}),"Desativando..."]}):"Desativar"})]})]})})]})}const s8t=[{value:"termos_uso",label:"Termos de Uso"},{value:"politica_privacidade",label:"Poltica de Privacidade"},{value:"termo_lgpd",label:"LGPD"},{value:"contrato_cooperado",label:"Contrato Cooperado"},{value:"contrato_investidor",label:"Contrato Investidor"},{value:"outros",label:"Outro"}],a8t=[{value:"cooperado",label:"Cooperado"},{value:"investidor",label:"Investidor"},{value:"operador_logistico",label:"Operador Logstico"},{value:"parceiro",label:"Parceiro"},{value:"admin",label:"Administrador"}];function Che(){const t=nn(),{id:e}=o0(),{criar:r,atualizar:n,loading:i,error:s}=d5e(),o=!!e,[l,c]=C.useState("termos_uso"),[u,d]=C.useState("1.0.0"),[h,f]=C.useState(""),[m,x]=C.useState(""),[g,y]=C.useState(""),[w,S]=C.useState(!0),[E,j]=C.useState(!0),[T,O]=C.useState([]),[I,M]=C.useState(null),[D,z]=C.useState(""),[F,q]=C.useState(!1),[Q,re]=C.useState([]);C.useEffect(()=>{o&&e&&Z()},[o,e]);const Z=async()=>{try{q(!0),re([]);const oe=await c5e(e);if(!oe){re(["Termo no encontrado"]);return}c(oe.tipo),d(oe.versao),f(oe.titulo),x(oe.resumo||""),y(oe.conteudo_html||""),S(oe.obrigatorio),j(oe.ativo),O(oe.roles_aplicaveis||[]),z(oe.pdf_url||"")}catch(oe){console.error("Erro ao carregar termo:",oe),re([oe instanceof Error?oe.message:"Erro ao carregar termo"])}finally{q(!1)}},se=()=>{const oe=[];return h.trim()||oe.push("O ttulo  obrigatrio"),u.trim()||oe.push("A verso  obrigatria"),!o&&!I&&!D&&oe.push(" necessrio fazer upload de um PDF ou fornecer uma URL"),T.length===0&&oe.push("Selecione pelo menos um tipo de usurio (role)"),re(oe),oe.length===0},K=async oe=>{if(oe.preventDefault(),!!se())try{let xe=D;if(I){const H=await u5e(I,l,u);if(!H.success){re([H.error||"Erro ao fazer upload do PDF"]);return}xe=H.pdf_url||""}if(!xe){re([" necessrio fornecer um PDF"]);return}if(o)await n(e,{titulo:h,descricao:m,conteudo_html:g||void 0,pdf_url:xe,obrigatorio:w,ativo:E})&&t(`/admin/termos/${e}`);else{const H={tipo:l,versao:u,titulo:h,pdf_url:xe,descricao:m||void 0,conteudo_html:g||void 0,obrigatorio:w,roles_aplicaveis:T.length>0?T:[],ativo:E};await r(H)&&t("/admin/termos")}}catch(xe){console.error("Erro ao salvar termo:",xe),re([xe instanceof Error?xe.message:"Erro ao salvar termo"])}},X=oe=>{O(xe=>xe.includes(oe)?xe.filter(H=>H!==oe):[...xe,oe])},Y=oe=>{var H;const xe=(H=oe.target.files)==null?void 0:H[0];xe&&xe.type==="application/pdf"&&(M(xe),re(J=>J.filter(ie=>!ie.includes("PDF"))))};return a.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>t("/admin/termos"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:o?"Editar Termo":"Novo Termo de Uso"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:o?"Atualize as informaes do termo existente":"Preencha os dados para criar um novo termo"})]})]}),F&&a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("span",{className:"ml-3 text-lg",children:"Carregando termo..."})]}),Q.length>0&&a.jsxs(ka,{variant:"destructive",className:"mb-6",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:a.jsx("ul",{className:"list-disc list-inside space-y-1",children:Q.map((oe,xe)=>a.jsx("li",{children:oe},xe))})})]}),s&&a.jsxs(ka,{variant:"destructive",className:"mb-6",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:s})]}),!F&&a.jsxs("form",{onSubmit:K,className:"space-y-6",children:[a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Informaes Bsicas"}),a.jsx(gr,{children:"Dados principais do termo de uso"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"tipo",children:"Tipo de Termo *"}),a.jsxs(wi,{value:l,onValueChange:oe=>c(oe),children:[a.jsx(gi,{id:"tipo",children:a.jsx(_i,{})}),a.jsx(xi,{children:s8t.map(oe=>a.jsx(or,{value:oe.value,children:oe.label},oe.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(nt,{htmlFor:"titulo",children:"Ttulo *"}),a.jsx(mt,{id:"titulo",value:h,onChange:oe=>f(oe.target.value),placeholder:"Ex: Termos de Uso da Plataforma Ciclik",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"versao",children:"Verso *"}),a.jsx(mt,{id:"versao",value:u,onChange:oe=>d(oe.target.value),placeholder:"Ex: 1.0.0",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"descricao",children:"Descrio (Opcional)"}),a.jsx(Od,{id:"descricao",value:m,onChange:oe=>x(oe.target.value),placeholder:"Breve descrio do que este termo abrange...",rows:3}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Ser exibida como prvia para os usurios"})]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Documento PDF *"}),a.jsx(gr,{children:"Faa upload do arquivo PDF ou fornea uma URL"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"pdf",children:"Upload de Arquivo"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(mt,{id:"pdf",type:"file",accept:"application/pdf",onChange:Y,className:"flex-1"}),I&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Ql,{className:"h-4 w-4"}),I.name]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"pdfUrl",children:"Ou fornea uma URL"}),a.jsx(mt,{id:"pdfUrl",type:"url",value:D,onChange:oe=>z(oe.target.value),placeholder:"https://exemplo.com/documento.pdf"})]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Contedo HTML (Opcional)"}),a.jsx(gr,{children:"Verso HTML do termo para exibio inline"})]}),a.jsxs(ht,{children:[a.jsx(Od,{value:g,onChange:oe=>y(oe.target.value),placeholder:"<h1>Ttulo</h1><p>Contedo...</p>",rows:8,className:"font-mono text-sm"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Se fornecido, ser exibido ao invs do PDF na interface"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Configuraes"}),a.jsx(gr,{children:"Defina como e para quem o termo ser aplicado"})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(nt,{htmlFor:"obrigatorio",children:"Aceite Obrigatrio"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Usurios devem aceitar para usar a plataforma"})]}),a.jsx(nh,{id:"obrigatorio",checked:w,onCheckedChange:S})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(nt,{htmlFor:"ativo",children:"Termo Ativo"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Termo ser exibido para novos usurios"})]}),a.jsx(nh,{id:"ativo",checked:E,onCheckedChange:j})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(nt,{children:"Aplicvel para (deixe vazio para todos)"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a8t.map(oe=>a.jsxs("label",{className:"flex items-center gap-2 p-3 rounded-lg border cursor-pointer hover:bg-accent",children:[a.jsx("input",{type:"checkbox",checked:T.includes(oe.value),onChange:()=>X(oe.value),className:"rounded"}),a.jsx("span",{className:"text-sm",children:oe.label})]},oe.value))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Se nenhum for selecionado, o termo ser aplicvel para todos os usurios"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-4",children:[a.jsx(Oe,{type:"button",variant:"outline",onClick:()=>t("/admin/termos"),disabled:i,children:"Cancelar"}),a.jsx(Oe,{type:"submit",disabled:i,size:"lg",children:i?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(FC,{className:"h-4 w-4 mr-2"}),o?"Atualizar Termo":"Criar Termo"]})})]})]})]})}const o8t={termos_uso:"Termos de Uso",politica_privacidade:"Poltica de Privacidade",termo_lgpd:"LGPD",contrato_cooperado:"Contrato Cooperado",contrato_investidor:"Contrato Investidor",outros:"Outro"},l8t={cooperado:"Cooperado",investidor:"Investidor",operador_logistico:"Operador Logstico",parceiro:"Parceiro",admin:"Administrador"};function c8t(){const t=nn(),{id:e}=o0(),[r,n]=C.useState(null),[i,s]=C.useState(!0),[o,l]=C.useState(null);C.useEffect(()=>{if(!e){t("/admin/termos");return}c()},[e]);const c=async()=>{try{s(!0),l(null);const x=await c5e(e);if(!x){l("Termo no encontrado");return}n(x)}catch(x){console.error("Erro ao carregar termo:",x),l(x instanceof Error?x.message:"Erro ao carregar termo")}finally{s(!1)}},u=x=>new Date(x).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=()=>{t("/admin/termos")},h=()=>{t(`/admin/termos/${e}/editar`)},f=()=>{t(`/admin/termos/${e}/relatorio`)},m=()=>{r!=null&&r.pdf_url&&window.open(r.pdf_url,"_blank")};return i?a.jsx("div",{className:"container mx-auto py-6 space-y-6",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(jn,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando detalhes do termo..."})]})})}):o||!r?a.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[a.jsxs(ka,{variant:"destructive",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:o||"Termo no encontrado"})]}),a.jsxs(Oe,{variant:"outline",onClick:d,children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Voltar"]})]}):a.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"outline",onClick:d,children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Detalhes do Termo"}),a.jsx("p",{className:"text-muted-foreground",children:"Visualizao completa do termo de uso"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[r.ativo&&a.jsxs(Oe,{variant:"outline",onClick:h,children:[a.jsx(BC,{className:"h-4 w-4 mr-2"}),"Editar"]}),a.jsxs(Oe,{variant:"outline",onClick:f,children:[a.jsx(N0e,{className:"h-4 w-4 mr-2"}),"Relatrio"]}),r.pdf_url&&a.jsxs(Oe,{variant:"outline",onClick:m,children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Ql,{className:"h-5 w-5"}),"Informaes Bsicas"]})}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"Ttulo"}),a.jsx("p",{className:"text-base font-medium",children:r.titulo})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"Tipo"}),a.jsx("p",{className:"text-base",children:o8t[r.tipo]})]}),a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"Verso"}),a.jsxs(Bt,{variant:"outline",className:"text-sm",children:["v",r.versao]})]})]}),r.resumo&&a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"Resumo"}),a.jsx("p",{className:"text-sm",children:r.resumo})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[r.obrigatorio?a.jsx(au,{className:"h-4 w-4 text-green-600"}):a.jsx(al,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm",children:r.obrigatorio?"Obrigatrio":"Opcional"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[r.ativo?a.jsx(au,{className:"h-4 w-4 text-green-600"}):a.jsx(al,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm",children:r.ativo?"Ativo":"Inativo"})]})]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"h-5 w-5"}),"Aplicabilidade"]}),a.jsx(gr,{children:"Tipos de usurios que devem aceitar este termo"})]}),a.jsx(ht,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:r.roles_aplicaveis&&r.roles_aplicaveis.length>0?r.roles_aplicaveis.map(x=>a.jsx(Bt,{variant:"secondary",children:l8t[x]},x)):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum role especfico"})})})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Gl,{className:"h-5 w-5"}),"Datas"]})}),a.jsxs(ht,{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"Criado em"}),a.jsx("p",{className:"text-sm",children:u(r.criado_em)})]}),a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"ltima atualizao"}),a.jsx("p",{className:"text-sm",children:u(r.atualizado_em)})]})]})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Wp,{className:"h-5 w-5"}),"Documento"]})}),a.jsxs(ht,{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(dw,{className:"text-sm text-muted-foreground",children:"Caminho do PDF"}),a.jsx("p",{className:"text-sm font-mono break-all",children:r.pdf_path})]}),r.pdf_url&&a.jsxs(Oe,{variant:"outline",className:"w-full",onClick:m,children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Baixar PDF"]})]})]})]}),r.conteudo_html&&a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Contedo HTML"}),a.jsx(gr,{children:"Verso HTML do termo (opcional)"})]}),a.jsx(ht,{children:a.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:r.conteudo_html}})})]})]})}function dw({children:t,className:e=""}){return a.jsx("label",{className:`block text-sm font-medium mb-1 ${e}`,children:t})}function u8t(){const t=nn(),{id:e}=o0(),{stats:r,aceites:n,loading:i,error:s,refetch:o}=r8t(e||null),{exportarCSV:l}=n8t(),c=()=>{l()},u=d=>new Date(d).toLocaleString("pt-BR");return i?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(jn,{className:"h-8 w-8 animate-spin"})}):a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>t("/admin/termos"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Relatrio de Aceites"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Estatsticas e histrico de aceites do termo"})]})]}),a.jsxs(Oe,{onClick:c,children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Exportar CSV"]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsxs(Ct,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(yl,{className:"h-4 w-4"}),"Total de Aceites"]})}),a.jsx(ht,{children:a.jsx("div",{className:"text-3xl font-bold",children:r.total_aceites})})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsxs(Ct,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(ta,{className:"h-4 w-4"}),"Total de Usurios"]})}),a.jsx(ht,{children:a.jsx("div",{className:"text-3xl font-bold",children:r.total_usuarios})})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsxs(Ct,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(Hs,{className:"h-4 w-4"}),"Taxa de Aceite"]})}),a.jsx(ht,{children:a.jsx("div",{className:"text-3xl font-bold",children:r.percentual_aceites?`${r.percentual_aceites.toFixed(1)}%`:"0%"})})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Histrico de Aceites"}),a.jsx(gr,{children:"Lista de todos os usurios que aceitaram este termo"})]}),a.jsx(ht,{children:n.length===0?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Nenhum aceite registrado ainda"}):a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Usurio"}),a.jsx(It,{children:"Verso"}),a.jsx(It,{children:"Data do Aceite"}),a.jsx(It,{children:"IP"})]})}),a.jsx(to,{children:n.map(d=>a.jsxs(Dn,{children:[a.jsx(jt,{children:d.user_id}),a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",children:d.versao_aceita})}),a.jsx(jt,{children:u(d.aceito_em)}),a.jsx(jt,{className:"text-muted-foreground",children:d.ip_aceite||"N/A"})]},d.id))})]})})]})]})}function d8t(t){const{user:e}=Si(),[r,n]=C.useState(!1),[i,s]=C.useState(null),[o,l]=C.useState(!1),c=C.useCallback(async h=>{var f,m,x,g;if(!(e!=null&&e.id)){const y="Usurio no autenticado";return s(y),(f=t==null?void 0:t.onErro)==null||f.call(t,y),!1}if(!h||h.length===0){const y="Nenhum termo selecionado";return s(y),(m=t==null?void 0:t.onErro)==null||m.call(t,y),!1}try{return n(!0),s(null),l(!1),await oxe(e.id,h),l(!0),(x=t==null?void 0:t.onSucesso)==null||x.call(t),console.log(` ${h.length} termo(s) aceito(s) com sucesso`),!0}catch(y){const w=y instanceof Error?y.message:"Erro ao registrar aceites";return s(w),l(!1),(g=t==null?void 0:t.onErro)==null||g.call(t,w),console.error("Erro ao registrar aceites:",y),!1}finally{n(!1)}},[e==null?void 0:e.id,t]),u=C.useCallback(async h=>{var f,m,x,g;if(!(e!=null&&e.id)){const y="Usurio no autenticado";return s(y),(f=t==null?void 0:t.onErro)==null||f.call(t,y),!1}if(!h){const y="ID do termo no fornecido";return s(y),(m=t==null?void 0:t.onErro)==null||m.call(t,y),!1}try{return n(!0),s(null),l(!1),await rBe(e.id,h),l(!0),(x=t==null?void 0:t.onSucesso)==null||x.call(t),console.log(` Termo aceito com sucesso: ${h}`),!0}catch(y){const w=y instanceof Error?y.message:"Erro ao registrar aceite";return s(w),l(!1),(g=t==null?void 0:t.onErro)==null||g.call(t,w),console.error("Erro ao registrar aceite:",y),!1}finally{n(!1)}},[e==null?void 0:e.id,t]),d=C.useCallback(()=>{n(!1),s(null),l(!1)},[]);return{registrar:c,registrarUnico:u,loading:r,error:i,sucesso:o,resetar:d}}var DB="Checkbox",[h8t,g$t]=qo(DB),[f8t,WJ]=h8t(DB);function m8t(t){const{__scopeCheckbox:e,checked:r,children:n,defaultChecked:i,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[f,m]=Xu({prop:r,defaultProp:i??!1,onChange:c,caller:DB}),[x,g]=C.useState(null),[y,w]=C.useState(null),S=C.useRef(!1),E=x?!!o||!!x.closest("form"):!0,j={checked:f,disabled:s,setChecked:m,control:x,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:S,required:u,defaultChecked:pb(i)?!1:i,isFormControl:E,bubbleInput:y,setBubbleInput:w};return a.jsx(f8t,{scope:e,...j,children:p8t(h)?h(j):n})}var h5e="CheckboxTrigger",f5e=C.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...n},i)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:x}=WJ(h5e,t),g=An(i,d),y=C.useRef(c);return C.useEffect(()=>{const w=s==null?void 0:s.form;if(w){const S=()=>h(y.current);return w.addEventListener("reset",S),()=>w.removeEventListener("reset",S)}},[s,h]),a.jsx(Dr.button,{type:"button",role:"checkbox","aria-checked":pb(c)?"mixed":c,"aria-required":u,"data-state":v5e(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:wr(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:wr(r,w=>{h(S=>pb(S)?!0:!S),x&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});f5e.displayName=h5e;var GJ=C.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return a.jsx(m8t,{__scopeCheckbox:r,checked:i,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>a.jsxs(a.Fragment,{children:[a.jsx(f5e,{...h,ref:e,__scopeCheckbox:r}),f&&a.jsx(x5e,{__scopeCheckbox:r})]})})});GJ.displayName=DB;var m5e="CheckboxIndicator",p5e=C.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...i}=t,s=WJ(m5e,r);return a.jsx(El,{present:n||pb(s.checked)||s.checked===!0,children:a.jsx(Dr.span,{"data-state":v5e(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});p5e.displayName=m5e;var g5e="CheckboxBubbleInput",x5e=C.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=WJ(g5e,t),x=An(r,m),g=tI(s),y=YO(n);C.useEffect(()=>{const S=f;if(!S)return;const E=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(E,"checked").set,O=!i.current;if(g!==s&&T){const I=new Event("click",{bubbles:O});S.indeterminate=pb(s),T.call(S,pb(s)?!1:s),S.dispatchEvent(I)}},[f,g,s,i]);const w=C.useRef(pb(s)?!1:s);return a.jsx(Dr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:x,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});x5e.displayName=g5e;function p8t(t){return typeof t=="function"}function pb(t){return t==="indeterminate"}function v5e(t){return pb(t)?"indeterminate":t?"checked":"unchecked"}const MB=C.forwardRef(({className:t,...e},r)=>a.jsx(GJ,{ref:r,className:Ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(p5e,{className:Ut("flex items-center justify-center text-current"),children:a.jsx(xl,{className:"h-4 w-4"})})}));MB.displayName=GJ.displayName;function g8t(t,e){return C.useReducer((r,n)=>e[r][n]??r,t)}var KJ="ScrollArea",[y5e,x$t]=qo(KJ),[x8t,qm]=y5e(KJ),b5e=C.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:s=600,...o}=t,[l,c]=C.useState(null),[u,d]=C.useState(null),[h,f]=C.useState(null),[m,x]=C.useState(null),[g,y]=C.useState(null),[w,S]=C.useState(0),[E,j]=C.useState(0),[T,O]=C.useState(!1),[I,M]=C.useState(!1),D=An(e,F=>c(F)),z=Vb(i);return a.jsx(x8t,{scope:r,type:n,dir:z,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:x,scrollbarXEnabled:T,onScrollbarXEnabledChange:O,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:I,onScrollbarYEnabledChange:M,onCornerWidthChange:S,onCornerHeightChange:j,children:a.jsx(Dr.div,{dir:z,...o,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});b5e.displayName=KJ;var w5e="ScrollAreaViewport",_5e=C.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:i,...s}=t,o=qm(w5e,r),l=C.useRef(null),c=An(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),a.jsx(Dr.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});_5e.displayName=w5e;var qg="ScrollAreaScrollbar",XJ=C.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=qm(qg,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return C.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),i.type==="hover"?a.jsx(v8t,{...n,ref:e,forceMount:r}):i.type==="scroll"?a.jsx(y8t,{...n,ref:e,forceMount:r}):i.type==="auto"?a.jsx(N5e,{...n,ref:e,forceMount:r}):i.type==="always"?a.jsx(YJ,{...n,ref:e}):null});XJ.displayName=qg;var v8t=C.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=qm(qg,t.__scopeScrollArea),[s,o]=C.useState(!1);return C.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),a.jsx(El,{present:r||s,children:a.jsx(N5e,{"data-state":s?"visible":"hidden",...n,ref:e})})}),y8t=C.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=qm(qg,t.__scopeScrollArea),s=t.orientation==="horizontal",o=FB(()=>c("SCROLL_END"),100),[l,c]=g8t("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),C.useEffect(()=>{const u=i.viewport,d=s?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,c,o]),a.jsx(El,{present:r||l!=="hidden",children:a.jsx(YJ,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:wr(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:wr(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),N5e=C.forwardRef((t,e)=>{const r=qm(qg,t.__scopeScrollArea),{forceMount:n,...i}=t,[s,o]=C.useState(!1),l=t.orientation==="horizontal",c=FB(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return jC(r.viewport,c),jC(r.content,c),a.jsx(El,{present:n||s,children:a.jsx(YJ,{"data-state":s?"visible":"hidden",...i,ref:e})})}),YJ=C.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=qm(qg,t.__scopeScrollArea),s=C.useRef(null),o=C.useRef(0),[l,c]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=C5e(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return E8t(f,o.current,l,m)}return r==="horizontal"?a.jsx(b8t,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollLeft,m=The(f,l,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=h(f,i.dir))}}):r==="vertical"?a.jsx(w8t,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollTop,m=The(f,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=h(f))}}):null}),b8t=C.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,s=qm(qg,t.__scopeScrollArea),[o,l]=C.useState(),c=C.useRef(null),u=An(e,c,s.onScrollbarXChange);return C.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(E5e,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":LB(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(s.viewport){const f=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),P5e(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:VL(o.paddingLeft),paddingEnd:VL(o.paddingRight)}})}})}),w8t=C.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,s=qm(qg,t.__scopeScrollArea),[o,l]=C.useState(),c=C.useRef(null),u=An(e,c,s.onScrollbarYChange);return C.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(E5e,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":LB(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(s.viewport){const f=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),P5e(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:VL(o.paddingTop),paddingEnd:VL(o.paddingBottom)}})}})}),[_8t,S5e]=y5e(qg),E5e=C.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=qm(qg,r),[x,g]=C.useState(null),y=An(e,D=>g(D)),w=C.useRef(null),S=C.useRef(""),E=m.viewport,j=n.content-n.viewport,T=Uo(d),O=Uo(c),I=FB(h,10);function M(D){if(w.current){const z=D.clientX-w.current.left,F=D.clientY-w.current.top;u({x:z,y:F})}}return C.useEffect(()=>{const D=z=>{const F=z.target;(x==null?void 0:x.contains(F))&&T(z,j)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[E,x,j,T]),C.useEffect(O,[n,O]),jC(x,I),jC(m.content,I),a.jsx(_8t,{scope:r,scrollbar:x,hasThumb:i,onThumbChange:Uo(s),onThumbPointerUp:Uo(o),onThumbPositionChange:O,onThumbPointerDown:Uo(l),children:a.jsx(Dr.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:wr(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),w.current=x.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),M(D))}),onPointerMove:wr(t.onPointerMove,M),onPointerUp:wr(t.onPointerUp,D=>{const z=D.target;z.hasPointerCapture(D.pointerId)&&z.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=S.current,m.viewport&&(m.viewport.style.scrollBehavior=""),w.current=null})})})}),zL="ScrollAreaThumb",j5e=C.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=S5e(zL,t.__scopeScrollArea);return a.jsx(El,{present:r||i.hasThumb,children:a.jsx(N8t,{ref:e,...n})})}),N8t=C.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,s=qm(zL,r),o=S5e(zL,r),{onThumbPositionChange:l}=o,c=An(e,h=>o.onThumbChange(h)),u=C.useRef(void 0),d=FB(()=>{u.current&&(u.current(),u.current=void 0)},100);return C.useEffect(()=>{const h=s.viewport;if(h){const f=()=>{if(d(),!u.current){const m=j8t(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[s.viewport,d,l]),a.jsx(Dr.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:wr(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),x=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:wr(t.onPointerUp,o.onThumbPointerUp)})});j5e.displayName=zL;var ZJ="ScrollAreaCorner",A5e=C.forwardRef((t,e)=>{const r=qm(ZJ,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(S8t,{...t,ref:e}):null});A5e.displayName=ZJ;var S8t=C.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=qm(ZJ,r),[s,o]=C.useState(0),[l,c]=C.useState(0),u=!!(s&&l);return jC(i.scrollbarX,()=>{var h;const d=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),jC(i.scrollbarY,()=>{var h;const d=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?a.jsx(Dr.div,{...n,ref:e,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function VL(t){return t?parseInt(t,10):0}function C5e(t,e){const r=t/e;return isNaN(r)?0:r}function LB(t){const e=C5e(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function E8t(t,e,r,n="ltr"){const i=LB(r),s=i/2,o=e||s,l=i-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return T5e([c,u],h)(t)}function The(t,e,r="ltr"){const n=LB(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,l=s-n,c=r==="ltr"?[0,o]:[o*-1,0],u=k3(t,c);return T5e([0,o],[0,l])(u)}function T5e(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function P5e(t,e){return t>0&&t<e}var j8t=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=r.left!==s.left,l=r.top!==s.top;(o||l)&&e(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function FB(t,e){const r=Uo(t),n=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(n.current),[]),C.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function jC(t,e){const r=Uo(e);Vo(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}var k5e=b5e,A8t=_5e,C8t=A5e;const QJ=C.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(k5e,{ref:n,className:Ut("relative overflow-hidden",t),...r,children:[a.jsx(A8t,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(O5e,{}),a.jsx(C8t,{})]}));QJ.displayName=k5e.displayName;const O5e=C.forwardRef(({className:t,orientation:e="vertical",...r},n)=>a.jsx(XJ,{ref:n,orientation:e,className:Ut("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:a.jsx(j5e,{className:"relative flex-1 rounded-full bg-border"})}));O5e.displayName=XJ.displayName;const hd=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),KW=[.001,0,0,.001,0,0],tz=1.35,lf={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ug={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},YP="pdfjs_internal_editor_",li={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Hi={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},I5e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Oc={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Z4={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Jo={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},vS={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},zI={ERRORS:0,WARNINGS:1,INFOS:5},AC={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ID={moveTo:0,lineTo:1,curveTo:2,closePath:3},R5e={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let BB=zI.WARNINGS;function T8t(t){Number.isInteger(t)&&(BB=t)}function P8t(){return BB}function $B(t){BB>=zI.INFOS&&console.info(`Info: ${t}`)}function ci(t){BB>=zI.WARNINGS&&console.warn(`Warning: ${t}`)}function ua(t){throw new Error(t)}function Zi(t,e){t||ua(e)}function k8t(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function JJ(t,e=null,r=null){if(!t)return null;if(r&&typeof t=="string"){if(r.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(r.tryConvertEncoding)try{t=M8t(t)}catch{}}const n=e?URL.parse(t,e):URL.parse(t);return k8t(n)?n:null}function eee(t,e,r=!1){const n=URL.parse(t);return n?(n.hash=e,n.href):r&&JJ(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ci(t,e,r,n=!1){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!0,writable:!1}),r}const CN=function(){function e(r,n){this.message=r,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class Phe extends CN{constructor(e,r){super(e,"PasswordException"),this.code=r}}class rz extends CN{constructor(e,r){super(e,"UnknownErrorException"),this.details=r}}class qL extends CN{constructor(e){super(e,"InvalidPDFException")}}class ZP extends CN{constructor(e,r,n){super(e,"ResponseException"),this.status=r,this.missing=n}}class O8t extends CN{constructor(e){super(e,"FormatError")}}class Iv extends CN{constructor(e){super(e,"AbortException")}}function D5e(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&ua("Invalid argument for bytesToString");const e=t.length,r=8192;if(e<r)return String.fromCharCode.apply(null,t);const n=[];for(let i=0;i<e;i+=r){const s=Math.min(i+r,e),o=t.subarray(i,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function VI(t){typeof t!="string"&&ua("Invalid argument for stringToBytes");const e=t.length,r=new Uint8Array(e);for(let n=0;n<e;++n)r[n]=t.charCodeAt(n)&255;return r}function I8t(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function R8t(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function D8t(){try{return new Function(""),!0}catch{return!1}}class vc{static get isLittleEndian(){return Ci(this,"isLittleEndian",R8t())}static get isEvalSupported(){return Ci(this,"isEvalSupported",D8t())}static get isOffscreenCanvasSupported(){return Ci(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ci(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:r}=navigator;return Ci(this,"platform",{isAndroid:r.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:r.includes("Firefox")})}static get isCSSRoundSupported(){var e,r;return Ci(this,"isCSSRoundSupported",(r=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:r.call(e,"width: round(1.5px, 1px)"))}}const nz=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var mv,C6,XW;class rn{static makeHexColor(e,r,n){return`#${nz[e]}${nz[r]}${nz[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,r){let n;e[0]?(e[0]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[0],r[2]*=e[0],e[3]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[3],r[3]*=e[3]):(n=r[0],r[0]=r[1],r[1]=n,n=r[2],r[2]=r[3],r[3]=n,e[1]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[1],r[3]*=e[1],e[2]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[2],r[2]*=e[2]),r[0]+=e[4],r[1]+=e[5],r[2]+=e[4],r[3]+=e[5]}static transform(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]}static multiplyByDOMMatrix(e,r){return[e[0]*r.a+e[2]*r.b,e[1]*r.a+e[3]*r.b,e[0]*r.c+e[2]*r.d,e[1]*r.c+e[3]*r.d,e[0]*r.e+e[2]*r.f+e[4],e[1]*r.e+e[3]*r.f+e[5]]}static applyTransform(e,r,n=0){const i=e[n],s=e[n+1];e[n]=i*r[0]+s*r[2]+r[4],e[n+1]=i*r[1]+s*r[3]+r[5]}static applyTransformToBezier(e,r,n=0){const i=r[0],s=r[1],o=r[2],l=r[3],c=r[4],u=r[5];for(let d=0;d<6;d+=2){const h=e[n+d],f=e[n+d+1];e[n+d]=h*i+f*o+c,e[n+d+1]=h*s+f*l+u}}static applyInverseTransform(e,r){const n=e[0],i=e[1],s=r[0]*r[3]-r[1]*r[2];e[0]=(n*r[3]-i*r[2]+r[2]*r[5]-r[4]*r[3])/s,e[1]=(-n*r[1]+i*r[0]+r[4]*r[1]-r[5]*r[0])/s}static axialAlignedBoundingBox(e,r,n){const i=r[0],s=r[1],o=r[2],l=r[3],c=r[4],u=r[5],d=e[0],h=e[1],f=e[2],m=e[3];let x=i*d+c,g=x,y=i*f+c,w=y,S=l*h+u,E=S,j=l*m+u,T=j;if(s!==0||o!==0){const O=s*d,I=s*f,M=o*h,D=o*m;x+=M,w+=M,y+=D,g+=D,S+=O,T+=O,j+=I,E+=I}n[0]=Math.min(n[0],x,y,g,w),n[1]=Math.min(n[1],S,j,E,T),n[2]=Math.max(n[2],x,y,g,w),n[3]=Math.max(n[3],S,j,E,T)}static inverseTransform(e){const r=e[0]*e[3]-e[1]*e[2];return[e[3]/r,-e[1]/r,-e[2]/r,e[0]/r,(e[2]*e[5]-e[4]*e[3])/r,(e[4]*e[1]-e[5]*e[0])/r]}static singularValueDecompose2dScale(e,r){const n=e[0],i=e[1],s=e[2],o=e[3],l=n**2+i**2,c=n*s+i*o,u=s**2+o**2,d=(l+u)/2,h=Math.sqrt(d**2-(l*u-c**2));r[0]=Math.sqrt(d+h||1),r[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const r=e.slice(0);return e[0]>e[2]&&(r[0]=e[2],r[2]=e[0]),e[1]>e[3]&&(r[1]=e[3],r[3]=e[1]),r}static intersect(e,r){const n=Math.max(Math.min(e[0],e[2]),Math.min(r[0],r[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(r[0],r[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(r[1],r[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(r[1],r[3]));return s>o?null:[n,s,i,o]}static pointBoundingBox(e,r,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],r)}static rectBoundingBox(e,r,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],r,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],r,i)}static bezierBoundingBox(e,r,n,i,s,o,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],r,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],r,c),ve(this,mv,XW).call(this,e,n,s,l,r,i,o,c,3*(-e+3*(n-s)+l),6*(e-2*n+s),3*(n-e),u),ve(this,mv,XW).call(this,e,n,s,l,r,i,o,c,3*(-r+3*(i-o)+c),6*(r-2*i+o),3*(i-r),u)}}mv=new WeakSet,C6=function(e,r,n,i,s,o,l,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,m=f*u,x=h*(h*(h*e+3*u*r)+3*f*n)+m*i,g=h*(h*(h*s+3*u*o)+3*f*l)+m*c;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],x),d[3]=Math.max(d[3],g)},XW=function(e,r,n,i,s,o,l,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&ve(this,mv,C6).call(this,e,r,n,i,s,o,l,c,-h/d,f);return}const m=d**2-4*h*u;if(m<0)return;const x=Math.sqrt(m),g=2*u;ve(this,mv,C6).call(this,e,r,n,i,s,o,l,c,(-d+x)/g,f),ve(this,mv,C6).call(this,e,r,n,i,s,o,l,c,(-d-x)/g,f)},ge(rn,mv);function M8t(t){return decodeURIComponent(escape(t))}let iz=null,khe=null;function M5e(t){return iz||(iz=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,khe=new Map([["","t"]])),t.replaceAll(iz,(e,r,n)=>r?r.normalize("NFKC"):khe.get(n))}function tee(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),D5e(t)}const ree="pdfjs_internal_id_";function L8t(t,e,r){if(!Array.isArray(r)||r.length<2)return!1;const[n,i,...s]=r;if(!t(n)&&!Number.isInteger(n)||!e(i))return!1;const o=s.length;let l=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Iu(t,e,r){return Math.min(Math.max(t,e),r)}function L5e(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(D5e(t))}function F8t(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):VI(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(r=>{r(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,r)=>e+r,0)});class QP{static textContent(e){const r=[],n={items:r,styles:Object.create(null)};function i(s){var c;if(!s)return;let o=null;const l=s.name;if(l==="#text")o=s.value;else if(QP.shouldBuildText(l))(c=s==null?void 0:s.attributes)!=null&&c.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&r.push({str:o}),!!s.children)for(const u of s.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class nee{static setupStorage(e,r,n,i,s){const o=i.getValue(r,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(r,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{i.setValue(r,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(r,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(r,{value:u})});break}}static setAttributes({html:e,element:r,storage:n=null,intent:i,linkService:s}){const{attributes:o}=r,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&s.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,r,n)}static render(e){var h,f;const r=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:n});const l=s!=="richText",c=e.div;if(c.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),l&&QP.shouldBuildText(i.name)&&u.push(m)}return{textDivs:u}}const d=[[i,-1,o]];for(;d.length>0;){const[m,x,g]=d.at(-1);if(x+1===m.children.length){d.pop();continue}const y=m.children[++d.at(-1)[1]];if(y===null)continue;const{name:w}=y;if(w==="#text"){const E=document.createTextNode(y.value);u.push(E),g.append(E);continue}const S=(h=y==null?void 0:y.attributes)!=null&&h.xmlns?document.createElementNS(y.attributes.xmlns,w):document.createElement(w);if(g.append(S),y.attributes&&this.setAttributes({html:S,element:y,storage:r,intent:s,linkService:n}),((f=y.children)==null?void 0:f.length)>0)d.push([y,-1,S]);else if(y.value){const E=document.createTextNode(y.value);l&&QP.shouldBuildText(w)&&u.push(E),S.append(E)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const r=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=r,e.div.hidden=!1}}const sx="http://www.w3.org/2000/svg",kw=class kw{};rr(kw,"CSS",96),rr(kw,"PDF",72),rr(kw,"PDF_TO_CSS_UNITS",kw.CSS/kw.PDF);let Rv=kw;async function E5(t,e="text"){if($T(t,document.baseURI)){const r=await fetch(t);if(!r.ok)throw new Error(r.statusText);switch(e){case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"json":return r.json()}return r.text()}return new Promise((r,n)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":r(i.response);return}r(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class qI{constructor({viewBox:e,userUnit:r,scale:n,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=r,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=o,n*=r;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,f=0,m=1;break;case 90:d=0,h=1,f=1,m=0;break;case 270:d=0,h=-1,f=-1,m=0;break;case 0:d=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,m=-m);let x,g,y,w;d===0?(x=Math.abs(u-e[1])*n+s,g=Math.abs(c-e[0])*n+o,y=(e[3]-e[1])*n,w=(e[2]-e[0])*n):(x=Math.abs(c-e[0])*n+s,g=Math.abs(u-e[1])*n+o,y=(e[2]-e[0])*n,w=(e[3]-e[1])*n),this.transform=[d*n,h*n,f*n,m*n,x-d*n*c-f*n*u,g-h*n*c-m*n*u],this.width=y,this.height=w}get rawDims(){const e=this.viewBox;return Ci(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:r=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new qI({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,r){const n=[e,r];return rn.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const r=[e[0],e[1]];rn.applyTransform(r,this.transform);const n=[e[2],e[3]];return rn.applyTransform(n,this.transform),[r[0],r[1],n[0],n[1]]}convertToPdfPoint(e,r){const n=[e,r];return rn.applyInverseTransform(n,this.transform),n}}class UB extends CN{constructor(e,r=0){super(e,"RenderingCancelledException"),this.extraDelay=r}}function HI(t){const e=t.length;let r=0;for(;r<e&&t[r].trim()==="";)r++;return t.substring(r,r+5).toLowerCase()==="data:"}function zB(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function F5e(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function B5e(t,e="document.pdf"){if(typeof t!="string")return e;if(HI(t))return ci('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!n)return e;const i=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},s=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(s.test(o))return i(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const u of l)if(s.test(u))return i(u);const c=Array.from(n.searchParams.keys()).reverse();for(const u of c)if(s.test(u))return i(u)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return i(c[0])}return e}class Ohe{constructor(){rr(this,"started",Object.create(null));rr(this,"times",[])}time(e){e in this.started&&ci(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ci(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let r=0;for(const{name:n}of this.times)r=Math.max(n.length,r);for(const{name:n,start:i,end:s}of this.times)e.push(`${n.padEnd(r)} ${s-i}ms
`);return e.join("")}}function $T(t,e){const r=e?URL.parse(t,e):URL.parse(t);return(r==null?void 0:r.protocol)==="http:"||(r==null?void 0:r.protocol)==="https:"}function Df(t){t.preventDefault()}function mo(t){t.preventDefault(),t.stopPropagation()}function B8t(t){console.log("Deprecated API usage: "+t)}var lk;class JP{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;N(this,lk)||ae(this,lk,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const r=N(this,lk).exec(e);if(!r)return null;const n=parseInt(r[1],10);let i=parseInt(r[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(r[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(r[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(r[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(r[6],10);c=c>=0&&c<=59?c:0;const u=r[7]||"Z";let d=parseInt(r[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(r[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,l+=h):u==="+"&&(o-=d,l-=h),new Date(Date.UTC(n,i,s,o,l,c))}}lk=new WeakMap,ge(JP,lk);function $5e(t,{scale:e=1,rotation:r=0}){const{width:n,height:i}=t.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new qI({viewBox:s,userUnit:1,scale:e,rotation:r})}function j5(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ci(`Not a valid color format: "${t}"`),[0,0,0])}function $8t(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const r of t.keys()){e.style.color=r;const n=window.getComputedStyle(e).color;t.set(r,j5(n))}e.remove()}function co(t){const{a:e,b:r,c:n,d:i,e:s,f:o}=t.getTransform();return[e,r,n,i,s,o]}function _0(t){const{a:e,b:r,c:n,d:i,e:s,f:o}=t.getTransform().invertSelf();return[e,r,n,i,s,o]}function Ob(t,e,r=!1,n=!0){if(e instanceof qI){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=t,l=vc.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${s}px`,d=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!r||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}n&&t.setAttribute("data-main-rotation",e.rotation)}class s0{constructor(){const{pixelRatio:e}=s0;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,r,n,i,s=-1){let o=1/0,l=1/0,c=1/0;n=s0.capPixels(n,s),n>0&&(o=Math.sqrt(n/(e*r))),i!==-1&&(l=i/e,c=i/r);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,r){if(r>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+r/100));return e>0?Math.min(e,n):n}return e}}const HL=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class U8t{static get isDarkMode(){var e;return Ci(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class U5e{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:r}=e;r.width=r.height="0",r.display="none",r.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Ci(this,"commentForegroundColor",j5(n))}}function z5e(t,e,r,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return t=Math.round(t*n+i),e=Math.round(e*n+i),r=Math.round(r*n+i),[t,e,r]}function Ihe(t,e){const r=t[0]/255,n=t[1]/255,i=t[2]/255,s=Math.max(r,n,i),o=Math.min(r,n,i),l=(s+o)/2;if(s===o)e[0]=e[1]=0;else{const c=s-o;switch(e[1]=l<.5?c/(s+o):c/(2-s-o),s){case r:e[0]=((n-i)/c+(n<i?6:0))*60;break;case n:e[0]=((i-r)/c+2)*60;break;case i:e[0]=((r-n)/c+4)*60;break}}e[2]=l}function YW(t,e){const r=t[0],n=t[1],i=t[2],s=(1-Math.abs(2*i-1))*n,o=s*(1-Math.abs(r/60%2-1)),l=i-s/2;switch(Math.floor(r/60)){case 0:e[0]=s+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=s+l,e[2]=l;break;case 2:e[0]=l,e[1]=s+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=s+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=s+l;break;case 5:case 6:e[0]=s+l,e[1]=l,e[2]=o+l;break}}function Rhe(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function Dhe(t,e,r){YW(t,r),r.map(Rhe);const n=.2126*r[0]+.7152*r[1]+.0722*r[2];YW(e,r),r.map(Rhe);const i=.2126*r[0]+.7152*r[1]+.0722*r[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const Mhe=new Map;function V5e(t,e){const r=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=Mhe.get(r);if(n)return n;const i=new Float32Array(9),s=i.subarray(0,3),o=i.subarray(3,6);Ihe(t,o);const l=i.subarray(6,9);Ihe(e,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Dhe(o,l,s)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const m=o[2]=(d+h)/2;c===Dhe(o,l,s)<u?d=m:h=m}o[2]=c?h:d}return YW(o,s),n=rn.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),Mhe.set(r,n),n}function iee({html:t,dir:e,className:r},n){const i=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const o=t.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];s.append(document.createTextNode(u)),l<c-1&&s.append(document.createElement("br"))}i.append(s)}else nee.render({xfaHtml:t,div:i,intent:"richText"});i.firstChild.classList.add("richText",r),n.append(i)}var B1,$1,em,tm,ck,U1,qE,HE,uk,nF,q5e,Jc,H5e,W5e,yS,UT;const dx=class dx{constructor(e){ge(this,Jc);ge(this,B1,null);ge(this,$1,null);ge(this,em);ge(this,tm,null);ge(this,ck,null);ge(this,U1,null);ge(this,qE,null);ge(this,HE,null);ae(this,em,e),N(dx,uk)||ae(dx,uk,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=ae(this,B1,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const r=N(this,em)._uiManager._signal;r instanceof AbortSignal&&!r.aborted&&(e.addEventListener("contextmenu",Df,{signal:r}),e.addEventListener("pointerdown",ve(dx,nF,q5e),{signal:r}));const n=ae(this,tm,document.createElement("div"));n.className="buttons",e.append(n);const i=N(this,em).toolbarPosition;if(i){const{style:s}=e,o=N(this,em)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return N(this,B1)}hide(){var e;N(this,B1).classList.add("hidden"),(e=N(this,$1))==null||e.hideDropdown()}show(){var e,r;N(this,B1).classList.remove("hidden"),(e=N(this,ck))==null||e.shown(),(r=N(this,U1))==null||r.shown()}addDeleteButton(){const{editorType:e,_uiManager:r}=N(this,em),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",N(dx,uk)[e]),ve(this,Jc,yS).call(this,n)&&n.addEventListener("click",i=>{r.delete()},{signal:r._signal}),N(this,tm).append(n)}async addAltText(e){const r=await e.render();ve(this,Jc,yS).call(this,r),N(this,tm).append(r,N(this,Jc,UT)),ae(this,ck,e)}addComment(e,r=null){if(N(this,U1))return;const n=e.renderForToolbar();if(!n)return;ve(this,Jc,yS).call(this,n);const i=ae(this,qE,N(this,Jc,UT));r?(N(this,tm).insertBefore(n,r),N(this,tm).insertBefore(i,r)):N(this,tm).append(n,i),ae(this,U1,e),e.toolbar=this}addColorPicker(e){if(N(this,$1))return;ae(this,$1,e);const r=e.renderButton();ve(this,Jc,yS).call(this,r),N(this,tm).append(r,N(this,Jc,UT))}async addEditSignatureButton(e){const r=ae(this,HE,await e.renderEditButton(N(this,em)));ve(this,Jc,yS).call(this,r),N(this,tm).append(r,N(this,Jc,UT))}removeButton(e){var r,n;switch(e){case"comment":(r=N(this,U1))==null||r.removeToolbarCommentButton(),ae(this,U1,null),(n=N(this,qE))==null||n.remove(),ae(this,qE,null);break}}async addButton(e,r){switch(e){case"colorPicker":this.addColorPicker(r);break;case"altText":await this.addAltText(r);break;case"editSignature":await this.addEditSignatureButton(r);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(r);break}}async addButtonBefore(e,r,n){const i=N(this,tm).querySelector(n);i&&e==="comment"&&this.addComment(r,i)}updateEditSignatureButton(e){N(this,HE)&&(N(this,HE).title=e)}remove(){var e;N(this,B1).remove(),(e=N(this,$1))==null||e.destroy(),ae(this,$1,null)}};B1=new WeakMap,$1=new WeakMap,em=new WeakMap,tm=new WeakMap,ck=new WeakMap,U1=new WeakMap,qE=new WeakMap,HE=new WeakMap,uk=new WeakMap,nF=new WeakSet,q5e=function(e){e.stopPropagation()},Jc=new WeakSet,H5e=function(e){N(this,em)._focusEventsAllowed=!1,mo(e)},W5e=function(e){N(this,em)._focusEventsAllowed=!0,mo(e)},yS=function(e){const r=N(this,em)._uiManager._signal;return!(r instanceof AbortSignal)||r.aborted?!1:(e.addEventListener("focusin",ve(this,Jc,H5e).bind(this),{capture:!0,signal:r}),e.addEventListener("focusout",ve(this,Jc,W5e).bind(this),{capture:!0,signal:r}),e.addEventListener("contextmenu",Df,{signal:r}),!0)},UT=function(){const e=document.createElement("div");return e.className="divider",e},ge(dx,nF),ge(dx,uk,null);let ZW=dx;var dk,s2,bx,Dv,G5e,K5e,QW;class z8t{constructor(e){ge(this,Dv);ge(this,dk,null);ge(this,s2,null);ge(this,bx);ae(this,bx,e)}show(e,r,n){const[i,s]=ve(this,Dv,K5e).call(this,r,n),{style:o}=N(this,s2)||ae(this,s2,ve(this,Dv,G5e).call(this));e.append(N(this,s2)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){N(this,s2).remove()}}dk=new WeakMap,s2=new WeakMap,bx=new WeakMap,Dv=new WeakSet,G5e=function(){const e=ae(this,s2,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const r=N(this,bx)._signal;r instanceof AbortSignal&&!r.aborted&&e.addEventListener("contextmenu",Df,{signal:r});const n=ae(this,dk,document.createElement("div"));return n.className="buttons",e.append(n),N(this,bx).hasCommentManager()&&ve(this,Dv,QW).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{N(this,bx).commentSelection("floating_button")}),ve(this,Dv,QW).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{N(this,bx).highlightSelection("floating_button")}),e},K5e=function(e,r){let n=0,i=0;for(const s of e){const o=s.y+s.height;if(o<n)continue;const l=s.x+(r?s.width:0);if(o>n){i=l,n=o;continue}r?l>i&&(i=l):l<i&&(i=l)}return[r?1-i:i,n]},QW=function(e,r,n,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",r);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const l=N(this,bx)._signal;l instanceof AbortSignal&&!l.aborted&&(s.addEventListener("contextmenu",Df,{signal:l}),s.addEventListener("click",i,{signal:l})),N(this,dk).append(s)};function X5e(t,e,r){for(const n of r)e.addEventListener(n,t[n].bind(t))}var iF;class V8t{constructor(){ge(this,iF,0)}get id(){return`${YP}${Eo(this,iF)._++}`}}iF=new WeakMap;var WE,hk,ju,GE,T6;const wee=class wee{constructor(){ge(this,GE);ge(this,WE,tee());ge(this,hk,0);ge(this,ju,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ci(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:r,name:n,size:i,type:s}=e;return ve(this,GE,T6).call(this,`${r}_${n}_${i}_${s}`,e)}async getFromUrl(e){return ve(this,GE,T6).call(this,e,e)}async getFromBlob(e,r){const n=await r;return ve(this,GE,T6).call(this,e,n)}async getFromId(e){N(this,ju)||ae(this,ju,new Map);const r=N(this,ju).get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return this.getFromFile(r.file);if(r.blobPromise){const{blobPromise:n}=r;return delete r.blobPromise,this.getFromBlob(r.id,n)}return this.getFromUrl(r.url)}getFromCanvas(e,r){N(this,ju)||ae(this,ju,new Map);let n=N(this,ju).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(r.width,r.height);return i.getContext("2d").drawImage(r,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${N(this,WE)}_${Eo(this,hk)._++}`,refCounter:1,isSvg:!1},N(this,ju).set(e,n),N(this,ju).set(n.id,n),n}getSvgUrl(e){const r=N(this,ju).get(e);return r!=null&&r.isSvg?r.svgUrl:null}deleteId(e){var i;N(this,ju)||ae(this,ju,new Map);const r=N(this,ju).get(e);if(!r||(r.refCounter-=1,r.refCounter!==0))return;const{bitmap:n}=r;if(!r.url&&!r.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),r.blobPromise=s.convertToBlob()}(i=n.close)==null||i.call(n),r.bitmap=null}isValidId(e){return e.startsWith(`image_${N(this,WE)}_`)}};WE=new WeakMap,hk=new WeakMap,ju=new WeakMap,GE=new WeakSet,T6=async function(e,r){N(this,ju)||ae(this,ju,new Map);let n=N(this,ju).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${N(this,WE)}_${Eo(this,hk)._++}`,refCounter:0,isSvg:!1});let i;if(typeof r=="string"?(n.url=r,i=await E5(r,"blob")):r instanceof File?i=n.file=r:r instanceof Blob&&(i=r),i.type==="image/svg+xml"){const s=wee._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,u()},o.onload=async()=>{const h=n.svgUrl=o.result;l.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},l.onerror=o.onerror=d});o.readAsDataURL(i),await c}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){ci(i),n=null}return N(this,ju).set(e,n),n&&N(this,ju).set(n.id,n),n};let JW=wee;var el,z1,fk,lo;class q8t{constructor(e=128){ge(this,el,[]);ge(this,z1,!1);ge(this,fk);ge(this,lo,-1);ae(this,fk,e)}add({cmd:e,undo:r,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),N(this,z1))return;const c={cmd:e,undo:r,post:n,type:s};if(N(this,lo)===-1){N(this,el).length>0&&(N(this,el).length=0),ae(this,lo,0),N(this,el).push(c);return}if(o&&N(this,el)[N(this,lo)].type===s){l&&(c.undo=N(this,el)[N(this,lo)].undo),N(this,el)[N(this,lo)]=c;return}const u=N(this,lo)+1;u===N(this,fk)?N(this,el).splice(0,1):(ae(this,lo,u),u<N(this,el).length&&N(this,el).splice(u)),N(this,el).push(c)}undo(){if(N(this,lo)===-1)return;ae(this,z1,!0);const{undo:e,post:r}=N(this,el)[N(this,lo)];e(),r==null||r(),ae(this,z1,!1),ae(this,lo,N(this,lo)-1)}redo(){if(N(this,lo)<N(this,el).length-1){ae(this,lo,N(this,lo)+1),ae(this,z1,!0);const{cmd:e,post:r}=N(this,el)[N(this,lo)];e(),r==null||r(),ae(this,z1,!1)}}hasSomethingToUndo(){return N(this,lo)!==-1}hasSomethingToRedo(){return N(this,lo)<N(this,el).length-1}cleanType(e){if(N(this,lo)!==-1){for(let r=N(this,lo);r>=0;r--)if(N(this,el)[r].type!==e){N(this,el).splice(r+1,N(this,lo)-r),ae(this,lo,r);return}N(this,el).length=0,ae(this,lo,-1)}}destroy(){ae(this,el,null)}}el=new WeakMap,z1=new WeakMap,fk=new WeakMap,lo=new WeakMap;var sF,Y5e;class WI{constructor(e){ge(this,sF);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=vc.platform;for(const[n,i,s={}]of e)for(const o of n){const l=o.startsWith("mac+");r&&l?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!r&&!l&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,r){if(!this.allKeys.has(r.key))return;const n=this.callbacks.get(ve(this,sF,Y5e).call(this,r));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:l=null}}=n;l&&!l(e,r)||(i.bind(e,...o,r)(),s||mo(r))}}sF=new WeakSet,Y5e=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r};const aF=class aF{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return $8t(e),Ci(this,"_colors",e)}convert(e){const r=j5(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[n,i]of this._colors)if(i.every((s,o)=>s===r[o]))return aF._colorsMapping.get(n);return r}getHexCode(e){const r=this._colors.get(e);return r?rn.makeHexColor(...r):e}};rr(aF,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let eG=aF;var KE,Vh,XE,Co,Bl,YE,rm,ZE,nm,Au,V1,q1,QE,H1,O0,im,a2,mk,pk,JE,gk,I0,W1,ej,G1,R0,oF,K1,tj,xk,X1,o2,rj,Y1,vk,hl,Ms,wx,Z1,Q1,yk,nj,bk,J1,D0,_x,wk,_k,sm,qr,P6,tG,Z5e,Q5e,zT,J5e,eTe,tTe,rG,rTe,nG,iG,nTe,sd,ax,iTe,sTe,sG,aTe,VT,aG;const rE=class rE{constructor(e,r,n,i,s,o,l,c,u,d,h,f,m,x,g,y){ge(this,qr);ge(this,KE,new AbortController);ge(this,Vh,null);ge(this,XE,null);ge(this,Co,new Map);ge(this,Bl,new Map);ge(this,YE,null);ge(this,rm,null);ge(this,ZE,null);ge(this,nm,new q8t);ge(this,Au,null);ge(this,V1,null);ge(this,q1,null);ge(this,QE,0);ge(this,H1,new Set);ge(this,O0,null);ge(this,im,null);ge(this,a2,new Set);rr(this,"_editorUndoBar",null);ge(this,mk,!1);ge(this,pk,!1);ge(this,JE,!1);ge(this,gk,null);ge(this,I0,null);ge(this,W1,null);ge(this,ej,null);ge(this,G1,!1);ge(this,R0,null);ge(this,oF,new V8t);ge(this,K1,!1);ge(this,tj,!1);ge(this,xk,!1);ge(this,X1,null);ge(this,o2,null);ge(this,rj,null);ge(this,Y1,null);ge(this,vk,null);ge(this,hl,li.NONE);ge(this,Ms,new Set);ge(this,wx,null);ge(this,Z1,null);ge(this,Q1,null);ge(this,yk,null);ge(this,nj,null);ge(this,bk,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});ge(this,J1,[0,0]);ge(this,D0,null);ge(this,_x,null);ge(this,wk,null);ge(this,_k,null);ge(this,sm,null);const w=this._signal=N(this,KE).signal;ae(this,_x,e),ae(this,wk,r),ae(this,_k,n),ae(this,YE,i),ae(this,Au,s),ae(this,Z1,o),ae(this,nj,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:w}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),l._on("setpreference",this.onSetPreference.bind(this),{signal:w}),l._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:w}),window.addEventListener("pointerdown",()=>{ae(this,tj,!0)},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{ae(this,tj,!1)},{capture:!0,signal:w}),ve(this,qr,J5e).call(this),ve(this,qr,nTe).call(this),ve(this,qr,rG).call(this),ae(this,rm,c.annotationStorage),ae(this,gk,c.filterFactory),ae(this,Q1,u),ae(this,ej,d||null),ae(this,mk,h),ae(this,pk,f),ae(this,JE,m),ae(this,vk,x||null),this.viewParameters={realScale:Rv.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=y!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=rE.prototype,r=o=>N(o,_x).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ci(this,"_keyboardManager",new WI([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&N(o,_x).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&N(o,_x).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:r}]]))}destroy(){var e,r,n,i,s,o,l,c,u;(e=N(this,sm))==null||e.resolve(),ae(this,sm,null),(r=N(this,KE))==null||r.abort(),ae(this,KE,null),this._signal=null;for(const d of N(this,Bl).values())d.destroy();N(this,Bl).clear(),N(this,Co).clear(),N(this,a2).clear(),(n=N(this,Y1))==null||n.clear(),ae(this,Vh,null),N(this,Ms).clear(),N(this,nm).destroy(),(i=N(this,YE))==null||i.destroy(),(s=N(this,Au))==null||s.destroy(),(o=N(this,Z1))==null||o.destroy(),(l=N(this,R0))==null||l.hide(),ae(this,R0,null),(c=N(this,rj))==null||c.destroy(),ae(this,rj,null),ae(this,XE,null),N(this,I0)&&(clearTimeout(N(this,I0)),ae(this,I0,null)),N(this,D0)&&(clearTimeout(N(this,D0)),ae(this,D0,null)),(u=this._editorUndoBar)==null||u.destroy(),ae(this,nj,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return N(this,vk)}get useNewAltTextFlow(){return N(this,pk)}get useNewAltTextWhenAddingImage(){return N(this,JE)}get hcmFilter(){return Ci(this,"hcmFilter",N(this,Q1)?N(this,gk).addHCMFilter(N(this,Q1).foreground,N(this,Q1).background):"none")}get direction(){return Ci(this,"direction",getComputedStyle(N(this,_x)).direction)}get _highlightColors(){return Ci(this,"_highlightColors",N(this,ej)?new Map(N(this,ej).split(",").map(e=>(e=e.split("=").map(r=>r.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ci(this,"highlightColors",null);const r=new Map,n=!!N(this,Q1);for(const[i,s]of e){const o=i.endsWith("_HCM");if(n&&o){r.set(i.replace("_HCM",""),s);continue}!n&&!o&&r.set(i,s)}return Ci(this,"highlightColors",r)}get highlightColorNames(){return Ci(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const r=this.highlightColorNames.get(e);return this._highlightColors.get(r)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),ae(this,q1,e)}setMainHighlightColorPicker(e){ae(this,rj,e)}editAltText(e,r=!1){var n;(n=N(this,YE))==null||n.editAltText(this,e,r)}hasCommentManager(){return!!N(this,Au)}editComment(e,r,n,i){var s;(s=N(this,Au))==null||s.showDialog(this,e,r,n,i)}selectComment(e,r){const n=N(this,Bl).get(e),i=n==null?void 0:n.getEditorByUID(r);i==null||i.toggleComment(!0,!0)}updateComment(e){var r;(r=N(this,Au))==null||r.updateComment(e.getData())}updatePopupColor(e){var r;(r=N(this,Au))==null||r.updatePopupColor(e)}removeComment(e){var r;(r=N(this,Au))==null||r.removeComments([e.uid])}toggleComment(e,r,n=void 0){var i;(i=N(this,Au))==null||i.toggleCommentPopup(e,r,n)}makeCommentColor(e,r){var n;return e&&((n=N(this,Au))==null?void 0:n.makeCommentColor(e,r))||null}getCommentDialogElement(){var e;return((e=N(this,Au))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(N(this,Bl).has(e-1))return;const{resolve:r,promise:n}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),r())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var r;(r=N(this,Z1))==null||r.getSignature({uiManager:this,editor:e})}get signatureManager(){return N(this,Z1)}switchToMode(e,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,r){this._eventBus.dispatch("setpreference",{source:this,name:e,value:r})}onSetPreference({name:e,value:r}){switch(e){case"enableNewAltTextWhenAddingImage":ae(this,JE,r);break}}onPageChanging({pageNumber:e}){ae(this,QE,e-1)}focusMainContainer(){N(this,_x).focus()}findParent(e,r){for(const n of N(this,Bl).values()){const{x:i,y:s,width:o,height:l}=n.div.getBoundingClientRect();if(e>=i&&e<=i+o&&r>=s&&r<=s+l)return n}return null}disableUserSelect(e=!1){N(this,wk).classList.toggle("noUserSelect",e)}addShouldRescale(e){N(this,a2).add(e)}removeShouldRescale(e){N(this,a2).delete(e)}onScaleChanging({scale:e}){var r;this.commitOrRemove(),this.viewParameters.realScale=e*Rv.PDF_TO_CSS_UNITS;for(const n of N(this,a2))n.onScaleChanging();(r=N(this,q1))==null||r.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",r=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:l}=n,c=n.toString(),d=ve(this,qr,P6).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;n.empty();const f=ve(this,qr,tG).call(this,d),m=N(this,hl)===li.NONE,x=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),r&&(g==null||g.editComment())};if(m){this.switchToMode(li.HIGHLIGHT,x);return}x()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!N(this,rm))return null;const r=`${YP}${e}`,n=N(this,rm).getRawValue(r);return n&&N(this,rm).remove(r),n}addToAnnotationStorage(e){!e.isEmpty()&&N(this,rm)&&!N(this,rm).has(e.id)&&N(this,rm).setValue(e.id,e)}a11yAlert(e,r=null){const n=N(this,_k);n&&(n.setAttribute("data-l10n-id",e),r?n.setAttribute("data-l10n-args",JSON.stringify(r)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,N(this,G1)&&(ae(this,G1,!1),ve(this,qr,zT).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const r of N(this,Ms))if(r.div.contains(e)){ae(this,o2,[r,e]),r._focusEventsAllowed=!1;break}}focus(){if(!N(this,o2))return;const[e,r]=N(this,o2);ae(this,o2,null),r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}addEditListeners(){ve(this,qr,rG).call(this),ve(this,qr,nG).call(this)}removeEditListeners(){ve(this,qr,rTe).call(this),ve(this,qr,iG).call(this)}dragOver(e){for(const{type:r}of e.dataTransfer.items)for(const n of N(this,im))if(n.isHandlingMimeForPasting(r)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const r of e.dataTransfer.items)for(const n of N(this,im))if(n.isHandlingMimeForPasting(r.type)){n.paste(r,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=N(this,Vh))==null||n.commitOrRemove(),!this.hasSelection)return;const r=[];for(const i of N(this,Ms)){const s=i.serialize(!0);s&&r.push(s)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:r}=e;for(const s of r.items)for(const o of N(this,im))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let n=r.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){ci(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const c of n){const u=await i.deserialize(c);if(!u)return;s.push(u)}const o=()=>{for(const c of s)ve(this,qr,sG).call(this,c);ve(this,qr,aG).call(this,s)},l=()=>{for(const c of s)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(s){ci(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),N(this,hl)!==li.NONE&&!this.isEditorHandlingKeyboard&&rE._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,N(this,G1)&&(ae(this,G1,!1),ve(this,qr,zT).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(ve(this,qr,eTe).call(this),ve(this,qr,nG).call(this),ve(this,qr,sd).call(this,{isEditing:N(this,hl)!==li.NONE,isEmpty:ve(this,qr,VT).call(this),hasSomethingToUndo:N(this,nm).hasSomethingToUndo(),hasSomethingToRedo:N(this,nm).hasSomethingToRedo(),hasSelectedEditor:!1})):(ve(this,qr,tTe).call(this),ve(this,qr,iG).call(this),ve(this,qr,sd).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!N(this,im)){ae(this,im,e);for(const r of N(this,im))ve(this,qr,ax).call(this,r.defaultPropertiesToUpdate)}}getId(){return N(this,oF).id}get currentLayer(){return N(this,Bl).get(N(this,QE))}getLayer(e){return N(this,Bl).get(e)}get currentPageIndex(){return N(this,QE)}addLayer(e){N(this,Bl).set(e.pageIndex,e),N(this,K1)?e.enable():e.disable()}removeLayer(e){N(this,Bl).delete(e.pageIndex)}async updateMode(e,r=null,n=!1,i=!1,s=!1){var o,l,c,u,d,h;if(N(this,hl)!==e&&!(N(this,sm)&&(await N(this,sm).promise,!N(this,sm)))){if(ae(this,sm,Promise.withResolvers()),(o=N(this,q1))==null||o.commitOrRemove(),N(this,hl)===li.POPUP&&((l=N(this,Au))==null||l.hideSidebar()),(c=N(this,Au))==null||c.destroyPopup(),ae(this,hl,e),e===li.NONE){this.setEditingState(!1),ve(this,qr,sTe).call(this);for(const f of N(this,Co).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),N(this,sm).resolve();return}for(const f of N(this,Co).values())f.addStandaloneCommentButton();e===li.SIGNATURE&&await((d=N(this,Z1))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await ve(this,qr,iTe).call(this),this.unselectAll();for(const f of N(this,Bl).values())f.updateMode(e);if(e===li.POPUP){N(this,XE)||ae(this,XE,await N(this,nj).getAnnotationsByType(new Set(N(this,im).map(x=>x._editorType))));const f=new Set,m=[];for(const x of N(this,Co).values()){const{annotationElementId:g,hasComment:y,deleted:w}=x;g&&f.add(g),y&&!w&&m.push(x.getData())}for(const x of N(this,XE)){const{id:g,popupRef:y,contentsObj:w}=x;y&&(w!=null&&w.str)&&!f.has(g)&&!N(this,H1).has(g)&&m.push(x)}(h=N(this,Au))==null||h.showSidebar(m)}if(!r){n&&this.addNewEditorFromKeyboard(),N(this,sm).resolve();return}for(const f of N(this,Co).values())f.uid===r?(this.setSelected(f),s?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();N(this,sm).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==N(this,hl)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,r){if(N(this,im)){switch(e){case Hi.CREATE:this.currentLayer.addNewEditor(r);return;case Hi.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(N(this,yk)||ae(this,yk,new Map)).set(e,r),this.showAllEditors("highlight",r);break}if(this.hasSelection)for(const n of N(this,Ms))n.updateParams(e,r);else for(const n of N(this,im))n.updateDefaultParams(e,r)}}showAllEditors(e,r,n=!1){var s;for(const o of N(this,Co).values())o.editorType===e&&o.show(r);(((s=N(this,yk))==null?void 0:s.get(Hi.HIGHLIGHT_SHOW_ALL))??!0)!==r&&ve(this,qr,ax).call(this,[[Hi.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(e=!1){if(N(this,xk)!==e){ae(this,xk,e);for(const r of N(this,Bl).values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}*getEditors(e){for(const r of N(this,Co).values())r.pageIndex===e&&(yield r)}getEditor(e){return N(this,Co).get(e)}addEditor(e){N(this,Co).set(e.id,e)}removeEditor(e){var r,n;e.div.contains(document.activeElement)&&(N(this,I0)&&clearTimeout(N(this,I0)),ae(this,I0,setTimeout(()=>{this.focusMainContainer(),ae(this,I0,null)},0))),N(this,Co).delete(e.id),e.annotationElementId&&((r=N(this,Y1))==null||r.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!N(this,H1).has(e.annotationElementId))&&((n=N(this,rm))==null||n.remove(e.id))}addDeletedAnnotationElement(e){N(this,H1).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return N(this,H1).has(e)}removeDeletedAnnotationElement(e){N(this,H1).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){N(this,Vh)!==e&&(ae(this,Vh,e),e&&ve(this,qr,ax).call(this,e.propertiesToUpdate))}updateUI(e){N(this,qr,aTe)===e&&ve(this,qr,ax).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){ve(this,qr,ax).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(N(this,Ms).has(e)){N(this,Ms).delete(e),e.unselect(),ve(this,qr,sd).call(this,{hasSelectedEditor:this.hasSelection});return}N(this,Ms).add(e),e.select(),ve(this,qr,ax).call(this,e.propertiesToUpdate),ve(this,qr,sd).call(this,{hasSelectedEditor:!0})}setSelected(e){var r;this.updateToolbar({mode:e.mode,editId:e.id}),(r=N(this,q1))==null||r.commitOrRemove();for(const n of N(this,Ms))n!==e&&n.unselect();N(this,Ms).clear(),N(this,Ms).add(e),e.select(),ve(this,qr,ax).call(this,e.propertiesToUpdate),ve(this,qr,sd).call(this,{hasSelectedEditor:!0})}isSelected(e){return N(this,Ms).has(e)}get firstSelectedEditor(){return N(this,Ms).values().next().value}unselect(e){e.unselect(),N(this,Ms).delete(e),ve(this,qr,sd).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return N(this,Ms).size!==0}get isEnterHandled(){return N(this,Ms).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;N(this,nm).undo(),ve(this,qr,sd).call(this,{hasSomethingToUndo:N(this,nm).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ve(this,qr,VT).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){N(this,nm).redo(),ve(this,qr,sd).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:N(this,nm).hasSomethingToRedo(),isEmpty:ve(this,qr,VT).call(this)})}addCommands(e){N(this,nm).add(e),ve(this,qr,sd).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ve(this,qr,VT).call(this)})}cleanUndoStack(e){N(this,nm).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const r=e?[e]:[...N(this,Ms)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,r.length===1?r[0].editorType:r.length);for(const l of r)l.remove()},i=()=>{for(const o of r)ve(this,qr,sG).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=N(this,Vh))==null||e.commitOrRemove()}hasSomethingToControl(){return N(this,Vh)||this.hasSelection}selectAll(){for(const e of N(this,Ms))e.commit();ve(this,qr,aG).call(this,N(this,Co).values())}unselectAll(){var e;if(!(N(this,Vh)&&(N(this,Vh).commitOrRemove(),N(this,hl)!==li.NONE))&&!((e=N(this,q1))!=null&&e.commitOrRemove())&&this.hasSelection){for(const r of N(this,Ms))r.unselect();N(this,Ms).clear(),ve(this,qr,sd).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,r,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;N(this,J1)[0]+=e,N(this,J1)[1]+=r;const[i,s]=N(this,J1),o=[...N(this,Ms)],l=1e3;N(this,D0)&&clearTimeout(N(this,D0)),ae(this,D0,setTimeout(()=>{ae(this,D0,null),N(this,J1)[0]=N(this,J1)[1]=0,this.addCommands({cmd:()=>{for(const c of o)N(this,Co).has(c.id)&&(c.translateInPage(i,s),c.translationDone())},undo:()=>{for(const c of o)N(this,Co).has(c.id)&&(c.translateInPage(-i,-s),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,r),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ae(this,O0,new Map);for(const e of N(this,Ms))N(this,O0).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!N(this,O0))return!1;this.disableUserSelect(!1);const e=N(this,O0);ae(this,O0,null);let r=!1;for(const[{x:i,y:s,pageIndex:o},l]of e)l.newX=i,l.newY=s,l.newPageIndex=o,r||(r=i!==l.savedX||s!==l.savedY||o!==l.savedPageIndex);if(!r)return!1;const n=(i,s,o,l)=>{if(N(this,Co).has(i.id)){const c=N(this,Bl).get(l);c?i._setParentAndPosition(c,s,o):(i.pageIndex=l,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:l}]of e)n(i,s,o,l)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:l}]of e)n(i,s,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(N(this,O0))for(const n of N(this,O0).keys())n.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||N(this,Ms).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return N(this,Vh)===e}getActive(){return N(this,Vh)}getMode(){return N(this,hl)}isEditingMode(){return N(this,hl)!==li.NONE}get imageManager(){return Ci(this,"imageManager",new JW)}getSelectionBoxes(e){if(!e)return null;const r=document.getSelection();for(let u=0,d=r.rangeCount;u<d;u++)if(!e.contains(r.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-i)/o,y:1-(u+h-n)/s,width:f/o,height:h/s});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-n)/s,y:1-(d+f-i)/o,width:h/s,height:f/o});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-i)/o,y:(u-n)/s,width:f/o,height:h/s});break;default:l=(u,d,h,f)=>({x:(u-n)/s,y:(d-i)/o,width:h/s,height:f/o});break}const c=[];for(let u=0,d=r.rangeCount;u<d;u++){const h=r.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:m,width:x,height:g}of h.getClientRects())x===0||g===0||c.push(l(f,m,x,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:r}){(N(this,ZE)||ae(this,ZE,new Map)).set(e,r)}removeChangedExistingAnnotation({annotationElementId:e}){var r;(r=N(this,ZE))==null||r.delete(e)}renderAnnotationElement(e){var i;const r=(i=N(this,ZE))==null?void 0:i.get(e.data.id);if(!r)return;const n=N(this,rm).getRawValue(r);n&&(N(this,hl)===li.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,r,n){var s;const i=(s=N(this,Y1))==null?void 0:s.get(e);i&&(i.setCanvas(r,n),N(this,Y1).delete(e))}addMissingCanvas(e,r){(N(this,Y1)||ae(this,Y1,new Map)).set(e,r)}};KE=new WeakMap,Vh=new WeakMap,XE=new WeakMap,Co=new WeakMap,Bl=new WeakMap,YE=new WeakMap,rm=new WeakMap,ZE=new WeakMap,nm=new WeakMap,Au=new WeakMap,V1=new WeakMap,q1=new WeakMap,QE=new WeakMap,H1=new WeakMap,O0=new WeakMap,im=new WeakMap,a2=new WeakMap,mk=new WeakMap,pk=new WeakMap,JE=new WeakMap,gk=new WeakMap,I0=new WeakMap,W1=new WeakMap,ej=new WeakMap,G1=new WeakMap,R0=new WeakMap,oF=new WeakMap,K1=new WeakMap,tj=new WeakMap,xk=new WeakMap,X1=new WeakMap,o2=new WeakMap,rj=new WeakMap,Y1=new WeakMap,vk=new WeakMap,hl=new WeakMap,Ms=new WeakMap,wx=new WeakMap,Z1=new WeakMap,Q1=new WeakMap,yk=new WeakMap,nj=new WeakMap,bk=new WeakMap,J1=new WeakMap,D0=new WeakMap,_x=new WeakMap,wk=new WeakMap,_k=new WeakMap,sm=new WeakMap,qr=new WeakSet,P6=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},tG=function(e){const{currentLayer:r}=this;if(r.hasTextLayer(e))return r;for(const n of N(this,Bl).values())if(n.hasTextLayer(e))return n;return null},Z5e=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=ve(this,qr,P6).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(N(this,R0)||ae(this,R0,new z8t(this)),N(this,R0).show(n,i,this.direction==="ltr"))},Q5e=function(){var s,o,l;const e=document.getSelection();if(!e||e.isCollapsed){N(this,wx)&&((s=N(this,R0))==null||s.hide(),ae(this,wx,null),ve(this,qr,sd).call(this,{hasSelectedText:!1}));return}const{anchorNode:r}=e;if(r===N(this,wx))return;const i=ve(this,qr,P6).call(this,e).closest(".textLayer");if(!i){N(this,wx)&&((o=N(this,R0))==null||o.hide(),ae(this,wx,null),ve(this,qr,sd).call(this,{hasSelectedText:!1}));return}if((l=N(this,R0))==null||l.hide(),ae(this,wx,r),ve(this,qr,sd).call(this,{hasSelectedText:!0}),!(N(this,hl)!==li.HIGHLIGHT&&N(this,hl)!==li.NONE)&&(N(this,hl)===li.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),ae(this,G1,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=N(this,hl)===li.HIGHLIGHT?ve(this,qr,tG).call(this,i):null;if(c==null||c.toggleDrawing(),N(this,tj)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&ve(this,qr,zT).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),ve(this,qr,zT).call(this,"main_toolbar")}},zT=function(e=""){N(this,hl)===li.HIGHLIGHT?this.highlightSelection(e):N(this,mk)&&ve(this,qr,Z5e).call(this)},J5e=function(){document.addEventListener("selectionchange",ve(this,qr,Q5e).bind(this),{signal:this._signal})},eTe=function(){if(N(this,W1))return;ae(this,W1,new AbortController);const e=this.combinedSignal(N(this,W1));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},tTe=function(){var e;(e=N(this,W1))==null||e.abort(),ae(this,W1,null)},rG=function(){if(N(this,X1))return;ae(this,X1,new AbortController);const e=this.combinedSignal(N(this,X1));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},rTe=function(){var e;(e=N(this,X1))==null||e.abort(),ae(this,X1,null)},nG=function(){if(N(this,V1))return;ae(this,V1,new AbortController);const e=this.combinedSignal(N(this,V1));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},iG=function(){var e;(e=N(this,V1))==null||e.abort(),ae(this,V1,null)},nTe=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},sd=function(e){Object.entries(e).some(([n,i])=>N(this,bk)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(N(this,bk),e)}),N(this,hl)===li.HIGHLIGHT&&e.hasSelectedEditor===!1&&ve(this,qr,ax).call(this,[[Hi.HIGHLIGHT_FREE,!0]]))},ax=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},iTe=async function(){if(!N(this,K1)){ae(this,K1,!0);const e=[];for(const r of N(this,Bl).values())e.push(r.enable());await Promise.all(e);for(const r of N(this,Co).values())r.enable()}},sTe=function(){if(this.unselectAll(),N(this,K1)){ae(this,K1,!1);for(const e of N(this,Bl).values())e.disable();for(const e of N(this,Co).values())e.disable()}},sG=function(e){const r=N(this,Bl).get(e.pageIndex);r?r.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},aTe=function(){let e=null;for(e of N(this,Ms));return e},VT=function(){if(N(this,Co).size===0)return!0;if(N(this,Co).size===1)for(const e of N(this,Co).values())return e.isEmpty();return!1},aG=function(e){for(const r of N(this,Ms))r.unselect();N(this,Ms).clear();for(const r of e)r.isEmpty()||(N(this,Ms).add(r),r.select());ve(this,qr,sd).call(this,{hasSelectedEditor:this.hasSelection})},rr(rE,"TRANSLATE_SMALL",1),rr(rE,"TRANSLATE_BIG",10);let Ib=rE;var tc,M0,pp,ij,L0,qh,sj,F0,Kd,Nx,l2,B0,ey,zp,qT,k6;const ad=class ad{constructor(e){ge(this,zp);ge(this,tc,null);ge(this,M0,!1);ge(this,pp,null);ge(this,ij,null);ge(this,L0,null);ge(this,qh,null);ge(this,sj,!1);ge(this,F0,null);ge(this,Kd,null);ge(this,Nx,null);ge(this,l2,null);ge(this,B0,!1);ae(this,Kd,e),ae(this,B0,e._uiManager.useNewAltTextFlow),N(ad,ey)||ae(ad,ey,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ad._l10n??(ad._l10n=e)}async render(){const e=ae(this,pp,document.createElement("button"));e.className="altText",e.tabIndex="0";const r=ae(this,ij,document.createElement("span"));e.append(r),N(this,B0)?(e.classList.add("new"),e.setAttribute("data-l10n-id",N(ad,ey).missing),r.setAttribute("data-l10n-id",N(ad,ey)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=N(this,Kd)._uiManager._signal;e.addEventListener("contextmenu",Df,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),N(this,Kd)._uiManager.editAltText(N(this,Kd)),N(this,B0)&&N(this,Kd)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:N(this,zp,qT)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(ae(this,sj,!0),i(s))},{signal:n}),await ve(this,zp,k6).call(this),e}finish(){N(this,pp)&&(N(this,pp).focus({focusVisible:N(this,sj)}),ae(this,sj,!1))}isEmpty(){return N(this,B0)?N(this,tc)===null:!N(this,tc)&&!N(this,M0)}hasData(){return N(this,B0)?N(this,tc)!==null||!!N(this,Nx):this.isEmpty()}get guessedText(){return N(this,Nx)}async setGuessedText(e){N(this,tc)===null&&(ae(this,Nx,e),ae(this,l2,await ad._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),ve(this,zp,k6).call(this))}toggleAltTextBadge(e=!1){var r;if(!N(this,B0)||N(this,tc)){(r=N(this,F0))==null||r.remove(),ae(this,F0,null);return}if(!N(this,F0)){const n=ae(this,F0,document.createElement("div"));n.className="noAltTextBadge",N(this,Kd).div.append(n)}N(this,F0).classList.toggle("hidden",!e)}serialize(e){let r=N(this,tc);return!e&&N(this,Nx)===r&&(r=N(this,l2)),{altText:r,decorative:N(this,M0),guessedText:N(this,Nx),textWithDisclaimer:N(this,l2)}}get data(){return{altText:N(this,tc),decorative:N(this,M0)}}set data({altText:e,decorative:r,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&(ae(this,Nx,n),ae(this,l2,i)),!(N(this,tc)===e&&N(this,M0)===r)&&(s||(ae(this,tc,e),ae(this,M0,r)),ve(this,zp,k6).call(this))}toggle(e=!1){N(this,pp)&&(!e&&N(this,qh)&&(clearTimeout(N(this,qh)),ae(this,qh,null)),N(this,pp).disabled=!e)}shown(){N(this,Kd)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:N(this,zp,qT)}})}destroy(){var e,r;(e=N(this,pp))==null||e.remove(),ae(this,pp,null),ae(this,ij,null),ae(this,L0,null),(r=N(this,F0))==null||r.remove(),ae(this,F0,null)}};tc=new WeakMap,M0=new WeakMap,pp=new WeakMap,ij=new WeakMap,L0=new WeakMap,qh=new WeakMap,sj=new WeakMap,F0=new WeakMap,Kd=new WeakMap,Nx=new WeakMap,l2=new WeakMap,B0=new WeakMap,ey=new WeakMap,zp=new WeakSet,qT=function(){return N(this,tc)&&"added"||N(this,tc)===null&&this.guessedText&&"review"||"missing"},k6=async function(){var i,s,o;const e=N(this,pp);if(!e)return;if(N(this,B0)){if(e.classList.toggle("done",!!N(this,tc)),e.setAttribute("data-l10n-id",N(ad,ey)[N(this,zp,qT)]),(i=N(this,ij))==null||i.setAttribute("data-l10n-id",N(ad,ey)[`${N(this,zp,qT)}-label`]),!N(this,tc)){(s=N(this,L0))==null||s.remove();return}}else{if(!N(this,tc)&&!N(this,M0)){e.classList.remove("done"),(o=N(this,L0))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=N(this,L0);if(!r){ae(this,L0,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${N(this,Kd).id}`;const l=100,c=N(this,Kd)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(N(this,qh)),ae(this,qh,null)},{once:!0}),e.addEventListener("mouseenter",()=>{ae(this,qh,setTimeout(()=>{ae(this,qh,null),N(this,L0).classList.add("show"),N(this,Kd)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;N(this,qh)&&(clearTimeout(N(this,qh)),ae(this,qh,null)),(u=N(this,L0))==null||u.classList.remove("show")},{signal:c})}N(this,M0)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=N(this,tc)),r.parentNode||e.append(r);const n=N(this,Kd).getElementForAltText();n==null||n.setAttribute("aria-describedby",r.id)},ge(ad,ey,null),rr(ad,"_l10n",null);let WL=ad;var Dc,am,c2,pa,Nk,u2,gp,d2,h2,f2,Sk,oG;class RD{constructor(e){ge(this,Sk);ge(this,Dc,null);ge(this,am,null);ge(this,c2,!1);ge(this,pa,null);ge(this,Nk,null);ge(this,u2,null);ge(this,gp,null);ge(this,d2,null);ge(this,h2,!1);ge(this,f2,null);ae(this,pa,e)}renderForToolbar(){const e=ae(this,am,document.createElement("button"));return e.className="comment",ve(this,Sk,oG).call(this,e,!1)}renderForStandalone(){const e=ae(this,Dc,document.createElement("button"));e.className="annotationCommentButton";const r=N(this,pa).commentButtonPosition;if(r){const{style:n}=e;n.insetInlineEnd=`calc(${100*(N(this,pa)._uiManager.direction==="ltr"?1-r[0]:r[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*r[1]}% - var(--comment-button-dim))`;const i=N(this,pa).commentButtonColor;i&&(n.backgroundColor=i)}return ve(this,Sk,oG).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=N(this,Dc)??N(this,am))==null||e.focus()},0)}onUpdatedColor(){if(!N(this,Dc))return;const e=N(this,pa).commentButtonColor;e&&(N(this,Dc).style.backgroundColor=e),N(this,pa)._uiManager.updatePopupColor(N(this,pa))}get commentButtonWidth(){var e;return(((e=N(this,Dc))==null?void 0:e.getBoundingClientRect().width)??0)/N(this,pa).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(N(this,f2))return N(this,f2);if(!N(this,Dc))return null;const{x:e,y:r,height:n}=N(this,Dc).getBoundingClientRect(),{x:i,y:s,width:o,height:l}=N(this,pa).parent.boundingClientRect;return[(e-i)/o,(r+n-s)/l]}set commentPopupPositionInLayer(e){ae(this,f2,e)}hasDefaultPopupPosition(){return N(this,f2)===null}removeStandaloneCommentButton(){var e;(e=N(this,Dc))==null||e.remove(),ae(this,Dc,null)}removeToolbarCommentButton(){var e;(e=N(this,am))==null||e.remove(),ae(this,am,null)}setCommentButtonStates({selected:e,hasPopup:r}){N(this,Dc)&&(N(this,Dc).classList.toggle("selected",e),N(this,Dc).ariaExpanded=r)}edit(e){const r=this.commentPopupPositionInLayer;let n,i;if(r)[n,i]=r;else{[n,i]=N(this,pa).commentButtonPosition;const{width:d,height:h,x:f,y:m}=N(this,pa);n=f+n*d,i=m+i*h}const s=N(this,pa).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=s;N(this,pa)._uiManager.editComment(N(this,pa),o+n*c,l+i*u,{...e,parentDimensions:s})}finish(){N(this,am)&&(N(this,am).focus({focusVisible:N(this,c2)}),ae(this,c2,!1))}isDeleted(){return N(this,h2)||N(this,gp)===""}isEmpty(){return N(this,gp)===null}hasBeenEdited(){return this.isDeleted()||N(this,gp)!==N(this,Nk)}serialize(){return this.data}get data(){return{text:N(this,gp),richText:N(this,u2),date:N(this,d2),deleted:this.isDeleted()}}set data(e){if(e!==N(this,gp)&&ae(this,u2,null),e===null){ae(this,gp,""),ae(this,h2,!0);return}ae(this,gp,e),ae(this,d2,new Date),ae(this,h2,!1)}setInitialText(e,r=null){ae(this,Nk,e),this.data=e,ae(this,d2,null),ae(this,u2,r)}shown(){}destroy(){var e,r;(e=N(this,am))==null||e.remove(),ae(this,am,null),(r=N(this,Dc))==null||r.remove(),ae(this,Dc,null),ae(this,gp,""),ae(this,u2,null),ae(this,d2,null),ae(this,pa,null),ae(this,c2,!1),ae(this,h2,!1)}}Dc=new WeakMap,am=new WeakMap,c2=new WeakMap,pa=new WeakMap,Nk=new WeakMap,u2=new WeakMap,gp=new WeakMap,d2=new WeakMap,h2=new WeakMap,f2=new WeakMap,Sk=new WeakSet,oG=function(e,r){if(!N(this,pa)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",r?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[N(this,pa)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=N(this,pa)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Df,{signal:n}),r&&(e.addEventListener("focusin",s=>{N(this,pa)._focusEventsAllowed=!1,mo(s)},{capture:!0,signal:n}),e.addEventListener("focusout",s=>{N(this,pa)._focusEventsAllowed=!0,mo(s)},{capture:!0,signal:n})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),e===N(this,am)?this.edit():N(this,pa).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(ae(this,c2,!0),i(s))},{signal:n}),e.addEventListener("pointerenter",()=>{N(this,pa).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{N(this,pa).toggleComment(!1,!1)},{signal:n}),e};var aj,m2,Ek,jk,Ak,Ck,Tk,Sx,p2,Ex,g2,jx,Db,oTe,lTe,cTe;const _ee=class _ee{constructor({container:e,isPinchingDisabled:r=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:l}){ge(this,Db);ge(this,aj);ge(this,m2,!1);ge(this,Ek,null);ge(this,jk);ge(this,Ak);ge(this,Ck);ge(this,Tk);ge(this,Sx,null);ge(this,p2);ge(this,Ex,null);ge(this,g2);ge(this,jx,null);ae(this,aj,e),ae(this,Ek,n),ae(this,jk,r),ae(this,Ak,i),ae(this,Ck,s),ae(this,Tk,o),ae(this,g2,new AbortController),ae(this,p2,AbortSignal.any([l,N(this,g2).signal])),e.addEventListener("touchstart",ve(this,Db,oTe).bind(this),{passive:!1,signal:N(this,p2)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/s0.pixelRatio}destroy(){var e,r;(e=N(this,g2))==null||e.abort(),ae(this,g2,null),(r=N(this,Sx))==null||r.abort(),ae(this,Sx,null)}};aj=new WeakMap,m2=new WeakMap,Ek=new WeakMap,jk=new WeakMap,Ak=new WeakMap,Ck=new WeakMap,Tk=new WeakMap,Sx=new WeakMap,p2=new WeakMap,Ex=new WeakMap,g2=new WeakMap,jx=new WeakMap,Db=new WeakSet,oTe=function(e){var i,s,o;if((i=N(this,jk))!=null&&i.call(this))return;if(e.touches.length===1){if(N(this,Sx))return;const l=ae(this,Sx,new AbortController),c=AbortSignal.any([N(this,p2),l.signal]),u=N(this,aj),d={capture:!0,signal:c,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=N(this,Sx))==null||m.abort(),ae(this,Sx,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(mo(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!N(this,jx)){ae(this,jx,new AbortController);const l=AbortSignal.any([N(this,p2),N(this,jx).signal]),c=N(this,aj),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",ve(this,Db,lTe).bind(this),u);const d=ve(this,Db,cTe).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",mo,u),c.addEventListener("pointermove",mo,u),c.addEventListener("pointercancel",mo,u),c.addEventListener("pointerup",mo,u),(s=N(this,Ak))==null||s.call(this)}if(mo(e),e.touches.length!==2||(o=N(this,Ek))!=null&&o.call(this)){ae(this,Ex,null);return}let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]),ae(this,Ex,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:n.screenX,touch1Y:n.screenY})},lTe=function(e){var j;if(!N(this,Ex)||e.touches.length!==2)return;mo(e);let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]);const{screenX:i,screenY:s}=r,{screenX:o,screenY:l}=n,c=N(this,Ex),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,m=h-u,x=f-d,g=o-i,y=l-s,w=Math.hypot(g,y)||1,S=Math.hypot(m,x)||1;if(!N(this,m2)&&Math.abs(S-w)<=_ee.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=s,c.touch1X=o,c.touch1Y=l,!N(this,m2)){ae(this,m2,!0);return}const E=[(i+o)/2,(s+l)/2];(j=N(this,Ck))==null||j.call(this,E,S,w)},cTe=function(e){var r;e.touches.length>=2||(N(this,jx)&&(N(this,jx).abort(),ae(this,jx,null),(r=N(this,Tk))==null||r.call(this)),N(this,Ex)&&(mo(e),ae(this,Ex,null),ae(this,m2,!1)))};let ek=_ee;var x2,xp,Va,sa,Ax,oj,ty,Pk,Mc,v2,Cx,$0,ry,kk,y2,Hh,Ok,b2,Tx,U0,lj,cj,om,w2,Ik,lF,Bn,lG,Rk,cG,O6,uTe,dTe,uG,I6,dG,hTe,fTe,mTe,hG,pTe,fG,gTe,xTe,vTe,mG,HT;const mi=class mi{constructor(e){ge(this,Bn);ge(this,x2,null);ge(this,xp,null);ge(this,Va,null);ge(this,sa,null);ge(this,Ax,null);ge(this,oj,!1);ge(this,ty,null);ge(this,Pk,"");ge(this,Mc,null);ge(this,v2,null);ge(this,Cx,null);ge(this,$0,null);ge(this,ry,null);ge(this,kk,"");ge(this,y2,!1);ge(this,Hh,null);ge(this,Ok,!1);ge(this,b2,!1);ge(this,Tx,!1);ge(this,U0,null);ge(this,lj,0);ge(this,cj,0);ge(this,om,null);ge(this,w2,null);rr(this,"isSelected",!1);rr(this,"_isCopy",!1);rr(this,"_editToolbar",null);rr(this,"_initialOptions",Object.create(null));rr(this,"_initialData",null);rr(this,"_isVisible",!0);rr(this,"_uiManager",null);rr(this,"_focusEventsAllowed",!0);ge(this,Ik,!1);ge(this,lF,mi._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:r,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=mi.prototype._resizeWithKeyboard,r=Ib.TRANSLATE_SMALL,n=Ib.TRANSLATE_BIG;return Ci(this,"_resizerKeyboardManager",new WI([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-r,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[r,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-r]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,r]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],mi.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ci(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const r=new H8t({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});r.annotationElementId=e.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(e,r){if(mi._l10n??(mi._l10n=e),mi._l10nResizer||(mi._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),mi._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);mi._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,r){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,r){ua("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return N(this,Ik)}set _isDraggable(e){var r;ae(this,Ik,e),(r=this.div)==null||r.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,r]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*r/(e*2),this.y+=this.width*e/(r*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*r/(e*2),this.y-=this.width*e/(r*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=N(this,lF)}setParent(e){var r;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(ve(this,Bn,HT).call(this),(r=N(this,$0))==null||r.remove(),ae(this,$0,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(N(this,y2)?ae(this,y2,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const r=e.relatedTarget;r!=null&&r.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,r,n,i){const[s,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(r+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,r){const[n,i]=this.parentDimensions;this.setAt(e*n,r*i,this.width*n,this.height*i),this._onTranslated()}translate(e,r){ve(this,Bn,lG).call(this,this.parentDimensions,e,r)}translateInPage(e,r){N(this,Hh)||ae(this,Hh,[this.x,this.y,this.width,this.height]),ve(this,Bn,lG).call(this,this.pageDimensions,e,r),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,r){N(this,Hh)||ae(this,Hh,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=r/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:d}=n;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,r){}_onTranslated(e,r){}get _hasBeenMoved(){return!!N(this,Hh)&&(N(this,Hh)[0]!==this.x||N(this,Hh)[1]!==this.y)}get _hasBeenResized(){return!!N(this,Hh)&&(N(this,Hh)[2]!==this.width||N(this,Hh)[3]!==this.height)}getBaseTranslation(){const[e,r]=this.parentDimensions,{_borderLineWidth:n}=mi,i=n/e,s=n/r;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:r},pageDimensions:[n,i]}=this;let{x:s,y:o,width:l,height:c}=this;if(l*=n,c*=i,s*=n,o*=i,this._mustFixPosition)switch(e){case 0:s=Iu(s,0,n-l),o=Iu(o,0,i-c);break;case 90:s=Iu(s,0,n-c),o=Iu(o,l,i);break;case 180:s=Iu(s,l,n),o=Iu(o,c,i);break;case 270:s=Iu(s,c,n),o=Iu(o,0,i-l);break}this.x=s/=n,this.y=o/=i;const[u,d]=this.getBaseTranslation();s+=u,o+=d,r.left=`${(100*s).toFixed(2)}%`,r.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,r){var n;return ve(n=mi,Rk,cG).call(n,e,r,this.parentRotation)}pageTranslationToScreen(e,r){var n;return ve(n=mi,Rk,cG).call(n,e,r,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[r,n]}=this;return[r*e,n*e]}setDims(){const{div:{style:e},width:r,height:n}=this;e.width=`${(100*r).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=N(this,Va))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||N(this,b2))return this._editToolbar;this._editToolbar=new ZW(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[r,n]of e)await this._editToolbar.addButton(r,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,r;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(r=N(this,Va))==null||r.destroy()}addContainer(e){var n;const r=(n=this._editToolbar)==null?void 0:n.div;r?r.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return N(this,Va)||(WL.initialize(mi._l10n),ae(this,Va,new WL(this)),N(this,x2)&&(N(this,Va).data=N(this,x2),ae(this,x2,null))),N(this,Va)}get altTextData(){var e;return(e=N(this,Va))==null?void 0:e.data}set altTextData(e){N(this,Va)&&(N(this,Va).data=e)}get guessedAltText(){var e;return(e=N(this,Va))==null?void 0:e.guessedText}async setGuessedAltText(e){var r;await((r=N(this,Va))==null?void 0:r.setGuessedText(e))}serializeAltText(e){var r;return(r=N(this,Va))==null?void 0:r.serialize(e)}hasAltText(){return!!N(this,Va)&&!N(this,Va).isEmpty()}hasAltTextData(){var e;return((e=N(this,Va))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=N(this,sa))==null||e.focusButton()}addCommentButton(){return N(this,sa)||ae(this,sa,new RD(this))}addStandaloneCommentButton(){if(N(this,Ax)){this._uiManager.isEditingMode()&&N(this,Ax).classList.remove("hidden");return}this.hasComment&&(ae(this,Ax,N(this,sa).renderForStandalone()),this.div.append(N(this,Ax)))}removeStandaloneCommentButton(){N(this,sa).removeStandaloneCommentButton(),ae(this,Ax,null)}hideStandaloneCommentButton(){var e;(e=N(this,Ax))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:r,date:n,deleted:i}}=N(this,sa);return{text:r,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){N(this,sa)||ae(this,sa,new RD(this)),N(this,sa).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:r,richText:n}){if(!r||(N(this,sa)||ae(this,sa,new RD(this)),N(this,sa).setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=N(this,sa))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=N(this,sa))==null?void 0:e.isDeleted()}get hasComment(){return!!N(this,sa)&&!N(this,sa).isEmpty()&&!N(this,sa).isDeleted()}async editComment(e){N(this,sa)||ae(this,sa,new RD(this)),N(this,sa).edit(e)}toggleComment(e,r=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,r)}setSelectedCommentButton(e){N(this,sa).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,l=o+s+1,c=i-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:r}}){N(this,sa).data=r?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=N(this,oj)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),ve(this,Bn,fG).call(this);const[r,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/r).toFixed(2)}%`,e.style.maxHeight=`${(100*r/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),X5e(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(N(this,w2)||ae(this,w2,new ek({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:ve(this,Bn,hTe).bind(this),onPinching:ve(this,Bn,fTe).bind(this),onPinchEnd:ve(this,Bn,mTe).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:r}=vc.platform;if(e.button!==0||e.ctrlKey&&r){e.preventDefault();return}if(ae(this,y2,!0),this._isDraggable){ve(this,Bn,pTe).call(this,e);return}ve(this,Bn,hG).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){N(this,U0)&&clearTimeout(N(this,U0)),ae(this,U0,setTimeout(()=>{var e;ae(this,U0,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,r,n){e.changeParent(this),this.x=r,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,r,n=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/i,d=r/i,h=this.x*s,f=this.y*o,m=this.width*s,x=this.height*o;switch(n){case 0:return[h+u+l,o-f-d-x+c,h+u+m+l,o-f-d+c];case 90:return[h+d+l,o-f+u+c,h+d+x+l,o-f+u+m+c];case 180:return[h-u-m+l,o-f+d+c,h-u+l,o-f+d+x+c];case 270:return[h-d-x+l,o-f-u-m+c,h-d+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,r){const[n,i,s,o]=e,l=s-n,c=o-i;switch(this.rotation){case 0:return[n,r-o,l,c];case 90:return[n,r-i,c,l];case 180:return[s,r-i,l,c];case 270:return[s,r-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&mi._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=N(this,sa))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:r,date:n,opacity:i,deleted:s,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:n||d,popupRef:!s,color:r,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),ae(this,b2,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),ae(this,b2,!1),!0):!1}isInEditMode(){return N(this,b2)}shouldGetKeyboardEvents(){return N(this,Tx)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:r,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return r<o&&i>0&&e<s&&n>0}rebuild(){ve(this,Bn,fG).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,r=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,r,n){const i=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,ae(i,x2,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,o]=i.pageDimensions,[l,c,u,d]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/s,i.y=c/o,i.width=u/s,i.height=d/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,r;if((e=N(this,ry))==null||e.abort(),ae(this,ry,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),N(this,U0)&&(clearTimeout(N(this,U0)),ae(this,U0,null)),ve(this,Bn,HT).call(this),this.removeEditToolbar(),N(this,om)){for(const n of N(this,om).values())clearTimeout(n);ae(this,om,null)}this.parent=null,(r=N(this,w2))==null||r.destroy(),ae(this,w2,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ve(this,Bn,uTe).call(this),N(this,Mc).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,r]}=this,[n,i,s,o]=this.getPDFRect();return[mi._round(n+(s-n)*e),mi._round(i+(o-i)*(1-r))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return N(this,sa).commentPopupPositionInLayer}set commentPopupPosition(e){N(this,sa).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return N(this,sa).hasDefaultPopupPosition()}get commentButtonWidth(){return N(this,sa).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){N(this,sa).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),ae(this,Cx,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const r=N(this,Mc).children;if(!N(this,xp)){ae(this,xp,Array.from(r));const o=ve(this,Bn,gTe).bind(this),l=ve(this,Bn,xTe).bind(this),c=this._uiManager._signal;for(const u of N(this,xp)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",ve(this,Bn,vTe).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",mi._l10nResizer[d])}}const n=N(this,xp)[0];let i=0;for(const o of r){if(o===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(N(this,xp).length/4);if(s!==i){if(s<i)for(let l=0;l<i-s;l++)N(this,Mc).append(N(this,Mc).firstChild);else if(s>i)for(let l=0;l<s-i;l++)N(this,Mc).firstChild.before(N(this,Mc).lastChild);let o=0;for(const l of r){const u=N(this,xp)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",mi._l10nResizer[u])}}ve(this,Bn,mG).call(this,0),ae(this,Tx,!0),N(this,Mc).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,r){N(this,Tx)&&ve(this,Bn,dG).call(this,N(this,kk),{deltaX:e,deltaY:r,fromKeyboard:!0})}_stopResizingWithKeyboard(){ve(this,Bn,HT).call(this),this.div.focus()}select(){var e,r,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(r=this._editToolbar)==null||r.show(),(n=N(this,Va))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,r,n,i,s;this.isSelected&&(this.isSelected=!1,(e=N(this,Mc))==null||e.classList.add("hidden"),(r=this.div)==null||r.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=N(this,Va))==null||s.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,r){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return N(this,Ok)}set isEditing(e){ae(this,Ok,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,r=!1){if(r){N(this,om)||ae(this,om,new Map);const{action:n}=e;let i=N(this,om).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),N(this,om).delete(n),N(this,om).size===0&&ae(this,om,null)},mi._telemetryTimeout),N(this,om).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),ae(this,oj,!1)}disable(){this.div&&(this.div.tabIndex=-1),ae(this,oj,!0)}updateFakeAnnotationElement(e){if(!N(this,$0)&&!this.deleted){ae(this,$0,e.addFakeAnnotation(this));return}if(this.deleted){N(this,$0).remove(),ae(this,$0,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&N(this,$0).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let r=e.container.querySelector(".annotationContent");if(!r)r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),e.container.prepend(r);else if(r.nodeName==="CANVAS"){const n=r;r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),n.before(r)}return r}resetAnnotationElement(e){const{firstChild:r}=e.container;(r==null?void 0:r.nodeName)==="DIV"&&r.classList.contains("annotationContent")&&r.remove()}};x2=new WeakMap,xp=new WeakMap,Va=new WeakMap,sa=new WeakMap,Ax=new WeakMap,oj=new WeakMap,ty=new WeakMap,Pk=new WeakMap,Mc=new WeakMap,v2=new WeakMap,Cx=new WeakMap,$0=new WeakMap,ry=new WeakMap,kk=new WeakMap,y2=new WeakMap,Hh=new WeakMap,Ok=new WeakMap,b2=new WeakMap,Tx=new WeakMap,U0=new WeakMap,lj=new WeakMap,cj=new WeakMap,om=new WeakMap,w2=new WeakMap,Ik=new WeakMap,lF=new WeakMap,Bn=new WeakSet,lG=function([e,r],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Rk=new WeakSet,cG=function(e,r,n){switch(n){case 90:return[r,-e];case 180:return[-e,-r];case 270:return[-r,e];default:return[e,r]}},O6=function(e){switch(e){case 90:{const[r,n]=this.pageDimensions;return[0,-r/n,n/r,0]}case 180:return[-1,0,0,-1];case 270:{const[r,n]=this.pageDimensions;return[0,r/n,-n/r,0]}default:return[1,0,0,1]}},uTe=function(){if(N(this,Mc))return;ae(this,Mc,document.createElement("div")),N(this,Mc).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],r=this._uiManager._signal;for(const n of e){const i=document.createElement("div");N(this,Mc).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",ve(this,Bn,dTe).bind(this,n),{signal:r}),i.addEventListener("contextmenu",Df,{signal:r}),i.tabIndex=-1}this.div.prepend(N(this,Mc))},dTe=function(e,r){var d;r.preventDefault();const{isMac:n}=vc.platform;if(r.button!==0||r.ctrlKey&&n)return;(d=N(this,Va))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,ae(this,v2,[r.screenX,r.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",ve(this,Bn,dG).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",mo,{passive:!1,signal:o}),window.addEventListener("contextmenu",Df,{signal:o}),ae(this,Cx,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(r.target).cursor;const u=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=N(this,Va))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,ve(this,Bn,I6).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},uG=function(e,r,n,i){this.width=n,this.height=i,this.x=e,this.y=r,this.setDims(),this.fixAndSetPosition(),this._onResized()},I6=function(){if(!N(this,Cx))return;const{savedX:e,savedY:r,savedWidth:n,savedHeight:i}=N(this,Cx);ae(this,Cx,null);const s=this.x,o=this.y,l=this.width,c=this.height;s===e&&o===r&&l===n&&c===i||this.addCommands({cmd:ve(this,Bn,uG).bind(this,s,o,l,c),undo:ve(this,Bn,uG).bind(this,e,r,n,i),mustExec:!0})},dG=function(e,r){const[n,i]=this.parentDimensions,s=this.x,o=this.y,l=this.width,c=this.height,u=mi.MIN_SIZE/n,d=mi.MIN_SIZE/i,h=ve(this,Bn,O6).call(this,this.rotation),f=(se,K)=>[h[0]*se+h[2]*K,h[1]*se+h[3]*K],m=ve(this,Bn,O6).call(this,360-this.rotation),x=(se,K)=>[m[0]*se+m[2]*K,m[1]*se+m[3]*K];let g,y,w=!1,S=!1;switch(e){case"topLeft":w=!0,g=(se,K)=>[0,0],y=(se,K)=>[se,K];break;case"topMiddle":g=(se,K)=>[se/2,0],y=(se,K)=>[se/2,K];break;case"topRight":w=!0,g=(se,K)=>[se,0],y=(se,K)=>[0,K];break;case"middleRight":S=!0,g=(se,K)=>[se,K/2],y=(se,K)=>[0,K/2];break;case"bottomRight":w=!0,g=(se,K)=>[se,K],y=(se,K)=>[0,0];break;case"bottomMiddle":g=(se,K)=>[se/2,K],y=(se,K)=>[se/2,0];break;case"bottomLeft":w=!0,g=(se,K)=>[0,K],y=(se,K)=>[se,0];break;case"middleLeft":S=!0,g=(se,K)=>[0,K/2],y=(se,K)=>[se,K/2];break}const E=g(l,c),j=y(l,c);let T=f(...j);const O=mi._round(s+T[0]),I=mi._round(o+T[1]);let M=1,D=1,z,F;if(r.fromKeyboard)({deltaX:z,deltaY:F}=r);else{const{screenX:se,screenY:K}=r,[X,Y]=N(this,v2);[z,F]=this.screenToPageTranslation(se-X,K-Y),N(this,v2)[0]=se,N(this,v2)[1]=K}if([z,F]=x(z/n,F/i),w){const se=Math.hypot(l,c);M=D=Math.max(Math.min(Math.hypot(j[0]-E[0]-z,j[1]-E[1]-F)/se,1/l,1/c),u/l,d/c)}else S?M=Iu(Math.abs(j[0]-E[0]-z),u,1)/l:D=Iu(Math.abs(j[1]-E[1]-F),d,1)/c;const q=mi._round(l*M),Q=mi._round(c*D);T=f(...y(q,Q));const re=O-T[0],Z=I-T[1];N(this,Hh)||ae(this,Hh,[this.x,this.y,this.width,this.height]),this.width=q,this.height=Q,this.x=re,this.y=Z,this.setDims(),this.fixAndSetPosition(),this._onResizing()},hTe=function(){var e;ae(this,Cx,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=N(this,Va))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},fTe=function(e,r,n){let s=.7*(n/r)+1-.7;if(s===1)return;const o=ve(this,Bn,O6).call(this,this.rotation),l=(O,I)=>[o[0]*O+o[2]*I,o[1]*O+o[3]*I],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,m=this.height,x=mi.MIN_SIZE/c,g=mi.MIN_SIZE/u;s=Math.max(Math.min(s,1/f,1/m),x/f,g/m);const y=mi._round(f*s),w=mi._round(m*s);if(y===f&&w===m)return;N(this,Hh)||ae(this,Hh,[d,h,f,m]);const S=l(f/2,m/2),E=mi._round(d+S[0]),j=mi._round(h+S[1]),T=l(y/2,w/2);this.x=E-T[0],this.y=j-T[1],this.width=y,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()},mTe=function(){var e;(e=N(this,Va))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),ve(this,Bn,I6).call(this)},hG=function(e){const{isMac:r}=vc.platform;e.ctrlKey&&!r||e.shiftKey||e.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this)},pTe=function(e){const{isSelected:r}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},l=u=>{i.abort(),ae(this,ty,null),ae(this,y2,!1),this._uiManager.endDragSession()||ve(this,Bn,hG).call(this,u),n&&this._onStopDragging()};r&&(ae(this,lj,e.clientX),ae(this,cj,e.clientY),ae(this,ty,e.pointerId),ae(this,Pk,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==N(this,ty)){mo(u);return}const[m,x]=this.screenToPageTranslation(d-N(this,lj),h-N(this,cj));ae(this,lj,d),ae(this,cj,h),this._uiManager.dragSelectedEditors(m,x)},o),window.addEventListener("touchmove",mo,o),window.addEventListener("pointerdown",u=>{u.pointerType===N(this,Pk)&&(N(this,w2)||u.isPrimary)&&l(u),mo(u)},o));const c=u=>{if(!N(this,ty)||N(this,ty)===u.pointerId){l(u);return}mo(u)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},fG=function(){if(N(this,ry)||!this.div)return;ae(this,ry,new AbortController);const e=this._uiManager.combinedSignal(N(this,ry));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},gTe=function(e){mi._resizerKeyboardManager.exec(this,e)},xTe=function(e){var r;N(this,Tx)&&((r=e.relatedTarget)==null?void 0:r.parentNode)!==N(this,Mc)&&ve(this,Bn,HT).call(this)},vTe=function(e){ae(this,kk,N(this,Tx)?e:"")},mG=function(e){if(N(this,xp))for(const r of N(this,xp))r.tabIndex=e},HT=function(){ae(this,Tx,!1),ve(this,Bn,mG).call(this,-1),ve(this,Bn,I6).call(this)},ge(mi,Rk),rr(mi,"_l10n",null),rr(mi,"_l10nResizer",null),rr(mi,"_borderLineWidth",-1),rr(mi,"_colorManager",new eG),rr(mi,"_zIndex",1),rr(mi,"_telemetryTimeout",1e3);let ba=mi;class H8t extends ba{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Lhe=3285377520,Kf=4294901760,N0=65535;class yTe{constructor(e){this.h1=e?e&4294967295:Lhe,this.h2=e?e&4294967295:Lhe}update(e){let r,n;if(typeof e=="string"){r=new Uint8Array(e.length*2),n=0;for(let g=0,y=e.length;g<y;g++){const w=e.charCodeAt(g);w<=255?r[n++]=w:(r[n++]=w>>>8,r[n++]=w&255)}}else if(ArrayBuffer.isView(e))r=e.slice(),n=r.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,s=n-i*4,o=new Uint32Array(r.buffer,0,i);let l=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,m=h&N0,x=f&N0;for(let g=0;g<i;g++)g&1?(l=o[g],l=l*h&Kf|l*m&N0,l=l<<15|l>>>17,l=l*f&Kf|l*x&N0,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[g],c=c*h&Kf|c*m&N0,c=c<<15|c>>>17,c=c*f&Kf|c*x&N0,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,s){case 3:l^=r[i*4+2]<<16;case 2:l^=r[i*4+1]<<8;case 1:l^=r[i*4],l=l*h&Kf|l*m&N0,l=l<<15|l>>>17,l=l*f&Kf|l*x&N0,i&1?u^=l:d^=l}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,r=this.h2;return e^=r>>>1,e=e*3981806797&Kf|e*36045&N0,r=r*4283543511&Kf|((r<<16|e>>>16)*2950163797&Kf)>>>16,e^=r>>>1,e=e*444984403&Kf|e*60499&N0,r=r*3301882366&Kf|((r<<16|e>>>16)*3120437893&Kf)>>>16,e^=r>>>1,(e>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}const pG=Object.freeze({map:null,hash:"",transfer:void 0});var _2,N2,Px,Lc,cF,bTe;class see{constructor(){ge(this,cF);ge(this,_2,!1);ge(this,N2,null);ge(this,Px,null);ge(this,Lc,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,r){const n=N(this,Lc).get(e);return n===void 0?r:Object.assign(r,n)}getRawValue(e){return N(this,Lc).get(e)}remove(e){const r=N(this,Lc).get(e);if(r!==void 0&&(r instanceof ba&&N(this,Px).delete(r.annotationElementId),N(this,Lc).delete(e),N(this,Lc).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of N(this,Lc).values())if(n instanceof ba)return;this.onAnnotationEditor(null)}}setValue(e,r){const n=N(this,Lc).get(e);let i=!1;if(n!==void 0)for(const[s,o]of Object.entries(r))n[s]!==o&&(i=!0,n[s]=o);else i=!0,N(this,Lc).set(e,r);i&&ve(this,cF,bTe).call(this),r instanceof ba&&((N(this,Px)||ae(this,Px,new Map)).set(r.annotationElementId,r),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type))}has(e){return N(this,Lc).has(e)}get size(){return N(this,Lc).size}resetModified(){N(this,_2)&&(ae(this,_2,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wTe(this)}get serializable(){if(N(this,Lc).size===0)return pG;const e=new Map,r=new yTe,n=[],i=Object.create(null);let s=!1;for(const[o,l]of N(this,Lc)){const c=l instanceof ba?l.serialize(!1,i):l;c&&(e.set(o,c),r.update(`${o}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:r.hexdigest(),transfer:n}:pG}get editorStats(){let e=null;const r=new Map;let n=0,i=0;for(const s of N(this,Lc).values()){if(!(s instanceof ba)){s.popup&&(s.popup.deleted?i+=1:n+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(n+=1);const o=s.telemetryFinalData;if(!o)continue;const{type:l}=o;r.has(l)||r.set(l,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[s,o]of r)e[s]=o.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){ae(this,N2,null)}updateEditor(e,r){var i;const n=(i=N(this,Px))==null?void 0:i.get(e);return n?(n.updateFromAnnotationLayer(r),!0):!1}getEditor(e){var r;return((r=N(this,Px))==null?void 0:r.get(e))||null}get modifiedIds(){if(N(this,N2))return N(this,N2);const e=[];if(N(this,Px))for(const r of N(this,Px).values())r.serialize()&&e.push(r.annotationElementId);return ae(this,N2,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return N(this,Lc).entries()}}_2=new WeakMap,N2=new WeakMap,Px=new WeakMap,Lc=new WeakMap,cF=new WeakSet,bTe=function(){N(this,_2)||(ae(this,_2,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Dk;class wTe extends see{constructor(r){super();ge(this,Dk);const{map:n,hash:i,transfer:s}=r.serializable,o=structuredClone(n,s?{transfer:s}:null);ae(this,Dk,{map:o,hash:i,transfer:s})}get print(){ua("Should not call PrintAnnotationStorage.print")}get serializable(){return N(this,Dk)}get modifiedIds(){return Ci(this,"modifiedIds",{ids:new Set,hash:""})}}Dk=new WeakMap;var uj;class W8t{constructor({ownerDocument:e=globalThis.document,styleElement:r=null}){ge(this,uj,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const r=this.styleElement.sheet;r.insertRule(e,r.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),N(this,uj).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:r,_inspectFont:n}){if(!(!e||N(this,uj).has(e.loadedName))){if(Zi(!r,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:o}=e,l=new FontFace(i,s,o);this.addNativeFontFace(l);try{await l.load(),N(this,uj).add(i),n==null||n(e)}catch{ci(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}ua("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw ci(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const r=e.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var r;const e=!!((r=this._document)!=null&&r.fonts);return Ci(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ci(this,"isSyncFontLoadingSupported",hd||vc.platform.isFirefox)}_queueLoadingCallback(e){function r(){for(Zi(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:r,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ci(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,r){function n(j,T){return j.charCodeAt(T)<<24|j.charCodeAt(T+1)<<16|j.charCodeAt(T+2)<<8|j.charCodeAt(T+3)&255}function i(j,T,O,I){const M=j.substring(0,T),D=j.substring(T+O);return M+I+D}let s,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function d(j,T){if(++u>30){ci("Load test font never loaded."),T();return}if(c.font="30px "+j,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,j,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const x=16,g=1482184792;let y=n(f,x);for(s=0,o=h.length-3;s<o;s+=4)y=y-g+n(h,s)|0;s<h.length&&(y=y-g+n(h+"XXX",s)|0),f=i(f,x,4,I8t(y));const w=`url(data:font/opentype;base64,${btoa(f)});`,S=`@font-face {font-family:"${h}";src:${w}}`;this.insertRule(S);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const j of[e.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=j,E.append(T)}this._document.body.append(E),d(h,()=>{E.remove(),r.complete()})}}uj=new WeakMap;var Ks;class G8t{constructor(e,r=null,n,i){ge(this,Ks);this.compiledGlyphs=Object.create(null),ae(this,Ks,e),this._inspectFont=r,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var r;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(r=this._inspectFont)==null||r.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${L5e(this.data)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),r}getPathGenerator(e,r){if(this.compiledGlyphs[r]!==void 0)return this.compiledGlyphs[r];const n=this.loadedName+"_path_"+r;let i;try{i=e.get(n)}catch(o){ci(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[r]=s}get black(){return N(this,Ks).black}get bold(){return N(this,Ks).bold}get disableFontFace(){return N(this,Ks).disableFontFace??!1}get fontExtraProperties(){return N(this,Ks).fontExtraProperties??!1}get isInvalidPDFjsFont(){return N(this,Ks).isInvalidPDFjsFont}get isType3Font(){return N(this,Ks).isType3Font}get italic(){return N(this,Ks).italic}get missingFile(){return N(this,Ks).missingFile}get remeasure(){return N(this,Ks).remeasure}get vertical(){return N(this,Ks).vertical}get ascent(){return N(this,Ks).ascent}get defaultWidth(){return N(this,Ks).defaultWidth}get descent(){return N(this,Ks).descent}get bbox(){return N(this,Ks).bbox}get fontMatrix(){return N(this,Ks).fontMatrix}get fallbackName(){return N(this,Ks).fallbackName}get loadedName(){return N(this,Ks).loadedName}get mimetype(){return N(this,Ks).mimetype}get name(){return N(this,Ks).name}get data(){return N(this,Ks).data}clearData(){N(this,Ks).clearData()}get cssFontInfo(){return N(this,Ks).cssFontInfo}get systemFontInfo(){return N(this,Ks).systemFontInfo}get defaultVMetrics(){return N(this,Ks).defaultVMetrics}}Ks=new WeakMap;function K8t(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(hd)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function X8t(t){if(hd&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return VI(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function DD(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const gG=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,Y8t=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",_Te=L8t.bind(null,gG,Y8t);var kx,uF;class Z8t{constructor(){ge(this,kx,new Map);ge(this,uF,Promise.resolve())}postMessage(e,r){const n={data:structuredClone(e,r?{transfer:r}:null)};N(this,uF).then(()=>{for(const[i]of N(this,kx))i.call(this,n)})}addEventListener(e,r,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){ci("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,r);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}N(this,kx).set(r,i)}removeEventListener(e,r){const n=N(this,kx).get(r);n==null||n(),N(this,kx).delete(r)}terminate(){for(const[,e]of N(this,kx))e==null||e();N(this,kx).clear()}}kx=new WeakMap,uF=new WeakMap;const MD={DATA:1,ERROR:2},dl={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fhe(){}function qd(t){if(t instanceof Iv||t instanceof qL||t instanceof Phe||t instanceof ZP||t instanceof rz)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||ua('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Iv(t.message);case"InvalidPDFException":return new qL(t.message);case"PasswordException":return new Phe(t.message,t.code);case"ResponseException":return new ZP(t.message,t.status,t.missing);case"UnknownErrorException":return new rz(t.message,t.details)}return new rz(t.message,t.toString())}var dj,km,NTe,STe,ETe,R6;class WT{constructor(e,r,n){ge(this,km);ge(this,dj,new AbortController);this.sourceName=e,this.targetName=r,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",ve(this,km,NTe).bind(this),{signal:N(this,dj).signal})}on(e,r){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=r}send(e,r,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:r},n)}sendWithPromise(e,r,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:r},n)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,r,n,i){const s=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:s,data:r,desiredSize:u.desiredSize},i),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,c.postMessage({sourceName:o,targetName:l,stream:dl.PULL,streamId:s,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Zi(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:dl.CANCEL,streamId:s,reason:qd(u)}),d.promise}},n)}destroy(){var e;(e=N(this,dj))==null||e.abort(),ae(this,dj,null)}}dj=new WeakMap,km=new WeakSet,NTe=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){ve(this,km,ETe).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===MD.DATA)i.resolve(e.data);else if(e.callback===MD.ERROR)i.reject(qd(e.reason));else throw new Error("Unexpected callback case");return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(r,e.data).then(function(o){s.postMessage({sourceName:n,targetName:i,callback:MD.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:n,targetName:i,callback:MD.ERROR,callbackId:e.callbackId,reason:qd(o)})});return}if(e.streamId){ve(this,km,STe).call(this,e);return}r(e.data)},STe=function(e){const r=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:dl.ENQUEUE,streamId:r,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:dl.CLOSE,streamId:r}),delete o.streamSinks[r])},error(u){Zi(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:dl.ERROR,streamId:r,reason:qd(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[r]=c,Promise.try(l,e.data,c).then(function(){s.postMessage({sourceName:n,targetName:i,stream:dl.START_COMPLETE,streamId:r,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:dl.START_COMPLETE,streamId:r,reason:qd(u)})})},ETe=function(e){const r=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[r],l=this.streamSinks[r];switch(e.stream){case dl.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(qd(e.reason));break;case dl.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(qd(e.reason));break;case dl.PULL:if(!l){s.postMessage({sourceName:n,targetName:i,stream:dl.PULL_COMPLETE,streamId:r,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||Fhe).then(function(){s.postMessage({sourceName:n,targetName:i,stream:dl.PULL_COMPLETE,streamId:r,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:dl.PULL_COMPLETE,streamId:r,reason:qd(u)})});break;case dl.ENQUEUE:if(Zi(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case dl.CLOSE:if(Zi(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),ve(this,km,R6).call(this,o,r);break;case dl.ERROR:Zi(o,"error should have stream controller"),o.controller.error(qd(e.reason)),ve(this,km,R6).call(this,o,r);break;case dl.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(qd(e.reason)),ve(this,km,R6).call(this,o,r);break;case dl.CANCEL:if(!l)break;const c=qd(e.reason);Promise.try(l.onCancel||Fhe,c).then(function(){s.postMessage({sourceName:n,targetName:i,stream:dl.CANCEL_COMPLETE,streamId:r,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:dl.CANCEL_COMPLETE,streamId:r,reason:qd(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}},R6=async function(e,r){var n,i,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[r]};var Mk;class jTe{constructor({enableHWA:e=!1}){ge(this,Mk,!1);ae(this,Mk,e)}create(e,r){if(e<=0||r<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,r);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!N(this,Mk)})}}reset(e,r,n){if(!e.canvas)throw new Error("Canvas is not specified");if(r<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=r,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,r){ua("Abstract method `_createCanvas` called.")}}Mk=new WeakMap;class Q8t extends jTe{constructor({ownerDocument:e=globalThis.document,enableHWA:r=!1}){super({enableHWA:r}),this._document=e}_createCanvas(e,r){const n=this._document.createElement("canvas");return n.width=e,n.height=r,n}}class ATe{constructor({baseUrl:e=null,isCompressed:r=!0}){this.baseUrl=e,this.isCompressed=r}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const r=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(r).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}async _fetch(e){ua("Abstract method `_fetch` called.")}}class Bhe extends ATe{async _fetch(e){const r=await E5(e,this.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):VI(r)}}class CTe{addFilter(e){return"none"}addHCMFilter(e,r){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,r,n,i,s){return"none"}destroy(e=!1){}}var S2,hj,Ox,Ix,Cu,E2,j2,Jr,Su,GT,bS,D6,wS,TTe,xG,_S,KT,XT,vG,YT;class J8t extends CTe{constructor({docId:r,ownerDocument:n=globalThis.document}){super();ge(this,Jr);ge(this,S2);ge(this,hj);ge(this,Ox);ge(this,Ix);ge(this,Cu);ge(this,E2);ge(this,j2,0);ae(this,Ix,r),ae(this,Cu,n)}addFilter(r){if(!r)return"none";let n=N(this,Jr,Su).get(r);if(n)return n;const[i,s,o]=ve(this,Jr,D6).call(this,r),l=r.length===1?i:`${i}${s}${o}`;if(n=N(this,Jr,Su).get(l),n)return N(this,Jr,Su).set(r,n),n;const c=`g_${N(this,Ix)}_transfer_map_${Eo(this,j2)._++}`,u=ve(this,Jr,wS).call(this,c);N(this,Jr,Su).set(r,u),N(this,Jr,Su).set(l,u);const d=ve(this,Jr,_S).call(this,c);return ve(this,Jr,XT).call(this,i,s,o,d),u}addHCMFilter(r,n){var x;const i=`${r}-${n}`,s="base";let o=N(this,Jr,GT).get(s);if((o==null?void 0:o.key)===i||(o?((x=o.filter)==null||x.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},N(this,Jr,GT).set(s,o)),!r||!n))return o.url;const l=ve(this,Jr,YT).call(this,r);r=rn.makeHexColor(...l);const c=ve(this,Jr,YT).call(this,n);if(n=rn.makeHexColor(...c),N(this,Jr,bS).style.color="",r==="#000000"&&n==="#ffffff"||r===n)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const y=g/255;u[g]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const d=u.join(","),h=`g_${N(this,Ix)}_hcm_filter`,f=o.filter=ve(this,Jr,_S).call(this,h);ve(this,Jr,XT).call(this,d,d,d,f),ve(this,Jr,xG).call(this,f);const m=(g,y)=>{const w=l[g]/255,S=c[g]/255,E=new Array(y+1);for(let j=0;j<=y;j++)E[j]=w+j/y*(S-w);return E.join(",")};return ve(this,Jr,XT).call(this,m(0,5),m(1,5),m(2,5),f),o.url=ve(this,Jr,wS).call(this,h),o.url}addAlphaFilter(r){let n=N(this,Jr,Su).get(r);if(n)return n;const[i]=ve(this,Jr,D6).call(this,[r]),s=`alpha_${i}`;if(n=N(this,Jr,Su).get(s),n)return N(this,Jr,Su).set(r,n),n;const o=`g_${N(this,Ix)}_alpha_map_${Eo(this,j2)._++}`,l=ve(this,Jr,wS).call(this,o);N(this,Jr,Su).set(r,l),N(this,Jr,Su).set(s,l);const c=ve(this,Jr,_S).call(this,o);return ve(this,Jr,vG).call(this,i,c),l}addLuminosityFilter(r){let n=N(this,Jr,Su).get(r||"luminosity");if(n)return n;let i,s;if(r?([i]=ve(this,Jr,D6).call(this,[r]),s=`luminosity_${i}`):s="luminosity",n=N(this,Jr,Su).get(s),n)return N(this,Jr,Su).set(r,n),n;const o=`g_${N(this,Ix)}_luminosity_map_${Eo(this,j2)._++}`,l=ve(this,Jr,wS).call(this,o);N(this,Jr,Su).set(r,l),N(this,Jr,Su).set(s,l);const c=ve(this,Jr,_S).call(this,o);return ve(this,Jr,TTe).call(this,c),r&&ve(this,Jr,vG).call(this,i,c),l}addHighlightHCMFilter(r,n,i,s,o){var S;const l=`${n}-${i}-${s}-${o}`;let c=N(this,Jr,GT).get(r);if((c==null?void 0:c.key)===l||(c?((S=c.filter)==null||S.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},N(this,Jr,GT).set(r,c)),!n||!i))return c.url;const[u,d]=[n,i].map(ve(this,Jr,YT).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,x]=[s,o].map(ve(this,Jr,YT).bind(this));f<h&&([h,f,m,x]=[f,h,x,m]),N(this,Jr,bS).style.color="";const g=(E,j,T)=>{const O=new Array(256),I=(f-h)/T,M=E/255,D=(j-E)/(255*T);let z=0;for(let F=0;F<=T;F++){const q=Math.round(h+F*I),Q=M+F*D;for(let re=z;re<=q;re++)O[re]=Q;z=q+1}for(let F=z;F<256;F++)O[F]=O[z-1];return O.join(",")},y=`g_${N(this,Ix)}_hcm_${r}_filter`,w=c.filter=ve(this,Jr,_S).call(this,y);return ve(this,Jr,xG).call(this,w),ve(this,Jr,XT).call(this,g(m[0],x[0],5),g(m[1],x[1],5),g(m[2],x[2],5),w),c.url=ve(this,Jr,wS).call(this,y),c.url}destroy(r=!1){var n,i,s,o;r&&((n=N(this,E2))!=null&&n.size)||((i=N(this,Ox))==null||i.parentNode.parentNode.remove(),ae(this,Ox,null),(s=N(this,hj))==null||s.clear(),ae(this,hj,null),(o=N(this,E2))==null||o.clear(),ae(this,E2,null),ae(this,j2,0))}}S2=new WeakMap,hj=new WeakMap,Ox=new WeakMap,Ix=new WeakMap,Cu=new WeakMap,E2=new WeakMap,j2=new WeakMap,Jr=new WeakSet,Su=function(){return N(this,hj)||ae(this,hj,new Map)},GT=function(){return N(this,E2)||ae(this,E2,new Map)},bS=function(){if(!N(this,Ox)){const r=N(this,Cu).createElement("div"),{style:n}=r;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=N(this,Cu).createElementNS(sx,"svg");i.setAttribute("width",0),i.setAttribute("height",0),ae(this,Ox,N(this,Cu).createElementNS(sx,"defs")),r.append(i),i.append(N(this,Ox)),N(this,Cu).body.append(r)}return N(this,Ox)},D6=function(r){if(r.length===1){const u=r[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[n,i,s]=r,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=n[u]/255,l[u]=i[u]/255,c[u]=s[u]/255;return[o.join(","),l.join(","),c.join(",")]},wS=function(r){if(N(this,S2)===void 0){ae(this,S2,"");const n=N(this,Cu).URL;n!==N(this,Cu).baseURI&&(HI(n)?ci('#createUrl: ignore "data:"-URL for performance reasons.'):ae(this,S2,eee(n,"")))}return`url(${N(this,S2)}#${r})`},TTe=function(r){const n=N(this,Cu).createElementNS(sx,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),r.append(n)},xG=function(r){const n=N(this,Cu).createElementNS(sx,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),r.append(n)},_S=function(r){const n=N(this,Cu).createElementNS(sx,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",r),N(this,Jr,bS).append(n),n},KT=function(r,n,i){const s=N(this,Cu).createElementNS(sx,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),r.append(s)},XT=function(r,n,i,s){const o=N(this,Cu).createElementNS(sx,"feComponentTransfer");s.append(o),ve(this,Jr,KT).call(this,o,"feFuncR",r),ve(this,Jr,KT).call(this,o,"feFuncG",n),ve(this,Jr,KT).call(this,o,"feFuncB",i)},vG=function(r,n){const i=N(this,Cu).createElementNS(sx,"feComponentTransfer");n.append(i),ve(this,Jr,KT).call(this,i,"feFuncA",r)},YT=function(r){return N(this,Jr,bS).style.color=r,j5(getComputedStyle(N(this,Jr,bS)).getPropertyValue("color"))};class PTe{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load font data at: ${r}`)})}async _fetch(e){ua("Abstract method `_fetch` called.")}}class $he extends PTe{async _fetch(e){const r=await E5(e,"arraybuffer");return new Uint8Array(r)}}class kTe{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load wasm data at: ${r}`)})}async _fetch(e){ua("Abstract method `_fetch` called.")}}class Uhe extends kTe{async _fetch(e){const r=await E5(e,"arraybuffer");return new Uint8Array(r)}}hd&&ci("Please use the `legacy` build in Node.js environments.");async function aee(t){const r=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(r)}class eLt extends CTe{}class tLt extends jTe{_createCanvas(e,r){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,r)}}class rLt extends ATe{async _fetch(e){return aee(e)}}class nLt extends PTe{async _fetch(e){return aee(e)}}class iLt extends kTe{async _fetch(e){return aee(e)}}const cS="__forcedDependency",{floor:zhe,ceil:Vhe}=Math;function LD(t,e,r,n,i,s){t[e*4+0]=Math.min(t[e*4+0],r),t[e*4+1]=Math.min(t[e*4+1],n),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],s)}const yG=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var fj,ny;class sLt{constructor(e,r){ge(this,fj);ge(this,ny);ae(this,fj,e),ae(this,ny,r)}get length(){return N(this,fj).length}isEmpty(e){return N(this,fj)[e]===yG}minX(e){return N(this,ny)[e*4+0]/256}minY(e){return N(this,ny)[e*4+1]/256}maxX(e){return(N(this,ny)[e*4+2]+1)/256}maxY(e){return(N(this,ny)[e*4+3]+1)/256}}fj=new WeakMap,ny=new WeakMap;const FD=(t,e)=>{if(!t)return;let r=t.get(e);return r||(r={dependencies:new Set,isRenderingOperation:!1},t.set(e,r)),r};var Xd,Yd,A2,vp,C2,Rx,Ls,Xs,Dx,Zd,Lk,mj,T2,P2,Mx,Tu,z0,Fk,bG;class aLt{constructor(e,r,n=!1){ge(this,Fk);ge(this,Xd,{__proto__:null});ge(this,Yd,{__proto__:null,transform:[],moveText:[],sameLineText:[],[cS]:[]});ge(this,A2,new Map);ge(this,vp,[]);ge(this,C2,[]);ge(this,Rx,[[1,0,0,1,0,0]]);ge(this,Ls,[-1/0,-1/0,1/0,1/0]);ge(this,Xs,new Float64Array([1/0,1/0,-1/0,-1/0]));ge(this,Dx,-1);ge(this,Zd,new Set);ge(this,Lk,new Map);ge(this,mj,new Map);ge(this,T2);ge(this,P2);ge(this,Mx);ge(this,Tu);ge(this,z0);ae(this,T2,e.width),ae(this,P2,e.height),ve(this,Fk,bG).call(this,r),n&&ae(this,z0,new Map)}growOperationsCount(e){e>=N(this,Tu).length&&ve(this,Fk,bG).call(this,e,N(this,Tu))}save(e){return ae(this,Xd,{__proto__:N(this,Xd)}),ae(this,Yd,{__proto__:N(this,Yd),transform:{__proto__:N(this,Yd).transform},moveText:{__proto__:N(this,Yd).moveText},sameLineText:{__proto__:N(this,Yd).sameLineText},[cS]:{__proto__:N(this,Yd)[cS]}}),ae(this,Ls,{__proto__:N(this,Ls)}),N(this,vp).push(e),this}restore(e){var i;const r=Object.getPrototypeOf(N(this,Xd));if(r===null)return this;ae(this,Xd,r),ae(this,Yd,Object.getPrototypeOf(N(this,Yd))),ae(this,Ls,Object.getPrototypeOf(N(this,Ls)));const n=N(this,vp).pop();return n!==void 0&&((i=FD(N(this,z0),e))==null||i.dependencies.add(n),N(this,Tu)[e]=N(this,Tu)[n]),this}recordOpenMarker(e){return N(this,vp).push(e),this}getOpenMarker(){return N(this,vp).length===0?null:N(this,vp).at(-1)}recordCloseMarker(e){var n;const r=N(this,vp).pop();return r!==void 0&&((n=FD(N(this,z0),e))==null||n.dependencies.add(r),N(this,Tu)[e]=N(this,Tu)[r]),this}beginMarkedContent(e){return N(this,C2).push(e),this}endMarkedContent(e){var n;const r=N(this,C2).pop();return r!==void 0&&((n=FD(N(this,z0),e))==null||n.dependencies.add(r),N(this,Tu)[e]=N(this,Tu)[r]),this}pushBaseTransform(e){return N(this,Rx).push(rn.multiplyByDOMMatrix(N(this,Rx).at(-1),e.getTransform())),this}popBaseTransform(){return N(this,Rx).length>1&&N(this,Rx).pop(),this}recordSimpleData(e,r){return N(this,Xd)[e]=r,this}recordIncrementalData(e,r){return N(this,Yd)[e].push(r),this}resetIncrementalData(e,r){return N(this,Yd)[e].length=0,this}recordNamedData(e,r){return N(this,A2).set(e,r),this}recordSimpleDataFromNamed(e,r,n){N(this,Xd)[e]=N(this,A2).get(r)??n}recordFutureForcedDependency(e,r){return this.recordIncrementalData(cS,r),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const r of e)r in N(this,Xd)&&this.recordFutureForcedDependency(r,N(this,Xd)[r]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of N(this,Zd))this.recordFutureForcedDependency(cS,e);return this}resetBBox(e){return N(this,Dx)!==e&&(ae(this,Dx,e),N(this,Xs)[0]=1/0,N(this,Xs)[1]=1/0,N(this,Xs)[2]=-1/0,N(this,Xs)[3]=-1/0),this}recordClipBox(e,r,n,i,s,o){const l=rn.multiplyByDOMMatrix(N(this,Rx).at(-1),r.getTransform()),c=[1/0,1/0,-1/0,-1/0];rn.axialAlignedBoundingBox([n,s,i,o],l,c);const u=rn.intersect(N(this,Ls),c);return u?(N(this,Ls)[0]=u[0],N(this,Ls)[1]=u[1],N(this,Ls)[2]=u[2],N(this,Ls)[3]=u[3]):(N(this,Ls)[0]=N(this,Ls)[1]=1/0,N(this,Ls)[2]=N(this,Ls)[3]=-1/0),this}recordBBox(e,r,n,i,s,o){const l=N(this,Ls);if(l[0]===1/0)return this;const c=rn.multiplyByDOMMatrix(N(this,Rx).at(-1),r.getTransform());if(l[0]===-1/0)return rn.axialAlignedBoundingBox([n,s,i,o],c,N(this,Xs)),this;const u=[1/0,1/0,-1/0,-1/0];return rn.axialAlignedBoundingBox([n,s,i,o],c,u),N(this,Xs)[0]=Math.min(N(this,Xs)[0],Math.max(u[0],l[0])),N(this,Xs)[1]=Math.min(N(this,Xs)[1],Math.max(u[1],l[1])),N(this,Xs)[2]=Math.max(N(this,Xs)[2],Math.min(u[2],l[2])),N(this,Xs)[3]=Math.max(N(this,Xs)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,r,n,i=1,s=0,o=0,l){const c=n.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&N(this,mj).get(n),u!==!1&&(d=[0,0,0,0],rn.axialAlignedBoundingBox(c,n.fontMatrix,d),(i!==1||s!==0||o!==0)&&rn.scaleMinMax([i,0,0,-i,s,o],d),u)))return this.recordBBox(e,r,d[0],d[2],d[1],d[3]);if(!l)return this.recordFullPageBBox(e);const h=l();return c&&d&&u===void 0&&(u=d[0]<=s-h.actualBoundingBoxLeft&&d[2]>=s+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,N(this,mj).set(n,u),u)?this.recordBBox(e,r,d[0],d[2],d[1],d[3]):this.recordBBox(e,r,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return N(this,Xs)[0]=Math.max(0,N(this,Ls)[0]),N(this,Xs)[1]=Math.max(0,N(this,Ls)[1]),N(this,Xs)[2]=Math.min(N(this,T2),N(this,Ls)[2]),N(this,Xs)[3]=Math.min(N(this,P2),N(this,Ls)[3]),this}getSimpleIndex(e){return N(this,Xd)[e]}recordDependencies(e,r){const n=N(this,Zd),i=N(this,Xd),s=N(this,Yd);for(const o of r)o in N(this,Xd)?n.add(i[o]):o in s&&s[o].forEach(n.add,n);return this}recordNamedDependency(e,r){return N(this,A2).has(r)&&N(this,Zd).add(N(this,A2).get(r)),this}recordOperation(e,r=!1){if(this.recordDependencies(e,[cS]),N(this,z0)){const n=FD(N(this,z0),e),{dependencies:i}=n;N(this,Zd).forEach(i.add,i),N(this,vp).forEach(i.add,i),N(this,C2).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(N(this,Dx)===e){const n=zhe(N(this,Xs)[0]*256/N(this,T2)),i=zhe(N(this,Xs)[1]*256/N(this,P2)),s=Vhe(N(this,Xs)[2]*256/N(this,T2)),o=Vhe(N(this,Xs)[3]*256/N(this,P2));LD(N(this,Mx),e,n,i,s,o);for(const l of N(this,Zd))l!==e&&LD(N(this,Mx),l,n,i,s,o);for(const l of N(this,vp))l!==e&&LD(N(this,Mx),l,n,i,s,o);for(const l of N(this,C2))l!==e&&LD(N(this,Mx),l,n,i,s,o);r||(N(this,Zd).clear(),ae(this,Dx,-1))}return this}recordShowTextOperation(e,r=!1){const n=Array.from(N(this,Zd));this.recordOperation(e,r),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,r=!1){return N(this,Dx)===e&&(ae(this,Dx,-1),N(this,Ls)[0]=Math.max(N(this,Ls)[0],N(this,Xs)[0]),N(this,Ls)[1]=Math.max(N(this,Ls)[1],N(this,Xs)[1]),N(this,Ls)[2]=Math.min(N(this,Ls)[2],N(this,Xs)[2]),N(this,Ls)[3]=Math.min(N(this,Ls)[3],N(this,Xs)[3]),r||N(this,Zd).clear()),this}_takePendingDependencies(){const e=N(this,Zd);return ae(this,Zd,new Set),e}_extractOperation(e){const r=N(this,Lk).get(e);return N(this,Lk).delete(e),r}_pushPendingDependencies(e){for(const r of e)N(this,Zd).add(r)}take(){return N(this,mj).clear(),new sLt(N(this,Tu),N(this,Mx))}takeDebugMetadata(){return N(this,z0)}}Xd=new WeakMap,Yd=new WeakMap,A2=new WeakMap,vp=new WeakMap,C2=new WeakMap,Rx=new WeakMap,Ls=new WeakMap,Xs=new WeakMap,Dx=new WeakMap,Zd=new WeakMap,Lk=new WeakMap,mj=new WeakMap,T2=new WeakMap,P2=new WeakMap,Mx=new WeakMap,Tu=new WeakMap,z0=new WeakMap,Fk=new WeakSet,bG=function(e,r){const n=new ArrayBuffer(e*4);ae(this,Mx,new Uint8ClampedArray(n)),ae(this,Tu,new Uint32Array(n)),r&&r.length>0?(N(this,Tu).set(r),N(this,Tu).fill(yG,r.length)):N(this,Tu).fill(yG)};var aa,To,yp,pj,gj;const Nee=class Nee{constructor(e,r,n){ge(this,aa);ge(this,To);ge(this,yp);ge(this,pj,0);ge(this,gj,0);if(e instanceof Nee&&N(e,yp)===!!n)return e;ae(this,aa,e),ae(this,To,r),ae(this,yp,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Eo(this,gj)._++,N(this,aa).save(N(this,To)),this}restore(e){return N(this,gj)>0&&(N(this,aa).restore(N(this,To)),Eo(this,gj)._--),this}recordOpenMarker(e){return Eo(this,pj)._++,this}getOpenMarker(){return N(this,pj)>0?N(this,To):N(this,aa).getOpenMarker()}recordCloseMarker(e){return Eo(this,pj)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return N(this,aa).pushBaseTransform(e),this}popBaseTransform(){return N(this,aa).popBaseTransform(),this}recordSimpleData(e,r){return N(this,aa).recordSimpleData(e,N(this,To)),this}recordIncrementalData(e,r){return N(this,aa).recordIncrementalData(e,N(this,To)),this}resetIncrementalData(e,r){return N(this,aa).resetIncrementalData(e,N(this,To)),this}recordNamedData(e,r){return this}recordSimpleDataFromNamed(e,r,n){return N(this,aa).recordSimpleDataFromNamed(e,r,N(this,To)),this}recordFutureForcedDependency(e,r){return N(this,aa).recordFutureForcedDependency(e,N(this,To)),this}inheritSimpleDataAsFutureForcedDependencies(e){return N(this,aa).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return N(this,aa).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return N(this,yp)||N(this,aa).resetBBox(N(this,To)),this}recordClipBox(e,r,n,i,s,o){return N(this,yp)||N(this,aa).recordClipBox(N(this,To),r,n,i,s,o),this}recordBBox(e,r,n,i,s,o){return N(this,yp)||N(this,aa).recordBBox(N(this,To),r,n,i,s,o),this}recordCharacterBBox(e,r,n,i,s,o,l){return N(this,yp)||N(this,aa).recordCharacterBBox(N(this,To),r,n,i,s,o,l),this}recordFullPageBBox(e){return N(this,yp)||N(this,aa).recordFullPageBBox(N(this,To)),this}getSimpleIndex(e){return N(this,aa).getSimpleIndex(e)}recordDependencies(e,r){return N(this,aa).recordDependencies(N(this,To),r),this}recordNamedDependency(e,r){return N(this,aa).recordNamedDependency(N(this,To),r),this}recordOperation(e){return N(this,aa).recordOperation(N(this,To),!0),this}recordShowTextOperation(e){return N(this,aa).recordShowTextOperation(N(this,To),!0),this}bboxToClipBoxDropOperation(e){return N(this,yp)||N(this,aa).bboxToClipBoxDropOperation(N(this,To),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};aa=new WeakMap,To=new WeakMap,yp=new WeakMap,pj=new WeakMap,gj=new WeakMap;let GL=Nee;const Xf={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Hc={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function wG(t,e){if(!e)return;const r=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],r,n),t.clip(i)}class oee{isModifyingCurrentTransform(){return!1}getPattern(){ua("Abstract method `getPattern` called.")}}class oLt extends oee{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let r;this._type==="axial"?r=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)r.addColorStop(n[0],n[1]);return r}getPattern(e,r,n,i){let s;if(i===Hc.STROKE||i===Hc.FILL){const o=r.current.getClippedPathBoundingBox(i,co(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=r.cachedCanvases.getCanvas("pattern",l,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),n=rn.transform(n,[1,0,0,1,o[0],o[1]]),d.transform(...r.baseTransform),this.matrix&&d.transform(...this.matrix),wG(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else wG(e,this._bbox),s=this._createGradient(e);return s}}function sz(t,e,r,n,i,s,o,l){const c=e.coords,u=e.colors,d=t.data,h=t.width*4;let f;c[r+1]>c[n+1]&&(f=r,r=n,n=f,f=s,s=o,o=f),c[n+1]>c[i+1]&&(f=n,n=i,i=f,f=o,o=l,l=f),c[r+1]>c[n+1]&&(f=r,r=n,n=f,f=s,s=o,o=f);const m=(c[r]+e.offsetX)*e.scaleX,x=(c[r+1]+e.offsetY)*e.scaleY,g=(c[n]+e.offsetX)*e.scaleX,y=(c[n+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,S=(c[i+1]+e.offsetY)*e.scaleY;if(x>=S)return;const E=u[s],j=u[s+1],T=u[s+2],O=u[o],I=u[o+1],M=u[o+2],D=u[l],z=u[l+1],F=u[l+2],q=Math.round(x),Q=Math.round(S);let re,Z,se,K,X,Y,oe,xe;for(let H=q;H<=Q;H++){if(H<y){const he=H<x?0:(x-H)/(x-y);re=m-(m-g)*he,Z=E-(E-O)*he,se=j-(j-I)*he,K=T-(T-M)*he}else{let he;H>S?he=1:y===S?he=0:he=(y-H)/(y-S),re=g-(g-w)*he,Z=O-(O-D)*he,se=I-(I-z)*he,K=M-(M-F)*he}let J;H<x?J=0:H>S?J=1:J=(x-H)/(x-S),X=m-(m-w)*J,Y=E-(E-D)*J,oe=j-(j-z)*J,xe=T-(T-F)*J;const ie=Math.round(Math.min(re,X)),ce=Math.round(Math.max(re,X));let me=h*H+ie*4;for(let he=ie;he<=ce;he++)J=(re-he)/(re-X),J<0?J=0:J>1&&(J=1),d[me++]=Z-(Z-Y)*J|0,d[me++]=se-(se-oe)*J|0,d[me++]=K-(K-xe)*J|0,d[me++]=255}}function lLt(t,e,r){const n=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,u=l-1;for(s=0;s<c;s++){let d=s*l;for(let h=0;h<u;h++,d++)sz(t,r,n[d],n[d+1],n[d+l],i[d],i[d+1],i[d+l]),sz(t,r,n[d+l+1],n[d+1],n[d+l],i[d+l+1],i[d+1],i[d+l])}break;case"triangles":for(s=0,o=n.length;s<o;s+=3)sz(t,r,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class cLt extends oee{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,r,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=u/h,x=d/f,g={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/x},y=h+2*2,w=f+2*2,S=n.getCanvas("mesh",y,w),E=S.context,j=E.createImageData(h,f);if(r){const O=j.data;for(let I=0,M=O.length;I<M;I+=4)O[I]=r[0],O[I+1]=r[1],O[I+2]=r[2],O[I+3]=255}for(const O of this._figures)lLt(j,O,g);return E.putImageData(j,2,2),{canvas:S.canvas,offsetX:l-2*m,offsetY:c-2*x,scaleX:m,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,r,n,i){wG(e,this._bbox);const s=new Float32Array(2);if(i===Hc.SHADING)rn.singularValueDecompose2dScale(co(e),s);else if(this.matrix){rn.singularValueDecompose2dScale(this.matrix,s);const[l,c]=s;rn.singularValueDecompose2dScale(r.baseTransform,s),s[0]*=l,s[1]*=c}else rn.singularValueDecompose2dScale(r.baseTransform,s);const o=this._createMeshCanvas(s,i===Hc.SHADING?null:this._background,r.cachedCanvases);return i!==Hc.SHADING&&(e.setTransform(...r.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class uLt extends oee{getPattern(){return"hotpink"}}function dLt(t){switch(t[0]){case"RadialAxial":return new oLt(t);case"Mesh":return new cLt(t);case"Dummy":return new uLt}throw new Error(`Unknown IR type: ${t[0]}`)}const qhe={COLORED:1,UNCOLORED:2},dF=class dF{constructor(e,r,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=r,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,r){var Y,oe;const{bbox:n,operatorList:i,paintType:s,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),$B("TilingType: "+o);const h=n[0],f=n[1],m=n[2],x=n[3],g=m-h,y=x-f,w=new Float32Array(2);rn.singularValueDecompose2dScale(this.matrix,w);const[S,E]=w;rn.singularValueDecompose2dScale(this.baseTransform,w);const j=S*w[0],T=E*w[1];let O=g,I=y,M=!1,D=!1;const z=Math.ceil(u*j),F=Math.ceil(d*T),q=Math.ceil(g*j),Q=Math.ceil(y*T);z>=q?O=u:M=!0,F>=Q?I=d:D=!0;const re=this.getSizeAndScale(O,this.ctx.canvas.width,j),Z=this.getSizeAndScale(I,this.ctx.canvas.height,T),se=e.cachedCanvases.getCanvas("pattern",re.size,Z.size),K=se.context,X=c.createCanvasGraphics(K,r);if(X.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(X,s,l),K.translate(-re.scale*h,-Z.scale*f),X.transform(0,re.scale,0,0,Z.scale,0,0),K.save(),(Y=X.dependencyTracker)==null||Y.save(),this.clipBbox(X,h,f,m,x),X.baseTransform=co(X.ctx),X.executeOperatorList(i),X.endDrawing(),(oe=X.dependencyTracker)==null||oe.restore(),K.restore(),M||D){const xe=se.canvas;M&&(O=u),D&&(I=d);const H=this.getSizeAndScale(O,this.ctx.canvas.width,j),J=this.getSizeAndScale(I,this.ctx.canvas.height,T),ie=H.size,ce=J.size,me=e.cachedCanvases.getCanvas("pattern-workaround",ie,ce),he=me.context,_e=M?Math.floor(g/u):0,ue=D?Math.floor(y/d):0;for(let je=0;je<=_e;je++)for(let ye=0;ye<=ue;ye++)he.drawImage(xe,ie*je,ce*ye,ie,ce,0,0,ie,ce);return{canvas:me.canvas,scaleX:H.scale,scaleY:J.scale,offsetX:h,offsetY:f}}return{canvas:se.canvas,scaleX:re.scale,scaleY:Z.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,r,n){const i=Math.max(dF.MAX_PATTERN_SIZE,r);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,r,n,i,s){const o=i-r,l=s-n;e.ctx.rect(r,n,o,l),rn.axialAlignedBoundingBox([r,n,i,s],co(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,r,n){const i=e.ctx,s=e.current;switch(r){case qhe.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;i.fillStyle=s.fillColor=o,i.strokeStyle=s.strokeColor=l;break;case qhe.UNCOLORED:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new O8t(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,r,n,i,s){let o=n;i!==Hc.SHADING&&(o=rn.transform(o,r.baseTransform),this.matrix&&(o=rn.transform(o,this.matrix)));const l=this.createPatternCanvas(r,s);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};rr(dF,"MAX_PATTERN_SIZE",3e3);let _G=dF;function hLt({src:t,srcPos:e=0,dest:r,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const l=vc.isLittleEndian?4278190080:255,[c,u]=o?[s,l]:[l,s],d=n>>3,h=n&7,f=t.length;r=new Uint32Array(r.buffer);let m=0;for(let x=0;x<i;x++){for(const y=e+d;e<y;e++){const w=e<f?t[e]:255;r[m++]=w&128?u:c,r[m++]=w&64?u:c,r[m++]=w&32?u:c,r[m++]=w&16?u:c,r[m++]=w&8?u:c,r[m++]=w&4?u:c,r[m++]=w&2?u:c,r[m++]=w&1?u:c}if(h===0)continue;const g=e<f?t[e++]:255;for(let y=0;y<h;y++)r[m++]=g&1<<7-y?u:c}return{srcPos:e,destPos:m}}const Hhe=16,Whe=100,fLt=15,Ghe=10,rh=16,az=new DOMMatrix,hf=new Float32Array(2),eE=new Float32Array([1/0,1/0,-1/0,-1/0]);function mLt(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(r,n){e.translate(r,n),this.__originalTranslate(r,n)},t.scale=function(r,n){e.scale(r,n),this.__originalScale(r,n)},t.transform=function(r,n,i,s,o,l){e.transform(r,n,i,s,o,l),this.__originalTransform(r,n,i,s,o,l)},t.setTransform=function(r,n,i,s,o,l){e.setTransform(r,n,i,s,o,l),this.__originalSetTransform(r,n,i,s,o,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(r){e.rotate(r),this.__originalRotate(r)},t.clip=function(r){e.clip(r),this.__originalClip(r)},t.moveTo=function(r,n){e.moveTo(r,n),this.__originalMoveTo(r,n)},t.lineTo=function(r,n){e.lineTo(r,n),this.__originalLineTo(r,n)},t.bezierCurveTo=function(r,n,i,s,o,l){e.bezierCurveTo(r,n,i,s,o,l),this.__originalBezierCurveTo(r,n,i,s,o,l)},t.rect=function(r,n,i,s){e.rect(r,n,i,s),this.__originalRect(r,n,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class pLt{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,r,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,r,n)):(i=this.canvasFactory.create(r,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const r=this.cache[e];this.canvasFactory.destroy(r),delete this.cache[e]}}}function BD(t,e,r,n,i,s,o,l,c,u){const[d,h,f,m,x,g]=co(t);if(h===0&&f===0){const S=o*d+x,E=Math.round(S),j=l*m+g,T=Math.round(j),O=(o+c)*d+x,I=Math.abs(Math.round(O)-E)||1,M=(l+u)*m+g,D=Math.abs(Math.round(M)-T)||1;return t.setTransform(Math.sign(d),0,0,Math.sign(m),E,T),t.drawImage(e,r,n,i,s,0,0,I,D),t.setTransform(d,h,f,m,x,g),[I,D]}if(d===0&&m===0){const S=l*f+x,E=Math.round(S),j=o*h+g,T=Math.round(j),O=(l+u)*f+x,I=Math.abs(Math.round(O)-E)||1,M=(o+c)*h+g,D=Math.abs(Math.round(M)-T)||1;return t.setTransform(0,Math.sign(h),Math.sign(f),0,E,T),t.drawImage(e,r,n,i,s,0,0,D,I),t.setTransform(d,h,f,m,x,g),[D,I]}t.drawImage(e,r,n,i,s,o,l,c,u);const y=Math.hypot(d,h),w=Math.hypot(f,m);return[y*c,w*u]}class Khe{constructor(e,r,n){rr(this,"alphaIsShape",!1);rr(this,"fontSize",0);rr(this,"fontSizeScale",1);rr(this,"textMatrix",null);rr(this,"textMatrixScale",1);rr(this,"fontMatrix",KW);rr(this,"leading",0);rr(this,"x",0);rr(this,"y",0);rr(this,"lineX",0);rr(this,"lineY",0);rr(this,"charSpacing",0);rr(this,"wordSpacing",0);rr(this,"textHScale",1);rr(this,"textRenderingMode",Oc.FILL);rr(this,"textRise",0);rr(this,"fillColor","#000000");rr(this,"strokeColor","#000000");rr(this,"patternFill",!1);rr(this,"patternStroke",!1);rr(this,"fillAlpha",1);rr(this,"strokeAlpha",1);rr(this,"lineWidth",1);rr(this,"activeSMask",null);rr(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,r]),this.minMax=eE.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Hc.FILL,r=null){const n=this.minMax.slice();if(e===Hc.STROKE){r||ua("Stroke bounding box must include transform."),rn.singularValueDecompose2dScale(r,hf);const i=hf[0]*this.lineWidth/2,s=hf[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const e=rn.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(eE,0)}getClippedPathBoundingBox(e=Hc.FILL,r=null){return rn.intersect(this.clipBox,this.getPathBoundingBox(e,r))}}function Xhe(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const r=e.height,n=e.width,i=r%rh,s=(r-i)/rh,o=i===0?s:s+1,l=t.createImageData(n,rh);let c=0,u;const d=e.data,h=l.data;let f,m,x,g;if(e.kind===Z4.GRAYSCALE_1BPP){const y=d.byteLength,w=new Uint32Array(h.buffer,0,h.byteLength>>2),S=w.length,E=n+7>>3,j=4294967295,T=vc.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(x=f<s?rh:i,u=0,m=0;m<x;m++){const O=y-c;let I=0;const M=O>E?n:O*8-7,D=M&-8;let z=0,F=0;for(;I<D;I+=8)F=d[c++],w[u++]=F&128?j:T,w[u++]=F&64?j:T,w[u++]=F&32?j:T,w[u++]=F&16?j:T,w[u++]=F&8?j:T,w[u++]=F&4?j:T,w[u++]=F&2?j:T,w[u++]=F&1?j:T;for(;I<M;I++)z===0&&(F=d[c++],z=128),w[u++]=F&z?j:T,z>>=1}for(;u<S;)w[u++]=0;t.putImageData(l,0,f*rh)}}else if(e.kind===Z4.RGBA_32BPP){for(m=0,g=n*rh*4,f=0;f<s;f++)h.set(d.subarray(c,c+g)),c+=g,t.putImageData(l,0,m),m+=rh;f<o&&(g=n*i*4,h.set(d.subarray(c,c+g)),t.putImageData(l,0,m))}else if(e.kind===Z4.RGB_24BPP)for(x=rh,g=n*x,f=0;f<o;f++){for(f>=s&&(x=i,g=n*x),u=0,m=g;m--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;t.putImageData(l,0,f*rh)}else throw new Error(`bad image kind: ${e.kind}`)}function Yhe(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const r=e.height,n=e.width,i=r%rh,s=(r-i)/rh,o=i===0?s:s+1,l=t.createImageData(n,rh);let c=0;const u=e.data,d=l.data;for(let h=0;h<o;h++){const f=h<s?rh:i;({srcPos:c}=hLt({src:u,srcPos:c,dest:d,width:n,height:f,nonBlackColor:0})),t.putImageData(l,0,h*rh)}}function vT(t,e){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of r)t[n]!==void 0&&(e[n]=t[n]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function $D(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function Zhe(t,e){if(e)return!0;rn.singularValueDecompose2dScale(t,hf);const r=Math.fround(s0.pixelRatio*Rv.PDF_TO_CSS_UNITS);return hf[0]<=r&&hf[1]<=r}const gLt=["butt","round","square"],xLt=["miter","round","bevel"],vLt={},Qhe={};var a0,NG,SG,EG;const See=class See{constructor(e,r,n,i,s,{optionalContentConfig:o,markedContentStack:l=null},c,u,d){ge(this,a0);this.ctx=e,this.current=new Khe(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new pLt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,r,n=null){var i;return typeof r=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,r),r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r)):n}beginDrawing({transform:e,viewport:r,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...co(this.compositeCtx))}this.ctx.save(),$D(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=co(this.ctx)}executeOperatorList(e,r,n,i,s){var w;const o=e.argsArray,l=e.fnArray;let c=r||0;const u=o.length;if(u===c)return c;const d=u-c>Ghe&&typeof n=="function",h=d?Date.now()+fLt:0;let f=0;const m=this.commonObjs,x=this.objs;let g,y;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,n),c;if(!s||s(c))if(g=l[c],y=o[c]??null,g!==AC.dependency)y===null?this[g](c):this[g](c,...y);else for(const S of y){(w=this.dependencyTracker)==null||w.recordNamedData(S,c);const E=S.startsWith("g_")?m:x;if(!E.has(S))return E.get(S,n),c}if(c++,c===u)return c;if(d&&++f>Ghe){if(Date.now()>h)return n(),c;f=0}}}endDrawing(){ve(this,a0,NG).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const r of e.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);e.clear()}this._cachedBitmapsMap.clear(),ve(this,a0,SG).call(this)}_scaleImage(e,r){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(r[0],r[1]),1),o=Math.max(Math.hypot(r[2],r[3]),1),l=n,c=i,u="prescale1",d,h;for(;s>2&&l>1||o>2&&c>1;){let f=l,m=c;s>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/f),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),d=this.cachedCanvases.getCanvas(u,f,m),h=d.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,l,c,0,0,f,m),e=d.canvas,l=f,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,r){var z,F;const n=this.ctx,{width:i,height:s}=r,o=this.current.fillColor,l=this.current.patternFill,c=co(n);let u,d,h,f;if((r.bitmap||r.data)&&r.count>1){const q=r.bitmap||r.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(q),u||(u=new Map,this._cachedBitmapsMap.set(q,u));const Q=u.get(d);if(Q&&!l){const re=Math.round(Math.min(c[0],c[2])+c[4]),Z=Math.round(Math.min(c[1],c[3])+c[5]);return(z=this.dependencyTracker)==null||z.recordDependencies(e,Xf.transformAndFill),{canvas:Q,offsetX:re,offsetY:Z}}h=Q}h||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),Yhe(f.context,r));let m=rn.transform(c,[1/i,0,0,-1/s,0,0]);m=rn.transform(m,[1,0,0,1,0,-s]);const x=eE.slice();rn.axialAlignedBoundingBox([0,0,i,s],m,x);const[g,y,w,S]=x,E=Math.round(w-g)||1,j=Math.round(S-y)||1,T=this.cachedCanvases.getCanvas("fillCanvas",E,j),O=T.context,I=g,M=y;O.translate(-I,-M),O.transform(...m),h||(h=this._scaleImage(f.canvas,_0(O)),h=h.img,u&&l&&u.set(d,h)),O.imageSmoothingEnabled=Zhe(co(O),r.interpolate),BD(O,h,0,0,h.width,h.height,0,0,i,s),O.globalCompositeOperation="source-in";const D=rn.transform(_0(O),[1,0,0,1,-I,-M]);return O.fillStyle=l?o.getPattern(n,this,D,Hc.FILL,e):o,O.fillRect(0,0,i,s),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,T.canvas)),(F=this.dependencyTracker)==null||F.recordDependencies(e,Xf.transformAndFill),{canvas:T.canvas,offsetX:Math.round(I),offsetY:Math.round(M)}}setLineWidth(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),r!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=r,this.ctx.lineWidth=r}setLineCap(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=gLt[r]}setLineJoin(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=xLt[r]}setMiterLimit(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=r}setDash(e,r,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(r),i.lineDashOffset=n)}setRenderingIntent(e,r){}setFlatness(e,r){}setGState(e,r){var n,i,s,o,l;for(const[c,u]of r)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,r,n);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),vT(this.suspendedCtx,o),mLt(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),vT(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,r,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,r,n,i){const s=i[0],o=i[1],l=i[2]-s,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(r.context,n,l,c,r.subtype,r.backdrop,r.transferMap,s,o,r.offsetX,r.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,r,n,i,s,o,l,c,u,d,h){let f=e.canvas,m=c-d,x=u-h;if(o)if(m<0||x<0||m+n>f.width||x+i>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",n,i),w=y.context;w.drawImage(f,-m,-x),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,n,i),w.globalCompositeOperation="source-over",f=y.canvas,m=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(m,x,n,i),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,x,n,i),e.restore()}r.save(),r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?r.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(r.filter=this.filterFactory.addLuminosityFilter(l));const g=new Path2D;g.rect(c,u,n,i),r.clip(g),r.globalCompositeOperation="destination-in",r.drawImage(f,m,x,n,i,c,u,n,i),r.restore()}save(e){var n;this.inSMaskMode&&vT(this.ctx,this.suspendedCtx),this.ctx.save();const r=this.current;this.stateStack.push(r),this.current=r.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var r;if((r=this.dependencyTracker)==null||r.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&vT(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,r,n,i,s,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(r,n,i,s,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,r,n,i){let[s]=n;if(!i){s||(s=n[0]=new Path2D),this[r](e,s);return}if(this.dependencyTracker!==null){const o=r===AC.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(s instanceof Path2D)){const o=n[0]=new Path2D;for(let l=0,c=s.length;l<c;)switch(s[l++]){case ID.moveTo:o.moveTo(s[l++],s[l++]);break;case ID.lineTo:o.lineTo(s[l++],s[l++]);break;case ID.curveTo:o.bezierCurveTo(s[l++],s[l++],s[l++],s[l++],s[l++],s[l++]);break;case ID.closePath:o.closePath();break;default:ci(`Unrecognized drawing path operator: ${s[l-1]}`);break}s=o}rn.axialAlignedBoundingBox(i,co(this.ctx),this.current.minMax),this[r](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,r,n=!0){var o;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const l=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,_0(i),Hc.STROKE,e),l){const c=new Path2D;c.addPath(r,i.getTransform().invertSelf().multiplySelf(l)),r=c}this.rescaleAndStroke(r,!1),i.restore()}else this.rescaleAndStroke(r,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Xf.stroke),n&&this.consumePath(e,r,this.current.getClippedPathBoundingBox(Hc.STROKE,co(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,r){this.stroke(e,r)}fill(e,r,n=!0){var u,d,h;const i=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=s.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=s.getPattern(i,this,_0(i),Hc.FILL,e),f){const m=new Path2D;m.addPath(r,i.getTransform().invertSelf().multiplySelf(f)),r=m}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(r,"evenodd"),this.pendingEOFill=!1):i.fill(r)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Xf.fill),l&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),n&&this.consumePath(e,r,c)}eoFill(e,r){this.pendingEOFill=!0,this.fill(e,r)}fillStroke(e,r){this.fill(e,r,!1),this.stroke(e,r,!1),this.consumePath(e,r)}eoFillStroke(e,r){this.pendingEOFill=!0,this.fillStroke(e,r)}closeFillStroke(e,r){this.fillStroke(e,r)}closeEOFillStroke(e,r){this.pendingEOFill=!0,this.fillStroke(e,r)}endPath(e,r){this.consumePath(e,r)}rawFillPath(e,r){var n;this.ctx.fill(r),(n=this.dependencyTracker)==null||n.recordDependencies(e,Xf.rawFillPath).recordOperation(e)}clip(e){var r;(r=this.dependencyTracker)==null||r.recordFutureForcedDependency("clipMode",e),this.pendingClip=vLt}eoClip(e){var r;(r=this.dependencyTracker)==null||r.recordFutureForcedDependency("clipMode",e),this.pendingClip=Qhe}beginText(e){var r;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(r=this.dependencyTracker)==null||r.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const r=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;r!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(r!==void 0){const i=new Path2D,s=n.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:d}of r)d&&i.addPath(d,new DOMMatrix(o).preMultiplySelf(s).translate(l,c).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=r}setWordSpacing(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=r}setHScale(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=r/100}setLeading(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-r}setFont(e,r,n){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",r,e);const i=this.commonObjs.get(r),s=this.current;if(!i)throw new Error(`Can't find font for ${r}`);if(s.fontMatrix=i.fontMatrix||KW,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ci("Invalid font matrix for font "+r),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const o=i.loadedName||"sans-serif",l=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let d=n;n<Hhe?d=Hhe:n>Whe&&(d=Whe),this.current.fontSizeScale=n/d,this.ctx.font=`${u} ${c} ${d}px ${l}`}setTextRenderingMode(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=r}setTextRise(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=r}moveText(e,r,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=r,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,r,n){this.setLeading(e,-n),this.moveText(e,r,n)}setTextMatrix(e,r){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=r,n.textMatrixScale=Math.hypot(r[0],r[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var r;this.moveText(e,0,this.current.leading),(r=this.dependencyTracker)==null||r.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,r,n,i,s,o){var w,S,E,j;const l=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Oc.FILL_STROKE_MASK,m=!!(d&Oc.ADD_TO_PATH_FLAG),x=c.patternFill&&!u.missingFile,g=c.patternStroke&&!u.missingFile;let y;if((u.disableFontFace||m||x||g)&&!u.missingFile&&(y=u.getPathGenerator(this.commonObjs,r)),y&&(u.disableFontFace||x||g)){l.save(),l.translate(n,i),l.scale(h,-h),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,l,u);let T;if(f===Oc.FILL||f===Oc.FILL_STROKE)if(s){T=l.getTransform(),l.setTransform(...s);const O=ve(this,a0,EG).call(this,y,T,s);l.fill(O)}else l.fill(y);if(f===Oc.STROKE||f===Oc.FILL_STROKE)if(o){T||(T=l.getTransform()),l.setTransform(...o);const{a:O,b:I,c:M,d:D}=T,z=rn.inverseTransform(o),F=rn.transform([O,I,M,D,0,0],z);rn.singularValueDecompose2dScale(F,hf),l.lineWidth*=Math.max(hf[0],hf[1])/h,l.stroke(ve(this,a0,EG).call(this,y,T,o))}else l.lineWidth/=h,l.stroke(y);l.restore()}else(f===Oc.FILL||f===Oc.FILL_STROKE)&&(l.fillText(r,n,i),(S=this.dependencyTracker)==null||S.recordCharacterBBox(e,l,u,h,n,i,()=>l.measureText(r))),(f===Oc.STROKE||f===Oc.FILL_STROKE)&&(this.dependencyTracker&&((E=this.dependencyTracker)==null||E.recordCharacterBBox(e,l,u,h,n,i,()=>l.measureText(r)).recordDependencies(e,Xf.stroke)),l.strokeText(r,n,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:co(l),x:n,y:i,fontSize:h,path:y}),(j=this.dependencyTracker)==null||j.recordCharacterBBox(e,l,u,h,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const r=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<r.length;i+=4)if(r[i]>0&&r[i]<255){n=!0;break}return Ci(this,"isFontSubpixelAAEnabled",n)}showText(e,r){var M,D,z,F;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Xf.showText).resetBBox(e),this.current.textRenderingMode&Oc.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,r),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e);return}const s=n.fontSize;if(s===0){(D=this.dependencyTracker)==null||D.recordOperation(e);return}const o=this.ctx,l=n.fontSizeScale,c=n.charSpacing,u=n.wordSpacing,d=n.fontDirection,h=n.textHScale*d,f=r.length,m=i.vertical,x=m?1:-1,g=i.defaultVMetrics,y=s*n.fontMatrix[0],w=n.textRenderingMode===Oc.FILL&&!i.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),d>0?o.scale(h,-1):o.scale(h,1);let S,E;if(n.patternFill){o.save();const q=n.fillColor.getPattern(o,this,_0(o),Hc.FILL,e);S=co(o),o.restore(),o.fillStyle=q}if(n.patternStroke){o.save();const q=n.strokeColor.getPattern(o,this,_0(o),Hc.STROKE,e);E=co(o),o.restore(),o.strokeStyle=q}let j=n.lineWidth;const T=n.textMatrixScale;if(T===0||j===0){const q=n.textRenderingMode&Oc.FILL_STROKE_MASK;(q===Oc.STROKE||q===Oc.FILL_STROKE)&&(j=this.getSinglePixelWidth())}else j/=T;if(l!==1&&(o.scale(l,l),j/=l),o.lineWidth=j,i.isInvalidPDFjsFont){const q=[];let Q=0;for(const Z of r)q.push(Z.unicode),Q+=Z.width;const re=q.join("");if(o.fillText(re,0,0),this.dependencyTracker!==null){const Z=o.measureText(re);this.dependencyTracker.recordBBox(e,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=Q*y*h,o.restore(),this.compose();return}let O=0,I;for(I=0;I<f;++I){const q=r[I];if(typeof q=="number"){O+=x*q*s/1e3;continue}let Q=!1;const re=(q.isSpace?u:0)+c,Z=q.fontChar,se=q.accent;let K,X,Y=q.width;if(m){const H=q.vmetric||g,J=-(q.vmetric?H[1]:Y*.5)*y,ie=H[2]*y;Y=H?-H[0]:Y,K=J/l,X=(O+ie)/l}else K=O/l,X=0;let oe;if(i.remeasure&&Y>0){oe=o.measureText(Z);const H=oe.width*1e3/s*l;if(Y<H&&this.isFontSubpixelAAEnabled){const J=Y/H;Q=!0,o.save(),o.scale(J,1),K/=J}else Y!==H&&(K+=(Y-H)/2e3*s/l)}if(this.contentVisible&&(q.isInFont||i.missingFile)){if(w&&!se)o.fillText(Z,K,X),(z=this.dependencyTracker)==null||z.recordCharacterBBox(e,o,oe?{bbox:null}:i,s/l,K,X,()=>oe??o.measureText(Z));else if(this.paintChar(e,Z,K,X,S,E),se){const H=K+s*se.offset.x/l,J=X-s*se.offset.y/l;this.paintChar(e,se.fontChar,H,J,S,E)}}const xe=m?Y*y-re*d:Y*y+re*d;O+=xe,Q&&o.restore()}m?n.y-=O:n.x+=O*h,o.restore(),this.compose(),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e)}showType3Text(e,r){const n=this.ctx,i=this.current,s=i.font,o=i.fontSize,l=i.fontDirection,c=s.vertical?1:-1,u=i.charSpacing,d=i.wordSpacing,h=i.textHScale*l,f=i.fontMatrix||KW,m=r.length,x=i.textRenderingMode===Oc.INVISIBLE;let g,y,w,S;if(x||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,l);const E=this.dependencyTracker;for(this.dependencyTracker=E?new GL(E,e):null,g=0;g<m;++g){if(y=r[g],typeof y=="number"){S=c*y*o/1e3,this.ctx.translate(S,0),i.x+=S*h;continue}const j=(y.isSpace?d:0)+u,T=s.charProcOperatorList[y.operatorListId];T?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...f),this.executeOperatorList(T),this.restore()):ci(`Type3 character "${y.operatorListId}" is not available.`);const O=[y.width,0];rn.applyTransform(O,f),w=O[0]*o+j,n.translate(w,0),i.x+=w*h}n.restore(),E&&(this.dependencyTracker=E)}setCharWidth(e,r,n){}setCharWidthAndBounds(e,r,n,i,s,o,l){var u;const c=new Path2D;c.rect(i,s,o-i,l-s),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,o,s,l).recordClipBox(e,this.ctx,i,o,s,l),this.endPath(e)}getColorN_Pattern(e,r){let n;if(r[0]==="TilingPattern"){const i=this.baseTransform||co(this.ctx),s={createCanvasGraphics:(o,l)=>new See(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new GL(this.dependencyTracker,l,!0):null)};n=new _G(r,this.ctx,s,i)}else n=this._getPattern(e,r[1],r[2]);return n}setStrokeColorN(e,...r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,r),this.current.patternStroke=!0}setFillColorN(e,...r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,r),this.current.patternFill=!0}setStrokeRGBColor(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=r,this.current.patternStroke=!1}setStrokeTransparent(e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=r,this.current.patternFill=!1}setFillTransparent(e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,r,n=null){let i;return this.cachedPatterns.has(r)?i=this.cachedPatterns.get(r):(i=dLt(this.getObject(e,r)),this.cachedPatterns.set(r,i)),n&&(i.matrix=n),i}shadingFill(e,r){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,r);n.fillStyle=i.getPattern(n,this,_0(n),Hc.SHADING,e);const s=_0(n);if(s){const{width:l,height:c}=n.canvas,u=eE.slice();rn.axialAlignedBoundingBox([0,0,l,c],s,u);const[d,h,f,m]=u;this.ctx.fillRect(d,h,f-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Xf.transform).recordDependencies(e,Xf.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ua("Should not call beginInlineImage")}beginImageData(){ua("Should not call beginImageData")}paintFormXObjectBegin(e,r,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),r&&this.transform(e,...r),this.baseTransform=co(this.ctx),n)){rn.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,o,l,c]=n,u=new Path2D;u.rect(s,o,l-s,c-o),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,r){var E;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;r.isolated||$B("TODO: Support non-isolated groups."),r.knockout&&ci("Knockout groups not supported.");const i=co(n);if(r.matrix&&n.transform(...r.matrix),!r.bbox)throw new Error("Bounding box is required.");let s=eE.slice();rn.axialAlignedBoundingBox(r.bbox,co(n),s);const o=[0,0,n.canvas.width,n.canvas.height];s=rn.intersect(s,o)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-l,1),d=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;r.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),m=f.context;m.translate(-l,-c),m.transform(...i);let x=new Path2D;const[g,y,w,S]=r.bbox;if(x.rect(g,y,w-g,S-y),r.matrix){const j=new Path2D;j.addPath(x,new DOMMatrix(r.matrix)),x=j}m.clip(x),r.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:l,offsetY:c,subtype:r.smask.subtype,backdrop:r.smask.backdrop,transferMap:r.smask.transferMap||null,startTransformInverse:null}),(!r.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,c),n.save()),vT(n,m),this.ctx=m,(E=this.dependencyTracker)==null||E.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,r){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),r.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=co(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=eE.slice();rn.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,r,n,i,s,o){if(ve(this,a0,NG).call(this),$D(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],c=n[3]-n[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=c,rn.singularValueDecompose2dScale(co(this.ctx),hf);const{viewportScale:u}=this,d=Math.ceil(l*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(r,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(hf[0],0,0,-hf[1],0,c*hf[1]),$D(this.ctx)}else{$D(this.ctx),this.endPath(e);const u=new Path2D;u.rect(n[0],n[1],l,c),this.ctx.clip(u)}}this.current=new Khe(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),ve(this,a0,SG).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,r){var l;if(!this.contentVisible)return;const n=r.count;r=this.getObject(e,r.data,r),r.count=n;const i=this.ctx,s=this._createMaskCanvas(e,r),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,r,n,i=0,s=0,o,l){var h,f,m;if(!this.contentVisible)return;r=this.getObject(e,r.data,r);const c=this.ctx;c.save();const u=co(c);c.transform(n,i,s,o,0,0);const d=this._createMaskCanvas(e,r);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let x=0,g=l.length;x<g;x+=2){const y=rn.transform(u,[n,i,s,o,l[x],l[x+1]]);c.drawImage(d.canvas,y[4],y[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,y[4],y[4]+d.canvas.width,y[5],y[5]+d.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,r){var o,l,c;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Xf.transformAndFill);for(const u of r){const{data:d,width:h,height:f,transform:m}=u,x=this.cachedCanvases.getCanvas("maskCanvas",h,f),g=x.context;g.save();const y=this.getObject(e,d,u);Yhe(g,y),g.globalCompositeOperation="source-in",g.fillStyle=s?i.getPattern(g,this,_0(n),Hc.FILL,e):i,g.fillRect(0,0,h,f),g.restore(),n.save(),n.transform(...m),n.scale(1,-1),BD(n,x.canvas,0,0,h,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,n,0,h,0,f),n.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,r){if(!this.contentVisible)return;const n=this.getObject(e,r);if(!n){ci("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,r,n,i,s){if(!this.contentVisible)return;const o=this.getObject(e,r);if(!o){ci("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let d=0,h=s.length;d<h;d+=2)u.push({transform:[n,0,0,i,s[d],s[d+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:r,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(r,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e,r){var u;if(!this.contentVisible)return;const n=r.width,i=r.height,s=this.ctx;this.save(e);const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/n,-1/i);let l;if(r.bitmap)l=this.applyTransferMapsToBitmap(r);else if(typeof HTMLElement=="function"&&r instanceof HTMLElement||!r.data)l=r;else{const h=this.cachedCanvases.getCanvas("inlineImage",n,i).context;Xhe(h,r),l=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(l,_0(s));s.imageSmoothingEnabled=Zhe(co(s),r.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,s,0,n,-i,0).recordDependencies(e,Xf.imageXObject).recordOperation(e),BD(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,r,n){var o,l,c;if(!this.contentVisible)return;const i=this.ctx;let s;if(r.bitmap)s=r.bitmap;else{const u=r.width,d=r.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;Xhe(f,r),s=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),BD(i,s,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var r;this.contentVisible&&((r=this.dependencyTracker)==null||r.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Xf.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,r){}markPointProps(e,r,n){}beginMarkedContent(e,r){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,r,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),r==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var r;(r=this.dependencyTracker)==null||r.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,r,n){var o,l;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===Qhe?s.clip(r,"evenodd"):s.clip(r)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=co(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:r,b:n,c:i,d:s}=this.ctx.getTransform();let o,l;if(n===0&&i===0){const c=Math.abs(r),u=Math.abs(s);if(c===u)if(e===0)o=l=1/c;else{const d=c*e;o=l=d<1?1/d:1}else if(e===0)o=1/c,l=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,l=h<1?1/h:1}}else{const c=Math.abs(r*s-n*i),u=Math.hypot(r,n),d=Math.hypot(i,s);if(e===0)o=d/c,l=u/c;else{const h=e*c;o=d>h?d/h:1,l=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,r){const{ctx:n,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o){n.lineWidth=(i||1)*s,n.stroke(e);return}const l=n.getLineDash();r&&n.save(),n.scale(s,o),az.a=1/s,az.d=1/o;const c=new Path2D;if(c.addPath(e,az),l.length>0){const u=Math.max(s,o);n.setLineDash(l.map(d=>d/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(c),r&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};a0=new WeakSet,NG=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},SG=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const r=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}},EG=function(e,r,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(r)),i};let TE=See;for(const t in AC)TE.prototype[t]!==void 0&&(TE.prototype[AC[t]]=TE.prototype[t]);var xj,vj,Bk,yj,M6;const nE=class nE{constructor(e){ge(this,yj);ge(this,xj);ge(this,vj);ge(this,Bk);ae(this,xj,e),ae(this,vj,new DataView(N(this,xj))),ae(this,Bk,new TextDecoder)}static write(e){const r=new TextEncoder,n={};let i=0;for(const u of nE.strings){const d=r.encode(e[u]);n[u]=d,i+=4+d.length}const s=new ArrayBuffer(i),o=new Uint8Array(s),l=new DataView(s);let c=0;for(const u of nE.strings){const d=n[u],h=d.length;l.setUint32(c,h),o.set(d,c+4),c+=4+h}return Zi(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return ve(this,yj,M6).call(this,0)}get fontWeight(){return ve(this,yj,M6).call(this,1)}get italicAngle(){return ve(this,yj,M6).call(this,2)}};xj=new WeakMap,vj=new WeakMap,Bk=new WeakMap,yj=new WeakSet,M6=function(e){Zi(e<nE.strings.length,"Invalid string index");let r=0;for(let i=0;i<e;i++)r+=N(this,vj).getUint32(r)+4;const n=N(this,vj).getUint32(r);return N(this,Bk).decode(new Uint8Array(N(this,xj),r+4,n))},rr(nE,"strings",["fontFamily","fontWeight","italicAngle"]);let KL=nE;var iy,V0,k2,O2,ZT;const iE=class iE{constructor(e){ge(this,O2);ge(this,iy);ge(this,V0);ge(this,k2);ae(this,iy,e),ae(this,V0,new DataView(N(this,iy))),ae(this,k2,new TextDecoder)}static write(e){const r=new TextEncoder,n={};let i=0;for(const f of iE.strings){const m=r.encode(e[f]);n[f]=m,i+=4+m.length}i+=4;let s,o,l=1+i;e.style&&(s=r.encode(e.style.style),o=r.encode(e.style.weight),l+=4+s.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,i=0;for(const f of iE.strings){const m=n[f],x=m.length;i+=4+x,d.setUint32(h,x),u.set(m,h+4),h+=4+x}return d.setUint32(h-i-4,i),e.style&&(d.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),Zi(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return N(this,V0).getUint8(0)!==0}get css(){return ve(this,O2,ZT).call(this,0)}get loadedName(){return ve(this,O2,ZT).call(this,1)}get baseFontName(){return ve(this,O2,ZT).call(this,2)}get src(){return ve(this,O2,ZT).call(this,3)}get style(){let e=1;e+=4+N(this,V0).getUint32(e);const r=N(this,V0).getUint32(e),n=N(this,k2).decode(new Uint8Array(N(this,iy),e+4,r));e+=4+r;const i=N(this,V0).getUint32(e),s=N(this,k2).decode(new Uint8Array(N(this,iy),e+4,i));return{style:n,weight:s}}};iy=new WeakMap,V0=new WeakMap,k2=new WeakMap,O2=new WeakSet,ZT=function(e){Zi(e<iE.strings.length,"Invalid string index");let r=5;for(let i=0;i<e;i++)r+=N(this,V0).getUint32(r)+4;const n=N(this,V0).getUint32(r);return N(this,k2).decode(new Uint8Array(N(this,iy),r+4,n))},rr(iE,"strings",["css","loadedName","baseFontName","src"]);let XL=iE;var bj,wj,_j,Nj,Wh,q0,$k,Ys,Lo,op,L6,QT;const bi=class bi{constructor({data:e,extra:r}){ge(this,Lo);ge(this,q0);ge(this,$k);ge(this,Ys);ae(this,q0,e),ae(this,$k,new TextDecoder),ae(this,Ys,new DataView(N(this,q0))),r&&Object.assign(this,r)}get black(){return ve(this,Lo,op).call(this,0)}get bold(){return ve(this,Lo,op).call(this,1)}get disableFontFace(){return ve(this,Lo,op).call(this,2)}get fontExtraProperties(){return ve(this,Lo,op).call(this,3)}get isInvalidPDFjsFont(){return ve(this,Lo,op).call(this,4)}get isType3Font(){return ve(this,Lo,op).call(this,5)}get italic(){return ve(this,Lo,op).call(this,6)}get missingFile(){return ve(this,Lo,op).call(this,7)}get remeasure(){return ve(this,Lo,op).call(this,8)}get vertical(){return ve(this,Lo,op).call(this,9)}get ascent(){return ve(this,Lo,L6).call(this,0)}get defaultWidth(){return ve(this,Lo,L6).call(this,1)}get descent(){return ve(this,Lo,L6).call(this,2)}get bbox(){let e=N(bi,wj);if(N(this,Ys).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(N(this,Ys).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=N(bi,_j);if(N(this,Ys).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(N(this,Ys).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=N(bi,Nj);if(N(this,Ys).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(N(this,Ys).getInt16(e,!0)),e+=2;return n}get fallbackName(){return ve(this,Lo,QT).call(this,0)}get loadedName(){return ve(this,Lo,QT).call(this,1)}get mimetype(){return ve(this,Lo,QT).call(this,2)}get name(){return ve(this,Lo,QT).call(this,3)}get data(){let e=N(bi,Wh);const r=N(this,Ys).getUint32(e);e+=4+r;const n=N(this,Ys).getUint32(e);e+=4+n;const i=N(this,Ys).getUint32(e);e+=4+i;const s=N(this,Ys).getUint32(e);if(s!==0)return new Uint8Array(N(this,q0),e+4,s)}clearData(){let e=N(bi,Wh);const r=N(this,Ys).getUint32(e);e+=4+r;const n=N(this,Ys).getUint32(e);e+=4+n;const i=N(this,Ys).getUint32(e);e+=4+i;const s=N(this,Ys).getUint32(e);new Uint8Array(N(this,q0),e+4,s).fill(0),N(this,Ys).setUint32(e,0)}get cssFontInfo(){let e=N(bi,Wh);const r=N(this,Ys).getUint32(e);e+=4+r;const n=N(this,Ys).getUint32(e);e+=4+n;const i=N(this,Ys).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(N(this,q0),e+4,i)),new KL(s.buffer)}get systemFontInfo(){let e=N(bi,Wh);const r=N(this,Ys).getUint32(e);e+=4+r;const n=N(this,Ys).getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(N(this,q0),e+4,n)),new XL(i.buffer)}static write(e){const r=e.systemFontInfo?XL.write(e.systemFontInfo):null,n=e.cssFontInfo?KL.write(e.cssFontInfo):null,i=new TextEncoder,s={};let o=0;for(const g of bi.strings)s[g]=i.encode(e[g]),o+=4+s[g].length;const l=N(bi,Wh)+4+o+4+(r?r.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=bi.bools.length;let m=0,x=0;for(let g=0;g<f;g++){const y=e[bi.bools[g]];m|=(y===void 0?0:y?2:1)<<x,x+=2,(x===8||g===f-1)&&(d.setUint8(h++,m),m=0,x=0)}Zi(h===N(bi,bj),"FontInfo.write: Boolean properties offset mismatch");for(const g of bi.numbers)d.setFloat64(h,e[g]),h+=8;if(Zi(h===N(bi,wj),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(Zi(h===N(bi,_j),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(Zi(h===N(bi,Nj),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=3*2;Zi(h===N(bi,Wh),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(N(bi,Wh),0),h+=4;for(const g of bi.strings){const y=s[g],w=y.length;d.setUint32(h,w),u.set(y,h+4),h+=4+w}if(d.setUint32(N(bi,Wh),h-N(bi,Wh)-4),!r)d.setUint32(h,0),h+=4;else{const g=r.byteLength;d.setUint32(h,g),Zi(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+g}if(!n)d.setUint32(h,0),h+=4;else{const g=n.byteLength;d.setUint32(h,g),Zi(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Zi(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};bj=new WeakMap,wj=new WeakMap,_j=new WeakMap,Nj=new WeakMap,Wh=new WeakMap,q0=new WeakMap,$k=new WeakMap,Ys=new WeakMap,Lo=new WeakSet,op=function(e){Zi(e<bi.bools.length,"Invalid boolean index");const r=Math.floor(e/4),n=e*2%8,i=N(this,Ys).getUint8(r)>>n&3;return i===0?void 0:i===2},L6=function(e){return Zi(e<bi.numbers.length,"Invalid number index"),N(this,Ys).getFloat64(N(bi,bj)+e*8)},QT=function(e){Zi(e<bi.strings.length,"Invalid string index");let r=N(bi,Wh)+4;for(let s=0;s<e;s++)r+=N(this,Ys).getUint32(r)+4;const n=N(this,Ys).getUint32(r),i=new Uint8Array(n);return i.set(new Uint8Array(N(this,q0),r+4,n)),N(this,$k).decode(i)},rr(bi,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),rr(bi,"numbers",["ascent","defaultWidth","descent"]),rr(bi,"strings",["fallbackName","loadedName","mimetype","name"]),ge(bi,bj,Math.ceil(bi.bools.length*2/8)),ge(bi,wj,N(bi,bj)+bi.numbers.length*8),ge(bi,_j,N(bi,wj)+1+2*4),ge(bi,Nj,N(bi,_j)+1+8*6),ge(bi,Wh,N(bi,Nj)+1+2*3);let jG=bi;var Uk,zk;class ym{static get workerPort(){return N(this,Uk)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");ae(this,Uk,e)}static get workerSrc(){return N(this,zk)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");ae(this,zk,e)}}Uk=new WeakMap,zk=new WeakMap,ge(ym,Uk,null),ge(ym,zk,"");var Sj,Vk;class yLt{constructor({parsedData:e,rawData:r}){ge(this,Sj);ge(this,Vk);ae(this,Sj,e),ae(this,Vk,r)}getRaw(){return N(this,Vk)}get(e){return N(this,Sj).get(e)??null}[Symbol.iterator](){return N(this,Sj).entries()}}Sj=new WeakMap,Vk=new WeakMap;const NS=Symbol("INTERNAL");var qk,Hk,Wk,Ej;class bLt{constructor(e,{name:r,intent:n,usage:i,rbGroups:s}){ge(this,qk,!1);ge(this,Hk,!1);ge(this,Wk,!1);ge(this,Ej,!0);ae(this,qk,!!(e&lf.DISPLAY)),ae(this,Hk,!!(e&lf.PRINT)),this.name=r,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(N(this,Wk))return N(this,Ej);if(!N(this,Ej))return!1;const{print:e,view:r}=this.usage;return N(this,qk)?(r==null?void 0:r.viewState)!=="OFF":N(this,Hk)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,r,n=!1){e!==NS&&ua("Internal method `_setVisible` called."),ae(this,Wk,n),ae(this,Ej,r)}}qk=new WeakMap,Hk=new WeakMap,Wk=new WeakMap,Ej=new WeakMap;var sy,Zs,jj,Aj,Gk,AG;class wLt{constructor(e,r=lf.DISPLAY){ge(this,Gk);ge(this,sy,null);ge(this,Zs,new Map);ge(this,jj,null);ge(this,Aj,null);if(this.renderingIntent=r,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,ae(this,Aj,e.order);for(const n of e.groups)N(this,Zs).set(n.id,new bLt(r,n));if(e.baseState==="OFF")for(const n of N(this,Zs).values())n._setVisible(NS,!1);for(const n of e.on)N(this,Zs).get(n)._setVisible(NS,!0);for(const n of e.off)N(this,Zs).get(n)._setVisible(NS,!1);ae(this,jj,this.getHash())}}isVisible(e){if(N(this,Zs).size===0)return!0;if(!e)return $B("Optional content group not defined."),!0;if(e.type==="OCG")return N(this,Zs).has(e.id)?N(this,Zs).get(e.id).visible:(ci(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return ve(this,Gk,AG).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const r of e.ids){if(!N(this,Zs).has(r))return ci(`Optional content group not found: ${r}`),!0;if(N(this,Zs).get(r).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const r of e.ids){if(!N(this,Zs).has(r))return ci(`Optional content group not found: ${r}`),!0;if(!N(this,Zs).get(r).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const r of e.ids){if(!N(this,Zs).has(r))return ci(`Optional content group not found: ${r}`),!0;if(!N(this,Zs).get(r).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const r of e.ids){if(!N(this,Zs).has(r))return ci(`Optional content group not found: ${r}`),!0;if(N(this,Zs).get(r).visible)return!1}return!0}return ci(`Unknown optional content policy ${e.policy}.`),!0}return ci(`Unknown group type ${e.type}.`),!0}setVisibility(e,r=!0,n=!0){var s;const i=N(this,Zs).get(e);if(!i){ci(`Optional content group not found: ${e}`);return}if(n&&r&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==e&&((s=N(this,Zs).get(l))==null||s._setVisible(NS,!1,!0));i._setVisible(NS,!!r,!0),ae(this,sy,null)}setOCGState({state:e,preserveRB:r}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const s=N(this,Zs).get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,r);break;case"OFF":this.setVisibility(i,!1,r);break;case"Toggle":this.setVisibility(i,!s.visible,r);break}}ae(this,sy,null)}get hasInitialVisibility(){return N(this,jj)===null||this.getHash()===N(this,jj)}getOrder(){return N(this,Zs).size?N(this,Aj)?N(this,Aj).slice():[...N(this,Zs).keys()]:null}getGroup(e){return N(this,Zs).get(e)||null}getHash(){if(N(this,sy)!==null)return N(this,sy);const e=new yTe;for(const[r,n]of N(this,Zs))e.update(`${r}:${n.visible}`);return ae(this,sy,e.hexdigest())}[Symbol.iterator](){return N(this,Zs).entries()}}sy=new WeakMap,Zs=new WeakMap,jj=new WeakMap,Aj=new WeakMap,Gk=new WeakSet,AG=function(e){const r=e.length;if(r<2)return!0;const n=e[0];for(let i=1;i<r;i++){const s=e[i];let o;if(Array.isArray(s))o=ve(this,Gk,AG).call(this,s);else if(N(this,Zs).has(s))o=N(this,Zs).get(s).visible;else return ci(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class _Lt{constructor(e,{disableRange:r=!1,disableStream:n=!1}){Zi(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!r,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:r}){const n=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Zi(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var r,n,i,s;e.total===void 0?(n=(r=this._rangeReaders[0])==null?void 0:r.onProgress)==null||n.call(r,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const r=this._rangeReaders.indexOf(e);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){Zi(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new NLt(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new SLt(this,e,r);return this._pdfDataRangeTransport.requestDataRange(e,r),this._rangeReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class NLt{constructor(e,r,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=zB(i)?i:null,this._queuedChunks=r||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class SLt{constructor(e,r,n){this._stream=e,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ELt(t){let e=!0,r=n("filename\\*","i").exec(t);if(r){r=r[1];let d=l(r);return d=unescape(d),d=c(d),d=u(d),s(d)}if(r=o(t),r){const d=u(r);return s(d)}if(r=n("filename","i").exec(t),r){r=r[1];let d=l(r);return d=u(d),s(d)}function n(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),m=VI(h);h=f.decode(m),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function o(d){const h=[];let f;const m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(d))!==null;){let[,g,y,w]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[y,w]}const x=[];for(let g=0;g<h.length&&g in h;++g){let[y,w]=h[g];w=l(w),y&&(w=unescape(w),g===0&&(w=c(w))),x.push(w)}return x.join("")}function l(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),x=d.slice(h+1).replace(/^[^']*'/,"");return i(f,x)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,x){if(m==="q"||m==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,y){return String.fromCharCode(parseInt(y,16))}),i(f,x);try{x=atob(x)}catch{}return i(f,x)})}return""}function OTe(t,e){const r=new Headers;if(!t||!e||typeof e!="object")return r;for(const n in e){const i=e[n];i!==void 0&&r.append(n,i)}return r}function VB(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function ITe({responseHeaders:t,isHttp:e,rangeChunkSize:r,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*r)||n||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function RTe(t){const e=t.get("Content-Disposition");if(e){let r=ELt(e);if(r.includes("%"))try{r=decodeURIComponent(r)}catch{}if(zB(r))return r}return null}function GI(t,e){return new ZP(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function DTe(t){return t===200||t===206}function MTe(t,e,r){return{method:"GET",headers:t,signal:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function LTe(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ci(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class jLt{constructor(e){rr(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=OTe(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Zi(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ALt(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new CLt(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class ALt{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const r=e.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange;const n=new Headers(e.headers),i=r.url;fetch(i,MTe(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=VB(s.url),!DTe(s.status))throw GI(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:l,suggestedLength:c}=ITe({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=RTe(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Iv("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:LTe(e),done:!1})}cancel(e){var r;(r=this._reader)==null||r.cancel(e),this._abortController.abort()}}class CLt{constructor(e,r,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${r}-${n-1}`);const o=i.url;fetch(o,MTe(s,this._withCredentials,this._abortController)).then(l=>{const c=VB(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!DTe(l.status))throw GI(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:LTe(e),done:!1})}cancel(e){var r;(r=this._reader)==null||r.cancel(e),this._abortController.abort()}}const oz=200,lz=206;function TLt(t){const e=t.response;return typeof e!="string"?e:VI(e).buffer}class PLt{constructor({url:e,httpHeaders:r,withCredentials:n}){rr(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=OTe(this.isHttp,r),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const r=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const[s,o]of this.headers)r.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(r.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=lz):i.expectedStatus=oz,r.responseType="arraybuffer",Zi(e.onError,"Expected `onError` callback to be provided."),r.onerror=()=>{e.onError(r.status)},r.onreadystatechange=this.onStateChange.bind(this,n),r.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,r.send(null),n}onProgress(e,r){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,r))}onStateChange(e,r){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const s=i.status||oz;if(!(s===oz&&n.expectedStatus===lz)&&s!==n.expectedStatus){n.onError(i.status);return}const l=TLt(i);if(s===lz){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?n.onDone({begin:parseInt(u[1],10),chunk:l}):(ci('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const r=this.pendingRequests[e].xhr;delete this.pendingRequests[e],r.abort()}}class kLt{constructor(e){this._source=e,this._manager=new PLt(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const r=this._rangeRequestReaders.indexOf(e);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return Zi(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new OLt(this._manager,this._source),this._fullRequestReader}getRangeReader(e,r){const n=new ILt(this._manager,e,r);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class OLt{constructor(e,r){this._manager=e,this._url=r.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,r=this._manager.getRequestXhr(e);this._manager._responseOrigin=VB(r.responseURL);const n=r.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=ITe({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=RTe(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=GI(e,this._url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var r;(r=this.onProgress)==null||r.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ILt{constructor(e,r,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:r,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var r;const e=VB((r=this._manager.getRequestXhr(this._requestId))==null?void 0:r.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const r=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=GI(e,this._url));for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var r;this.isStreamingSupported||(r=this.onProgress)==null||r.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const RLt=/^[a-z][a-z0-9\-+.]+:/i;function DLt(t){if(RLt.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class MLt{constructor(e){this.source=e,this.url=DLt(e.url),Zi(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Zi(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new LLt(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new FLt(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LLt{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=GI(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Iv("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class FLt{constructor(e,r,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:r,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const yT=Symbol("INITIAL_DATA");var Gh,Kk,CG;class FTe{constructor(){ge(this,Kk);ge(this,Gh,Object.create(null))}get(e,r=null){if(r){const i=ve(this,Kk,CG).call(this,e);return i.promise.then(()=>r(i.data)),null}const n=N(this,Gh)[e];if(!n||n.data===yT)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const r=N(this,Gh)[e];return!!r&&r.data!==yT}delete(e){const r=N(this,Gh)[e];return!r||r.data===yT?!1:(delete N(this,Gh)[e],!0)}resolve(e,r=null){const n=ve(this,Kk,CG).call(this,e);n.data=r,n.resolve()}clear(){var e;for(const r in N(this,Gh)){const{data:n}=N(this,Gh)[r];(e=n==null?void 0:n.bitmap)==null||e.close()}ae(this,Gh,Object.create(null))}*[Symbol.iterator](){for(const e in N(this,Gh)){const{data:r}=N(this,Gh)[e];r!==yT&&(yield[e,r])}}}Gh=new WeakMap,Kk=new WeakSet,CG=function(e){var r;return(r=N(this,Gh))[e]||(r[e]={...Promise.withResolvers(),data:yT})};const BLt=1e5,Jhe=30;var Rfe,ay,Qd,Xk,Yk,I2,Lx,Zk,Qk,R2,Cj,Tj,oy,Pj,Jk,kj,D2,eO,tO,Ro,Oj,M2,rO,ly,Ij,Mv,BTe,$Te,TG,Pf,F6,PG,UTe,zTe;let tk=(Ro=class{constructor({textContentSource:e,container:r,viewport:n}){ge(this,Mv);ge(this,ay,Promise.withResolvers());ge(this,Qd,null);ge(this,Xk,!1);ge(this,Yk,!!((Rfe=globalThis.FontInspector)!=null&&Rfe.enabled));ge(this,I2,null);ge(this,Lx,null);ge(this,Zk,0);ge(this,Qk,0);ge(this,R2,null);ge(this,Cj,null);ge(this,Tj,0);ge(this,oy,0);ge(this,Pj,Object.create(null));ge(this,Jk,[]);ge(this,kj,null);ge(this,D2,[]);ge(this,eO,new WeakMap);ge(this,tO,null);var c;if(e instanceof ReadableStream)ae(this,kj,e);else if(typeof e=="object")ae(this,kj,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');ae(this,Qd,ae(this,Cj,r)),ae(this,oy,n.scale*s0.pixelRatio),ae(this,Tj,n.rotation),ae(this,Lx,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:o,pageY:l}=n.rawDims;ae(this,tO,[1,0,0,-1,-o,l+s]),ae(this,Qk,i),ae(this,Zk,s),ve(c=Ro,Pf,UTe).call(c),Ob(r,n),N(this,ay).promise.finally(()=>{N(Ro,Ij).delete(this),ae(this,Lx,null),ae(this,Pj,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:r}=vc.platform;return Ci(this,"fontFamilyMap",new Map([["sans-serif",`${e&&r?"Calibri, ":""}sans-serif`],["monospace",`${e&&r?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{N(this,R2).read().then(({value:r,done:n})=>{if(n){N(this,ay).resolve();return}N(this,I2)??ae(this,I2,r.lang),Object.assign(N(this,Pj),r.styles),ve(this,Mv,BTe).call(this,r.items),e()},N(this,ay).reject)};return ae(this,R2,N(this,kj).getReader()),N(Ro,Ij).add(this),e(),N(this,ay).promise}update({viewport:e,onBefore:r=null}){var s;const n=e.scale*s0.pixelRatio,i=e.rotation;if(i!==N(this,Tj)&&(r==null||r(),ae(this,Tj,i),Ob(N(this,Cj),{rotation:i})),n!==N(this,oy)){r==null||r(),ae(this,oy,n);const o={div:null,properties:null,ctx:ve(s=Ro,Pf,F6).call(s,N(this,I2))};for(const l of N(this,D2))o.properties=N(this,eO).get(l),o.div=l,ve(this,Mv,TG).call(this,o)}}cancel(){var r;const e=new Iv("TextLayer task cancelled.");(r=N(this,R2))==null||r.cancel(e).catch(()=>{}),ae(this,R2,null),N(this,ay).reject(e)}get textDivs(){return N(this,D2)}get textContentItemsStr(){return N(this,Jk)}static cleanup(){if(!(N(this,Ij).size>0)){N(this,Oj).clear();for(const{canvas:e}of N(this,M2).values())e.remove();N(this,M2).clear()}}},ay=new WeakMap,Qd=new WeakMap,Xk=new WeakMap,Yk=new WeakMap,I2=new WeakMap,Lx=new WeakMap,Zk=new WeakMap,Qk=new WeakMap,R2=new WeakMap,Cj=new WeakMap,Tj=new WeakMap,oy=new WeakMap,Pj=new WeakMap,Jk=new WeakMap,kj=new WeakMap,D2=new WeakMap,eO=new WeakMap,tO=new WeakMap,Oj=new WeakMap,M2=new WeakMap,rO=new WeakMap,ly=new WeakMap,Ij=new WeakMap,Mv=new WeakSet,BTe=function(e){var i,s;if(N(this,Xk))return;(s=N(this,Lx)).ctx??(s.ctx=ve(i=Ro,Pf,F6).call(i,N(this,I2)));const r=N(this,D2),n=N(this,Jk);for(const o of e){if(r.length>BLt){ci("Ignoring additional textDivs for performance reasons."),ae(this,Xk,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=N(this,Qd);ae(this,Qd,document.createElement("span")),N(this,Qd).classList.add("markedContent"),o.id&&N(this,Qd).setAttribute("id",`${o.id}`),l.append(N(this,Qd))}else o.type==="endMarkedContent"&&ae(this,Qd,N(this,Qd).parentNode);continue}n.push(o.str),ve(this,Mv,$Te).call(this,o)}},$Te=function(e){var g;const r=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};N(this,D2).push(r);const i=rn.transform(N(this,tO),e.transform);let s=Math.atan2(i[1],i[0]);const o=N(this,Pj)[e.fontName];o.vertical&&(s+=Math.PI/2);let l=N(this,Yk)&&o.fontSubstitution||o.fontFamily;l=Ro.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),u=c*ve(g=Ro,Pf,zTe).call(g,l,o,N(this,I2));let d,h;s===0?(d=i[4],h=i[5]-u):(d=i[4]+u*Math.sin(s),h=i[5]-u*Math.cos(s));const f="calc(var(--total-scale-factor) *",m=r.style;N(this,Qd)===N(this,Cj)?(m.left=`${(100*d/N(this,Qk)).toFixed(2)}%`,m.top=`${(100*h/N(this,Zk)).toFixed(2)}%`):(m.left=`${f}${d.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(N(Ro,ly)*c).toFixed(2)}px)`,m.fontFamily=l,n.fontSize=c,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,N(this,Yk)&&(r.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const y=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);y!==w&&Math.max(y,w)/Math.min(y,w)>1.5&&(x=!0)}if(x&&(n.canvasWidth=o.vertical?e.height:e.width),N(this,eO).set(r,n),N(this,Lx).div=r,N(this,Lx).properties=n,ve(this,Mv,TG).call(this,N(this,Lx)),n.hasText&&N(this,Qd).append(r),n.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),N(this,Qd).append(y)}},TG=function(e){var l;const{div:r,properties:n,ctx:i}=e,{style:s}=r;let o="";if(N(Ro,ly)>1&&(o=`scale(${1/N(Ro,ly)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=s,{canvasWidth:u,fontSize:d}=n;ve(l=Ro,Pf,PG).call(l,i,d*N(this,oy),c);const{width:h}=i.measureText(r.textContent);h>0&&(o=`scaleX(${u*N(this,oy)/h}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(s.transform=o)},Pf=new WeakSet,F6=function(e=null){let r=N(this,M2).get(e||(e=""));if(!r){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),r=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),N(this,M2).set(e,r),N(this,rO).set(r,{size:0,family:""})}return r},PG=function(e,r,n){const i=N(this,rO).get(e);r===i.size&&n===i.family||(e.font=`${r}px ${n}`,i.size=r,i.family=n)},UTe=function(){if(N(this,ly)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),ae(this,ly,e.getBoundingClientRect().height),e.remove()},zTe=function(e,r,n){const i=N(this,Oj).get(e);if(i)return i;const s=ve(this,Pf,F6).call(this,n);s.canvas.width=s.canvas.height=Jhe,ve(this,Pf,PG).call(this,s,Jhe,e);const o=s.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return l?u=l/(l+c):(vc.platform.isFirefox&&ci("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),r.ascent?u=r.ascent:r.descent&&(u=1+r.descent)),N(this,Oj).set(e,u),u},ge(Ro,Pf),ge(Ro,Oj,new Map),ge(Ro,M2,new Map),ge(Ro,rO,new WeakMap),ge(Ro,ly,null),ge(Ro,Ij,new Set),Ro);const $Lt=100;function lee(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new kG,{docId:r}=e,n=t.url?K8t(t.url):null,i=t.data?X8t(t.data):null,s=t.httpHeaders||null,o=t.withCredentials===!0,l=t.password??null,c=t.range instanceof cee?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let d=t.worker instanceof CC?t.worker:null;const h=t.verbosity,f=typeof t.docBaseUrl=="string"&&!HI(t.docBaseUrl)?t.docBaseUrl:null,m=DD(t.cMapUrl),x=t.cMapPacked!==!1,g=t.CMapReaderFactory||(hd?rLt:Bhe),y=DD(t.iccUrl),w=DD(t.standardFontDataUrl),S=t.StandardFontDataFactory||(hd?nLt:$he),E=DD(t.wasmUrl),j=t.WasmFactory||(hd?iLt:Uhe),T=t.stopAtErrors!==!0,O=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,I=t.isEvalSupported!==!1,M=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!hd,D=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!hd&&(vc.platform.isFirefox||!globalThis.chrome),z=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,F=typeof t.disableFontFace=="boolean"?t.disableFontFace:hd,q=t.fontExtraProperties===!0,Q=t.enableXfa===!0,re=t.ownerDocument||globalThis.document,Z=t.disableRange===!0,se=t.disableStream===!0,K=t.disableAutoFetch===!0,X=t.pdfBug===!0,Y=t.CanvasFactory||(hd?tLt:Q8t),oe=t.FilterFactory||(hd?eLt:J8t),xe=t.enableHWA===!0,H=t.useWasm!==!1,J=c?c.length:t.length??NaN,ie=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!hd&&!F,ce=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(g===Bhe&&S===$he&&j===Uhe&&m&&w&&E&&$T(m,document.baseURI)&&$T(w,document.baseURI)&&$T(E,document.baseURI)),me=null;T8t(h);const he={canvasFactory:new Y({ownerDocument:re,enableHWA:xe}),filterFactory:new oe({docId:r,ownerDocument:re}),cMapReaderFactory:ce?null:new g({baseUrl:m,isCompressed:x}),standardFontDataFactory:ce?null:new S({baseUrl:w}),wasmFactory:ce?null:new j({baseUrl:E})};d||(d=CC.create({verbosity:h,port:ym.workerPort}),e._worker=d);const _e={docId:r,apiVersion:"5.4.296",data:i,password:l,disableAutoFetch:K,rangeChunkSize:u,length:J,docBaseUrl:f,enableXfa:Q,evaluatorOptions:{maxImageSize:O,disableFontFace:F,ignoreErrors:T,isEvalSupported:I,isOffscreenCanvasSupported:M,isImageDecoderSupported:D,canvasMaxAreaInBytes:z,fontExtraProperties:q,useSystemFonts:ie,useWasm:H,useWorkerFetch:ce,cMapUrl:m,iccUrl:y,standardFontDataUrl:w,wasmUrl:E}},ue={ownerDocument:re,pdfBug:X,styleElement:me,loadingParams:{disableAutoFetch:K,enableXfa:Q}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const je=d.messageHandler.sendWithPromise("GetDocRequest",_e,i?[i.buffer]:null);let ye;if(c)ye=new _Lt(c,{disableRange:Z,disableStream:se});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Le=$T(n)?jLt:hd?MLt:kLt;ye=new Le({url:n,length:J,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:Z,disableStream:se})}return je.then(Le=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Ge=new WT(r,Le,d.port),Be=new VLt(Ge,e,ye,ue,he,xe);e._transport=Be,Ge.send("Ready",null)})}).catch(e._capability.reject),e}var hF;const fF=class fF{constructor(){rr(this,"_capability",Promise.withResolvers());rr(this,"_transport",null);rr(this,"_worker",null);rr(this,"docId",`d${Eo(fF,hF)._++}`);rr(this,"destroyed",!1);rr(this,"onPassword",null);rr(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,r,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((r=this._transport)==null?void 0:r.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};hF=new WeakMap,ge(fF,hF,0);let kG=fF;var L2,nO,iO,sO,aO,Dfe;let cee=(Dfe=class{constructor(e,r,n=!1,i=null){ge(this,L2,Promise.withResolvers());ge(this,nO,[]);ge(this,iO,[]);ge(this,sO,[]);ge(this,aO,[]);this.length=e,this.initialData=r,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){N(this,aO).push(e)}addProgressListener(e){N(this,sO).push(e)}addProgressiveReadListener(e){N(this,iO).push(e)}addProgressiveDoneListener(e){N(this,nO).push(e)}onDataRange(e,r){for(const n of N(this,aO))n(e,r)}onDataProgress(e,r){N(this,L2).promise.then(()=>{for(const n of N(this,sO))n(e,r)})}onDataProgressiveRead(e){N(this,L2).promise.then(()=>{for(const r of N(this,iO))r(e)})}onDataProgressiveDone(){N(this,L2).promise.then(()=>{for(const e of N(this,nO))e()})}transportReady(){N(this,L2).resolve()}requestDataRange(e,r){ua("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},L2=new WeakMap,nO=new WeakMap,iO=new WeakMap,sO=new WeakMap,aO=new WeakMap,Dfe);class ULt{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ci(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,r){return this._transport.getAnnotationsByType(e,r)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(r)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fx,F2,JT;class zLt{constructor(e,r,n,i=!1){ge(this,F2);ge(this,Fx,!1);this._pageIndex=e,this._pageInfo=r,this._transport=n,this._stats=i?new Ohe:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new FTe,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new qI({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,r)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ci(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:r=e.canvas,viewport:n,intent:i="display",annotationMode:s=ug.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:x=null}){var D,z,F;(D=this._stats)==null||D.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,f),{renderingIntent:y,cacheKey:w}=g;ae(this,Fx,!1),c||(c=this._transport.getOptionalContentConfig(y));let S=this._intentStates.get(w);S||(S=Object.create(null),this._intentStates.set(w,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const E=!!(y&lf.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(g));const j=!!(this._pdfBug&&((F=globalThis.StepperManager)!=null&&F.enabled)),T=!this.recordedBBoxes&&(m||j),O=q=>{var Q,re;if(S.renderTasks.delete(I),T){const Z=(Q=I.gfx)==null?void 0:Q.dependencyTracker.take();Z&&(I.stepper&&I.stepper.setOperatorBBoxes(Z,I.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=Z))}E&&ae(this,Fx,!0),ve(this,F2,JT).call(this),q?(I.capability.reject(q),this._abortOperatorList({intentState:S,reason:q instanceof Error?q:new Error(q)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(re=globalThis.Stats)!=null&&re.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new OG({callback:O,params:{canvas:r,canvasContext:e,dependencyTracker:T?new aLt(r,S.operatorList.length,j):null,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:x});(S.renderTasks||(S.renderTasks=new Set)).add(I);const M=I.task;return Promise.all([S.displayReadyCapability.promise,c]).then(([q,Q])=>{var re;if(this.destroyed){O();return}if((re=this._stats)==null||re.time("Rendering"),!(Q.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:q,optionalContentConfig:Q}),I.operatorListChanged()}).catch(O),M}getOperatorList({intent:e="display",annotationMode:r=ug.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,r,n,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:r===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>QP.textContent(n));const r=this.streamTextContent(e);return new Promise(function(n,i){function s(){o.read().then(function({value:c,done:u}){if(u){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),s()},i)}const o=r.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const n of r.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),ae(this,Fx,!1),Promise.all(e)}cleanup(e=!1){ae(this,Fx,!0);const r=ve(this,F2,JT).call(this);return e&&r&&this._stats&&(this._stats=new Ohe),r}_startRenderPage(e,r){var i,s;const n=this._intentStates.get(r);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,r){for(let n=0,i=e.length;n<i;n++)r.operatorList.fnArray.push(e.fnArray[n]),r.operatorList.argsArray.push(e.argsArray[n]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const n of r.renderTasks)n.operatorListChanged();e.lastChunk&&ve(this,F2,JT).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:s,modifiedIds:i},o).getReader(),u=this._intentStates.get(r);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();ve(this,F2,JT).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:r,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(r instanceof UB){let i=$Lt;r.extraDelay>0&&r.extraDelay<1e3&&(i+=r.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:r,force:!0})},i);return}}if(e.streamReader.cancel(new Iv(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Fx=new WeakMap,F2=new WeakSet,JT=function(){if(!N(this,Fx)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:r}of this._intentStates.values())if(e.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ae(this,Fx,!1),!0};var cy,bp,Bx,B2,mF,$2,U2,jd,B6,VTe,qTe,e4,Rj,$6;const za=class za{constructor({name:e=null,port:r=null,verbosity:n=P8t()}={}){ge(this,jd);ge(this,cy,Promise.withResolvers());ge(this,bp,null);ge(this,Bx,null);ge(this,B2,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,r){if(N(za,U2).has(r))throw new Error("Cannot use more than one PDFWorker per port.");N(za,U2).set(r,this),ve(this,jd,VTe).call(this,r)}else ve(this,jd,qTe).call(this)}get promise(){return N(this,cy).promise}get port(){return N(this,Bx)}get messageHandler(){return N(this,bp)}destroy(){var e,r;this.destroyed=!0,(e=N(this,B2))==null||e.terminate(),ae(this,B2,null),N(za,U2).delete(N(this,Bx)),ae(this,Bx,null),(r=N(this,bp))==null||r.destroy(),ae(this,bp,null)}static create(e){const r=N(this,U2).get(e==null?void 0:e.port);if(r){if(r._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return r}return new za(e)}static get workerSrc(){if(ym.workerSrc)return ym.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ci(this,"_setupFakeWorkerGlobal",(async()=>N(this,Rj,$6)?N(this,Rj,$6):(await import(this.workerSrc)).WorkerMessageHandler)())}};cy=new WeakMap,bp=new WeakMap,Bx=new WeakMap,B2=new WeakMap,mF=new WeakMap,$2=new WeakMap,U2=new WeakMap,jd=new WeakSet,B6=function(){N(this,cy).resolve(),N(this,bp).send("configure",{verbosity:this.verbosity})},VTe=function(e){ae(this,Bx,e),ae(this,bp,new WT("main","worker",e)),N(this,bp).on("ready",()=>{}),ve(this,jd,B6).call(this)},qTe=function(){if(N(za,$2)||N(za,Rj,$6)){ve(this,jd,e4).call(this);return}let{workerSrc:e}=za;try{za._isSameOrigin(window.location,e)||(e=za._createCDNWrapper(new URL(e,window.location).href));const r=new Worker(e,{type:"module"}),n=new WT("main","worker",r),i=()=>{s.abort(),n.destroy(),r.terminate(),this.destroyed?N(this,cy).reject(new Error("Worker was destroyed")):ve(this,jd,e4).call(this)},s=new AbortController;r.addEventListener("error",()=>{N(this,B2)||i()},{signal:s.signal}),n.on("test",l=>{if(s.abort(),this.destroyed||!l){i();return}ae(this,bp,n),ae(this,Bx,r),ae(this,B2,r),ve(this,jd,B6).call(this)}),n.on("ready",l=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{ve(this,jd,e4).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{$B("The worker has been disabled.")}ve(this,jd,e4).call(this)},e4=function(){N(za,$2)||(ci("Setting up fake worker."),ae(za,$2,!0)),za._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){N(this,cy).reject(new Error("Worker was destroyed"));return}const r=new Z8t;ae(this,Bx,r);const n=`fake${Eo(za,mF)._++}`,i=new WT(n+"_worker",n,r);e.setup(i,r),ae(this,bp,new WT(n,n+"_worker",r)),ve(this,jd,B6).call(this)}).catch(e=>{N(this,cy).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Rj=new WeakSet,$6=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},ge(za,Rj),ge(za,mF,0),ge(za,$2,!1),ge(za,U2,new WeakMap),hd&&(ae(za,$2,!0),ym.workerSrc||(ym.workerSrc="./pdf.worker.mjs")),za._isSameOrigin=(e,r)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(r,n);return n.origin===i.origin},za._createCDNWrapper=e=>{const r=`await import("${e}");`;return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))},za.fromPort=e=>{if(B8t("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return za.create(e)};let CC=za;var $x,H0,Dj,Mj,Ux,z2,t4;class VLt{constructor(e,r,n,i,s,o){ge(this,z2);ge(this,$x,new Map);ge(this,H0,new Map);ge(this,Dj,new Map);ge(this,Mj,new Map);ge(this,Ux,null);this.messageHandler=e,this.loadingTask=r,this.commonObjs=new FTe,this.fontLoader=new W8t({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Ci(this,"annotationStorage",new see)}getRenderingIntent(e,r=ug.ENABLE,n=null,i=!1,s=!1){let o=lf.DISPLAY,l=pG;switch(e){case"any":o=lf.ANY;break;case"display":break;case"print":o=lf.PRINT;break;default:ci(`getRenderingIntent - invalid intent: ${e}`)}const c=o&lf.PRINT&&n instanceof wTe?n:this.annotationStorage;switch(r){case ug.DISABLE:o+=lf.ANNOTATIONS_DISABLE;break;case ug.ENABLE:break;case ug.ENABLE_FORMS:o+=lf.ANNOTATIONS_FORMS;break;case ug.ENABLE_STORAGE:o+=lf.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ci(`getRenderingIntent - invalid annotationMode: ${r}`)}i&&(o+=lf.IS_EDITING),s&&(o+=lf.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,l.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=N(this,Ux))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of N(this,H0).values())e.push(i._destroy());N(this,H0).clear(),N(this,Dj).clear(),N(this,Mj).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),N(this,$x).clear(),this.filterFactory.destroy(),tk.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Iv("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(n,i)=>{Zi(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}Zi(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((l=r.onProgress)==null||l.call(r,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=r.onProgress)==null||u.call(r,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(n,i)=>{Zi(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:l}){if(l){i.close();return}Zi(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,r._capability.resolve(new ULt(n,this))}),e.on("DocException",n=>{r._capability.reject(qd(n))}),e.on("PasswordRequest",n=>{ae(this,Ux,Promise.withResolvers());try{if(!r.onPassword)throw qd(n);const i=s=>{s instanceof Error?N(this,Ux).reject(s):N(this,Ux).resolve({password:s})};r.onPassword(i,n.code)}catch(i){N(this,Ux).reject(i)}return N(this,Ux).promise}),e.on("DataLoaded",n=>{var i;(i=r.onProgress)==null||i.call(r,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;N(this,H0).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,s])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){const h=s.error;ci(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const l=new jG(s),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new G8t(l,c,s.extra,s.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:d}=s;Zi(d,"The imageRef must be defined.");for(const h of N(this,H0).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,s,o])=>{var c;if(this.destroyed)return;const l=N(this,H0).get(i);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(s){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=r.onProgress)==null||i.call(r,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&ci("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},r).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,n=N(this,Dj).get(r);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&N(this,Mj).set(s.refStr,e);const o=new zLt(r,s,this,this._params.pdfBug);return N(this,H0).set(r,o),o});return N(this,Dj).set(r,i),i}getPageIndex(e){return gG(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return ve(this,z2,t4).call(this,"GetFieldObjects")}hasJSActions(){return ve(this,z2,t4).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,r){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:r})}getDocJSActions(){return ve(this,z2,t4).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return ve(this,z2,t4).call(this,"GetOptionalContentConfig").then(r=>new wLt(r,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",r=N(this,$x).get(e);if(r)return r;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,o;return{info:i[0],metadata:i[1]?new yLt(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return N(this,$x).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of N(this,H0).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),N(this,$x).clear(),this.filterFactory.destroy(!0),tk.cleanup()}}cachedPageNumber(e){if(!gG(e))return null;const r=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return N(this,Mj).get(r)??null}}$x=new WeakMap,H0=new WeakMap,Dj=new WeakMap,Mj=new WeakMap,Ux=new WeakMap,z2=new WeakSet,t4=function(e,r=null){const n=N(this,$x).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,r);return N(this,$x).set(e,i),i};var uy;class qLt{constructor(e){ge(this,uy,null);rr(this,"onContinue",null);rr(this,"onError",null);ae(this,uy,e)}get promise(){return N(this,uy).capability.promise}cancel(e=0){N(this,uy).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=N(this,uy).operatorList;if(!e)return!1;const{annotationCanvasMap:r}=N(this,uy);return e.form||e.canvas&&(r==null?void 0:r.size)>0}}uy=new WeakMap;var dy,V2;const Ow=class Ow{constructor({callback:e,params:r,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:x=null}){ge(this,dy,null);this.callback=e,this.params=r,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new qLt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvas,this._canvasContext=r.canvas?null:r.canvasContext,this._enableHWA=m,this._dependencyTracker=r.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){var c,u;if(this.cancelled)return;if(this._canvas){if(N(Ow,V2).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");N(Ow,V2).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:s,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new TE(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,r=0){var n,i,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),N(this,dy)&&(window.cancelAnimationFrame(N(this,dy)),ae(this,dy,null)),N(Ow,V2).delete(this._canvas),e||(e=new UB(`Rendering cancelled, page ${this._pageIndex+1}`,r)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,r;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(r=this.stepper)==null||r.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?ae(this,dy,window.requestAnimationFrame(()=>{ae(this,dy,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),N(Ow,V2).delete(this._canvas),this.callback())))}};dy=new WeakMap,V2=new WeakMap,ge(Ow,V2,new WeakSet);let OG=Ow;const HTe="5.4.296",WTe="f56dc8601";var Kh,q2,Lj,$l,oO,Fj,zx,lO,hy,wp,cO,ea,IG,RG,DG,Nw,GTe,p1;const Hd=class Hd{constructor({editor:e=null,uiManager:r=null}){ge(this,ea);ge(this,Kh,null);ge(this,q2,null);ge(this,Lj);ge(this,$l,null);ge(this,oO,!1);ge(this,Fj,!1);ge(this,zx,null);ge(this,lO);ge(this,hy,null);ge(this,wp,null);var n,i;e?(ae(this,Fj,!1),ae(this,zx,e)):ae(this,Fj,!0),ae(this,wp,(e==null?void 0:e._uiManager)||r),ae(this,lO,N(this,wp)._eventBus),ae(this,Lj,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=N(this,wp))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),N(Hd,cO)||ae(Hd,cO,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ci(this,"_keyboardManager",new WI([[["Escape","mac+Escape"],Hd.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Hd.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Hd.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Hd.prototype._moveToPrevious],[["Home","mac+Home"],Hd.prototype._moveToBeginning],[["End","mac+End"],Hd.prototype._moveToEnd]]))}renderButton(){const e=ae(this,Kh,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",N(this,zx)&&(e.ariaControls=`${N(this,zx).id}_colorpicker_dropdown`);const r=N(this,wp)._signal;e.addEventListener("click",ve(this,ea,Nw).bind(this),{signal:r}),e.addEventListener("keydown",ve(this,ea,DG).bind(this),{signal:r});const n=ae(this,q2,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=N(this,Lj),e.append(n),e}renderMainDropdown(){const e=ae(this,$l,ve(this,ea,IG).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===N(this,Kh)){ve(this,ea,Nw).call(this,e);return}const r=e.target.getAttribute("data-color");r&&ve(this,ea,RG).call(this,r,e)}_moveToNext(e){var r,n;if(!N(this,ea,p1)){ve(this,ea,Nw).call(this,e);return}if(e.target===N(this,Kh)){(r=N(this,$l).firstChild)==null||r.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var r,n;if(e.target===((r=N(this,$l))==null?void 0:r.firstChild)||e.target===N(this,Kh)){N(this,ea,p1)&&this._hideDropdownFromKeyboard();return}N(this,ea,p1)||ve(this,ea,Nw).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var r;if(!N(this,ea,p1)){ve(this,ea,Nw).call(this,e);return}(r=N(this,$l).firstChild)==null||r.focus()}_moveToEnd(e){var r;if(!N(this,ea,p1)){ve(this,ea,Nw).call(this,e);return}(r=N(this,$l).lastChild)==null||r.focus()}hideDropdown(){var e,r;(e=N(this,$l))==null||e.classList.add("hidden"),N(this,Kh).ariaExpanded="false",(r=N(this,hy))==null||r.abort(),ae(this,hy,null)}_hideDropdownFromKeyboard(){var e;if(!N(this,Fj)){if(!N(this,ea,p1)){(e=N(this,zx))==null||e.unselect();return}this.hideDropdown(),N(this,Kh).focus({preventScroll:!0,focusVisible:N(this,oO)})}}updateColor(e){if(N(this,q2)&&(N(this,q2).style.backgroundColor=e),!N(this,$l))return;const r=N(this,wp).highlightColors.values();for(const n of N(this,$l).children)n.ariaSelected=r.next().value===e.toUpperCase()}destroy(){var e,r;(e=N(this,Kh))==null||e.remove(),ae(this,Kh,null),ae(this,q2,null),(r=N(this,$l))==null||r.remove(),ae(this,$l,null)}};Kh=new WeakMap,q2=new WeakMap,Lj=new WeakMap,$l=new WeakMap,oO=new WeakMap,Fj=new WeakMap,zx=new WeakMap,lO=new WeakMap,hy=new WeakMap,wp=new WeakMap,cO=new WeakMap,ea=new WeakSet,IG=function(){const e=document.createElement("div"),r=N(this,wp)._signal;e.addEventListener("contextmenu",Df,{signal:r}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),N(this,zx)&&(e.id=`${N(this,zx).id}_colorpicker_dropdown`);for(const[n,i]of N(this,wp).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",N(Hd,cO)[n]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===N(this,Lj),s.addEventListener("click",ve(this,ea,RG).bind(this,i),{signal:r}),e.append(s)}return e.addEventListener("keydown",ve(this,ea,DG).bind(this),{signal:r}),e},RG=function(e,r){r.stopPropagation(),N(this,lO).dispatch("switchannotationeditorparams",{source:this,type:Hi.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},DG=function(e){Hd._keyboardManager.exec(this,e)},Nw=function(e){if(N(this,ea,p1)){this.hideDropdown();return}if(ae(this,oO,e.detail===0),N(this,hy)||(ae(this,hy,new AbortController),window.addEventListener("pointerdown",ve(this,ea,GTe).bind(this),{signal:N(this,wp).combinedSignal(N(this,hy))})),N(this,Kh).ariaExpanded="true",N(this,$l)){N(this,$l).classList.remove("hidden");return}const r=ae(this,$l,ve(this,ea,IG).call(this));N(this,Kh).append(r)},GTe=function(e){var r;(r=N(this,$l))!=null&&r.contains(e.target)||this.hideDropdown()},p1=function(){return N(this,$l)&&!N(this,$l).classList.contains("hidden")},ge(Hd,cO,null);let rk=Hd;var W0,uO,Bj,dO;const Iw=class Iw{constructor(e){ge(this,W0,null);ge(this,uO,null);ge(this,Bj,null);ae(this,uO,e),ae(this,Bj,e._uiManager),N(Iw,dO)||ae(Iw,dO,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(N(this,W0))return N(this,W0);const{editorType:e,colorType:r,colorValue:n}=N(this,uO),i=ae(this,W0,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",N(Iw,dO)[e]),i.addEventListener("input",()=>{N(this,Bj).updateParams(r,i.value)},{signal:N(this,Bj)._signal}),i}update(e){N(this,W0)&&(N(this,W0).value=e)}destroy(){var e;(e=N(this,W0))==null||e.remove(),ae(this,W0,null)}hideDropdown(){}};W0=new WeakMap,uO=new WeakMap,Bj=new WeakMap,dO=new WeakMap,ge(Iw,dO,null);let YL=Iw;function efe(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function bT(t){return Math.max(0,Math.min(255,255*t))}class tfe{static CMYK_G([e,r,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*r+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=bT(e),[e,e,e]}static G_HTML([e]){const r=efe(e);return`#${r}${r}${r}`}static RGB_G([e,r,n]){return["G",.3*e+.59*r+.11*n]}static RGB_rgb(e){return e.map(bT)}static RGB_HTML(e){return`#${e.map(efe).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,r,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,r+i)]}static CMYK_rgb([e,r,n,i]){return[bT(1-Math.min(1,e+i)),bT(1-Math.min(1,n+i)),bT(1-Math.min(1,r+i))]}static CMYK_HTML(e){const r=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(r)}static RGB_CMYK([e,r,n]){const i=1-e,s=1-r,o=1-n,l=Math.min(i,s,o);return["CMYK",i,s,o,l]}}class HLt{create(e,r,n=!1){if(e<=0||r<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${r}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${r}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ua("Abstract method `_createSVG` called.")}}class nk extends HLt{_createSVG(e){return document.createElementNS(sx,e)}}const WLt=9,iN=new WeakSet,GLt=new Date().getTimezoneOffset()*60*1e3;class rfe{static create(e){switch(e.data.annotationType){case Jo.LINK:return new uee(e);case Jo.TEXT:return new XLt(e);case Jo.WIDGET:switch(e.data.fieldType){case"Tx":return new YLt(e);case"Btn":return e.data.radioButton?new YTe(e):e.data.checkBox?new QLt(e):new JLt(e);case"Ch":return new eFt(e);case"Sig":return new ZLt(e)}return new TN(e);case Jo.POPUP:return new LG(e);case Jo.FREETEXT:return new t4e(e);case Jo.LINE:return new rFt(e);case Jo.SQUARE:return new nFt(e);case Jo.CIRCLE:return new iFt(e);case Jo.POLYLINE:return new r4e(e);case Jo.CARET:return new aFt(e);case Jo.INK:return new dee(e);case Jo.POLYGON:return new sFt(e);case Jo.HIGHLIGHT:return new n4e(e);case Jo.UNDERLINE:return new oFt(e);case Jo.SQUIGGLY:return new lFt(e);case Jo.STRIKEOUT:return new cFt(e);case Jo.STAMP:return new i4e(e);case Jo.FILEATTACHMENT:return new uFt(e);default:return new vo(e)}}}var H2,$j,lm,hO,MG;const Eee=class Eee{constructor(e,{isRenderable:r=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){ge(this,hO);ge(this,H2,null);ge(this,$j,!1);ge(this,lm,null);this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,r&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:r}){return!!(e!=null&&e.str||r!=null&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Eee._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,r=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return r?r.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:r,inkLists:n,rect:i}=this.data;let s=-1/0,o=-1/0;if((r==null?void 0:r.length)>=8){for(let c=0;c<r.length;c+=8)r[c+1]>o?(o=r[c+1],s=r[c+2]):r[c+1]===o&&(s=Math.max(s,r[c+2]));return[s,o]}if((n==null?void 0:n.length)>=1){for(const c of n)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],s=c[u]):c[u+1]===o&&(s=Math.max(s,c[u]));if(s!==1/0)return[s,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:r},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:o}}}=this.parent;return e[1]=r[3]-e[1]+r[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-o)/i,e}get commentText(){var r,n,i;const{data:e}=this;return((n=(r=this.annotationStorage.getRawValue(`${YP}${e.id}`))==null?void 0:r.popup)==null?void 0:n.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:r}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(r.id,{popup:n})||this.annotationStorage.setValue(`${YP}${r.id}`,{id:r.id,annotationType:r.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:r.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,r;(r=((e=N(this,lm))==null?void 0:e.popup)||this.popup)==null||r.remove(),ae(this,lm,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(N(this,H2)||ae(this,H2,{rect:this.data.rect.slice(0)}));const{rect:r,popup:n}=e;r&&ve(this,hO,MG).call(this,r);let i=((s=N(this,lm))==null?void 0:s.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=N(this,lm).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),ae(this,lm,null),this.popup=null))}resetEdited(){var e;N(this,H2)&&(ve(this,hO,MG).call(this,N(this,H2).rect),(e=N(this,lm))==null||e.popup.resetEdited(),ae(this,H2,null))}_createContainer(e){const{data:r,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",r.id),!(this instanceof TN)&&!(this instanceof uee)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,r.alternativeText&&(s.title=r.alternativeText),r.noRotate&&s.classList.add("norotate"),!r.rect||this instanceof LG){const{rotation:g}=r;return!r.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:l,height:c}=this;if(!e&&r.borderStyle.width>0){o.borderWidth=`${r.borderStyle.width}px`;const g=r.borderStyle.horizontalCornerRadius,y=r.borderStyle.verticalCornerRadius;if(g>0||y>0){const S=`calc(${g}px * var(--total-scale-factor)) / calc(${y}px * var(--total-scale-factor))`;o.borderRadius=S}else if(this instanceof YTe){const S=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=S}switch(r.borderStyle.style){case vS.SOLID:o.borderStyle="solid";break;case vS.DASHED:o.borderStyle="dashed";break;case vS.BEVELED:ci("Unimplemented border style: beveled");break;case vS.INSET:ci("Unimplemented border style: inset");break;case vS.UNDERLINE:o.borderBottomStyle="solid";break}const w=r.borderColor||null;w?(ae(this,$j,!0),o.borderColor=rn.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const u=rn.normalizeRect([r.rect[0],n.view[3]-r.rect[1]+n.view[1],r.rect[2],n.view[3]-r.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:m}=i.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-m)/h}%`;const{rotation:x}=r;return r.hasOwnCanvas||x===0?(o.width=`${100*l/d}%`,o.height=`${100*c/h}%`):this.setRotation(x,s),s}setRotation(e,r=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!==0&&([s,o]=[o,s]),r.style.width=`${100*s/n}%`,r.style.height=`${100*o/i}%`,r.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(r,n,i)=>{const s=i.detail[r],o=s[0],l=s.slice(1);i.target.style[n]=tfe[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:tfe[`${o}_rgb`](l)})};return Ci(this,"_commonActions",{display:r=>{const{display:n}=r.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:n}=r.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)},rotation:r=>{const n=r.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,r){const n=this._commonActions;for(const i of Object.keys(r.detail)){const s=e[i]||n[i];s==null||s(r)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const n=this._commonActions;for(const[i,s]of Object.entries(r)){const o=n[i];if(o){const l={detail:{[i]:s},target:e};o(l),delete r[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[r,n,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,y,w,S]=e.subarray(2,6);if(i===g&&s===y&&r===w&&n===S)return}const{style:o}=this.container;let l;if(N(this,$j)){const{borderColor:g,borderWidth:y}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const c=i-r,u=s-n,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const m=d.createElement("clipPath"),x=`clippath_${this.data.id}`;m.setAttribute("id",x),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let g=2,y=e.length;g<y;g+=8){const w=e[g],S=e[g+1],E=e[g+2],j=e[g+3],T=d.createElement("rect"),O=(E-r)/c,I=(s-S)/u,M=(w-E)/c,D=(S-j)/u;T.setAttribute("x",O),T.setAttribute("y",I),T.setAttribute("width",M),T.setAttribute("height",D),m.append(T),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${I}" width="${M}" height="${D}"/>`)}N(this,$j)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(h),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:r}=this;let n,i;e?(n={str:e.text},i=e.date):(n=r.contentsObj,i=r.modificationDate);const s=ae(this,lm,new LG({data:{color:r.color,titleObj:r.titleObj,modificationDate:i,contentsObj:n,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(s.render())}get hasPopupElement(){return!!(N(this,lm)||this.popup||this.data.popupRef)}get extraPopupElement(){return N(this,lm)}render(){ua("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:l}of i){if(s===-1||o===r)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!iN.has(u)){ci(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==r&&iN.has(i)&&n.push({id:o,exportValue:s,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const r of e)r.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:r,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};H2=new WeakMap,$j=new WeakMap,lm=new WeakMap,hO=new WeakSet,MG=function(e){const{container:{style:r},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...e),r.left=`${100*(e[0]-l)/s}%`,r.top=`${100*(o-e[3]+c)/o}%`,i===0?(r.width=`${100*(e[2]-e[0])/s}%`,r.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let vo=Eee;class KLt extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var gf,Sw,KTe,XTe;class uee extends vo{constructor(r,n=null){super(r,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});ge(this,gf);this.isTooltipOnly=r.data.isTooltipOnly}render(){const{data:r,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",r.id);let s=!1;return r.url?(n.addLinkAttributes(i,r.url,r.newWindow),s=!0):r.action?(this._bindNamedAction(i,r.action,r.overlaidText),s=!0):r.attachment?(ve(this,gf,KTe).call(this,i,r.attachment,r.overlaidText,r.attachmentDest),s=!0):r.setOCGState?(ve(this,gf,XTe).call(this,i,r.setOCGState,r.overlaidText),s=!0):r.dest?(this._bindLink(i,r.dest,r.overlaidText),s=!0):(r.actions&&(r.actions.Action||r.actions["Mouse Up"]||r.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,r),s=!0),r.resetForm?(this._bindResetFormAction(i,r.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(r,n,i=""){r.href=this.linkService.getDestinationHash(n),r.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&ve(this,gf,Sw).call(this),i&&(r.title=i)}_bindNamedAction(r,n,i=""){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(r.title=i),ve(this,gf,Sw).call(this)}_bindJSAction(r,n){r.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const o=i.get(s);o&&(r[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(r.title=n.overlaidText),r.onclick||(r.onclick=()=>!1),ve(this,gf,Sw).call(this)}_bindResetFormAction(r,n){const i=r.onclick;if(i||(r.href=this.linkService.getAnchorUrl("")),ve(this,gf,Sw).call(this),!this._fieldObjects){ci('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(r.onclick=()=>!1);return}r.onclick=()=>{var h;i==null||i();const{fields:s,refs:o,include:l}=n,c=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const m of s){const x=this._fieldObjects[m]||[];for(const{id:g}of x)f.add(g)}for(const m of Object.values(this._fieldObjects))for(const x of m)f.has(x.id)===l&&c.push(x)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:m}=f;switch(d.push(m),f.type){case"text":{const g=f.defaultValue||"";u.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(m,{value:g});break}default:continue}const x=document.querySelector(`[data-element-id="${m}"]`);if(x){if(!iN.has(x)){ci(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}gf=new WeakSet,Sw=function(){this.container.setAttribute("data-internal-link","")},KTe=function(r,n,i="",s=null){r.href=this.linkService.getAnchorUrl(""),n.description?r.title=n.description:i&&(r.title=i),r.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,s),!1},ve(this,gf,Sw).call(this)},XTe=function(r,n,i=""){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(r.title=i),ve(this,gf,Sw).call(this)};class XLt extends vo{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class TN extends vo{render(){return this.container}showElementAndHideCanvas(e){var r;this.data.hasOwnCanvas&&(((r=e.previousSibling)==null?void 0:r.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vc.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,r,n,i,s){n.includes("mouse")?e.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var l;if(n==="blur"){if(!r.focused||!o.relatedTarget)return;r.focused=!1}else if(n==="focus"){if(r.focused)return;r.focused=!0}s&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}}))})}_setEventListeners(e,r,n,i){var s,o,l;for(const[c,u]of n)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(r||(r={focused:!1})),this._setEventListener(e,r,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,r,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,r,"focus","Focus",null))}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=r===null?"transparent":rn.makeHexColor(r[0],r[1],r[2])}_setTextStyle(e){const r=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||WLt,s=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(u/(tz*i))||1,h=u/d;o=Math.min(i,c(h/tz))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(u/tz))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=rn.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=r[this.data.textAlignment])}_setRequired(e,r){r?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",r)}}class YLt extends TN{constructor(e){const r=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:r})}setPropertyOnSiblings(e,r,n,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[r]=n),s.setValue(o.id,{[i]:n})}render(){var i,s;const e=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(r,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(r,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),iN.add(n),n.setAttribute("data-element-id",r),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,x=!!f&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",y=>{e.setValue(r,{value:y.target.value}),this.setPropertyOnSiblings(n,"value",y.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",y=>{const w=this.data.defaultFieldValue??"";n.value=d.userValue=w,d.formattedValue=null});let g=y=>{const{formattedValue:w}=d;w!=null&&(y.target.value=w),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{var E;if(d.focused)return;const{target:S}=w;if(x&&(S.type=f,m&&(S.step=m)),d.userValue){const j=d.userValue;if(x)if(f==="time"){const T=new Date(j),O=[T.getHours(),T.getMinutes(),T.getSeconds()];S.value=O.map(I=>I.toString().padStart(2,"0")).join(":")}else S.value=new Date(j-GLt).toISOString().split(f==="date"?"T":".",1)[0];else S.value=j}d.lastCommittedValue=S.value,d.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const S={value(E){d.userValue=E.detail.value??"",x||e.setValue(r,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:j}=E.detail;d.formattedValue=j,j!=null&&E.target!==document.activeElement&&(E.target.value=j);const T={formattedValue:j};x&&(T.value=j),e.setValue(r,T)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var I;const{charLimit:j}=E.detail,{target:T}=E;if(j===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",j);let O=d.userValue;!O||O.length<=j||(O=O.slice(0,j),T.value=d.userValue=O,e.setValue(r,{value:O}),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(S,w)}),n.addEventListener("keydown",w=>{var j;d.commitKey=1;let S=-1;if(w.key==="Escape"?S=0:w.key==="Enter"&&!this.data.multiLine?S=2:w.key==="Tab"&&(d.commitKey=3),S===-1)return;const{value:E}=w.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:E,willCommit:!0,commitKey:S,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const y=g;g=null,n.addEventListener("blur",w=>{var j,T;if(!d.focused||!w.relatedTarget)return;(j=this.data.actions)!=null&&j.Blur||(d.focused=!1);const{target:S}=w;let{value:E}=S;if(x){if(E&&f==="time"){const O=E.split(":").map(I=>parseInt(I,10));E=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),S.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();S.type="text"}d.userValue=E,d.lastCommittedValue!==E&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),y(w)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",w=>{var D;d.lastCommittedValue=null;const{data:S,target:E}=w,{value:j,selectionStart:T,selectionEnd:O}=E;let I=T,M=O;switch(w.inputType){case"deleteWordBackward":{const z=j.substring(0,T).match(/\w*[^\w]*$/);z&&(I-=z[0].length);break}case"deleteWordForward":{const z=j.substring(T).match(/^[^\w]*\w*/);z&&(M+=z[0].length);break}case"deleteContentBackward":T===O&&(I-=1);break;case"deleteContentForward":T===O&&(M+=1);break}w.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:j,change:S||"",willCommit:!1,selStart:I,selEnd:M}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class ZLt extends TN{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class QLt extends TN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,n=r.id;let i=e.getValue(n,{value:r.exportValue===r.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return iN.add(s),s.setAttribute("data-element-id",n),s.disabled=r.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=r.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",r.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,n)){const d=c&&u.exportValue===r.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(n,{value:c})}),s.addEventListener("resetform",o=>{const l=r.defaultFieldValue||"Off";o.target.checked=l===r.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class YTe extends TN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,r=this.data,n=r.id;let i=e.getValue(n,{value:r.fieldValue===r.buttonValue}).value;if(typeof i=="string"&&(i=i!==r.buttonValue,e.setValue(n,{value:i})),i)for(const o of this._getElementsByName(r.fieldName,n))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(iN.add(s),s.setAttribute("data-element-id",n),s.disabled=r.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=r.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:c})}),s.addEventListener("resetform",o=>{const l=r.defaultFieldValue;o.target.checked=l!=null&&l===r.buttonValue}),this.enableScripting&&this.hasJSActions){const o=r.buttonValue;s.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===n;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class JLt extends uee{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const r=e.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class eFt extends TN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,r=this.data.id,n=e.getValue(r,{value:this.data.fieldValue}),i=document.createElement("select");iN.add(i),i.setAttribute("data-element-id",r),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,n.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let o=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),o=()=>{d.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=d=>{const h=d?"value":"textContent",{options:f,multiple:m}=i;return m?Array.prototype.filter.call(f,x=>x.selected).map(x=>x[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=l(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const m=f.detail.value,x=new Set(Array.isArray(m)?m:[m]);for(const g of i.options)g.selected=x.has(g.value);e.setValue(r,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const m=i.options,x=f.detail.remove;m[x].selected=!1,i.remove(x),m.length>0&&Array.prototype.findIndex.call(m,y=>y.selected)===-1&&(m[0].selected=!0),e.setValue(r,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(r,{value:null,items:[]}),c=l(!1)},insert(f){const{index:m,displayValue:x,exportValue:g}=f.detail.insert,y=i.children[m],w=document.createElement("option");w.textContent=x,w.value=g,y?y.before(w):i.append(w),e.setValue(r,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:m}=f.detail;for(;i.length!==0;)i.remove(0);for(const x of m){const{displayValue:g,exportValue:y}=x,w=document.createElement("option");w.textContent=g,w.value=y,i.append(w)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(r,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const m=new Set(f.detail.indices);for(const x of f.target.options)x.selected=m.has(x.index);e.setValue(r,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{var m;const h=l(!0),f=l(!1);e.setValue(r,{value:h}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(r,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var fO,FG;class LG extends vo{constructor(r){const{data:n,elements:i,parent:s}=r,o=!!s._commentManager;super(r,{isRenderable:!o&&vo._hasPopupData(n)});ge(this,fO);if(this.elements=i,o&&vo._hasPopupData(n)){const l=this.popup=ve(this,fO,FG).call(this);for(const c of i)c.popup=l}else this.popup=null}render(){const{container:r}=this;r.classList.add("popupAnnotation"),r.role="comment";const n=this.popup=ve(this,fO,FG).call(this),i=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${ree}${s}`).join(",")),this.container}}fO=new WeakSet,FG=function(){return new tFt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Xh,fy,pF,gF,Uj,zj,Po,G0,my,W2,Vj,qj,K0,Yh,Vx,qx,rc,Hx,py,mO,Wx,Hj,G2,gy,Pu,xy,ki,U6,BG,$G,UG,z6,zG,ZTe,QTe,JTe,e4e,V6,q6,VG;class tFt{constructor({container:e,color:r,elements:n,titleObj:i,modificationDate:s,contentsObj:o,richText:l,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){ge(this,ki);ge(this,Xh,null);ge(this,fy,ve(this,ki,JTe).bind(this));ge(this,pF,ve(this,ki,VG).bind(this));ge(this,gF,ve(this,ki,q6).bind(this));ge(this,Uj,ve(this,ki,V6).bind(this));ge(this,zj,null);ge(this,Po,null);ge(this,G0,null);ge(this,my,null);ge(this,W2,null);ge(this,Vj,null);ge(this,qj,null);ge(this,K0,!1);ge(this,Yh,null);ge(this,Vx,null);ge(this,qx,null);ge(this,rc,null);ge(this,Hx,null);ge(this,py,null);ge(this,mO,null);ge(this,Wx,null);ge(this,Hj,null);ge(this,G2,null);ge(this,gy,!1);ge(this,Pu,null);ge(this,xy,null);ae(this,Po,e),ae(this,Hj,i),ae(this,G0,o),ae(this,Wx,l),ae(this,Vj,c),ae(this,zj,r),ae(this,mO,u),ae(this,qj,d),ae(this,W2,n),ae(this,Xh,f),ae(this,Pu,n[0]),ae(this,my,JP.toDateObject(s)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(ve(this,ki,U6).call(this),N(this,Po).hidden=!0,h&&ve(this,ki,V6).call(this))}renderCommentButton(){if(N(this,rc)||(N(this,Hx)||ve(this,ki,BG).call(this),!N(this,Hx)))return;const{signal:e}=ae(this,Vx,new AbortController),r=!!N(this,Pu).extraPopupElement,n=()=>{N(this,Xh).toggleCommentPopup(this,!0,void 0,!r)},i=()=>{N(this,Xh).toggleCommentPopup(this,!1,!0,!r)},s=()=>{N(this,Xh).toggleCommentPopup(this,!1,!1)};if(r){ae(this,rc,N(this,Pu).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",N(this,fy),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=ae(this,rc,document.createElement("button"));o.className="annotationCommentButton";const l=N(this,Pu).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),ve(this,ki,UG).call(this),ve(this,ki,$G).call(this),o.addEventListener("keydown",N(this,fy),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:r}=N(this,Pu).commentData;return e?N(this,Vj)._commentManager.makeCommentColor(e,r):null}focusCommentButton(){setTimeout(()=>{var e;(e=N(this,rc))==null||e.focus()},0)}getData(){const{richText:e,color:r,opacity:n,creationDate:i,modificationDate:s}=N(this,Pu).commentData;return{contentsObj:{str:this.comment},richText:e,color:r,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return N(this,rc)}get comment(){return N(this,xy)||ae(this,xy,N(this,Pu).commentText),N(this,xy)}set comment(e){e!==this.comment&&(N(this,Pu).commentText=ae(this,xy,e))}get parentBoundingClientRect(){return N(this,Pu).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:r}){N(this,rc)&&(N(this,rc).classList.toggle("selected",e),N(this,rc).ariaExpanded=r)}setSelectedCommentButton(e){N(this,rc).classList.toggle("selected",e)}get commentPopupPosition(){if(N(this,py))return N(this,py);const{x:e,y:r,height:n}=N(this,rc).getBoundingClientRect(),{x:i,y:s,width:o,height:l}=N(this,Pu).layer.getBoundingClientRect();return[(e-i)/o,(r+n-s)/l]}set commentPopupPosition(e){ae(this,py,e)}hasDefaultPopupPosition(){return N(this,py)===null}get commentButtonPosition(){return N(this,Hx)}get commentButtonWidth(){return N(this,rc).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[r,n]=N(this,py)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:s,y:o,width:l,height:c}=i;N(this,Xh).showDialog(null,this,s+r*l,o+n*c,{...e,parentDimensions:i})}render(){var n,i;if(N(this,Yh))return;const e=ae(this,Yh,document.createElement("div"));if(e.className="popup",N(this,zj)){const s=e.style.outlineColor=rn.makeHexColor(...N(this,zj));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const r=document.createElement("span");if(r.className="header",(n=N(this,Hj))!=null&&n.str){const s=document.createElement("span");s.className="title",r.append(s),{dir:s.dir,str:s.textContent}=N(this,Hj)}if(e.append(r),N(this,my)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:N(this,my).valueOf()})),s.dateTime=N(this,my).toISOString(),r.append(s)}iee({html:N(this,ki,z6)||N(this,G0).str,dir:(i=N(this,G0))==null?void 0:i.dir,className:"popupContent"},e),N(this,Po).append(e)}updateEdited({rect:e,popup:r,deleted:n}){var i;if(N(this,Xh)){n?(this.remove(),ae(this,xy,null)):r&&(r.deleted?this.remove():(ve(this,ki,UG).call(this),ae(this,xy,r.text))),e&&(ae(this,Hx,null),ve(this,ki,BG).call(this),ve(this,ki,$G).call(this));return}if(n||r!=null&&r.deleted){this.remove();return}ve(this,ki,U6).call(this),N(this,G2)||ae(this,G2,{contentsObj:N(this,G0),richText:N(this,Wx)}),e&&ae(this,qx,null),r&&r.text&&(ae(this,Wx,ve(this,ki,QTe).call(this,r.text)),ae(this,my,JP.toDateObject(r.date)),ae(this,G0,null)),(i=N(this,Yh))==null||i.remove(),ae(this,Yh,null)}resetEdited(){var e;N(this,G2)&&({contentsObj:Eo(this,G0)._,richText:Eo(this,Wx)._}=N(this,G2),ae(this,G2,null),(e=N(this,Yh))==null||e.remove(),ae(this,Yh,null),ae(this,qx,null))}remove(){var e,r,n;if((e=N(this,Vx))==null||e.abort(),ae(this,Vx,null),(r=N(this,Yh))==null||r.remove(),ae(this,Yh,null),ae(this,gy,!1),ae(this,K0,!1),(n=N(this,rc))==null||n.remove(),ae(this,rc,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){ae(this,gy,this.isVisible),N(this,gy)&&(N(this,Po).hidden=!0)}maybeShow(){N(this,Xh)||(ve(this,ki,U6).call(this),N(this,gy)&&(N(this,Yh)||ve(this,ki,q6).call(this),ae(this,gy,!1),N(this,Po).hidden=!1))}get isVisible(){return N(this,Xh)?!1:N(this,Po).hidden===!1}}Xh=new WeakMap,fy=new WeakMap,pF=new WeakMap,gF=new WeakMap,Uj=new WeakMap,zj=new WeakMap,Po=new WeakMap,G0=new WeakMap,my=new WeakMap,W2=new WeakMap,Vj=new WeakMap,qj=new WeakMap,K0=new WeakMap,Yh=new WeakMap,Vx=new WeakMap,qx=new WeakMap,rc=new WeakMap,Hx=new WeakMap,py=new WeakMap,mO=new WeakMap,Wx=new WeakMap,Hj=new WeakMap,G2=new WeakMap,gy=new WeakMap,Pu=new WeakMap,xy=new WeakMap,ki=new WeakSet,U6=function(){var r;if(N(this,Vx))return;ae(this,Vx,new AbortController);const{signal:e}=N(this,Vx);for(const n of this.trigger)n.addEventListener("click",N(this,Uj),{signal:e}),n.addEventListener("pointerenter",N(this,gF),{signal:e}),n.addEventListener("pointerleave",N(this,pF),{signal:e}),n.classList.add("popupTriggerArea");for(const n of N(this,W2))(r=n.container)==null||r.addEventListener("keydown",N(this,fy),{signal:e})},BG=function(){const e=N(this,W2).find(r=>r.hasCommentButton);e&&ae(this,Hx,e._normalizePoint(e.commentButtonPosition))},$G=function(){if(N(this,Pu).extraPopupElement&&!N(this,Pu).editor)return;this.renderCommentButton();const[e,r]=N(this,Hx),{style:n}=N(this,rc);n.left=`calc(${e}%)`,n.top=`calc(${r}% - var(--comment-button-dim))`},UG=function(){N(this,Pu).extraPopupElement||(this.renderCommentButton(),N(this,rc).style.backgroundColor=this.commentButtonColor||"")},z6=function(){const e=N(this,Wx),r=N(this,G0);return e!=null&&e.str&&(!(r!=null&&r.str)||r.str===e.str)&&N(this,Wx).html||null},zG=function(){var e,r,n;return((n=(r=(e=N(this,ki,z6))==null?void 0:e.attributes)==null?void 0:r.style)==null?void 0:n.fontSize)||0},ZTe=function(){var e,r,n;return((n=(r=(e=N(this,ki,z6))==null?void 0:e.attributes)==null?void 0:r.style)==null?void 0:n.color)||null},QTe=function(e){const r=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:r}]}},i={style:{color:N(this,ki,ZTe),fontSize:N(this,ki,zG)?`calc(${N(this,ki,zG)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))r.push({name:"span",value:s,attributes:i});return n},JTe=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&N(this,K0))&&ve(this,ki,V6).call(this)},e4e=function(){if(N(this,qx)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:i,pageY:s}}}=N(this,Vj);let o=!!N(this,qj),l=o?N(this,qj):N(this,mO);for(const x of N(this,W2))if(!l||rn.intersect(x.data.rect,l)!==null){l=x.data.rect,o=!0;break}const c=rn.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),d=o?l[2]-l[0]+5:0,h=c[0]+d,f=c[1];ae(this,qx,[100*(h-i)/r,100*(f-s)/n]);const{style:m}=N(this,Po);m.left=`${N(this,qx)[0]}%`,m.top=`${N(this,qx)[1]}%`},V6=function(){if(N(this,Xh)){N(this,Xh).toggleCommentPopup(this,!1);return}ae(this,K0,!N(this,K0)),N(this,K0)?(ve(this,ki,q6).call(this),N(this,Po).addEventListener("click",N(this,Uj)),N(this,Po).addEventListener("keydown",N(this,fy))):(ve(this,ki,VG).call(this),N(this,Po).removeEventListener("click",N(this,Uj)),N(this,Po).removeEventListener("keydown",N(this,fy)))},q6=function(){N(this,Yh)||this.render(),this.isVisible?N(this,K0)&&N(this,Po).classList.add("focused"):(ve(this,ki,e4e).call(this),N(this,Po).hidden=!1,N(this,Po).style.zIndex=parseInt(N(this,Po).style.zIndex)+1e3)},VG=function(){N(this,Po).classList.remove("focused"),!(N(this,K0)||!this.isVisible)&&(N(this,Po).hidden=!0,N(this,Po).style.zIndex=parseInt(N(this,Po).style.zIndex)-1e3)};class t4e extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=li.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const r of this.textContent){const n=document.createElement("span");n.textContent=r,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pO;class rFt extends vo{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});ge(this,pO,null)}render(){this.container.classList.add("lineAnnotation");const{data:r,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),o=ae(this,pO,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),o.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),o.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),o.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),o.setAttribute("stroke-width",r.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return N(this,pO)}addHighlightArea(){this.container.classList.add("highlightArea")}}pO=new WeakMap;var gO;class nFt extends vo{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});ge(this,gO,null)}render(){this.container.classList.add("squareAnnotation");const{data:r,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),o=r.borderStyle.width,l=ae(this,gO,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return N(this,gO)}addHighlightArea(){this.container.classList.add("highlightArea")}}gO=new WeakMap;var xO;class iFt extends vo{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});ge(this,xO,null)}render(){this.container.classList.add("circleAnnotation");const{data:r,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),o=r.borderStyle.width,l=ae(this,xO,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return N(this,xO)}addHighlightArea(){this.container.classList.add("highlightArea")}}xO=new WeakMap;var vO;class r4e extends vo{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});ge(this,vO,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:r,vertices:n,borderStyle:i,popupRef:s},width:o,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let h=0,f=n.length;h<f;h+=2){const m=n[h]-r[0],x=r[3]-n[h+1];u.push(`${m},${x}`)}u=u.join(" ");const d=ae(this,vO,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return N(this,vO)}addHighlightArea(){this.container.classList.add("highlightArea")}}vO=new WeakMap;class sFt extends r4e{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aFt extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var yO,K2,bO,qG;class dee extends vo{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});ge(this,bO);ge(this,yO,null);ge(this,K2,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?li.HIGHLIGHT:li.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:r,rotation:n,inkLists:i,borderStyle:s,popupRef:o}}=this,{transform:l,width:c,height:u}=ve(this,bO,qG).call(this,n,r),d=this.svgFactory.create(c,u,!0),h=ae(this,yO,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",l);for(let f=0,m=i.length;f<m;f++){const x=this.svgFactory.createElement(this.svgElementName);N(this,K2).push(x),x.setAttribute("points",i[f].join(",")),h.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(r){super.updateEdited(r);const{thickness:n,points:i,rect:s}=r,o=N(this,yO);if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let l=0,c=N(this,K2).length;l<c;l++)N(this,K2)[l].setAttribute("points",i[l].join(","));if(s){const{transform:l,width:c,height:u}=ve(this,bO,qG).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return N(this,K2)}addHighlightArea(){this.container.classList.add("highlightArea")}}yO=new WeakMap,K2=new WeakMap,bO=new WeakSet,qG=function(r,n){switch(r){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class n4e extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=li.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class oFt extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class lFt extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class cFt extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class i4e extends vo{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=li.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var wO,_O,HG;class uFt extends vo{constructor(r){var i;super(r,{isRenderable:!0});ge(this,_O);ge(this,wO,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:r,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",ve(this,_O,HG).bind(this)),ae(this,wO,i);const{isMac:s}=vc.platform;return r.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&ve(this,_O,HG).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),r.append(i),r}getElementsToTriggerPopup(){return N(this,wO)}addHighlightArea(){this.container.classList.add("highlightArea")}}wO=new WeakMap,_O=new WeakSet,HG=function(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.content,this.filename)};var Wj,X2,Gj,vy,NO,Y2,Mb,WG,GG,Kj;let hee=(Kj=class{constructor({div:e,accessibilityManager:r,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:d}){ge(this,Mb);ge(this,Wj,null);ge(this,X2,null);ge(this,Gj,null);ge(this,vy,new Map);ge(this,NO,null);ge(this,Y2,null);this.div=e,ae(this,Wj,r),ae(this,X2,n),ae(this,NO,l||null),ae(this,Y2,u||null),ae(this,Gj,d||new see),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return N(this,vy).size>0}async render(e){var o,l,c;const{annotations:r}=e,n=this.div;Ob(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:N(this,Y2),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new nk,annotationStorage:N(this,Gj),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of r){if(u.noHTML)continue;const d=u.annotationType===Jo.POPUP;if(d){const m=i.get(u.id);if(!m)continue;s.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;s.data=u;const h=rfe.create(s);if(!h.isRenderable)continue;if(!d&&u.popupRef){const m=i.get(u.popupRef);m?m.push(h):i.set(u.popupRef,[h])}const f=h.render();u.hidden&&(f.style.visibility="hidden"),await ve(this,Mb,WG).call(this,f,u.id,s.elements),(l=(o=h.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),h._isEditable&&(N(this,vy).set(h.data.id,h),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(h))}ve(this,Mb,GG).call(this)}async addLinkAnnotations(e){const r={data:null,layer:this.div,linkService:N(this,Y2),svgFactory:new nk,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Kj._defaultBorderStyle),r.data=n;const i=rfe.create(r);if(!i.isRenderable)continue;const s=i.render();await ve(this,Mb,WG).call(this,s,n.id,null)}}update({viewport:e}){const r=this.div;this.viewport=e,Ob(r,{rotation:e.rotation}),ve(this,Mb,GG).call(this),r.hidden=!1}getEditableAnnotations(){return Array.from(N(this,vy).values())}getEditableAnnotation(e){return N(this,vy).get(e)}addFakeAnnotation(e){var l;const{div:r}=this,{id:n,rotation:i}=e,s=new KLt({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:r,parent:this,enableComment:!!this._commentManager,linkService:N(this,Y2),annotationStorage:N(this,Gj)}),o=s.render();return r.append(o),(l=N(this,Wj))==null||l.moveElementInDOM(r,o,o,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return Ci(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:vS.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Wj=new WeakMap,X2=new WeakMap,Gj=new WeakMap,vy=new WeakMap,NO=new WeakMap,Y2=new WeakMap,Mb=new WeakSet,WG=async function(e,r,n){var l,c;const i=e.firstChild||e,s=i.id=`${ree}${r}`,o=await((l=N(this,NO))==null?void 0:l.getAriaAttributes(s));if(o)for(const[u,d]of o)i.setAttribute(u,d);n?n.at(-1).container.after(e):(this.div.append(e),(c=N(this,Wj))==null||c.moveElementInDOM(this.div,e,i,!1))},GG=function(){var r;if(!N(this,X2))return;const e=this.div;for(const[n,i]of N(this,X2)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):s.append(i);const l=N(this,vy).get(n);l&&(l._hasNoCanvas?((r=this._annotationEditorUIManager)==null||r.setMissingCanvas(n,s.id,i),l._hasNoCanvas=!1):l.canvas=i)}N(this,X2).clear()},Kj);const UD=/\r\n?|\n/g;var Zh,SO,Z2,Qh,Nl,s4e,a4e,o4e,H6,pv,W6,G6,l4e,XG,c4e;const Ca=class Ca extends ba{constructor(r){super({...r,name:"freeTextEditor"});ge(this,Nl);ge(this,Zh,"");ge(this,SO,`${this.id}-editor`);ge(this,Z2,null);ge(this,Qh);rr(this,"_colorPicker",null);this.color=r.color||Ca._defaultColor||ba._defaultLineColor,ae(this,Qh,r.fontSize||Ca._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const r=Ca.prototype,n=o=>o.isEmpty(),i=Ib.TRANSLATE_SMALL,s=Ib.TRANSLATE_BIG;return Ci(this,"_keyboardManager",new WI([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],r.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],r._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],r._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],r._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],r._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(r,n){ba.initialize(r,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(r,n){switch(r){case Hi.FREETEXT_SIZE:Ca._defaultFontSize=n;break;case Hi.FREETEXT_COLOR:Ca._defaultColor=n;break}}updateParams(r,n){switch(r){case Hi.FREETEXT_SIZE:ve(this,Nl,s4e).call(this,n);break;case Hi.FREETEXT_COLOR:ve(this,Nl,a4e).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Hi.FREETEXT_SIZE,Ca._defaultFontSize],[Hi.FREETEXT_COLOR,Ca._defaultColor||ba._defaultLineColor]]}get propertiesToUpdate(){return[[Hi.FREETEXT_SIZE,N(this,Qh)],[Hi.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new YL(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Hi.FREETEXT_COLOR}onUpdatedColor(){var r;this.editorDiv.style.color=this.color,(r=this._colorPicker)==null||r.update(this.color),super.onUpdatedColor()}_translateEmpty(r,n){this._uiManager.translateSelectedEditors(r,n,!0)}getInitialTranslation(){const r=this.parentScale;return[-Ca._internalPadding*r,-(Ca._internalPadding+N(this,Qh))*r]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),ae(this,Z2,new AbortController);const r=this._uiManager.combinedSignal(N(this,Z2));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:r}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:r}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:r}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:r}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:r}),!0}disableEditMode(){var r;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",N(this,SO)),this._isDraggable=!0,(r=N(this,Z2))==null||r.abort(),ae(this,Z2,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(r){this._focusEventsAllowed&&(super.focusin(r),r.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(r){var n;this.width||(this.enableEditMode(),r&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const r=N(this,Zh),n=ae(this,Zh,ve(this,Nl,o4e).call(this).trimEnd());if(r===n)return;const i=s=>{if(ae(this,Zh,s),!s){this.remove();return}ve(this,Nl,G6).call(this),this._uiManager.rebuild(this),ve(this,Nl,H6).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(r)},mustExec:!1}),ve(this,Nl,H6).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(r){r.target===this.div&&r.key==="Enter"&&(this.enterInEditMode(),r.preventDefault())}editorDivKeydown(r){Ca._keyboardManager.exec(this,r)}editorDivFocus(r){this.isEditing=!0}editorDivBlur(r){this.isEditing=!1}editorDivInput(r){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let r,n;(this._isCopy||this.annotationElementId)&&(r=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",N(this,SO)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${N(this,Qh)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,m]=this.pageTranslation;let x,g;switch(this.rotation){case 0:x=r+(l[0]-f)/d,g=n+this.height-(l[1]-m)/h;break;case 90:x=r+(l[0]-f)/d,g=n-(l[1]-m)/h,[c,u]=[u,-c];break;case 180:x=r-this.width+(l[0]-f)/d,g=n-(l[1]-m)/h,[c,u]=[-c,-u];break;case 270:x=r+(l[0]-f-this.height*h)/d,g=n+(l[1]-m-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(x*s,g*o,c,u)}else this._moveAfterPaste(r,n);ve(this,Nl,G6).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(r){var x,g,y;const n=r.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;r.preventDefault();const s=ve(x=Ca,pv,XG).call(x,n.getData("text")||"").replaceAll(UD,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(UD,"")),w!==this.editorDiv){let S=d;for(const E of this.editorDiv.childNodes){if(E===w){S=h;continue}S.push(ve(g=Ca,pv,W6).call(g,E))}}d.push(c.nodeValue.slice(0,u).replaceAll(UD,""))}else if(c===this.editorDiv){let w=d,S=0;for(const E of this.editorDiv.childNodes)S++===u&&(w=h),w.push(ve(y=Ca,pv,W6).call(y,E))}ae(this,Zh,`${d.join(`
`)}${s}${h.join(`
`)}`),ve(this,Nl,G6).call(this);const f=new Range;let m=Math.sumPrecise(d.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const S=w.nodeValue.length;if(m<=S){f.setStart(w,m),f.setEnd(w,m);break}m-=S}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const r=Ca._internalPadding*this.parentScale;return this.getRect(r,r)}static async deserialize(r,n,i){var l;let s=null;if(r instanceof t4e){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:m,richText:x,contentsObj:g,creationDate:y,modificationDate:w},textContent:S,textPosition:E,parent:{page:{pageNumber:j}}}=r;if(!S||S.length===0)return null;s=r={annotationType:li.FREETEXT,color:Array.from(u),fontSize:c,value:S.join(`
`),position:E,pageIndex:j-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(g==null?void 0:g.str)||null,richText:x,creationDate:y,modificationDate:w}}const o=await super.deserialize(r,n,i);return ae(o,Qh,r.fontSize),o.color=rn.makeHexColor(...r.color),ae(o,Zh,ve(l=Ca,pv,XG).call(l,r.value)),o._initialData=s,r.comment&&o.setCommentData(r),o}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ba._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(r),{color:n,fontSize:N(this,Qh),value:ve(this,Nl,l4e).call(this)});return this.addComment(i),r?(i.isCopy=!0,i):this.annotationElementId&&!ve(this,Nl,c4e).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(r){const n=super.renderAnnotationElement(r);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${N(this,Qh)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const s of N(this,Zh).split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),n.append(o)}return r.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:N(this,Zh)}}),n}resetAnnotationElement(r){super.resetAnnotationElement(r),r.resetEdited()}};Zh=new WeakMap,SO=new WeakMap,Z2=new WeakMap,Qh=new WeakMap,Nl=new WeakSet,s4e=function(r){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-N(this,Qh))*this.parentScale),ae(this,Qh,s),ve(this,Nl,H6).call(this)},i=N(this,Qh);this.addCommands({cmd:n.bind(this,r),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hi.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},a4e=function(r){const n=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,r),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hi.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o4e=function(){var i;const r=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(r.push(ve(i=Ca,pv,W6).call(i,s)),n=s);return r.join(`
`)},H6=function(){const[r,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/r,this.height=i.height/n):(this.width=i.height/r,this.height=i.width/n),this.fixAndSetPosition()},pv=new WeakSet,W6=function(r){return(r.nodeType===Node.TEXT_NODE?r.nodeValue:r.innerText).replaceAll(UD,"")},G6=function(){if(this.editorDiv.replaceChildren(),!!N(this,Zh))for(const r of N(this,Zh).split(`
`)){const n=document.createElement("div");n.append(r?document.createTextNode(r):document.createElement("br")),this.editorDiv.append(n)}},l4e=function(){return N(this,Zh).replaceAll(""," ")},XG=function(r){return r.replaceAll(" ","")},c4e=function(r){const{value:n,fontSize:i,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||r.value!==n||r.fontSize!==i||r.color.some((l,c)=>l!==s[c])||r.pageIndex!==o},ge(Ca,pv),rr(Ca,"_freeTextDefaultContent",""),rr(Ca,"_internalPadding",0),rr(Ca,"_defaultColor",null),rr(Ca,"_defaultFontSize",10),rr(Ca,"_type","freetext"),rr(Ca,"_editorType",li.FREETEXT);let KG=Ca;class tn{toSVGPath(){ua("Abstract method `toSVGPath` must be implemented.")}get box(){ua("Abstract getter `box` must be implemented.")}serialize(e,r){ua("Abstract method `serialize` must be implemented.")}static _rescale(e,r,n,i,s,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=r+e[l]*i,o[l+1]=n+e[l+1]*s;return o}static _rescaleAndSwap(e,r,n,i,s,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=r+e[l+1]*i,o[l+1]=n+e[l]*s;return o}static _translate(e,r,n,i){i||(i=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)i[s]=r+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,r,n,i,s){switch(s){case 90:return[1-r/n,e/i];case 180:return[1-e/n,1-r/i];case 270:return[r/n,1-e/i];default:return[e/n,r/i]}}static _normalizePagePoint(e,r,n){switch(n){case 90:return[1-r,e];case 180:return[1-e,1-r];case 270:return[r,1-e];default:return[e,r]}}static createBezierPoints(e,r,n,i,s,o){return[(e+5*n)/6,(r+5*i)/6,(5*n+s)/6,(5*i+o)/6,(n+s)/2,(i+o)/2]}}rr(tn,"PRECISION",1e-4);var Jh,_p,Xj,Yj,X0,Ui,Q2,J2,EO,jO,Zj,Qj,yy,AO,xF,vF,Zl,r4,u4e,d4e,h4e,f4e,m4e,p4e;const hx=class hx{constructor({x:e,y:r},n,i,s,o,l=0){ge(this,Zl);ge(this,Jh);ge(this,_p,[]);ge(this,Xj);ge(this,Yj);ge(this,X0,[]);ge(this,Ui,new Float32Array(18));ge(this,Q2);ge(this,J2);ge(this,EO);ge(this,jO);ge(this,Zj);ge(this,Qj);ge(this,yy,[]);ae(this,Jh,n),ae(this,Qj,s*i),ae(this,Yj,o),N(this,Ui).set([NaN,NaN,NaN,NaN,e,r],6),ae(this,Xj,l),ae(this,jO,N(hx,AO)*i),ae(this,EO,N(hx,vF)*i),ae(this,Zj,i),N(this,yy).push(e,r)}isEmpty(){return isNaN(N(this,Ui)[8])}add({x:e,y:r}){var D;ae(this,Q2,e),ae(this,J2,r);const[n,i,s,o]=N(this,Jh);let[l,c,u,d]=N(this,Ui).subarray(8,12);const h=e-u,f=r-d,m=Math.hypot(h,f);if(m<N(this,EO))return!1;const x=m-N(this,jO),g=x/m,y=g*h,w=g*f;let S=l,E=c;l=u,c=d,u+=y,d+=w,(D=N(this,yy))==null||D.push(e,r);const j=-w/x,T=y/x,O=j*N(this,Qj),I=T*N(this,Qj);return N(this,Ui).set(N(this,Ui).subarray(2,8),0),N(this,Ui).set([u+O,d+I],4),N(this,Ui).set(N(this,Ui).subarray(14,18),12),N(this,Ui).set([u-O,d-I],16),isNaN(N(this,Ui)[6])?(N(this,X0).length===0&&(N(this,Ui).set([l+O,c+I],2),N(this,X0).push(NaN,NaN,NaN,NaN,(l+O-n)/s,(c+I-i)/o),N(this,Ui).set([l-O,c-I],14),N(this,_p).push(NaN,NaN,NaN,NaN,(l-O-n)/s,(c-I-i)/o)),N(this,Ui).set([S,E,l,c,u,d],6),!this.isEmpty()):(N(this,Ui).set([S,E,l,c,u,d],6),Math.abs(Math.atan2(E-c,S-l)-Math.atan2(w,y))<Math.PI/2?([l,c,u,d]=N(this,Ui).subarray(2,6),N(this,X0).push(NaN,NaN,NaN,NaN,((l+u)/2-n)/s,((c+d)/2-i)/o),[l,c,S,E]=N(this,Ui).subarray(14,18),N(this,_p).push(NaN,NaN,NaN,NaN,((S+l)/2-n)/s,((E+c)/2-i)/o),!0):([S,E,l,c,u,d]=N(this,Ui).subarray(0,6),N(this,X0).push(((S+5*l)/6-n)/s,((E+5*c)/6-i)/o,((5*l+u)/6-n)/s,((5*c+d)/6-i)/o,((l+u)/2-n)/s,((c+d)/2-i)/o),[u,d,l,c,S,E]=N(this,Ui).subarray(12,18),N(this,_p).push(((S+5*l)/6-n)/s,((E+5*c)/6-i)/o,((5*l+u)/6-n)/s,((5*c+d)/6-i)/o,((l+u)/2-n)/s,((c+d)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=N(this,X0),r=N(this,_p);if(isNaN(N(this,Ui)[6])&&!this.isEmpty())return ve(this,Zl,u4e).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);ve(this,Zl,h4e).call(this,n);for(let i=r.length-6;i>=6;i-=6)isNaN(r[i])?n.push(`L${r[i+4]} ${r[i+5]}`):n.push(`C${r[i]} ${r[i+1]} ${r[i+2]} ${r[i+3]} ${r[i+4]} ${r[i+5]}`);return ve(this,Zl,d4e).call(this,n),n.join(" ")}newFreeDrawOutline(e,r,n,i,s,o){return new g4e(e,r,n,i,s,o)}getOutlines(){var h;const e=N(this,X0),r=N(this,_p),n=N(this,Ui),[i,s,o,l]=N(this,Jh),c=new Float32Array((((h=N(this,yy))==null?void 0:h.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(N(this,yy)[f]-i)/o,c[f+1]=(N(this,yy)[f+1]-s)/l;if(c[c.length-2]=(N(this,Q2)-i)/o,c[c.length-1]=(N(this,J2)-s)/l,isNaN(n[6])&&!this.isEmpty())return ve(this,Zl,f4e).call(this,c);const u=new Float32Array(N(this,X0).length+24+N(this,_p).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=ve(this,Zl,p4e).call(this,u,d);for(let f=r.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(r[f+m])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=r[f+m],u[d+1]=r[f+m+1],d+=2}return ve(this,Zl,m4e).call(this,u,d),this.newFreeDrawOutline(u,c,N(this,Jh),N(this,Zj),N(this,Xj),N(this,Yj))}};Jh=new WeakMap,_p=new WeakMap,Xj=new WeakMap,Yj=new WeakMap,X0=new WeakMap,Ui=new WeakMap,Q2=new WeakMap,J2=new WeakMap,EO=new WeakMap,jO=new WeakMap,Zj=new WeakMap,Qj=new WeakMap,yy=new WeakMap,AO=new WeakMap,xF=new WeakMap,vF=new WeakMap,Zl=new WeakSet,r4=function(){const e=N(this,Ui).subarray(4,6),r=N(this,Ui).subarray(16,18),[n,i,s,o]=N(this,Jh);return[(N(this,Q2)+(e[0]-r[0])/2-n)/s,(N(this,J2)+(e[1]-r[1])/2-i)/o,(N(this,Q2)+(r[0]-e[0])/2-n)/s,(N(this,J2)+(r[1]-e[1])/2-i)/o]},u4e=function(){const[e,r,n,i]=N(this,Jh),[s,o,l,c]=ve(this,Zl,r4).call(this);return`M${(N(this,Ui)[2]-e)/n} ${(N(this,Ui)[3]-r)/i} L${(N(this,Ui)[4]-e)/n} ${(N(this,Ui)[5]-r)/i} L${s} ${o} L${l} ${c} L${(N(this,Ui)[16]-e)/n} ${(N(this,Ui)[17]-r)/i} L${(N(this,Ui)[14]-e)/n} ${(N(this,Ui)[15]-r)/i} Z`},d4e=function(e){const r=N(this,_p);e.push(`L${r[4]} ${r[5]} Z`)},h4e=function(e){const[r,n,i,s]=N(this,Jh),o=N(this,Ui).subarray(4,6),l=N(this,Ui).subarray(16,18),[c,u,d,h]=ve(this,Zl,r4).call(this);e.push(`L${(o[0]-r)/i} ${(o[1]-n)/s} L${c} ${u} L${d} ${h} L${(l[0]-r)/i} ${(l[1]-n)/s}`)},f4e=function(e){const r=N(this,Ui),[n,i,s,o]=N(this,Jh),[l,c,u,d]=ve(this,Zl,r4).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(r[2]-n)/s,(r[3]-i)/o,NaN,NaN,NaN,NaN,(r[4]-n)/s,(r[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(r[16]-n)/s,(r[17]-i)/o,NaN,NaN,NaN,NaN,(r[14]-n)/s,(r[15]-i)/o],0),this.newFreeDrawOutline(h,e,N(this,Jh),N(this,Zj),N(this,Xj),N(this,Yj))},m4e=function(e,r){const n=N(this,_p);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],r),r+=6},p4e=function(e,r){const n=N(this,Ui).subarray(4,6),i=N(this,Ui).subarray(16,18),[s,o,l,c]=N(this,Jh),[u,d,h,f]=ve(this,Zl,r4).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-o)/c],r),r+=24},ge(hx,AO,8),ge(hx,xF,2),ge(hx,vF,N(hx,AO)+N(hx,xF));let ZL=hx;var Jj,e_,Gx,CO,ef,TO,tl,yF,x4e;class g4e extends tn{constructor(r,n,i,s,o,l){super();ge(this,yF);ge(this,Jj);ge(this,e_,new Float32Array(4));ge(this,Gx);ge(this,CO);ge(this,ef);ge(this,TO);ge(this,tl);ae(this,tl,r),ae(this,ef,n),ae(this,Jj,i),ae(this,TO,s),ae(this,Gx,o),ae(this,CO,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],ve(this,yF,x4e).call(this,l);const[c,u,d,h]=N(this,e_);for(let f=0,m=r.length;f<m;f+=2)r[f]=(r[f]-c)/d,r[f+1]=(r[f+1]-u)/h;for(let f=0,m=n.length;f<m;f+=2)n[f]=(n[f]-c)/d,n[f+1]=(n[f+1]-u)/h}toSVGPath(){const r=[`M${N(this,tl)[4]} ${N(this,tl)[5]}`];for(let n=6,i=N(this,tl).length;n<i;n+=6){if(isNaN(N(this,tl)[n])){r.push(`L${N(this,tl)[n+4]} ${N(this,tl)[n+5]}`);continue}r.push(`C${N(this,tl)[n]} ${N(this,tl)[n+1]} ${N(this,tl)[n+2]} ${N(this,tl)[n+3]} ${N(this,tl)[n+4]} ${N(this,tl)[n+5]}`)}return r.push("Z"),r.join(" ")}serialize([r,n,i,s],o){const l=i-r,c=s-n;let u,d;switch(o){case 0:u=tn._rescale(N(this,tl),r,s,l,-c),d=tn._rescale(N(this,ef),r,s,l,-c);break;case 90:u=tn._rescaleAndSwap(N(this,tl),r,n,l,c),d=tn._rescaleAndSwap(N(this,ef),r,n,l,c);break;case 180:u=tn._rescale(N(this,tl),i,n,-l,c),d=tn._rescale(N(this,ef),i,n,-l,c);break;case 270:u=tn._rescaleAndSwap(N(this,tl),i,s,-l,-c),d=tn._rescaleAndSwap(N(this,ef),i,s,-l,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return N(this,e_)}newOutliner(r,n,i,s,o,l=0){return new ZL(r,n,i,s,o,l)}getNewOutline(r,n){const[i,s,o,l]=N(this,e_),[c,u,d,h]=N(this,Jj),f=o*d,m=l*h,x=i*d+c,g=s*h+u,y=this.newOutliner({x:N(this,ef)[0]*f+x,y:N(this,ef)[1]*m+g},N(this,Jj),N(this,TO),r,N(this,CO),n??N(this,Gx));for(let w=2;w<N(this,ef).length;w+=2)y.add({x:N(this,ef)[w]*f+x,y:N(this,ef)[w+1]*m+g});return y.getOutlines()}}Jj=new WeakMap,e_=new WeakMap,Gx=new WeakMap,CO=new WeakMap,ef=new WeakMap,TO=new WeakMap,tl=new WeakMap,yF=new WeakSet,x4e=function(r){const n=N(this,tl);let i=n[4],s=n[5];const o=[i,s,i,s];let l=i,c=s,u=i,d=s;const h=r?Math.max:Math.min,f=new Float32Array(4);for(let x=6,g=n.length;x<g;x+=6){const y=n[x+4],w=n[x+5];isNaN(n[x])?(rn.pointBoundingBox(y,w,o),c>w?(l=y,c=w):c===w&&(l=h(l,y)),d<w?(u=y,d=w):d===w&&(u=h(u,y))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,rn.bezierBoundingBox(i,s,...n.slice(x,x+6),f),rn.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=h(l,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),i=y,s=w}const m=N(this,e_);m[0]=o[0]-N(this,Gx),m[1]=o[1]-N(this,Gx),m[2]=o[2]-o[0]+2*N(this,Gx),m[3]=o[3]-o[1]+2*N(this,Gx),this.firstPoint=[l,c],this.lastPoint=[u,d]};var PO,kO,OO,by,Np,Pd,v4e,K6,y4e,b4e,ZG;class YG{constructor(e,r=0,n=0,i=!0){ge(this,Pd);ge(this,PO);ge(this,kO);ge(this,OO);ge(this,by,[]);ge(this,Np,[]);const s=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:y,y:w,width:S,height:E}of e){const j=Math.floor((y-r)/l)*l,T=Math.ceil((y+S+r)/l)*l,O=Math.floor((w-r)/l)*l,I=Math.ceil((w+E+r)/l)*l,M=[j,O,I,!0],D=[T,O,I,!1];N(this,by).push(M,D),rn.rectBoundingBox(j,O,T,I,s)}const c=s[2]-s[0]+2*n,u=s[3]-s[1]+2*n,d=s[0]-n,h=s[1]-n;let f=i?-1/0:1/0,m=1/0;const x=N(this,by).at(i?-1:-2),g=[x[0],x[2]];for(const y of N(this,by)){const[w,S,E,j]=y;!j&&i?S<m?(m=S,f=w):S===m&&(f=Math.max(f,w)):j&&!i&&(S<m?(m=S,f=w):S===m&&(f=Math.min(f,w))),y[0]=(w-d)/c,y[1]=(S-h)/u,y[2]=(E-h)/u}ae(this,PO,new Float32Array([d,h,c,u])),ae(this,kO,[f,m]),ae(this,OO,g)}getOutlines(){N(this,by).sort((r,n)=>r[0]-n[0]||r[1]-n[1]||r[2]-n[2]);const e=[];for(const r of N(this,by))r[3]?(e.push(...ve(this,Pd,ZG).call(this,r)),ve(this,Pd,y4e).call(this,r)):(ve(this,Pd,b4e).call(this,r),e.push(...ve(this,Pd,ZG).call(this,r)));return ve(this,Pd,v4e).call(this,e)}}PO=new WeakMap,kO=new WeakMap,OO=new WeakMap,by=new WeakMap,Np=new WeakMap,Pd=new WeakSet,v4e=function(e){const r=[],n=new Set;for(const o of e){const[l,c,u]=o;r.push([l,c,o],[l,u,o])}r.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=r.length;o<l;o+=2){const c=r[o][2],u=r[o+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const i=[];let s;for(;n.size>0;){const o=n.values().next().value;let[l,c,u,d,h]=o;n.delete(o);let f=l,m=c;for(s=[l,u],i.push(s);;){let x;if(n.has(d))x=d;else if(n.has(h))x=h;else break;n.delete(x),[l,c,u,d,h]=x,f!==l&&(s.push(f,m,l,m===c?c:u),f=l),m=m===c?u:c}s.push(f,m)}return new dFt(i,N(this,PO),N(this,kO),N(this,OO))},K6=function(e){const r=N(this,Np);let n=0,i=r.length-1;for(;n<=i;){const s=n+i>>1,o=r[s][0];if(o===e)return s;o<e?n=s+1:i=s-1}return i+1},y4e=function([,e,r]){const n=ve(this,Pd,K6).call(this,e);N(this,Np).splice(n,0,[e,r])},b4e=function([,e,r]){const n=ve(this,Pd,K6).call(this,e);for(let i=n;i<N(this,Np).length;i++){const[s,o]=N(this,Np)[i];if(s!==e)break;if(s===e&&o===r){N(this,Np).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[s,o]=N(this,Np)[i];if(s!==e)break;if(s===e&&o===r){N(this,Np).splice(i,1);return}}},ZG=function(e){const[r,n,i]=e,s=[[r,n,i]],o=ve(this,Pd,K6).call(this,i);for(let l=0;l<o;l++){const[c,u]=N(this,Np)[l];for(let d=0,h=s.length;d<h;d++){const[,f,m]=s[d];if(!(u<=f||m<=c)){if(f>=c){if(m>u)s[d][1]=u;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=c,m>u&&s.push([r,u,m])}}}return s};var IO,eA;class dFt extends tn{constructor(r,n,i,s){super();ge(this,IO);ge(this,eA);ae(this,eA,r),ae(this,IO,n),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const r=[];for(const n of N(this,eA)){let[i,s]=n;r.push(`M${i} ${s}`);for(let o=2;o<n.length;o+=2){const l=n[o],c=n[o+1];l===i?(r.push(`V${c}`),s=c):c===s&&(r.push(`H${l}`),i=l)}r.push("Z")}return r.join(" ")}serialize([r,n,i,s],o){const l=[],c=i-r,u=s-n;for(const d of N(this,eA)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=r+d[f]*c,h[f+1]=s-d[f+1]*u;l.push(h)}return l}get box(){return N(this,IO)}get classNamesForOutlining(){return["highlightOutline"]}}IO=new WeakMap,eA=new WeakMap;class QG extends ZL{newFreeDrawOutline(e,r,n,i,s,o){return new hFt(e,r,n,i,s,o)}}class hFt extends g4e{newOutliner(e,r,n,i,s,o=0){return new QG(e,r,n,i,s,o)}}var tA,RO,Kx,t_,DO,Jd,MO,LO,r_,tf,rf,Fc,rA,nA,ku,iA,cm,FO,Pi,JG,X6,w4e,_4e,N4e,eK,Ew,bm,SS,S4e,Y6,Z6,E4e,j4e,A4e,C4e,T4e;const Ss=class Ss extends ba{constructor(r){super({...r,name:"highlightEditor"});ge(this,Pi);ge(this,tA,null);ge(this,RO,0);ge(this,Kx);ge(this,t_,null);ge(this,DO,null);ge(this,Jd,null);ge(this,MO,null);ge(this,LO,0);ge(this,r_,null);ge(this,tf,null);ge(this,rf,null);ge(this,Fc,!1);ge(this,rA,null);ge(this,nA,null);ge(this,ku,null);ge(this,iA,"");ge(this,cm);ge(this,FO,"");this.color=r.color||Ss._defaultColor,ae(this,cm,r.thickness||Ss._defaultThickness),this.opacity=r.opacity||Ss._defaultOpacity,ae(this,Kx,r.boxes||null),ae(this,FO,r.methodOfCreation||""),ae(this,iA,r.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",r.highlightId>-1?(ae(this,Fc,!0),ve(this,Pi,X6).call(this,r),ve(this,Pi,Ew).call(this)):N(this,Kx)&&(ae(this,tA,r.anchorNode),ae(this,RO,r.anchorOffset),ae(this,MO,r.focusNode),ae(this,LO,r.focusOffset),ve(this,Pi,JG).call(this),ve(this,Pi,Ew).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const r=Ss.prototype;return Ci(this,"_keyboardManager",new WI([[["ArrowLeft","mac+ArrowLeft"],r._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],r._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],r._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],r._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:N(this,Fc)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:N(this,cm),methodOfCreation:N(this,FO)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(r){return{numberOfColors:r.get("color").size}}static initialize(r,n){var i;ba.initialize(r,n),Ss._defaultColor||(Ss._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(r,n){switch(r){case Hi.HIGHLIGHT_COLOR:Ss._defaultColor=n;break;case Hi.HIGHLIGHT_THICKNESS:Ss._defaultThickness=n;break}}translateInPage(r,n){}get toolbarPosition(){return N(this,nA)}get commentButtonPosition(){return N(this,rA)}updateParams(r,n){switch(r){case Hi.HIGHLIGHT_COLOR:ve(this,Pi,w4e).call(this,n);break;case Hi.HIGHLIGHT_THICKNESS:ve(this,Pi,_4e).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Hi.HIGHLIGHT_COLOR,Ss._defaultColor],[Hi.HIGHLIGHT_THICKNESS,Ss._defaultThickness]]}get propertiesToUpdate(){return[[Hi.HIGHLIGHT_COLOR,this.color||Ss._defaultColor],[Hi.HIGHLIGHT_THICKNESS,N(this,cm)||Ss._defaultThickness],[Hi.HIGHLIGHT_FREE,N(this,Fc)]]}onUpdatedColor(){var r,n;(r=this.parent)==null||r.drawLayer.updateProperties(N(this,rf),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=N(this,DO))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",ae(this,DO,new rk({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(ve(this,Pi,Z6).call(this))}getBaseTranslation(){return[0,0]}getRect(r,n){return super.getRect(r,n,ve(this,Pi,Z6).call(this))}onceAdded(r){this.annotationElementId||this.parent.addUndoableEditor(this),r&&this.div.focus()}remove(){ve(this,Pi,eK).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(ve(this,Pi,Ew).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(r){var i;let n=!1;this.parent&&!r?ve(this,Pi,eK).call(this):r&&(ve(this,Pi,Ew).call(this,r),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(r),this.show(this._isVisible),n&&this.select()}rotate(r){var s,o,l;const{drawLayer:n}=this.parent;let i;N(this,Fc)?(r=(r-this.rotation+360)%360,i=ve(s=Ss,bm,SS).call(s,N(this,tf).box,r)):i=ve(o=Ss,bm,SS).call(o,[this.x,this.y,this.width,this.height],r),n.updateProperties(N(this,rf),{bbox:i,root:{"data-main-rotation":r}}),n.updateProperties(N(this,ku),{bbox:ve(l=Ss,bm,SS).call(l,N(this,Jd).box,r),root:{"data-main-rotation":r}})}render(){if(this.div)return this.div;const r=super.render();N(this,iA)&&(r.setAttribute("aria-label",N(this,iA)),r.setAttribute("role","mark")),N(this,Fc)?r.classList.add("free"):this.div.addEventListener("keydown",ve(this,Pi,S4e).bind(this),{signal:this._uiManager._signal});const n=ae(this,r_,document.createElement("div"));return r.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=N(this,t_),this.setDims(this.width,this.height),X5e(this,N(this,r_),["pointerover","pointerleave"]),this.enableEditing(),r}pointerover(){var r;this.isSelected||(r=this.parent)==null||r.drawLayer.updateProperties(N(this,ku),{rootClass:{hovered:!0}})}pointerleave(){var r;this.isSelected||(r=this.parent)==null||r.drawLayer.updateProperties(N(this,ku),{rootClass:{hovered:!1}})}_moveCaret(r){switch(this.parent.unselect(this),r){case 0:case 2:ve(this,Pi,Y6).call(this,!0);break;case 1:case 3:ve(this,Pi,Y6).call(this,!1);break}}select(){var r;super.select(),N(this,ku)&&((r=this.parent)==null||r.drawLayer.updateProperties(N(this,ku),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var r;super.unselect(),N(this,ku)&&((r=this.parent)==null||r.drawLayer.updateProperties(N(this,ku),{rootClass:{selected:!1}}),N(this,Fc)||ve(this,Pi,Y6).call(this,!1))}get _mustFixPosition(){return!N(this,Fc)}show(r=this._isVisible){super.show(r),this.parent&&(this.parent.drawLayer.updateProperties(N(this,rf),{rootClass:{hidden:!r}}),this.parent.drawLayer.updateProperties(N(this,ku),{rootClass:{hidden:!r}}))}static startHighlighting(r,n,{target:i,x:s,y:o}){const{x:l,y:c,width:u,height:d}=i.getBoundingClientRect(),h=new AbortController,f=r.combinedSignal(h),m=x=>{h.abort(),ve(this,bm,C4e).call(this,r,x)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",mo,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Df,{signal:f}),i.addEventListener("pointermove",ve(this,bm,A4e).bind(this,r),{signal:f}),this._freeHighlight=new QG({x:s,y:o},[l,c,u,d],r.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(r,n,i){var g,y,w,S;let s=null;if(r instanceof n4e){const{data:{quadPoints:E,rect:j,rotation:T,id:O,color:I,opacity:M,popupRef:D,richText:z,contentsObj:F,creationDate:q,modificationDate:Q},parent:{page:{pageNumber:re}}}=r;s=r={annotationType:li.HIGHLIGHT,color:Array.from(I),opacity:M,quadPoints:E,boxes:null,pageIndex:re-1,rect:j.slice(0),rotation:T,annotationElementId:O,id:O,deleted:!1,popupRef:D,richText:z,comment:(F==null?void 0:F.str)||null,creationDate:q,modificationDate:Q}}else if(r instanceof dee){const{data:{inkLists:E,rect:j,rotation:T,id:O,color:I,borderStyle:{rawWidth:M},popupRef:D,richText:z,contentsObj:F,creationDate:q,modificationDate:Q},parent:{page:{pageNumber:re}}}=r;s=r={annotationType:li.HIGHLIGHT,color:Array.from(I),thickness:M,inkLists:E,boxes:null,pageIndex:re-1,rect:j.slice(0),rotation:T,annotationElementId:O,id:O,deleted:!1,popupRef:D,richText:z,comment:(F==null?void 0:F.str)||null,creationDate:q,modificationDate:Q}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=r,d=await super.deserialize(r,n,i);d.color=rn.makeHexColor(...o),d.opacity=u||1,c&&ae(d,cm,r.thickness),d._initialData=s,r.comment&&d.setCommentData(r);const[h,f]=d.pageDimensions,[m,x]=d.pageTranslation;if(l){const E=ae(d,Kx,[]);for(let j=0;j<l.length;j+=8)E.push({x:(l[j]-m)/h,y:1-(l[j+1]-x)/f,width:(l[j+2]-l[j])/h,height:(l[j+1]-l[j+5])/f});ve(g=d,Pi,JG).call(g),ve(y=d,Pi,Ew).call(y),d.rotate(d.rotation)}else if(c){ae(d,Fc,!0);const E=c[0],j={x:E[0]-m,y:f-(E[1]-x)},T=new QG(j,[0,0,h,f],1,N(d,cm)/2,!0,.001);for(let M=0,D=E.length;M<D;M+=2)j.x=E[M]-m,j.y=f-(E[M+1]-x),T.add(j);const{id:O,clipPathId:I}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);ve(w=d,Pi,X6).call(w,{highlightOutlines:T.getOutlines(),highlightId:O,clipPathId:I}),ve(S=d,Pi,Ew).call(S),d.rotate(d.parentRotation)}return d}serialize(r=!1){if(this.isEmpty()||r)return null;if(this.deleted)return this.serializeDeleted();const n=ba._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(r);return Object.assign(i,{color:n,opacity:this.opacity,thickness:N(this,cm),quadPoints:ve(this,Pi,E4e).call(this),outlines:ve(this,Pi,j4e).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!ve(this,Pi,T4e).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(r){return this.deleted?(r.hide(),null):(r.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};tA=new WeakMap,RO=new WeakMap,Kx=new WeakMap,t_=new WeakMap,DO=new WeakMap,Jd=new WeakMap,MO=new WeakMap,LO=new WeakMap,r_=new WeakMap,tf=new WeakMap,rf=new WeakMap,Fc=new WeakMap,rA=new WeakMap,nA=new WeakMap,ku=new WeakMap,iA=new WeakMap,cm=new WeakMap,FO=new WeakMap,Pi=new WeakSet,JG=function(){const r=new YG(N(this,Kx),.001);ae(this,tf,r.getOutlines()),[this.x,this.y,this.width,this.height]=N(this,tf).box;const n=new YG(N(this,Kx),.0025,.001,this._uiManager.direction==="ltr");ae(this,Jd,n.getOutlines());const{firstPoint:i}=N(this,tf);ae(this,rA,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=N(this,Jd);ae(this,nA,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},X6=function({highlightOutlines:r,highlightId:n,clipPathId:i}){var f,m;if(ae(this,tf,r),ae(this,Jd,r.getNewOutline(N(this,cm)/2+1.5,.0025)),n>=0)ae(this,rf,n),ae(this,t_,i),this.parent.drawLayer.finalizeDraw(n,{bbox:r.box,path:{d:r.toSVGPath()}}),ae(this,ku,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:N(this,Jd).box,path:{d:N(this,Jd).toSVGPath()}},!0));else if(this.parent){const x=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(N(this,rf),{bbox:ve(f=Ss,bm,SS).call(f,N(this,tf).box,(x-this.rotation+360)%360),path:{d:r.toSVGPath()}}),this.parent.drawLayer.updateProperties(N(this,ku),{bbox:ve(m=Ss,bm,SS).call(m,N(this,Jd).box,x),path:{d:N(this,Jd).toSVGPath()}})}const[o,l,c,u]=r.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[x,g]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*g/x,this.height=u*x/g;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[x,g]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*g/x,this.height=u*x/g;break}}const{firstPoint:d}=r;ae(this,rA,[(d[0]-o)/c,(d[1]-l)/u]);const{lastPoint:h}=N(this,Jd);ae(this,nA,[(h[0]-o)/c,(h[1]-l)/u])},w4e=function(r){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,r,Ss._defaultOpacity),undo:n.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hi.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(r)},!0)},_4e=function(r){const n=N(this,cm),i=s=>{ae(this,cm,s),ve(this,Pi,N4e).call(this,s)};this.addCommands({cmd:i.bind(this,r),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hi.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:r},!0)},N4e=function(r){N(this,Fc)&&(ve(this,Pi,X6).call(this,{highlightOutlines:N(this,tf).getNewOutline(r/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},eK=function(){N(this,rf)===null||!this.parent||(this.parent.drawLayer.remove(N(this,rf)),ae(this,rf,null),this.parent.drawLayer.remove(N(this,ku)),ae(this,ku,null))},Ew=function(r=this.parent){N(this,rf)===null&&({id:Eo(this,rf)._,clipPathId:Eo(this,t_)._}=r.drawLayer.draw({bbox:N(this,tf).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:N(this,Fc)},path:{d:N(this,tf).toSVGPath()}},!1,!0),ae(this,ku,r.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:N(this,Fc)},bbox:N(this,Jd).box,path:{d:N(this,Jd).toSVGPath()}},N(this,Fc))),N(this,r_)&&(N(this,r_).style.clipPath=N(this,t_)))},bm=new WeakSet,SS=function([r,n,i,s],o){switch(o){case 90:return[1-n-s,r,s,i];case 180:return[1-r-i,1-n-s,i,s];case 270:return[n,1-r-i,s,i]}return[r,n,i,s]},S4e=function(r){Ss._keyboardManager.exec(this,r)},Y6=function(r){if(!N(this,tA))return;const n=window.getSelection();r?n.setPosition(N(this,tA),N(this,RO)):n.setPosition(N(this,MO),N(this,LO))},Z6=function(){return N(this,Fc)?this.rotation:0},E4e=function(){if(N(this,Fc))return null;const[r,n]=this.pageDimensions,[i,s]=this.pageTranslation,o=N(this,Kx),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const m=u*r+i,x=(1-d)*n+s;l[c]=l[c+4]=m,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=m+h*r,l[c+5]=l[c+7]=x-f*n,c+=8}return l},j4e=function(r){return N(this,tf).serialize(r,ve(this,Pi,Z6).call(this))},A4e=function(r,n){this._freeHighlight.add(n)&&r.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},C4e=function(r,n){this._freeHighlight.isEmpty()?r.drawLayer.remove(this._freeHighlightId):r.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},T4e=function(r){const{color:n}=this._initialData;return this.hasEditedComment||r.color.some((i,s)=>i!==n[s])},ge(Ss,bm),rr(Ss,"_defaultColor",null),rr(Ss,"_defaultOpacity",1),rr(Ss,"_defaultThickness",12),rr(Ss,"_type","highlight"),rr(Ss,"_editorType",li.HIGHLIGHT),rr(Ss,"_freeHighlightId",-1),rr(Ss,"_freeHighlight",null),rr(Ss,"_freeHighlightClipId","");let QL=Ss;var n_;class P4e{constructor(){ge(this,n_,Object.create(null))}updateProperty(e,r){this[e]=r,this.updateSVGProperty(e,r)}updateProperties(e){if(e)for(const[r,n]of Object.entries(e))r.startsWith("_")||this.updateProperty(r,n)}updateSVGProperty(e,r){N(this,n_)[e]=r}toSVGProperties(){const e=N(this,n_);return ae(this,n_,Object.create(null)),{root:e}}reset(){ae(this,n_,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ua("Not implemented")}}n_=new WeakMap;var nf,sA,nc,i_,s_,wy,_y,Ny,a_,os,tK,rK,nK,n4,k4e,Q6,i4,ES;const dn=class dn extends ba{constructor(r){super(r);ge(this,os);ge(this,nf,null);ge(this,sA);rr(this,"_colorPicker",null);rr(this,"_drawId",null);ae(this,sA,r.mustBeCommitted||!1),this._addOutlines(r)}onUpdatedColor(){var r;(r=this._colorPicker)==null||r.update(this.color),super.onUpdatedColor()}_addOutlines(r){r.drawOutlines&&(ve(this,os,tK).call(this,r),ve(this,os,n4).call(this))}static _mergeSVGProperties(r,n){const i=new Set(Object.keys(r));for(const[s,o]of Object.entries(n))i.has(s)?Object.assign(r[s],o):r[s]=o;return r}static getDefaultDrawingOptions(r){ua("Not implemented")}static get typesMap(){ua("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(r,n){const i=this.typesMap.get(r);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(N(dn,nc).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(r,n){const i=this.constructor.typesMap.get(r);i&&this._updateProperty(r,i,n)}static get defaultPropertiesToUpdate(){const r=[],n=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)r.push([i,n[s]]);return r}get propertiesToUpdate(){const r=[],{_drawingOptions:n}=this;for(const[i,s]of this.constructor.typesMap)r.push([i,n[s]]);return r}_updateProperty(r,n,i){const s=this._drawingOptions,o=s[n],l=c=>{var d;s.updateProperty(n,c);const u=N(this,nf).updateProperty(n,c);u&&ve(this,os,i4).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),r===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:r,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,dn._mergeSVGProperties(N(this,nf).getPathResizingSVGProperties(ve(this,os,Q6).call(this)),{bbox:ve(this,os,ES).call(this)}))}_onResized(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,dn._mergeSVGProperties(N(this,nf).getPathResizedSVGProperties(ve(this,os,Q6).call(this)),{bbox:ve(this,os,ES).call(this)}))}_onTranslating(r,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:ve(this,os,ES).call(this)})}_onTranslated(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,dn._mergeSVGProperties(N(this,nf).getPathTranslatedSVGProperties(ve(this,os,Q6).call(this),this.parentDimensions),{bbox:ve(this,os,ES).call(this)}))}_onStartDragging(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(r){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,N(this,sA)&&(ae(this,sA,!1),this.commit(),this.parent.setSelected(this),r&&this.isOnScreen&&this.div.focus())}remove(){ve(this,os,nK).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(ve(this,os,n4).call(this),ve(this,os,i4).call(this,N(this,nf).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(r){var i;let n=!1;this.parent&&!r?(this._uiManager.removeShouldRescale(this),ve(this,os,nK).call(this)):r&&(this._uiManager.addShouldRescale(this),ve(this,os,n4).call(this,r),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(r),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,dn._mergeSVGProperties({bbox:ve(this,os,ES).call(this)},N(this,nf).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&ve(this,os,i4).call(this,N(this,nf).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let r,n;this._isCopy&&(r=this.x,n=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(r,n),i}static createDrawerInstance(r,n,i,s,o){ua("Not implemented")}static startDrawing(r,n,i,s){var y;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:d}=s;if(N(dn,_y)&&N(dn,_y)!==d)return;const{viewport:{rotation:h}}=r,{width:f,height:m}=o.getBoundingClientRect(),x=ae(dn,i_,new AbortController),g=r.combinedSignal(x);if(N(dn,wy)||ae(dn,wy,u),N(dn,_y)??ae(dn,_y,d),window.addEventListener("pointerup",w=>{var S;N(dn,wy)===w.pointerId?this._endDraw(w):(S=N(dn,Ny))==null||S.delete(w.pointerId)},{signal:g}),window.addEventListener("pointercancel",w=>{var S;N(dn,wy)===w.pointerId?this._currentParent.endDrawingSession():(S=N(dn,Ny))==null||S.delete(w.pointerId)},{signal:g}),window.addEventListener("pointerdown",w=>{N(dn,_y)===w.pointerType&&((N(dn,Ny)||ae(dn,Ny,new Set)).add(w.pointerId),N(dn,nc).isCancellable()&&(N(dn,nc).removeLastElement(),N(dn,nc).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Df,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",w=>{w.timeStamp===N(dn,a_)&&mo(w)},{signal:g}),r.toggleDrawing(),(y=n._editorUndoBar)==null||y.hide(),N(dn,nc)){r.drawLayer.updateProperties(this._currentDrawId,N(dn,nc).startNew(l,c,f,m,h));return}n.updateUIForDefaultProperties(this),ae(dn,nc,this.createDrawerInstance(l,c,f,m,h)),ae(dn,s_,this.getDefaultDrawingOptions()),this._currentParent=r,{id:this._currentDrawId}=r.drawLayer.draw(this._mergeSVGProperties(N(dn,s_).toSVGProperties(),N(dn,nc).defaultSVGProperties),!0,!1)}static _drawMove(r){var o;if(ae(dn,a_,-1),!N(dn,nc))return;const{offsetX:n,offsetY:i,pointerId:s}=r;if(N(dn,wy)===s){if(((o=N(dn,Ny))==null?void 0:o.size)>=1){this._endDraw(r);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,N(dn,nc).add(n,i)),ae(dn,a_,r.timeStamp),mo(r)}}static _cleanup(r){r&&(this._currentDrawId=-1,this._currentParent=null,ae(dn,nc,null),ae(dn,s_,null),ae(dn,_y,null),ae(dn,a_,NaN)),N(dn,i_)&&(N(dn,i_).abort(),ae(dn,i_,null),ae(dn,wy,NaN),ae(dn,Ny,null))}static _endDraw(r){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(r==null?void 0:r.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,N(dn,nc).end(r.offsetX,r.offsetY)),this.supportMultipleDrawings){const i=N(dn,nc),s=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Hi.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(r){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Hi.DRAW_STEP),!N(dn,nc).isEmpty()){const{pageDimensions:[i,s],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:N(dn,nc).getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:N(dn,s_),mustBeCommitted:!r});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(r){}static deserializeDraw(r,n,i,s,o,l){ua("Not implemented")}static async deserialize(r,n,i){var h,f;const{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:c}}=n.viewport,u=this.deserializeDraw(l,c,s,o,this._INNER_MARGIN,r),d=await super.deserialize(r,n,i);return d.createDrawingOptions(r),ve(h=d,os,tK).call(h,{drawOutlines:u}),ve(f=d,os,n4).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(r){const[n,i]=this.pageTranslation,[s,o]=this.pageDimensions;return N(this,nf).serialize([n,i,s,o],r)}renderAnnotationElement(r){return r.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};nf=new WeakMap,sA=new WeakMap,nc=new WeakMap,i_=new WeakMap,s_=new WeakMap,wy=new WeakMap,_y=new WeakMap,Ny=new WeakMap,a_=new WeakMap,os=new WeakSet,tK=function({drawOutlines:r,drawId:n,drawingOptions:i}){ae(this,nf,r),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,r.defaultProperties)):this._drawId=ve(this,os,rK).call(this,r,this.parent),ve(this,os,i4).call(this,r.box)},rK=function(r,n){const{id:i}=n.drawLayer.draw(dn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),r.defaultSVGProperties),!1,!1);return i},nK=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},n4=function(r=this.parent){if(!(this._drawId!==null&&this.parent===r)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,r.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=ve(this,os,rK).call(this,N(this,nf),r)}},k4e=function([r,n,i,s]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[n,1-r,i*(l/o),s*(o/l)];case 180:return[1-r,1-n,i,s];case 270:return[1-n,r,i*(l/o),s*(o/l)];default:return[r,n,i,s]}},Q6=function(){const{x:r,y:n,width:i,height:s,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-n,r,i*(o/l),s*(l/o)];case 180:return[1-r,1-n,i,s];case 270:return[n,1-r,i*(o/l),s*(l/o)];default:return[r,n,i,s]}},i4=function(r){[this.x,this.y,this.width,this.height]=ve(this,os,k4e).call(this,r),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ES=function(){const{x:r,y:n,width:i,height:s,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-n-s,r,s,i];case 2:return[1-r-i,1-n-s,i,s];case 3:return[n,1-r-i,s,i];case 4:return[r,n-i*(c/u),s*(u/c),i*(c/u)];case 5:return[1-n,r,i*(c/u),s*(u/c)];case 6:return[1-r-s*(u/c),1-n,s*(u/c),i*(c/u)];case 7:return[n-i*(c/u),1-r-s*(u/c),i*(c/u),s*(u/c)];case 8:return[r-i,n-s,i,s];case 9:return[1-n,r-i,s,i];case 10:return[1-r,1-n,i,s];case 11:return[n-s,1-r,s,i];case 12:return[r-s*(u/c),n,s*(u/c),i*(c/u)];case 13:return[1-n-i*(c/u),r-s*(u/c),i*(c/u),s*(u/c)];case 14:return[1-r,1-n-i*(c/u),s*(u/c),i*(c/u)];case 15:return[n,1-r,i*(c/u),s*(u/c)];default:return[r,n,i,s]}},rr(dn,"_currentDrawId",-1),rr(dn,"_currentParent",null),ge(dn,nc,null),ge(dn,i_,null),ge(dn,s_,null),ge(dn,wy,NaN),ge(dn,_y,null),ge(dn,Ny,null),ge(dn,a_,NaN),rr(dn,"_INNER_MARGIN",3);let JL=dn;var Y0,ic,sc,o_,aA,cd,Bc,um,l_,c_,u_,oA,J6;class fFt{constructor(e,r,n,i,s,o){ge(this,oA);ge(this,Y0,new Float64Array(6));ge(this,ic);ge(this,sc);ge(this,o_);ge(this,aA);ge(this,cd);ge(this,Bc,"");ge(this,um,0);ge(this,l_,new KI);ge(this,c_);ge(this,u_);ae(this,c_,n),ae(this,u_,i),ae(this,o_,s),ae(this,aA,o),[e,r]=ve(this,oA,J6).call(this,e,r);const l=ae(this,ic,[NaN,NaN,NaN,NaN,e,r]);ae(this,cd,[e,r]),ae(this,sc,[{line:l,points:N(this,cd)}]),N(this,Y0).set(l,0)}updateProperty(e,r){e==="stroke-width"&&ae(this,aA,r)}isEmpty(){return!N(this,sc)||N(this,sc).length===0}isCancellable(){return N(this,cd).length<=10}add(e,r){[e,r]=ve(this,oA,J6).call(this,e,r);const[n,i,s,o]=N(this,Y0).subarray(2,6),l=e-s,c=r-o;return Math.hypot(N(this,c_)*l,N(this,u_)*c)<=2?null:(N(this,cd).push(e,r),isNaN(n)?(N(this,Y0).set([s,o,e,r],2),N(this,ic).push(NaN,NaN,NaN,NaN,e,r),{path:{d:this.toSVGPath()}}):(isNaN(N(this,Y0)[0])&&N(this,ic).splice(6,6),N(this,Y0).set([n,i,s,o,e,r],0),N(this,ic).push(...tn.createBezierPoints(n,i,s,o,e,r)),{path:{d:this.toSVGPath()}}))}end(e,r){const n=this.add(e,r);return n||(N(this,cd).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,r,n,i,s){ae(this,c_,n),ae(this,u_,i),ae(this,o_,s),[e,r]=ve(this,oA,J6).call(this,e,r);const o=ae(this,ic,[NaN,NaN,NaN,NaN,e,r]);ae(this,cd,[e,r]);const l=N(this,sc).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),N(this,sc).push({line:o,points:N(this,cd)}),N(this,Y0).set(o,0),ae(this,um,0),this.toSVGPath(),null}getLastElement(){return N(this,sc).at(-1)}setLastElement(e){return N(this,sc)?(N(this,sc).push(e),ae(this,ic,e.line),ae(this,cd,e.points),ae(this,um,0),{path:{d:this.toSVGPath()}}):N(this,l_).setLastElement(e)}removeLastElement(){if(!N(this,sc))return N(this,l_).removeLastElement();N(this,sc).pop(),ae(this,Bc,"");for(let e=0,r=N(this,sc).length;e<r;e++){const{line:n,points:i}=N(this,sc)[e];ae(this,ic,n),ae(this,cd,i),ae(this,um,0),this.toSVGPath()}return{path:{d:N(this,Bc)}}}toSVGPath(){const e=tn.svgRound(N(this,ic)[4]),r=tn.svgRound(N(this,ic)[5]);if(N(this,cd).length===2)return ae(this,Bc,`${N(this,Bc)} M ${e} ${r} Z`),N(this,Bc);if(N(this,cd).length<=6){const i=N(this,Bc).lastIndexOf("M");ae(this,Bc,`${N(this,Bc).slice(0,i)} M ${e} ${r}`),ae(this,um,6)}if(N(this,cd).length===4){const i=tn.svgRound(N(this,ic)[10]),s=tn.svgRound(N(this,ic)[11]);return ae(this,Bc,`${N(this,Bc)} L ${i} ${s}`),ae(this,um,12),N(this,Bc)}const n=[];N(this,um)===0&&(n.push(`M ${e} ${r}`),ae(this,um,6));for(let i=N(this,um),s=N(this,ic).length;i<s;i+=6){const[o,l,c,u,d,h]=N(this,ic).slice(i,i+6).map(tn.svgRound);n.push(`C${o} ${l} ${c} ${u} ${d} ${h}`)}return ae(this,Bc,N(this,Bc)+n.join(" ")),ae(this,um,N(this,ic).length),N(this,Bc)}getOutlines(e,r,n,i){const s=N(this,sc).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),N(this,l_).build(N(this,sc),e,r,n,N(this,o_),N(this,aA),i),ae(this,Y0,null),ae(this,ic,null),ae(this,sc,null),ae(this,Bc,null),N(this,l_)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Y0=new WeakMap,ic=new WeakMap,sc=new WeakMap,o_=new WeakMap,aA=new WeakMap,cd=new WeakMap,Bc=new WeakMap,um=new WeakMap,l_=new WeakMap,c_=new WeakMap,u_=new WeakMap,oA=new WeakSet,J6=function(e,r){return tn._normalizePoint(e,r,N(this,c_),N(this,u_),N(this,o_))};var ud,BO,$O,sf,Z0,Q0,lA,cA,d_,Wc,ox,O4e,I4e,R4e;class KI extends tn{constructor(){super(...arguments);ge(this,Wc);ge(this,ud);ge(this,BO,0);ge(this,$O);ge(this,sf);ge(this,Z0);ge(this,Q0);ge(this,lA);ge(this,cA);ge(this,d_)}build(r,n,i,s,o,l,c){ae(this,Z0,n),ae(this,Q0,i),ae(this,lA,s),ae(this,cA,o),ae(this,d_,l),ae(this,$O,c??0),ae(this,sf,r),ve(this,Wc,I4e).call(this)}get thickness(){return N(this,d_)}setLastElement(r){return N(this,sf).push(r),{path:{d:this.toSVGPath()}}}removeLastElement(){return N(this,sf).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const r=[];for(const{line:n}of N(this,sf)){if(r.push(`M${tn.svgRound(n[4])} ${tn.svgRound(n[5])}`),n.length===6){r.push("Z");continue}if(n.length===12&&isNaN(n[6])){r.push(`L${tn.svgRound(n[10])} ${tn.svgRound(n[11])}`);continue}for(let i=6,s=n.length;i<s;i+=6){const[o,l,c,u,d,h]=n.subarray(i,i+6).map(tn.svgRound);r.push(`C${o} ${l} ${c} ${u} ${d} ${h}`)}}return r.join("")}serialize([r,n,i,s],o){const l=[],c=[],[u,d,h,f]=ve(this,Wc,O4e).call(this);let m,x,g,y,w,S,E,j,T;switch(N(this,cA)){case 0:T=tn._rescale,m=r,x=n+s,g=i,y=-s,w=r+u*i,S=n+(1-d-f)*s,E=r+(u+h)*i,j=n+(1-d)*s;break;case 90:T=tn._rescaleAndSwap,m=r,x=n,g=i,y=s,w=r+d*i,S=n+u*s,E=r+(d+f)*i,j=n+(u+h)*s;break;case 180:T=tn._rescale,m=r+i,x=n,g=-i,y=s,w=r+(1-u-h)*i,S=n+d*s,E=r+(1-u)*i,j=n+(d+f)*s;break;case 270:T=tn._rescaleAndSwap,m=r+i,x=n+s,g=-i,y=-s,w=r+(1-d-f)*i,S=n+(1-u-h)*s,E=r+(1-d)*i,j=n+(1-u)*s;break}for(const{line:O,points:I}of N(this,sf))l.push(T(O,m,x,g,y,o?new Array(O.length):null)),c.push(T(I,m,x,g,y,o?new Array(I.length):null));return{lines:l,points:c,rect:[w,S,E,j]}}static deserialize(r,n,i,s,o,{paths:{lines:l,points:c},rotation:u,thickness:d}){const h=[];let f,m,x,g,y;switch(u){case 0:y=tn._rescale,f=-r/i,m=n/s+1,x=1/i,g=-1/s;break;case 90:y=tn._rescaleAndSwap,f=-n/s,m=-r/i,x=1/s,g=1/i;break;case 180:y=tn._rescale,f=r/i+1,m=-n/s,x=-1/i,g=1/s;break;case 270:y=tn._rescaleAndSwap,f=n/s+1,m=r/i+1,x=-1/s,g=-1/i;break}if(!l){l=[];for(const S of c){const E=S.length;if(E===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(E===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const j=new Float32Array(3*(E-2));l.push(j);let[T,O,I,M]=S.subarray(0,4);j.set([NaN,NaN,NaN,NaN,T,O],0);for(let D=4;D<E;D+=2){const z=S[D],F=S[D+1];j.set(tn.createBezierPoints(T,O,I,M,z,F),(D-2)*3),[T,O,I,M]=[I,M,z,F]}}}for(let S=0,E=l.length;S<E;S++)h.push({line:y(l[S].map(j=>j??NaN),f,m,x,g),points:y(c[S].map(j=>j??NaN),f,m,x,g)});const w=new this.prototype.constructor;return w.build(h,i,s,1,u,d,o),w}get box(){return N(this,ud)}updateProperty(r,n){return r==="stroke-width"?ve(this,Wc,R4e).call(this,n):null}updateParentDimensions([r,n],i){const[s,o]=ve(this,Wc,ox).call(this);ae(this,Z0,r),ae(this,Q0,n),ae(this,lA,i);const[l,c]=ve(this,Wc,ox).call(this),u=l-s,d=c-o,h=N(this,ud);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(r){return ae(this,BO,r),{path:{transform:this.rotationTransform}}}get viewBox(){return N(this,ud).map(tn.svgRound).join(" ")}get defaultProperties(){const[r,n]=N(this,ud);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${tn.svgRound(r)} ${tn.svgRound(n)}`}}}get rotationTransform(){const[,,r,n]=N(this,ud);let i=0,s=0,o=0,l=0,c=0,u=0;switch(N(this,BO)){case 90:s=n/r,o=-r/n,c=r;break;case 180:i=-1,l=-1,c=r,u=n;break;case 270:s=-n/r,o=r/n,u=n;break;default:return""}return`matrix(${i} ${s} ${o} ${l} ${tn.svgRound(c)} ${tn.svgRound(u)})`}getPathResizingSVGProperties([r,n,i,s]){const[o,l]=ve(this,Wc,ox).call(this),[c,u,d,h]=N(this,ud);if(Math.abs(d-o)<=tn.PRECISION||Math.abs(h-l)<=tn.PRECISION){const y=r+i/2-(c+d/2),w=n+s/2-(u+h/2);return{path:{"transform-origin":`${tn.svgRound(r)} ${tn.svgRound(n)}`,transform:`${this.rotationTransform} translate(${y} ${w})`}}}const f=(i-2*o)/(d-2*o),m=(s-2*l)/(h-2*l),x=d/i,g=h/s;return{path:{"transform-origin":`${tn.svgRound(c)} ${tn.svgRound(u)}`,transform:`${this.rotationTransform} scale(${x} ${g}) translate(${tn.svgRound(o)} ${tn.svgRound(l)}) scale(${f} ${m}) translate(${tn.svgRound(-o)} ${tn.svgRound(-l)})`}}}getPathResizedSVGProperties([r,n,i,s]){const[o,l]=ve(this,Wc,ox).call(this),c=N(this,ud),[u,d,h,f]=c;if(c[0]=r,c[1]=n,c[2]=i,c[3]=s,Math.abs(h-o)<=tn.PRECISION||Math.abs(f-l)<=tn.PRECISION){const w=r+i/2-(u+h/2),S=n+s/2-(d+f/2);for(const{line:E,points:j}of N(this,sf))tn._translate(E,w,S,E),tn._translate(j,w,S,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${tn.svgRound(r)} ${tn.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*o)/(h-2*o),x=(s-2*l)/(f-2*l),g=-m*(u+o)+r+o,y=-x*(d+l)+n+l;if(m!==1||x!==1||g!==0||y!==0)for(const{line:w,points:S}of N(this,sf))tn._rescale(w,g,y,m,x,w),tn._rescale(S,g,y,m,x,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${tn.svgRound(r)} ${tn.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([r,n],i){const[s,o]=i,l=N(this,ud),c=r-l[0],u=n-l[1];if(N(this,Z0)===s&&N(this,Q0)===o)for(const{line:d,points:h}of N(this,sf))tn._translate(d,c,u,d),tn._translate(h,c,u,h);else{const d=N(this,Z0)/s,h=N(this,Q0)/o;ae(this,Z0,s),ae(this,Q0,o);for(const{line:f,points:m}of N(this,sf))tn._rescale(f,c,u,d,h,f),tn._rescale(m,c,u,d,h,m);l[2]*=d,l[3]*=h}return l[0]=r,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${tn.svgRound(r)} ${tn.svgRound(n)}`}}}get defaultSVGProperties(){const r=N(this,ud);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${tn.svgRound(r[0])} ${tn.svgRound(r[1])}`,transform:this.rotationTransform||null},bbox:r}}}ud=new WeakMap,BO=new WeakMap,$O=new WeakMap,sf=new WeakMap,Z0=new WeakMap,Q0=new WeakMap,lA=new WeakMap,cA=new WeakMap,d_=new WeakMap,Wc=new WeakSet,ox=function(r=N(this,d_)){const n=N(this,$O)+r/2*N(this,lA);return N(this,cA)%180===0?[n/N(this,Z0),n/N(this,Q0)]:[n/N(this,Q0),n/N(this,Z0)]},O4e=function(){const[r,n,i,s]=N(this,ud),[o,l]=ve(this,Wc,ox).call(this,0);return[r+o,n+l,i-2*o,s-2*l]},I4e=function(){const r=ae(this,ud,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of N(this,sf)){if(s.length<=12){for(let c=4,u=s.length;c<u;c+=6)rn.pointBoundingBox(s[c],s[c+1],r);continue}let o=s[4],l=s[5];for(let c=6,u=s.length;c<u;c+=6){const[d,h,f,m,x,g]=s.subarray(c,c+6);rn.bezierBoundingBox(o,l,d,h,f,m,x,g,r),o=x,l=g}}const[n,i]=ve(this,Wc,ox).call(this);r[0]=Iu(r[0]-n,0,1),r[1]=Iu(r[1]-i,0,1),r[2]=Iu(r[2]+n,0,1),r[3]=Iu(r[3]+i,0,1),r[2]-=r[0],r[3]-=r[1]},R4e=function(r){const[n,i]=ve(this,Wc,ox).call(this);ae(this,d_,r);const[s,o]=ve(this,Wc,ox).call(this),[l,c]=[s-n,o-i],u=N(this,ud);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class qB extends P4e{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ba._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,r){e==="stroke-width"&&(r??(r=this["stroke-width"]),r*=this._viewParameters.realScale),super.updateSVGProperty(e,r)}clone(){const e=new qB(this._viewParameters);return e.updateAll(this),e}}var bF,D4e;const sE=class sE extends JL{constructor(r){super({...r,name:"inkEditor"});ge(this,bF);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(r,n){ba.initialize(r,n),this._defaultDrawingOptions=new qB(n.viewParameters)}static getDefaultDrawingOptions(r){const n=this._defaultDrawingOptions.clone();return n.updateProperties(r),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ci(this,"typesMap",new Map([[Hi.INK_THICKNESS,"stroke-width"],[Hi.INK_COLOR,"stroke"],[Hi.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(r,n,i,s,o){return new fFt(r,n,i,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(r,n,i,s,o,l){return KI.deserialize(r,n,i,s,o,l)}static async deserialize(r,n,i){let s=null;if(r instanceof dee){const{data:{inkLists:l,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:x,richText:g,contentsObj:y,creationDate:w,modificationDate:S},parent:{page:{pageNumber:E}}}=r;s=r={annotationType:li.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:E-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:x,richText:g,comment:(y==null?void 0:y.str)||null,creationDate:w,modificationDate:S}}const o=await super.deserialize(r,n,i);return o._initialData=s,r.comment&&o.setCommentData(r),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new YL(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Hi.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:r,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(r,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const r=this._currentParent;r&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:r,thickness:n,opacity:i}){this._drawingOptions=sE.getDefaultDrawingOptions({stroke:rn.makeHexColor(...r),"stroke-width":n,"stroke-opacity":i})}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(r),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(r),{color:ba._colorManager.convert(s),opacity:o,thickness:l,paths:{lines:n,points:i}});return this.addComment(c),r?(c.isCopy=!0,c):this.annotationElementId&&!ve(this,bF,D4e).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(r){if(this.deleted)return r.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return r.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};bF=new WeakSet,D4e=function(r){const{color:n,thickness:i,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||r.color.some((l,c)=>l!==n[c])||r.thickness!==i||r.opacity!==s||r.pageIndex!==o},rr(sE,"_type","ink"),rr(sE,"_editorType",li.INK),rr(sE,"_defaultDrawingOptions",null);let iK=sE;class sK extends KI{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const zD=8,wT=3;var h_,Ps,aK,Sp,M4e,L4e,oK,eM,F4e,B4e,$4e,lK,cK,U4e;class dg{static extractContoursFromText(e,{fontFamily:r,fontStyle:n,fontWeight:i},s,o,l,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${n} ${i} ${h}px ${r}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:x,actualBoundingBoxAscent:g,actualBoundingBoxDescent:y,fontBoundingBoxAscent:w,fontBoundingBoxDescent:S,width:E}=d.measureText(e),j=1.5,T=Math.ceil(Math.max(Math.abs(m)+Math.abs(x)||0,E)*j),O=Math.ceil(Math.max(Math.abs(g)+Math.abs(y)||h,Math.abs(w)+Math.abs(S)||h)*j);u=new OffscreenCanvas(T,O),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,O),d.fillStyle="black",d.fillText(e,T*(j-1)/2,O*(3-j)/2);const I=ve(this,Ps,lK).call(this,d.getImageData(0,0,T,O).data),M=ve(this,Ps,$4e).call(this,I),D=ve(this,Ps,cK).call(this,M),z=ve(this,Ps,oK).call(this,I,T,O,D);return this.processDrawnLines({lines:{curves:z,width:T,height:O},pageWidth:s,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,r,n,i,s){const[o,l,c]=ve(this,Ps,U4e).call(this,e),[u,d]=ve(this,Ps,B4e).call(this,o,l,c,Math.hypot(l,c)*N(this,h_).sigmaSFactor,N(this,h_).sigmaR,N(this,h_).kernelSize),h=ve(this,Ps,cK).call(this,d),f=ve(this,Ps,oK).call(this,u,l,c,h);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:r,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:r,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:o,areContours:l}){i%180!==0&&([r,n]=[n,r]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],m=Math.min(r/u,n/d),x=m/r,g=m/n,y=[];for(const{points:S}of c){const E=o?ve(this,Ps,F4e).call(this,S):S;if(!E)continue;y.push(E);const j=E.length,T=new Float32Array(j),O=new Float32Array(3*(j===2?2:j-2));if(f.push({line:O,points:T}),j===2){T[0]=E[0]*x,T[1]=E[1]*g,O.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[I,M,D,z]=E;I*=x,M*=g,D*=x,z*=g,T.set([I,M,D,z],0),O.set([NaN,NaN,NaN,NaN,I,M],0);for(let F=4;F<j;F+=2){const q=T[F]=E[F]*x,Q=T[F+1]=E[F+1]*g;O.set(tn.createBezierPoints(I,M,D,z,q,Q),(F-2)*3),[I,M,D,z]=[D,z,q,Q]}}if(f.length===0)return null;const w=l?new sK:new KI;return w.build(f,r,n,1,i,l?0:h,s),{outline:w,newCurves:y,areContours:l,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:r,thickness:n,width:i,height:s}){let o=1/0,l=-1/0,c=0;for(const E of e){c+=E.length;for(let j=2,T=E.length;j<T;j++){const O=E[j]-E[j-2];o=Math.min(o,O),l=Math.max(l,O)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=zD+wT*d,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=i,f[m++]=s,f[m++]=r?0:1,f[m++]=Math.max(0,Math.floor(n??0)),f[m++]=d,f[m++]=u.BYTES_PER_ELEMENT;for(const E of e)f[m++]=E.length-2,f[m++]=E[0],f[m++]=E[1];const x=new CompressionStream("deflate-raw"),g=x.writable.getWriter();await g.ready,g.write(f);const y=u.prototype.constructor;for(const E of e){const j=new y(E.length-2);for(let T=2,O=E.length;T<O;T++)j[T-2]=E[T]-E[T-2];g.write(j)}g.close();const w=await new Response(x.readable).arrayBuffer(),S=new Uint8Array(w);return L5e(S)}static async decompressSignature(e){try{const r=F8t(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(r).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,l=0;for await(const E of n)o||(o=new Uint8Array(new Uint32Array(E.buffer,0,4)[0])),o.set(E,l),l+=E.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,m=c[5],x=c[6],g=c[7],y=[],w=(zD+wT*x)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(g){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(o.buffer,w);break}l=0;for(let E=0;E<x;E++){const j=c[wT*E+zD],T=new Float32Array(j+2);y.push(T);for(let O=0;O<wT-1;O++)T[O]=c[wT*E+zD+O+1];for(let O=0;O<j;O++)T[O+2]=T[O]+S[l++]}return{areContours:f,thickness:m,outlines:y,width:d,height:h}}catch(r){return ci(`decompressSignature: ${r}`),null}}}h_=new WeakMap,Ps=new WeakSet,aK=function(e,r,n,i){return n-=e,i-=r,n===0?i>0?0:4:n===1?i+6:2-i},Sp=new WeakMap,M4e=function(e,r,n,i,s,o,l){const c=ve(this,Ps,aK).call(this,n,i,s,o);for(let u=0;u<8;u++){const d=(-u+c-l+16)%8,h=N(this,Sp)[2*d],f=N(this,Sp)[2*d+1];if(e[(n+h)*r+(i+f)]!==0)return d}return-1},L4e=function(e,r,n,i,s,o,l){const c=ve(this,Ps,aK).call(this,n,i,s,o);for(let u=0;u<8;u++){const d=(u+c+l+16)%8,h=N(this,Sp)[2*d],f=N(this,Sp)[2*d+1];if(e[(n+h)*r+(i+f)]!==0)return d}return-1},oK=function(e,r,n,i){const s=e.length,o=new Int32Array(s);for(let d=0;d<s;d++)o[d]=e[d]<=i?1:0;for(let d=1;d<n-1;d++)o[d*r]=o[d*r+r-1]=0;for(let d=0;d<r;d++)o[d]=o[r*n-1-d]=0;let l=1,c;const u=[];for(let d=1;d<n-1;d++){c=1;for(let h=1;h<r-1;h++){const f=d*r+h,m=o[f];if(m===0)continue;let x=d,g=h;if(m===1&&o[f-1]===0)l+=1,g-=1;else if(m>=1&&o[f+1]===0)l+=1,g+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const y=[h,d],w=g===h+1,S={isHole:w,points:y,id:l,parent:0};u.push(S);let E;for(const F of u)if(F.id===c){E=F;break}E?E.isHole?S.parent=w?E.parent:c:S.parent=w?c:E.parent:S.parent=w?c:0;const j=ve(this,Ps,M4e).call(this,o,r,d,h,x,g,0);if(j===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let T=N(this,Sp)[2*j],O=N(this,Sp)[2*j+1];const I=d+T,M=h+O;x=I,g=M;let D=d,z=h;for(;;){const F=ve(this,Ps,L4e).call(this,o,r,D,z,x,g,1);T=N(this,Sp)[2*F],O=N(this,Sp)[2*F+1];const q=D+T,Q=z+O;y.push(Q,q);const re=D*r+z;if(o[re+1]===0?o[re]=-l:o[re]===1&&(o[re]=l),q===d&&Q===h&&D===I&&z===M){o[f]!==1&&(c=Math.abs(o[f]));break}else x=D,g=z,D=q,z=Q}}}return u},eM=function(e,r,n,i){if(n-r<=4){for(let I=r;I<n-2;I+=2)i.push(e[I],e[I+1]);return}const s=e[r],o=e[r+1],l=e[n-4]-s,c=e[n-3]-o,u=Math.hypot(l,c),d=l/u,h=c/u,f=d*o-h*s,m=c/l,x=1/u,g=Math.atan(m),y=Math.cos(g),w=Math.sin(g),S=x*(Math.abs(y)+Math.abs(w)),E=x*(1-S+S**2),j=Math.max(Math.atan(Math.abs(w+y)*E),Math.atan(Math.abs(w-y)*E));let T=0,O=r;for(let I=r+2;I<n-2;I+=2){const M=Math.abs(f-d*e[I+1]+h*e[I]);M>T&&(O=I,T=M)}T>(u*j)**2?(ve(this,Ps,eM).call(this,e,r,O+2,i),ve(this,Ps,eM).call(this,e,O,n,i)):i.push(s,o)},F4e=function(e){const r=[],n=e.length;return ve(this,Ps,eM).call(this,e,0,n,r),r.push(e[n-2],e[n-1]),r.length<=4?null:r},B4e=function(e,r,n,i,s,o){const l=new Float32Array(o**2),c=-2*i**2,u=o>>1;for(let g=0;g<o;g++){const y=(g-u)**2;for(let w=0;w<o;w++)l[g*o+w]=Math.exp((y+(w-u)**2)/c)}const d=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,m=new Uint8Array(f),x=new Uint32Array(256);for(let g=0;g<n;g++)for(let y=0;y<r;y++){const w=g*r+y,S=e[w];let E=0,j=0;for(let O=0;O<o;O++){const I=g+O-u;if(!(I<0||I>=n))for(let M=0;M<o;M++){const D=y+M-u;if(D<0||D>=r)continue;const z=e[I*r+D],F=l[O*o+M]*d[Math.abs(z-S)];E+=z*F,j+=F}}const T=m[w]=Math.round(E/j);x[T]++}return[m,x]},$4e=function(e){const r=new Uint32Array(256);for(const n of e)r[n]++;return r},lK=function(e){const r=e.length,n=new Uint8ClampedArray(r>>2);let i=-1/0,s=1/0;for(let l=0,c=n.length;l<c;l++){const u=n[l]=e[l<<2];i=Math.max(i,u),s=Math.min(s,u)}const o=255/(i-s);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-s)*o;return n},cK=function(e){let r,n=-1/0,i=-1/0;const s=e.findIndex(c=>c!==0);let o=s,l=s;for(r=s;r<256;r++){const c=e[r];c>n&&(r-o>i&&(i=r-o,l=r-1),n=c,o=r)}for(r=l-1;r>=0&&!(e[r]>e[r+1]);r--);return r},U4e=function(e){const r=e,{width:n,height:i}=e,{maxDim:s}=N(this,h_);let o=n,l=i;if(n>s||i>s){let f=n,m=i,x=Math.log2(Math.max(n,i)/s);const g=Math.floor(x);x=x===g?g-1:g;for(let w=0;w<x;w++){o=Math.ceil(f/2),l=Math.ceil(m/2);const S=new OffscreenCanvas(o,l);S.getContext("2d").drawImage(e,0,0,f,m,0,0,o,l),f=o,m=l,e!==r&&e.close(),e=S.transferToImageBitmap()}const y=Math.min(s/o,s/l);o=Math.round(o*y),l=Math.round(l*y)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const d=u.getImageData(0,0,o,l).data;return[ve(this,Ps,lK).call(this,d),o,l]},ge(dg,Ps),ge(dg,h_,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),ge(dg,Sp,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class fee extends P4e{constructor(){super(),super.updateProperties({fill:ba._defaultLineColor,"stroke-width":0})}clone(){const e=new fee;return e.updateAll(this),e}}class mee extends qB{constructor(e){super(e),super.updateProperties({stroke:ba._defaultLineColor,"stroke-width":1})}clone(){const e=new mee(this._viewParameters);return e.updateAll(this),e}}var Sy,J0,Ey,f_;const $h=class $h extends JL{constructor(r){super({...r,mustBeCommitted:!0,name:"signatureEditor"});ge(this,Sy,!1);ge(this,J0,null);ge(this,Ey,null);ge(this,f_,null);this._willKeepAspectRatio=!0,ae(this,Ey,r.signatureData||null),ae(this,J0,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(r,n){ba.initialize(r,n),this._defaultDrawingOptions=new fee,this._defaultDrawnSignatureOptions=new mee(n.viewParameters)}static getDefaultDrawingOptions(r){const n=this._defaultDrawingOptions.clone();return n.updateProperties(r),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ci(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!N(this,J0)}}static computeTelemetryFinalData(r){const n=r.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let r,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,r=this.x,n=this.y),super.render(),this._drawId===null)if(N(this,Ey)){const{lines:s,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:d}=N(this,Ey),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,x=dg.processDrawnLines({lines:s,pageWidth:h,pageHeight:f,rotation:m,innerMargin:$h._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:N(this,J0)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(r,n)),this.div}setUuid(r){ae(this,f_,r),this.addEditToolbar()}getUuid(){return N(this,f_)}get description(){return N(this,J0)}set description(r){ae(this,J0,r),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:r})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(r)}))}getSignaturePreview(){const{newCurves:r,areContours:n,thickness:i,width:s,height:o}=N(this,Ey),l=Math.max(s,o),c=dg.processDrawnLines({lines:{curves:r.map(u=>({points:u})),thickness:i,width:s,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(r,n,i,s){const{x:o,y:l}=this,{outline:c}=ae(this,Ey,r);ae(this,Sy,c instanceof sK),this.description=i;let u;N(this,Sy)?u=$h.getDefaultDrawingOptions():(u=$h._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=n/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(r){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return dg.process(r,n,i,s,$h._INNER_MARGIN)}getFromText(r,n){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return dg.extractContoursFromText(r,n,i,s,o,$h._INNER_MARGIN)}getDrawnSignature(r){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return dg.processDrawnLines({lines:r,pageWidth:n,pageHeight:i,rotation:s,innerMargin:$h._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:r,thickness:n}){r?this._drawingOptions=$h.getDefaultDrawingOptions():(this._drawingOptions=$h._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(r=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(r),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(r),{isSignature:!0,areContours:N(this,Sy),color:[0,0,0],thickness:N(this,Sy)?0:s});return this.addComment(o),r?(o.paths={lines:n,points:i},o.uuid=N(this,f_),o.isCopy=!0):o.lines=n,N(this,J0)&&(o.accessibilityData={type:"Figure",alt:N(this,J0)}),o}static deserializeDraw(r,n,i,s,o,l){return l.areContours?sK.deserialize(r,n,i,s,o,l):KI.deserialize(r,n,i,s,o,l)}static async deserialize(r,n,i){var o;const s=await super.deserialize(r,n,i);return ae(s,Sy,r.areContours),s.description=((o=r.accessibilityData)==null?void 0:o.alt)||"",ae(s,f_,r.uuid),s}};Sy=new WeakMap,J0=new WeakMap,Ey=new WeakMap,f_=new WeakMap,rr($h,"_type","signature"),rr($h,"_editorType",li.SIGNATURE),rr($h,"_defaultDrawingOptions",null);let uK=$h;var qa,ac,jy,Xx,Ay,uA,Yx,m_,eg,af,dA,ls,s4,a4,tM,rM,nM,hK,iM,z4e;class dK extends ba{constructor(r){super({...r,name:"stampEditor"});ge(this,ls);ge(this,qa,null);ge(this,ac,null);ge(this,jy,null);ge(this,Xx,null);ge(this,Ay,null);ge(this,uA,"");ge(this,Yx,null);ge(this,m_,!1);ge(this,eg,null);ge(this,af,!1);ge(this,dA,!1);ae(this,Xx,r.bitmapUrl),ae(this,Ay,r.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(r,n){ba.initialize(r,n)}static isHandlingMimeForPasting(r){return HL.includes(r)}static paste(r,n){n.pasteEditor({mode:li.STAMP},{bitmapFile:r.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var r;return{type:"stamp",hasAltText:!!((r=this.altTextData)!=null&&r.altText)}}static computeTelemetryFinalData(r){const n=r.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(r=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:l}=r||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:s,width:o,height:l,channels:s.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var r;N(this,ac)&&(ae(this,qa,null),this._uiManager.imageManager.deleteId(N(this,ac)),(r=N(this,Yx))==null||r.remove(),ae(this,Yx,null),N(this,eg)&&(clearTimeout(N(this,eg)),ae(this,eg,null))),super.remove()}rebuild(){if(!this.parent){N(this,ac)&&ve(this,ls,tM).call(this);return}super.rebuild(),this.div!==null&&(N(this,ac)&&N(this,Yx)===null&&ve(this,ls,tM).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(r){this._isDraggable=!0,r&&this.div.focus()}isEmpty(){return!(N(this,jy)||N(this,qa)||N(this,Xx)||N(this,Ay)||N(this,ac)||N(this,m_))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let r,n;return this._isCopy&&(r=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),N(this,m_)||(N(this,qa)?ve(this,ls,rM).call(this):ve(this,ls,tM).call(this)),this._isCopy&&this._moveAfterPaste(r,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(r,n){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(r,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(ae(this,ac,i),s&&ae(this,qa,s),ae(this,m_,!1),ve(this,ls,rM).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;N(this,eg)!==null&&clearTimeout(N(this,eg)),ae(this,eg,setTimeout(()=>{ae(this,eg,null),ve(this,ls,hK).call(this)},200))}copyCanvas(r,n,i=!1){r||(r=224);const{width:s,height:o}=N(this,qa),l=new s0;let c=N(this,qa),u=s,d=o,h=null;if(n){if(s>n||o>n){const I=Math.min(n/s,n/o);u=Math.floor(s*I),d=Math.floor(o*I)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*l.sx),x=h.height=Math.ceil(d*l.sy);N(this,af)||(c=ve(this,ls,nM).call(this,m,x));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let y="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":U8t.isDarkMode&&(y="#8f8f9d",w="#42414d");const S=15,E=S*l.sx,j=S*l.sy,T=new OffscreenCanvas(E*2,j*2),O=T.getContext("2d");O.fillStyle=y,O.fillRect(0,0,E*2,j*2),O.fillStyle=w,O.fillRect(0,0,E,j),O.fillRect(E,j,E,j),g.fillStyle=g.createPattern(T,"repeat"),g.fillRect(0,0,m,x),g.drawImage(c,0,0,c.width,c.height,0,0,m,x)}let f=null;if(i){let m,x;if(l.symmetric&&c.width<r&&c.height<r)m=c.width,x=c.height;else if(c=N(this,qa),s>r||o>r){const w=Math.min(r/s,r/o);m=Math.floor(s*w),x=Math.floor(o*w),N(this,af)||(c=ve(this,ls,nM).call(this,m,x))}const y=new OffscreenCanvas(m,x).getContext("2d",{willReadFrequently:!0});y.drawImage(c,0,0,c.width,c.height,0,0,m,x),f={width:m,height:x,data:y.getImageData(0,0,m,x).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(r,n,i){var y;let s=null,o=!1;if(r instanceof i4e){const{data:{rect:w,rotation:S,id:E,structParent:j,popupRef:T,richText:O,contentsObj:I,creationDate:M,modificationDate:D},container:z,parent:{page:{pageNumber:F}},canvas:q}=r;let Q,re;q?(delete r.canvas,{id:Q,bitmap:re}=i.imageManager.getFromCanvas(z.id,q),q.remove()):(o=!0,r._hasNoCanvas=!0);const Z=((y=await n._structTree.getAriaAttributes(`${ree}${E}`))==null?void 0:y.get("aria-label"))||"";s=r={annotationType:li.STAMP,bitmapId:Q,bitmap:re,pageIndex:F-1,rect:w.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:j,popupRef:T,richText:O,comment:(I==null?void 0:I.str)||null,creationDate:M,modificationDate:D}}const l=await super.deserialize(r,n,i),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=r;o?(i.addMissingCanvas(r.id,l),ae(l,m_,!0)):h&&i.imageManager.isValidId(h)?(ae(l,ac,h),u&&ae(l,qa,u)):ae(l,Xx,d),ae(l,af,f);const[x,g]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/g,m&&(l.altTextData=m),l._initialData=s,r.comment&&l.setCommentData(r),ae(l,dA,!!s),l}serialize(r=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(r),{bitmapId:N(this,ac),isSvg:N(this,af)});if(this.addComment(i),r)return i.bitmapUrl=ve(this,ls,iM).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=ve(this,ls,z4e).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const l=N(this,af)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(N(this,ac)))n.stamps.set(N(this,ac),{area:l,serialized:i}),i.bitmap=ve(this,ls,iM).call(this,!1);else if(N(this,af)){const c=n.stamps.get(N(this,ac));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=ve(this,ls,iM).call(this,!1))}return i}renderAnnotationElement(r){return this.deleted?(r.hide(),null):(r.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qa=new WeakMap,ac=new WeakMap,jy=new WeakMap,Xx=new WeakMap,Ay=new WeakMap,uA=new WeakMap,Yx=new WeakMap,m_=new WeakMap,eg=new WeakMap,af=new WeakMap,dA=new WeakMap,ls=new WeakSet,s4=function(r,n=!1){if(!r){this.remove();return}ae(this,qa,r.bitmap),n||(ae(this,ac,r.id),ae(this,af,r.isSvg)),r.file&&ae(this,uA,r.file.name),ve(this,ls,rM).call(this)},a4=function(){if(ae(this,jy,null),this._uiManager.enableWaiting(!1),!!N(this,Yx)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&N(this,qa)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&N(this,qa)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},tM=function(){if(N(this,ac)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(N(this,ac)).then(i=>ve(this,ls,s4).call(this,i,!0)).finally(()=>ve(this,ls,a4).call(this));return}if(N(this,Xx)){const i=N(this,Xx);ae(this,Xx,null),this._uiManager.enableWaiting(!0),ae(this,jy,this._uiManager.imageManager.getFromUrl(i).then(s=>ve(this,ls,s4).call(this,s)).finally(()=>ve(this,ls,a4).call(this)));return}if(N(this,Ay)){const i=N(this,Ay);ae(this,Ay,null),this._uiManager.enableWaiting(!0),ae(this,jy,this._uiManager.imageManager.getFromFile(i).then(s=>ve(this,ls,s4).call(this,s)).finally(()=>ve(this,ls,a4).call(this)));return}const r=document.createElement("input");r.type="file",r.accept=HL.join(",");const n=this._uiManager._signal;ae(this,jy,new Promise(i=>{r.addEventListener("change",async()=>{if(!r.files||r.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(r.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),ve(this,ls,s4).call(this,s)}i()},{signal:n}),r.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>ve(this,ls,a4).call(this))),r.click()},rM=function(){var u;const{div:r}=this;let{width:n,height:i}=N(this,qa);const[s,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*s,i=this.height*o;else if(n>l*s||i>l*o){const d=Math.min(l*s/n,l*o/i);n*=d,i*=d}this._uiManager.enableWaiting(!1);const c=ae(this,Yx,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/s,this.height=i/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(r.hidden=!1),ve(this,ls,hK).call(this),N(this,dA)||(this.parent.addUndoableEditor(this),ae(this,dA,!0)),this._reportTelemetry({action:"inserted_image"}),N(this,uA)&&this.div.setAttribute("aria-description",N(this,uA)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},nM=function(r,n){const{width:i,height:s}=N(this,qa);let o=i,l=s,c=N(this,qa);for(;o>2*r||l>2*n;){const u=o,d=l;o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const h=new OffscreenCanvas(o,l);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,l),c=h.transferToImageBitmap()}return c},hK=function(){const[r,n]=this.parentDimensions,{width:i,height:s}=this,o=new s0,l=Math.ceil(i*r*o.sx),c=Math.ceil(s*n*o.sy),u=N(this,Yx);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const d=N(this,af)?N(this,qa):ve(this,ls,nM).call(this,l,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,l,c)},iM=function(r){if(r){if(N(this,af)){const s=this._uiManager.imageManager.getSvgUrl(N(this,ac));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=N(this,qa),n.getContext("2d").drawImage(N(this,qa),0,0),n.toDataURL()}if(N(this,af)){const[n,i]=this.pageDimensions,s=Math.round(this.width*n*Rv.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Rv.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,o);return l.getContext("2d").drawImage(N(this,qa),0,0,N(this,qa).width,N(this,qa).height,0,0,s,o),l.transferToImageBitmap()}return structuredClone(N(this,qa))},z4e=function(r){var l;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=r.pageIndex===n,o=(((l=r.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},rr(dK,"_type","stamp"),rr(dK,"_editorType",li.STAMP);var p_,hA,Cy,Ty,Zx,eh,Py,fA,mA,Ep,Qx,oc,Jx,ky,pA,yn,Oy,la,fK,V4e,A0,mK,pK,sM;const up=class up{constructor({uiManager:e,pageIndex:r,div:n,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:d}){ge(this,la);ge(this,p_);ge(this,hA,!1);ge(this,Cy,null);ge(this,Ty,null);ge(this,Zx,null);ge(this,eh,new Map);ge(this,Py,!1);ge(this,fA,!1);ge(this,mA,!1);ge(this,Ep,null);ge(this,Qx,null);ge(this,oc,null);ge(this,Jx,null);ge(this,ky,null);ge(this,pA,-1);ge(this,yn);const h=[...N(up,Oy).values()];if(!up._initialized){up._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),ae(this,yn,e),this.pageIndex=r,this.div=n,ae(this,p_,s),ae(this,Cy,o),this.viewport=u,ae(this,oc,c),this.drawLayer=l,this._structTree=i,N(this,yn).addLayer(this)}get isEmpty(){return N(this,eh).size===0}get isInvisible(){return this.isEmpty&&N(this,yn).getMode()===li.NONE}updateToolbar(e){N(this,yn).updateToolbar(e)}updateMode(e=N(this,yn).getMode()){switch(ve(this,la,sM).call(this),e){case li.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case li.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case li.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;if(r.toggle("nonEditing",!1),e===li.POPUP)r.toggle("commentEditing",!0);else{r.toggle("commentEditing",!1);for(const n of N(up,Oy).values())r.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var r;return e===((r=N(this,oc))==null?void 0:r.div)}setEditingState(e){N(this,yn).setEditingState(e)}addCommands(e){N(this,yn).addCommands(e)}cleanUndoStack(e){N(this,yn).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var r;(r=N(this,Cy))==null||r.div.classList.toggle("disabled",!e)}async enable(){var n;ae(this,mA,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=N(this,ky))==null||n.abort(),ae(this,ky,null);const e=new Set;for(const i of N(this,la,fK))i.enableEditing(),i.show(!0),i.annotationElementId&&(N(this,yn).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const r=N(this,Cy);if(r)for(const i of r.getEditableAnnotations()){if(i.hide(),N(this,yn).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}ae(this,mA,!1),N(this,yn)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(ae(this,fA,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),N(this,oc)&&!N(this,ky)){ae(this,ky,new AbortController);const i=N(this,yn).combinedSignal(N(this,ky));N(this,oc).div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:c,timeStamp:u}=s,d=N(this,pA);if(u-d>500){ae(this,pA,u);return}ae(this,pA,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const x=new RegExp(`^${YP}[0-9]+$`);for(const y of f)if(x.test(y.id)){m=y.id;break}if(!m)return;const g=N(this,eh).get(m);(g==null?void 0:g.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),g.dblclick(s))},{signal:i,capture:!0})}const e=N(this,Cy);if(e){const i=new Map,s=new Map;for(const l of N(this,la,fK)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);(n=this.getEditableAnnotation(l.annotationElementId))==null||n.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(N(this,yn).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=s.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=i.get(c),u&&(N(this,yn).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}ve(this,la,sM).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of N(up,Oy).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),ae(this,fA,!1)}getEditableAnnotation(e){var r;return((r=N(this,Cy))==null?void 0:r.getEditableAnnotation(e))||null}setActiveEditor(e){N(this,yn).getActive()!==e&&N(this,yn).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=N(this,oc))!=null&&e.div&&!N(this,Jx)){ae(this,Jx,new AbortController);const r=N(this,yn).combinedSignal(N(this,Jx));N(this,oc).div.addEventListener("pointerdown",ve(this,la,V4e).bind(this),{signal:r}),N(this,oc).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=N(this,oc))!=null&&e.div&&N(this,Jx)&&(N(this,Jx).abort(),ae(this,Jx,null),N(this,oc).div.classList.remove("highlighting"))}enableClick(){if(N(this,Ty))return;ae(this,Ty,new AbortController);const e=N(this,yn).combinedSignal(N(this,Ty));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:e}),this.div.addEventListener("pointercancel",r,{signal:e})}disableClick(){var e;(e=N(this,Ty))==null||e.abort(),ae(this,Ty,null)}attach(e){N(this,eh).set(e.id,e);const{annotationElementId:r}=e;r&&N(this,yn).isDeletedAnnotationElement(r)&&N(this,yn).removeDeletedAnnotationElement(e)}detach(e){var r;N(this,eh).delete(e.id),(r=N(this,p_))==null||r.removePointerInTextLayer(e.contentDiv),!N(this,fA)&&e.annotationElementId&&N(this,yn).addDeletedAnnotationElement(e)}remove(e){this.detach(e),N(this,yn).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var r;e.parent!==this&&(e.parent&&e.annotationElementId&&(N(this,yn).addDeletedAnnotationElement(e.annotationElementId),ba.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(r=e.parent)==null||r.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),N(this,yn).addEditor(e),this.attach(e),!e.isAttachedToDOM){const r=e.render();this.div.append(r),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!N(this,mA)),N(this,yn).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:r}=document;e.div.contains(r)&&!N(this,Zx)&&(e._focusEventsAllowed=!1,ae(this,Zx,setTimeout(()=>{ae(this,Zx,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:N(this,yn)._signal}),r.focus())},0))),e._structTreeParentId=(n=N(this,p_))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const r=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:r,undo:n,mustExec:!1})}getEditorByUID(e){for(const r of N(this,eh).values())if(r.uid===e)return r;return null}getNextId(){return N(this,yn).getId()}combinedSignal(e){return N(this,yn).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=N(this,la,A0))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,r){this.updateToolbar(e),await N(this,yn).updateMode(e.mode);const{offsetX:n,offsetY:i}=ve(this,la,pK).call(this),s=this.getNextId(),o=ve(this,la,mK).call(this,{parent:this,id:s,x:n,y:i,uiManager:N(this,yn),isCentered:!0,...r});o&&this.add(o)}async deserialize(e){var r;return await((r=N(up,Oy).get(e.annotationType??e.annotationEditorType))==null?void 0:r.deserialize(e,this,N(this,yn)))||null}createAndAddNewEditor(e,r,n={}){const i=this.getNextId(),s=ve(this,la,mK).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:N(this,yn),isCentered:r,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(ve(this,la,pK).call(this),!0,e)}setSelected(e){N(this,yn).setSelected(e)}toggleSelected(e){N(this,yn).toggleSelected(e)}unselect(e){N(this,yn).unselect(e)}pointerup(e){var i;const{isMac:r}=vc.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div||!N(this,Py)||(ae(this,Py,!1),(i=N(this,la,A0))!=null&&i.isDrawer&&N(this,la,A0).supportMultipleDrawings))return;if(!N(this,hA)){ae(this,hA,!0);return}const n=N(this,yn).getMode();if(n===li.STAMP||n===li.SIGNATURE){N(this,yn).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(N(this,yn).getMode()===li.HIGHLIGHT&&this.enableTextSelection(),N(this,Py)){ae(this,Py,!1);return}const{isMac:r}=vc.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div)return;if(ae(this,Py,!0),(i=N(this,la,A0))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=N(this,yn).getActive();ae(this,hA,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),N(this,Ep)){N(this,la,A0).startDrawing(this,N(this,yn),!1,e);return}N(this,yn).setCurrentDrawingSession(this),ae(this,Ep,new AbortController);const r=N(this,yn).combinedSignal(N(this,Ep));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(ae(this,Qx,null),this.commitOrRemove())},{signal:r}),N(this,la,A0).startDrawing(this,N(this,yn),!1,e)}pause(e){if(e){const{activeElement:r}=document;this.div.contains(r)&&ae(this,Qx,r);return}N(this,Qx)&&setTimeout(()=>{var r;(r=N(this,Qx))==null||r.focus(),ae(this,Qx,null)},0)}endDrawingSession(e=!1){return N(this,Ep)?(N(this,yn).setCurrentDrawingSession(null),N(this,Ep).abort(),ae(this,Ep,null),ae(this,Qx,null),N(this,la,A0).endDrawing(e)):null}findNewParent(e,r,n){const i=N(this,yn).findParent(r,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return N(this,Ep)?(this.endDrawingSession(),!0):!1}onScaleChanging(){N(this,Ep)&&N(this,la,A0).onScaleChangingWhenDrawing(this)}destroy(){var e,r;this.commitOrRemove(),((e=N(this,yn).getActive())==null?void 0:e.parent)===this&&(N(this,yn).commitOrRemove(),N(this,yn).setActiveEditor(null)),N(this,Zx)&&(clearTimeout(N(this,Zx)),ae(this,Zx,null));for(const n of N(this,eh).values())(r=N(this,p_))==null||r.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,N(this,eh).clear(),N(this,yn).removeLayer(this)}render({viewport:e}){this.viewport=e,Ob(this.div,e);for(const r of N(this,yn).getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:e}){N(this,yn).commitOrRemove(),ve(this,la,sM).call(this);const r=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ob(this.div,{rotation:n}),r!==n)for(const i of N(this,eh).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:r}=this.viewport.rawDims;return[e,r]}get scale(){return N(this,yn).viewParameters.realScale}};p_=new WeakMap,hA=new WeakMap,Cy=new WeakMap,Ty=new WeakMap,Zx=new WeakMap,eh=new WeakMap,Py=new WeakMap,fA=new WeakMap,mA=new WeakMap,Ep=new WeakMap,Qx=new WeakMap,oc=new WeakMap,Jx=new WeakMap,ky=new WeakMap,pA=new WeakMap,yn=new WeakMap,Oy=new WeakMap,la=new WeakSet,fK=function(){return N(this,eh).size!==0?N(this,eh).values():N(this,yn).getEditors(this.pageIndex)},V4e=function(e){N(this,yn).unselectAll();const{target:r}=e;if(r===N(this,oc).div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&N(this,oc).div.contains(r)){const{isMac:n}=vc.platform;if(e.button!==0||e.ctrlKey&&n)return;N(this,yn).showAllEditors("highlight",!0,!0),N(this,oc).div.classList.add("free"),this.toggleDrawing(),QL.startHighlighting(this,N(this,yn).direction==="ltr",{target:N(this,oc).div,x:e.x,y:e.y}),N(this,oc).div.addEventListener("pointerup",()=>{N(this,oc).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:N(this,yn)._signal}),e.preventDefault()}},A0=function(){return N(up,Oy).get(N(this,yn).getMode())},mK=function(e){const r=N(this,la,A0);return r?new r.prototype.constructor(e):null},pK=function(){const{x:e,y:r,width:n,height:i}=this.boundingClientRect,s=Math.max(0,e),o=Math.max(0,r),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,r+i),u=(s+l)/2-e,d=(o+c)/2-r,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},sM=function(){for(const e of N(this,eh).values())e.isEmpty()&&e.remove()},rr(up,"_initialized",!1),ge(up,Oy,new Map([KG,iK,dK,QL,uK].map(e=>[e._editorType,e])));let eF=up;var jp,dd,g_,UO,wF,q4e,Lg,gK,H4e,xK;const Ll=class Ll{constructor({pageIndex:e}){ge(this,Lg);ge(this,jp,null);ge(this,dd,new Map);ge(this,g_,new Map);this.pageIndex=e}setParent(e){if(!N(this,jp)){ae(this,jp,e);return}if(N(this,jp)!==e){if(N(this,dd).size>0)for(const r of N(this,dd).values())r.remove(),e.append(r);ae(this,jp,e)}}static get _svgFactory(){return Ci(this,"_svgFactory",new nk)}draw(e,r=!1,n=!1){const i=Eo(Ll,UO)._++,s=ve(this,Lg,gK).call(this),o=Ll._svgFactory.createElement("defs");s.append(o);const l=Ll._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),r&&N(this,g_).set(i,l);const u=n?ve(this,Lg,H4e).call(this,o,c):null,d=Ll._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(s,e),N(this,dd).set(i,s),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,r){const n=Eo(Ll,UO)._++,i=ve(this,Lg,gK).call(this),s=Ll._svgFactory.createElement("defs");i.append(s);const o=Ll._svgFactory.createElement("path");s.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(r){const h=Ll._svgFactory.createElement("mask");s.append(h),c=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=Ll._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=Ll._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=Ll._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return i.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),N(this,dd).set(n,i),n}finalizeDraw(e,r){N(this,g_).delete(e),this.updateProperties(e,r)}updateProperties(e,r){var c;if(!r)return;const{root:n,bbox:i,rootClass:s,path:o}=r,l=typeof e=="number"?N(this,dd).get(e):e;if(l){if(n&&ve(this,Lg,xK).call(this,l,n),i&&ve(c=Ll,wF,q4e).call(c,l,i),s){const{classList:u}=l;for(const[d,h]of Object.entries(s))u.toggle(d,h)}if(o){const d=l.firstChild.firstChild;ve(this,Lg,xK).call(this,d,o)}}}updateParent(e,r){if(r===this)return;const n=N(this,dd).get(e);n&&(N(r,jp).append(n),N(this,dd).delete(e),N(r,dd).set(e,n))}remove(e){N(this,g_).delete(e),N(this,jp)!==null&&(N(this,dd).get(e).remove(),N(this,dd).delete(e))}destroy(){ae(this,jp,null);for(const e of N(this,dd).values())e.remove();N(this,dd).clear(),N(this,g_).clear()}};jp=new WeakMap,dd=new WeakMap,g_=new WeakMap,UO=new WeakMap,wF=new WeakSet,q4e=function(e,[r,n,i,s]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*r}%`,o.width=`${100*i}%`,o.height=`${100*s}%`},Lg=new WeakSet,gK=function(){const e=Ll._svgFactory.create(1,1,!0);return N(this,jp).append(e),e.setAttribute("aria-hidden",!0),e},H4e=function(e,r){const n=Ll._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${r}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Ll._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${r}`),s.classList.add("clip"),i},xK=function(e,r){for(const[n,i]of Object.entries(r))i===null?e.removeAttribute(n):e.setAttribute(n,i)},ge(Ll,wF),ge(Ll,UO,0);let tF=Ll;globalThis._pdfjsTestingUtils={HighlightOutliner:YG};globalThis.pdfjsLib={AbortException:Iv,AnnotationEditorLayer:eF,AnnotationEditorParamsType:Hi,AnnotationEditorType:li,AnnotationEditorUIManager:Ib,AnnotationLayer:hee,AnnotationMode:ug,AnnotationType:Jo,applyOpacity:z5e,build:WTe,ColorPicker:rk,createValidAbsoluteUrl:JJ,CSSConstants:U5e,DOMSVGFactory:nk,DrawLayer:tF,FeatureTest:vc,fetchData:E5,findContrastColor:V5e,getDocument:lee,getFilenameFromUrl:F5e,getPdfFilenameFromUrl:B5e,getRGB:j5,getUuid:tee,getXfaPageViewport:$5e,GlobalWorkerOptions:ym,ImageKind:Z4,InvalidPDFException:qL,isDataScheme:HI,isPdfFile:zB,isValidExplicitDest:_Te,MathClamp:Iu,noContextMenu:Df,normalizeUnicode:M5e,OPS:AC,OutputScale:s0,PasswordResponses:R5e,PDFDataRangeTransport:cee,PDFDateString:JP,PDFWorker:CC,PermissionFlag:I5e,PixelsPerInch:Rv,RenderingCancelledException:UB,renderRichText:iee,ResponseException:ZP,setLayerDimensions:Ob,shadow:Ci,SignatureExtractor:dg,stopEvent:mo,SupportedImageMimeTypes:HL,TextLayer:tk,TouchManager:ek,updateUrlHash:eee,Util:rn,VerbosityLevel:zI,version:HTe,XfaLayer:nee};const mFt=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Iv,AnnotationEditorLayer:eF,AnnotationEditorParamsType:Hi,AnnotationEditorType:li,AnnotationEditorUIManager:Ib,AnnotationLayer:hee,AnnotationMode:ug,AnnotationType:Jo,CSSConstants:U5e,ColorPicker:rk,DOMSVGFactory:nk,DrawLayer:tF,FeatureTest:vc,GlobalWorkerOptions:ym,ImageKind:Z4,InvalidPDFException:qL,MathClamp:Iu,OPS:AC,OutputScale:s0,PDFDataRangeTransport:cee,PDFDateString:JP,PDFWorker:CC,PasswordResponses:R5e,PermissionFlag:I5e,PixelsPerInch:Rv,RenderingCancelledException:UB,ResponseException:ZP,SignatureExtractor:dg,SupportedImageMimeTypes:HL,TextLayer:tk,TouchManager:ek,Util:rn,VerbosityLevel:zI,XfaLayer:nee,applyOpacity:z5e,build:WTe,createValidAbsoluteUrl:JJ,fetchData:E5,findContrastColor:V5e,getDocument:lee,getFilenameFromUrl:F5e,getPdfFilenameFromUrl:B5e,getRGB:j5,getUuid:tee,getXfaPageViewport:$5e,isDataScheme:HI,isPdfFile:zB,isValidExplicitDest:_Te,noContextMenu:Df,normalizeUnicode:M5e,renderRichText:iee,setLayerDimensions:Ob,shadow:Ci,stopEvent:mo,updateUrlHash:eee,version:HTe},Symbol.toStringTag,{value:"Module"}));var nfe=Object.prototype.hasOwnProperty;function ife(t,e,r){for(r of t.keys())if(PE(r,e))return r}function PE(t,e){var r,n,i;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&PE(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(i=n,i&&typeof i=="object"&&(i=ife(e,i),!i)||!e.has(i))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(i=n[0],i&&typeof i=="object"&&(i=ife(e,i),!i)||!PE(n[1],e.get(i)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(nfe.call(t,r)&&++n&&!nfe.call(e,r)||!(r in e)||!PE(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}function XI(t){let e=!1;return{promise:new Promise((n,i)=>{t.then(s=>!e&&n(s)).catch(s=>!e&&i(s))}),cancel(){e=!0}}}const pFt=["onCopy","onCut","onPaste"],gFt=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],xFt=["onFocus","onBlur"],vFt=["onInput","onInvalid","onReset","onSubmit"],yFt=["onLoad","onError"],bFt=["onKeyDown","onKeyPress","onKeyUp"],wFt=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],_Ft=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],NFt=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],SFt=["onSelect"],EFt=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],jFt=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],AFt=["onScroll"],CFt=["onWheel"],TFt=["onAnimationStart","onAnimationEnd","onAnimationIteration"],PFt=["onTransitionEnd"],kFt=["onToggle"],OFt=["onChange"],IFt=[...pFt,...gFt,...xFt,...vFt,...yFt,...bFt,...wFt,..._Ft,...NFt,...SFt,...EFt,...jFt,...AFt,...CFt,...TFt,...PFt,...OFt,...kFt];function W4e(t,e){const r={};for(const n of IFt){const i=t[n];i&&(e?r[n]=s=>i(s,e(n)):r[n]=i)}return r}var RFt=function(){},DFt=RFt;const Uu=Vi(DFt),G4e=C.createContext(null),MFt="noopener noreferrer nofollow";class LFt{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ts(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){ts(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,r,n){e.href=r,e.rel=this.externalLinkRel||MFt,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(r=>{ts(this.pdfDocument),ts(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(r):Array.isArray(e)?r(e):e.then(r)}).then(r=>{ts(Array.isArray(r));const n=r[0];new Promise(i=>{ts(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(s=>{i(s)}).catch(()=>{ts(!1)}):typeof n=="number"?i(n):ts(!1)}).then(i=>{const s=i+1;ts(this.pdfViewer),ts(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:r,pageIndex:i,pageNumber:s})})})}goToPage(e){const r=e-1;ts(this.pdfViewer),ts(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:r,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function kE({children:t,type:e}){return a.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:t})}const sfe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function FFt(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function TC(){return C.useReducer(FFt,{value:void 0,error:void 0})}const HB=typeof window<"u",K4e=HB&&window.location.protocol==="file:";function BFt(t){return typeof t<"u"}function hw(t){return BFt(t)&&t!==null}function $Ft(t){return typeof t=="string"}function UFt(t){return t instanceof ArrayBuffer}function zFt(t){return ts(HB),t instanceof Blob}function vK(t){return $Ft(t)&&/^data:/.test(t)}function afe(t){ts(vK(t));const[e="",r=""]=t.split(",");return e.split(";").indexOf("base64")!==-1?atob(r):unescape(r)}function VFt(){return HB&&window.devicePixelRatio||1}const X4e="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ofe(){Uu(!K4e,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${X4e}`)}function qFt(){Uu(!K4e,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${X4e}`)}function sN(t){t!=null&&t.cancel&&t.cancel()}function yK(t,e){return Object.defineProperty(t,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),t}function Y4e(t){return t.name==="AbortException"||t.name==="RenderingCancelledException"}function HFt(t){return new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return r(new Error("Error while reading a file."));e(n.result)},n.onerror=i=>{if(!i.target)return r(new Error("Error while reading a file."));const{error:s}=i.target;if(!s)return r(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return r(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return r(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return r(new Error("Error while reading a file: Aborted."));default:return r(new Error("Error while reading a file."))}},n.readAsArrayBuffer(t)})}const{PDFDataRangeTransport:WFt}=mFt,GFt=(t,e)=>{switch(e){case sfe.NEED_PASSWORD:{const r=prompt("Enter the password to open this PDF file.");t(r);break}case sfe.INCORRECT_PASSWORD:{const r=prompt("Invalid password. Please try again.");t(r);break}}};function lfe(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const KFt=C.forwardRef(function({children:e,className:r,error:n="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:s,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDF",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:m,onLoadSuccess:x,onPassword:g=GFt,onSourceError:y,onSourceSuccess:w,options:S,renderMode:E,rotate:j,scale:T,...O},I){const[M,D]=TC(),{value:z,error:F}=M,[q,Q]=TC(),{value:re,error:Z}=q,se=C.useRef(new LFt),K=C.useRef([]),X=C.useRef(void 0),Y=C.useRef(void 0);o&&o!==X.current&&lfe(o)&&(Uu(!PE(o,X.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),X.current=o),S&&S!==Y.current&&(Uu(!PE(S,Y.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Y.current=S);const oe=C.useRef({scrollPageIntoView:Ge=>{const{dest:Be,pageNumber:Te,pageIndex:ze=Te-1}=Ge;if(h){h({dest:Be,pageIndex:ze,pageNumber:Te});return}const tt=K.current[ze];if(tt){tt.scrollIntoView();return}Uu(!1,`An internal link leading to page ${Te} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});C.useImperativeHandle(I,()=>({linkService:se,pages:K,viewer:oe}),[]);function xe(){w&&w()}function H(){F&&(Uu(!1,F.toString()),y&&y(F))}function J(){D({type:"RESET"})}C.useEffect(J,[o,D]);const ie=C.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return vK(o)?{data:afe(o)}:(ofe(),{url:o});if(o instanceof WFt)return{range:o};if(UFt(o))return{data:o};if(HB&&zFt(o))return{data:await HFt(o)};if(ts(typeof o=="object"),ts(lfe(o)),"url"in o&&typeof o.url=="string"){if(vK(o.url)){const{url:Ge,...Be}=o;return{data:afe(Ge),...Be}}ofe()}return o},[o]);C.useEffect(()=>{const Ge=XI(ie());return Ge.promise.then(Be=>{D({type:"RESOLVE",value:Be})}).catch(Be=>{D({type:"REJECT",error:Be})}),()=>{sN(Ge)}},[ie,D]),C.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){H();return}xe()}},[z]);function ce(){re&&(x&&x(re),K.current=new Array(re.numPages),se.current.setDocument(re))}function me(){Z&&(Uu(!1,Z.toString()),f&&f(Z))}C.useEffect(function(){Q({type:"RESET"})},[Q,z]),C.useEffect(function(){if(!z)return;const Be=S?{...z,...S}:z,Te=lee(Be);m&&(Te.onProgress=m),g&&(Te.onPassword=g);const ze=Te;return ze.promise.then(tt=>{ze.destroyed||Q({type:"RESOLVE",value:tt})}).catch(tt=>{ze.destroyed||Q({type:"REJECT",error:tt})}),()=>{ze.destroy()}},[S,Q,z]),C.useEffect(()=>{if(!(typeof re>"u")){if(re===!1){me();return}ce()}},[re]),C.useEffect(function(){se.current.setViewer(oe.current),se.current.setExternalLinkRel(i),se.current.setExternalLinkTarget(s)},[i,s]);const he=C.useCallback((Ge,Be)=>{K.current[Ge]=Be},[]),_e=C.useCallback(Ge=>{delete K.current[Ge]},[]),ue=C.useMemo(()=>({imageResourcesPath:c,linkService:se.current,onItemClick:h,pdf:re,registerPage:he,renderMode:E,rotate:j,scale:T,unregisterPage:_e}),[c,h,re,he,E,j,T,_e]),je=C.useMemo(()=>W4e(O,()=>re),[O,re]);function ye(){function Ge(Te){return!!(Te!=null&&Te.pdf)}if(!Ge(ue))throw new Error("pdf is undefined");const Be=typeof e=="function"?e(ue):e;return a.jsx(G4e.Provider,{value:ue,children:Be})}function Le(){return o?re==null?a.jsx(kE,{type:"loading",children:typeof u=="function"?u():u}):re===!1?a.jsx(kE,{type:"error",children:typeof n=="function"?n():n}):ye():a.jsx(kE,{type:"no-data",children:typeof d=="function"?d():d})}return a.jsx("div",{className:Gn("react-pdf__Document",r),ref:l,...je,children:Le()})});function Z4e(){return C.useContext(G4e)}function Q4e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.filter(Boolean);if(r.length<=1){var n=r[0];return n||null}return function(s){for(var o=0,l=r;o<l.length;o++){var c=l[o];typeof c=="function"?c(s):c&&(c.current=s)}}}const J4e=C.createContext(null);function WB(){return C.useContext(J4e)}function XFt(){const t=Z4e(),e=WB();ts(e);const r={...t,...e},{filterAnnotations:n,imageResourcesPath:i,linkService:s,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:d,pdf:h,renderForms:f,rotate:m,scale:x=1}=r;ts(h),ts(d),ts(s);const[g,y]=TC(),{value:w,error:S}=g,E=C.useRef(null);Uu(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function j(){w&&l&&l(w)}function T(){S&&(Uu(!1,S.toString()),o&&o(S))}C.useEffect(function(){y({type:"RESET"})},[y,d]),C.useEffect(function(){if(!d)return;const z=XI(d.getAnnotations()),F=z;return z.promise.then(q=>{y({type:"RESOLVE",value:q})}).catch(q=>{y({type:"REJECT",error:q})}),()=>{sN(F)}},[y,d]),C.useEffect(()=>{if(w!==void 0){if(w===!1){T();return}j()}},[w]);function O(){u&&u()}function I(D){Uu(!1,`${D}`),c&&c(D)}const M=C.useMemo(()=>d.getViewport({scale:x,rotation:m}),[d,m,x]);return C.useEffect(function(){if(!h||!d||!s||!w)return;const{current:z}=E;if(!z)return;const F=M.clone({dontFlip:!0}),q={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:z,l10n:null,linkService:s,page:d,structTreeLayer:null,viewport:F},Q={annotations:n?n({annotations:w}):w,annotationStorage:h.annotationStorage,div:z,imageResourcesPath:i,linkService:s,page:d,renderForms:f,viewport:F};z.innerHTML="";try{new hee(q).render(Q),O()}catch(re){I(re)}return()=>{}},[w,n,i,s,d,h,f,M]),a.jsx("div",{className:Gn("react-pdf__Page__annotations","annotationLayer"),ref:E})}const e3e={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},YFt=/^H(\d+)$/;function ZFt(t){return t in e3e}function GB(t){return"children"in t}function t3e(t){return GB(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function QFt(t){const e={};if(GB(t)){const{role:r}=t,n=r.match(YFt);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(ZFt(r)){const i=e3e[r];i&&(e.role=i)}}return e}function r3e(t){const e={};if(GB(t)){if(t.alt!==void 0&&(e["aria-label"]=t.alt),t.lang!==void 0&&(e.lang=t.lang),t3e(t)){const[r]=t.children;if(r){const n=r3e(r);return{...e,...n}}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function JFt(t){return t?{...QFt(t),...r3e(t)}:null}function n3e({className:t,node:e}){const r=C.useMemo(()=>JFt(e),[e]),n=C.useMemo(()=>!GB(e)||t3e(e)?null:e.children.map((i,s)=>a.jsx(n3e,{node:i},s)),[e]);return a.jsx("span",{className:t,...r,children:n})}function e7t(){const t=WB();ts(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:r}=t,[n,i]=TC(),{value:s,error:o}=n,{customTextRenderer:l,page:c}=t;function u(){s&&r&&r(s)}function d(){o&&(Uu(!1,o.toString()),e&&e(o))}return C.useEffect(function(){i({type:"RESET"})},[i,c]),C.useEffect(function(){if(l||!c)return;const f=XI(c.getStructTree()),m=f;return f.promise.then(x=>{i({type:"RESOLVE",value:x})}).catch(x=>{i({type:"REJECT",error:x})}),()=>sN(m)},[l,c,i]),C.useEffect(()=>{if(s!==void 0){if(s===!1){d();return}u()}},[s]),s?a.jsx(n3e,{className:"react-pdf__Page__structTree structTree",node:s}):null}const cfe=ug;function t7t(t){const e=WB();ts(e);const r={...e,...t},{_className:n,canvasBackground:i,devicePixelRatio:s=VFt(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:d,rotate:h,scale:f}=r,{canvasRef:m}=t;ts(c);const x=C.useRef(null);function g(){c&&l&&l(yK(c,f))}function y(j){Y4e(j)||(Uu(!1,j.toString()),o&&o(j))}const w=C.useMemo(()=>c.getViewport({scale:f*s,rotation:h}),[s,c,h,f]),S=C.useMemo(()=>c.getViewport({scale:f,rotation:h}),[c,h,f]);C.useEffect(function(){if(!c)return;c.cleanup();const{current:T}=x;if(!T)return;T.width=w.width,T.height=w.height,T.style.width=`${Math.floor(S.width)}px`,T.style.height=`${Math.floor(S.height)}px`,T.style.visibility="hidden";const O={annotationMode:u?cfe.ENABLE_FORMS:cfe.ENABLE,canvas:T,canvasContext:T.getContext("2d",{alpha:!1}),viewport:w};i&&(O.background=i);const I=c.render(O),M=I;return I.promise.then(()=>{T.style.visibility="",g()}).catch(y),()=>sN(M)},[i,c,u,w,S]);const E=C.useCallback(()=>{const{current:j}=x;j&&(j.width=0,j.height=0)},[]);return C.useEffect(()=>E,[E]),a.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Q4e(m,x),style:{display:"block",userSelect:"none"},children:d?a.jsx(e7t,{}):null})}function r7t(t){return"str"in t}function n7t(){const t=WB();ts(t);const{customTextRenderer:e,onGetTextError:r,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:s,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:d}=t;ts(o);const[h,f]=TC(),{value:m,error:x}=h,g=C.useRef(null);Uu(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function y(){m&&n&&n(m)}function w(){x&&(Uu(!1,x.toString()),r&&r(x))}C.useEffect(function(){f({type:"RESET"})},[o,f]),C.useEffect(function(){if(!o)return;const M=XI(o.getTextContent()),D=M;return M.promise.then(z=>{f({type:"RESOLVE",value:z})}).catch(z=>{f({type:"REJECT",error:z})}),()=>sN(D)},[o,f]),C.useEffect(()=>{if(m!==void 0){if(m===!1){w();return}y()}},[m]);const S=C.useCallback(()=>{s&&s()},[s]),E=C.useCallback(I=>{Y4e(I)||(Uu(!1,I.toString()),i&&i(I))},[i]);function j(){const I=g.current;I&&I.classList.add("selecting")}function T(){const I=g.current;I&&I.classList.remove("selecting")}const O=C.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return C.useLayoutEffect(function(){if(!o||!m)return;const{current:M}=g;if(!M)return;M.innerHTML="";const D=o.streamTextContent({includeMarkedContent:!0}),z={container:M,textContentSource:D,viewport:O},F=new tk(z),q=F;return F.render().then(()=>{const Q=document.createElement("div");Q.className="endOfContent",M.append(Q);const re=M.querySelectorAll('[role="presentation"]');if(e){let Z=0;m.items.forEach((se,K)=>{if(!r7t(se))return;const X=re[Z];if(!X)return;const Y=e({pageIndex:l,pageNumber:c,itemIndex:K,...se});X.innerHTML=Y,Z+=se.str&&se.hasEOL?2:1})}S()}).catch(E),()=>sN(q)},[e,E,S,o,l,c,m,O]),a.jsx("div",{className:Gn("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:j,ref:g})}const ufe=1;function i7t(t){const r={...Z4e(),...t},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:s,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",filterAnnotations:m,height:x,inputRef:g,loading:y="Loading page",noData:w="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:E,onGetStructTreeError:j,onGetStructTreeSuccess:T,onGetTextError:O,onGetTextSuccess:I,onLoadError:M,onLoadSuccess:D,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:F,onRenderError:q,onRenderSuccess:Q,onRenderTextLayerError:re,onRenderTextLayerSuccess:Z,pageIndex:se,pageNumber:K,pdf:X,registerPage:Y,renderAnnotationLayer:oe=!0,renderForms:xe=!1,renderMode:H="canvas",renderTextLayer:J=!0,rotate:ie,scale:ce=ufe,unregisterPage:me,width:he,..._e}=r,[ue,je]=TC(),{value:ye,error:Le}=ue,Ge=C.useRef(null);ts(X);const Be=hw(K)?K-1:se??null,Te=K??(hw(se)?se+1:null),ze=ie??(ye?ye.rotate:null),tt=C.useMemo(()=>{if(!ye)return null;let Vt=1;const Kt=ce??ufe;if(he||x){const ur=ye.getViewport({scale:1,rotation:ze});he?Vt=he/ur.width:x&&(Vt=x/ur.height)}return Kt*Vt},[x,ye,ze,ce,he]);C.useEffect(function(){return()=>{hw(Be)&&i&&me&&me(Be)}},[i,X,Be,me]);function Re(){if(D){if(!ye||!tt)return;D(yK(ye,tt))}if(i&&Y){if(!hw(Be)||!Ge.current)return;Y(Be,Ge.current)}}function Ue(){Le&&(Uu(!1,Le.toString()),M&&M(Le))}C.useEffect(function(){je({type:"RESET"})},[je,X,Be]),C.useEffect(function(){if(!X||!Te)return;const Kt=XI(X.getPage(Te)),ur=Kt;return Kt.promise.then(rt=>{je({type:"RESOLVE",value:rt})}).catch(rt=>{je({type:"REJECT",error:rt})}),()=>sN(ur)},[je,X,Te]),C.useEffect(()=>{if(ye!==void 0){if(ye===!1){Ue();return}Re()}},[ye,tt]);const xt=C.useMemo(()=>hw(Be)&&Te&&hw(ze)&&hw(tt)?{_className:n,canvasBackground:s,customTextRenderer:d,devicePixelRatio:h,filterAnnotations:m,onGetAnnotationsError:S,onGetAnnotationsSuccess:E,onGetStructTreeError:j,onGetStructTreeSuccess:T,onGetTextError:O,onGetTextSuccess:I,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:F,onRenderError:q,onRenderSuccess:Q,onRenderTextLayerError:re,onRenderTextLayerSuccess:Z,page:ye,pageIndex:Be,pageNumber:Te,renderForms:xe,renderTextLayer:J,rotate:ze,scale:tt}:null,[n,s,d,h,m,S,E,j,T,O,I,z,F,q,Q,re,Z,ye,Be,Te,xe,J,ze,tt]),st=C.useMemo(()=>W4e(_e,()=>ye&&(tt?yK(ye,tt):void 0)),[_e,ye,tt]),Xt=`${Be}@${tt}/${ze}`;function Jt(){switch(H){case"custom":return ts(u),a.jsx(u,{},`${Xt}_custom`);case"none":return null;case"canvas":default:return a.jsx(t7t,{canvasRef:o},`${Xt}_canvas`)}}function _r(){return J?a.jsx(n7t,{},`${Xt}_text`):null}function lt(){return oe?a.jsx(XFt,{},`${Xt}_annotations`):null}function pt(){function Vt(ur){return!!(ur!=null&&ur.page)}if(!Vt(xt))throw new Error("page is undefined");const Kt=typeof l=="function"?l(xt):l;return a.jsxs(J4e.Provider,{value:xt,children:[Jt(),_r(),lt(),Kt]})}function er(){return Te?X===null||ye===void 0||ye===null?a.jsx(kE,{type:"loading",children:typeof y=="function"?y():y}):X===!1||ye===!1?a.jsx(kE,{type:"error",children:typeof f=="function"?f():f}):pt():a.jsx(kE,{type:"no-data",children:typeof w=="function"?w():w})}return a.jsx("div",{className:Gn(n,c),"data-page-number":Te,ref:Q4e(g,Ge),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${tt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...st,children:er()})}qFt();ym.workerSrc="pdf.worker.mjs";ym.workerSrc="/Ciclik_validacoes/pdf.worker.min.mjs";function s7t({pdfUrl:t,titulo:e,onDownload:r}){const[n,i]=C.useState(null),[s,o]=C.useState(1),[l,c]=C.useState(!0),[u,d]=C.useState(null);function h({numPages:y}){i(y),c(!1),d(null)}function f(y){console.error("Erro ao carregar PDF:",y),d("No foi possvel carregar o PDF. Tente novamente mais tarde."),c(!1)}const m=()=>{n&&s<n&&o(y=>y+1)},x=()=>{s>1&&o(y=>y-1)},g=()=>{if(r)r();else{const y=document.createElement("a");y.href=t,y.download=`${e.replace(/\s+/g,"_")}.pdf`,y.click()}};return a.jsxs("div",{className:"w-full max-h-[600px] flex flex-col overflow-hidden border rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 border-b bg-muted/50 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oe,{variant:"outline",size:"sm",onClick:x,disabled:s<=1||l,children:a.jsx(S0e,{className:"h-4 w-4"})}),a.jsx("span",{className:"text-sm text-muted-foreground min-w-[80px] text-center",children:l?"Carregando...":u?"Erro":`${s} / ${n||"?"}`}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:m,disabled:!n||s>=n||l,children:a.jsx(_f,{className:"h-4 w-4"})})]}),a.jsxs(Oe,{variant:"outline",size:"sm",onClick:g,disabled:l||!!u,children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Baixar PDF"]})]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-auto bg-muted/20 p-4",children:a.jsx("div",{className:"flex flex-col items-center",children:u?a.jsxs(ka,{variant:"destructive",className:"max-w-md",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:u})]}):a.jsx(KFt,{file:t,onLoadSuccess:h,onLoadError:f,loading:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando PDF..."})]}),error:a.jsxs(ka,{variant:"destructive",className:"max-w-md",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsx(Oa,{children:"Erro ao carregar o PDF. Verifique sua conexo."})]}),children:a.jsx(i7t,{pageNumber:s,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg",width:Math.min(window.innerWidth*.8,800)})})})}),a.jsx("div",{className:"p-2 border-t bg-muted/50 text-xs text-muted-foreground text-center flex-shrink-0",children:e})]})}function a7t({termo:t,className:e=""}){const r=()=>{window.open(t.pdf_url,"_blank","noopener,noreferrer")};return t.conteudo_html?a.jsx("div",{className:`p-6 ${e}`,children:a.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:t.conteudo_html}})}):a.jsx("div",{className:`p-6 ${e}`,children:a.jsxs(ka,{children:[a.jsx(Ql,{className:"h-4 w-4"}),a.jsxs(Oa,{className:"mt-2",children:[a.jsx("p",{className:"mb-4",children:"O contedo completo deste termo est disponvel no documento PDF."}),t.resumo&&a.jsxs("div",{className:"mb-4 p-3 bg-muted rounded-md",children:[a.jsx("p",{className:"font-medium text-sm mb-2",children:"Resumo:"}),a.jsx("p",{className:"text-sm",children:t.resumo})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs(Oe,{variant:"outline",onClick:r,className:"w-full",children:[a.jsx(kM,{className:"h-4 w-4 mr-2"}),"Abrir PDF em Nova Aba"]}),a.jsx("p",{className:"text-xs text-muted-foreground text-center",children:'Voc pode visualizar o PDF clicando no boto "Ver PDF" acima'})]})]})]})})}function o7t({termos:t,onAceitar:e,onLogout:r,loading:n=!1,error:i=null}){const[s,o]=C.useState({}),[l,c]=C.useState(0),[u,d]=C.useState(!1);if(t.length===0)return null;const h=t[l],f=t.length,x=t.filter(j=>j.obrigatorio).every(j=>s[j.id]===!0),g=s[h.id]===!0,y=(j,T)=>{o(O=>({...O,[j]:T}))},w=()=>{l<f-1&&(c(j=>j+1),d(!1))},S=()=>{l>0&&(c(j=>j-1),d(!1))},E=async()=>{const j=Object.entries(s).filter(([T,O])=>O).map(([T])=>T);await e(j)};return a.jsx(hs,{open:!0,modal:!0,children:a.jsxs(as,{className:"max-w-5xl max-h-[90vh] flex flex-col overflow-hidden",onPointerDownOutside:j=>j.preventDefault(),onEscapeKeyDown:j=>j.preventDefault(),children:[a.jsxs(fs,{className:"flex-shrink-0",children:[a.jsxs(ms,{className:"flex items-center gap-2",children:[a.jsx(Ql,{className:"h-5 w-5"}),"Termos e Polticas - Leitura Obrigatria"]}),a.jsxs(Sl,{children:["Para continuar usando a plataforma, voc deve ler e aceitar os termos abaixo.",f>1&&` (${l+1} de ${f})`]})]}),a.jsx(QJ,{className:"flex-1 overflow-y-auto pr-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"p-4 bg-muted rounded-lg",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:h.titulo}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[h.tipoLabel,"  Verso ",h.versao,h.obrigatorio&&a.jsx("span",{className:"ml-2 text-destructive font-medium",children:"* Obrigatrio"})]}),h.resumo&&a.jsx("p",{className:"text-sm mt-2 text-foreground/80",children:h.resumo})]}),h.pdf_url&&a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>d(!u),children:[u?"Ocultar":"Ver"," PDF"]})]})}),a.jsx("div",{children:u&&h.pdf_url?a.jsx(s7t,{pdfUrl:h.pdf_url,titulo:h.titulo}):a.jsx("div",{className:"border rounded-lg",children:a.jsx(a7t,{termo:h})})}),a.jsx("div",{className:"p-4 border rounded-lg bg-card",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx(MB,{checked:g,onCheckedChange:j=>y(h.id,j===!0),disabled:n,className:"mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:h.obrigatorio?a.jsxs(a.Fragment,{children:["Li e aceito ",h.tipoLabel]}):a.jsxs(a.Fragment,{children:["Li e aceito ",h.tipoLabel," (opcional)"]})}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:h.obrigatorio?" necessrio aceitar este termo para continuar":"Este termo  opcional, mas recomendado"})]})]})})]})}),i&&a.jsxs(ka,{variant:"destructive",className:"flex-shrink-0",children:[a.jsx(Pg,{className:"h-4 w-4"}),a.jsx(Oa,{children:i})]}),f>1&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground flex-shrink-0",children:[a.jsx("div",{className:"flex-1 bg-muted rounded-full h-2",children:a.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${(l+1)/f*100}%`}})}),a.jsxs("span",{className:"whitespace-nowrap",children:[l+1," de ",f]})]}),a.jsxs(If,{className:"flex-col sm:flex-row gap-2 flex-shrink-0",children:[a.jsxs(Oe,{variant:"ghost",onClick:r,disabled:n,className:"sm:mr-auto",children:[a.jsx(wv,{className:"h-4 w-4 mr-2"}),"Sair"]}),f>1&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Oe,{variant:"outline",onClick:S,disabled:l===0||n,children:"Anterior"}),a.jsx(Oe,{variant:"outline",onClick:w,disabled:l===f-1||n,children:"Prximo"})]}),a.jsx(Oe,{onClick:E,disabled:!x||n,className:"min-w-[150px]",children:n?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-4 w-4 mr-2 animate-spin"}),"Processando..."]}):a.jsx(a.Fragment,{children:"Aceitar e Continuar"})})]}),!x&&a.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[a.jsx(Pg,{className:"h-4 w-4 inline mr-1"}),"Voc deve aceitar todos os termos obrigatrios para continuar"]})]})})}function l7t(){const t=nn(),{signOut:e}=Si(),{termosPendentes:r,loading:n,todosAceitos:i}=aBe(),{registrar:s,loading:o,error:l}=d8t({onSucesso:()=>{t("/",{replace:!0})}}),c=async d=>{d.length!==0&&await s(d)},u=async()=>{try{await e(),t("/auth",{replace:!0})}catch(d){console.error("Erro ao fazer logout:",d)}};return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(jn,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando termos de uso..."})]})}):i||r.length===0?(t("/",{replace:!0}),null):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-background border-b",children:a.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center text-primary-foreground font-bold",children:"C"}),a.jsx("span",{className:"font-semibold text-lg",children:"Ciclik"})]}),a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:u,disabled:o,children:[a.jsx(wv,{className:"h-4 w-4 mr-2"}),"Sair"]})]})}),a.jsx("div",{className:"pt-16",children:a.jsx(o7t,{termos:r,onAceitar:c,onLogout:u,loading:o,error:l})})]})}var i3e=["PageUp","PageDown"],s3e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],a3e={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},A5="Slider",[bK,c7t,u7t]=IC(A5),[o3e,y$t]=qo(A5,[u7t]),[d7t,KB]=o3e(A5),l3e=C.forwardRef((t,e)=>{const{name:r,min:n=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:x,...g}=t,y=C.useRef(new Set),w=C.useRef(0),E=o==="horizontal"?h7t:f7t,[j=[],T]=Xu({prop:d,defaultProp:u,onChange:F=>{var Q;(Q=[...y.current][w.current])==null||Q.focus(),h(F)}}),O=C.useRef(j);function I(F){const q=v7t(j,F);z(F,q)}function M(F){z(F,w.current)}function D(){const F=O.current[w.current];j[w.current]!==F&&f(j)}function z(F,q,{commit:Q}={commit:!1}){const re=_7t(s),Z=N7t(Math.round((F-n)/s)*s+n,re),se=k3(Z,[n,i]);T((K=[])=>{const X=g7t(K,se,q);if(w7t(X,c*s)){w.current=X.indexOf(se);const Y=String(X)!==String(K);return Y&&Q&&f(X),Y?X:K}else return K})}return a.jsx(d7t,{scope:t.__scopeSlider,name:r,disabled:l,min:n,max:i,valueIndexToChangeRef:w,thumbs:y.current,values:j,orientation:o,form:x,children:a.jsx(bK.Provider,{scope:t.__scopeSlider,children:a.jsx(bK.Slot,{scope:t.__scopeSlider,children:a.jsx(E,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:e,onPointerDown:wr(g.onPointerDown,()=>{l||(O.current=j)}),min:n,max:i,inverted:m,onSlideStart:l?void 0:I,onSlideMove:l?void 0:M,onSlideEnd:l?void 0:D,onHomeKeyDown:()=>!l&&z(n,0,{commit:!0}),onEndKeyDown:()=>!l&&z(i,j.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:q})=>{if(!l){const Z=i3e.includes(F.key)||F.shiftKey&&s3e.includes(F.key)?10:1,se=w.current,K=j[se],X=s*Z*q;z(K+X,se,{commit:!0})}}})})})})});l3e.displayName=A5;var[c3e,u3e]=o3e(A5,{startEdge:"left",endEdge:"right",size:"width",direction:1}),h7t=C.forwardRef((t,e)=>{const{min:r,max:n,dir:i,inverted:s,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,f]=C.useState(null),m=An(e,E=>f(E)),x=C.useRef(void 0),g=Vb(i),y=g==="ltr",w=y&&!s||!y&&s;function S(E){const j=x.current||h.getBoundingClientRect(),T=[0,j.width],I=pee(T,w?[r,n]:[n,r]);return x.current=j,I(E-j.left)}return a.jsx(c3e,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:a.jsx(d3e,{dir:g,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const j=S(E.clientX);o==null||o(j)},onSlideMove:E=>{const j=S(E.clientX);l==null||l(j)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:E=>{const T=a3e[w?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:T?-1:1})}})})}),f7t=C.forwardRef((t,e)=>{const{min:r,max:n,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=C.useRef(null),h=An(e,d),f=C.useRef(void 0),m=!i;function x(g){const y=f.current||d.current.getBoundingClientRect(),w=[0,y.height],E=pee(w,m?[n,r]:[r,n]);return f.current=y,E(g-y.top)}return a.jsx(c3e,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:a.jsx(d3e,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=x(g.clientY);s==null||s(y)},onSlideMove:g=>{const y=x(g.clientY);o==null||o(y)},onSlideEnd:()=>{f.current=void 0,l==null||l()},onStepKeyDown:g=>{const w=a3e[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:w?-1:1})}})})}),d3e=C.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=KB(A5,r);return a.jsx(Dr.span,{...u,ref:e,onKeyDown:wr(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):i3e.concat(s3e).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:wr(t.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(f)?f.focus():n(h)}),onPointerMove:wr(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:wr(t.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),s(h))})})}),h3e="SliderTrack",f3e=C.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=KB(h3e,r);return a.jsx(Dr.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});f3e.displayName=h3e;var wK="SliderRange",m3e=C.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=KB(wK,r),s=u3e(wK,r),o=C.useRef(null),l=An(e,o),c=i.values.length,u=i.values.map(f=>x3e(f,i.min,i.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return a.jsx(Dr.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:l,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:h+"%"}})});m3e.displayName=wK;var _K="SliderThumb",p3e=C.forwardRef((t,e)=>{const r=c7t(t.__scopeSlider),[n,i]=C.useState(null),s=An(e,l=>i(l)),o=C.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return a.jsx(m7t,{...t,ref:s,index:o})}),m7t=C.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:i,...s}=t,o=KB(_K,r),l=u3e(_K,r),[c,u]=C.useState(null),d=An(e,S=>u(S)),h=c?o.form||!!c.closest("form"):!0,f=YO(c),m=o.values[n],x=m===void 0?0:x3e(m,o.min,o.max),g=x7t(n,o.values.length),y=f==null?void 0:f[l.size],w=y?y7t(y,x,l.direction):0;return C.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${w}px)`},children:[a.jsx(bK.ItemSlot,{scope:t.__scopeSlider,children:a.jsx(Dr.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:d,style:m===void 0?{display:"none"}:t.style,onFocus:wr(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&a.jsx(g3e,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});p3e.displayName=_K;var p7t="RadioBubbleInput",g3e=C.forwardRef(({__scopeSlider:t,value:e,...r},n)=>{const i=C.useRef(null),s=An(i,n),o=tI(e);return C.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("input",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),a.jsx(Dr.input,{style:{display:"none"},...r,ref:s,defaultValue:e})});g3e.displayName=p7t;function g7t(t=[],e,r){const n=[...t];return n[r]=e,n.sort((i,s)=>i-s)}function x3e(t,e,r){const s=100/(r-e)*(t-e);return k3(s,[0,100])}function x7t(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function v7t(t,e){if(t.length===1)return 0;const r=t.map(i=>Math.abs(i-e)),n=Math.min(...r);return r.indexOf(n)}function y7t(t,e,r){const n=t/2,s=pee([0,50],[0,n]);return(n-s(e)*r)*r}function b7t(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function w7t(t,e){if(e>0){const r=b7t(t);return Math.min(...r)>=e}return!0}function pee(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function _7t(t){return(String(t).split(".")[1]||"").length}function N7t(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var v3e=l3e,S7t=f3e,E7t=m3e,j7t=p3e;const tE=C.forwardRef(({className:t,...e},r)=>a.jsxs(v3e,{ref:r,className:Ut("relative flex w-full touch-none select-none items-center",t),...e,children:[a.jsx(S7t,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(E7t,{className:"absolute h-full bg-primary"})}),a.jsx(j7t,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));tE.displayName=v3e.displayName;var y3e={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(pm,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(M){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(D){var z=T(D);z.chunkSize=parseInt(z.chunkSize),D.step||D.chunk||(z.chunkSize=null),this._handle=new g(z),(this._handle.streamer=this)._config=z}).call(this,M),this.parseChunk=function(D,z){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let Q=this._config.newline;Q||(q=this._config.quoteChar||'"',Q=this._handle.guessLineEndings(D,q)),D=[...D.split(Q).slice(F)].join(Q)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(q=this._config.beforeFirstChunk(D))!==void 0&&(D=q),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+D,q=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(D=q.meta.cursor,F=(this._finished||(this._partialLine=F.substring(D-this._baseIndex),this._baseIndex=D),q&&q.data&&(this._rowCount+=q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)n.postMessage({results:q,workerId:u.WORKER_ID,finished:F});else if(I(this._config.chunk)&&!z){if(this._config.chunk(q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(q.data),this._completeResults.errors=this._completeResults.errors.concat(q.errors),this._completeResults.meta=q.meta),this._completed||!F||!I(this._config.complete)||q&&q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||q&&q.meta.paused||this._nextChunk(),q}this._halted=!0},this._sendError=function(D){I(this._config.error)?this._config.error(D):o&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:D,finished:!1})}}function h(M){var D;(M=M||{}).chunkSize||(M.chunkSize=u.RemoteChunkSize),d.call(this,M),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(D=new XMLHttpRequest,this._config.withCredentials&&(D.withCredentials=this._config.withCredentials),s||(D.onload=O(this._chunkLoaded,this),D.onerror=O(this._chunkError,this)),D.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var z,F=this._config.downloadRequestHeaders;for(z in F)D.setRequestHeader(z,F[z])}var q;this._config.chunkSize&&(q=this._start+this._config.chunkSize-1,D.setRequestHeader("Range","bytes="+this._start+"-"+q));try{D.send(this._config.downloadRequestBody)}catch(Q){this._chunkError(Q.message)}s&&D.status===0&&this._chunkError()}},this._chunkLoaded=function(){D.readyState===4&&(D.status<200||400<=D.status?this._chunkError():(this._start+=this._config.chunkSize||D.responseText.length,this._finished=!this._config.chunkSize||this._start>=(z=>(z=z.getResponseHeader("Content-Range"))!==null?parseInt(z.substring(z.lastIndexOf("/")+1)):-1)(D),this.parseChunk(D.responseText)))},this._chunkError=function(z){z=D.statusText||z,this._sendError(new Error(z))}}function f(M){(M=M||{}).chunkSize||(M.chunkSize=u.LocalChunkSize),d.call(this,M);var D,z,F=typeof FileReader<"u";this.stream=function(q){this._input=q,z=q.slice||q.webkitSlice||q.mozSlice,F?((D=new FileReader).onload=O(this._chunkLoaded,this),D.onerror=O(this._chunkError,this)):D=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var q=this._input,Q=(this._config.chunkSize&&(Q=Math.min(this._start+this._config.chunkSize,this._input.size),q=z.call(q,this._start,Q)),D.readAsText(q,this._config.encoding));F||this._chunkLoaded({target:{result:Q}})},this._chunkLoaded=function(q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(q.target.result)},this._chunkError=function(){this._sendError(D.error)}}function m(M){var D;d.call(this,M=M||{}),this.stream=function(z){return D=z,this._nextChunk()},this._nextChunk=function(){var z,F;if(!this._finished)return z=this._config.chunkSize,D=z?(F=D.substring(0,z),D.substring(z)):(F=D,""),this._finished=!D,this.parseChunk(F)}}function x(M){d.call(this,M=M||{});var D=[],z=!0,F=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(q){this._input=q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&D.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),D.length?this.parseChunk(D.shift()):z=!0},this._streamData=O(function(q){try{D.push(typeof q=="string"?q:q.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(D.shift()))}catch(Q){this._streamError(Q)}},this),this._streamError=O(function(q){this._streamCleanUp(),this._sendError(q)},this),this._streamEnd=O(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(M){var D,z,F,q,Q=Math.pow(2,53),re=-Q,Z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,K=this,X=0,Y=0,oe=!1,xe=!1,H=[],J={data:[],errors:[],meta:{}};function ie(_e){return M.skipEmptyLines==="greedy"?_e.join("").trim()==="":_e.length===1&&_e[0].length===0}function ce(){if(J&&F&&(he("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),F=!1),M.skipEmptyLines&&(J.data=J.data.filter(function(ye){return!ie(ye)})),me()){let ye=function(Le,Ge){I(M.transformHeader)&&(Le=M.transformHeader(Le,Ge)),H.push(Le)};if(J)if(Array.isArray(J.data[0])){for(var _e=0;me()&&_e<J.data.length;_e++)J.data[_e].forEach(ye);J.data.splice(0,1)}else J.data.forEach(ye)}function ue(ye,Le){for(var Ge=M.header?{}:[],Be=0;Be<ye.length;Be++){var Te=Be,ze=ye[Be],ze=((tt,Re)=>(Ue=>(M.dynamicTypingFunction&&M.dynamicTyping[Ue]===void 0&&(M.dynamicTyping[Ue]=M.dynamicTypingFunction(Ue)),(M.dynamicTyping[Ue]||M.dynamicTyping)===!0))(tt)?Re==="true"||Re==="TRUE"||Re!=="false"&&Re!=="FALSE"&&((Ue=>{if(Z.test(Ue)&&(Ue=parseFloat(Ue),re<Ue&&Ue<Q))return 1})(Re)?parseFloat(Re):se.test(Re)?new Date(Re):Re===""?null:Re):Re)(Te=M.header?Be>=H.length?"__parsed_extra":H[Be]:Te,ze=M.transform?M.transform(ze,Te):ze);Te==="__parsed_extra"?(Ge[Te]=Ge[Te]||[],Ge[Te].push(ze)):Ge[Te]=ze}return M.header&&(Be>H.length?he("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+Be,Y+Le):Be<H.length&&he("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+Be,Y+Le)),Ge}var je;J&&(M.header||M.dynamicTyping||M.transform)&&(je=1,!J.data.length||Array.isArray(J.data[0])?(J.data=J.data.map(ue),je=J.data.length):J.data=ue(J.data,0),M.header&&J.meta&&(J.meta.fields=H),Y+=je)}function me(){return M.header&&H.length===0}function he(_e,ue,je,ye){_e={type:_e,code:ue,message:je},ye!==void 0&&(_e.row=ye),J.errors.push(_e)}I(M.step)&&(q=M.step,M.step=function(_e){J=_e,me()?ce():(ce(),J.data.length!==0&&(X+=_e.data.length,M.preview&&X>M.preview?z.abort():(J.data=J.data[0],q(J,K))))}),this.parse=function(_e,ue,je){var ye=M.quoteChar||'"',ye=(M.newline||(M.newline=this.guessLineEndings(_e,ye)),F=!1,M.delimiter?I(M.delimiter)&&(M.delimiter=M.delimiter(_e),J.meta.delimiter=M.delimiter):((ye=((Le,Ge,Be,Te,ze)=>{var tt,Re,Ue,xt;ze=ze||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var st=0;st<ze.length;st++){for(var Xt,Jt=ze[st],_r=0,lt=0,pt=0,er=(Ue=void 0,new w({comments:Te,delimiter:Jt,newline:Ge,preview:10}).parse(Le)),Vt=0;Vt<er.data.length;Vt++)Be&&ie(er.data[Vt])?pt++:(Xt=er.data[Vt].length,lt+=Xt,Ue===void 0?Ue=Xt:0<Xt&&(_r+=Math.abs(Xt-Ue),Ue=Xt));0<er.data.length&&(lt/=er.data.length-pt),(Re===void 0||_r<=Re)&&(xt===void 0||xt<lt)&&1.99<lt&&(Re=_r,tt=Jt,xt=lt)}return{successful:!!(M.delimiter=tt),bestDelimiter:tt}})(_e,M.newline,M.skipEmptyLines,M.comments,M.delimitersToGuess)).successful?M.delimiter=ye.bestDelimiter:(F=!0,M.delimiter=u.DefaultDelimiter),J.meta.delimiter=M.delimiter),T(M));return M.preview&&M.header&&ye.preview++,D=_e,z=new w(ye),J=z.parse(D,ue,je),ce(),oe?{meta:{paused:!0}}:J||{meta:{paused:!1}}},this.paused=function(){return oe},this.pause=function(){oe=!0,z.abort(),D=I(M.chunk)?"":D.substring(z.getCharIndex())},this.resume=function(){K.streamer._halted?(oe=!1,K.streamer.parseChunk(D,!0)):setTimeout(K.resume,3)},this.aborted=function(){return xe},this.abort=function(){xe=!0,z.abort(),J.meta.aborted=!0,I(M.complete)&&M.complete(J),D=""},this.guessLineEndings=function(Le,ye){Le=Le.substring(0,1048576);var ye=new RegExp(y(ye)+"([^]*?)"+y(ye),"gm"),je=(Le=Le.replace(ye,"")).split("\r"),ye=Le.split(`
`),Le=1<ye.length&&ye[0].length<je[0].length;if(je.length===1||Le)return`
`;for(var Ge=0,Be=0;Be<je.length;Be++)je[Be][0]===`
`&&Ge++;return Ge>=je.length/2?`\r
`:"\r"}}function y(M){return M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(M){var D=(M=M||{}).delimiter,z=M.newline,F=M.comments,q=M.step,Q=M.preview,re=M.fastMode,Z=null,se=!1,K=M.quoteChar==null?'"':M.quoteChar,X=K;if(M.escapeChar!==void 0&&(X=M.escapeChar),(typeof D!="string"||-1<u.BAD_DELIMITERS.indexOf(D))&&(D=","),F===D)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<u.BAD_DELIMITERS.indexOf(F))&&(F=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var Y=0,oe=!1;this.parse=function(xe,H,J){if(typeof xe!="string")throw new Error("Input must be a string");var ie=xe.length,ce=D.length,me=z.length,he=F.length,_e=I(q),ue=[],je=[],ye=[],Le=Y=0;if(!xe)return _r();if(re||re!==!1&&xe.indexOf(K)===-1){for(var Ge=xe.split(z),Be=0;Be<Ge.length;Be++){if(ye=Ge[Be],Y+=ye.length,Be!==Ge.length-1)Y+=z.length;else if(J)return _r();if(!F||ye.substring(0,he)!==F){if(_e){if(ue=[],xt(ye.split(D)),lt(),oe)return _r()}else xt(ye.split(D));if(Q&&Q<=Be)return ue=ue.slice(0,Q),_r(!0)}}return _r()}for(var Te=xe.indexOf(D,Y),ze=xe.indexOf(z,Y),tt=new RegExp(y(X)+y(K),"g"),Re=xe.indexOf(K,Y);;)if(xe[Y]===K)for(Re=Y,Y++;;){if((Re=xe.indexOf(K,Re+1))===-1)return J||je.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ue.length,index:Y}),Xt();if(Re===ie-1)return Xt(xe.substring(Y,Re).replace(tt,K));if(K===X&&xe[Re+1]===X)Re++;else if(K===X||Re===0||xe[Re-1]!==X){Te!==-1&&Te<Re+1&&(Te=xe.indexOf(D,Re+1));var Ue=st((ze=ze!==-1&&ze<Re+1?xe.indexOf(z,Re+1):ze)===-1?Te:Math.min(Te,ze));if(xe.substr(Re+1+Ue,ce)===D){ye.push(xe.substring(Y,Re).replace(tt,K)),xe[Y=Re+1+Ue+ce]!==K&&(Re=xe.indexOf(K,Y)),Te=xe.indexOf(D,Y),ze=xe.indexOf(z,Y);break}if(Ue=st(ze),xe.substring(Re+1+Ue,Re+1+Ue+me)===z){if(ye.push(xe.substring(Y,Re).replace(tt,K)),Jt(Re+1+Ue+me),Te=xe.indexOf(D,Y),Re=xe.indexOf(K,Y),_e&&(lt(),oe))return _r();if(Q&&ue.length>=Q)return _r(!0);break}je.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ue.length,index:Y}),Re++}}else if(F&&ye.length===0&&xe.substring(Y,Y+he)===F){if(ze===-1)return _r();Y=ze+me,ze=xe.indexOf(z,Y),Te=xe.indexOf(D,Y)}else if(Te!==-1&&(Te<ze||ze===-1))ye.push(xe.substring(Y,Te)),Y=Te+ce,Te=xe.indexOf(D,Y);else{if(ze===-1)break;if(ye.push(xe.substring(Y,ze)),Jt(ze+me),_e&&(lt(),oe))return _r();if(Q&&ue.length>=Q)return _r(!0)}return Xt();function xt(pt){ue.push(pt),Le=Y}function st(pt){var er=0;return er=pt!==-1&&(pt=xe.substring(Re+1,pt))&&pt.trim()===""?pt.length:er}function Xt(pt){return J||(pt===void 0&&(pt=xe.substring(Y)),ye.push(pt),Y=ie,xt(ye),_e&&lt()),_r()}function Jt(pt){Y=pt,xt(ye),ye=[],ze=xe.indexOf(z,Y)}function _r(pt){if(M.header&&!H&&ue.length&&!se){var er=ue[0],Vt=Object.create(null),Kt=new Set(er);let ur=!1;for(let rt=0;rt<er.length;rt++){let Lt=er[rt];if(Vt[Lt=I(M.transformHeader)?M.transformHeader(Lt,rt):Lt]){let Dt,Fe=Vt[Lt];for(;Dt=Lt+"_"+Fe,Fe++,Kt.has(Dt););Kt.add(Dt),er[rt]=Dt,Vt[Lt]++,ur=!0,(Z=Z===null?{}:Z)[Dt]=Lt}else Vt[Lt]=1,er[rt]=Lt;Kt.add(Lt)}ur&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:ue,errors:je,meta:{delimiter:D,linebreak:z,aborted:oe,truncated:!!pt,cursor:Le+(H||0),renamedHeaders:Z}}}function lt(){q(_r()),ue=[],je=[]}},this.abort=function(){oe=!0},this.getCharIndex=function(){return Y}}function S(M){var D=M.data,z=l[D.workerId],F=!1;if(D.error)z.userError(D.error,D.file);else if(D.results&&D.results.data){var q={abort:function(){F=!0,E(D.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(I(z.userStep)){for(var Q=0;Q<D.results.data.length&&(z.userStep({data:D.results.data[Q],errors:D.results.errors,meta:D.results.meta},q),!F);Q++);delete D.results}else I(z.userChunk)&&(z.userChunk(D.results,q,D.file),delete D.results)}D.finished&&!F&&E(D.workerId,D.results)}function E(M,D){var z=l[M];I(z.userComplete)&&z.userComplete(D),z.terminate(),delete l[M]}function j(){throw new Error("Not implemented.")}function T(M){if(typeof M!="object"||M===null)return M;var D,z=Array.isArray(M)?[]:{};for(D in M)z[D]=T(M[D]);return z}function O(M,D){return function(){M.apply(D,arguments)}}function I(M){return typeof M=="function"}return u.parse=function(M,D){var z=(D=D||{}).dynamicTyping||!1;if(I(z)&&(D.dynamicTypingFunction=z,z={}),D.dynamicTyping=z,D.transform=!!I(D.transform)&&D.transform,!D.worker||!u.WORKERS_SUPPORTED)return z=null,u.NODE_STREAM_INPUT,typeof M=="string"?(M=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(M),z=new(D.download?h:m)(D)):M.readable===!0&&I(M.read)&&I(M.on)?z=new x(D):(n.File&&M instanceof File||M instanceof Object)&&(z=new f(D)),z.stream(M);(z=(()=>{var F;return!!u.WORKERS_SUPPORTED&&(F=(()=>{var q=n.URL||n.webkitURL||null,Q=r.toString();return u.BLOB_URL||(u.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Q,")();"],{type:"text/javascript"})))})(),(F=new n.Worker(F)).onmessage=S,F.id=c++,l[F.id]=F)})()).userStep=D.step,z.userChunk=D.chunk,z.userComplete=D.complete,z.userError=D.error,D.step=I(D.step),D.chunk=I(D.chunk),D.complete=I(D.complete),D.error=I(D.error),delete D.worker,z.postMessage({input:M,config:D,workerId:z.id})},u.unparse=function(M,D){var z=!1,F=!0,q=",",Q=`\r
`,re='"',Z=re+re,se=!1,K=null,X=!1,Y=((()=>{if(typeof D=="object"){if(typeof D.delimiter!="string"||u.BAD_DELIMITERS.filter(function(H){return D.delimiter.indexOf(H)!==-1}).length||(q=D.delimiter),typeof D.quotes!="boolean"&&typeof D.quotes!="function"&&!Array.isArray(D.quotes)||(z=D.quotes),typeof D.skipEmptyLines!="boolean"&&typeof D.skipEmptyLines!="string"||(se=D.skipEmptyLines),typeof D.newline=="string"&&(Q=D.newline),typeof D.quoteChar=="string"&&(re=D.quoteChar),typeof D.header=="boolean"&&(F=D.header),Array.isArray(D.columns)){if(D.columns.length===0)throw new Error("Option columns is empty");K=D.columns}D.escapeChar!==void 0&&(Z=D.escapeChar+re),D.escapeFormulae instanceof RegExp?X=D.escapeFormulae:typeof D.escapeFormulae=="boolean"&&D.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(re),"g"));if(typeof M=="string"&&(M=JSON.parse(M)),Array.isArray(M)){if(!M.length||Array.isArray(M[0]))return oe(null,M,se);if(typeof M[0]=="object")return oe(K||Object.keys(M[0]),M,se)}else if(typeof M=="object")return typeof M.data=="string"&&(M.data=JSON.parse(M.data)),Array.isArray(M.data)&&(M.fields||(M.fields=M.meta&&M.meta.fields||K),M.fields||(M.fields=Array.isArray(M.data[0])?M.fields:typeof M.data[0]=="object"?Object.keys(M.data[0]):[]),Array.isArray(M.data[0])||typeof M.data[0]=="object"||(M.data=[M.data])),oe(M.fields||[],M.data||[],se);throw new Error("Unable to serialize unrecognized input");function oe(H,J,ie){var ce="",me=(typeof H=="string"&&(H=JSON.parse(H)),typeof J=="string"&&(J=JSON.parse(J)),Array.isArray(H)&&0<H.length),he=!Array.isArray(J[0]);if(me&&F){for(var _e=0;_e<H.length;_e++)0<_e&&(ce+=q),ce+=xe(H[_e],_e);0<J.length&&(ce+=Q)}for(var ue=0;ue<J.length;ue++){var je=(me?H:J[ue]).length,ye=!1,Le=me?Object.keys(J[ue]).length===0:J[ue].length===0;if(ie&&!me&&(ye=ie==="greedy"?J[ue].join("").trim()==="":J[ue].length===1&&J[ue][0].length===0),ie==="greedy"&&me){for(var Ge=[],Be=0;Be<je;Be++){var Te=he?H[Be]:Be;Ge.push(J[ue][Te])}ye=Ge.join("").trim()===""}if(!ye){for(var ze=0;ze<je;ze++){0<ze&&!Le&&(ce+=q);var tt=me&&he?H[ze]:ze;ce+=xe(J[ue][tt],ze)}ue<J.length-1&&(!ie||0<je&&!Le)&&(ce+=Q)}}return ce}function xe(H,J){var ie,ce;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(ce=!1,X&&typeof H=="string"&&X.test(H)&&(H="'"+H,ce=!0),ie=H.toString().replace(Y,Z),(ce=ce||z===!0||typeof z=="function"&&z(H,J)||Array.isArray(z)&&z[J]||((me,he)=>{for(var _e=0;_e<he.length;_e++)if(-1<me.indexOf(he[_e]))return!0;return!1})(ie,u.BAD_DELIMITERS)||-1<ie.indexOf(q)||ie.charAt(0)===" "||ie.charAt(ie.length-1)===" ")?re+ie+re:ie)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=w,u.ParserHandle=g,u.NetworkStreamer=h,u.FileStreamer=f,u.StringStreamer=m,u.ReadableStreamStreamer=x,n.jQuery&&((i=n.jQuery).fn.parse=function(M){var D=M.config||{},z=[];return this.each(function(Q){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var re=0;re<this.files.length;re++)z.push({file:this.files[re],inputElem:this,instanceConfig:i.extend({},D)})}),F(),this;function F(){if(z.length===0)I(M.complete)&&M.complete();else{var Q,re,Z,se,K=z[0];if(I(M.before)){var X=M.before(K.file,K.inputElem);if(typeof X=="object"){if(X.action==="abort")return Q="AbortError",re=K.file,Z=K.inputElem,se=X.reason,void(I(M.error)&&M.error({name:Q},re,Z,se));if(X.action==="skip")return void q();typeof X.config=="object"&&(K.instanceConfig=i.extend(K.instanceConfig,X.config))}else if(X==="skip")return void q()}var Y=K.instanceConfig.complete;K.instanceConfig.complete=function(oe){I(Y)&&Y(oe,K.file,K.inputElem),q()},u.parse(K.file,K.instanceConfig)}}function q(){z.splice(0,1),F()}}),o&&(n.onmessage=function(M){M=M.data,u.WORKER_ID===void 0&&M&&(u.WORKER_ID=M.workerId),typeof M.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(M.input,M.config),finished:!0}):(n.File&&M.input instanceof File||M.input instanceof Object)&&(M=u.parse(M.input,M.config))&&n.postMessage({workerId:u.WORKER_ID,results:M,finished:!0})}),(h.prototype=Object.create(d.prototype)).constructor=h,(f.prototype=Object.create(d.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(x.prototype=Object.create(d.prototype)).constructor=x,u})})(y3e);var A7t=y3e.exports;const C7t=Vi(A7t),T7t=_ve({gtin:Ru().trim().min(8,"GTIN deve ter no mnimo 8 dgitos").max(14,"GTIN deve ter no mximo 14 dgitos"),ncm:Ru().trim().length(8,"NCM deve ter exatamente 8 dgitos"),descricao:Ru().trim().min(3,"Descrio deve ter no mnimo 3 caracteres").max(200,"Descrio muito longa"),tipo_embalagem:uq(["vidro","plastico","papel","papelao","aluminio","laminado","misto"]),reciclavel:uq(["sim","nao","true","false","1","0","Sim","No","SIM","NO"]),percentual_reciclabilidade:Ru().refine(t=>{const e=parseFloat(t);return!isNaN(e)&&e>=0&&e<=100},"Percentual deve ser entre 0 e 100"),observacoes:Ru().trim().max(500,"Observaes muito longas").optional()});function P7t({open:t,onOpenChange:e,onSuccess:r}){const[n,i]=C.useState(null),[s,o]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(0),{toast:h}=Qi(),f=()=>{const S=["gtin,ncm,descricao,tipo_embalagem,reciclavel,percentual_reciclabilidade,observacoes","7891234567890,12345678,Garrafa PET 2L,plastico,sim,85,Embalagem reciclvel","7891234567891,12345679,Caixa de Papelo,papelao,sim,95,","7891234567892,12345680,Lata de Alumnio,aluminio,sim,100,100% reciclvel"].join(`
`),E=new Blob([S],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(E),j.download="template_produtos_ciclik.csv",j.click(),URL.revokeObjectURL(j.href)},m=S=>{const E=S.toLowerCase().trim();return["sim","true","1","yes"].includes(E)},x=S=>{const E=[],j=[];return S.forEach((T,O)=>{const I=[];try{T7t.parse(T),/^\d+$/.test(T.gtin)||I.push("GTIN deve conter apenas nmeros"),/^\d{8}$/.test(T.ncm)||I.push("NCM deve ter 8 dgitos numricos"),I.length===0?E.push(T):j.push({row:O+2,data:T,errors:I})}catch(M){M instanceof Og&&M.errors.forEach(D=>{I.push(`${D.path.join(".")}: ${D.message}`)}),j.push({row:O+2,data:T,errors:I})}}),{valid:E,invalid:j}},g=S=>{var j;const E=(j=S.target.files)==null?void 0:j[0];if(E){if(!E.name.endsWith(".csv")){h({title:"Formato invlido",description:"Por favor, selecione um arquivo CSV",variant:"destructive"});return}i(E),o(null),C7t.parse(E,{header:!0,skipEmptyLines:!0,complete:T=>{if(T.data.length===0){h({title:"Arquivo vazio",description:"O arquivo CSV no contm dados",variant:"destructive"});return}const O=x(T.data);o(O),O.invalid.length>0?h({title:"Erros de validao",description:`${O.invalid.length} produto(s) com erro. Revise antes de importar.`,variant:"destructive"}):h({title:"Validao concluda",description:`${O.valid.length} produto(s) validado(s) com sucesso`})},error:T=>{h({title:"Erro ao ler arquivo",description:T.message,variant:"destructive"})}})}},y=async()=>{if(!(!s||s.valid.length===0)){c(!0),d(0);try{const S=s.valid.map(O=>{var I;return{gtin:O.gtin.trim(),ncm:O.ncm.trim(),descricao:O.descricao.trim(),tipo_embalagem:O.tipo_embalagem,reciclavel:m(O.reciclavel),percentual_reciclabilidade:parseFloat(O.percentual_reciclabilidade),observacoes:((I=O.observacoes)==null?void 0:I.trim())||null}}),E=50;let j=0;const T=[];for(let O=0;O<S.length;O+=E){const I=S.slice(O,O+E),{error:M}=await Ee.from("produtos_ciclik").insert(I);if(M)if(M.code==="23505")for(const D of I){const{error:z}=await Ee.from("produtos_ciclik").insert([D]);z?T.push(`GTIN ${D.gtin}: ${z.message}`):j++}else throw M;else j+=I.length;d(Math.round((O+I.length)/S.length*100))}h({title:"Importao concluda",description:`${j} produto(s) importado(s) com sucesso${T.length>0?`. ${T.length} erro(s) encontrado(s)`:""}`}),r(),w()}catch(S){console.error("Erro na importao:",S),h({title:"Erro na importao",description:S.message||"No foi possvel importar os produtos",variant:"destructive"})}finally{c(!1),d(0)}}},w=()=>{i(null),o(null),d(0),e(!1)};return a.jsx(hs,{open:t,onOpenChange:w,children:a.jsxs(as,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Importar Produtos via CSV"}),a.jsx(Sl,{children:"Faa upload de um arquivo CSV com os dados dos produtos Ciclik"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ka,{children:[a.jsx(ou,{className:"h-4 w-4"}),a.jsxs(Oa,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Baixe o template CSV com o formato correto"}),a.jsxs(Oe,{variant:"outline",size:"sm",onClick:f,children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Baixar Template"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"csv-upload",children:"Arquivo CSV"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mt,{id:"csv-upload",type:"file",accept:".csv",onChange:g,disabled:l,className:"flex-1"}),n&&a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>{i(null),o(null)},disabled:l,children:a.jsx(Xa,{className:"h-4 w-4"})})]})]}),l&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Importando produtos..."}),a.jsx(fc,{value:u}),a.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:[u,"%"]})]}),s&&!l&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs(ka,{className:"flex-1",children:[a.jsx(au,{className:"h-4 w-4 text-green-500"}),a.jsxs(Oa,{children:[a.jsx("strong",{children:s.valid.length})," produto(s) vlido(s)"]})]}),s.invalid.length>0&&a.jsxs(ka,{className:"flex-1",variant:"destructive",children:[a.jsx(Za,{className:"h-4 w-4"}),a.jsxs(Oa,{children:[a.jsx("strong",{children:s.invalid.length})," produto(s) com erro(s)"]})]})]}),s.valid.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Produtos Vlidos (primeiros 5)"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"GTIN"}),a.jsx(It,{children:"NCM"}),a.jsx(It,{children:"Descrio"}),a.jsx(It,{children:"Tipo"}),a.jsx(It,{children:"Reciclvel"})]})}),a.jsx(to,{children:s.valid.slice(0,5).map((S,E)=>a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-mono text-sm",children:S.gtin}),a.jsx(jt,{className:"font-mono text-sm",children:S.ncm}),a.jsx(jt,{children:S.descricao}),a.jsx(jt,{children:a.jsx(Bt,{variant:"secondary",children:Ip[S.tipo_embalagem]})}),a.jsx(jt,{children:m(S.reciclavel)?a.jsxs(Bt,{variant:"outline",className:"bg-green-50 text-green-700",children:["Sim (",S.percentual_reciclabilidade,"%)"]}):a.jsx(Bt,{variant:"outline",children:"No"})})]},E))})]})}),s.valid.length>5&&a.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["+ ",s.valid.length-5," produto(s) adicionais"]})]}),s.invalid.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{className:"text-destructive",children:"Produtos com Erros"}),a.jsx("div",{className:"border border-destructive rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto",children:s.invalid.map((S,E)=>a.jsxs("div",{className:"border-b pb-2 last:border-0",children:[a.jsxs("p",{className:"text-sm font-semibold",children:["Linha ",S.row]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["GTIN: ",S.data.gtin," | ",S.data.descricao]}),a.jsx("ul",{className:"text-sm text-destructive list-disc list-inside",children:S.errors.map((j,T)=>a.jsx("li",{children:j},T))})]},E))})]})]})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:w,disabled:l,children:"Cancelar"}),a.jsx(Oe,{onClick:y,disabled:!s||s.valid.length===0||l,children:l?a.jsx(a.Fragment,{children:"Importando..."}):a.jsxs(a.Fragment,{children:[a.jsx(x3,{className:"h-4 w-4 mr-2"}),"Importar ",(s==null?void 0:s.valid.length)||0," Produto(s)"]})})]})]})})}function k7t(){const t=nn(),[e,r]=C.useState([]),[n,i]=C.useState([]),[s,o]=C.useState(""),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[h,f]=C.useState(!1),[m,x]=C.useState(null),[g,y]=C.useState(null),[w,S]=C.useState(!1),[E,j]=C.useState(!1),{toast:T}=Qi(),[O,I]=C.useState(!1),[M,D]=C.useState("all"),[z,F]=C.useState("all"),[q,Q]=C.useState(0),[re,Z]=C.useState(100),[se,K]=C.useState({gtin:"",ncm:"",descricao:"",tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,peso_medio_gramas:null,observacoes:"",embalagens:[]}),X=ze=>ze?parseFloat((ze/1e3).toFixed(3)):null,Y=ze=>ze?parseFloat((ze*1e3).toFixed(2)):null,[oe,xe]=C.useState({tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,peso_medio_gramas:null}),[H,J]=C.useState({total:0,reciclaveis:0,vidro:0,plastico:0,papel:0,papelao:0,aluminio:0,laminado:0,misto:0});C.useEffect(()=>{ce()},[]),C.useEffect(()=>{let ze=e.filter(tt=>tt.gtin.toLowerCase().includes(s.toLowerCase())||tt.ncm.toLowerCase().includes(s.toLowerCase())||tt.descricao.toLowerCase().includes(s.toLowerCase()));M!=="all"&&(ze=ze.filter(tt=>tt.tipo_embalagem===M)),z!=="all"&&(ze=ze.filter(tt=>z==="yes"?tt.reciclavel:!tt.reciclavel)),ze=ze.filter(tt=>tt.percentual_reciclabilidade>=q&&tt.percentual_reciclabilidade<=re),i(ze)},[s,e,M,z,q,re]),C.useEffect(()=>{ie()},[e]);const ie=()=>{const ze={total:e.length,reciclaveis:e.filter(tt=>tt.reciclavel).length,vidro:e.filter(tt=>tt.tipo_embalagem==="vidro").length,plastico:e.filter(tt=>tt.tipo_embalagem==="plastico").length,papel:e.filter(tt=>tt.tipo_embalagem==="papel").length,papelao:e.filter(tt=>tt.tipo_embalagem==="papelao").length,aluminio:e.filter(tt=>tt.tipo_embalagem==="aluminio").length,laminado:e.filter(tt=>tt.tipo_embalagem==="laminado").length,misto:e.filter(tt=>tt.tipo_embalagem==="misto").length};J(ze)},ce=async()=>{S(!0);try{const{data:ze,error:tt}=await Ee.from("produtos_ciclik").select("*").order("descricao");if(tt)throw tt;r(ze)}catch(ze){console.error("Erro ao carregar produtos:",ze),T({title:"Erro",description:"No foi possvel carregar os produtos",variant:"destructive"})}finally{S(!1)}},me=()=>{K({gtin:"",ncm:"",descricao:"",tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,peso_medio_gramas:null,observacoes:"",embalagens:[]}),xe({tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,peso_medio_gramas:null}),x(null)},he=async ze=>{if(ze){x(ze);const{data:tt}=await Ee.from("produto_embalagens").select("id, tipo_embalagem, reciclavel, percentual_reciclabilidade, peso_medio_gramas").eq("produto_id",ze.id);K({gtin:ze.gtin,ncm:ze.ncm,descricao:ze.descricao,tipo_embalagem:ze.tipo_embalagem,reciclavel:ze.reciclavel,percentual_reciclabilidade:ze.percentual_reciclabilidade,peso_medio_gramas:X(ze.peso_medio_gramas),observacoes:ze.observacoes||"",embalagens:(tt||[]).map(Re=>({...Re,peso_medio_gramas:X(Re.peso_medio_gramas)}))})}else me();c(!0)},_e=ze=>{y({id:ze.id,descricao:ze.descricao,peso:X(ze.peso_medio_gramas)}),f(!0)},ue=async()=>{if(g){S(!0);try{const ze=Y(g.peso),{error:tt}=await Ee.from("produtos_ciclik").update({peso_medio_gramas:ze}).eq("id",g.id);if(tt)throw tt;T({title:"Sucesso",description:"Peso mdio atualizado com sucesso"}),f(!1),y(null),await ce()}catch(ze){console.error("Erro ao atualizar peso:",ze),T({title:"Erro",description:"No foi possvel atualizar o peso mdio",variant:"destructive"})}finally{S(!1)}}},je=()=>{K({...se,embalagens:[...se.embalagens,{...oe}]}),xe({tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,peso_medio_gramas:null})},ye=ze=>{K({...se,embalagens:se.embalagens.filter((tt,Re)=>Re!==ze)})},Le=async()=>{if(!se.gtin||!se.ncm||!se.descricao){T({title:"Campos obrigatrios",description:"Preencha GTIN, NCM e Descrio",variant:"destructive"});return}S(!0);try{let ze=m==null?void 0:m.id;const tt=Y(se.peso_medio_gramas);if(m){const{error:Re}=await Ee.from("produtos_ciclik").update({gtin:se.gtin,ncm:se.ncm,descricao:se.descricao,tipo_embalagem:se.tipo_embalagem,reciclavel:se.reciclavel,percentual_reciclabilidade:se.percentual_reciclabilidade,peso_medio_gramas:tt,observacoes:se.observacoes}).eq("id",m.id);if(Re)throw Re;T({title:"Sucesso",description:"Produto atualizado com sucesso"})}else{const{data:Re,error:Ue}=await Ee.from("produtos_ciclik").insert([{gtin:se.gtin,ncm:se.ncm,descricao:se.descricao,tipo_embalagem:se.tipo_embalagem,reciclavel:se.reciclavel,percentual_reciclabilidade:se.percentual_reciclabilidade,peso_medio_gramas:tt,observacoes:se.observacoes}]).select().single();if(Ue)throw Ue;ze=Re.id,T({title:"Sucesso",description:"Produto cadastrado com sucesso"})}if(se.embalagens.length>0&&ze){const Re=se.embalagens.filter(xt=>"id"in xt&&xt.id),Ue=se.embalagens.filter(xt=>!("id"in xt)||!xt.id);for(const xt of Re){const{error:st}=await Ee.from("produto_embalagens").update({tipo_embalagem:xt.tipo_embalagem,reciclavel:xt.reciclavel,percentual_reciclabilidade:xt.percentual_reciclabilidade,peso_medio_gramas:Y(xt.peso_medio_gramas)}).eq("id",xt.id);if(st)throw st}if(Ue.length>0){const xt=Ue.map(Xt=>({produto_id:ze,tipo_embalagem:Xt.tipo_embalagem,reciclavel:Xt.reciclavel,percentual_reciclabilidade:Xt.percentual_reciclabilidade,peso_medio_gramas:Y(Xt.peso_medio_gramas)})),{error:st}=await Ee.from("produto_embalagens").insert(xt);if(st)throw st}}await ce(),c(!1),me()}catch(ze){console.error("Erro ao salvar produto:",ze),T({title:"Erro",description:ze.message||"No foi possvel salvar o produto",variant:"destructive"})}finally{S(!1)}},Ge=async ze=>{if(confirm("Tem certeza que deseja excluir este produto?")){S(!0);try{const{error:tt}=await Ee.from("produtos_ciclik").delete().eq("id",ze);if(tt)throw tt;T({title:"Sucesso",description:"Produto excludo com sucesso"}),ce()}catch(tt){console.error("Erro ao excluir produto:",tt),T({title:"Erro",description:"No foi possvel excluir o produto",variant:"destructive"})}finally{S(!1)}}},Be=()=>{if(e.length===0){T({title:"Nenhum produto",description:"No h produtos para exportar",variant:"destructive"});return}const ze=["GTIN","NCM","Descrio","Tipo Embalagem","Reciclvel","% Reciclabilidade","Peso Mdio (kg)","Observaes","Data Cadastro"],tt=e.map(Xt=>[Xt.gtin,Xt.ncm,`"${(Xt.descricao||"").replace(/"/g,'""')}"`,Ip[Xt.tipo_embalagem]||Xt.tipo_embalagem,Xt.reciclavel?"Sim":"No",Xt.percentual_reciclabilidade,Xt.peso_medio_gramas?(Xt.peso_medio_gramas/1e3).toFixed(3).replace(".",","):"",`"${(Xt.observacoes||"").replace(/"/g,'""')}"`,Xt.data_cadastro?new Date(Xt.data_cadastro).toLocaleDateString("pt-BR"):""]),Re=[ze.join(";"),...tt.map(Xt=>Xt.join(";"))].join(`
`),Ue=new Blob(["\uFEFF"+Re],{type:"text/csv;charset=utf-8;"}),xt=URL.createObjectURL(Ue),st=document.createElement("a");st.href=xt,st.download=`produtos_ciclik_${new Date().toISOString().split("T")[0]}.csv`,st.click(),URL.revokeObjectURL(xt),T({title:"Exportao concluda",description:`${e.length} produtos exportados com sucesso`})},Te=async()=>{if(!se.gtin||se.gtin.length<8){T({title:"GTIN invlido",description:"Digite um GTIN vlido (mnimo 8 dgitos)",variant:"destructive"});return}j(!0);try{const{data:ze,error:tt}=await Ee.functions.invoke("buscar-produto-gtin",{body:{gtin:se.gtin}});if(tt){console.error("Erro HTTP ao buscar produto:",tt),T({title:"Erro na busca",description:"No foi possvel conectar ao servio de busca",variant:"destructive"});return}if(ze!=null&&ze.success&&(ze!=null&&ze.data)){const Re=ze.data,Ue=ze.suggested_packaging||[];K(st=>({...st,descricao:Re.descricao||st.descricao,ncm:Re.ncm||st.ncm,observacoes:`${st.observacoes?st.observacoes+`
`:""}Marca: ${Re.marca||"N/A"}
Categoria: ${Re.categoria||"N/A"}
Fonte: ${ze.source}`,embalagens:Ue.length>0?Ue:st.embalagens}));const xt=[];Re.descricao&&xt.push("descrio"),Re.ncm&&xt.push("NCM"),Ue.length>0&&xt.push(`${Ue.length} tipo(s) de embalagem`),T({title:"Produto encontrado!",description:`Dados de ${ze.source}. ${xt.length>0?`Preenchido: ${xt.join(", ")}.`:""} Revise as informaes.`})}else T({title:"Produto no encontrado",description:(ze==null?void 0:ze.message)||(ze==null?void 0:ze.error)||"Preencha os dados manualmente"})}catch(ze){console.error("Erro ao buscar produto:",ze),T({title:"Erro na busca",description:ze.message||"No foi possvel buscar o produto",variant:"destructive"})}finally{j(!1)}};return a.jsx($v,{children:a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ab,{}),a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gesto de Produtos Ciclik"}),a.jsx("p",{className:"text-muted-foreground",children:"Cadastro e gerenciamento de produtos"})]})]}),a.jsxs(nJ,{children:[a.jsx(iJ,{asChild:!0,children:a.jsx(Oe,{variant:"outline",children:a.jsx(LX,{className:"h-4 w-4"})})}),a.jsxs(bB,{align:"end",children:[a.jsxs(Hl,{onClick:()=>t("/admin/products/report"),children:[a.jsx(Pg,{className:"mr-2 h-4 w-4"}),"Relatrio Produtos"]}),a.jsxs(Hl,{onClick:()=>d(!0),children:[a.jsx(x3,{className:"mr-2 h-4 w-4"}),"Importar CSV"]}),a.jsxs(Hl,{onClick:Be,children:[a.jsx(ou,{className:"mr-2 h-4 w-4"}),"Exportar CSV"]}),a.jsxs(Hl,{onClick:()=>he(),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Novo Produto"]})]})]}),a.jsx(hs,{open:l,onOpenChange:c,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:m?"Editar Produto":"Novo Produto"}),a.jsx(Sl,{children:"Preencha os dados do produto Ciclik"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"gtin",children:"GTIN *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{id:"gtin",value:se.gtin,onChange:ze=>K({...se,gtin:ze.target.value}),placeholder:"7891234567890",className:"flex-1"}),a.jsx(Oe,{type:"button",variant:"outline",onClick:Te,disabled:E||!se.gtin||se.gtin.length<8,children:E?a.jsx(jn,{className:"h-4 w-4 animate-spin"}):a.jsx(Jp,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Clique na lupa para buscar dados automaticamente"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"ncm",children:"NCM *"}),a.jsx(mt,{id:"ncm",value:se.ncm,onChange:ze=>K({...se,ncm:ze.target.value}),placeholder:"12345678",maxLength:8})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"descricao",children:"Descrio *"}),a.jsx(mt,{id:"descricao",value:se.descricao,onChange:ze=>K({...se,descricao:ze.target.value}),placeholder:"Nome do produto"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"tipo_embalagem",children:"Tipo de Embalagem"}),a.jsxs(wi,{value:se.tipo_embalagem,onValueChange:ze=>K({...se,tipo_embalagem:ze}),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsx(xi,{children:Object.entries(Ip).map(([ze,tt])=>a.jsx(or,{value:ze,children:tt},ze))})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nh,{id:"reciclavel",checked:se.reciclavel,onCheckedChange:ze=>K({...se,reciclavel:ze})}),a.jsx(nt,{htmlFor:"reciclavel",children:"Reciclvel"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"percentual",children:["Percentual de Reciclabilidade: ",se.percentual_reciclabilidade,"%"]}),a.jsx(tE,{id:"percentual",min:0,max:100,step:5,value:[se.percentual_reciclabilidade],onValueChange:ze=>K({...se,percentual_reciclabilidade:ze[0]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"peso_medio",children:"Peso Mdio da Embalagem (kg)"}),a.jsx(mt,{id:"peso_medio",type:"number",step:"0.001",min:"0",value:se.peso_medio_gramas||"",onChange:ze=>K({...se,peso_medio_gramas:ze.target.value?parseFloat(ze.target.value):null}),placeholder:"Ex: 0.250"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Peso mdio da embalagem vazia em quilos (para clculo de peso total)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"observacoes",children:"Observaes"}),a.jsx(Od,{id:"observacoes",value:se.observacoes,onChange:ze=>K({...se,observacoes:ze.target.value}),placeholder:"Informaes adicionais",rows:3})]}),a.jsxs("div",{className:"border-t pt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(nt,{className:"text-lg font-semibold",children:"Tipos de Embalagem Adicionais"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Adicione mltiplos tipos de embalagem com suas respectivas classificaes"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg bg-muted/50",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx(nt,{children:"Tipo de Embalagem"}),a.jsxs(wi,{value:oe.tipo_embalagem,onValueChange:ze=>xe({...oe,tipo_embalagem:ze}),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsx(xi,{children:Object.entries(Ip).map(([ze,tt])=>a.jsx(or,{value:ze,children:tt},ze))})]})]}),a.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[a.jsx(nh,{checked:oe.reciclavel,onCheckedChange:ze=>xe({...oe,reciclavel:ze})}),a.jsx(nt,{children:"Reciclvel"})]}),a.jsxs("div",{className:"col-span-2 space-y-2",children:[a.jsxs(nt,{children:["Percentual de Reciclabilidade: ",oe.percentual_reciclabilidade,"%"]}),a.jsx(tE,{min:0,max:100,step:5,value:[oe.percentual_reciclabilidade],onValueChange:ze=>xe({...oe,percentual_reciclabilidade:ze[0]})})]}),a.jsxs("div",{className:"col-span-2 space-y-2",children:[a.jsx(nt,{children:"Peso Mdio (kg)"}),a.jsx(mt,{type:"number",step:"0.001",min:"0",value:oe.peso_medio_gramas||"",onChange:ze=>xe({...oe,peso_medio_gramas:ze.target.value?parseFloat(ze.target.value):null}),placeholder:"Ex: 0.150"})]}),a.jsx("div",{className:"col-span-2",children:a.jsxs(Oe,{type:"button",onClick:je,className:"w-full",variant:"outline",children:[a.jsx(ya,{className:"h-4 w-4 mr-2"}),"Adicionar Embalagem"]})})]}),se.embalagens.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{children:["Embalagens Adicionadas (",se.embalagens.length,")"]}),a.jsx("div",{className:"space-y-2",children:se.embalagens.map((ze,tt)=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-background",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:Ip[ze.tipo_embalagem]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[ze.reciclavel?"Reciclvel":"No reciclvel","  ",ze.percentual_reciclabilidade,"%"]})]}),a.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>ye(tt),children:a.jsx(Xa,{className:"h-4 w-4"})})]},tt))})]})]})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:Le,disabled:w,children:w?"Salvando...":"Salvar"})]})]})}),a.jsx(hs,{open:h,onOpenChange:f,children:a.jsxs(as,{className:"sm:max-w-md",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Editar Peso Mdio"}),a.jsx(Sl,{children:g==null?void 0:g.descricao})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"peso_edicao",children:"Peso Mdio (kg)"}),a.jsx(mt,{id:"peso_edicao",type:"number",step:"0.001",min:"0",value:(g==null?void 0:g.peso)||"",onChange:ze=>y(g?{...g,peso:ze.target.value?parseFloat(ze.target.value):null}:null),placeholder:"Ex: 0.250"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Peso mdio da embalagem vazia em quilos"})]})}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:ue,disabled:w,children:w?"Salvando...":"Salvar"})]})]})})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Total de Produtos"}),a.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-bold",children:H.total})})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Reciclveis"}),a.jsx(Cs,{className:"h-4 w-4 text-green-500"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-bold",children:H.reciclaveis}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[H.total>0?Math.round(H.reciclaveis/H.total*100):0,"% do total"]})]})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-2",children:a.jsx(Ct,{className:"text-sm font-medium",children:"Por Tipo"})}),a.jsxs(ht,{className:"space-y-1",children:[a.jsxs("div",{className:"text-xs",children:["Plstico: ",H.plastico]}),a.jsxs("div",{className:"text-xs",children:["Vidro: ",H.vidro]}),a.jsxs("div",{className:"text-xs",children:["Papel: ",H.papel]}),a.jsxs("div",{className:"text-xs",children:["Papelo: ",H.papelao]})]})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-2",children:a.jsx(Ct,{className:"text-sm font-medium",children:"Outros"})}),a.jsxs(ht,{className:"space-y-1",children:[a.jsxs("div",{className:"text-xs",children:["Alumnio: ",H.aluminio]}),a.jsxs("div",{className:"text-xs",children:["Laminado: ",H.laminado]}),a.jsxs("div",{className:"text-xs",children:["Misto: ",H.misto]})]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:"Produtos Cadastrados"}),a.jsxs(gr,{className:"mt-2",children:[n.length," de ",e.length," produto(s)"]})]}),a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>I(!O),children:[a.jsx(LC,{className:"h-4 w-4 mr-2"}),"Filtros"]})]}),a.jsxs("div",{className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Jp,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(mt,{placeholder:"Buscar por GTIN, NCM ou descrio...",value:s,onChange:ze=>o(ze.target.value),className:"max-w-sm"})]}),O&&a.jsxs("div",{className:"grid gap-4 p-4 border rounded-lg bg-muted/30",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Tipo de Embalagem"}),a.jsxs(wi,{value:M,onValueChange:D,children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"all",children:"Todos os tipos"}),Object.entries(Ip).map(([ze,tt])=>a.jsx(or,{value:ze,children:tt},ze))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Reciclvel"}),a.jsxs(wi,{value:z,onValueChange:F,children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"all",children:"Todos"}),a.jsx(or,{value:"yes",children:"Apenas reciclveis"}),a.jsx(or,{value:"no",children:"Apenas no reciclveis"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"Aes"}),a.jsxs(Oe,{variant:"outline",className:"w-full",onClick:()=>{D("all"),F("all"),Q(0),Z(100)},children:[a.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Limpar Filtros"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{children:["Faixa de Reciclabilidade: ",q,"% - ",re,"%"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(nt,{className:"text-xs text-muted-foreground",children:"Mnimo"}),a.jsx(tE,{min:0,max:100,step:5,value:[q],onValueChange:ze=>Q(ze[0])})]}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(nt,{className:"text-xs text-muted-foreground",children:"Mximo"}),a.jsx(tE,{min:0,max:100,step:5,value:[re],onValueChange:ze=>Z(ze[0])})]})]})]})]})]})]}),a.jsx(ht,{children:n.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s?"Nenhum produto encontrado":"Nenhum produto cadastrado"}):a.jsx("div",{className:"rounded-md border",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{className:"w-[130px]",children:"GTIN"}),a.jsx(It,{children:"Descrio"}),a.jsx(It,{className:"w-[100px]",children:"NCM"}),a.jsx(It,{className:"w-[120px]",children:"Embalagem"}),a.jsx(It,{className:"w-[100px]",children:"Peso Mdio"}),a.jsx(It,{className:"w-[120px]",children:"Reciclvel"}),a.jsx(It,{className:"w-[100px] text-center",children:"% Recic."}),a.jsx(It,{className:"w-[120px] text-right",children:"Aes"})]})}),a.jsx(to,{children:n.map(ze=>a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-mono text-xs",children:ze.gtin}),a.jsx(jt,{children:a.jsxs("div",{className:"max-w-md",children:[a.jsx("div",{className:"font-medium",children:ze.descricao}),ze.observacoes&&a.jsx("div",{className:"text-xs text-muted-foreground truncate mt-1",children:ze.observacoes})]})}),a.jsx(jt,{className:"font-mono text-xs",children:ze.ncm}),a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",children:Ip[ze.tipo_embalagem]})}),a.jsx(jt,{children:ze.peso_medio_gramas?`${X(ze.peso_medio_gramas)} kg`:a.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})}),a.jsx(jt,{children:a.jsx(Bt,{variant:ze.reciclavel?"default":"secondary",children:ze.reciclavel?"Sim":"No"})}),a.jsx(jt,{className:"text-center",children:ze.reciclavel&&a.jsxs("span",{className:"font-medium",children:[ze.percentual_reciclabilidade,"%"]})}),a.jsx(jt,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>_e(ze),title:"Editar peso mdio",children:a.jsx(g3,{className:"h-4 w-4"})}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>he(ze),children:a.jsx(BC,{className:"h-4 w-4"})}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>Ge(ze.id),children:a.jsx(vl,{className:"h-4 w-4 text-destructive"})})]})})]},ze.id))})]})})})]})]}),a.jsx(P7t,{open:u,onOpenChange:d,onSuccess:ce})]})})}function O7t(){var I;const[t,e]=C.useState([]),[r,n]=C.useState(!0),[i,s]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[d,h]=C.useState(null),f=nn(),{toast:m}=Qi(),[x,g]=C.useState({gtin:"",ncm:"",descricao:"",tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,observacoes:""});C.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const{data:M,error:D}=await Ee.from("notas_fiscais").select("itens_enriquecidos, data_envio, numero_nota").not("itens_enriquecidos","is",null);if(D)throw D;const z=new Map;M==null||M.forEach(q=>{const Q=q.itens_enriquecidos;Array.isArray(Q)&&Q.forEach(re=>{if(re.produto_cadastrado===!1&&re.gtin){const Z=z.get(re.gtin);Z?(Z.frequencia++,re.nome&&Z.descricoes.add(re.nome),q.numero_nota&&Z.exemplosNotas.add(q.numero_nota),q.data_envio&&q.data_envio>Z.ultimaOcorrencia&&(Z.ultimaOcorrencia=q.data_envio)):z.set(re.gtin,{gtin:re.gtin,descricoes:new Set(re.nome?[re.nome]:[]),frequencia:1,ultimaOcorrencia:q.data_envio||new Date().toISOString(),exemplosNotas:new Set(q.numero_nota?[q.numero_nota]:[])})}})});const F=Array.from(z.values()).map(q=>({gtin:q.gtin,descricao:Array.from(q.descricoes).join(" / ")||"Sem descrio",frequencia:q.frequencia,ultimaOcorrencia:q.ultimaOcorrencia,exemplosNotas:Array.from(q.exemplosNotas).slice(0,3)})).sort((q,Q)=>Q.frequencia-q.frequencia);e(F)}catch(M){console.error("Erro ao carregar relatrio:",M),m({title:"Erro",description:"No foi possvel carregar o relatrio",variant:"destructive"})}finally{n(!1)}},w=M=>{h(M),g({gtin:M.gtin,ncm:"",descricao:M.descricao.split(" / ")[0],tipo_embalagem:"plastico",reciclavel:!0,percentual_reciclabilidade:100,observacoes:`Frequncia: ${M.frequencia}x
ltima ocorrncia: ${new Date(M.ultimaOcorrencia).toLocaleDateString()}`}),s(!0)},S=async()=>{if(!x.gtin||x.gtin.length<8){m({title:"GTIN invlido",description:"Digite um GTIN vlido (mnimo 8 dgitos)",variant:"destructive"});return}l(!0);try{const{data:M,error:D}=await Ee.functions.invoke("buscar-produto-gtin",{body:{gtin:x.gtin}});if(D)throw D;if(M.success&&M.data){const z=M.data;g(F=>({...F,descricao:z.descricao||F.descricao,ncm:z.ncm||F.ncm,observacoes:`${F.observacoes}

Marca: ${z.marca||"N/A"}
Categoria: ${z.categoria||"N/A"}
Fonte: ${M.source}`})),m({title:"Produto encontrado!",description:`Dados obtidos de ${M.source}. Revise e complete as informaes.`})}else m({title:"Produto no encontrado",description:M.message||"Preencha os dados manualmente",variant:"destructive"})}catch(M){console.error("Erro ao buscar produto:",M),m({title:"Erro na busca",description:M.message||"No foi possvel buscar o produto",variant:"destructive"})}finally{l(!1)}},E=async()=>{if(!x.gtin||!x.ncm||!x.descricao){m({title:"Campos obrigatrios",description:"Preencha GTIN, NCM e Descrio",variant:"destructive"});return}u(!0);try{const{error:M}=await Ee.from("produtos_ciclik").insert([{gtin:x.gtin,ncm:x.ncm,descricao:x.descricao,tipo_embalagem:x.tipo_embalagem,reciclavel:x.reciclavel,percentual_reciclabilidade:x.percentual_reciclabilidade,observacoes:x.observacoes}]);if(M)throw M;m({title:"Sucesso",description:"Produto cadastrado com sucesso"}),s(!1),y()}catch(M){console.error("Erro ao salvar produto:",M),m({title:"Erro",description:M.message||"No foi possvel salvar o produto",variant:"destructive"})}finally{u(!1)}},j=t.length,T=t.reduce((M,D)=>M+D.frequencia,0),O=t.slice(0,5);return a.jsx($v,{children:a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ab,{}),a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>f("/admin/products"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Relatrio de Produtos No Cadastrados"}),a.jsx("p",{className:"text-muted-foreground",children:"Priorize cadastros baseado na frequncia nas notas fiscais"})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Produtos nicos"}),a.jsx(Pg,{className:"h-4 w-4 text-yellow-500"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-bold",children:j}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Aguardando cadastro"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Total de Ocorrncias"}),a.jsx(Hs,{className:"h-4 w-4 text-orange-500"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-bold",children:T}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Nas notas fiscais"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Top Prioridade"}),a.jsx(Yn,{className:"h-4 w-4 text-red-500"})]}),a.jsxs(ht,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[((I=O[0])==null?void 0:I.frequencia)||0,"x"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Produto mais frequente"})]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Produtos No Cadastrados"}),a.jsx(gr,{children:"Ordenados por frequncia de apario nas notas fiscais"})]}),a.jsx(ht,{children:r?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(jn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):t.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Yn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Nenhum produto no cadastrado encontrado"}),a.jsx("p",{className:"text-sm",children:"Todos os produtos das notas fiscais j esto cadastrados!"})]}):a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{className:"w-[50px]",children:"#"}),a.jsx(It,{children:"GTIN"}),a.jsx(It,{children:"Descrio"}),a.jsx(It,{className:"text-center",children:"Frequncia"}),a.jsx(It,{children:"ltima Ocorrncia"}),a.jsx(It,{children:"Exemplos de Notas"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:t.map((M,D)=>a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:D+1}),a.jsx(jt,{className:"font-mono text-sm",children:M.gtin}),a.jsx(jt,{className:"max-w-xs truncate",children:M.descricao}),a.jsx(jt,{className:"text-center",children:a.jsxs(Bt,{variant:M.frequencia>=10?"destructive":M.frequencia>=5?"default":"secondary",children:[M.frequencia,"x"]})}),a.jsx(jt,{className:"text-sm text-muted-foreground",children:new Date(M.ultimaOcorrencia).toLocaleDateString("pt-BR")}),a.jsx(jt,{className:"text-xs text-muted-foreground",children:M.exemplosNotas.length>0?a.jsx("div",{className:"flex flex-wrap gap-1",children:M.exemplosNotas.map((z,F)=>a.jsx(Bt,{variant:"outline",className:"text-xs",children:z},F))}):a.jsx("span",{children:"-"})}),a.jsx(jt,{className:"text-right",children:a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>w(M),children:[a.jsx(ya,{className:"h-4 w-4 mr-2"}),"Cadastrar"]})})]},M.gtin))})]})})})]})]}),a.jsx(hs,{open:i,onOpenChange:s,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Cadastrar Produto"}),a.jsx(Sl,{children:"Complete os dados do produto para cadastr-lo no sistema"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"gtin",children:"GTIN *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{id:"gtin",value:x.gtin,onChange:M=>g({...x,gtin:M.target.value}),placeholder:"7891234567890",disabled:!0,className:"flex-1"}),a.jsx(Oe,{type:"button",variant:"outline",onClick:S,disabled:o,children:o?a.jsx(jn,{className:"h-4 w-4 animate-spin"}):a.jsx(Jp,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"ncm",children:"NCM *"}),a.jsx(mt,{id:"ncm",value:x.ncm,onChange:M=>g({...x,ncm:M.target.value}),placeholder:"12345678",maxLength:8})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"descricao",children:"Descrio *"}),a.jsx(mt,{id:"descricao",value:x.descricao,onChange:M=>g({...x,descricao:M.target.value}),placeholder:"Nome do produto"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"tipo_embalagem",children:"Tipo de Embalagem"}),a.jsxs(wi,{value:x.tipo_embalagem,onValueChange:M=>g({...x,tipo_embalagem:M}),children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsx(xi,{children:Object.entries(Ip).map(([M,D])=>a.jsx(or,{value:M,children:D},M))})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nh,{id:"reciclavel",checked:x.reciclavel,onCheckedChange:M=>g({...x,reciclavel:M})}),a.jsx(nt,{htmlFor:"reciclavel",children:"Reciclvel"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"percentual",children:["Percentual de Reciclabilidade: ",x.percentual_reciclabilidade,"%"]}),a.jsx(tE,{id:"percentual",min:0,max:100,step:5,value:[x.percentual_reciclabilidade],onValueChange:M=>g({...x,percentual_reciclabilidade:M[0]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"observacoes",children:"Observaes"}),a.jsx(Od,{id:"observacoes",value:x.observacoes,onChange:M=>g({...x,observacoes:M.target.value}),placeholder:"Informaes adicionais",rows:4})]})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:E,disabled:c,children:c?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):"Cadastrar"})]})]})})]})})}const I7t=()=>{const t=nn(),[e,r]=C.useState(""),[n,i]=C.useState(!0),[s,o]=C.useState(!1);C.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:d}=await Ee.from("configuracoes_sistema").select("valor").eq("chave","whatsapp_ciclik").single();if(d)throw d;r((u==null?void 0:u.valor)||"")}catch(u){cr.error("Erro ao carregar configuraes",{description:u.message})}finally{i(!1)}},c=async()=>{o(!0);try{const{error:u}=await Ee.from("configuracoes_sistema").update({valor:e}).eq("chave","whatsapp_ciclik");if(u)throw u;cr.success("Configuraes salvas com sucesso!")}catch(u){cr.error("Erro ao salvar configuraes",{description:u.message})}finally{o(!1)}};return n?a.jsx("div",{className:"container mx-auto p-6",children:a.jsx("p",{className:"text-center text-muted-foreground",children:"Carregando configuraes..."})}):a.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsx("div",{children:a.jsx("h1",{className:"text-2xl font-bold",children:"Configuraes do Sistema"})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(OM,{className:"h-6 w-6 text-primary"}),"Configuraes do Sistema"]}),a.jsx(gr,{children:"Gerencie as configuraes gerais do sistema Ciclik"})]}),a.jsxs(ht,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"whatsapp",children:"WhatsApp para Atendimento de Cooperativas"}),a.jsx(mt,{id:"whatsapp",type:"tel",placeholder:"5511999999999",value:e,onChange:u=>r(u.target.value)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Nmero no formato internacional (cdigo do pas + DDD + nmero)",a.jsx("br",{}),"Exemplo: 5511999999999 (Brasil, So Paulo)"]})]}),a.jsxs(Oe,{onClick:c,disabled:s,className:"w-full",children:[a.jsx(FC,{className:"mr-2 h-4 w-4"}),s?"Salvando...":"Salvar Configuraes"]})]})]})]})},R7t=()=>{const t=nn(),[e,r]=C.useState([]),[n,i]=C.useState(!0),[s,o]=C.useState(!1),l=[{key:"pontos_missao_completa",label:"Misso Concluda",description:"Pontos ganhos ao completar uma misso educacional",value:10,category:"earning",meta_semanal_basico:3,meta_mensal_basico:10,meta_semanal_intermediario:5,meta_mensal_intermediario:15,meta_semanal_avancado:7,meta_mensal_avancado:20},{key:"pontos_nota_fiscal_validada",label:"Nota Fiscal Validada",description:"Pontos ganhos quando uma nota fiscal  validada",value:50,category:"earning",meta_semanal_basico:1,meta_mensal_basico:4,meta_semanal_intermediario:2,meta_mensal_intermediario:6,meta_semanal_avancado:3,meta_mensal_avancado:10},{key:"pontos_material_cadastro_nota",label:"Material Cadastrado (Nota Fiscal)",description:"Pontos por cada material cadastrado via nota fiscal",value:5,category:"earning",meta_semanal_basico:0,meta_mensal_basico:0,meta_semanal_intermediario:0,meta_mensal_intermediario:0,meta_semanal_avancado:0,meta_mensal_avancado:0},{key:"pontos_material_cadastro_manual",label:"Material Cadastrado (Manual)",description:"Pontos por cada material cadastrado manualmente",value:10,category:"earning",meta_semanal_basico:0,meta_mensal_basico:0,meta_semanal_intermediario:0,meta_mensal_intermediario:0,meta_semanal_avancado:0,meta_mensal_avancado:0},{key:"pontos_indicacao_cadastro",label:"Indicao - Cadastro",description:"Pontos quando um indicado se cadastra no sistema",value:40,category:"earning",meta_semanal_basico:0,meta_mensal_basico:1,meta_semanal_intermediario:0,meta_mensal_intermediario:2,meta_semanal_avancado:1,meta_mensal_avancado:3},{key:"pontos_indicacao_primeira_missao",label:"Indicao - Primeira Misso",description:"Pontos quando indicado completa sua primeira misso",value:20,category:"earning",meta_semanal_basico:0,meta_mensal_basico:0,meta_semanal_intermediario:0,meta_mensal_intermediario:0,meta_semanal_avancado:0,meta_mensal_avancado:0},{key:"pontos_base_entrega_6kg",label:"Base Entrega (6kg)",description:"Pontos base para cada 6kg de material entregue",value:20,category:"earning",meta_semanal_basico:1,meta_mensal_basico:4,meta_semanal_intermediario:2,meta_mensal_intermediario:8,meta_semanal_avancado:3,meta_mensal_avancado:12}];C.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const{data:f,error:m}=await Ee.from("configuracoes_sistema").select("*").or("chave.like.pontos_%,chave.like.nivel_%,chave.like.meta_%");if(m)throw m;const x=new Map((f==null?void 0:f.map(y=>[y.chave,parseInt(y.valor)]))||[]),g=l.map(y=>({...y,value:x.get(y.key)??y.value,meta_semanal_basico:x.get(`meta_semanal_basico_${y.key}`)??y.meta_semanal_basico,meta_mensal_basico:x.get(`meta_mensal_basico_${y.key}`)??y.meta_mensal_basico,meta_semanal_intermediario:x.get(`meta_semanal_intermediario_${y.key}`)??y.meta_semanal_intermediario,meta_mensal_intermediario:x.get(`meta_mensal_intermediario_${y.key}`)??y.meta_mensal_intermediario,meta_semanal_avancado:x.get(`meta_semanal_avancado_${y.key}`)??y.meta_semanal_avancado,meta_mensal_avancado:x.get(`meta_mensal_avancado_${y.key}`)??y.meta_mensal_avancado}));r(g)}catch(f){console.error("Erro ao carregar configuraes:",f),cr.error("Erro ao carregar configuraes de gamificao")}finally{i(!1)}},u=(f,m,x="value")=>{const g=parseInt(m)||0;r(e.map(y=>y.key===f?{...y,[x]:g}:y))},d=async()=>{try{o(!0);for(const f of e){const{data:m}=await Ee.from("configuracoes_sistema").select("id").eq("chave",f.key).single();m?await Ee.from("configuracoes_sistema").update({valor:f.value.toString(),updated_at:new Date().toISOString()}).eq("chave",f.key):await Ee.from("configuracoes_sistema").insert({chave:f.key,valor:f.value.toString(),descricao:f.description});const x=[{key:`meta_semanal_basico_${f.key}`,value:f.meta_semanal_basico},{key:`meta_mensal_basico_${f.key}`,value:f.meta_mensal_basico},{key:`meta_semanal_intermediario_${f.key}`,value:f.meta_semanal_intermediario},{key:`meta_mensal_intermediario_${f.key}`,value:f.meta_mensal_intermediario},{key:`meta_semanal_avancado_${f.key}`,value:f.meta_semanal_avancado},{key:`meta_mensal_avancado_${f.key}`,value:f.meta_mensal_avancado}];for(const g of x)if(g.value!==void 0){const{data:y}=await Ee.from("configuracoes_sistema").select("id").eq("chave",g.key).single();y?await Ee.from("configuracoes_sistema").update({valor:g.value.toString(),updated_at:new Date().toISOString()}).eq("chave",g.key):await Ee.from("configuracoes_sistema").insert({chave:g.key,valor:g.value.toString(),descricao:`Meta para ${f.label}`})}}cr.success("Configuraes de gamificao salvas com sucesso!")}catch(f){console.error("Erro ao salvar configuraes:",f),cr.error("Erro ao salvar configuraes")}finally{o(!1)}},h=()=>{r(l),cr.info("Valores resetados para padro. Clique em Salvar para aplicar.")};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"mx-auto max-w-6xl p-4 md:p-8",children:[a.jsx("div",{className:"mb-6",children:a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2 mb-4",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]})}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(_m,{className:"h-6 w-6 text-primary"}),"Gesto de Gamificao"]}),a.jsx(gr,{children:"Configure os pontos de cada atividade e as metas de misses por nvel"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Oe,{variant:"outline",onClick:h,disabled:n||s,children:[a.jsx(gm,{className:"mr-2 h-4 w-4"}),"Resetar"]}),a.jsxs(Oe,{onClick:d,disabled:n||s,children:[a.jsx(FC,{className:"mr-2 h-4 w-4"}),s?"Salvando...":"Salvar"]})]})]})}),a.jsx(ht,{children:n?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Carregando configuraes..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(it,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-transparent",children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Dm,{className:"h-5 w-5 text-primary"}),"Sistema de Nveis Mensais"]}),a.jsx(gr,{children:"Os nveis so baseados nos pontos acumulados em um nico ms. Usurios mudam de nvel automaticamente ao atingir a faixa."})]}),a.jsx(ht,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(it,{className:"border-2 border-primary/20",children:[a.jsxs(At,{className:"pb-3",children:[a.jsx(Ct,{className:"text-lg text-primary",children:"Nvel Bsico"}),a.jsx(gr,{children:"Embaixador Ciclik"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-primary",children:"0 - 500"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"pontos mensais"})]})})]}),a.jsxs(it,{className:"border-2 border-success/30 bg-success/5",children:[a.jsxs(At,{className:"pb-3",children:[a.jsx(Ct,{className:"text-lg text-success",children:"Nvel Intermedirio"}),a.jsx(gr,{children:"Protetor Ciclik"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-success",children:"501 - 1.000"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"pontos mensais"})]})})]}),a.jsxs(it,{className:"border-2 border-accent/30 bg-accent/5",children:[a.jsxs(At,{className:"pb-3",children:[a.jsx(Ct,{className:"text-lg text-accent",children:"Nvel Avanado"}),a.jsx(gr,{children:"Guardio Ciclik"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-accent",children:"1.001+"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"pontos mensais"})]})})]})]})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(_m,{className:"h-5 w-5 text-primary"}),"Pontuao de Atividades e Metas por Nvel"]}),a.jsx("div",{className:"border rounded-lg overflow-x-auto",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{className:"bg-muted/50",children:[a.jsx(It,{className:"min-w-[200px]",children:"Atividade"}),a.jsx(It,{className:"min-w-[250px]",children:"Descrio"}),a.jsx(It,{className:"text-center w-[100px]",children:"Pontos"}),a.jsxs(It,{className:"text-center w-[80px] border-l",children:["Semanal",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Bsico"})]}),a.jsxs(It,{className:"text-center w-[80px]",children:["Mensal",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Bsico"})]}),a.jsxs(It,{className:"text-center w-[100px]",children:["Pontos Proj.",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Bsico"})]}),a.jsxs(It,{className:"text-center w-[80px] border-l",children:["Semanal",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Interm."})]}),a.jsxs(It,{className:"text-center w-[80px]",children:["Mensal",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Interm."})]}),a.jsxs(It,{className:"text-center w-[100px]",children:["Pontos Proj.",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Interm."})]}),a.jsxs(It,{className:"text-center w-[80px] border-l",children:["Semanal",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Avan."})]}),a.jsxs(It,{className:"text-center w-[80px]",children:["Mensal",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Avan."})]}),a.jsxs(It,{className:"text-center w-[100px]",children:["Pontos Proj.",a.jsx("br",{}),a.jsx("span",{className:"text-xs font-normal",children:"Avan."})]})]})}),a.jsxs(to,{children:[e.filter(f=>f.category==="earning"&&!f.key.includes("nivel_")).map(f=>a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:f.label}),a.jsx(jt,{className:"text-sm text-muted-foreground",children:f.description}),a.jsx(jt,{className:"text-center",children:a.jsx(mt,{type:"number",min:"0",value:f.value,onChange:m=>u(f.key,m.target.value,"value"),className:"w-20 text-center mx-auto"})}),a.jsx(jt,{className:"text-center border-l",children:a.jsx(mt,{type:"number",min:"0",value:f.meta_semanal_basico??0,onChange:m=>u(f.key,m.target.value,"meta_semanal_basico"),className:"w-16 text-center mx-auto"})}),a.jsx(jt,{className:"text-center",children:a.jsx(mt,{type:"number",min:"0",value:f.meta_mensal_basico??0,onChange:m=>u(f.key,m.target.value,"meta_mensal_basico"),className:"w-16 text-center mx-auto"})}),a.jsx(jt,{className:"text-center bg-muted/30",children:a.jsx("div",{className:"text-sm font-semibold text-primary",children:(f.meta_mensal_basico??0)*f.value})}),a.jsx(jt,{className:"text-center border-l",children:a.jsx(mt,{type:"number",min:"0",value:f.meta_semanal_intermediario??0,onChange:m=>u(f.key,m.target.value,"meta_semanal_intermediario"),className:"w-16 text-center mx-auto"})}),a.jsx(jt,{className:"text-center",children:a.jsx(mt,{type:"number",min:"0",value:f.meta_mensal_intermediario??0,onChange:m=>u(f.key,m.target.value,"meta_mensal_intermediario"),className:"w-16 text-center mx-auto"})}),a.jsx(jt,{className:"text-center bg-muted/30",children:a.jsx("div",{className:"text-sm font-semibold text-primary",children:(f.meta_mensal_intermediario??0)*f.value})}),a.jsx(jt,{className:"text-center border-l",children:a.jsx(mt,{type:"number",min:"0",value:f.meta_semanal_avancado??0,onChange:m=>u(f.key,m.target.value,"meta_semanal_avancado"),className:"w-16 text-center mx-auto"})}),a.jsx(jt,{className:"text-center",children:a.jsx(mt,{type:"number",min:"0",value:f.meta_mensal_avancado??0,onChange:m=>u(f.key,m.target.value,"meta_mensal_avancado"),className:"w-16 text-center mx-auto"})}),a.jsx(jt,{className:"text-center bg-muted/30",children:a.jsx("div",{className:"text-sm font-semibold text-primary",children:(f.meta_mensal_avancado??0)*f.value})})]},f.key)),a.jsxs(Dn,{className:"bg-primary/10 font-bold border-t-2 border-primary/20",children:[a.jsx(jt,{colSpan:3,className:"text-right pr-4",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(_m,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-lg",children:"TOTAL MENSAL POR NVEL:"})]})}),a.jsx(jt,{colSpan:2}),a.jsxs(jt,{className:"text-center bg-primary/20",children:[a.jsx("div",{className:"text-lg font-bold text-primary",children:e.filter(f=>f.category==="earning"&&!f.key.includes("nivel_")).reduce((f,m)=>f+(m.meta_mensal_basico??0)*m.value,0).toLocaleString("pt-BR")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"pts Bsico"})]}),a.jsx(jt,{colSpan:2}),a.jsxs(jt,{className:"text-center bg-primary/20",children:[a.jsx("div",{className:"text-lg font-bold text-primary",children:e.filter(f=>f.category==="earning"&&!f.key.includes("nivel_")).reduce((f,m)=>f+(m.meta_mensal_intermediario??0)*m.value,0).toLocaleString("pt-BR")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"pts Intermedirio"})]}),a.jsx(jt,{colSpan:2}),a.jsxs(jt,{className:"text-center bg-primary/20",children:[a.jsx("div",{className:"text-lg font-bold text-primary",children:e.filter(f=>f.category==="earning"&&!f.key.includes("nivel_")).reduce((f,m)=>f+(m.meta_mensal_avancado??0)*m.value,0).toLocaleString("pt-BR")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"pts Avanado"})]})]})]})]})})]}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold mb-2",children:" Informaes Importantes"}),a.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsx("li",{children:" As pontuaes de misses especficas so configuradas individualmente em cada misso"}),a.jsx("li",{children:" Pontos de entregas so calculados proporcionalmente ao peso validado"}),a.jsx("li",{children:" Resgate de cupons deduz pontos baseado no valor configurado em cada cupom"}),a.jsx("li",{children:" Alteraes nas configuraes afetam apenas transaes futuras"}),a.jsx("li",{children:" Metas de misses definem quantas misses os usurios devem completar por perodo em cada nvel"})]})]})]})})]})]})})};function D7t(){const t=nn(),[e,r]=C.useState([]),[n,i]=C.useState([]),[s,o]=C.useState(!0),[l,c]=C.useState(null),[u,d]=C.useState(null),[h,f]=C.useState(!1),[m,x]=C.useState("");C.useEffect(()=>{g(),y()},[]);const g=async()=>{try{o(!0);const{data:T,error:O}=await Ee.from("profiles").select("id, nome, email, score_verde").order("nome");if(O)throw O;const I=[];for(const M of T||[])try{const{data:D,error:z}=await Ee.functions.invoke("calcular-pontos-esperados",{body:{userId:M.id}});if(z){console.error(`Erro ao calcular pontos para ${M.nome}:`,z);continue}const F=D.pontos_esperados||0,q=M.score_verde-F,Q=F>0?q/F*100:0;I.push({id:M.id,nome:M.nome,email:M.email,score_verde:M.score_verde,pontos_esperados:F,discrepancia:q,percentual_discrepancia:Q,detalhes:D.detalhes})}catch(D){console.error(`Erro ao processar ${M.nome}:`,D)}r(I)}catch(T){console.error("Erro ao carregar auditoria:",T),cr.error("Erro ao carregar auditoria de pontos")}finally{o(!1)}},y=async()=>{try{const{data:T,error:O}=await Ee.from("ajustes_pontos_manuais").select(`
          *,
          usuario:id_usuario(nome),
          admin:id_admin(nome)
        `).order("created_at",{ascending:!1}).limit(50);if(O)throw O;const I=T.map(M=>{var D,z;return{id:M.id,id_usuario:M.id_usuario,nome_usuario:((D=M.usuario)==null?void 0:D.nome)||"Usurio removido",id_admin:M.id_admin,nome_admin:((z=M.admin)==null?void 0:z.nome)||"Admin removido",pontos_antes:M.pontos_antes,pontos_depois:M.pontos_depois,diferenca:M.diferenca,motivo:M.motivo,detalhes:M.detalhes,created_at:M.created_at}});i(I)}catch(T){console.error("Erro ao carregar histrico:",T)}},w=async T=>{var O;if(confirm(`Recalcular pontos para ${T.nome}?

Pontos atuais: ${T.score_verde}
Pontos esperados: ${T.pontos_esperados}

Esta ao ir ajustar o score_verde e pontos mensais.`))try{c(T.id);const{data:I}=await Ee.auth.getUser(),M=(O=I==null?void 0:I.user)==null?void 0:O.id;if(!M)throw new Error("Admin no identificado");const D=new Date().toISOString().slice(0,7)+"-01",{error:z}=await Ee.from("profiles").update({score_verde:T.pontos_esperados}).eq("id",T.id);if(z)throw z;const{error:F}=await Ee.from("pontos_mensais_usuarios").upsert({id_usuario:T.id,mes_referencia:D,pontos_acumulados:T.pontos_esperados,nivel_atingido:T.pontos_esperados>=1001?"Guardiao Verde":T.pontos_esperados>=501?"Ativo":"Iniciante"},{onConflict:"id_usuario,mes_referencia"});if(F)throw F;const{error:q}=await Ee.from("ajustes_pontos_manuais").insert({id_usuario:T.id,id_admin:M,pontos_antes:T.score_verde,pontos_depois:T.pontos_esperados,diferenca:T.pontos_esperados-T.score_verde,motivo:"recalculo_automatico",detalhes:JSON.stringify({detalhes_calculo:T.detalhes,discrepancia_original:T.discrepancia})});if(q)throw q;cr.success(`Pontos de ${T.nome} recalculados com sucesso!`),await g(),await y()}catch(I){console.error("Erro ao recalcular pontos:",I),cr.error("Erro ao recalcular pontos: "+I.message)}finally{c(null)}},S=async()=>{var T;if(!u||!m.trim()){cr.error("Preencha o motivo do ajuste");return}try{const{data:O}=await Ee.auth.getUser(),I=(T=O==null?void 0:O.user)==null?void 0:T.id;if(!I)throw new Error("Admin no identificado");const M=new Date().toISOString().slice(0,7)+"-01",{error:D}=await Ee.from("profiles").update({score_verde:u.pontos_esperados}).eq("id",u.id);if(D)throw D;const{error:z}=await Ee.from("pontos_mensais_usuarios").upsert({id_usuario:u.id,mes_referencia:M,pontos_acumulados:u.pontos_esperados,nivel_atingido:u.pontos_esperados>=1001?"Guardiao Verde":u.pontos_esperados>=501?"Ativo":"Iniciante"},{onConflict:"id_usuario,mes_referencia"});if(z)throw z;const{error:F}=await Ee.from("ajustes_pontos_manuais").insert({id_usuario:u.id,id_admin:I,pontos_antes:u.score_verde,pontos_depois:u.pontos_esperados,diferenca:u.pontos_esperados-u.score_verde,motivo:"ajuste_manual",detalhes:m});if(F)throw F;cr.success("Ajuste manual registrado com sucesso!"),f(!1),d(null),x(""),await g(),await y()}catch(O){console.error("Erro ao registrar ajuste:",O),cr.error("Erro ao registrar ajuste: "+O.message)}},E=T=>{const O=Math.abs(T);return O<5?"text-success":O<15?"text-warning":"text-destructive"},j=T=>Math.abs(T)<3?a.jsx(ta,{className:"h-4 w-4 text-success"}):Math.abs(T)<10?a.jsx(Za,{className:"h-4 w-4 text-warning"}):a.jsx(al,{className:"h-4 w-4 text-destructive"});return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin/dashboard"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Auditoria de Pontos"}),a.jsx("p",{className:"text-muted-foreground",children:"Visualize discrepncias e recalcule pontos dos usurios"})]})]}),a.jsxs(Oe,{onClick:g,disabled:s,children:[a.jsx(gm,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Atualizar"]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{children:"Total de Usurios"}),a.jsx(Ct,{className:"text-3xl",children:e.length})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{children:"Com Discrepncia"}),a.jsx(Ct,{className:"text-3xl text-warning",children:e.filter(T=>Math.abs(T.discrepancia)>=3).length})]})}),a.jsx(it,{children:a.jsxs(At,{className:"pb-2",children:[a.jsx(gr,{children:"Crticas (>10 pts)"}),a.jsx(Ct,{className:"text-3xl text-destructive",children:e.filter(T=>Math.abs(T.discrepancia)>=10).length})]})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Relatrio de Discrepncias"}),a.jsx(gr,{children:"Comparao entre pontos reais e pontos calculados pelas regras de gamificao"})]}),a.jsx(ht,{children:s?a.jsx("div",{className:"text-center py-8",children:"Carregando auditoria..."}):a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Usurio"}),a.jsx(It,{className:"text-right",children:"Pontos Reais"}),a.jsx(It,{className:"text-right",children:"Pontos Esperados"}),a.jsx(It,{className:"text-right",children:"Discrepncia"}),a.jsx(It,{className:"text-right",children:"%"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:e.map(T=>a.jsxs(Dn,{children:[a.jsx(jt,{children:j(T.discrepancia)}),a.jsx(jt,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:T.nome}),a.jsx("div",{className:"text-sm text-muted-foreground",children:T.email})]})}),a.jsx(jt,{className:"text-right font-medium",children:As(T.score_verde,0)}),a.jsx(jt,{className:"text-right",children:As(T.pontos_esperados,0)}),a.jsxs(jt,{className:`text-right font-medium ${E(T.percentual_discrepancia)}`,children:[T.discrepancia>0?"+":"",As(T.discrepancia,0)]}),a.jsxs(jt,{className:`text-right ${E(T.percentual_discrepancia)}`,children:[T.discrepancia>0?"+":"",As(T.percentual_discrepancia,1),"%"]}),a.jsx(jt,{className:"text-right",children:Math.abs(T.discrepancia)>=3&&a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(Oe,{size:"sm",onClick:()=>w(T),disabled:l===T.id,children:l===T.id?a.jsx(gm,{className:"h-3 w-3 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Recalcular"]})}),a.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{d(T),f(!0)},children:"Ajuste Manual"})]})})]},T.id))})]})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Histrico de Ajustes"}),a.jsx(gr,{children:"ltimos 50 ajustes manuais realizados"})]}),a.jsx(ht,{children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Data"}),a.jsx(It,{children:"Usurio"}),a.jsx(It,{children:"Admin"}),a.jsx(It,{className:"text-right",children:"Antes"}),a.jsx(It,{className:"text-right",children:"Depois"}),a.jsx(It,{className:"text-right",children:"Diferena"}),a.jsx(It,{children:"Motivo"})]})}),a.jsx(to,{children:n.map(T=>a.jsxs(Dn,{children:[a.jsx(jt,{children:new Date(T.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsx(jt,{children:T.nome_usuario}),a.jsx(jt,{children:T.nome_admin}),a.jsx(jt,{className:"text-right",children:As(T.pontos_antes,0)}),a.jsx(jt,{className:"text-right",children:As(T.pontos_depois,0)}),a.jsxs(jt,{className:`text-right font-medium ${T.diferenca>0?"text-success":"text-destructive"}`,children:[T.diferenca>0?"+":"",As(T.diferenca,0)]}),a.jsx(jt,{children:a.jsx(Bt,{variant:T.motivo==="recalculo_automatico"?"default":"secondary",children:T.motivo==="recalculo_automatico"?"Reclculo":"Ajuste Manual"})})]},T.id))})]})})]}),a.jsx(hs,{open:h,onOpenChange:f,children:a.jsxs(as,{children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Ajuste Manual de Pontos"}),a.jsxs(Sl,{children:["Registre o motivo do ajuste para ",u==null?void 0:u.nome]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Pontos Atuais:"}),a.jsx("p",{className:"font-semibold",children:u==null?void 0:u.score_verde})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Pontos Esperados:"}),a.jsx("p",{className:"font-semibold",children:u==null?void 0:u.pontos_esperados})]})]}),a.jsx(Od,{placeholder:"Descreva o motivo do ajuste manual...",value:m,onChange:T=>x(T.target.value),rows:4})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:S,children:"Confirmar Ajuste"})]})]})})]})}const dfe={amazon:{bg:"from-orange-500 to-amber-600",text:"text-white",gradient:"bg-gradient-to-br"},magalu:{bg:"from-blue-600 to-blue-700",text:"text-white",gradient:"bg-gradient-to-br"},ifood:{bg:"from-red-500 to-red-600",text:"text-white",gradient:"bg-gradient-to-br"},mercadolivre:{bg:"from-yellow-400 to-yellow-500",text:"text-black",gradient:"bg-gradient-to-br"},casasbahia:{bg:"from-blue-700 to-blue-800",text:"text-white",gradient:"bg-gradient-to-br"},aliexpress:{bg:"from-red-600 to-orange-500",text:"text-white",gradient:"bg-gradient-to-br"},shopee:{bg:"from-orange-500 to-red-500",text:"text-white",gradient:"bg-gradient-to-br"},kabum:{bg:"from-orange-600 to-orange-700",text:"text-white",gradient:"bg-gradient-to-br"},uber:{bg:"from-black to-gray-800",text:"text-white",gradient:"bg-gradient-to-br"},rappi:{bg:"from-orange-500 to-red-500",text:"text-white",gradient:"bg-gradient-to-br"},default:{bg:"from-primary to-primary/80",text:"text-primary-foreground",gradient:"bg-gradient-to-br"}},M7t=t=>{const e=t.toLowerCase().replace(/[^a-z]/g,"");return dfe[e]||dfe.default},L7t=t=>t.charAt(0).toUpperCase();function F7t({cupons:t,pontosUsuario:e,onResgatar:r,isAdmin:n,onDelete:i}){const s=l=>e>=l.pontos_necessarios,o=l=>Math.max(0,l.pontos_necessarios-e);return t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx(Hu,{className:"h-16 w-16 text-muted-foreground/50 mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhum cupom disponvel no momento"})]}):a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4",children:t.map((l,c)=>{const u=M7t(l.marketplace),d=s(l),h=o(l);return a.jsxs(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:c*.05},whileHover:{scale:1.05,y:-4},whileTap:{scale:.98},className:"flex flex-col items-center group cursor-pointer",onClick:()=>d&&r(l.id),children:[a.jsxs(Ke.div,{className:`
                relative w-16 h-16 sm:w-20 sm:h-20 rounded-2xl ${u.gradient} ${u.bg}
                shadow-lg group-hover:shadow-xl transition-shadow duration-300
                flex items-center justify-center overflow-hidden
              `,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent 
                -translate-x-full group-hover:translate-x-full transition-transform duration-700`}),a.jsx("span",{className:`text-2xl sm:text-3xl font-bold ${u.text} relative z-10`,children:L7t(l.marketplace)}),d&&a.jsx(Ke.div,{className:"absolute -top-1 -right-1",initial:{scale:0},animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},children:a.jsx($b,{className:"h-4 w-4 text-yellow-400 drop-shadow-lg"})}),l.quantidade_disponivel<=l.limite_alerta&&a.jsx("div",{className:`absolute -bottom-1 -right-1 bg-destructive text-destructive-foreground 
                  text-[10px] px-1.5 py-0.5 rounded-full font-medium`,children:l.quantidade_disponivel})]}),a.jsx("p",{className:"mt-2 text-xs sm:text-sm font-medium text-center line-clamp-1 max-w-full px-1",children:l.marketplace}),a.jsxs("div",{className:"flex flex-col items-center mt-1",children:[a.jsx("span",{className:`text-sm sm:text-base font-bold ${d?"text-primary":"text-muted-foreground"}`,children:xY(l.valor_reais)}),a.jsx(ONe,{content:d?`Custo: ${l.pontos_necessarios} pontos`:`Faltam ${h} pontos para resgatar este cupom`,className:"text-xs max-w-[180px]",children:a.jsx("span",{className:`text-[10px] sm:text-xs mt-0.5 cursor-help ${d?"text-primary/70":"text-muted-foreground"}`,children:d?`${l.pontos_necessarios} pts`:`-${h} pts`})})]}),d&&a.jsx(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-2 w-full",children:a.jsx(Oe,{size:"sm",className:"w-full h-7 text-xs rounded-full",onClick:f=>{f.stopPropagation(),r(l.id)},children:"Resgatar"})}),n&&i&&a.jsx(Oe,{size:"sm",variant:"ghost",className:"mt-1 h-6 text-xs text-destructive hover:text-destructive",onClick:f=>{f.stopPropagation(),i(l.id)},children:"Remover"})]},l.id)})})}function B7t(){var Z;const t=nn(),{user:e,userRole:r,profile:n,refreshProfile:i}=Si(),{pontos:s,refetch:o}=gY(),[l,c]=C.useState([]),[u,d]=C.useState([]),[h,f]=C.useState(!0),[m,x]=C.useState(!1),[g,y]=C.useState(!1),[w,S]=C.useState(null),{toast:E}=Qi(),[j,T]=C.useState({marketplace:"",codigo:"",valor_reais:"",pontos_necessarios:"",minimo_compra:"",quantidade_total:"",data_validade:"",limite_alerta:"10"});C.useEffect(()=>{e&&(I(),M(),O())},[e]);const O=()=>{const se=Ee.channel("cupons-updates").on("postgres_changes",{event:"*",schema:"public",table:"cupons"},()=>{I()}).subscribe();return()=>{Ee.removeChannel(se)}},I=async()=>{const{data:se,error:K}=await Ee.from("cupons").select("*").eq("ativo",!0).eq("status","disponivel").gt("quantidade_disponivel",0).or("data_validade.is.null,data_validade.gte."+new Date().toISOString().split("T")[0]).order("valor_reais",{ascending:!0});K&&(console.error("Erro ao carregar cupons:",K),E({title:"Erro ao carregar cupons",description:K.message,variant:"destructive"})),c(se||[]),f(!1)},M=async()=>{if(!e)return;const{data:se,error:K}=await Ee.from("cupons_resgates").select(`
        *,
        cupons:id_cupom (marketplace, valor_reais, pontos_necessarios, data_validade)
      `).eq("id_usuario",e.id).order("data_resgate",{ascending:!1});K&&(console.error("Erro ao carregar meus cupons:",K),E({title:"Erro ao carregar cupons resgatados",description:K.message,variant:"destructive"})),d(se||[])},D=async se=>{if(!e)return;const{data:K,error:X}=await Ee.rpc("resgatar_cupom",{p_cupom_id:se,p_usuario_id:e.id});if(X||!(K!=null&&K.success)){E({title:"Erro ao resgatar",description:(K==null?void 0:K.error)||(X==null?void 0:X.message),variant:"destructive"});return}E({title:"Cupom resgatado! ",description:`Seu cdigo: ${K.codigo_unico}. Cupom de R$ ${K.valor_reais.toFixed(2)} resgatado por ${K.pontos_utilizados} pontos! Pontos restantes: ${K.pontos_restantes}`,duration:8e3}),S({valor_reais:K.valor_reais,codigo_unico:K.codigo_unico}),y(!0),await i(),await o(),await I(),await M()},z=async se=>{se.preventDefault();const{error:K}=await Ee.from("cupons").insert({marketplace:j.marketplace,codigo:j.codigo,valor_reais:parseFloat(j.valor_reais),pontos_necessarios:parseInt(j.pontos_necessarios),minimo_compra:parseFloat(j.minimo_compra),quantidade_total:parseInt(j.quantidade_total),quantidade_disponivel:parseInt(j.quantidade_total),quantidade_resgatada:0,data_validade:j.data_validade||null,limite_alerta:parseInt(j.limite_alerta),ativo:!0,status:"disponivel"});if(K){E({title:"Erro ao criar cupom",description:K.message,variant:"destructive"});return}E({title:"Cupom criado com sucesso!"}),x(!1),T({marketplace:"",codigo:"",valor_reais:"",pontos_necessarios:"",minimo_compra:"",quantidade_total:"",data_validade:"",limite_alerta:"10"}),I()},F=async se=>{const{error:K}=await Ee.from("cupons").update({ativo:!1}).eq("id",se);if(K){E({title:"Erro ao desativar cupom",description:K.message,variant:"destructive"});return}E({title:"Cupom desativado"}),I()},q=se=>{navigator.clipboard.writeText(se),E({title:"Cdigo copiado!",description:"Cole este cdigo no marketplace ao finalizar sua compra."})},Q=async se=>{const{error:K}=await Ee.from("cupons_resgates").update({status:"usado",data_uso:new Date().toISOString()}).eq("id",se);if(K){E({title:"Erro ao marcar como usado",description:K.message,variant:"destructive"});return}E({title:"Cupom marcado como usado"}),M()},re=se=>{const K={resgatado:"default",usado:"secondary",expirado:"destructive"},X={resgatado:"Resgatado",usado:"Usado",expirado:"Expirado"};return a.jsx(Bt,{variant:K[se],children:X[se]})};return h?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."}):a.jsxs("div",{className:"min-h-screen bg-background p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>t("/user"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Resgatar Cupons"}),a.jsx("p",{className:"text-muted-foreground",children:"Use seus pontos para resgatar cupons de desconto"})]})]}),a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:a.jsxs(it,{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/10 to-emerald-500/10 border-primary/20",children:[a.jsxs("div",{className:"absolute inset-0 opacity-5",children:[a.jsx("div",{className:"absolute top-4 right-4 w-32 h-32 rounded-full bg-primary blur-3xl"}),a.jsx("div",{className:"absolute bottom-4 left-4 w-24 h-24 rounded-full bg-emerald-500 blur-2xl"})]}),a.jsx(ht,{className:"pt-6 relative z-10",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Sua Pontuao"}),a.jsxs(Ke.p,{className:"text-4xl font-bold text-primary",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200},children:[s," pontos"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Complete misses e entregue reciclveis para ganhar mais pontos!"})]}),a.jsx(Ke.div,{className:"relative",animate:{rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:4,ease:"easeInOut"},children:a.jsxs("div",{className:"relative w-16 h-16 flex items-center justify-center",children:[a.jsx(Ke.div,{className:"absolute inset-0 rounded-full bg-primary/20",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2}}),a.jsx(lre,{className:"h-10 w-10 text-primary relative z-10"})]})})]})})]})}),a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"grid grid-cols-3 divide-x divide-border",children:[a.jsxs(Ke.div,{className:"flex flex-col items-center px-4",whileHover:{scale:1.05},children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10 mb-2",children:a.jsx(cre,{className:"h-5 w-5 text-primary"})}),a.jsx("span",{className:"text-2xl font-bold",children:l.length}),a.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Disponveis"})]}),a.jsxs(Ke.div,{className:"flex flex-col items-center px-4",whileHover:{scale:1.05},children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-500/10 mb-2",children:a.jsx(lre,{className:"h-5 w-5 text-amber-600"})}),a.jsx("span",{className:"text-2xl font-bold",children:(n==null?void 0:n.cupons_resgatados)||0}),a.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Resgatados"})]}),a.jsxs(Ke.div,{className:"flex flex-col items-center px-4",whileHover:{scale:1.05},children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-green-500/10 mb-2",children:a.jsx(cre,{className:"h-5 w-5 text-green-600"})}),a.jsx("span",{className:"text-2xl font-bold",children:u.filter(se=>se.status==="usado").length}),a.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Usados"})]})]})})})}),a.jsxs(yc,{defaultValue:"disponiveis",className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-2",children:[a.jsx(ri,{value:"disponiveis",children:"Cupons Disponveis"}),a.jsx(ri,{value:"meus",children:"Meus Cupons"})]}),a.jsxs(Ti,{value:"disponiveis",className:"space-y-4",children:[r==="admin"&&a.jsxs(hs,{open:m,onOpenChange:x,children:[a.jsx(X3,{asChild:!0,children:a.jsxs(Oe,{className:"w-full",children:[a.jsx(ya,{className:"mr-2 h-4 w-4"})," Adicionar Novo Lote de Cupons"]})}),a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Novo Lote de Gift Cards"})}),a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Marketplace"}),a.jsx(mt,{placeholder:"Ex: iFood",value:j.marketplace,onChange:se=>T({...j,marketplace:se.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Cdigo Base"}),a.jsx(mt,{placeholder:"Ex: IFOOD20",value:j.codigo,onChange:se=>T({...j,codigo:se.target.value}),required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Valor em R$"}),a.jsx(mt,{type:"number",step:"0.01",placeholder:"20.00",value:j.valor_reais,onChange:se=>T({...j,valor_reais:se.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Pontos Necessrios"}),a.jsx(mt,{type:"number",placeholder:"600",value:j.pontos_necessarios,onChange:se=>T({...j,pontos_necessarios:se.target.value}),required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"300pts=R$10, 600pts=R$20"})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Compra Mnima (R$)"}),a.jsx(mt,{type:"number",step:"0.01",value:j.minimo_compra,onChange:se=>T({...j,minimo_compra:se.target.value}),required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(nt,{children:"Quantidade Total"}),a.jsx(mt,{type:"number",value:j.quantidade_total,onChange:se=>T({...j,quantidade_total:se.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Limite de Alerta"}),a.jsx(mt,{type:"number",value:j.limite_alerta,onChange:se=>T({...j,limite_alerta:se.target.value}),required:!0})]})]}),a.jsxs("div",{children:[a.jsx(nt,{children:"Data de Validade"}),a.jsx(mt,{type:"date",value:j.data_validade,onChange:se=>T({...j,data_validade:se.target.value})})]}),a.jsx(Oe,{type:"submit",className:"w-full",children:"Criar Lote"})]})]})]}),a.jsx(it,{className:"p-6",children:a.jsx(F7t,{cupons:l,pontosUsuario:s,onResgatar:D,isAdmin:r==="admin",onDelete:F})})]}),a.jsx(Ti,{value:"meus",className:"space-y-4",children:u.length===0?a.jsx(it,{children:a.jsxs(ht,{className:"py-12 flex flex-col items-center justify-center text-center",children:[a.jsx(Hu,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Voc ainda no resgatou nenhum cupom"}),a.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Acumule pontos e resgate cupons de desconto!"}),a.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6",children:a.jsxs(Ke.button,{onClick:()=>t("/goals"),whileHover:{scale:1.05},whileTap:{scale:.98},className:`group relative px-6 py-3 rounded-full bg-gradient-to-r from-primary to-primary/80 
                        text-primary-foreground font-medium shadow-lg hover:shadow-xl transition-shadow
                        flex items-center gap-2 overflow-hidden`,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent 
                        -translate-x-full group-hover:translate-x-full transition-transform duration-700`}),a.jsx(Ke.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:2,repeatDelay:1},children:a.jsx(Dm,{className:"h-5 w-5"})}),a.jsx("span",{children:"Atingir metas e ganhar pontos"}),a.jsx(Ke.div,{animate:{x:[0,4,0]},transition:{repeat:1/0,duration:1.5},children:a.jsx(_f,{className:"h-5 w-5"})})]})})]})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(se=>a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:se.cupons.marketplace}),a.jsxs(gr,{children:["R$ ",se.cupons.valor_reais.toFixed(2)," por ",se.pontos_utilizados," pontos"]})]}),re(se.status)]})}),a.jsxs(ht,{className:"space-y-3",children:[a.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cdigo:"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("code",{className:"text-sm font-mono",children:se.codigo_unico}),a.jsx(Oe,{size:"icon",variant:"ghost",onClick:()=>q(se.codigo_unico),children:a.jsx(p3,{className:"h-4 w-4"})})]})]}),se.status==="resgatado"&&a.jsx(Oe,{variant:"outline",onClick:()=>Q(se.id),className:"w-full",children:"Marcar como Usado"})]})]},se.id))})})]})]}),a.jsx(hs,{open:g,onOpenChange:y,children:a.jsxs(as,{className:"sm:max-w-md",children:[a.jsx(fs,{children:a.jsx(ms,{children:"Cupom Resgatado com Sucesso! "})}),a.jsxs("div",{className:"space-y-4",children:[w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[a.jsxs("p",{className:"text-2xl font-bold text-primary",children:["R$ ",(Z=w.valor_reais)==null?void 0:Z.toFixed(2)]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Cdigo: ",w.codigo_unico]})]}),a.jsx($Q,{shareData:{type:"cupom_resgatado",valor_cupom:w.valor_reais},nomeUsuario:n==null?void 0:n.nome.split(" ")[0]})]}),a.jsx(Oe,{onClick:()=>y(!1),className:"w-full",variant:"outline",children:"Fechar"})]})]})})]})}const hfe=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"];function $7t({open:t,onOpenChange:e}){var re;const{user:r,profile:n}=Si(),[i,s]=C.useState(!0),[o,l]=C.useState([]),[c,u]=C.useState([]),[d,h]=C.useState(null),[f,m]=C.useState(""),[x,g]=C.useState(""),[y,w]=C.useState(!1),[S,E]=C.useState(null),[j,T]=C.useState("disponiveis");C.useEffect(()=>{t&&r&&O()},[t,r]);const O=async()=>{s(!0),await Promise.all([I(),M()]),s(!1)},I=async()=>{try{const{data:Z,error:se}=await Ee.from("rotas_coleta").select(`
          id,
          nome,
          descricao,
          operador:cooperativas(nome_fantasia)
        `).eq("status","ativa").order("nome");if(se)throw se;const K=await Promise.all((Z||[]).map(async xe=>{const[H,J]=await Promise.all([Ee.from("rotas_dias_coleta").select("dia_semana, horario_inicio, horario_fim").eq("id_rota",xe.id),Ee.from("rotas_areas_cobertura").select("bairro, cidade, uf").eq("id_rota",xe.id)]);return{...xe,operador:Array.isArray(xe.operador)?xe.operador[0]:xe.operador,dias:H.data||[],areas:J.data||[]}})),{data:X}=await Ee.from("usuarios_rotas").select("id_rota").eq("id_usuario",r==null?void 0:r.id).in("status",["ativa","pausada"]),Y=new Set((X||[]).map(xe=>xe.id_rota)),oe=K.filter(xe=>!Y.has(xe.id));l(oe)}catch(Z){cr.error("Erro ao carregar rotas",{description:Z.message})}},M=async()=>{try{const{data:Z,error:se}=await Ee.from("usuarios_rotas").select(`
          *,
          rota:rotas_coleta(
            nome,
            operador:cooperativas(nome_fantasia)
          )
        `).eq("id_usuario",r==null?void 0:r.id).order("data_adesao",{ascending:!1});if(se)throw se;u(Z||[]),(Z||[]).length>0&&T("minhas")}catch(Z){cr.error("Erro ao carregar adeses",{description:Z.message})}},D=Z=>{if(h(Z),n){const se=[n.logradouro,n.numero,n.complemento,n.bairro,n.cidade,n.uf,n.cep].filter(Boolean).join(", ");m(se)}},z=async()=>{if(!(!d||!r)){if(!f.trim()){cr.error("Informe o endereo de coleta");return}w(!0);try{const{data:Z}=await Ee.from("usuarios_rotas").select("*").eq("id_usuario",r.id).eq("id_rota",d.id).eq("status","cancelada").single();let se,K;if(Z){se=Z.qrcode_adesao,K=Z.hash_qrcode;const{error:oe}=await Ee.from("usuarios_rotas").update({status:"ativa",endereco_coleta:f,observacoes:x||null,data_adesao:new Date().toISOString()}).eq("id",Z.id);if(oe)throw oe}else{const{data:oe,error:xe}=await Ee.rpc("gerar_qrcode_adesao_rota");if(xe)throw xe;se=oe,K=crypto.randomUUID();const{error:H}=await Ee.from("usuarios_rotas").insert({id_usuario:r.id,id_rota:d.id,qrcode_adesao:se,hash_qrcode:K,endereco_coleta:f,observacoes:x||null,status:"ativa"});if(H)throw H}const X=JSON.stringify({tipo:"adesao_rota_ciclik",qrcode:se,hash:K,id_rota:d.id}),Y=await Dg.toDataURL(X,{width:400,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});E(Y),cr.success(Z?"Adeso reativada com sucesso!":"Adeso realizada com sucesso!"),O(),h(null),m(""),g(""),T("minhas")}catch(Z){cr.error("Erro ao aderir  rota",{description:Z.message})}finally{w(!1)}}},F=async Z=>{if(confirm("Deseja realmente cancelar esta adeso?"))try{const{error:se}=await Ee.from("usuarios_rotas").update({status:"cancelada"}).eq("id",Z);if(se)throw se;cr.success("Adeso cancelada"),O()}catch(se){cr.error("Erro ao cancelar",{description:se.message})}},q=async Z=>{try{const se=JSON.stringify({tipo:"adesao_rota_ciclik",qrcode:Z.qrcode_adesao,hash:Z.hash_qrcode,id_rota:Z.id_rota}),K=await Dg.toDataURL(se,{width:400,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),X=document.createElement("a");X.download=`qrcode-rota-${Z.qrcode_adesao}.png`,X.href=K,X.click()}catch{cr.error("Erro ao gerar QR Code")}},Q=()=>{h(null),E(null),e(!1)};return a.jsx(hs,{open:t,onOpenChange:Q,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsxs(ms,{className:"flex items-center gap-2",children:[a.jsx(Fp,{className:"h-5 w-5 text-primary"}),"Rotas de Coleta Semanal"]}),a.jsx(Sl,{children:"Adira a uma rota para receber coletas semanais com QR Code fixo"})]}),S?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block bg-white p-4 rounded-lg",children:a.jsx("img",{src:S,alt:"QR Code",className:"w-64 h-64"})}),a.jsx("p",{className:"mt-4 text-lg font-medium text-success",children:" Adeso realizada com sucesso!"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Este  seu QR Code fixo. Imprima e deixe visvel para o coletor."})]}),a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsxs(Oe,{variant:"outline",onClick:()=>{const Z=document.createElement("a");Z.download="qrcode-rota.png",Z.href=S,Z.click()},children:[a.jsx(ou,{className:"mr-2 h-4 w-4"}),"Baixar QR Code"]}),a.jsx(Oe,{onClick:()=>E(null),children:"Continuar"})]})]}):d?a.jsxs("div",{className:"space-y-4",children:[a.jsx(it,{children:a.jsxs(ht,{className:"pt-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:d.nome}),a.jsx("p",{className:"text-sm text-muted-foreground",children:((re=d.operador)==null?void 0:re.nome_fantasia)||"Operador no definido"})]}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>h(null),children:a.jsx(Xa,{className:"h-4 w-4"})})]}),d.dias&&d.dias.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:d.dias.map((Z,se)=>a.jsxs(Bt,{variant:"outline",className:"text-xs",children:[hfe[Z.dia_semana],Z.horario_inicio&&` ${Z.horario_inicio.slice(0,5)}`]},se))})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"endereco",children:"Endereo de Coleta *"}),a.jsx(Od,{id:"endereco",value:f,onChange:Z=>m(Z.target.value),placeholder:"Endereo completo onde os materiais sero coletados",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"obs",children:"Observaes (opcional)"}),a.jsx(mt,{id:"obs",value:x,onChange:Z=>g(Z.target.value),placeholder:"Ex: Porto azul, tocar a campainha"})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>h(null),children:"Voltar"}),a.jsxs(Oe,{onClick:z,disabled:y,children:[y&&a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirmar Adeso"]})]})]}):a.jsxs(yc,{value:j,onValueChange:T,children:[a.jsxs(Jl,{className:"w-full",children:[a.jsx(ri,{value:"disponiveis",className:"flex-1",children:"Rotas Disponveis"}),a.jsxs(ri,{value:"minhas",className:"flex-1",children:["Minhas Rotas (",c.filter(Z=>Z.status==="ativa").length,")"]})]}),a.jsx(Ti,{value:"disponiveis",className:"space-y-3 mt-4",children:i?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"})}):o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Fp,{className:"h-12 w-12 mx-auto text-muted-foreground mb-2"}),a.jsx("p",{className:"text-muted-foreground",children:c.length>0?"Voc j aderiu a todas as rotas disponveis":"Nenhuma rota disponvel na sua regio"})]}):o.map(Z=>{var se;return a.jsx(it,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>D(Z),children:a.jsxs(ht,{className:"pt-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:Z.nome}),a.jsx("p",{className:"text-sm text-muted-foreground",children:((se=Z.operador)==null?void 0:se.nome_fantasia)||"Operador no definido"}),Z.descricao&&a.jsx("p",{className:"text-sm mt-1",children:Z.descricao})]}),a.jsx(Oe,{size:"sm",children:"Aderir"})]}),a.jsxs("div",{className:"mt-3 space-y-2",children:[Z.dias&&Z.dias.length>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Gl,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:Z.dias.map((K,X)=>a.jsx(Bt,{variant:"secondary",className:"text-xs",children:hfe[K.dia_semana]},X))})]}),Z.areas&&Z.areas.length>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Rm,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:(()=>{var xe,H;const K=(xe=Z.areas[0])==null?void 0:xe.uf,X=(H=Z.areas[0])==null?void 0:H.cidade,Y=[...new Set(Z.areas.map(J=>J.bairro).filter(Boolean))],oe=[];return Y.length>0&&oe.push(Y.slice(0,2).join(", ")+(Y.length>2?` +${Y.length-2}`:"")),X&&oe.push(X),K&&oe.push(K),oe.join(" - ")})()})]})]})]})},Z.id)})}),a.jsx(Ti,{value:"minhas",className:"space-y-3 mt-4",children:c.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(zu,{className:"h-12 w-12 mx-auto text-muted-foreground mb-2"}),a.jsx("p",{className:"text-muted-foreground",children:"Voc ainda no aderiu a nenhuma rota"})]}):c.map(Z=>{var se,K,X;return a.jsx(it,{children:a.jsxs(ht,{className:"pt-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-semibold",children:(se=Z.rota)==null?void 0:se.nome}),Z.status==="ativa"?a.jsx(Bt,{className:"bg-success/20 text-success",children:"Ativa"}):Z.status==="pausada"?a.jsx(Bt,{variant:"secondary",children:"Pausada"}):a.jsx(Bt,{variant:"destructive",children:"Cancelada"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(X=(K=Z.rota)==null?void 0:K.operador)==null?void 0:X.nome_fantasia})]}),Z.status==="ativa"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>q(Z),children:a.jsx(zu,{className:"h-4 w-4"})}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>F(Z.id),children:a.jsx(Xa,{className:"h-4 w-4 text-destructive"})})]})]}),a.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Rm,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),a.jsx("span",{className:"text-muted-foreground",children:Z.endereco_coleta})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zu,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:Z.qrcode_adesao})]})]})]})},Z.id)})})]})]})})}const U7t=({materials:t,selectedIds:e,onToggle:r,onDelete:n,onSelectAll:i,onClearAll:s})=>{const[o,l]=C.useState(!1),c=h=>h>=1e3?`${(h/1e3).toFixed(2).replace(".",",")} kg`:`${h.toFixed(0)} g`,u=t.filter(h=>e.has(h.id)),d=t.length>0&&e.size===t.length;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs(ng,{open:o,onOpenChange:l,children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between h-12 text-left font-normal",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:e.size===0?"Selecionar materiais...":`${e.size} ${e.size===1?"material selecionado":"materiais selecionados"}`})]}),a.jsx(MC,{className:Ut("h-4 w-4 shrink-0 opacity-50 transition-transform",o&&"rotate-180")})]})}),a.jsxs(Rp,{className:"w-[var(--radix-popover-trigger-width)] p-0 bg-background border shadow-lg",align:"start",sideOffset:4,style:{zIndex:9999},children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[t.length," ",t.length===1?"disponvel":"disponveis"]}),a.jsxs("div",{className:"flex gap-2",children:[e.size>0&&a.jsx(Oe,{variant:"ghost",size:"sm",onClick:h=>{h.stopPropagation(),s()},className:"h-7 text-xs",children:"Limpar"}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:h=>{h.stopPropagation(),d?s():i()},className:"h-7 text-xs",children:d?"Desmarcar todos":"Selecionar todos"})]})]}),a.jsx(QJ,{className:"max-h-[280px]",children:t.length===0?a.jsx("div",{className:"p-6 text-center text-muted-foreground text-sm",children:"Nenhum material disponvel"}):a.jsx("div",{className:"p-1",children:t.map(h=>{const f=e.has(h.id),m=!h.peso_gramas&&h.origem_cadastro==="manual";return a.jsxs("div",{className:Ut("flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors group",f?"bg-primary/10":"hover:bg-muted/50"),onClick:()=>r(h.id),children:[a.jsx(MB,{checked:f,onCheckedChange:()=>r(h.id),onClick:x=>x.stopPropagation(),className:"shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:h.descricao}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.tipo_embalagem,h.peso_gramas>0&&`  ${c(h.peso_gramas)}`,m&&"  A pesar"]})]}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:x=>{x.stopPropagation(),n(h.id)},className:"h-7 w-7 opacity-0 group-hover:opacity-100 text-destructive hover:text-destructive hover:bg-destructive/10 shrink-0",children:a.jsx(vl,{className:"h-3.5 w-3.5"})})]},h.id)})})})]})]}),a.jsx(Cf,{mode:"popLayout",children:u.length>0&&a.jsx(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex flex-wrap gap-2",children:u.map(h=>a.jsx(Ke.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},layout:!0,children:a.jsxs(Bt,{variant:"secondary",className:"pl-2 pr-1 py-1 gap-1 text-xs font-normal max-w-[180px]",children:[a.jsx("span",{className:"truncate",children:h.descricao}),a.jsx("button",{onClick:()=>r(h.id),className:"ml-1 hover:bg-muted rounded-full p-0.5",children:a.jsx(Xa,{className:"h-3 w-3"})})]})},h.id))})})]})};var NK={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(r,n){n(e)})(pm,function(r){var n="1.9.4";function i(b){var k,V,ne,pe;for(V=1,ne=arguments.length;V<ne;V++){pe=arguments[V];for(k in pe)b[k]=pe[k]}return b}var s=Object.create||function(){function b(){}return function(k){return b.prototype=k,new b}}();function o(b,k){var V=Array.prototype.slice;if(b.bind)return b.bind.apply(b,V.call(arguments,1));var ne=V.call(arguments,2);return function(){return b.apply(k,ne.length?ne.concat(V.call(arguments)):arguments)}}var l=0;function c(b){return"_leaflet_id"in b||(b._leaflet_id=++l),b._leaflet_id}function u(b,k,V){var ne,pe,Ie,ot;return ot=function(){ne=!1,pe&&(Ie.apply(V,pe),pe=!1)},Ie=function(){ne?pe=arguments:(b.apply(V,arguments),setTimeout(ot,k),ne=!0)},Ie}function d(b,k,V){var ne=k[1],pe=k[0],Ie=ne-pe;return b===ne&&V?b:((b-pe)%Ie+Ie)%Ie+pe}function h(){return!1}function f(b,k){if(k===!1)return b;var V=Math.pow(10,k===void 0?6:k);return Math.round(b*V)/V}function m(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")}function x(b){return m(b).split(/\s+/)}function g(b,k){Object.prototype.hasOwnProperty.call(b,"options")||(b.options=b.options?s(b.options):{});for(var V in k)b.options[V]=k[V];return b.options}function y(b,k,V){var ne=[];for(var pe in b)ne.push(encodeURIComponent(V?pe.toUpperCase():pe)+"="+encodeURIComponent(b[pe]));return(!k||k.indexOf("?")===-1?"?":"&")+ne.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function S(b,k){return b.replace(w,function(V,ne){var pe=k[ne];if(pe===void 0)throw new Error("No value provided for variable "+V);return typeof pe=="function"&&(pe=pe(k)),pe})}var E=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"};function j(b,k){for(var V=0;V<b.length;V++)if(b[V]===k)return V;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(b){return window["webkit"+b]||window["moz"+b]||window["ms"+b]}var I=0;function M(b){var k=+new Date,V=Math.max(0,16-(k-I));return I=k+V,window.setTimeout(b,V)}var D=window.requestAnimationFrame||O("RequestAnimationFrame")||M,z=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(b){window.clearTimeout(b)};function F(b,k,V){if(V&&D===M)b.call(k);else return D.call(window,o(b,k))}function q(b){b&&z.call(window,b)}var Q={__proto__:null,extend:i,create:s,bind:o,get lastId(){return l},stamp:c,throttle:u,wrapNum:d,falseFn:h,formatNum:f,trim:m,splitWords:x,setOptions:g,getParamString:y,template:S,isArray:E,indexOf:j,emptyImageUrl:T,requestFn:D,cancelFn:z,requestAnimFrame:F,cancelAnimFrame:q};function re(){}re.extend=function(b){var k=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},V=k.__super__=this.prototype,ne=s(V);ne.constructor=k,k.prototype=ne;for(var pe in this)Object.prototype.hasOwnProperty.call(this,pe)&&pe!=="prototype"&&pe!=="__super__"&&(k[pe]=this[pe]);return b.statics&&i(k,b.statics),b.includes&&(Z(b.includes),i.apply(null,[ne].concat(b.includes))),i(ne,b),delete ne.statics,delete ne.includes,ne.options&&(ne.options=V.options?s(V.options):{},i(ne.options,b.options)),ne._initHooks=[],ne.callInitHooks=function(){if(!this._initHooksCalled){V.callInitHooks&&V.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ie=0,ot=ne._initHooks.length;Ie<ot;Ie++)ne._initHooks[Ie].call(this)}},k},re.include=function(b){var k=this.prototype.options;return i(this.prototype,b),b.options&&(this.prototype.options=k,this.mergeOptions(b.options)),this},re.mergeOptions=function(b){return i(this.prototype.options,b),this},re.addInitHook=function(b){var k=Array.prototype.slice.call(arguments,1),V=typeof b=="function"?b:function(){this[b].apply(this,k)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(V),this};function Z(b){if(!(typeof L>"u"||!L||!L.Mixin)){b=E(b)?b:[b];for(var k=0;k<b.length;k++)b[k]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var se={on:function(b,k,V){if(typeof b=="object")for(var ne in b)this._on(ne,b[ne],k);else{b=x(b);for(var pe=0,Ie=b.length;pe<Ie;pe++)this._on(b[pe],k,V)}return this},off:function(b,k,V){if(!arguments.length)delete this._events;else if(typeof b=="object")for(var ne in b)this._off(ne,b[ne],k);else{b=x(b);for(var pe=arguments.length===1,Ie=0,ot=b.length;Ie<ot;Ie++)pe?this._off(b[Ie]):this._off(b[Ie],k,V)}return this},_on:function(b,k,V,ne){if(typeof k!="function"){console.warn("wrong listener type: "+typeof k);return}if(this._listens(b,k,V)===!1){V===this&&(V=void 0);var pe={fn:k,ctx:V};ne&&(pe.once=!0),this._events=this._events||{},this._events[b]=this._events[b]||[],this._events[b].push(pe)}},_off:function(b,k,V){var ne,pe,Ie;if(this._events&&(ne=this._events[b],!!ne)){if(arguments.length===1){if(this._firingCount)for(pe=0,Ie=ne.length;pe<Ie;pe++)ne[pe].fn=h;delete this._events[b];return}if(typeof k!="function"){console.warn("wrong listener type: "+typeof k);return}var ot=this._listens(b,k,V);if(ot!==!1){var St=ne[ot];this._firingCount&&(St.fn=h,this._events[b]=ne=ne.slice()),ne.splice(ot,1)}}},fire:function(b,k,V){if(!this.listens(b,V))return this;var ne=i({},k,{type:b,target:this,sourceTarget:k&&k.sourceTarget||this});if(this._events){var pe=this._events[b];if(pe){this._firingCount=this._firingCount+1||1;for(var Ie=0,ot=pe.length;Ie<ot;Ie++){var St=pe[Ie],Ft=St.fn;St.once&&this.off(b,Ft,St.ctx),Ft.call(St.ctx||this,ne)}this._firingCount--}}return V&&this._propagateEvent(ne),this},listens:function(b,k,V,ne){typeof b!="string"&&console.warn('"string" type argument expected');var pe=k;typeof k!="function"&&(ne=!!k,pe=void 0,V=void 0);var Ie=this._events&&this._events[b];if(Ie&&Ie.length&&this._listens(b,pe,V)!==!1)return!0;if(ne){for(var ot in this._eventParents)if(this._eventParents[ot].listens(b,k,V,ne))return!0}return!1},_listens:function(b,k,V){if(!this._events)return!1;var ne=this._events[b]||[];if(!k)return!!ne.length;V===this&&(V=void 0);for(var pe=0,Ie=ne.length;pe<Ie;pe++)if(ne[pe].fn===k&&ne[pe].ctx===V)return pe;return!1},once:function(b,k,V){if(typeof b=="object")for(var ne in b)this._on(ne,b[ne],k,!0);else{b=x(b);for(var pe=0,Ie=b.length;pe<Ie;pe++)this._on(b[pe],k,V,!0)}return this},addEventParent:function(b){return this._eventParents=this._eventParents||{},this._eventParents[c(b)]=b,this},removeEventParent:function(b){return this._eventParents&&delete this._eventParents[c(b)],this},_propagateEvent:function(b){for(var k in this._eventParents)this._eventParents[k].fire(b.type,i({layer:b.target,propagatedFrom:b.target},b),!0)}};se.addEventListener=se.on,se.removeEventListener=se.clearAllEventListeners=se.off,se.addOneTimeEventListener=se.once,se.fireEvent=se.fire,se.hasEventListeners=se.listens;var K=re.extend(se);function X(b,k,V){this.x=V?Math.round(b):b,this.y=V?Math.round(k):k}var Y=Math.trunc||function(b){return b>0?Math.floor(b):Math.ceil(b)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(b){return this.clone()._add(oe(b))},_add:function(b){return this.x+=b.x,this.y+=b.y,this},subtract:function(b){return this.clone()._subtract(oe(b))},_subtract:function(b){return this.x-=b.x,this.y-=b.y,this},divideBy:function(b){return this.clone()._divideBy(b)},_divideBy:function(b){return this.x/=b,this.y/=b,this},multiplyBy:function(b){return this.clone()._multiplyBy(b)},_multiplyBy:function(b){return this.x*=b,this.y*=b,this},scaleBy:function(b){return new X(this.x*b.x,this.y*b.y)},unscaleBy:function(b){return new X(this.x/b.x,this.y/b.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(b){b=oe(b);var k=b.x-this.x,V=b.y-this.y;return Math.sqrt(k*k+V*V)},equals:function(b){return b=oe(b),b.x===this.x&&b.y===this.y},contains:function(b){return b=oe(b),Math.abs(b.x)<=Math.abs(this.x)&&Math.abs(b.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function oe(b,k,V){return b instanceof X?b:E(b)?new X(b[0],b[1]):b==null?b:typeof b=="object"&&"x"in b&&"y"in b?new X(b.x,b.y):new X(b,k,V)}function xe(b,k){if(b)for(var V=k?[b,k]:b,ne=0,pe=V.length;ne<pe;ne++)this.extend(V[ne])}xe.prototype={extend:function(b){var k,V;if(!b)return this;if(b instanceof X||typeof b[0]=="number"||"x"in b)k=V=oe(b);else if(b=H(b),k=b.min,V=b.max,!k||!V)return this;return!this.min&&!this.max?(this.min=k.clone(),this.max=V.clone()):(this.min.x=Math.min(k.x,this.min.x),this.max.x=Math.max(V.x,this.max.x),this.min.y=Math.min(k.y,this.min.y),this.max.y=Math.max(V.y,this.max.y)),this},getCenter:function(b){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,b)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(b){var k,V;return typeof b[0]=="number"||b instanceof X?b=oe(b):b=H(b),b instanceof xe?(k=b.min,V=b.max):k=V=b,k.x>=this.min.x&&V.x<=this.max.x&&k.y>=this.min.y&&V.y<=this.max.y},intersects:function(b){b=H(b);var k=this.min,V=this.max,ne=b.min,pe=b.max,Ie=pe.x>=k.x&&ne.x<=V.x,ot=pe.y>=k.y&&ne.y<=V.y;return Ie&&ot},overlaps:function(b){b=H(b);var k=this.min,V=this.max,ne=b.min,pe=b.max,Ie=pe.x>k.x&&ne.x<V.x,ot=pe.y>k.y&&ne.y<V.y;return Ie&&ot},isValid:function(){return!!(this.min&&this.max)},pad:function(b){var k=this.min,V=this.max,ne=Math.abs(k.x-V.x)*b,pe=Math.abs(k.y-V.y)*b;return H(oe(k.x-ne,k.y-pe),oe(V.x+ne,V.y+pe))},equals:function(b){return b?(b=H(b),this.min.equals(b.getTopLeft())&&this.max.equals(b.getBottomRight())):!1}};function H(b,k){return!b||b instanceof xe?b:new xe(b,k)}function J(b,k){if(b)for(var V=k?[b,k]:b,ne=0,pe=V.length;ne<pe;ne++)this.extend(V[ne])}J.prototype={extend:function(b){var k=this._southWest,V=this._northEast,ne,pe;if(b instanceof ce)ne=b,pe=b;else if(b instanceof J){if(ne=b._southWest,pe=b._northEast,!ne||!pe)return this}else return b?this.extend(me(b)||ie(b)):this;return!k&&!V?(this._southWest=new ce(ne.lat,ne.lng),this._northEast=new ce(pe.lat,pe.lng)):(k.lat=Math.min(ne.lat,k.lat),k.lng=Math.min(ne.lng,k.lng),V.lat=Math.max(pe.lat,V.lat),V.lng=Math.max(pe.lng,V.lng)),this},pad:function(b){var k=this._southWest,V=this._northEast,ne=Math.abs(k.lat-V.lat)*b,pe=Math.abs(k.lng-V.lng)*b;return new J(new ce(k.lat-ne,k.lng-pe),new ce(V.lat+ne,V.lng+pe))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(b){typeof b[0]=="number"||b instanceof ce||"lat"in b?b=me(b):b=ie(b);var k=this._southWest,V=this._northEast,ne,pe;return b instanceof J?(ne=b.getSouthWest(),pe=b.getNorthEast()):ne=pe=b,ne.lat>=k.lat&&pe.lat<=V.lat&&ne.lng>=k.lng&&pe.lng<=V.lng},intersects:function(b){b=ie(b);var k=this._southWest,V=this._northEast,ne=b.getSouthWest(),pe=b.getNorthEast(),Ie=pe.lat>=k.lat&&ne.lat<=V.lat,ot=pe.lng>=k.lng&&ne.lng<=V.lng;return Ie&&ot},overlaps:function(b){b=ie(b);var k=this._southWest,V=this._northEast,ne=b.getSouthWest(),pe=b.getNorthEast(),Ie=pe.lat>k.lat&&ne.lat<V.lat,ot=pe.lng>k.lng&&ne.lng<V.lng;return Ie&&ot},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(b,k){return b?(b=ie(b),this._southWest.equals(b.getSouthWest(),k)&&this._northEast.equals(b.getNorthEast(),k)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(b,k){return b instanceof J?b:new J(b,k)}function ce(b,k,V){if(isNaN(b)||isNaN(k))throw new Error("Invalid LatLng object: ("+b+", "+k+")");this.lat=+b,this.lng=+k,V!==void 0&&(this.alt=+V)}ce.prototype={equals:function(b,k){if(!b)return!1;b=me(b);var V=Math.max(Math.abs(this.lat-b.lat),Math.abs(this.lng-b.lng));return V<=(k===void 0?1e-9:k)},toString:function(b){return"LatLng("+f(this.lat,b)+", "+f(this.lng,b)+")"},distanceTo:function(b){return _e.distance(this,me(b))},wrap:function(){return _e.wrapLatLng(this)},toBounds:function(b){var k=180*b/40075017,V=k/Math.cos(Math.PI/180*this.lat);return ie([this.lat-k,this.lng-V],[this.lat+k,this.lng+V])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function me(b,k,V){return b instanceof ce?b:E(b)&&typeof b[0]!="object"?b.length===3?new ce(b[0],b[1],b[2]):b.length===2?new ce(b[0],b[1]):null:b==null?b:typeof b=="object"&&"lat"in b?new ce(b.lat,"lng"in b?b.lng:b.lon,b.alt):k===void 0?null:new ce(b,k,V)}var he={latLngToPoint:function(b,k){var V=this.projection.project(b),ne=this.scale(k);return this.transformation._transform(V,ne)},pointToLatLng:function(b,k){var V=this.scale(k),ne=this.transformation.untransform(b,V);return this.projection.unproject(ne)},project:function(b){return this.projection.project(b)},unproject:function(b){return this.projection.unproject(b)},scale:function(b){return 256*Math.pow(2,b)},zoom:function(b){return Math.log(b/256)/Math.LN2},getProjectedBounds:function(b){if(this.infinite)return null;var k=this.projection.bounds,V=this.scale(b),ne=this.transformation.transform(k.min,V),pe=this.transformation.transform(k.max,V);return new xe(ne,pe)},infinite:!1,wrapLatLng:function(b){var k=this.wrapLng?d(b.lng,this.wrapLng,!0):b.lng,V=this.wrapLat?d(b.lat,this.wrapLat,!0):b.lat,ne=b.alt;return new ce(V,k,ne)},wrapLatLngBounds:function(b){var k=b.getCenter(),V=this.wrapLatLng(k),ne=k.lat-V.lat,pe=k.lng-V.lng;if(ne===0&&pe===0)return b;var Ie=b.getSouthWest(),ot=b.getNorthEast(),St=new ce(Ie.lat-ne,Ie.lng-pe),Ft=new ce(ot.lat-ne,ot.lng-pe);return new J(St,Ft)}},_e=i({},he,{wrapLng:[-180,180],R:6371e3,distance:function(b,k){var V=Math.PI/180,ne=b.lat*V,pe=k.lat*V,Ie=Math.sin((k.lat-b.lat)*V/2),ot=Math.sin((k.lng-b.lng)*V/2),St=Ie*Ie+Math.cos(ne)*Math.cos(pe)*ot*ot,Ft=2*Math.atan2(Math.sqrt(St),Math.sqrt(1-St));return this.R*Ft}}),ue=6378137,je={R:ue,MAX_LATITUDE:85.0511287798,project:function(b){var k=Math.PI/180,V=this.MAX_LATITUDE,ne=Math.max(Math.min(V,b.lat),-V),pe=Math.sin(ne*k);return new X(this.R*b.lng*k,this.R*Math.log((1+pe)/(1-pe))/2)},unproject:function(b){var k=180/Math.PI;return new ce((2*Math.atan(Math.exp(b.y/this.R))-Math.PI/2)*k,b.x*k/this.R)},bounds:function(){var b=ue*Math.PI;return new xe([-b,-b],[b,b])}()};function ye(b,k,V,ne){if(E(b)){this._a=b[0],this._b=b[1],this._c=b[2],this._d=b[3];return}this._a=b,this._b=k,this._c=V,this._d=ne}ye.prototype={transform:function(b,k){return this._transform(b.clone(),k)},_transform:function(b,k){return k=k||1,b.x=k*(this._a*b.x+this._b),b.y=k*(this._c*b.y+this._d),b},untransform:function(b,k){return k=k||1,new X((b.x/k-this._b)/this._a,(b.y/k-this._d)/this._c)}};function Le(b,k,V,ne){return new ye(b,k,V,ne)}var Ge=i({},_e,{code:"EPSG:3857",projection:je,transformation:function(){var b=.5/(Math.PI*je.R);return Le(b,.5,-b,.5)}()}),Be=i({},Ge,{code:"EPSG:900913"});function Te(b){return document.createElementNS("http://www.w3.org/2000/svg",b)}function ze(b,k){var V="",ne,pe,Ie,ot,St,Ft;for(ne=0,Ie=b.length;ne<Ie;ne++){for(St=b[ne],pe=0,ot=St.length;pe<ot;pe++)Ft=St[pe],V+=(pe?"L":"M")+Ft.x+" "+Ft.y;V+=k?Mr.svg?"z":"x":""}return V||"M0 0"}var tt=document.documentElement.style,Re="ActiveXObject"in window,Ue=Re&&!document.addEventListener,xt="msLaunchUri"in navigator&&!("documentMode"in document),st=$n("webkit"),Xt=$n("android"),Jt=$n("android 2")||$n("android 3"),_r=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=Xt&&$n("Google")&&_r<537&&!("AudioNode"in window),pt=!!window.opera,er=!xt&&$n("chrome"),Vt=$n("gecko")&&!st&&!pt&&!Re,Kt=!er&&$n("safari"),ur=$n("phantom"),rt="OTransition"in tt,Lt=navigator.platform.indexOf("Win")===0,Dt=Re&&"transition"in tt,Fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Jt,ut="MozPerspective"in tt,Mt=!window.L_DISABLE_3D&&(Dt||Fe||ut)&&!rt&&!ur,Ht=typeof orientation<"u"||$n("mobile"),Wt=Ht&&st,zt=Ht&&Fe,Rr=!window.PointerEvent&&window.MSPointerEvent,vr=!!(window.PointerEvent||Rr),Cr="ontouchstart"in window||!!window.TouchEvent,Pr=!window.L_NO_TOUCH&&(Cr||vr),Qr=Ht&&pt,Tr=Ht&&Vt,Gr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ln=function(){var b=!1;try{var k=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("testPassiveEventSupport",h,k),window.removeEventListener("testPassiveEventSupport",h,k)}catch{}return b}(),vi=function(){return!!document.createElement("canvas").getContext}(),Fr=!!(document.createElementNS&&Te("svg").createSVGRect),Bi=!!Fr&&function(){var b=document.createElement("div");return b.innerHTML="<svg/>",(b.firstChild&&b.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),da=!Fr&&function(){try{var b=document.createElement("div");b.innerHTML='<v:shape adj="1"/>';var k=b.firstChild;return k.style.behavior="url(#default#VML)",k&&typeof k.adj=="object"}catch{return!1}}(),$i=navigator.platform.indexOf("Mac")===0,ks=navigator.platform.indexOf("Linux")===0;function $n(b){return navigator.userAgent.toLowerCase().indexOf(b)>=0}var Mr={ie:Re,ielt9:Ue,edge:xt,webkit:st,android:Xt,android23:Jt,androidStock:lt,opera:pt,chrome:er,gecko:Vt,safari:Kt,phantom:ur,opera12:rt,win:Lt,ie3d:Dt,webkit3d:Fe,gecko3d:ut,any3d:Mt,mobile:Ht,mobileWebkit:Wt,mobileWebkit3d:zt,msPointer:Rr,pointer:vr,touch:Pr,touchNative:Cr,mobileOpera:Qr,mobileGecko:Tr,retina:Gr,passiveEvents:ln,canvas:vi,svg:Fr,vml:da,inlineSvg:Bi,mac:$i,linux:ks},Ce=Mr.msPointer?"MSPointerDown":"pointerdown",Me=Mr.msPointer?"MSPointerMove":"pointermove",Ve=Mr.msPointer?"MSPointerUp":"pointerup",He=Mr.msPointer?"MSPointerCancel":"pointercancel",Xe={touchstart:Ce,touchmove:Me,touchend:Ve,touchcancel:He},Qe={touchstart:kr,touchmove:Sr,touchend:Sr,touchcancel:Sr},bt={},$t=!1;function wt(b,k,V){return k==="touchstart"&&Nr(),Qe[k]?(V=Qe[k].bind(this,V),b.addEventListener(Xe[k],V,!1),V):(console.warn("wrong event specified:",k),h)}function Et(b,k,V){if(!Xe[k]){console.warn("wrong event specified:",k);return}b.removeEventListener(Xe[k],V,!1)}function kt(b){bt[b.pointerId]=b}function fr(b){bt[b.pointerId]&&(bt[b.pointerId]=b)}function br(b){delete bt[b.pointerId]}function Nr(){$t||(document.addEventListener(Ce,kt,!0),document.addEventListener(Me,fr,!0),document.addEventListener(Ve,br,!0),document.addEventListener(He,br,!0),$t=!0)}function Sr(b,k){if(k.pointerType!==(k.MSPOINTER_TYPE_MOUSE||"mouse")){k.touches=[];for(var V in bt)k.touches.push(bt[V]);k.changedTouches=[k],b(k)}}function kr(b,k){k.MSPOINTER_TYPE_TOUCH&&k.pointerType===k.MSPOINTER_TYPE_TOUCH&&ra(k),Sr(b,k)}function Tn(b){var k={},V,ne;for(ne in b)V=b[ne],k[ne]=V&&V.bind?V.bind(b):V;return b=k,k.type="dblclick",k.detail=2,k.isTrusted=!1,k._simulated=!0,k}var qt=200;function Oi(b,k){b.addEventListener("dblclick",k);var V=0,ne;function pe(Ie){if(Ie.detail!==1){ne=Ie.detail;return}if(!(Ie.pointerType==="mouse"||Ie.sourceCapabilities&&!Ie.sourceCapabilities.firesTouchEvents)){var ot=Qu(Ie);if(!(ot.some(function(Ft){return Ft instanceof HTMLLabelElement&&Ft.attributes.for})&&!ot.some(function(Ft){return Ft instanceof HTMLInputElement||Ft instanceof HTMLSelectElement}))){var St=Date.now();St-V<=qt?(ne++,ne===2&&k(Tn(Ie))):ne=1,V=St}}}return b.addEventListener("click",pe),{dblclick:k,simDblclick:pe}}function Jn(b,k){b.removeEventListener("dblclick",k.dblclick),b.removeEventListener("click",k.simDblclick)}var Ho=_t(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Al=_t(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),si=Al==="webkitTransition"||Al==="OTransition"?Al+"End":"transitionend";function ei(b){return typeof b=="string"?document.getElementById(b):b}function Un(b,k){var V=b.style[k]||b.currentStyle&&b.currentStyle[k];if((!V||V==="auto")&&document.defaultView){var ne=document.defaultView.getComputedStyle(b,null);V=ne?ne[k]:null}return V==="auto"?null:V}function On(b,k,V){var ne=document.createElement(b);return ne.className=k||"",V&&V.appendChild(ne),ne}function xs(b){var k=b.parentNode;k&&k.removeChild(b)}function Os(b){for(;b.firstChild;)b.removeChild(b.firstChild)}function vs(b){var k=b.parentNode;k&&k.lastChild!==b&&k.appendChild(b)}function ll(b){var k=b.parentNode;k&&k.firstChild!==b&&k.insertBefore(b,k.firstChild)}function Yu(b,k){if(b.classList!==void 0)return b.classList.contains(k);var V=rs(b);return V.length>0&&new RegExp("(^|\\s)"+k+"(\\s|$)").test(V)}function Kr(b,k){if(b.classList!==void 0)for(var V=x(k),ne=0,pe=V.length;ne<pe;ne++)b.classList.add(V[ne]);else if(!Yu(b,k)){var Ie=rs(b);bh(b,(Ie?Ie+" ":"")+k)}}function yi(b,k){b.classList!==void 0?b.classList.remove(k):bh(b,m((" "+rs(b)+" ").replace(" "+k+" "," ")))}function bh(b,k){b.className.baseVal===void 0?b.className=k:b.className.baseVal=k}function rs(b){return b.correspondingElement&&(b=b.correspondingElement),b.className.baseVal===void 0?b.className:b.className.baseVal}function ni(b,k){"opacity"in b.style?b.style.opacity=k:"filter"in b.style&&bo(b,k)}function bo(b,k){var V=!1,ne="DXImageTransform.Microsoft.Alpha";try{V=b.filters.item(ne)}catch{if(k===1)return}k=Math.round(k*100),V?(V.Enabled=k!==100,V.Opacity=k):b.style.filter+=" progid:"+ne+"(opacity="+k+")"}function _t(b){for(var k=document.documentElement.style,V=0;V<b.length;V++)if(b[V]in k)return b[V];return!1}function We(b,k,V){var ne=k||new X(0,0);b.style[Ho]=(Mr.ie3d?"translate("+ne.x+"px,"+ne.y+"px)":"translate3d("+ne.x+"px,"+ne.y+"px,0)")+(V?" scale("+V+")":"")}function Or(b,k){b._leaflet_pos=k,Mr.any3d?We(b,k):(b.style.left=k.x+"px",b.style.top=k.y+"px")}function ys(b){return b._leaflet_pos||new X(0,0)}var ro,cu,wh;if("onselectstart"in document)ro=function(){In(window,"selectstart",ra)},cu=function(){zr(window,"selectstart",ra)};else{var wo=_t(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ro=function(){if(wo){var b=document.documentElement.style;wh=b[wo],b[wo]="none"}},cu=function(){wo&&(document.documentElement.style[wo]=wh,wh=void 0)}}function gn(){In(window,"dragstart",ra)}function bs(){zr(window,"dragstart",ra)}var _h,Nh;function uu(b){for(;b.tabIndex===-1;)b=b.parentNode;b.style&&(Sh(),_h=b,Nh=b.style.outlineStyle,b.style.outlineStyle="none",In(window,"keydown",Sh))}function Sh(){_h&&(_h.style.outlineStyle=Nh,_h=void 0,Nh=void 0,zr(window,"keydown",Sh))}function Md(b){do b=b.parentNode;while((!b.offsetWidth||!b.offsetHeight)&&b!==document.body);return b}function Hm(b){var k=b.getBoundingClientRect();return{x:k.width/b.offsetWidth||1,y:k.height/b.offsetHeight||1,boundingClientRect:k}}var sn={__proto__:null,TRANSFORM:Ho,TRANSITION:Al,TRANSITION_END:si,get:ei,getStyle:Un,create:On,remove:xs,empty:Os,toFront:vs,toBack:ll,hasClass:Yu,addClass:Kr,removeClass:yi,setClass:bh,getClass:rs,setOpacity:ni,testProp:_t,setTransform:We,setPosition:Or,getPosition:ys,get disableTextSelection(){return ro},get enableTextSelection(){return cu},disableImageDrag:gn,enableImageDrag:bs,preventOutline:uu,restoreOutline:Sh,getSizedParentNode:Md,getScale:Hm};function In(b,k,V,ne){if(k&&typeof k=="object")for(var pe in k)ws(b,pe,k[pe],V);else{k=x(k);for(var Ie=0,ot=k.length;Ie<ot;Ie++)ws(b,k[Ie],V,ne)}return this}var no="_leaflet_events";function zr(b,k,V,ne){if(arguments.length===1)Gv(b),delete b[no];else if(k&&typeof k=="object")for(var pe in k)Hg(b,pe,k[pe],V);else if(k=x(k),arguments.length===2)Gv(b,function(St){return j(k,St)!==-1});else for(var Ie=0,ot=k.length;Ie<ot;Ie++)Hg(b,k[Ie],V,ne);return this}function Gv(b,k){for(var V in b[no]){var ne=V.split(/\d/)[0];(!k||k(ne))&&Hg(b,ne,null,null,V)}}var Pn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ws(b,k,V,ne){var pe=k+c(V)+(ne?"_"+c(ne):"");if(b[no]&&b[no][pe])return this;var Ie=function(St){return V.call(ne||b,St||window.event)},ot=Ie;!Mr.touchNative&&Mr.pointer&&k.indexOf("touch")===0?Ie=wt(b,k,Ie):Mr.touch&&k==="dblclick"?Ie=Oi(b,Ie):"addEventListener"in b?k==="touchstart"||k==="touchmove"||k==="wheel"||k==="mousewheel"?b.addEventListener(Pn[k]||k,Ie,Mr.passiveEvents?{passive:!1}:!1):k==="mouseenter"||k==="mouseleave"?(Ie=function(St){St=St||window.event,wc(b,St)&&ot(St)},b.addEventListener(Pn[k],Ie,!1)):b.addEventListener(k,ot,!1):b.attachEvent("on"+k,Ie),b[no]=b[no]||{},b[no][pe]=Ie}function Hg(b,k,V,ne,pe){pe=pe||k+c(V)+(ne?"_"+c(ne):"");var Ie=b[no]&&b[no][pe];if(!Ie)return this;!Mr.touchNative&&Mr.pointer&&k.indexOf("touch")===0?Et(b,k,Ie):Mr.touch&&k==="dblclick"?Jn(b,Ie):"removeEventListener"in b?b.removeEventListener(Pn[k]||k,Ie,!1):b.detachEvent("on"+k,Ie),b[no][pe]=null}function Zu(b){return b.stopPropagation?b.stopPropagation():b.originalEvent?b.originalEvent._stopped=!0:b.cancelBubble=!0,this}function Eh(b){return ws(b,"wheel",Zu),this}function Cl(b){return In(b,"mousedown touchstart dblclick contextmenu",Zu),b._leaflet_disable_click=!0,this}function ra(b){return b.preventDefault?b.preventDefault():b.returnValue=!1,this}function cl(b){return ra(b),Zu(b),this}function Qu(b){if(b.composedPath)return b.composedPath();for(var k=[],V=b.target;V;)k.push(V),V=V.parentNode;return k}function Bf(b,k){if(!k)return new X(b.clientX,b.clientY);var V=Hm(k),ne=V.boundingClientRect;return new X((b.clientX-ne.left)/V.x-k.clientLeft,(b.clientY-ne.top)/V.y-k.clientTop)}var g0=Mr.linux&&Mr.chrome?window.devicePixelRatio:Mr.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ld(b){return Mr.edge?b.wheelDeltaY/2:b.deltaY&&b.deltaMode===0?-b.deltaY/g0:b.deltaY&&b.deltaMode===1?-b.deltaY*20:b.deltaY&&b.deltaMode===2?-b.deltaY*60:b.deltaX||b.deltaZ?0:b.wheelDelta?(b.wheelDeltaY||b.wheelDelta)/2:b.detail&&Math.abs(b.detail)<32765?-b.detail*20:b.detail?b.detail/-32765*60:0}function wc(b,k){var V=k.relatedTarget;if(!V)return!0;try{for(;V&&V!==b;)V=V.parentNode}catch{return!1}return V!==b}var Fa={__proto__:null,on:In,off:zr,stopPropagation:Zu,disableScrollPropagation:Eh,disableClickPropagation:Cl,preventDefault:ra,stop:cl,getPropagationPath:Qu,getMousePosition:Bf,getWheelDelta:Ld,isExternalTarget:wc,addListener:In,removeListener:zr},Wm=K.extend({run:function(b,k,V,ne){this.stop(),this._el=b,this._inProgress=!0,this._duration=V||.25,this._easeOutPower=1/Math.max(ne||.5,.2),this._startPos=ys(b),this._offset=k.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(b){var k=+new Date-this._startTime,V=this._duration*1e3;k<V?this._runFrame(this._easeOut(k/V),b):(this._runFrame(1),this._complete())},_runFrame:function(b,k){var V=this._startPos.add(this._offset.multiplyBy(b));k&&V._round(),Or(this._el,V),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(b){return 1-Math.pow(1-b,this._easeOutPower)}}),ai=K.extend({options:{crs:Ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(b,k){k=g(this,k),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(b),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),k.maxBounds&&this.setMaxBounds(k.maxBounds),k.zoom!==void 0&&(this._zoom=this._limitZoom(k.zoom)),k.center&&k.zoom!==void 0&&this.setView(me(k.center),k.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Al&&Mr.any3d&&!Mr.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),In(this._proxy,si,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(b,k,V){if(k=k===void 0?this._zoom:this._limitZoom(k),b=this._limitCenter(me(b),k,this.options.maxBounds),V=V||{},this._stop(),this._loaded&&!V.reset&&V!==!0){V.animate!==void 0&&(V.zoom=i({animate:V.animate},V.zoom),V.pan=i({animate:V.animate,duration:V.duration},V.pan));var ne=this._zoom!==k?this._tryAnimatedZoom&&this._tryAnimatedZoom(b,k,V.zoom):this._tryAnimatedPan(b,V.pan);if(ne)return clearTimeout(this._sizeTimer),this}return this._resetView(b,k,V.pan&&V.pan.noMoveStart),this},setZoom:function(b,k){return this._loaded?this.setView(this.getCenter(),b,{zoom:k}):(this._zoom=b,this)},zoomIn:function(b,k){return b=b||(Mr.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+b,k)},zoomOut:function(b,k){return b=b||(Mr.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-b,k)},setZoomAround:function(b,k,V){var ne=this.getZoomScale(k),pe=this.getSize().divideBy(2),Ie=b instanceof X?b:this.latLngToContainerPoint(b),ot=Ie.subtract(pe).multiplyBy(1-1/ne),St=this.containerPointToLatLng(pe.add(ot));return this.setView(St,k,{zoom:V})},_getBoundsCenterZoom:function(b,k){k=k||{},b=b.getBounds?b.getBounds():ie(b);var V=oe(k.paddingTopLeft||k.padding||[0,0]),ne=oe(k.paddingBottomRight||k.padding||[0,0]),pe=this.getBoundsZoom(b,!1,V.add(ne));if(pe=typeof k.maxZoom=="number"?Math.min(k.maxZoom,pe):pe,pe===1/0)return{center:b.getCenter(),zoom:pe};var Ie=ne.subtract(V).divideBy(2),ot=this.project(b.getSouthWest(),pe),St=this.project(b.getNorthEast(),pe),Ft=this.unproject(ot.add(St).divideBy(2).add(Ie),pe);return{center:Ft,zoom:pe}},fitBounds:function(b,k){if(b=ie(b),!b.isValid())throw new Error("Bounds are not valid.");var V=this._getBoundsCenterZoom(b,k);return this.setView(V.center,V.zoom,k)},fitWorld:function(b){return this.fitBounds([[-90,-180],[90,180]],b)},panTo:function(b,k){return this.setView(b,this._zoom,{pan:k})},panBy:function(b,k){if(b=oe(b).round(),k=k||{},!b.x&&!b.y)return this.fire("moveend");if(k.animate!==!0&&!this.getSize().contains(b))return this._resetView(this.unproject(this.project(this.getCenter()).add(b)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Wm,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),k.noMoveStart||this.fire("movestart"),k.animate!==!1){Kr(this._mapPane,"leaflet-pan-anim");var V=this._getMapPanePos().subtract(b).round();this._panAnim.run(this._mapPane,V,k.duration||.25,k.easeLinearity)}else this._rawPanBy(b),this.fire("move").fire("moveend");return this},flyTo:function(b,k,V){if(V=V||{},V.animate===!1||!Mr.any3d)return this.setView(b,k,V);this._stop();var ne=this.project(this.getCenter()),pe=this.project(b),Ie=this.getSize(),ot=this._zoom;b=me(b),k=k===void 0?ot:k;var St=Math.max(Ie.x,Ie.y),Ft=St*this.getZoomScale(ot,k),pr=pe.distanceTo(ne)||1,Hr=1.42,Cn=Hr*Hr;function Ri(Is){var Ac=Is?-1:1,e9=Is?Ft:St,t9=Ft*Ft-St*St+Ac*Cn*Cn*pr*pr,eR=2*e9*Cn*pr,MN=t9/eR,D5=Math.sqrt(MN*MN+1)-MN,tR=D5<1e-9?-18:Math.log(D5);return tR}function jc(Is){return(Math.exp(Is)-Math.exp(-Is))/2}function Yo(Is){return(Math.exp(Is)+Math.exp(-Is))/2}function Ud(Is){return jc(Is)/Yo(Is)}var gu=Ri(0);function Yv(Is){return St*(Yo(gu)/Yo(gu+Hr*Is))}function QB(Is){return St*(Yo(gu)*Ud(gu+Hr*Is)-jc(gu))/Cn}function y0(Is){return 1-Math.pow(1-Is,1.5)}var Ph=Date.now(),Vf=(Ri(1)-gu)/Hr,JB=V.duration?1e3*V.duration:1e3*Vf*.8;function R5(){var Is=(Date.now()-Ph)/JB,Ac=y0(Is)*Vf;Is<=1?(this._flyToFrame=F(R5,this),this._move(this.unproject(ne.add(pe.subtract(ne).multiplyBy(QB(Ac)/pr)),ot),this.getScaleZoom(St/Yv(Ac),ot),{flyTo:!0})):this._move(b,k)._moveEnd(!0)}return this._moveStart(!0,V.noMoveStart),R5.call(this),this},flyToBounds:function(b,k){var V=this._getBoundsCenterZoom(b,k);return this.flyTo(V.center,V.zoom,k)},setMaxBounds:function(b){return b=ie(b),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),b.isValid()?(this.options.maxBounds=b,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(b){var k=this.options.minZoom;return this.options.minZoom=b,this._loaded&&k!==b&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(b):this},setMaxZoom:function(b){var k=this.options.maxZoom;return this.options.maxZoom=b,this._loaded&&k!==b&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(b):this},panInsideBounds:function(b,k){this._enforcingBounds=!0;var V=this.getCenter(),ne=this._limitCenter(V,this._zoom,ie(b));return V.equals(ne)||this.panTo(ne,k),this._enforcingBounds=!1,this},panInside:function(b,k){k=k||{};var V=oe(k.paddingTopLeft||k.padding||[0,0]),ne=oe(k.paddingBottomRight||k.padding||[0,0]),pe=this.project(this.getCenter()),Ie=this.project(b),ot=this.getPixelBounds(),St=H([ot.min.add(V),ot.max.subtract(ne)]),Ft=St.getSize();if(!St.contains(Ie)){this._enforcingBounds=!0;var pr=Ie.subtract(St.getCenter()),Hr=St.extend(Ie).getSize().subtract(Ft);pe.x+=pr.x<0?-Hr.x:Hr.x,pe.y+=pr.y<0?-Hr.y:Hr.y,this.panTo(this.unproject(pe),k),this._enforcingBounds=!1}return this},invalidateSize:function(b){if(!this._loaded)return this;b=i({animate:!1,pan:!0},b===!0?{animate:!0}:b);var k=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var V=this.getSize(),ne=k.divideBy(2).round(),pe=V.divideBy(2).round(),Ie=ne.subtract(pe);return!Ie.x&&!Ie.y?this:(b.animate&&b.pan?this.panBy(Ie):(b.pan&&this._rawPanBy(Ie),this.fire("move"),b.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:k,newSize:V}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(b){if(b=this._locateOptions=i({timeout:1e4,watch:!1},b),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var k=o(this._handleGeolocationResponse,this),V=o(this._handleGeolocationError,this);return b.watch?this._locationWatchId=navigator.geolocation.watchPosition(k,V,b):navigator.geolocation.getCurrentPosition(k,V,b),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(b){if(this._container._leaflet_id){var k=b.code,V=b.message||(k===1?"permission denied":k===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:k,message:"Geolocation error: "+V+"."})}},_handleGeolocationResponse:function(b){if(this._container._leaflet_id){var k=b.coords.latitude,V=b.coords.longitude,ne=new ce(k,V),pe=ne.toBounds(b.coords.accuracy*2),Ie=this._locateOptions;if(Ie.setView){var ot=this.getBoundsZoom(pe);this.setView(ne,Ie.maxZoom?Math.min(ot,Ie.maxZoom):ot)}var St={latlng:ne,bounds:pe,timestamp:b.timestamp};for(var Ft in b.coords)typeof b.coords[Ft]=="number"&&(St[Ft]=b.coords[Ft]);this.fire("locationfound",St)}},addHandler:function(b,k){if(!k)return this;var V=this[b]=new k(this);return this._handlers.push(V),this.options[b]&&V.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xs(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var b;for(b in this._layers)this._layers[b].remove();for(b in this._panes)xs(this._panes[b]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(b,k){var V="leaflet-pane"+(b?" leaflet-"+b.replace("Pane","")+"-pane":""),ne=On("div",V,k||this._mapPane);return b&&(this._panes[b]=ne),ne},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var b=this.getPixelBounds(),k=this.unproject(b.getBottomLeft()),V=this.unproject(b.getTopRight());return new J(k,V)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(b,k,V){b=ie(b),V=oe(V||[0,0]);var ne=this.getZoom()||0,pe=this.getMinZoom(),Ie=this.getMaxZoom(),ot=b.getNorthWest(),St=b.getSouthEast(),Ft=this.getSize().subtract(V),pr=H(this.project(St,ne),this.project(ot,ne)).getSize(),Hr=Mr.any3d?this.options.zoomSnap:1,Cn=Ft.x/pr.x,Ri=Ft.y/pr.y,jc=k?Math.max(Cn,Ri):Math.min(Cn,Ri);return ne=this.getScaleZoom(jc,ne),Hr&&(ne=Math.round(ne/(Hr/100))*(Hr/100),ne=k?Math.ceil(ne/Hr)*Hr:Math.floor(ne/Hr)*Hr),Math.max(pe,Math.min(Ie,ne))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(b,k){var V=this._getTopLeftPoint(b,k);return new xe(V,V.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(b){return this.options.crs.getProjectedBounds(b===void 0?this.getZoom():b)},getPane:function(b){return typeof b=="string"?this._panes[b]:b},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(b,k){var V=this.options.crs;return k=k===void 0?this._zoom:k,V.scale(b)/V.scale(k)},getScaleZoom:function(b,k){var V=this.options.crs;k=k===void 0?this._zoom:k;var ne=V.zoom(b*V.scale(k));return isNaN(ne)?1/0:ne},project:function(b,k){return k=k===void 0?this._zoom:k,this.options.crs.latLngToPoint(me(b),k)},unproject:function(b,k){return k=k===void 0?this._zoom:k,this.options.crs.pointToLatLng(oe(b),k)},layerPointToLatLng:function(b){var k=oe(b).add(this.getPixelOrigin());return this.unproject(k)},latLngToLayerPoint:function(b){var k=this.project(me(b))._round();return k._subtract(this.getPixelOrigin())},wrapLatLng:function(b){return this.options.crs.wrapLatLng(me(b))},wrapLatLngBounds:function(b){return this.options.crs.wrapLatLngBounds(ie(b))},distance:function(b,k){return this.options.crs.distance(me(b),me(k))},containerPointToLayerPoint:function(b){return oe(b).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(b){return oe(b).add(this._getMapPanePos())},containerPointToLatLng:function(b){var k=this.containerPointToLayerPoint(oe(b));return this.layerPointToLatLng(k)},latLngToContainerPoint:function(b){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(b)))},mouseEventToContainerPoint:function(b){return Bf(b,this._container)},mouseEventToLayerPoint:function(b){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(b))},mouseEventToLatLng:function(b){return this.layerPointToLatLng(this.mouseEventToLayerPoint(b))},_initContainer:function(b){var k=this._container=ei(b);if(k){if(k._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");In(k,"scroll",this._onScroll,this),this._containerId=c(k)},_initLayout:function(){var b=this._container;this._fadeAnimated=this.options.fadeAnimation&&Mr.any3d,Kr(b,"leaflet-container"+(Mr.touch?" leaflet-touch":"")+(Mr.retina?" leaflet-retina":"")+(Mr.ielt9?" leaflet-oldie":"")+(Mr.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var k=Un(b,"position");k!=="absolute"&&k!=="relative"&&k!=="fixed"&&k!=="sticky"&&(b.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var b=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Or(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Kr(b.markerPane,"leaflet-zoom-hide"),Kr(b.shadowPane,"leaflet-zoom-hide"))},_resetView:function(b,k,V){Or(this._mapPane,new X(0,0));var ne=!this._loaded;this._loaded=!0,k=this._limitZoom(k),this.fire("viewprereset");var pe=this._zoom!==k;this._moveStart(pe,V)._move(b,k)._moveEnd(pe),this.fire("viewreset"),ne&&this.fire("load")},_moveStart:function(b,k){return b&&this.fire("zoomstart"),k||this.fire("movestart"),this},_move:function(b,k,V,ne){k===void 0&&(k=this._zoom);var pe=this._zoom!==k;return this._zoom=k,this._lastCenter=b,this._pixelOrigin=this._getNewPixelOrigin(b),ne?V&&V.pinch&&this.fire("zoom",V):((pe||V&&V.pinch)&&this.fire("zoom",V),this.fire("move",V)),this},_moveEnd:function(b){return b&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(b){Or(this._mapPane,this._getMapPanePos().subtract(b))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){this._targets={},this._targets[c(this._container)]=this;var k=b?zr:In;k(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&k(window,"resize",this._onResize,this),Mr.any3d&&this.options.transform3DLimit&&(b?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var b=this._getMapPanePos();Math.max(Math.abs(b.x),Math.abs(b.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(b,k){for(var V=[],ne,pe=k==="mouseout"||k==="mouseover",Ie=b.target||b.srcElement,ot=!1;Ie;){if(ne=this._targets[c(Ie)],ne&&(k==="click"||k==="preclick")&&this._draggableMoved(ne)){ot=!0;break}if(ne&&ne.listens(k,!0)&&(pe&&!wc(Ie,b)||(V.push(ne),pe))||Ie===this._container)break;Ie=Ie.parentNode}return!V.length&&!ot&&!pe&&this.listens(k,!0)&&(V=[this]),V},_isClickDisabled:function(b){for(;b&&b!==this._container;){if(b._leaflet_disable_click)return!0;b=b.parentNode}},_handleDOMEvent:function(b){var k=b.target||b.srcElement;if(!(!this._loaded||k._leaflet_disable_events||b.type==="click"&&this._isClickDisabled(k))){var V=b.type;V==="mousedown"&&uu(k),this._fireDOMEvent(b,V)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(b,k,V){if(b.type==="click"){var ne=i({},b);ne.type="preclick",this._fireDOMEvent(ne,ne.type,V)}var pe=this._findEventTargets(b,k);if(V){for(var Ie=[],ot=0;ot<V.length;ot++)V[ot].listens(k,!0)&&Ie.push(V[ot]);pe=Ie.concat(pe)}if(pe.length){k==="contextmenu"&&ra(b);var St=pe[0],Ft={originalEvent:b};if(b.type!=="keypress"&&b.type!=="keydown"&&b.type!=="keyup"){var pr=St.getLatLng&&(!St._radius||St._radius<=10);Ft.containerPoint=pr?this.latLngToContainerPoint(St.getLatLng()):this.mouseEventToContainerPoint(b),Ft.layerPoint=this.containerPointToLayerPoint(Ft.containerPoint),Ft.latlng=pr?St.getLatLng():this.layerPointToLatLng(Ft.layerPoint)}for(ot=0;ot<pe.length;ot++)if(pe[ot].fire(k,Ft,!0),Ft.originalEvent._stopped||pe[ot].options.bubblingMouseEvents===!1&&j(this._mouseEvents,k)!==-1)return}},_draggableMoved:function(b){return b=b.dragging&&b.dragging.enabled()?b:this,b.dragging&&b.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var b=0,k=this._handlers.length;b<k;b++)this._handlers[b].disable()},whenReady:function(b,k){return this._loaded?b.call(k||this,{target:this}):this.on("load",b,k),this},_getMapPanePos:function(){return ys(this._mapPane)||new X(0,0)},_moved:function(){var b=this._getMapPanePos();return b&&!b.equals([0,0])},_getTopLeftPoint:function(b,k){var V=b&&k!==void 0?this._getNewPixelOrigin(b,k):this.getPixelOrigin();return V.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(b,k){var V=this.getSize()._divideBy(2);return this.project(b,k)._subtract(V)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(b,k,V){var ne=this._getNewPixelOrigin(V,k);return this.project(b,k)._subtract(ne)},_latLngBoundsToNewLayerBounds:function(b,k,V){var ne=this._getNewPixelOrigin(V,k);return H([this.project(b.getSouthWest(),k)._subtract(ne),this.project(b.getNorthWest(),k)._subtract(ne),this.project(b.getSouthEast(),k)._subtract(ne),this.project(b.getNorthEast(),k)._subtract(ne)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(b){return this.latLngToLayerPoint(b).subtract(this._getCenterLayerPoint())},_limitCenter:function(b,k,V){if(!V)return b;var ne=this.project(b,k),pe=this.getSize().divideBy(2),Ie=new xe(ne.subtract(pe),ne.add(pe)),ot=this._getBoundsOffset(Ie,V,k);return Math.abs(ot.x)<=1&&Math.abs(ot.y)<=1?b:this.unproject(ne.add(ot),k)},_limitOffset:function(b,k){if(!k)return b;var V=this.getPixelBounds(),ne=new xe(V.min.add(b),V.max.add(b));return b.add(this._getBoundsOffset(ne,k))},_getBoundsOffset:function(b,k,V){var ne=H(this.project(k.getNorthEast(),V),this.project(k.getSouthWest(),V)),pe=ne.min.subtract(b.min),Ie=ne.max.subtract(b.max),ot=this._rebound(pe.x,-Ie.x),St=this._rebound(pe.y,-Ie.y);return new X(ot,St)},_rebound:function(b,k){return b+k>0?Math.round(b-k)/2:Math.max(0,Math.ceil(b))-Math.max(0,Math.floor(k))},_limitZoom:function(b){var k=this.getMinZoom(),V=this.getMaxZoom(),ne=Mr.any3d?this.options.zoomSnap:1;return ne&&(b=Math.round(b/ne)*ne),Math.max(k,Math.min(V,b))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(b,k){var V=this._getCenterOffset(b)._trunc();return(k&&k.animate)!==!0&&!this.getSize().contains(V)?!1:(this.panBy(V,k),!0)},_createAnimProxy:function(){var b=this._proxy=On("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(b),this.on("zoomanim",function(k){var V=Ho,ne=this._proxy.style[V];We(this._proxy,this.project(k.center,k.zoom),this.getZoomScale(k.zoom,1)),ne===this._proxy.style[V]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xs(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var b=this.getCenter(),k=this.getZoom();We(this._proxy,this.project(b,k),this.getZoomScale(k,1))},_catchTransitionEnd:function(b){this._animatingZoom&&b.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(b,k,V){if(this._animatingZoom)return!0;if(V=V||{},!this._zoomAnimated||V.animate===!1||this._nothingToAnimate()||Math.abs(k-this._zoom)>this.options.zoomAnimationThreshold)return!1;var ne=this.getZoomScale(k),pe=this._getCenterOffset(b)._divideBy(1-1/ne);return V.animate!==!0&&!this.getSize().contains(pe)?!1:(F(function(){this._moveStart(!0,V.noMoveStart||!1)._animateZoom(b,k,!0)},this),!0)},_animateZoom:function(b,k,V,ne){this._mapPane&&(V&&(this._animatingZoom=!0,this._animateToCenter=b,this._animateToZoom=k,Kr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:b,zoom:k,noUpdate:ne}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function x0(b,k){return new ai(b,k)}var Wo=re.extend({options:{position:"topright"},initialize:function(b){g(this,b)},getPosition:function(){return this.options.position},setPosition:function(b){var k=this._map;return k&&k.removeControl(this),this.options.position=b,k&&k.addControl(this),this},getContainer:function(){return this._container},addTo:function(b){this.remove(),this._map=b;var k=this._container=this.onAdd(b),V=this.getPosition(),ne=b._controlCorners[V];return Kr(k,"leaflet-control"),V.indexOf("bottom")!==-1?ne.insertBefore(k,ne.firstChild):ne.appendChild(k),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xs(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(b){this._map&&b&&b.screenX>0&&b.screenY>0&&this._map.getContainer().focus()}}),$f=function(b){return new Wo(b)};ai.include({addControl:function(b){return b.addTo(this),this},removeControl:function(b){return b.remove(),this},_initControlPos:function(){var b=this._controlCorners={},k="leaflet-",V=this._controlContainer=On("div",k+"control-container",this._container);function ne(pe,Ie){var ot=k+pe+" "+k+Ie;b[pe+Ie]=On("div",ot,V)}ne("top","left"),ne("top","right"),ne("bottom","left"),ne("bottom","right")},_clearControlPos:function(){for(var b in this._controlCorners)xs(this._controlCorners[b]);xs(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Wg=Wo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(b,k,V,ne){return V<ne?-1:ne<V?1:0}},initialize:function(b,k,V){g(this,V),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var ne in b)this._addLayer(b[ne],ne);for(ne in k)this._addLayer(k[ne],ne,!0)},onAdd:function(b){this._initLayout(),this._update(),this._map=b,b.on("zoomend",this._checkDisabledLayers,this);for(var k=0;k<this._layers.length;k++)this._layers[k].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(b){return Wo.prototype.addTo.call(this,b),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(b,k){return this._addLayer(b,k),this._map?this._update():this},addOverlay:function(b,k){return this._addLayer(b,k,!0),this._map?this._update():this},removeLayer:function(b){b.off("add remove",this._onLayerChange,this);var k=this._getLayer(c(b));return k&&this._layers.splice(this._layers.indexOf(k),1),this._map?this._update():this},expand:function(){Kr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var b=this._map.getSize().y-(this._container.offsetTop+50);return b<this._section.clientHeight?(Kr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=b+"px"):yi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var b="leaflet-control-layers",k=this._container=On("div",b),V=this.options.collapsed;k.setAttribute("aria-haspopup",!0),Cl(k),Eh(k);var ne=this._section=On("section",b+"-list");V&&(this._map.on("click",this.collapse,this),In(k,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var pe=this._layersLink=On("a",b+"-toggle",k);pe.href="#",pe.title="Layers",pe.setAttribute("role","button"),In(pe,{keydown:function(Ie){Ie.keyCode===13&&this._expandSafely()},click:function(Ie){ra(Ie),this._expandSafely()}},this),V||this.expand(),this._baseLayersList=On("div",b+"-base",ne),this._separator=On("div",b+"-separator",ne),this._overlaysList=On("div",b+"-overlays",ne),k.appendChild(ne)},_getLayer:function(b){for(var k=0;k<this._layers.length;k++)if(this._layers[k]&&c(this._layers[k].layer)===b)return this._layers[k]},_addLayer:function(b,k,V){this._map&&b.on("add remove",this._onLayerChange,this),this._layers.push({layer:b,name:k,overlay:V}),this.options.sortLayers&&this._layers.sort(o(function(ne,pe){return this.options.sortFunction(ne.layer,pe.layer,ne.name,pe.name)},this)),this.options.autoZIndex&&b.setZIndex&&(this._lastZIndex++,b.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Os(this._baseLayersList),Os(this._overlaysList),this._layerControlInputs=[];var b,k,V,ne,pe=0;for(V=0;V<this._layers.length;V++)ne=this._layers[V],this._addItem(ne),k=k||ne.overlay,b=b||!ne.overlay,pe+=ne.overlay?0:1;return this.options.hideSingleBase&&(b=b&&pe>1,this._baseLayersList.style.display=b?"":"none"),this._separator.style.display=k&&b?"":"none",this},_onLayerChange:function(b){this._handlingClick||this._update();var k=this._getLayer(c(b.target)),V=k.overlay?b.type==="add"?"overlayadd":"overlayremove":b.type==="add"?"baselayerchange":null;V&&this._map.fire(V,k)},_createRadioElement:function(b,k){var V='<input type="radio" class="leaflet-control-layers-selector" name="'+b+'"'+(k?' checked="checked"':"")+"/>",ne=document.createElement("div");return ne.innerHTML=V,ne.firstChild},_addItem:function(b){var k=document.createElement("label"),V=this._map.hasLayer(b.layer),ne;b.overlay?(ne=document.createElement("input"),ne.type="checkbox",ne.className="leaflet-control-layers-selector",ne.defaultChecked=V):ne=this._createRadioElement("leaflet-base-layers_"+c(this),V),this._layerControlInputs.push(ne),ne.layerId=c(b.layer),In(ne,"click",this._onInputClick,this);var pe=document.createElement("span");pe.innerHTML=" "+b.name;var Ie=document.createElement("span");k.appendChild(Ie),Ie.appendChild(ne),Ie.appendChild(pe);var ot=b.overlay?this._overlaysList:this._baseLayersList;return ot.appendChild(k),this._checkDisabledLayers(),k},_onInputClick:function(){if(!this._preventClick){var b=this._layerControlInputs,k,V,ne=[],pe=[];this._handlingClick=!0;for(var Ie=b.length-1;Ie>=0;Ie--)k=b[Ie],V=this._getLayer(k.layerId).layer,k.checked?ne.push(V):k.checked||pe.push(V);for(Ie=0;Ie<pe.length;Ie++)this._map.hasLayer(pe[Ie])&&this._map.removeLayer(pe[Ie]);for(Ie=0;Ie<ne.length;Ie++)this._map.hasLayer(ne[Ie])||this._map.addLayer(ne[Ie]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var b=this._layerControlInputs,k,V,ne=this._map.getZoom(),pe=b.length-1;pe>=0;pe--)k=b[pe],V=this._getLayer(k.layerId).layer,k.disabled=V.options.minZoom!==void 0&&ne<V.options.minZoom||V.options.maxZoom!==void 0&&ne>V.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var b=this._section;this._preventClick=!0,In(b,"click",ra),this.expand();var k=this;setTimeout(function(){zr(b,"click",ra),k._preventClick=!1})}}),Ii=function(b,k,V){return new Wg(b,k,V)},du=Wo.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(b){var k="leaflet-control-zoom",V=On("div",k+" leaflet-bar"),ne=this.options;return this._zoomInButton=this._createButton(ne.zoomInText,ne.zoomInTitle,k+"-in",V,this._zoomIn),this._zoomOutButton=this._createButton(ne.zoomOutText,ne.zoomOutTitle,k+"-out",V,this._zoomOut),this._updateDisabled(),b.on("zoomend zoomlevelschange",this._updateDisabled,this),V},onRemove:function(b){b.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(b){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(b.shiftKey?3:1))},_zoomOut:function(b){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(b.shiftKey?3:1))},_createButton:function(b,k,V,ne,pe){var Ie=On("a",V,ne);return Ie.innerHTML=b,Ie.href="#",Ie.title=k,Ie.setAttribute("role","button"),Ie.setAttribute("aria-label",k),Cl(Ie),In(Ie,"click",cl),In(Ie,"click",pe,this),In(Ie,"click",this._refocusOnMap,this),Ie},_updateDisabled:function(){var b=this._map,k="leaflet-disabled";yi(this._zoomInButton,k),yi(this._zoomOutButton,k),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||b._zoom===b.getMinZoom())&&(Kr(this._zoomOutButton,k),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||b._zoom===b.getMaxZoom())&&(Kr(this._zoomInButton,k),this._zoomInButton.setAttribute("aria-disabled","true"))}});ai.mergeOptions({zoomControl:!0}),ai.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new du,this.addControl(this.zoomControl))});var Gm=function(b){return new du(b)},hu=Wo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(b){var k="leaflet-control-scale",V=On("div",k),ne=this.options;return this._addScales(ne,k+"-line",V),b.on(ne.updateWhenIdle?"moveend":"move",this._update,this),b.whenReady(this._update,this),V},onRemove:function(b){b.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(b,k,V){b.metric&&(this._mScale=On("div",k,V)),b.imperial&&(this._iScale=On("div",k,V))},_update:function(){var b=this._map,k=b.getSize().y/2,V=b.distance(b.containerPointToLatLng([0,k]),b.containerPointToLatLng([this.options.maxWidth,k]));this._updateScales(V)},_updateScales:function(b){this.options.metric&&b&&this._updateMetric(b),this.options.imperial&&b&&this._updateImperial(b)},_updateMetric:function(b){var k=this._getRoundNum(b),V=k<1e3?k+" m":k/1e3+" km";this._updateScale(this._mScale,V,k/b)},_updateImperial:function(b){var k=b*3.2808399,V,ne,pe;k>5280?(V=k/5280,ne=this._getRoundNum(V),this._updateScale(this._iScale,ne+" mi",ne/V)):(pe=this._getRoundNum(k),this._updateScale(this._iScale,pe+" ft",pe/k))},_updateScale:function(b,k,V){b.style.width=Math.round(this.options.maxWidth*V)+"px",b.innerHTML=k},_getRoundNum:function(b){var k=Math.pow(10,(Math.floor(b)+"").length-1),V=b/k;return V=V>=10?10:V>=5?5:V>=3?3:V>=2?2:1,k*V}}),Km=function(b){return new hu(b)},Rt='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ee=Wo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Mr.inlineSvg?Rt+" ":"")+"Leaflet</a>"},initialize:function(b){g(this,b),this._attributions={}},onAdd:function(b){b.attributionControl=this,this._container=On("div","leaflet-control-attribution"),Cl(this._container);for(var k in b._layers)b._layers[k].getAttribution&&this.addAttribution(b._layers[k].getAttribution());return this._update(),b.on("layeradd",this._addAttribution,this),this._container},onRemove:function(b){b.off("layeradd",this._addAttribution,this)},_addAttribution:function(b){b.layer.getAttribution&&(this.addAttribution(b.layer.getAttribution()),b.layer.once("remove",function(){this.removeAttribution(b.layer.getAttribution())},this))},setPrefix:function(b){return this.options.prefix=b,this._update(),this},addAttribution:function(b){return b?(this._attributions[b]||(this._attributions[b]=0),this._attributions[b]++,this._update(),this):this},removeAttribution:function(b){return b?(this._attributions[b]&&(this._attributions[b]--,this._update()),this):this},_update:function(){if(this._map){var b=[];for(var k in this._attributions)this._attributions[k]&&b.push(k);var V=[];this.options.prefix&&V.push(this.options.prefix),b.length&&V.push(b.join(", ")),this._container.innerHTML=V.join(' <span aria-hidden="true">|</span> ')}}});ai.mergeOptions({attributionControl:!0}),ai.addInitHook(function(){this.options.attributionControl&&new ee().addTo(this)});var Se=function(b){return new ee(b)};Wo.Layers=Wg,Wo.Zoom=du,Wo.Scale=hu,Wo.Attribution=ee,$f.layers=Ii,$f.zoom=Gm,$f.scale=Km,$f.attribution=Se;var Ye=re.extend({initialize:function(b){this._map=b},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ye.addTo=function(b,k){return b.addHandler(k,this),this};var ct={Events:se},vt=Mr.touch?"touchstart mousedown":"mousedown",Gt=K.extend({options:{clickTolerance:3},initialize:function(b,k,V,ne){g(this,ne),this._element=b,this._dragStartTarget=k||b,this._preventOutline=V},enable:function(){this._enabled||(In(this._dragStartTarget,vt,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gt._dragging===this&&this.finishDrag(!0),zr(this._dragStartTarget,vt,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(b){if(this._enabled&&(this._moved=!1,!Yu(this._element,"leaflet-zoom-anim"))){if(b.touches&&b.touches.length!==1){Gt._dragging===this&&this.finishDrag();return}if(!(Gt._dragging||b.shiftKey||b.which!==1&&b.button!==1&&!b.touches)&&(Gt._dragging=this,this._preventOutline&&uu(this._element),gn(),ro(),!this._moving)){this.fire("down");var k=b.touches?b.touches[0]:b,V=Md(this._element);this._startPoint=new X(k.clientX,k.clientY),this._startPos=ys(this._element),this._parentScale=Hm(V);var ne=b.type==="mousedown";In(document,ne?"mousemove":"touchmove",this._onMove,this),In(document,ne?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(b){if(this._enabled){if(b.touches&&b.touches.length>1){this._moved=!0;return}var k=b.touches&&b.touches.length===1?b.touches[0]:b,V=new X(k.clientX,k.clientY)._subtract(this._startPoint);!V.x&&!V.y||Math.abs(V.x)+Math.abs(V.y)<this.options.clickTolerance||(V.x/=this._parentScale.x,V.y/=this._parentScale.y,ra(b),this._moved||(this.fire("dragstart"),this._moved=!0,Kr(document.body,"leaflet-dragging"),this._lastTarget=b.target||b.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Kr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(V),this._moving=!0,this._lastEvent=b,this._updatePosition())}},_updatePosition:function(){var b={originalEvent:this._lastEvent};this.fire("predrag",b),Or(this._element,this._newPos),this.fire("drag",b)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(b){yi(document.body,"leaflet-dragging"),this._lastTarget&&(yi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zr(document,"mousemove touchmove",this._onMove,this),zr(document,"mouseup touchend touchcancel",this._onUp,this),bs(),cu();var k=this._moved&&this._moving;this._moving=!1,Gt._dragging=!1,k&&this.fire("dragend",{noInertia:b,distance:this._newPos.distanceTo(this._startPos)})}});function mr(b,k,V){var ne,pe=[1,4,2,8],Ie,ot,St,Ft,pr,Hr,Cn,Ri;for(Ie=0,Hr=b.length;Ie<Hr;Ie++)b[Ie]._code=$a(b[Ie],k);for(St=0;St<4;St++){for(Cn=pe[St],ne=[],Ie=0,Hr=b.length,ot=Hr-1;Ie<Hr;ot=Ie++)Ft=b[Ie],pr=b[ot],Ft._code&Cn?pr._code&Cn||(Ri=Ba(pr,Ft,Cn,k,V),Ri._code=$a(Ri,k),ne.push(Ri)):(pr._code&Cn&&(Ri=Ba(pr,Ft,Cn,k,V),Ri._code=$a(Ri,k),ne.push(Ri)),ne.push(Ft));b=ne}return b}function Xr(b,k){var V,ne,pe,Ie,ot,St,Ft,pr,Hr;if(!b||b.length===0)throw new Error("latlngs not passed");so(b)||(console.warn("latlngs are not flat! Only the first ring will be used"),b=b[0]);var Cn=me([0,0]),Ri=ie(b),jc=Ri.getNorthWest().distanceTo(Ri.getSouthWest())*Ri.getNorthEast().distanceTo(Ri.getNorthWest());jc<1700&&(Cn=$r(b));var Yo=b.length,Ud=[];for(V=0;V<Yo;V++){var gu=me(b[V]);Ud.push(k.project(me([gu.lat-Cn.lat,gu.lng-Cn.lng])))}for(St=Ft=pr=0,V=0,ne=Yo-1;V<Yo;ne=V++)pe=Ud[V],Ie=Ud[ne],ot=pe.y*Ie.x-Ie.y*pe.x,Ft+=(pe.x+Ie.x)*ot,pr+=(pe.y+Ie.y)*ot,St+=ot*3;St===0?Hr=Ud[0]:Hr=[Ft/St,pr/St];var Yv=k.unproject(oe(Hr));return me([Yv.lat+Cn.lat,Yv.lng+Cn.lng])}function $r(b){for(var k=0,V=0,ne=0,pe=0;pe<b.length;pe++){var Ie=me(b[pe]);k+=Ie.lat,V+=Ie.lng,ne++}return me([k/ne,V/ne])}var Rn={__proto__:null,clipPolygon:mr,polygonCenter:Xr,centroid:$r};function Yr(b,k){if(!k||!b.length)return b.slice();var V=k*k;return b=io(b,V),b=zn(b,V),b}function Li(b,k,V){return Math.sqrt(fu(b,k,V,!0))}function ns(b,k,V){return fu(b,k,V)}function zn(b,k){var V=b.length,ne=typeof Uint8Array<"u"?Uint8Array:Array,pe=new ne(V);pe[0]=pe[V-1]=1,Ur(b,pe,k,0,V-1);var Ie,ot=[];for(Ie=0;Ie<V;Ie++)pe[Ie]&&ot.push(b[Ie]);return ot}function Ur(b,k,V,ne,pe){var Ie=0,ot,St,Ft;for(St=ne+1;St<=pe-1;St++)Ft=fu(b[St],b[ne],b[pe],!0),Ft>Ie&&(ot=St,Ie=Ft);Ie>V&&(k[ot]=1,Ur(b,k,V,ne,ot),Ur(b,k,V,ot,pe))}function io(b,k){for(var V=[b[0]],ne=1,pe=0,Ie=b.length;ne<Ie;ne++)_c(b[ne],b[pe])>k&&(V.push(b[ne]),pe=ne);return pe<Ie-1&&V.push(b[Ie-1]),V}var Xn;function Gs(b,k,V,ne,pe){var Ie=ne?Xn:$a(b,V),ot=$a(k,V),St,Ft,pr;for(Xn=ot;;){if(!(Ie|ot))return[b,k];if(Ie&ot)return!1;St=Ie||ot,Ft=Ba(b,k,St,V,pe),pr=$a(Ft,V),St===Ie?(b=Ft,Ie=pr):(k=Ft,ot=pr)}}function Ba(b,k,V,ne,pe){var Ie=k.x-b.x,ot=k.y-b.y,St=ne.min,Ft=ne.max,pr,Hr;return V&8?(pr=b.x+Ie*(Ft.y-b.y)/ot,Hr=Ft.y):V&4?(pr=b.x+Ie*(St.y-b.y)/ot,Hr=St.y):V&2?(pr=Ft.x,Hr=b.y+ot*(Ft.x-b.x)/Ie):V&1&&(pr=St.x,Hr=b.y+ot*(St.x-b.x)/Ie),new X(pr,Hr,pe)}function $a(b,k){var V=0;return b.x<k.min.x?V|=1:b.x>k.max.x&&(V|=2),b.y<k.min.y?V|=4:b.y>k.max.y&&(V|=8),V}function _c(b,k){var V=k.x-b.x,ne=k.y-b.y;return V*V+ne*ne}function fu(b,k,V,ne){var pe=k.x,Ie=k.y,ot=V.x-pe,St=V.y-Ie,Ft=ot*ot+St*St,pr;return Ft>0&&(pr=((b.x-pe)*ot+(b.y-Ie)*St)/Ft,pr>1?(pe=V.x,Ie=V.y):pr>0&&(pe+=ot*pr,Ie+=St*pr)),ot=b.x-pe,St=b.y-Ie,ne?ot*ot+St*St:new X(pe,Ie)}function so(b){return!E(b[0])||typeof b[0][0]!="object"&&typeof b[0][0]<"u"}function Ju(b){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),so(b)}function jh(b,k){var V,ne,pe,Ie,ot,St,Ft,pr;if(!b||b.length===0)throw new Error("latlngs not passed");so(b)||(console.warn("latlngs are not flat! Only the first ring will be used"),b=b[0]);var Hr=me([0,0]),Cn=ie(b),Ri=Cn.getNorthWest().distanceTo(Cn.getSouthWest())*Cn.getNorthEast().distanceTo(Cn.getNorthWest());Ri<1700&&(Hr=$r(b));var jc=b.length,Yo=[];for(V=0;V<jc;V++){var Ud=me(b[V]);Yo.push(k.project(me([Ud.lat-Hr.lat,Ud.lng-Hr.lng])))}for(V=0,ne=0;V<jc-1;V++)ne+=Yo[V].distanceTo(Yo[V+1])/2;if(ne===0)pr=Yo[0];else for(V=0,Ie=0;V<jc-1;V++)if(ot=Yo[V],St=Yo[V+1],pe=ot.distanceTo(St),Ie+=pe,Ie>ne){Ft=(Ie-ne)/pe,pr=[St.x-Ft*(St.x-ot.x),St.y-Ft*(St.y-ot.y)];break}var gu=k.unproject(oe(pr));return me([gu.lat+Hr.lat,gu.lng+Hr.lng])}var Uf={__proto__:null,simplify:Yr,pointToSegmentDistance:Li,closestPointOnSegment:ns,clipSegment:Gs,_getEdgeIntersection:Ba,_getBitCode:$a,_sqClosestPointOnSegment:fu,isFlat:so,_flat:Ju,polylineCenter:jh},Ah={project:function(b){return new X(b.lng,b.lat)},unproject:function(b){return new ce(b.y,b.x)},bounds:new xe([-180,-90],[180,90])},na={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(b){var k=Math.PI/180,V=this.R,ne=b.lat*k,pe=this.R_MINOR/V,Ie=Math.sqrt(1-pe*pe),ot=Ie*Math.sin(ne),St=Math.tan(Math.PI/4-ne/2)/Math.pow((1-ot)/(1+ot),Ie/2);return ne=-V*Math.log(Math.max(St,1e-10)),new X(b.lng*k*V,ne)},unproject:function(b){for(var k=180/Math.PI,V=this.R,ne=this.R_MINOR/V,pe=Math.sqrt(1-ne*ne),Ie=Math.exp(-b.y/V),ot=Math.PI/2-2*Math.atan(Ie),St=0,Ft=.1,pr;St<15&&Math.abs(Ft)>1e-7;St++)pr=pe*Math.sin(ot),pr=Math.pow((1-pr)/(1+pr),pe/2),Ft=Math.PI/2-2*Math.atan(Ie*pr)-ot,ot+=Ft;return new ce(ot*k,b.x*k/V)}},Ch={__proto__:null,LonLat:Ah,Mercator:na,SphericalMercator:je},Xm=i({},_e,{code:"EPSG:3395",projection:na,transformation:function(){var b=.5/(Math.PI*na.R);return Le(b,.5,-b,.5)}()}),Fd=i({},_e,{code:"EPSG:4326",projection:Ah,transformation:Le(1/180,1,-1/180,.5)}),Gg=i({},he,{projection:Ah,transformation:Le(1,0,-1,0),scale:function(b){return Math.pow(2,b)},zoom:function(b){return Math.log(b)/Math.LN2},distance:function(b,k){var V=k.lng-b.lng,ne=k.lat-b.lat;return Math.sqrt(V*V+ne*ne)},infinite:!0});he.Earth=_e,he.EPSG3395=Xm,he.EPSG3857=Ge,he.EPSG900913=Be,he.EPSG4326=Fd,he.Simple=Gg;var hi=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(b){return b.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(b){return b&&b.removeLayer(this),this},getPane:function(b){return this._map.getPane(b?this.options[b]||b:this.options.pane)},addInteractiveTarget:function(b){return this._map._targets[c(b)]=this,this},removeInteractiveTarget:function(b){return delete this._map._targets[c(b)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(b){var k=b.target;if(k.hasLayer(this)){if(this._map=k,this._zoomAnimated=k._zoomAnimated,this.getEvents){var V=this.getEvents();k.on(V,this),this.once("remove",function(){k.off(V,this)},this)}this.onAdd(k),this.fire("add"),k.fire("layeradd",{layer:this})}}});ai.include({addLayer:function(b){if(!b._layerAdd)throw new Error("The provided object is not a Layer.");var k=c(b);return this._layers[k]?this:(this._layers[k]=b,b._mapToAdd=this,b.beforeAdd&&b.beforeAdd(this),this.whenReady(b._layerAdd,b),this)},removeLayer:function(b){var k=c(b);return this._layers[k]?(this._loaded&&b.onRemove(this),delete this._layers[k],this._loaded&&(this.fire("layerremove",{layer:b}),b.fire("remove")),b._map=b._mapToAdd=null,this):this},hasLayer:function(b){return c(b)in this._layers},eachLayer:function(b,k){for(var V in this._layers)b.call(k,this._layers[V]);return this},_addLayers:function(b){b=b?E(b)?b:[b]:[];for(var k=0,V=b.length;k<V;k++)this.addLayer(b[k])},_addZoomLimit:function(b){(!isNaN(b.options.maxZoom)||!isNaN(b.options.minZoom))&&(this._zoomBoundLayers[c(b)]=b,this._updateZoomLevels())},_removeZoomLimit:function(b){var k=c(b);this._zoomBoundLayers[k]&&(delete this._zoomBoundLayers[k],this._updateZoomLevels())},_updateZoomLevels:function(){var b=1/0,k=-1/0,V=this._getZoomSpan();for(var ne in this._zoomBoundLayers){var pe=this._zoomBoundLayers[ne].options;b=pe.minZoom===void 0?b:Math.min(b,pe.minZoom),k=pe.maxZoom===void 0?k:Math.max(k,pe.maxZoom)}this._layersMaxZoom=k===-1/0?void 0:k,this._layersMinZoom=b===1/0?void 0:b,V!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Go=hi.extend({initialize:function(b,k){g(this,k),this._layers={};var V,ne;if(b)for(V=0,ne=b.length;V<ne;V++)this.addLayer(b[V])},addLayer:function(b){var k=this.getLayerId(b);return this._layers[k]=b,this._map&&this._map.addLayer(b),this},removeLayer:function(b){var k=b in this._layers?b:this.getLayerId(b);return this._map&&this._layers[k]&&this._map.removeLayer(this._layers[k]),delete this._layers[k],this},hasLayer:function(b){var k=typeof b=="number"?b:this.getLayerId(b);return k in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(b){var k=Array.prototype.slice.call(arguments,1),V,ne;for(V in this._layers)ne=this._layers[V],ne[b]&&ne[b].apply(ne,k);return this},onAdd:function(b){this.eachLayer(b.addLayer,b)},onRemove:function(b){this.eachLayer(b.removeLayer,b)},eachLayer:function(b,k){for(var V in this._layers)b.call(k,this._layers[V]);return this},getLayer:function(b){return this._layers[b]},getLayers:function(){var b=[];return this.eachLayer(b.push,b),b},setZIndex:function(b){return this.invoke("setZIndex",b)},getLayerId:function(b){return c(b)}}),Ko=function(b,k){return new Go(b,k)},Nc=Go.extend({addLayer:function(b){return this.hasLayer(b)?this:(b.addEventParent(this),Go.prototype.addLayer.call(this,b),this.fire("layeradd",{layer:b}))},removeLayer:function(b){return this.hasLayer(b)?(b in this._layers&&(b=this._layers[b]),b.removeEventParent(this),Go.prototype.removeLayer.call(this,b),this.fire("layerremove",{layer:b})):this},setStyle:function(b){return this.invoke("setStyle",b)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var b=new J;for(var k in this._layers){var V=this._layers[k];b.extend(V.getBounds?V.getBounds():V.getLatLng())}return b}}),Na=function(b,k){return new Nc(b,k)},mu=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(b){g(this,b)},createIcon:function(b){return this._createIcon("icon",b)},createShadow:function(b){return this._createIcon("shadow",b)},_createIcon:function(b,k){var V=this._getIconUrl(b);if(!V){if(b==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var ne=this._createImg(V,k&&k.tagName==="IMG"?k:null);return this._setIconStyles(ne,b),(this.options.crossOrigin||this.options.crossOrigin==="")&&(ne.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),ne},_setIconStyles:function(b,k){var V=this.options,ne=V[k+"Size"];typeof ne=="number"&&(ne=[ne,ne]);var pe=oe(ne),Ie=oe(k==="shadow"&&V.shadowAnchor||V.iconAnchor||pe&&pe.divideBy(2,!0));b.className="leaflet-marker-"+k+" "+(V.className||""),Ie&&(b.style.marginLeft=-Ie.x+"px",b.style.marginTop=-Ie.y+"px"),pe&&(b.style.width=pe.x+"px",b.style.height=pe.y+"px")},_createImg:function(b,k){return k=k||document.createElement("img"),k.src=b,k},_getIconUrl:function(b){return Mr.retina&&this.options[b+"RetinaUrl"]||this.options[b+"Url"]}});function Ym(b){return new mu(b)}var Th=mu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(b){return typeof Th.imagePath!="string"&&(Th.imagePath=this._detectIconPath()),(this.options.imagePath||Th.imagePath)+mu.prototype._getIconUrl.call(this,b)},_stripUrl:function(b){var k=function(V,ne,pe){var Ie=ne.exec(V);return Ie&&Ie[pe]};return b=k(b,/^url\((['"])?(.+)\1\)$/,2),b&&k(b,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var b=On("div","leaflet-default-icon-path",document.body),k=Un(b,"background-image")||Un(b,"backgroundImage");if(document.body.removeChild(b),k=this._stripUrl(k),k)return k;var V=document.querySelector('link[href$="leaflet.css"]');return V?V.href.substring(0,V.href.length-11-1):""}}),Bd=Ye.extend({initialize:function(b){this._marker=b},addHooks:function(){var b=this._marker._icon;this._draggable||(this._draggable=new Gt(b,b,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Kr(b,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(b){var k=this._marker,V=k._map,ne=this._marker.options.autoPanSpeed,pe=this._marker.options.autoPanPadding,Ie=ys(k._icon),ot=V.getPixelBounds(),St=V.getPixelOrigin(),Ft=H(ot.min._subtract(St).add(pe),ot.max._subtract(St).subtract(pe));if(!Ft.contains(Ie)){var pr=oe((Math.max(Ft.max.x,Ie.x)-Ft.max.x)/(ot.max.x-Ft.max.x)-(Math.min(Ft.min.x,Ie.x)-Ft.min.x)/(ot.min.x-Ft.min.x),(Math.max(Ft.max.y,Ie.y)-Ft.max.y)/(ot.max.y-Ft.max.y)-(Math.min(Ft.min.y,Ie.y)-Ft.min.y)/(ot.min.y-Ft.min.y)).multiplyBy(ne);V.panBy(pr,{animate:!1}),this._draggable._newPos._add(pr),this._draggable._startPos._add(pr),Or(k._icon,this._draggable._newPos),this._onDrag(b),this._panRequest=F(this._adjustPan.bind(this,b))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(b){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,b)))},_onDrag:function(b){var k=this._marker,V=k._shadow,ne=ys(k._icon),pe=k._map.layerPointToLatLng(ne);V&&Or(V,ne),k._latlng=pe,b.latlng=pe,b.oldLatLng=this._oldLatLng,k.fire("move",b).fire("drag",b)},_onDragEnd:function(b){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",b)}}),ao=hi.extend({options:{icon:new Th,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(b,k){g(this,k),this._latlng=me(b)},onAdd:function(b){this._zoomAnimated=this._zoomAnimated&&b.options.markerZoomAnimation,this._zoomAnimated&&b.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(b){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&b.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(b){var k=this._latlng;return this._latlng=me(b),this.update(),this.fire("move",{oldLatLng:k,latlng:this._latlng})},setZIndexOffset:function(b){return this.options.zIndexOffset=b,this.update()},getIcon:function(){return this.options.icon},setIcon:function(b){return this.options.icon=b,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var b=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(b)}return this},_initIcon:function(){var b=this.options,k="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),V=b.icon.createIcon(this._icon),ne=!1;V!==this._icon&&(this._icon&&this._removeIcon(),ne=!0,b.title&&(V.title=b.title),V.tagName==="IMG"&&(V.alt=b.alt||"")),Kr(V,k),b.keyboard&&(V.tabIndex="0",V.setAttribute("role","button")),this._icon=V,b.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&In(V,"focus",this._panOnFocus,this);var pe=b.icon.createShadow(this._shadow),Ie=!1;pe!==this._shadow&&(this._removeShadow(),Ie=!0),pe&&(Kr(pe,k),pe.alt=""),this._shadow=pe,b.opacity<1&&this._updateOpacity(),ne&&this.getPane().appendChild(this._icon),this._initInteraction(),pe&&Ie&&this.getPane(b.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zr(this._icon,"focus",this._panOnFocus,this),xs(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xs(this._shadow),this._shadow=null},_setPos:function(b){this._icon&&Or(this._icon,b),this._shadow&&Or(this._shadow,b),this._zIndex=b.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(b){this._icon&&(this._icon.style.zIndex=this._zIndex+b)},_animateZoom:function(b){var k=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center).round();this._setPos(k)},_initInteraction:function(){if(this.options.interactive&&(Kr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bd)){var b=this.options.draggable;this.dragging&&(b=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bd(this),b&&this.dragging.enable()}},setOpacity:function(b){return this.options.opacity=b,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var b=this.options.opacity;this._icon&&ni(this._icon,b),this._shadow&&ni(this._shadow,b)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var b=this._map;if(b){var k=this.options.icon.options,V=k.iconSize?oe(k.iconSize):oe(0,0),ne=k.iconAnchor?oe(k.iconAnchor):oe(0,0);b.panInside(this._latlng,{paddingTopLeft:ne,paddingBottomRight:V.subtract(ne)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Sc(b,k){return new ao(b,k)}var ha=hi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(b){this._renderer=b.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(b){return g(this,b),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&b&&Object.prototype.hasOwnProperty.call(b,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Tl=ha.extend({options:{fill:!0,radius:10},initialize:function(b,k){g(this,k),this._latlng=me(b),this._radius=this.options.radius},setLatLng:function(b){var k=this._latlng;return this._latlng=me(b),this.redraw(),this.fire("move",{oldLatLng:k,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(b){return this.options.radius=this._radius=b,this.redraw()},getRadius:function(){return this._radius},setStyle:function(b){var k=b&&b.radius||this._radius;return ha.prototype.setStyle.call(this,b),this.setRadius(k),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var b=this._radius,k=this._radiusY||b,V=this._clickTolerance(),ne=[b+V,k+V];this._pxBounds=new xe(this._point.subtract(ne),this._point.add(ne))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(b){return b.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ii(b,k){return new Tl(b,k)}var Ec=Tl.extend({initialize:function(b,k,V){if(typeof k=="number"&&(k=i({},V,{radius:k})),g(this,k),this._latlng=me(b),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(b){return this._mRadius=b,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var b=[this._radius,this._radiusY||this._radius];return new J(this._map.layerPointToLatLng(this._point.subtract(b)),this._map.layerPointToLatLng(this._point.add(b)))},setStyle:ha.prototype.setStyle,_project:function(){var b=this._latlng.lng,k=this._latlng.lat,V=this._map,ne=V.options.crs;if(ne.distance===_e.distance){var pe=Math.PI/180,Ie=this._mRadius/_e.R/pe,ot=V.project([k+Ie,b]),St=V.project([k-Ie,b]),Ft=ot.add(St).divideBy(2),pr=V.unproject(Ft).lat,Hr=Math.acos((Math.cos(Ie*pe)-Math.sin(k*pe)*Math.sin(pr*pe))/(Math.cos(k*pe)*Math.cos(pr*pe)))/pe;(isNaN(Hr)||Hr===0)&&(Hr=Ie/Math.cos(Math.PI/180*k)),this._point=Ft.subtract(V.getPixelOrigin()),this._radius=isNaN(Hr)?0:Ft.x-V.project([pr,b-Hr]).x,this._radiusY=Ft.y-ot.y}else{var Cn=ne.unproject(ne.project(this._latlng).subtract([this._mRadius,0]));this._point=V.latLngToLayerPoint(this._latlng),this._radius=this._point.x-V.latLngToLayerPoint(Cn).x}this._updateBounds()}});function Ne(b,k,V){return new Ec(b,k,V)}var p=ha.extend({options:{smoothFactor:1,noClip:!1},initialize:function(b,k){g(this,k),this._setLatLngs(b)},getLatLngs:function(){return this._latlngs},setLatLngs:function(b){return this._setLatLngs(b),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(b){for(var k=1/0,V=null,ne=fu,pe,Ie,ot=0,St=this._parts.length;ot<St;ot++)for(var Ft=this._parts[ot],pr=1,Hr=Ft.length;pr<Hr;pr++){pe=Ft[pr-1],Ie=Ft[pr];var Cn=ne(b,pe,Ie,!0);Cn<k&&(k=Cn,V=ne(b,pe,Ie))}return V&&(V.distance=Math.sqrt(k)),V},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(b,k){return k=k||this._defaultShape(),b=me(b),k.push(b),this._bounds.extend(b),this.redraw()},_setLatLngs:function(b){this._bounds=new J,this._latlngs=this._convertLatLngs(b)},_defaultShape:function(){return so(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(b){for(var k=[],V=so(b),ne=0,pe=b.length;ne<pe;ne++)V?(k[ne]=me(b[ne]),this._bounds.extend(k[ne])):k[ne]=this._convertLatLngs(b[ne]);return k},_project:function(){var b=new xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,b),this._bounds.isValid()&&b.isValid()&&(this._rawPxBounds=b,this._updateBounds())},_updateBounds:function(){var b=this._clickTolerance(),k=new X(b,b);this._rawPxBounds&&(this._pxBounds=new xe([this._rawPxBounds.min.subtract(k),this._rawPxBounds.max.add(k)]))},_projectLatlngs:function(b,k,V){var ne=b[0]instanceof ce,pe=b.length,Ie,ot;if(ne){for(ot=[],Ie=0;Ie<pe;Ie++)ot[Ie]=this._map.latLngToLayerPoint(b[Ie]),V.extend(ot[Ie]);k.push(ot)}else for(Ie=0;Ie<pe;Ie++)this._projectLatlngs(b[Ie],k,V)},_clipPoints:function(){var b=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(b))){if(this.options.noClip){this._parts=this._rings;return}var k=this._parts,V,ne,pe,Ie,ot,St,Ft;for(V=0,pe=0,Ie=this._rings.length;V<Ie;V++)for(Ft=this._rings[V],ne=0,ot=Ft.length;ne<ot-1;ne++)St=Gs(Ft[ne],Ft[ne+1],b,ne,!0),St&&(k[pe]=k[pe]||[],k[pe].push(St[0]),(St[1]!==Ft[ne+1]||ne===ot-2)&&(k[pe].push(St[1]),pe++))}},_simplifyPoints:function(){for(var b=this._parts,k=this.options.smoothFactor,V=0,ne=b.length;V<ne;V++)b[V]=Yr(b[V],k)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(b,k){var V,ne,pe,Ie,ot,St,Ft=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(b))return!1;for(V=0,Ie=this._parts.length;V<Ie;V++)for(St=this._parts[V],ne=0,ot=St.length,pe=ot-1;ne<ot;pe=ne++)if(!(!k&&ne===0)&&Li(b,St[pe],St[ne])<=Ft)return!0;return!1}});function v(b,k){return new p(b,k)}p._flat=Ju;var _=p.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(b){var k=p.prototype._convertLatLngs.call(this,b),V=k.length;return V>=2&&k[0]instanceof ce&&k[0].equals(k[V-1])&&k.pop(),k},_setLatLngs:function(b){p.prototype._setLatLngs.call(this,b),so(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return so(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var b=this._renderer._bounds,k=this.options.weight,V=new X(k,k);if(b=new xe(b.min.subtract(V),b.max.add(V)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(b))){if(this.options.noClip){this._parts=this._rings;return}for(var ne=0,pe=this._rings.length,Ie;ne<pe;ne++)Ie=mr(this._rings[ne],b,!0),Ie.length&&this._parts.push(Ie)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(b){var k=!1,V,ne,pe,Ie,ot,St,Ft,pr;if(!this._pxBounds||!this._pxBounds.contains(b))return!1;for(Ie=0,Ft=this._parts.length;Ie<Ft;Ie++)for(V=this._parts[Ie],ot=0,pr=V.length,St=pr-1;ot<pr;St=ot++)ne=V[ot],pe=V[St],ne.y>b.y!=pe.y>b.y&&b.x<(pe.x-ne.x)*(b.y-ne.y)/(pe.y-ne.y)+ne.x&&(k=!k);return k||p.prototype._containsPoint.call(this,b,!0)}});function A(b,k){return new _(b,k)}var P=Nc.extend({initialize:function(b,k){g(this,k),this._layers={},b&&this.addData(b)},addData:function(b){var k=E(b)?b:b.features,V,ne,pe;if(k){for(V=0,ne=k.length;V<ne;V++)pe=k[V],(pe.geometries||pe.geometry||pe.features||pe.coordinates)&&this.addData(pe);return this}var Ie=this.options;if(Ie.filter&&!Ie.filter(b))return this;var ot=R(b,Ie);return ot?(ot.feature=Ze(b),ot.defaultOptions=ot.options,this.resetStyle(ot),Ie.onEachFeature&&Ie.onEachFeature(b,ot),this.addLayer(ot)):this},resetStyle:function(b){return b===void 0?this.eachLayer(this.resetStyle,this):(b.options=i({},b.defaultOptions),this._setLayerStyle(b,this.options.style),this)},setStyle:function(b){return this.eachLayer(function(k){this._setLayerStyle(k,b)},this)},_setLayerStyle:function(b,k){b.setStyle&&(typeof k=="function"&&(k=k(b.feature)),b.setStyle(k))}});function R(b,k){var V=b.type==="Feature"?b.geometry:b,ne=V?V.coordinates:null,pe=[],Ie=k&&k.pointToLayer,ot=k&&k.coordsToLatLng||G,St,Ft,pr,Hr;if(!ne&&!V)return null;switch(V.type){case"Point":return St=ot(ne),U(Ie,b,St,k);case"MultiPoint":for(pr=0,Hr=ne.length;pr<Hr;pr++)St=ot(ne[pr]),pe.push(U(Ie,b,St,k));return new Nc(pe);case"LineString":case"MultiLineString":return Ft=te(ne,V.type==="LineString"?0:1,ot),new p(Ft,k);case"Polygon":case"MultiPolygon":return Ft=te(ne,V.type==="Polygon"?1:2,ot),new _(Ft,k);case"GeometryCollection":for(pr=0,Hr=V.geometries.length;pr<Hr;pr++){var Cn=R({geometry:V.geometries[pr],type:"Feature",properties:b.properties},k);Cn&&pe.push(Cn)}return new Nc(pe);case"FeatureCollection":for(pr=0,Hr=V.features.length;pr<Hr;pr++){var Ri=R(V.features[pr],k);Ri&&pe.push(Ri)}return new Nc(pe);default:throw new Error("Invalid GeoJSON object.")}}function U(b,k,V,ne){return b?b(k,V):new ao(V,ne&&ne.markersInheritOptions&&ne)}function G(b){return new ce(b[1],b[0],b[2])}function te(b,k,V){for(var ne=[],pe=0,Ie=b.length,ot;pe<Ie;pe++)ot=k?te(b[pe],k-1,V):(V||G)(b[pe]),ne.push(ot);return ne}function de(b,k){return b=me(b),b.alt!==void 0?[f(b.lng,k),f(b.lat,k),f(b.alt,k)]:[f(b.lng,k),f(b.lat,k)]}function we(b,k,V,ne){for(var pe=[],Ie=0,ot=b.length;Ie<ot;Ie++)pe.push(k?we(b[Ie],so(b[Ie])?0:k-1,V,ne):de(b[Ie],ne));return!k&&V&&pe.length>0&&pe.push(pe[0].slice()),pe}function Pe(b,k){return b.feature?i({},b.feature,{geometry:k}):Ze(k)}function Ze(b){return b.type==="Feature"||b.type==="FeatureCollection"?b:{type:"Feature",properties:{},geometry:b}}var at={toGeoJSON:function(b){return Pe(this,{type:"Point",coordinates:de(this.getLatLng(),b)})}};ao.include(at),Ec.include(at),Tl.include(at),p.include({toGeoJSON:function(b){var k=!so(this._latlngs),V=we(this._latlngs,k?1:0,!1,b);return Pe(this,{type:(k?"Multi":"")+"LineString",coordinates:V})}}),_.include({toGeoJSON:function(b){var k=!so(this._latlngs),V=k&&!so(this._latlngs[0]),ne=we(this._latlngs,V?2:k?1:0,!0,b);return k||(ne=[ne]),Pe(this,{type:(V?"Multi":"")+"Polygon",coordinates:ne})}}),Go.include({toMultiPoint:function(b){var k=[];return this.eachLayer(function(V){k.push(V.toGeoJSON(b).geometry.coordinates)}),Pe(this,{type:"MultiPoint",coordinates:k})},toGeoJSON:function(b){var k=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(k==="MultiPoint")return this.toMultiPoint(b);var V=k==="GeometryCollection",ne=[];return this.eachLayer(function(pe){if(pe.toGeoJSON){var Ie=pe.toGeoJSON(b);if(V)ne.push(Ie.geometry);else{var ot=Ze(Ie);ot.type==="FeatureCollection"?ne.push.apply(ne,ot.features):ne.push(ot)}}}),V?Pe(this,{geometries:ne,type:"GeometryCollection"}):{type:"FeatureCollection",features:ne}}});function dt(b,k){return new P(b,k)}var yt=dt,Pt=hi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(b,k,V){this._url=b,this._bounds=ie(k),g(this,V)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Kr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xs(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(b){return this.options.opacity=b,this._image&&this._updateOpacity(),this},setStyle:function(b){return b.opacity&&this.setOpacity(b.opacity),this},bringToFront:function(){return this._map&&vs(this._image),this},bringToBack:function(){return this._map&&ll(this._image),this},setUrl:function(b){return this._url=b,this._image&&(this._image.src=b),this},setBounds:function(b){return this._bounds=ie(b),this._map&&this._reset(),this},getEvents:function(){var b={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},setZIndex:function(b){return this.options.zIndex=b,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var b=this._url.tagName==="IMG",k=this._image=b?this._url:On("img");if(Kr(k,"leaflet-image-layer"),this._zoomAnimated&&Kr(k,"leaflet-zoom-animated"),this.options.className&&Kr(k,this.options.className),k.onselectstart=h,k.onmousemove=h,k.onload=o(this.fire,this,"load"),k.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),b){this._url=k.src;return}k.src=this._url,k.alt=this.options.alt},_animateZoom:function(b){var k=this._map.getZoomScale(b.zoom),V=this._map._latLngBoundsToNewLayerBounds(this._bounds,b.zoom,b.center).min;We(this._image,V,k)},_reset:function(){var b=this._image,k=new xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),V=k.getSize();Or(b,k.min),b.style.width=V.x+"px",b.style.height=V.y+"px"},_updateOpacity:function(){ni(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var b=this.options.errorOverlayUrl;b&&this._url!==b&&(this._url=b,this._image.src=b)},getCenter:function(){return this._bounds.getCenter()}}),tr=function(b,k,V){return new Pt(b,k,V)},ar=Pt.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var b=this._url.tagName==="VIDEO",k=this._image=b?this._url:On("video");if(Kr(k,"leaflet-image-layer"),this._zoomAnimated&&Kr(k,"leaflet-zoom-animated"),this.options.className&&Kr(k,this.options.className),k.onselectstart=h,k.onmousemove=h,k.onloadeddata=o(this.fire,this,"load"),b){for(var V=k.getElementsByTagName("source"),ne=[],pe=0;pe<V.length;pe++)ne.push(V[pe].src);this._url=V.length>0?ne:[k.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(k.style,"objectFit")&&(k.style.objectFit="fill"),k.autoplay=!!this.options.autoplay,k.loop=!!this.options.loop,k.muted=!!this.options.muted,k.playsInline=!!this.options.playsInline;for(var Ie=0;Ie<this._url.length;Ie++){var ot=On("source");ot.src=this._url[Ie],k.appendChild(ot)}}});function sr(b,k,V){return new ar(b,k,V)}var Nn=Pt.extend({_initImage:function(){var b=this._image=this._url;Kr(b,"leaflet-image-layer"),this._zoomAnimated&&Kr(b,"leaflet-zoom-animated"),this.options.className&&Kr(b,this.options.className),b.onselectstart=h,b.onmousemove=h}});function kn(b,k,V){return new Nn(b,k,V)}var _s=hi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(b,k){b&&(b instanceof ce||E(b))?(this._latlng=me(b),g(this,k)):(g(this,b),this._source=k),this.options.content&&(this._content=this.options.content)},openOn:function(b){return b=arguments.length?b:this._source._map,b.hasLayer(this)||b.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(b){return this._map?this.close():(arguments.length?this._source=b:b=this._source,this._prepareOpen(),this.openOn(b._map)),this},onAdd:function(b){this._zoomAnimated=b._zoomAnimated,this._container||this._initLayout(),b._fadeAnimated&&ni(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),b._fadeAnimated&&ni(this._container,1),this.bringToFront(),this.options.interactive&&(Kr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(b){b._fadeAnimated?(ni(this._container,0),this._removeTimeout=setTimeout(o(xs,void 0,this._container),200)):xs(this._container),this.options.interactive&&(yi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(b){return this._latlng=me(b),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(b){return this._content=b,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var b={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vs(this._container),this},bringToBack:function(){return this._map&&ll(this._container),this},_prepareOpen:function(b){var k=this._source;if(!k._map)return!1;if(k instanceof Nc){k=null;var V=this._source._layers;for(var ne in V)if(V[ne]._map){k=V[ne];break}if(!k)return!1;this._source=k}if(!b)if(k.getCenter)b=k.getCenter();else if(k.getLatLng)b=k.getLatLng();else if(k.getBounds)b=k.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(b),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var b=this._contentNode,k=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof k=="string")b.innerHTML=k;else{for(;b.hasChildNodes();)b.removeChild(b.firstChild);b.appendChild(k)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var b=this._map.latLngToLayerPoint(this._latlng),k=oe(this.options.offset),V=this._getAnchor();this._zoomAnimated?Or(this._container,b.add(V)):k=k.add(b).add(V);var ne=this._containerBottom=-k.y,pe=this._containerLeft=-Math.round(this._containerWidth/2)+k.x;this._container.style.bottom=ne+"px",this._container.style.left=pe+"px"}},_getAnchor:function(){return[0,0]}});ai.include({_initOverlay:function(b,k,V,ne){var pe=k;return pe instanceof b||(pe=new b(ne).setContent(k)),V&&pe.setLatLng(V),pe}}),hi.include({_initOverlay:function(b,k,V,ne){var pe=V;return pe instanceof b?(g(pe,ne),pe._source=this):(pe=k&&!ne?k:new b(ne,this),pe.setContent(V)),pe}});var oo=_s.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(b){return b=arguments.length?b:this._source._map,!b.hasLayer(this)&&b._popup&&b._popup.options.autoClose&&b.removeLayer(b._popup),b._popup=this,_s.prototype.openOn.call(this,b)},onAdd:function(b){_s.prototype.onAdd.call(this,b),b.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ha||this._source.on("preclick",Zu))},onRemove:function(b){_s.prototype.onRemove.call(this,b),b.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ha||this._source.off("preclick",Zu))},getEvents:function(){var b=_s.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(b.preclick=this.close),this.options.keepInView&&(b.moveend=this._adjustPan),b},_initLayout:function(){var b="leaflet-popup",k=this._container=On("div",b+" "+(this.options.className||"")+" leaflet-zoom-animated"),V=this._wrapper=On("div",b+"-content-wrapper",k);if(this._contentNode=On("div",b+"-content",V),Cl(k),Eh(this._contentNode),In(k,"contextmenu",Zu),this._tipContainer=On("div",b+"-tip-container",k),this._tip=On("div",b+"-tip",this._tipContainer),this.options.closeButton){var ne=this._closeButton=On("a",b+"-close-button",k);ne.setAttribute("role","button"),ne.setAttribute("aria-label","Close popup"),ne.href="#close",ne.innerHTML='<span aria-hidden="true">&#215;</span>',In(ne,"click",function(pe){ra(pe),this.close()},this)}},_updateLayout:function(){var b=this._contentNode,k=b.style;k.width="",k.whiteSpace="nowrap";var V=b.offsetWidth;V=Math.min(V,this.options.maxWidth),V=Math.max(V,this.options.minWidth),k.width=V+1+"px",k.whiteSpace="",k.height="";var ne=b.offsetHeight,pe=this.options.maxHeight,Ie="leaflet-popup-scrolled";pe&&ne>pe?(k.height=pe+"px",Kr(b,Ie)):yi(b,Ie),this._containerWidth=this._container.offsetWidth},_animateZoom:function(b){var k=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center),V=this._getAnchor();Or(this._container,k.add(V))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var b=this._map,k=parseInt(Un(this._container,"marginBottom"),10)||0,V=this._container.offsetHeight+k,ne=this._containerWidth,pe=new X(this._containerLeft,-V-this._containerBottom);pe._add(ys(this._container));var Ie=b.layerPointToContainerPoint(pe),ot=oe(this.options.autoPanPadding),St=oe(this.options.autoPanPaddingTopLeft||ot),Ft=oe(this.options.autoPanPaddingBottomRight||ot),pr=b.getSize(),Hr=0,Cn=0;Ie.x+ne+Ft.x>pr.x&&(Hr=Ie.x+ne-pr.x+Ft.x),Ie.x-Hr-St.x<0&&(Hr=Ie.x-St.x),Ie.y+V+Ft.y>pr.y&&(Cn=Ie.y+V-pr.y+Ft.y),Ie.y-Cn-St.y<0&&(Cn=Ie.y-St.y),(Hr||Cn)&&(this.options.keepInView&&(this._autopanning=!0),b.fire("autopanstart").panBy([Hr,Cn]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Xo=function(b,k){return new oo(b,k)};ai.mergeOptions({closePopupOnClick:!0}),ai.include({openPopup:function(b,k,V){return this._initOverlay(oo,b,k,V).openOn(this),this},closePopup:function(b){return b=arguments.length?b:this._popup,b&&b.close(),this}}),hi.include({bindPopup:function(b,k){return this._popup=this._initOverlay(oo,this._popup,b,k),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(b){return this._popup&&(this instanceof Nc||(this._popup._source=this),this._popup._prepareOpen(b||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(b){return this._popup&&this._popup.setContent(b),this},getPopup:function(){return this._popup},_openPopup:function(b){if(!(!this._popup||!this._map)){cl(b);var k=b.layer||b.target;if(this._popup._source===k&&!(k instanceof ha)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(b.latlng);return}this._popup._source=k,this.openPopup(b.latlng)}},_movePopup:function(b){this._popup.setLatLng(b.latlng)},_onKeyPress:function(b){b.originalEvent.keyCode===13&&this._openPopup(b)}});var Gi=_s.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(b){_s.prototype.onAdd.call(this,b),this.setOpacity(this.options.opacity),b.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(b){_s.prototype.onRemove.call(this,b),b.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var b=_s.prototype.getEvents.call(this);return this.options.permanent||(b.preclick=this.close),b},_initLayout:function(){var b="leaflet-tooltip",k=b+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=On("div",k),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(b){var k,V,ne=this._map,pe=this._container,Ie=ne.latLngToContainerPoint(ne.getCenter()),ot=ne.layerPointToContainerPoint(b),St=this.options.direction,Ft=pe.offsetWidth,pr=pe.offsetHeight,Hr=oe(this.options.offset),Cn=this._getAnchor();St==="top"?(k=Ft/2,V=pr):St==="bottom"?(k=Ft/2,V=0):St==="center"?(k=Ft/2,V=pr/2):St==="right"?(k=0,V=pr/2):St==="left"?(k=Ft,V=pr/2):ot.x<Ie.x?(St="right",k=0,V=pr/2):(St="left",k=Ft+(Hr.x+Cn.x)*2,V=pr/2),b=b.subtract(oe(k,V,!0)).add(Hr).add(Cn),yi(pe,"leaflet-tooltip-right"),yi(pe,"leaflet-tooltip-left"),yi(pe,"leaflet-tooltip-top"),yi(pe,"leaflet-tooltip-bottom"),Kr(pe,"leaflet-tooltip-"+St),Or(pe,b)},_updatePosition:function(){var b=this._map.latLngToLayerPoint(this._latlng);this._setPosition(b)},setOpacity:function(b){this.options.opacity=b,this._container&&ni(this._container,b)},_animateZoom:function(b){var k=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center);this._setPosition(k)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_o=function(b,k){return new Gi(b,k)};ai.include({openTooltip:function(b,k,V){return this._initOverlay(Gi,b,k,V).openOn(this),this},closeTooltip:function(b){return b.close(),this}}),hi.include({bindTooltip:function(b,k){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gi,this._tooltip,b,k),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(b){if(!(!b&&this._tooltipHandlersAdded)){var k=b?"off":"on",V={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?V.add=this._openTooltip:(V.mouseover=this._openTooltip,V.mouseout=this.closeTooltip,V.click=this._openTooltip,this._map?this._addFocusListeners():V.add=this._addFocusListeners),this._tooltip.options.sticky&&(V.mousemove=this._moveTooltip),this[k](V),this._tooltipHandlersAdded=!b}},openTooltip:function(b){return this._tooltip&&(this instanceof Nc||(this._tooltip._source=this),this._tooltip._prepareOpen(b)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(b){return this._tooltip&&this._tooltip.setContent(b),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(b){var k=typeof b.getElement=="function"&&b.getElement();k&&(In(k,"focus",function(){this._tooltip._source=b,this.openTooltip()},this),In(k,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(b){var k=typeof b.getElement=="function"&&b.getElement();k&&k.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(b){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var k=this;this._map.once("moveend",function(){k._openOnceFlag=!1,k._openTooltip(b)});return}this._tooltip._source=b.layer||b.target,this.openTooltip(this._tooltip.options.sticky?b.latlng:void 0)}},_moveTooltip:function(b){var k=b.latlng,V,ne;this._tooltip.options.sticky&&b.originalEvent&&(V=this._map.mouseEventToContainerPoint(b.originalEvent),ne=this._map.containerPointToLayerPoint(V),k=this._map.layerPointToLatLng(ne)),this._tooltip.setLatLng(k)}});var Pl=mu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(b){var k=b&&b.tagName==="DIV"?b:document.createElement("div"),V=this.options;if(V.html instanceof Element?(Os(k),k.appendChild(V.html)):k.innerHTML=V.html!==!1?V.html:"",V.bgPos){var ne=oe(V.bgPos);k.style.backgroundPosition=-ne.x+"px "+-ne.y+"px"}return this._setIconStyles(k,"icon"),k},createShadow:function(){return null}});function Zm(b){return new Pl(b)}mu.Default=Th;var ed=hi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Mr.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(b){g(this,b)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(b){b._addZoomLimit(this)},onRemove:function(b){this._removeAllTiles(),xs(this._container),b._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ll(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(b){return this.options.opacity=b,this._updateOpacity(),this},setZIndex:function(b){return this.options.zIndex=b,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var b=this._clampZoom(this._map.getZoom());b!==this._tileZoom&&(this._tileZoom=b,this._updateLevels()),this._update()}return this},getEvents:function(){var b={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),b.move=this._onMove),this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},createTile:function(){return document.createElement("div")},getTileSize:function(){var b=this.options.tileSize;return b instanceof X?b:new X(b,b)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(b){for(var k=this.getPane().children,V=-b(-1/0,1/0),ne=0,pe=k.length,Ie;ne<pe;ne++)Ie=k[ne].style.zIndex,k[ne]!==this._container&&Ie&&(V=b(V,+Ie));isFinite(V)&&(this.options.zIndex=V+b(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Mr.ielt9){ni(this._container,this.options.opacity);var b=+new Date,k=!1,V=!1;for(var ne in this._tiles){var pe=this._tiles[ne];if(!(!pe.current||!pe.loaded)){var Ie=Math.min(1,(b-pe.loaded)/200);ni(pe.el,Ie),Ie<1?k=!0:(pe.active?V=!0:this._onOpaqueTile(pe),pe.active=!0)}}V&&!this._noPrune&&this._pruneTiles(),k&&(q(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=On("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var b=this._tileZoom,k=this.options.maxZoom;if(b!==void 0){for(var V in this._levels)V=Number(V),this._levels[V].el.children.length||V===b?(this._levels[V].el.style.zIndex=k-Math.abs(b-V),this._onUpdateLevel(V)):(xs(this._levels[V].el),this._removeTilesAtZoom(V),this._onRemoveLevel(V),delete this._levels[V]);var ne=this._levels[b],pe=this._map;return ne||(ne=this._levels[b]={},ne.el=On("div","leaflet-tile-container leaflet-zoom-animated",this._container),ne.el.style.zIndex=k,ne.origin=pe.project(pe.unproject(pe.getPixelOrigin()),b).round(),ne.zoom=b,this._setZoomTransform(ne,pe.getCenter(),pe.getZoom()),h(ne.el.offsetWidth),this._onCreateLevel(ne)),this._level=ne,ne}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var b,k,V=this._map.getZoom();if(V>this.options.maxZoom||V<this.options.minZoom){this._removeAllTiles();return}for(b in this._tiles)k=this._tiles[b],k.retain=k.current;for(b in this._tiles)if(k=this._tiles[b],k.current&&!k.active){var ne=k.coords;this._retainParent(ne.x,ne.y,ne.z,ne.z-5)||this._retainChildren(ne.x,ne.y,ne.z,ne.z+2)}for(b in this._tiles)this._tiles[b].retain||this._removeTile(b)}},_removeTilesAtZoom:function(b){for(var k in this._tiles)this._tiles[k].coords.z===b&&this._removeTile(k)},_removeAllTiles:function(){for(var b in this._tiles)this._removeTile(b)},_invalidateAll:function(){for(var b in this._levels)xs(this._levels[b].el),this._onRemoveLevel(Number(b)),delete this._levels[b];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(b,k,V,ne){var pe=Math.floor(b/2),Ie=Math.floor(k/2),ot=V-1,St=new X(+pe,+Ie);St.z=+ot;var Ft=this._tileCoordsToKey(St),pr=this._tiles[Ft];return pr&&pr.active?(pr.retain=!0,!0):(pr&&pr.loaded&&(pr.retain=!0),ot>ne?this._retainParent(pe,Ie,ot,ne):!1)},_retainChildren:function(b,k,V,ne){for(var pe=2*b;pe<2*b+2;pe++)for(var Ie=2*k;Ie<2*k+2;Ie++){var ot=new X(pe,Ie);ot.z=V+1;var St=this._tileCoordsToKey(ot),Ft=this._tiles[St];if(Ft&&Ft.active){Ft.retain=!0;continue}else Ft&&Ft.loaded&&(Ft.retain=!0);V+1<ne&&this._retainChildren(pe,Ie,V+1,ne)}},_resetView:function(b){var k=b&&(b.pinch||b.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),k,k)},_animateZoom:function(b){this._setView(b.center,b.zoom,!0,b.noUpdate)},_clampZoom:function(b){var k=this.options;return k.minNativeZoom!==void 0&&b<k.minNativeZoom?k.minNativeZoom:k.maxNativeZoom!==void 0&&k.maxNativeZoom<b?k.maxNativeZoom:b},_setView:function(b,k,V,ne){var pe=Math.round(k);this.options.maxZoom!==void 0&&pe>this.options.maxZoom||this.options.minZoom!==void 0&&pe<this.options.minZoom?pe=void 0:pe=this._clampZoom(pe);var Ie=this.options.updateWhenZooming&&pe!==this._tileZoom;(!ne||Ie)&&(this._tileZoom=pe,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),pe!==void 0&&this._update(b),V||this._pruneTiles(),this._noPrune=!!V),this._setZoomTransforms(b,k)},_setZoomTransforms:function(b,k){for(var V in this._levels)this._setZoomTransform(this._levels[V],b,k)},_setZoomTransform:function(b,k,V){var ne=this._map.getZoomScale(V,b.zoom),pe=b.origin.multiplyBy(ne).subtract(this._map._getNewPixelOrigin(k,V)).round();Mr.any3d?We(b.el,pe,ne):Or(b.el,pe)},_resetGrid:function(){var b=this._map,k=b.options.crs,V=this._tileSize=this.getTileSize(),ne=this._tileZoom,pe=this._map.getPixelWorldBounds(this._tileZoom);pe&&(this._globalTileRange=this._pxBoundsToTileRange(pe)),this._wrapX=k.wrapLng&&!this.options.noWrap&&[Math.floor(b.project([0,k.wrapLng[0]],ne).x/V.x),Math.ceil(b.project([0,k.wrapLng[1]],ne).x/V.y)],this._wrapY=k.wrapLat&&!this.options.noWrap&&[Math.floor(b.project([k.wrapLat[0],0],ne).y/V.x),Math.ceil(b.project([k.wrapLat[1],0],ne).y/V.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(b){var k=this._map,V=k._animatingZoom?Math.max(k._animateToZoom,k.getZoom()):k.getZoom(),ne=k.getZoomScale(V,this._tileZoom),pe=k.project(b,this._tileZoom).floor(),Ie=k.getSize().divideBy(ne*2);return new xe(pe.subtract(Ie),pe.add(Ie))},_update:function(b){var k=this._map;if(k){var V=this._clampZoom(k.getZoom());if(b===void 0&&(b=k.getCenter()),this._tileZoom!==void 0){var ne=this._getTiledPixelBounds(b),pe=this._pxBoundsToTileRange(ne),Ie=pe.getCenter(),ot=[],St=this.options.keepBuffer,Ft=new xe(pe.getBottomLeft().subtract([St,-St]),pe.getTopRight().add([St,-St]));if(!(isFinite(pe.min.x)&&isFinite(pe.min.y)&&isFinite(pe.max.x)&&isFinite(pe.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pr in this._tiles){var Hr=this._tiles[pr].coords;(Hr.z!==this._tileZoom||!Ft.contains(new X(Hr.x,Hr.y)))&&(this._tiles[pr].current=!1)}if(Math.abs(V-this._tileZoom)>1){this._setView(b,V);return}for(var Cn=pe.min.y;Cn<=pe.max.y;Cn++)for(var Ri=pe.min.x;Ri<=pe.max.x;Ri++){var jc=new X(Ri,Cn);if(jc.z=this._tileZoom,!!this._isValidTile(jc)){var Yo=this._tiles[this._tileCoordsToKey(jc)];Yo?Yo.current=!0:ot.push(jc)}}if(ot.sort(function(gu,Yv){return gu.distanceTo(Ie)-Yv.distanceTo(Ie)}),ot.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ud=document.createDocumentFragment();for(Ri=0;Ri<ot.length;Ri++)this._addTile(ot[Ri],Ud);this._level.el.appendChild(Ud)}}}},_isValidTile:function(b){var k=this._map.options.crs;if(!k.infinite){var V=this._globalTileRange;if(!k.wrapLng&&(b.x<V.min.x||b.x>V.max.x)||!k.wrapLat&&(b.y<V.min.y||b.y>V.max.y))return!1}if(!this.options.bounds)return!0;var ne=this._tileCoordsToBounds(b);return ie(this.options.bounds).overlaps(ne)},_keyToBounds:function(b){return this._tileCoordsToBounds(this._keyToTileCoords(b))},_tileCoordsToNwSe:function(b){var k=this._map,V=this.getTileSize(),ne=b.scaleBy(V),pe=ne.add(V),Ie=k.unproject(ne,b.z),ot=k.unproject(pe,b.z);return[Ie,ot]},_tileCoordsToBounds:function(b){var k=this._tileCoordsToNwSe(b),V=new J(k[0],k[1]);return this.options.noWrap||(V=this._map.wrapLatLngBounds(V)),V},_tileCoordsToKey:function(b){return b.x+":"+b.y+":"+b.z},_keyToTileCoords:function(b){var k=b.split(":"),V=new X(+k[0],+k[1]);return V.z=+k[2],V},_removeTile:function(b){var k=this._tiles[b];k&&(xs(k.el),delete this._tiles[b],this.fire("tileunload",{tile:k.el,coords:this._keyToTileCoords(b)}))},_initTile:function(b){Kr(b,"leaflet-tile");var k=this.getTileSize();b.style.width=k.x+"px",b.style.height=k.y+"px",b.onselectstart=h,b.onmousemove=h,Mr.ielt9&&this.options.opacity<1&&ni(b,this.options.opacity)},_addTile:function(b,k){var V=this._getTilePos(b),ne=this._tileCoordsToKey(b),pe=this.createTile(this._wrapCoords(b),o(this._tileReady,this,b));this._initTile(pe),this.createTile.length<2&&F(o(this._tileReady,this,b,null,pe)),Or(pe,V),this._tiles[ne]={el:pe,coords:b,current:!0},k.appendChild(pe),this.fire("tileloadstart",{tile:pe,coords:b})},_tileReady:function(b,k,V){k&&this.fire("tileerror",{error:k,tile:V,coords:b});var ne=this._tileCoordsToKey(b);V=this._tiles[ne],V&&(V.loaded=+new Date,this._map._fadeAnimated?(ni(V.el,0),q(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(V.active=!0,this._pruneTiles()),k||(Kr(V.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:V.el,coords:b})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Mr.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(b){return b.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(b){var k=new X(this._wrapX?d(b.x,this._wrapX):b.x,this._wrapY?d(b.y,this._wrapY):b.y);return k.z=b.z,k},_pxBoundsToTileRange:function(b){var k=this.getTileSize();return new xe(b.min.unscaleBy(k).floor(),b.max.unscaleBy(k).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var b in this._tiles)if(!this._tiles[b].loaded)return!1;return!0}});function PN(b){return new ed(b)}var $d=ed.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(b,k){this._url=b,k=g(this,k),k.detectRetina&&Mr.retina&&k.maxZoom>0?(k.tileSize=Math.floor(k.tileSize/2),k.zoomReverse?(k.zoomOffset--,k.minZoom=Math.min(k.maxZoom,k.minZoom+1)):(k.zoomOffset++,k.maxZoom=Math.max(k.minZoom,k.maxZoom-1)),k.minZoom=Math.max(0,k.minZoom)):k.zoomReverse?k.minZoom=Math.min(k.maxZoom,k.minZoom):k.maxZoom=Math.max(k.minZoom,k.maxZoom),typeof k.subdomains=="string"&&(k.subdomains=k.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(b,k){return this._url===b&&k===void 0&&(k=!0),this._url=b,k||this.redraw(),this},createTile:function(b,k){var V=document.createElement("img");return In(V,"load",o(this._tileOnLoad,this,k,V)),In(V,"error",o(this._tileOnError,this,k,V)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(V.referrerPolicy=this.options.referrerPolicy),V.alt="",V.src=this.getTileUrl(b),V},getTileUrl:function(b){var k={r:Mr.retina?"@2x":"",s:this._getSubdomain(b),x:b.x,y:b.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var V=this._globalTileRange.max.y-b.y;this.options.tms&&(k.y=V),k["-y"]=V}return S(this._url,i(k,this.options))},_tileOnLoad:function(b,k){Mr.ielt9?setTimeout(o(b,this,null,k),0):b(null,k)},_tileOnError:function(b,k,V){var ne=this.options.errorTileUrl;ne&&k.getAttribute("src")!==ne&&(k.src=ne),b(V,k)},_onTileRemove:function(b){b.tile.onload=null},_getZoomForUrl:function(){var b=this._tileZoom,k=this.options.maxZoom,V=this.options.zoomReverse,ne=this.options.zoomOffset;return V&&(b=k-b),b+ne},_getSubdomain:function(b){var k=Math.abs(b.x+b.y)%this.options.subdomains.length;return this.options.subdomains[k]},_abortLoading:function(){var b,k;for(b in this._tiles)if(this._tiles[b].coords.z!==this._tileZoom&&(k=this._tiles[b].el,k.onload=h,k.onerror=h,!k.complete)){k.src=T;var V=this._tiles[b].coords;xs(k),delete this._tiles[b],this.fire("tileabort",{tile:k,coords:V})}},_removeTile:function(b){var k=this._tiles[b];if(k)return k.el.setAttribute("src",T),ed.prototype._removeTile.call(this,b)},_tileReady:function(b,k,V){if(!(!this._map||V&&V.getAttribute("src")===T))return ed.prototype._tileReady.call(this,b,k,V)}});function T5(b,k){return new $d(b,k)}var P5=$d.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(b,k){this._url=b;var V=i({},this.defaultWmsParams);for(var ne in k)ne in this.options||(V[ne]=k[ne]);k=g(this,k);var pe=k.detectRetina&&Mr.retina?2:1,Ie=this.getTileSize();V.width=Ie.x*pe,V.height=Ie.y*pe,this.wmsParams=V},onAdd:function(b){this._crs=this.options.crs||b.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var k=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[k]=this._crs.code,$d.prototype.onAdd.call(this,b)},getTileUrl:function(b){var k=this._tileCoordsToNwSe(b),V=this._crs,ne=H(V.project(k[0]),V.project(k[1])),pe=ne.min,Ie=ne.max,ot=(this._wmsVersion>=1.3&&this._crs===Fd?[pe.y,pe.x,Ie.y,Ie.x]:[pe.x,pe.y,Ie.x,Ie.y]).join(","),St=$d.prototype.getTileUrl.call(this,b);return St+y(this.wmsParams,St,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ot},setParams:function(b,k){return i(this.wmsParams,b),k||this.redraw(),this}});function ZI(b,k){return new P5(b,k)}$d.WMS=P5,T5.wms=ZI;var zf=hi.extend({options:{padding:.1},initialize:function(b){g(this,b),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Kr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var b={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(b.zoomanim=this._onAnimZoom),b},_onAnimZoom:function(b){this._updateTransform(b.center,b.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(b,k){var V=this._map.getZoomScale(k,this._zoom),ne=this._map.getSize().multiplyBy(.5+this.options.padding),pe=this._map.project(this._center,k),Ie=ne.multiplyBy(-V).add(pe).subtract(this._map._getNewPixelOrigin(b,k));Mr.any3d?We(this._container,Ie,V):Or(this._container,Ie)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var b in this._layers)this._layers[b]._reset()},_onZoomEnd:function(){for(var b in this._layers)this._layers[b]._project()},_updatePaths:function(){for(var b in this._layers)this._layers[b]._update()},_update:function(){var b=this.options.padding,k=this._map.getSize(),V=this._map.containerPointToLayerPoint(k.multiplyBy(-b)).round();this._bounds=new xe(V,V.add(k.multiplyBy(1+b*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),k5=zf.extend({options:{tolerance:0},getEvents:function(){var b=zf.prototype.getEvents.call(this);return b.viewprereset=this._onViewPreReset,b},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zf.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var b=this._container=document.createElement("canvas");In(b,"mousemove",this._onMouseMove,this),In(b,"click dblclick mousedown mouseup contextmenu",this._onClick,this),In(b,"mouseout",this._handleMouseOut,this),b._leaflet_disable_events=!0,this._ctx=b.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,xs(this._container),zr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var b;this._redrawBounds=null;for(var k in this._layers)b=this._layers[k],b._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zf.prototype._update.call(this);var b=this._bounds,k=this._container,V=b.getSize(),ne=Mr.retina?2:1;Or(k,b.min),k.width=ne*V.x,k.height=ne*V.y,k.style.width=V.x+"px",k.style.height=V.y+"px",Mr.retina&&this._ctx.scale(2,2),this._ctx.translate(-b.min.x,-b.min.y),this.fire("update")}},_reset:function(){zf.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(b){this._updateDashArray(b),this._layers[c(b)]=b;var k=b._order={layer:b,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=k),this._drawLast=k,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(b){this._requestRedraw(b)},_removePath:function(b){var k=b._order,V=k.next,ne=k.prev;V?V.prev=ne:this._drawLast=ne,ne?ne.next=V:this._drawFirst=V,delete b._order,delete this._layers[c(b)],this._requestRedraw(b)},_updatePath:function(b){this._extendRedrawBounds(b),b._project(),b._update(),this._requestRedraw(b)},_updateStyle:function(b){this._updateDashArray(b),this._requestRedraw(b)},_updateDashArray:function(b){if(typeof b.options.dashArray=="string"){var k=b.options.dashArray.split(/[, ]+/),V=[],ne,pe;for(pe=0;pe<k.length;pe++){if(ne=Number(k[pe]),isNaN(ne))return;V.push(ne)}b.options._dashArray=V}else b.options._dashArray=b.options.dashArray},_requestRedraw:function(b){this._map&&(this._extendRedrawBounds(b),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(b){if(b._pxBounds){var k=(b.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xe,this._redrawBounds.extend(b._pxBounds.min.subtract([k,k])),this._redrawBounds.extend(b._pxBounds.max.add([k,k]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var b=this._redrawBounds;if(b){var k=b.getSize();this._ctx.clearRect(b.min.x,b.min.y,k.x,k.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var b,k=this._redrawBounds;if(this._ctx.save(),k){var V=k.getSize();this._ctx.beginPath(),this._ctx.rect(k.min.x,k.min.y,V.x,V.y),this._ctx.clip()}this._drawing=!0;for(var ne=this._drawFirst;ne;ne=ne.next)b=ne.layer,(!k||b._pxBounds&&b._pxBounds.intersects(k))&&b._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(b,k){if(this._drawing){var V,ne,pe,Ie,ot=b._parts,St=ot.length,Ft=this._ctx;if(St){for(Ft.beginPath(),V=0;V<St;V++){for(ne=0,pe=ot[V].length;ne<pe;ne++)Ie=ot[V][ne],Ft[ne?"lineTo":"moveTo"](Ie.x,Ie.y);k&&Ft.closePath()}this._fillStroke(Ft,b)}}},_updateCircle:function(b){if(!(!this._drawing||b._empty())){var k=b._point,V=this._ctx,ne=Math.max(Math.round(b._radius),1),pe=(Math.max(Math.round(b._radiusY),1)||ne)/ne;pe!==1&&(V.save(),V.scale(1,pe)),V.beginPath(),V.arc(k.x,k.y/pe,ne,0,Math.PI*2,!1),pe!==1&&V.restore(),this._fillStroke(V,b)}},_fillStroke:function(b,k){var V=k.options;V.fill&&(b.globalAlpha=V.fillOpacity,b.fillStyle=V.fillColor||V.color,b.fill(V.fillRule||"evenodd")),V.stroke&&V.weight!==0&&(b.setLineDash&&b.setLineDash(k.options&&k.options._dashArray||[]),b.globalAlpha=V.opacity,b.lineWidth=V.weight,b.strokeStyle=V.color,b.lineCap=V.lineCap,b.lineJoin=V.lineJoin,b.stroke())},_onClick:function(b){for(var k=this._map.mouseEventToLayerPoint(b),V,ne,pe=this._drawFirst;pe;pe=pe.next)V=pe.layer,V.options.interactive&&V._containsPoint(k)&&(!(b.type==="click"||b.type==="preclick")||!this._map._draggableMoved(V))&&(ne=V);this._fireEvent(ne?[ne]:!1,b)},_onMouseMove:function(b){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var k=this._map.mouseEventToLayerPoint(b);this._handleMouseHover(b,k)}},_handleMouseOut:function(b){var k=this._hoveredLayer;k&&(yi(this._container,"leaflet-interactive"),this._fireEvent([k],b,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(b,k){if(!this._mouseHoverThrottled){for(var V,ne,pe=this._drawFirst;pe;pe=pe.next)V=pe.layer,V.options.interactive&&V._containsPoint(k)&&(ne=V);ne!==this._hoveredLayer&&(this._handleMouseOut(b),ne&&(Kr(this._container,"leaflet-interactive"),this._fireEvent([ne],b,"mouseover"),this._hoveredLayer=ne)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,b),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(b,k,V){this._map._fireDOMEvent(k,V||k.type,b)},_bringToFront:function(b){var k=b._order;if(k){var V=k.next,ne=k.prev;if(V)V.prev=ne;else return;ne?ne.next=V:V&&(this._drawFirst=V),k.prev=this._drawLast,this._drawLast.next=k,k.next=null,this._drawLast=k,this._requestRedraw(b)}},_bringToBack:function(b){var k=b._order;if(k){var V=k.next,ne=k.prev;if(ne)ne.next=V;else return;V?V.prev=ne:ne&&(this._drawLast=ne),k.prev=null,k.next=this._drawFirst,this._drawFirst.prev=k,this._drawFirst=k,this._requestRedraw(b)}}});function O5(b){return Mr.canvas?new k5(b):null}var Kv=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(b){return document.createElement("<lvml:"+b+' class="lvml">')}}catch{}return function(b){return document.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),QI={_initContainer:function(){this._container=On("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zf.prototype._update.call(this),this.fire("update"))},_initPath:function(b){var k=b._container=Kv("shape");Kr(k,"leaflet-vml-shape "+(this.options.className||"")),k.coordsize="1 1",b._path=Kv("path"),k.appendChild(b._path),this._updateStyle(b),this._layers[c(b)]=b},_addPath:function(b){var k=b._container;this._container.appendChild(k),b.options.interactive&&b.addInteractiveTarget(k)},_removePath:function(b){var k=b._container;xs(k),b.removeInteractiveTarget(k),delete this._layers[c(b)]},_updateStyle:function(b){var k=b._stroke,V=b._fill,ne=b.options,pe=b._container;pe.stroked=!!ne.stroke,pe.filled=!!ne.fill,ne.stroke?(k||(k=b._stroke=Kv("stroke")),pe.appendChild(k),k.weight=ne.weight+"px",k.color=ne.color,k.opacity=ne.opacity,ne.dashArray?k.dashStyle=E(ne.dashArray)?ne.dashArray.join(" "):ne.dashArray.replace(/( *, *)/g," "):k.dashStyle="",k.endcap=ne.lineCap.replace("butt","flat"),k.joinstyle=ne.lineJoin):k&&(pe.removeChild(k),b._stroke=null),ne.fill?(V||(V=b._fill=Kv("fill")),pe.appendChild(V),V.color=ne.fillColor||ne.color,V.opacity=ne.fillOpacity):V&&(pe.removeChild(V),b._fill=null)},_updateCircle:function(b){var k=b._point.round(),V=Math.round(b._radius),ne=Math.round(b._radiusY||V);this._setPath(b,b._empty()?"M0 0":"AL "+k.x+","+k.y+" "+V+","+ne+" 0,"+65535*360)},_setPath:function(b,k){b._path.v=k},_bringToFront:function(b){vs(b._container)},_bringToBack:function(b){ll(b._container)}},Xv=Mr.vml?Kv:Te,v0=zf.extend({_initContainer:function(){this._container=Xv("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xv("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xs(this._container),zr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zf.prototype._update.call(this);var b=this._bounds,k=b.getSize(),V=this._container;(!this._svgSize||!this._svgSize.equals(k))&&(this._svgSize=k,V.setAttribute("width",k.x),V.setAttribute("height",k.y)),Or(V,b.min),V.setAttribute("viewBox",[b.min.x,b.min.y,k.x,k.y].join(" ")),this.fire("update")}},_initPath:function(b){var k=b._path=Xv("path");b.options.className&&Kr(k,b.options.className),b.options.interactive&&Kr(k,"leaflet-interactive"),this._updateStyle(b),this._layers[c(b)]=b},_addPath:function(b){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(b._path),b.addInteractiveTarget(b._path)},_removePath:function(b){xs(b._path),b.removeInteractiveTarget(b._path),delete this._layers[c(b)]},_updatePath:function(b){b._project(),b._update()},_updateStyle:function(b){var k=b._path,V=b.options;k&&(V.stroke?(k.setAttribute("stroke",V.color),k.setAttribute("stroke-opacity",V.opacity),k.setAttribute("stroke-width",V.weight),k.setAttribute("stroke-linecap",V.lineCap),k.setAttribute("stroke-linejoin",V.lineJoin),V.dashArray?k.setAttribute("stroke-dasharray",V.dashArray):k.removeAttribute("stroke-dasharray"),V.dashOffset?k.setAttribute("stroke-dashoffset",V.dashOffset):k.removeAttribute("stroke-dashoffset")):k.setAttribute("stroke","none"),V.fill?(k.setAttribute("fill",V.fillColor||V.color),k.setAttribute("fill-opacity",V.fillOpacity),k.setAttribute("fill-rule",V.fillRule||"evenodd")):k.setAttribute("fill","none"))},_updatePoly:function(b,k){this._setPath(b,ze(b._parts,k))},_updateCircle:function(b){var k=b._point,V=Math.max(Math.round(b._radius),1),ne=Math.max(Math.round(b._radiusY),1)||V,pe="a"+V+","+ne+" 0 1,0 ",Ie=b._empty()?"M0 0":"M"+(k.x-V)+","+k.y+pe+V*2+",0 "+pe+-V*2+",0 ";this._setPath(b,Ie)},_setPath:function(b,k){b._path.setAttribute("d",k)},_bringToFront:function(b){vs(b._path)},_bringToBack:function(b){ll(b._path)}});Mr.vml&&v0.include(QI);function pu(b){return Mr.svg||Mr.vml?new v0(b):null}ai.include({getRenderer:function(b){var k=b.options.renderer||this._getPaneRenderer(b.options.pane)||this.options.renderer||this._renderer;return k||(k=this._renderer=this._createRenderer()),this.hasLayer(k)||this.addLayer(k),k},_getPaneRenderer:function(b){if(b==="overlayPane"||b===void 0)return!1;var k=this._paneRenderers[b];return k===void 0&&(k=this._createRenderer({pane:b}),this._paneRenderers[b]=k),k},_createRenderer:function(b){return this.options.preferCanvas&&O5(b)||pu(b)}});var td=_.extend({initialize:function(b,k){_.prototype.initialize.call(this,this._boundsToLatLngs(b),k)},setBounds:function(b){return this.setLatLngs(this._boundsToLatLngs(b))},_boundsToLatLngs:function(b){return b=ie(b),[b.getSouthWest(),b.getNorthWest(),b.getNorthEast(),b.getSouthEast()]}});function kN(b,k){return new td(b,k)}v0.create=Xv,v0.pointsToPath=ze,P.geometryToLayer=R,P.coordsToLatLng=G,P.coordsToLatLngs=te,P.latLngToCoords=de,P.latLngsToCoords=we,P.getFeature=Pe,P.asFeature=Ze,ai.mergeOptions({boxZoom:!0});var tw=Ye.extend({initialize:function(b){this._map=b,this._container=b._container,this._pane=b._panes.overlayPane,this._resetStateTimeout=0,b.on("unload",this._destroy,this)},addHooks:function(){In(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xs(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(b){if(!b.shiftKey||b.which!==1&&b.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ro(),gn(),this._startPoint=this._map.mouseEventToContainerPoint(b),In(document,{contextmenu:cl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(b){this._moved||(this._moved=!0,this._box=On("div","leaflet-zoom-box",this._container),Kr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(b);var k=new xe(this._point,this._startPoint),V=k.getSize();Or(this._box,k.min),this._box.style.width=V.x+"px",this._box.style.height=V.y+"px"},_finish:function(){this._moved&&(xs(this._box),yi(this._container,"leaflet-crosshair")),cu(),bs(),zr(document,{contextmenu:cl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(b){if(!(b.which!==1&&b.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var k=new J(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(k).fire("boxzoomend",{boxZoomBounds:k})}},_onKeyDown:function(b){b.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ai.addInitHook("addHandler","boxZoom",tw),ai.mergeOptions({doubleClickZoom:!0});var I5=Ye.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(b){var k=this._map,V=k.getZoom(),ne=k.options.zoomDelta,pe=b.originalEvent.shiftKey?V-ne:V+ne;k.options.doubleClickZoom==="center"?k.setZoom(pe):k.setZoomAround(b.containerPoint,pe)}});ai.addInitHook("addHandler","doubleClickZoom",I5),ai.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var rw=Ye.extend({addHooks:function(){if(!this._draggable){var b=this._map;this._draggable=new Gt(b._mapPane,b._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),b.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),b.on("zoomend",this._onZoomEnd,this),b.whenReady(this._onZoomEnd,this))}Kr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yi(this._map._container,"leaflet-grab"),yi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var b=this._map;if(b._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var k=ie(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(k.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(k.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;b.fire("movestart").fire("dragstart"),b.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(b){if(this._map.options.inertia){var k=this._lastTime=+new Date,V=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(V),this._times.push(k),this._prunePositions(k)}this._map.fire("move",b).fire("drag",b)},_prunePositions:function(b){for(;this._positions.length>1&&b-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var b=this._map.getSize().divideBy(2),k=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=k.subtract(b).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(b,k){return b-(b-k)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var b=this._draggable._newPos.subtract(this._draggable._startPos),k=this._offsetLimit;b.x<k.min.x&&(b.x=this._viscousLimit(b.x,k.min.x)),b.y<k.min.y&&(b.y=this._viscousLimit(b.y,k.min.y)),b.x>k.max.x&&(b.x=this._viscousLimit(b.x,k.max.x)),b.y>k.max.y&&(b.y=this._viscousLimit(b.y,k.max.y)),this._draggable._newPos=this._draggable._startPos.add(b)}},_onPreDragWrap:function(){var b=this._worldWidth,k=Math.round(b/2),V=this._initialWorldOffset,ne=this._draggable._newPos.x,pe=(ne-k+V)%b+k-V,Ie=(ne+k+V)%b-k-V,ot=Math.abs(pe+V)<Math.abs(Ie+V)?pe:Ie;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ot},_onDragEnd:function(b){var k=this._map,V=k.options,ne=!V.inertia||b.noInertia||this._times.length<2;if(k.fire("dragend",b),ne)k.fire("moveend");else{this._prunePositions(+new Date);var pe=this._lastPos.subtract(this._positions[0]),Ie=(this._lastTime-this._times[0])/1e3,ot=V.easeLinearity,St=pe.multiplyBy(ot/Ie),Ft=St.distanceTo([0,0]),pr=Math.min(V.inertiaMaxSpeed,Ft),Hr=St.multiplyBy(pr/Ft),Cn=pr/(V.inertiaDeceleration*ot),Ri=Hr.multiplyBy(-Cn/2).round();!Ri.x&&!Ri.y?k.fire("moveend"):(Ri=k._limitOffset(Ri,k.options.maxBounds),F(function(){k.panBy(Ri,{duration:Cn,easeLinearity:ot,noMoveStart:!0,animate:!0})}))}}});ai.addInitHook("addHandler","dragging",rw),ai.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nw=Ye.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(b){this._map=b,this._setPanDelta(b.options.keyboardPanDelta),this._setZoomDelta(b.options.zoomDelta)},addHooks:function(){var b=this._map._container;b.tabIndex<=0&&(b.tabIndex="0"),In(b,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var b=document.body,k=document.documentElement,V=b.scrollTop||k.scrollTop,ne=b.scrollLeft||k.scrollLeft;this._map._container.focus(),window.scrollTo(ne,V)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(b){var k=this._panKeys={},V=this.keyCodes,ne,pe;for(ne=0,pe=V.left.length;ne<pe;ne++)k[V.left[ne]]=[-1*b,0];for(ne=0,pe=V.right.length;ne<pe;ne++)k[V.right[ne]]=[b,0];for(ne=0,pe=V.down.length;ne<pe;ne++)k[V.down[ne]]=[0,b];for(ne=0,pe=V.up.length;ne<pe;ne++)k[V.up[ne]]=[0,-1*b]},_setZoomDelta:function(b){var k=this._zoomKeys={},V=this.keyCodes,ne,pe;for(ne=0,pe=V.zoomIn.length;ne<pe;ne++)k[V.zoomIn[ne]]=b;for(ne=0,pe=V.zoomOut.length;ne<pe;ne++)k[V.zoomOut[ne]]=-b},_addHooks:function(){In(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(b){if(!(b.altKey||b.ctrlKey||b.metaKey)){var k=b.keyCode,V=this._map,ne;if(k in this._panKeys){if(!V._panAnim||!V._panAnim._inProgress)if(ne=this._panKeys[k],b.shiftKey&&(ne=oe(ne).multiplyBy(3)),V.options.maxBounds&&(ne=V._limitOffset(oe(ne),V.options.maxBounds)),V.options.worldCopyJump){var pe=V.wrapLatLng(V.unproject(V.project(V.getCenter()).add(ne)));V.panTo(pe)}else V.panBy(ne)}else if(k in this._zoomKeys)V.setZoom(V.getZoom()+(b.shiftKey?3:1)*this._zoomKeys[k]);else if(k===27&&V._popup&&V._popup.options.closeOnEscapeKey)V.closePopup();else return;cl(b)}}});ai.addInitHook("addHandler","keyboard",nw),ai.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ON=Ye.extend({addHooks:function(){In(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(b){var k=Ld(b),V=this._map.options.wheelDebounceTime;this._delta+=k,this._lastMousePos=this._map.mouseEventToContainerPoint(b),this._startTime||(this._startTime=+new Date);var ne=Math.max(V-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),ne),cl(b)},_performZoom:function(){var b=this._map,k=b.getZoom(),V=this._map.options.zoomSnap||0;b._stop();var ne=this._delta/(this._map.options.wheelPxPerZoomLevel*4),pe=4*Math.log(2/(1+Math.exp(-Math.abs(ne))))/Math.LN2,Ie=V?Math.ceil(pe/V)*V:pe,ot=b._limitZoom(k+(this._delta>0?Ie:-Ie))-k;this._delta=0,this._startTime=null,ot&&(b.options.scrollWheelZoom==="center"?b.setZoom(k+ot):b.setZoomAround(this._lastMousePos,k+ot))}});ai.addInitHook("addHandler","scrollWheelZoom",ON);var JI=600;ai.mergeOptions({tapHold:Mr.touchNative&&Mr.safari&&Mr.mobile,tapTolerance:15});var IN=Ye.extend({addHooks:function(){In(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(b){if(clearTimeout(this._holdTimeout),b.touches.length===1){var k=b.touches[0];this._startPos=this._newPos=new X(k.clientX,k.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(In(document,"touchend",ra),In(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",k))},this),JI),In(document,"touchend touchcancel contextmenu",this._cancel,this),In(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function b(){zr(document,"touchend",ra),zr(document,"touchend touchcancel",b)},_cancel:function(){clearTimeout(this._holdTimeout),zr(document,"touchend touchcancel contextmenu",this._cancel,this),zr(document,"touchmove",this._onMove,this)},_onMove:function(b){var k=b.touches[0];this._newPos=new X(k.clientX,k.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(b,k){var V=new MouseEvent(b,{bubbles:!0,cancelable:!0,view:window,screenX:k.screenX,screenY:k.screenY,clientX:k.clientX,clientY:k.clientY});V._simulated=!0,k.target.dispatchEvent(V)}});ai.addInitHook("addHandler","tapHold",IN),ai.mergeOptions({touchZoom:Mr.touch,bounceAtZoomLimits:!0});var RN=Ye.extend({addHooks:function(){Kr(this._map._container,"leaflet-touch-zoom"),In(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yi(this._map._container,"leaflet-touch-zoom"),zr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(b){var k=this._map;if(!(!b.touches||b.touches.length!==2||k._animatingZoom||this._zooming)){var V=k.mouseEventToContainerPoint(b.touches[0]),ne=k.mouseEventToContainerPoint(b.touches[1]);this._centerPoint=k.getSize()._divideBy(2),this._startLatLng=k.containerPointToLatLng(this._centerPoint),k.options.touchZoom!=="center"&&(this._pinchStartLatLng=k.containerPointToLatLng(V.add(ne)._divideBy(2))),this._startDist=V.distanceTo(ne),this._startZoom=k.getZoom(),this._moved=!1,this._zooming=!0,k._stop(),In(document,"touchmove",this._onTouchMove,this),In(document,"touchend touchcancel",this._onTouchEnd,this),ra(b)}},_onTouchMove:function(b){if(!(!b.touches||b.touches.length!==2||!this._zooming)){var k=this._map,V=k.mouseEventToContainerPoint(b.touches[0]),ne=k.mouseEventToContainerPoint(b.touches[1]),pe=V.distanceTo(ne)/this._startDist;if(this._zoom=k.getScaleZoom(pe,this._startZoom),!k.options.bounceAtZoomLimits&&(this._zoom<k.getMinZoom()&&pe<1||this._zoom>k.getMaxZoom()&&pe>1)&&(this._zoom=k._limitZoom(this._zoom)),k.options.touchZoom==="center"){if(this._center=this._startLatLng,pe===1)return}else{var Ie=V._add(ne)._divideBy(2)._subtract(this._centerPoint);if(pe===1&&Ie.x===0&&Ie.y===0)return;this._center=k.unproject(k.project(this._pinchStartLatLng,this._zoom).subtract(Ie),this._zoom)}this._moved||(k._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var ot=o(k._move,k,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(ot,this,!0),ra(b)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),zr(document,"touchmove",this._onTouchMove,this),zr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ai.addInitHook("addHandler","touchZoom",RN),ai.BoxZoom=tw,ai.DoubleClickZoom=I5,ai.Drag=rw,ai.Keyboard=nw,ai.ScrollWheelZoom=ON,ai.TapHold=IN,ai.TouchZoom=RN,r.Bounds=xe,r.Browser=Mr,r.CRS=he,r.Canvas=k5,r.Circle=Ec,r.CircleMarker=Tl,r.Class=re,r.Control=Wo,r.DivIcon=Pl,r.DivOverlay=_s,r.DomEvent=Fa,r.DomUtil=sn,r.Draggable=Gt,r.Evented=K,r.FeatureGroup=Nc,r.GeoJSON=P,r.GridLayer=ed,r.Handler=Ye,r.Icon=mu,r.ImageOverlay=Pt,r.LatLng=ce,r.LatLngBounds=J,r.Layer=hi,r.LayerGroup=Go,r.LineUtil=Uf,r.Map=ai,r.Marker=ao,r.Mixin=ct,r.Path=ha,r.Point=X,r.PolyUtil=Rn,r.Polygon=_,r.Polyline=p,r.Popup=oo,r.PosAnimation=Wm,r.Projection=Ch,r.Rectangle=td,r.Renderer=zf,r.SVG=v0,r.SVGOverlay=Nn,r.TileLayer=$d,r.Tooltip=Gi,r.Transformation=ye,r.Util=Q,r.VideoOverlay=ar,r.bind=o,r.bounds=H,r.canvas=O5,r.circle=Ne,r.circleMarker=ii,r.control=$f,r.divIcon=Zm,r.extend=i,r.featureGroup=Na,r.geoJSON=dt,r.geoJson=yt,r.gridLayer=PN,r.icon=Ym,r.imageOverlay=tr,r.latLng=me,r.latLngBounds=ie,r.layerGroup=Ko,r.map=x0,r.marker=Sc,r.point=oe,r.polygon=A,r.polyline=v,r.popup=Xo,r.rectangle=kN,r.setOptions=g,r.stamp=c,r.svg=pu,r.svgOverlay=kn,r.tileLayer=T5,r.tooltip=_o,r.transformation=Le,r.version=n,r.videoOverlay=sr;var DN=window.L;r.noConflict=function(){return window.L=DN,this},window.L=r})})(NK,NK.exports);var z7t=NK.exports;const w1=Vi(z7t),V7t=t=>{const e=t?"#95C11F":"#FBBB1A",r=t?32:24;return w1.divIcon({className:"custom-marker",html:`
      <div style="
        width: ${r}px;
        height: ${r}px;
        background: ${e};
        border: 3px solid white;
        border-radius: 50%;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        ${t?"transform: scale(1.1);":""}
      ">
        <svg width="${r*.5}" height="${r*.5}" viewBox="0 0 24 24" fill="white">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
      </div>
    `,iconSize:[r,r],iconAnchor:[r/2,r],popupAnchor:[0,-r]})},q7t=w1.divIcon({className:"user-location-marker",html:`
    <div style="
      width: 20px;
      height: 20px;
      background: #3B82F6;
      border: 4px solid white;
      border-radius: 50%;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3), 0 2px 8px rgba(0,0,0,0.3);
      animation: pulse 2s infinite;
    "></div>
    <style>
      @keyframes pulse {
        0%, 100% { box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3), 0 2px 8px rgba(0,0,0,0.3); }
        50% { box-shadow: 0 0 0 8px rgba(59, 130, 246, 0.1), 0 2px 8px rgba(0,0,0,0.3); }
      }
    </style>
  `,iconSize:[20,20],iconAnchor:[10,10]}),H7t=t=>t==null?"":t<1?`${Math.round(t*1e3)} m`:`${t.toFixed(1)} km`;function W7t({cooperativas:t,selectedId:e,onSelect:r,userLocation:n,className:i}){const s=C.useRef(null),o=C.useRef(null),l=C.useRef(new Map);C.useEffect(()=>{if(!s.current||o.current)return;const h=n?[n.latitude,n.longitude]:[-15.7801,-47.9292],f=w1.map(s.current,{center:h,zoom:n?12:4,zoomControl:!1});return w1.control.zoom({position:"bottomright"}).addTo(f),w1.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap",maxZoom:18}).addTo(f),o.current=f,()=>{f.remove(),o.current=null}},[]),C.useEffect(()=>{const h=o.current;if(!h||!n)return;const f=w1.marker([n.latitude,n.longitude],{icon:q7t,zIndexOffset:1e3}).addTo(h);return f.bindPopup("<strong>Voc est aqui</strong>"),()=>{f.remove()}},[n]),C.useEffect(()=>{const h=o.current;if(!h)return;l.current.forEach(m=>m.remove()),l.current.clear();const f=t.filter(m=>m.latitude&&m.longitude);if(f.forEach(m=>{const x=m.id===e,g=w1.marker([m.latitude,m.longitude],{icon:V7t(x),zIndexOffset:x?500:0}).addTo(h),y=`
        <div style="min-width: 150px;">
          <strong style="color: #1a1a1a;">${m.nome_fantasia}</strong>
          <br/>
          <span style="color: #666; font-size: 12px;">
            ${m.cidade||""}${m.cidade&&m.uf?", ":""}${m.uf||""}
          </span>
          ${m.distance!==null&&m.distance!==void 0?`<br/><span style="color: #95C11F; font-weight: 600; font-size: 13px;">${H7t(m.distance)}</span>`:""}
        </div>
      `;g.bindPopup(y),g.on("click",()=>{r(m.id)}),l.current.set(m.id,g)}),f.length>0){const m=w1.latLngBounds(f.map(x=>[x.latitude,x.longitude]));n&&m.extend([n.latitude,n.longitude]),h.fitBounds(m,{padding:[50,50],maxZoom:13})}},[t,e,r]),C.useEffect(()=>{const h=o.current;if(!h||!e)return;const f=l.current.get(e);f&&(h.setView(f.getLatLng(),14,{animate:!0}),f.openPopup())},[e]);const c=t.some(h=>h.latitude&&h.longitude),u=t.length,d=t.filter(h=>h.latitude&&h.longitude).length;return a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:Ut("relative rounded-2xl overflow-hidden border shadow-sm z-0",i),style:{isolation:"isolate"},children:[a.jsx("div",{ref:s,className:"w-full h-full min-h-[250px]",style:{zIndex:0}}),!c&&a.jsxs("div",{className:"absolute inset-0 bg-muted/95 backdrop-blur-sm flex flex-col items-center justify-center p-6",children:[a.jsx(Rm,{className:"h-12 w-12 text-muted-foreground mb-3"}),a.jsx("p",{className:"font-medium text-foreground mb-1",children:"Localizao no disponvel"}),a.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-xs",children:u===0?"Nenhuma cooperativa cadastrada ainda":`${u} ${u===1?"cooperativa encontrada":"cooperativas encontradas"}, mas sem dados de localizao`}),u>0&&a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Use o seletor abaixo para escolher a cooperativa"})]}),c&&a.jsxs("div",{className:"absolute bottom-12 left-3 bg-background/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-md text-xs space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-primary border-2 border-white shadow"}),a.jsx("span",{children:"Selecionada"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-accent border-2 border-white shadow"}),a.jsx("span",{children:"Disponvel"})]}),n&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500 border-2 border-white shadow"}),a.jsx("span",{children:"Voc"})]}),a.jsx("div",{className:"pt-1 mt-1 border-t border-border/50",children:a.jsxs("span",{className:"text-muted-foreground",children:[d," ",d===1?"ponto":"pontos"," no mapa"]})})]}),n&&a.jsx("button",{onClick:()=>{var h;(h=o.current)==null||h.setView([n.latitude,n.longitude],14,{animate:!0})},className:"absolute top-3 right-3 bg-background/90 backdrop-blur-sm p-2 rounded-lg shadow-md hover:bg-background transition-colors",title:"Centralizar em voc",children:a.jsx(CRe,{className:"h-4 w-4 text-blue-500"})})]})}function G7t(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const b3e=be.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),C5=()=>{const t=be.useContext(b3e);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};G7t(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const K7t=24,X7t=typeof window<"u"?C.useLayoutEffect:C.useEffect;function ffe(...t){return(...e)=>{for(let r of t)typeof r=="function"&&r(...e)}}function Y7t(){return gee(/^Mac/)}function Z7t(){return gee(/^iPhone/)}function mfe(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Q7t(){return gee(/^iPad/)||Y7t()&&navigator.maxTouchPoints>1}function w3e(){return Z7t()||Q7t()}function gee(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const cz=typeof document<"u"&&window.visualViewport;function pfe(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function _3e(t){for(pfe(t)&&(t=t.parentElement);t&&!pfe(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const J7t=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let VD=0,uz;function eBt(t={}){let{isDisabled:e}=t;X7t(()=>{if(!e)return VD++,VD===1&&w3e()&&(uz=tBt()),()=>{VD--,VD===0&&(uz==null||uz())}},[e])}function tBt(){let t,e=0,r=h=>{t=_3e(h.target),!(t===document.documentElement&&t===document.body)&&(e=h.changedTouches[0].pageY)},n=h=>{if(!t||t===document.documentElement||t===document.body){h.preventDefault();return}let f=h.changedTouches[0].pageY,m=t.scrollTop,x=t.scrollHeight-t.clientHeight;x!==0&&((m<=0&&f>e||m>=x&&f<e)&&h.preventDefault(),e=f)},i=h=>{let f=h.target;SK(f)&&f!==document.activeElement&&(h.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},s=h=>{let f=h.target;SK(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",cz&&(cz.height<window.innerHeight?requestAnimationFrame(()=>{gfe(f)}):cz.addEventListener("resize",()=>gfe(f),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=ffe(rBt(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=ffe(_T(document,"touchstart",r,{passive:!1,capture:!0}),_T(document,"touchmove",n,{passive:!1,capture:!0}),_T(document,"touchend",i,{passive:!1,capture:!0}),_T(document,"focus",s,!0),_T(window,"scroll",o));return()=>{u(),d(),window.scrollTo(l,c)}}function rBt(t,e,r){let n=t.style[e];return t.style[e]=r,()=>{t.style[e]=n}}function _T(t,e,r,n){return t.addEventListener(e,r,n),()=>{t.removeEventListener(e,r,n)}}function gfe(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let r=_3e(t);if(r!==document.documentElement&&r!==document.body&&r!==t){let n=r.getBoundingClientRect().top,i=t.getBoundingClientRect().top,s=t.getBoundingClientRect().bottom;const o=r.getBoundingClientRect().bottom+K7t;s>o&&(r.scrollTop+=i-n)}t=r.parentElement}}function SK(t){return t instanceof HTMLInputElement&&!J7t.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function nBt(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function iBt(...t){return e=>t.forEach(r=>nBt(r,e))}function N3e(...t){return C.useCallback(iBt(...t),t)}const S3e=new WeakMap;function Ul(t,e,r=!1){if(!t||!(t instanceof HTMLElement))return;let n={};Object.entries(e).forEach(([i,s])=>{if(i.startsWith("--")){t.style.setProperty(i,s);return}n[i]=t.style[i],t.style[i]=s}),!r&&S3e.set(t,n)}function sBt(t,e){if(!t||!(t instanceof HTMLElement))return;let r=S3e.get(t);r&&(t.style[e]=r[e])}const Vl=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function qD(t,e){if(!t)return null;const r=window.getComputedStyle(t),n=r.transform||r.webkitTransform||r.mozTransform;let i=n.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Vl(e)?13:12]):(i=n.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Vl(e)?5:4]):null)}function aBt(t){return 8*(Math.log(t+1)-2)}function dz(t,e){if(!t)return()=>{};const r=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=r}}function oBt(...t){return(...e)=>{for(const r of t)typeof r=="function"&&r(...e)}}const ho={DURATION:.5,EASE:[.32,.72,0,1]},E3e=.4,lBt=.25,cBt=100,j3e=8,fw=16,EK=26,hz="vaul-dragging";function A3e(t){const e=be.useRef(t);return be.useEffect(()=>{e.current=t}),be.useMemo(()=>(...r)=>e.current==null?void 0:e.current.call(e,...r),[])}function uBt({defaultProp:t,onChange:e}){const r=be.useState(t),[n]=r,i=be.useRef(n),s=A3e(e);return be.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}function C3e({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=uBt({defaultProp:e,onChange:r}),s=t!==void 0,o=s?t:n,l=A3e(r),c=be.useCallback(u=>{if(s){const h=typeof u=="function"?u(t):u;h!==t&&l(h)}else i(u)},[s,t,i,l]);return[o,c]}function dBt({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:r,drawerRef:n,overlayRef:i,fadeFromIndex:s,onSnapPointChange:o,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,h]=C3e({prop:t,defaultProp:r==null?void 0:r[0],onChange:e}),[f,m]=be.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);be.useEffect(()=>{function I(){m({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);const x=be.useMemo(()=>d===(r==null?void 0:r[r.length-1])||null,[r,d]),g=be.useMemo(()=>r==null?void 0:r.findIndex(I=>I===d),[r,d]),y=r&&r.length>0&&(s||s===0)&&!Number.isNaN(s)&&r[s]===d||!r,w=be.useMemo(()=>{const I=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var M;return(M=r==null?void 0:r.map(D=>{const z=typeof D=="string";let F=0;if(z&&(F=parseInt(D,10)),Vl(l)){const Q=z?F:f?D*I.height:0;return f?l==="bottom"?I.height-Q:-I.height+Q:Q}const q=z?F:f?D*I.width:0;return f?l==="right"?I.width-q:-I.width+q:q}))!=null?M:[]},[r,f,c]),S=be.useMemo(()=>g!==null?w==null?void 0:w[g]:null,[w,g]),E=be.useCallback(I=>{var M;const D=(M=w==null?void 0:w.findIndex(z=>z===I))!=null?M:null;o(D),Ul(n.current,{transition:`transform ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`,transform:Vl(l)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`}),w&&D!==w.length-1&&D!==s&&D<s?Ul(i.current,{transition:`opacity ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`,opacity:"0"}):Ul(i.current,{transition:`opacity ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`,opacity:"1"}),h(r==null?void 0:r[Math.max(D,0)])},[n.current,r,w,s,i,h]);be.useEffect(()=>{if(d||t){var I;const M=(I=r==null?void 0:r.findIndex(D=>D===t||D===d))!=null?I:-1;w&&M!==-1&&typeof w[M]=="number"&&E(w[M])}},[d,t,r,w,E]);function j({draggedDistance:I,closeDrawer:M,velocity:D,dismissible:z}){if(s===void 0)return;const F=l==="bottom"||l==="right"?(S??0)-I:(S??0)+I,q=g===s-1,Q=g===0,re=I>0;if(q&&Ul(i.current,{transition:`opacity ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`}),!u&&D>2&&!re){z?M():E(w[0]);return}if(!u&&D>2&&re&&w&&r){E(w[r.length-1]);return}const Z=w==null?void 0:w.reduce((K,X)=>typeof K!="number"||typeof X!="number"?K:Math.abs(X-F)<Math.abs(K-F)?X:K),se=Vl(l)?window.innerHeight:window.innerWidth;if(D>E3e&&Math.abs(I)<se*.4){const K=re?1:-1;if(K>0&&x){E(w[r.length-1]);return}if(Q&&K<0&&z&&M(),g===null)return;E(w[g+K]);return}E(Z)}function T({draggedDistance:I}){if(S===null)return;const M=l==="bottom"||l==="right"?S-I:S+I;(l==="bottom"||l==="right")&&M<w[w.length-1]||(l==="top"||l==="left")&&M>w[w.length-1]||Ul(n.current,{transform:Vl(l)?`translate3d(0, ${M}px, 0)`:`translate3d(${M}px, 0, 0)`})}function O(I,M){if(!r||typeof g!="number"||!w||s===void 0)return null;const D=g===s-1;if(g>=s&&M)return 0;if(D&&!M)return 1;if(!y&&!D)return null;const F=D?g+1:g-1,q=D?w[F]-w[F-1]:w[F+1]-w[F],Q=I/Math.abs(q);return D?1-Q:Q}return{isLastSnapPoint:x,activeSnapPoint:d,shouldFade:y,getPercentageDragged:O,setActiveSnapPoint:h,activeSnapPointIndex:g,onRelease:j,onDrag:T,snapPointsOffset:w}}const hBt=()=>()=>{};function fBt(){const{direction:t,isOpen:e,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:i}=C5(),s=be.useRef(null),o=C.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-EK)/window.innerWidth}be.useEffect(()=>{if(e&&r){s.current&&clearTimeout(s.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;oBt(n&&!i?dz(document.body,{background:"black"}):hBt,dz(c,{transformOrigin:Vl(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ho.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ho.EASE.join(",")})`}));const u=dz(c,{borderRadius:`${j3e}px`,overflow:"hidden",...Vl(t)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),s.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},ho.DURATION*1e3)}}},[e,r,o])}let NT=null;function mBt({isOpen:t,modal:e,nested:r,hasBeenOpened:n,preventScrollRestoration:i,noBodyStyles:s}){const[o,l]=be.useState(()=>typeof window<"u"?window.location.href:""),c=be.useRef(0),u=be.useCallback(()=>{if(mfe()&&NT===null&&t&&!s){NT={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const m=f-window.innerHeight;m&&c.current>=f&&(document.body.style.top=`${-(c.current+m)}px`)}),300)}},[t]),d=be.useCallback(()=>{if(mfe()&&NT!==null&&!s){const h=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,NT),window.requestAnimationFrame(()=>{if(i&&o!==window.location.href){l(window.location.href);return}window.scrollTo(f,h)}),NT=null}},[o]);return be.useEffect(()=>{function h(){c.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),be.useEffect(()=>{r||!n||(t?(!window.matchMedia("(display-mode: standalone)").matches&&u(),e||window.setTimeout(()=>{d()},500)):d())},[t,n,o,e,r,u,d]),{restorePositionSetting:d}}function T3e({open:t,onOpenChange:e,children:r,onDrag:n,onRelease:i,snapPoints:s,shouldScaleBackground:o=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=lBt,scrollLockTimeout:u=cBt,dismissible:d=!0,handleOnly:h=!1,fadeFromIndex:f=s&&s.length-1,activeSnapPoint:m,setActiveSnapPoint:x,fixed:g,modal:y=!0,onClose:w,nested:S,noBodyStyles:E,direction:j="bottom",defaultOpen:T=!1,disablePreventScroll:O=!0,snapToSequentialPoint:I=!1,preventScrollRestoration:M=!1,repositionInputs:D=!0,onAnimationEnd:z,container:F,autoFocus:q=!1}){var Q,re;const[Z=!1,se]=C3e({defaultProp:T,prop:t,onChange:Wt=>{e==null||e(Wt),!Wt&&!S&&pt(),setTimeout(()=>{z==null||z(Wt)},ho.DURATION*1e3),Wt&&!y&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),Wt||(document.body.style.pointerEvents="auto")}}),[K,X]=be.useState(!1),[Y,oe]=be.useState(!1),[xe,H]=be.useState(!1),J=be.useRef(null),ie=be.useRef(null),ce=be.useRef(null),me=be.useRef(null),he=be.useRef(null),_e=be.useRef(!1),ue=be.useRef(null),je=be.useRef(0),ye=be.useRef(!1),Le=be.useRef(0),Ge=be.useRef(null),Be=be.useRef(((Q=Ge.current)==null?void 0:Q.getBoundingClientRect().height)||0),Te=be.useRef(((re=Ge.current)==null?void 0:re.getBoundingClientRect().width)||0),ze=be.useRef(0),tt=be.useCallback(Wt=>{s&&Wt===Xt.length-1&&(ie.current=new Date)},[]),{activeSnapPoint:Re,activeSnapPointIndex:Ue,setActiveSnapPoint:xt,onRelease:st,snapPointsOffset:Xt,onDrag:Jt,shouldFade:_r,getPercentageDragged:lt}=dBt({snapPoints:s,activeSnapPointProp:m,setActiveSnapPointProp:x,drawerRef:Ge,fadeFromIndex:f,overlayRef:J,onSnapPointChange:tt,direction:j,container:F,snapToSequentialPoint:I});eBt({isDisabled:!Z||Y||!y||xe||!K||!D||!O});const{restorePositionSetting:pt}=mBt({isOpen:Z,modal:y,nested:S,hasBeenOpened:K,preventScrollRestoration:M,noBodyStyles:E});function er(){return(window.innerWidth-EK)/window.innerWidth}function Vt(Wt){var zt,Rr;!d&&!s||Ge.current&&!Ge.current.contains(Wt.target)||(Be.current=((zt=Ge.current)==null?void 0:zt.getBoundingClientRect().height)||0,Te.current=((Rr=Ge.current)==null?void 0:Rr.getBoundingClientRect().width)||0,oe(!0),ce.current=new Date,w3e()&&window.addEventListener("touchend",()=>_e.current=!1,{once:!0}),Wt.target.setPointerCapture(Wt.pointerId),je.current=Vl(j)?Wt.pageY:Wt.pageX)}function Kt(Wt,zt){var Rr,vr;let Cr=Wt;const Pr=(Rr=window.getSelection())==null?void 0:Rr.toString(),Qr=Ge.current?qD(Ge.current,j):null,Tr=new Date;if(Cr.hasAttribute("data-vaul-no-drag")||Cr.closest("[data-vaul-no-drag]"))return!1;if(j==="right"||j==="left")return!0;if(ie.current&&Tr.getTime()-ie.current.getTime()<500)return!1;if(Qr!==null&&(j==="bottom"?Qr>0:Qr<0))return!0;if(Pr&&Pr.length>0)return!1;if(Tr.getTime()-((vr=he.current)==null?void 0:vr.getTime())<u&&Qr===0||zt)return he.current=Tr,!1;for(;Cr;){if(Cr.scrollHeight>Cr.clientHeight){if(Cr.scrollTop!==0)return he.current=new Date,!1;if(Cr.getAttribute("role")==="dialog")return!0}Cr=Cr.parentNode}return!0}function ur(Wt){if(Ge.current&&Y){const zt=j==="bottom"||j==="right"?1:-1,Rr=(je.current-(Vl(j)?Wt.pageY:Wt.pageX))*zt,vr=Rr>0,Cr=s&&!d&&!vr;if(Cr&&Ue===0)return;const Pr=Math.abs(Rr),Qr=document.querySelector("[data-vaul-drawer-wrapper]"),Tr=j==="bottom"||j==="top"?Be.current:Te.current;let Gr=Pr/Tr;const ln=lt(Pr,vr);if(ln!==null&&(Gr=ln),Cr&&Gr>=1||!_e.current&&!Kt(Wt.target,vr))return;if(Ge.current.classList.add(hz),_e.current=!0,Ul(Ge.current,{transition:"none"}),Ul(J.current,{transition:"none"}),s&&Jt({draggedDistance:Rr}),vr&&!s){const Fr=aBt(Rr),Bi=Math.min(Fr*-1,0)*zt;Ul(Ge.current,{transform:Vl(j)?`translate3d(0, ${Bi}px, 0)`:`translate3d(${Bi}px, 0, 0)`});return}const vi=1-Gr;if((_r||f&&Ue===f-1)&&(n==null||n(Wt,Gr),Ul(J.current,{opacity:`${vi}`,transition:"none"},!0)),Qr&&J.current&&o){const Fr=Math.min(er()+Gr*(1-er()),1),Bi=8-Gr*8,da=Math.max(0,14-Gr*14);Ul(Qr,{borderRadius:`${Bi}px`,transform:Vl(j)?`scale(${Fr}) translate3d(0, ${da}px, 0)`:`scale(${Fr}) translate3d(${da}px, 0, 0)`,transition:"none"},!0)}if(!s){const Fr=Pr*zt;Ul(Ge.current,{transform:Vl(j)?`translate3d(0, ${Fr}px, 0)`:`translate3d(${Fr}px, 0, 0)`})}}}be.useEffect(()=>{var Wt;function zt(){if(!Ge.current||!D)return;const Rr=document.activeElement;if(SK(Rr)||ye.current){var vr;const Cr=((vr=window.visualViewport)==null?void 0:vr.height)||0,Pr=window.innerHeight;let Qr=Pr-Cr;const Tr=Ge.current.getBoundingClientRect().height||0,Gr=Tr>Pr*.8;ze.current||(ze.current=Tr);const ln=Ge.current.getBoundingClientRect().top;if(Math.abs(Le.current-Qr)>60&&(ye.current=!ye.current),s&&s.length>0&&Xt&&Ue){const vi=Xt[Ue]||0;Qr+=vi}if(Le.current=Qr,Tr>Cr||ye.current){const vi=Ge.current.getBoundingClientRect().height;let Fr=vi;vi>Cr&&(Fr=Cr-(Gr?ln:EK)),g?Ge.current.style.height=`${vi-Math.max(Qr,0)}px`:Ge.current.style.height=`${Math.max(Fr,Cr-ln)}px`}else Ge.current.style.height=`${ze.current}px`;s&&s.length>0&&!ye.current?Ge.current.style.bottom="0px":Ge.current.style.bottom=`${Math.max(Qr,0)}px`}}return(Wt=window.visualViewport)==null||Wt.addEventListener("resize",zt),()=>{var Rr;return(Rr=window.visualViewport)==null?void 0:Rr.removeEventListener("resize",zt)}},[Ue,s,Xt]);function rt(Wt){Dt(),w==null||w(),Wt||se(!1),setTimeout(()=>{s&&xt(s[0])},ho.DURATION*1e3)}function Lt(){if(!Ge.current)return;const Wt=document.querySelector("[data-vaul-drawer-wrapper]"),zt=qD(Ge.current,j);Ul(Ge.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`}),Ul(J.current,{transition:`opacity ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`,opacity:"1"}),o&&zt&&zt>0&&Z&&Ul(Wt,{borderRadius:`${j3e}px`,overflow:"hidden",...Vl(j)?{transform:`scale(${er()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${er()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ho.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ho.EASE.join(",")})`},!0)}function Dt(){!Y||!Ge.current||(Ge.current.classList.remove(hz),_e.current=!1,oe(!1),me.current=new Date)}function Fe(Wt){if(!Y||!Ge.current)return;Ge.current.classList.remove(hz),_e.current=!1,oe(!1),me.current=new Date;const zt=qD(Ge.current,j);if(!Kt(Wt.target,!1)||!zt||Number.isNaN(zt)||ce.current===null)return;const Rr=me.current.getTime()-ce.current.getTime(),vr=je.current-(Vl(j)?Wt.pageY:Wt.pageX),Cr=Math.abs(vr)/Rr;if(Cr>.05&&(H(!0),setTimeout(()=>{H(!1)},200)),s){st({draggedDistance:vr*(j==="bottom"||j==="right"?1:-1),closeDrawer:rt,velocity:Cr,dismissible:d}),i==null||i(Wt,!0);return}if(j==="bottom"||j==="right"?vr>0:vr<0){Lt(),i==null||i(Wt,!0);return}if(Cr>E3e){rt(),i==null||i(Wt,!1);return}var Pr;const Qr=Math.min((Pr=Ge.current.getBoundingClientRect().height)!=null?Pr:0,window.innerHeight);var Tr;const Gr=Math.min((Tr=Ge.current.getBoundingClientRect().width)!=null?Tr:0,window.innerWidth),ln=j==="left"||j==="right";if(Math.abs(zt)>=(ln?Gr:Qr)*c){rt(),i==null||i(Wt,!1);return}i==null||i(Wt,!0),Lt()}be.useEffect(()=>(Z&&(Ul(document.documentElement,{scrollBehavior:"auto"}),ie.current=new Date),()=>{sBt(document.documentElement,"scrollBehavior")}),[Z]);function ut(Wt){const zt=Wt?(window.innerWidth-fw)/window.innerWidth:1,Rr=Wt?-fw:0;ue.current&&window.clearTimeout(ue.current),Ul(Ge.current,{transition:`transform ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`,transform:`scale(${zt}) translate3d(0, ${Rr}px, 0)`}),!Wt&&Ge.current&&(ue.current=setTimeout(()=>{const vr=qD(Ge.current,j);Ul(Ge.current,{transition:"none",transform:Vl(j)?`translate3d(0, ${vr}px, 0)`:`translate3d(${vr}px, 0, 0)`})},500))}function Mt(Wt,zt){if(zt<0)return;const Rr=(window.innerWidth-fw)/window.innerWidth,vr=Rr+zt*(1-Rr),Cr=-fw+zt*fw;Ul(Ge.current,{transform:Vl(j)?`scale(${vr}) translate3d(0, ${Cr}px, 0)`:`scale(${vr}) translate3d(${Cr}px, 0, 0)`,transition:"none"})}function Ht(Wt,zt){const Rr=Vl(j)?window.innerHeight:window.innerWidth,vr=zt?(Rr-fw)/Rr:1,Cr=zt?-fw:0;zt&&Ul(Ge.current,{transition:`transform ${ho.DURATION}s cubic-bezier(${ho.EASE.join(",")})`,transform:Vl(j)?`scale(${vr}) translate3d(0, ${Cr}px, 0)`:`scale(${vr}) translate3d(${Cr}px, 0, 0)`})}return be.createElement(lI,{defaultOpen:T,onOpenChange:Wt=>{!d&&!Wt||(Wt?X(!0):rt(!0),se(Wt))},open:Z},be.createElement(b3e.Provider,{value:{activeSnapPoint:Re,snapPoints:s,setActiveSnapPoint:xt,drawerRef:Ge,overlayRef:J,onOpenChange:e,onPress:Vt,onRelease:Fe,onDrag:ur,dismissible:d,handleOnly:h,isOpen:Z,isDragging:Y,shouldFade:_r,closeDrawer:rt,onNestedDrag:Mt,onNestedOpenChange:ut,onNestedRelease:Ht,keyboardIsOpen:ye,modal:y,snapPointsOffset:Xt,direction:j,shouldScaleBackground:o,setBackgroundColorOnScale:l,noBodyStyles:E,container:F,autoFocus:q}},r))}const P3e=be.forwardRef(function({...t},e){const{overlayRef:r,snapPoints:n,onRelease:i,shouldFade:s,isOpen:o,modal:l}=C5(),c=N3e(e,r),u=n&&n.length>0;return l?be.createElement(uN,{onMouseUp:i,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":o&&u?"true":"false","data-vaul-snap-points-overlay":o&&s?"true":"false",...t}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});P3e.displayName="Drawer.Overlay";const k3e=be.forwardRef(function({onPointerDownOutside:t,style:e,onOpenAutoFocus:r,...n},i){const{drawerRef:s,onPress:o,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,modal:h,isOpen:f,direction:m,snapPoints:x,container:g,handleOnly:y,autoFocus:w}=C5(),[S,E]=be.useState(!1),j=N3e(i,s),T=be.useRef(null),O=be.useRef(null),I=be.useRef(!1),M=x&&x.length>0;fBt();const D=(F,q,Q=0)=>{if(I.current)return!0;const re=Math.abs(F.y),Z=Math.abs(F.x),se=Z>re,K=["bottom","right"].includes(q)?1:-1;if(q==="left"||q==="right"){if(!(F.x*K<0)&&Z>=0&&Z<=Q)return se}else if(!(F.y*K<0)&&re>=0&&re<=Q)return!se;return I.current=!0,!0};be.useEffect(()=>{M&&window.requestAnimationFrame(()=>{E(!0)})},[]);function z(F){T.current=null,I.current=!1,l(F)}return be.createElement(dN,{"data-vaul-drawer-direction":m,"data-vaul-drawer":"","data-vaul-delayed-snap-points":S?"true":"false","data-vaul-snap-points":f&&M?"true":"false","data-vaul-custom-container":g?"true":"false",...n,ref:j,style:d&&d.length>0?{"--snap-point-height":`${d[0]}px`,...e}:e,onPointerDown:F=>{y||(n.onPointerDown==null||n.onPointerDown.call(n,F),T.current={x:F.pageX,y:F.pageY},o(F))},onOpenAutoFocus:F=>{r==null||r(F),w||F.preventDefault()},onPointerDownOutside:F=>{if(t==null||t(F),!h||F.defaultPrevented){F.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:F=>{if(!h){F.preventDefault();return}},onPointerMove:F=>{if(O.current=F,y||(n.onPointerMove==null||n.onPointerMove.call(n,F),!T.current))return;const q=F.pageY-T.current.y,Q=F.pageX-T.current.x,re=F.pointerType==="touch"?10:2;D({x:Q,y:q},m,re)?c(F):(Math.abs(Q)>re||Math.abs(q)>re)&&(T.current=null)},onPointerUp:F=>{n.onPointerUp==null||n.onPointerUp.call(n,F),T.current=null,I.current=!1,l(F)},onPointerOut:F=>{n.onPointerOut==null||n.onPointerOut.call(n,F),z(O.current)},onContextMenu:F=>{n.onContextMenu==null||n.onContextMenu.call(n,F),z(O.current)}})});k3e.displayName="Drawer.Content";const pBt=250,gBt=120,O3e=be.forwardRef(function({preventCycle:t=!1,children:e,...r},n){const{closeDrawer:i,isDragging:s,snapPoints:o,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:h,onPress:f,onDrag:m}=C5(),x=be.useRef(null),g=be.useRef(!1);function y(){if(g.current){E();return}window.setTimeout(()=>{w()},gBt)}function w(){if(s||t||g.current){E();return}if(E(),(!o||o.length===0)&&u){i();return}if(l===o[o.length-1]&&u){i();return}const T=o.findIndex(I=>I===l);if(T===-1)return;const O=o[T+1];c(O)}function S(){x.current=window.setTimeout(()=>{g.current=!0},pBt)}function E(){window.clearTimeout(x.current),g.current=!1}return be.createElement("div",{onClick:y,onPointerCancel:E,onPointerDown:j=>{d&&f(j),S()},onPointerMove:j=>{d&&m(j)},ref:n,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},be.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},e))});O3e.displayName="Drawer.Handle";function xBt({onDrag:t,onOpenChange:e,...r}){const{onNestedDrag:n,onNestedOpenChange:i,onNestedRelease:s}=C5();if(!n)throw new Error("Drawer.NestedRoot must be placed in another drawer");return be.createElement(T3e,{nested:!0,onClose:()=>{i(!1)},onDrag:(o,l)=>{n(o,l),t==null||t(o,l)},onOpenChange:o=>{o&&i(o)},onRelease:s,...r})}function vBt(t){const e=C5(),{container:r=e.container,...n}=t;return be.createElement(cI,{container:r,...n})}const Wv={Root:T3e,NestedRoot:xBt,Content:k3e,Overlay:P3e,Trigger:h7,Portal:vBt,Handle:O3e,Close:uI,Title:QC,Description:JC},I3e=({shouldScaleBackground:t=!0,...e})=>a.jsx(Wv.Root,{shouldScaleBackground:t,...e});I3e.displayName="Drawer";const yBt=Wv.Portal,R3e=C.forwardRef(({className:t,...e},r)=>a.jsx(Wv.Overlay,{ref:r,className:Ut("fixed inset-0 z-50 bg-black/80",t),...e}));R3e.displayName=Wv.Overlay.displayName;const D3e=C.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(yBt,{children:[a.jsx(R3e,{}),a.jsxs(Wv.Content,{ref:n,className:Ut("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...r,children:[a.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),e]})]}));D3e.displayName="DrawerContent";const M3e=({className:t,...e})=>a.jsx("div",{className:Ut("grid gap-1.5 p-4 text-center sm:text-left",t),...e});M3e.displayName="DrawerHeader";const L3e=C.forwardRef(({className:t,...e},r)=>a.jsx(Wv.Title,{ref:r,className:Ut("text-lg font-semibold leading-none tracking-tight",t),...e}));L3e.displayName=Wv.Title.displayName;const F3e=C.forwardRef(({className:t,...e},r)=>a.jsx(Wv.Description,{ref:r,className:Ut("text-sm text-muted-foreground",t),...e}));F3e.displayName=Wv.Description.displayName;function B3e(t,e,r,n){const s=HD(r-t),o=HD(n-e),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(HD(t))*Math.cos(HD(r))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function HD(t){return t*(Math.PI/180)}function bBt(t){return t<1?`${Math.round(t*1e3)} m`:t<10?`${t.toFixed(1)} km`:`${Math.round(t)} km`}function wBt(t){return[...t].sort((e,r)=>e.distance!==null&&e.distance!==void 0&&(r.distance===null||r.distance===void 0)?-1:(e.distance===null||e.distance===void 0)&&r.distance!==null&&r.distance!==void 0?1:e.distance!==null&&e.distance!==void 0&&r.distance!==null&&r.distance!==void 0?e.distance-r.distance:0)}function $3e(){var o,l;const{profile:t}=Si(),[e,r]=C.useState({coordinates:null,loading:!0,error:null,permissionDenied:!1,source:null}),n=C.useCallback(()=>t!=null&&t.latitude&&(t!=null&&t.longitude)?{latitude:Number(t.latitude),longitude:Number(t.longitude)}:null,[t]),i=C.useCallback(()=>{if(r(c=>({...c,loading:!0,error:null})),!navigator.geolocation){const c=n();r({coordinates:c,loading:!1,error:c?null:"Geolocalizao no suportada",permissionDenied:!1,source:c?"profile":null});return}navigator.geolocation.getCurrentPosition(c=>{r({coordinates:{latitude:c.coords.latitude,longitude:c.coords.longitude},loading:!1,error:null,permissionDenied:!1,source:"browser"})},c=>{const u=n();r({coordinates:u,loading:!1,error:u?null:_Bt(c),permissionDenied:c.code===c.PERMISSION_DENIED,source:u?"profile":null})},{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5})},[n]),s=C.useCallback(()=>{const c=n();r({coordinates:c,loading:!1,error:c?null:"Coordenadas do perfil no disponveis",permissionDenied:!1,source:c?"profile":null})},[n]);return C.useEffect(()=>{const c=n();r(c?{coordinates:c,loading:!1,error:null,permissionDenied:!1,source:"profile"}:u=>({...u,loading:!1}))},[n]),{...e,requestBrowserLocation:i,useProfileLocation:s,refresh:i,latitude:(o=e.coordinates)==null?void 0:o.latitude,longitude:(l=e.coordinates)==null?void 0:l.longitude}}function _Bt(t){switch(t.code){case t.PERMISSION_DENIED:return"Permisso de localizao negada";case t.POSITION_UNAVAILABLE:return"Localizao indisponvel";case t.TIMEOUT:return"Tempo esgotado ao obter localizao";default:return"Erro ao obter localizao"}}function NBt({cooperativas:t,selected:e,onSelect:r,className:n}){const[i,s]=C.useState(""),[o,l]=C.useState(null),{coordinates:c,loading:u,permissionDenied:d,source:h,requestBrowserLocation:f}=$3e(),m=C.useCallback(async(y,w,S,E)=>{y.stopPropagation();const j=c?`https://www.google.com/maps/dir/?api=1&origin=${c.latitude},${c.longitude}&destination=${S},${E}`:`https://www.google.com/maps/dir/?api=1&destination=${S},${E}`;try{if(window.open(j,"_blank","noopener,noreferrer"))return}catch{}try{await navigator.clipboard.writeText(j),l(w),cr.success("Link copiado!"),setTimeout(()=>l(null),3e3)}catch{cr.info("Copie o link:",{description:j,duration:1e4})}},[c]),x=C.useMemo(()=>{const y=t.map(w=>{let S=null;return c&&w.latitude&&w.longitude&&(S=B3e(c.latitude,c.longitude,Number(w.latitude),Number(w.longitude))),{...w,distance:S}});return wBt(y)},[t,c]),g=C.useMemo(()=>{if(!i.trim())return x;const y=i.toLowerCase();return x.filter(w=>{var T,O,I;const S=((T=w.nome_fantasia)==null?void 0:T.toLowerCase())||"",E=((O=w.cidade)==null?void 0:O.toLowerCase())||"",j=((I=w.bairro)==null?void 0:I.toLowerCase())||"";return S.includes(y)||E.includes(y)||j.includes(y)})},[x,i]);return a.jsxs("div",{className:Ut("space-y-3",n),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm",children:[a.jsx("div",{className:"flex items-center gap-2 text-muted-foreground",children:u?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-3.5 w-3.5 animate-spin"}),a.jsx("span",{children:"Localizando..."})]}):c?a.jsxs(a.Fragment,{children:[a.jsx(Rm,{className:"h-3.5 w-3.5 text-success"}),a.jsx("span",{children:"Ordenado por proximidade"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Rm,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:d?"GPS negado":"GPS desativado"})]})}),!c&&!u&&a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:f,className:"h-7 px-2 text-xs",children:[a.jsx(TRe,{className:"h-3.5 w-3.5 mr-1"}),"Ativar"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Jp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(mt,{placeholder:"Buscar por nome, cidade ou bairro...",value:i,onChange:y=>s(y.target.value),className:"pl-9 pr-8 h-10"}),i&&a.jsx("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a.jsx(Xa,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"space-y-1 max-h-[280px] overflow-y-auto -mx-1 px-1",children:[a.jsx(Cf,{mode:"popLayout",children:g.map((y,w)=>{const S=e===y.id;return a.jsx(Ke.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>r(y.id),onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),r(y.id))},className:Ut("flex items-center justify-between gap-3 p-3 rounded-xl cursor-pointer transition-colors",S?"bg-primary/10":"hover:bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:Ut("w-4 h-4 rounded-full border-2 shrink-0 flex items-center justify-center transition-colors",S?"border-primary bg-primary":"border-muted-foreground/30"),children:S&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},className:"w-1.5 h-1.5 rounded-full bg-primary-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:Ut("text-sm font-medium truncate",S?"text-primary":"text-foreground"),children:y.nome_fantasia}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[y.bairro&&`${y.bairro}, `,y.cidade," - ",y.uf]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[y.distance!==null&&a.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:bBt(y.distance)}),y.latitude&&y.longitude&&a.jsx("button",{type:"button",onClick:E=>m(E,y.id,Number(y.latitude),Number(y.longitude)),className:Ut("p-1.5 rounded-md transition-colors","text-muted-foreground hover:text-primary hover:bg-primary/10",o===y.id&&"text-success"),children:o===y.id?a.jsx(xl,{className:"h-4 w-4"}):a.jsx(kM,{className:"h-4 w-4"})})]})]})},y.id)})}),g.length===0&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:i?"Nenhum resultado encontrado":"Nenhuma cooperativa disponvel"})})]})]})}function SBt({cooperativas:t,selected:e,onSelect:r}){const[n,i]=C.useState(!1),s=t.find(c=>c.id===e),o=c=>{r(c),setTimeout(()=>i(!1),200)},l=c=>{var u;c&&((u=document.activeElement)==null||u.blur()),i(c)};return a.jsxs(a.Fragment,{children:[a.jsxs(Oe,{variant:"outline",onClick:()=>l(!0),className:Ut("w-full justify-between h-auto py-3 px-4","border-2 transition-all duration-200",e?"border-primary bg-primary/5 hover:bg-primary/10":"border-dashed hover:border-primary/50"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:Ut("p-2 rounded-lg",e?"bg-primary/20":"bg-muted"),children:e?a.jsx(xl,{className:"h-4 w-4 text-primary"}):a.jsx(eu,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx("div",{className:"text-left",children:s?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium text-foreground",children:s.nome_fantasia}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.bairro&&`${s.bairro} - `,s.cidade,", ",s.uf]})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium text-muted-foreground",children:"Escolher cooperativa"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Toque para selecionar o ponto de entrega"})]})})]}),a.jsx(MC,{className:Ut("h-5 w-5 text-muted-foreground transition-transform",n&&"rotate-180")})]}),a.jsx(I3e,{open:n,onOpenChange:l,children:a.jsxs(D3e,{className:"max-h-[85vh]",children:[a.jsxs(M3e,{className:"text-left border-b pb-4",children:[a.jsxs(L3e,{className:"flex items-center gap-2",children:[a.jsx(Rm,{className:"h-5 w-5 text-primary"}),"Escolher Ponto de Entrega"]}),a.jsx(F3e,{children:"Selecione a cooperativa mais prxima para entregar seus materiais"})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(85vh-100px)]",children:a.jsx(NBt,{cooperativas:t,selected:e,onSelect:o})})]})})]})}const EBt=()=>{const t=nn(),{user:e}=Si(),{coordinates:r}=$3e(),[n,i]=C.useState([]),[s,o]=C.useState(new Set),[l,c]=C.useState([]),[u,d]=C.useState(""),[h,f]=C.useState(!0),[m,x]=C.useState(!1),[g,y]=C.useState(!1),[w,S]=C.useState(""),[E,j]=C.useState(""),[T,O]=C.useState(!1),[I,M]=C.useState(""),[D,z]=C.useState(""),[F,q]=C.useState(!1),[Q,re]=C.useState(!1),Z=C.useMemo(()=>r?l.map(ue=>({...ue,distance:ue.latitude&&ue.longitude?B3e(r.latitude,r.longitude,ue.latitude,ue.longitude):null})).sort((ue,je)=>ue.distance===null&&je.distance===null?0:ue.distance===null?1:je.distance===null?-1:ue.distance-je.distance):l,[l,r]);C.useMemo(()=>Z.find(ue=>ue.id===u),[Z,u]),C.useEffect(()=>{if(e){se();const ue=Ee.channel("cooperativas-changes").on("postgres_changes",{event:"*",schema:"public",table:"cooperativas"},je=>{setTimeout(()=>{X()},1e3)}).subscribe();return()=>{ue.unsubscribe()}}},[e]);const se=async()=>{try{await Ee.functions.invoke("validar-expiracoes-entregas")}catch{}K(),X()},K=async()=>{try{const{data:ue,error:je}=await Ee.from("materiais_reciclaveis_usuario").select("*").eq("id_usuario",e==null?void 0:e.id).eq("status","disponivel").order("data_cadastro",{ascending:!1});if(je)throw je;i(ue||[])}catch(ue){cr.error("Erro ao carregar materiais",{description:ue.message})}finally{f(!1)}},X=async()=>{try{const{data:ue,error:je}=await Ee.from("cooperativas").select("id, nome_fantasia, cidade, uf, logradouro, bairro, latitude, longitude").eq("status","aprovada").order("nome_fantasia");if(je)throw je;c(ue||[])}catch(ue){console.error(" Erro ao carregar cooperativas:",ue),cr.error("Erro ao carregar cooperativas",{description:ue.message})}},Y=async()=>{x(!0);try{await X(),cr.success("Mapa atualizado!",{description:"Localizaes das cooperativas foram recarregadas"})}catch{cr.error("Erro ao atualizar mapa")}finally{x(!1)}},oe=ue=>{const je=new Set(s);je.has(ue)?je.delete(ue):je.add(ue),o(je)},xe=async ue=>{try{const{data:je,error:ye}=await Ee.from("materiais_reciclaveis_usuario").delete().eq("id",ue).eq("id_usuario",e==null?void 0:e.id).select();if(ye)throw ye;if(!je||je.length===0){const{error:Le}=await Ee.from("materiais_reciclaveis_usuario").delete().eq("id",ue);if(Le)throw Le}i(Le=>Le.filter(Ge=>Ge.id!==ue)),o(Le=>{const Ge=new Set(Le);return Ge.delete(ue),Ge}),cr.success("Material excludo")}catch(je){console.error("Erro ao excluir material:",je),cr.error("Erro ao excluir",{description:je.message}),K()}},H=ue=>{const je=ue.quantidade??1,ye=ue.peso_unitario_gramas??0;return ue.peso_total_estimado_gramas??je*ye},J=()=>n.filter(je=>s.has(je.id)).reduce((je,ye)=>je+H(ye),0)/1e3,ie=async()=>{if(s.size===0){cr.error("Selecione pelo menos um material");return}if(!u){cr.error("Selecione uma cooperativa");return}y(!0);try{const ue=crypto.randomUUID(),je=crypto.randomUUID(),ye=`${e==null?void 0:e.id}-${Date.now()}-${Math.random().toString(36).substring(7)}`,Le=Array.from(s),Ge=J(),{data:Be,error:Te}=await Ee.from("entregas_reciclaveis").insert({id:je,id_usuario:e==null?void 0:e.id,id_cooperativa:u,qrcode_id:ue,hash_qrcode:ye,tipo_material:"misto",status:"gerada",status_promessa:"ativa",itens_vinculados:Le,peso_estimado:Ge,data_geracao:new Date().toISOString()}).select().single();if(Te)throw Te;const{error:ze}=await Ee.from("materiais_reciclaveis_usuario").update({status:"em_entrega",id_entrega:Be.id}).in("id",Le);if(ze)throw ze;const tt=JSON.stringify({tipo:"promessa_entrega_ciclik",id_entrega:Be.id,hash:ye,id_cooperativa:u,peso_estimado:Ge.toFixed(3),validade:new Date(Date.now()+24*60*60*1e3).toISOString()}),Re=await Dg.toDataURL(tt,{width:400,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});S(Re),j(Be.id),cr.success("QR Code gerado com sucesso!",{description:`${s.size} materiais prontos para entrega`})}catch(ue){cr.error("Erro ao gerar QR Code",{description:ue.message})}finally{y(!1)}},ce=()=>{const ue=document.createElement("a");ue.download=`qrcode-entrega-${E}.png`,ue.href=w,ue.click()},me=()=>{S(""),j(""),o(new Set),d(""),K()},he=async()=>{if(!I.trim()){cr.error("Informe uma descrio para o material");return}q(!0);try{const{data:ue,error:je}=await Ee.from("materiais_reciclaveis_usuario").insert({id_usuario:e==null?void 0:e.id,descricao:I.trim(),origem_cadastro:"manual",tipo_embalagem:"misto",percentual_reciclabilidade:100,quantidade:1,peso_unitario_gramas:D?parseFloat(D.replace(",","."))*1e3:null,peso_total_estimado_gramas:D?parseFloat(D.replace(",","."))*1e3:null,status:"disponivel",pontos_ganhos:0}).select().single();if(je)throw je;cr.success("Entrada diversa adicionada!",{description:"O peso ser definido pelo operador na coleta"}),i(ye=>[ue,...ye]),o(ye=>new Set([...ye,ue.id])),M(""),z(""),O(!1)}catch(ue){cr.error("Erro ao adicionar entrada",{description:ue.message})}finally{q(!1)}},_e=s.size>0&&u;return w?a.jsx("div",{className:"container mx-auto p-4 sm:p-6 max-w-lg",children:a.jsx(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:a.jsxs(it,{className:"overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-br from-primary/20 to-success/20 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-primary/20 rounded-xl",children:a.jsx(Cs,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-display text-xl font-semibold",children:"Promessa Criada!"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Apresente o QR Code na cooperativa"})]})]}),a.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:a.jsx("img",{src:w,alt:"QR Code",className:"w-full max-w-[280px] mx-auto"})})]}),a.jsxs(ht,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"ID da Promessa"}),a.jsx("p",{className:"font-mono text-sm truncate",children:E})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-primary/10 p-3 rounded-lg text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-primary",children:s.size}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"materiais"})]}),a.jsxs("div",{className:"bg-success/10 p-3 rounded-lg text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-success",children:As(J(),2)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"kg estimados"})]})]}),a.jsxs("div",{className:"bg-warning/10 p-3 rounded-lg flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("p",{className:"text-sm text-warning-foreground",children:["Este QR Code expira em ",a.jsx("strong",{children:"24 horas"})]})]}),a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(Oe,{onClick:ce,variant:"outline",children:"Baixar QR"}),a.jsx(Oe,{onClick:me,variant:"secondary",children:"Nova Entrega"})]}),a.jsxs(Oe,{onClick:()=>t("/user"),variant:"ghost",className:"w-full",children:[a.jsx(Kn,{className:"mr-2 h-4 w-4"}),"Ver Minhas Entregas"]})]})]})]})})}):a.jsxs("div",{className:"min-h-screen bg-background pb-40",children:[a.jsx(Ke.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm border-b",children:a.jsx("div",{className:"container mx-auto px-4 py-3 max-w-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Oe,{onClick:()=>t("/user"),variant:"ghost",size:"icon",className:"shrink-0",children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-display font-semibold text-lg",children:"Entregar Materiais"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecione e escolha o ponto de entrega"})]})]}),a.jsxs(Oe,{onClick:()=>O(!0),variant:"outline",size:"sm",className:"border-accent text-accent hover:bg-accent/10",children:[a.jsx(ya,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]})})}),a.jsx("div",{className:"container mx-auto px-4 py-4 max-w-2xl space-y-4",children:h?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Yn,{className:"h-10 w-10 mx-auto text-muted-foreground animate-pulse mb-3"}),a.jsx("p",{className:"text-muted-foreground",children:"Carregando materiais..."})]})}):n.length===0?a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Yn,{className:"h-10 w-10 text-muted-foreground"})}),a.jsx("h3",{className:"font-medium mb-2",children:"Nenhum material disponvel"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-xs mx-auto",children:"Cadastre notas fiscais ou adicione entradas diversas para comear"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[a.jsx(Oe,{onClick:()=>t("/upload-receipt"),variant:"outline",children:"Cadastrar Nota Fiscal"}),a.jsxs(Oe,{onClick:()=>O(!0),variant:"accent",children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Entradas Diversas"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Ke.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Yn,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"font-medium text-sm",children:"Seus Materiais"}),s.size>0&&a.jsxs(Bt,{variant:"secondary",className:"text-xs",children:[s.size," selecionado",s.size>1?"s":""]})]}),a.jsx(U7t,{materials:n.map(ue=>({id:ue.id,descricao:ue.descricao,tipo_embalagem:ue.tipo_embalagem,peso_gramas:H(ue),origem_cadastro:ue.origem_cadastro})),selectedIds:s,onToggle:oe,onDelete:xe,onSelectAll:()=>o(new Set(n.map(ue=>ue.id))),onClearAll:()=>o(new Set)})]}),a.jsxs(Ke.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rm,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"font-medium text-sm",children:"Localizao"})]}),a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:Y,disabled:m,className:"h-7 text-xs",children:[a.jsx(gm,{className:Ut("h-3 w-3 mr-1",m&&"animate-spin")}),"Atualizar"]})]}),a.jsx(W7t,{cooperativas:Z,selectedId:u,onSelect:d,userLocation:r,className:"h-[200px]"})]}),a.jsxs(Ke.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Rm,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"font-medium text-sm",children:"Ponto de Entrega"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Z.length," disponveis)"]})]}),a.jsx(SBt,{cooperativas:Z,selected:u,onSelect:d})]})]})}),n.length>0&&a.jsx(Ke.div,{initial:{y:100},animate:{y:0},className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t shadow-lg z-30",children:a.jsxs("div",{className:"container mx-auto px-4 py-4 max-w-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:Ut("p-1.5 rounded-lg",s.size>0?"bg-primary/20":"bg-muted"),children:a.jsx(Yn,{className:Ut("h-4 w-4",s.size>0?"text-primary":"text-muted-foreground")})}),a.jsxs("span",{className:"text-sm font-medium",children:[s.size," ",s.size===1?"material":"materiais"]}),s.size>0&&a.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",As(J(),2)," kg"]})]}),!u&&s.size>0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"Toque no mapa para selecionar"})]}),a.jsx(Oe,{onClick:ie,disabled:g||!_e,className:"w-full h-12 text-base font-medium",size:"lg",children:g?"Gerando...":s.size?u?a.jsxs(a.Fragment,{children:[a.jsx(zu,{className:"h-5 w-5 mr-2"}),"Gerar QR Code de Entrega"]}):"Selecione um ponto no mapa":"Selecione materiais acima"})]})}),a.jsx(hs,{open:T,onOpenChange:O,children:a.jsxs(as,{children:[a.jsxs(fs,{children:[a.jsxs(ms,{className:"flex items-center gap-2",children:[a.jsx(g3,{className:"h-5 w-5 text-accent"}),"Entradas Diversas"]}),a.jsx(Sl,{children:"Adicione materiais reciclveis que no vieram de nota fiscal."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"descricao",children:"Tipo de Material *"}),a.jsxs(wi,{value:I,onValueChange:M,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o tipo de material"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"Misto (diversos tipos)",children:"Misto (diversos tipos)"}),a.jsx(or,{value:"Plstico",children:"Plstico"}),a.jsx(or,{value:"Papel / Papelo",children:"Papel / Papelo"}),a.jsx(or,{value:"Vidro",children:"Vidro"}),a.jsx(or,{value:"Metal / Alumnio",children:"Metal / Alumnio"}),a.jsx(or,{value:"Eletrnicos",children:"Eletrnicos"}),a.jsx(or,{value:"leo de cozinha",children:"leo de cozinha"}),a.jsx(or,{value:"Outros",children:"Outros"})]})]})]}),I==="Misto (diversos tipos)"&&a.jsxs(Oe,{onClick:()=>{O(!1),re(!0)},variant:"outline",className:"w-full border-success text-success hover:bg-success/10",children:[a.jsx(Fp,{className:"mr-2 h-4 w-4"}),"Aderir a Rotas de Coleta"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(nt,{htmlFor:"peso",children:["Peso aproximado (kg) ",a.jsx("span",{className:"text-muted-foreground text-xs",children:"(opcional)"})]}),a.jsx(mt,{id:"peso",type:"text",inputMode:"decimal",placeholder:"Ex: 2,5",value:D,onChange:ue=>{const je=ue.target.value.replace(/[^0-9,]/g,"");je.split(",").length<=2&&z(je)}})]}),a.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:" O peso exato ser definido pelo operador no momento da coleta."})})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>O(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:he,disabled:F||!I.trim(),variant:"accent",children:F?"Adicionando...":"Adicionar Material"})]})]})}),a.jsx($7t,{open:Q,onOpenChange:re})]})},jBt=()=>{const t=nn(),[e,r]=C.useState([]),[n,i]=C.useState([]),[s,o]=C.useState({total_entregas:0,entregas_ativas:0,entregas_finalizadas:0,entregas_expiradas:0,peso_total_coletado:0,peso_rejeito_total:0}),[l,c]=C.useState({}),[u,d]=C.useState("todos"),[h,f]=C.useState(!0);C.useEffect(()=>{m()},[]);const m=async()=>{try{f(!0);const{data:y,error:w}=await Ee.from("entregas_reciclaveis").select(`
          *,
          cooperativas(nome_fantasia)
        `).order("data_geracao",{ascending:!1});if(w)throw w;const{data:S,error:E}=await Ee.from("materiais_coletados_detalhado").select(`
          *,
          entregas_reciclaveis(
            id,
            id_usuario
          ),
          cooperativas(nome_fantasia)
        `).order("registrado_em",{ascending:!1}).limit(100);if(E)throw E;const j=y||[],T=S||[];r(j),i(T);const O=new Set;if(j.forEach(M=>{M.id_usuario&&O.add(M.id_usuario)}),T.forEach(M=>{var z;const D=(z=M.entregas_reciclaveis)==null?void 0:z.id_usuario;D&&O.add(D)}),O.size>0){const{data:M,error:D}=await Ee.from("profiles").select("id, nome").in("id",Array.from(O));if(D)throw D;const z={};M==null||M.forEach(F=>{F.id&&(z[F.id]=F.nome)}),c(z)}const I={total_entregas:j.length,entregas_ativas:j.filter(M=>M.status_promessa==="ativa").length,entregas_finalizadas:j.filter(M=>M.status_promessa==="finalizada").length,entregas_expiradas:j.filter(M=>M.status_promessa==="expirada").length,peso_total_coletado:j.reduce((M,D)=>M+(D.peso_validado||0),0),peso_rejeito_total:j.reduce((M,D)=>M+(D.peso_rejeito_kg||0),0)};o(I)}catch(y){cr.error("Erro ao carregar dados",{description:y.message})}finally{f(!1)}},x=y=>{const w={ativa:{variant:"default",icon:Tg,label:"Ativa"},em_coleta:{variant:"secondary",icon:Yn,label:"Em Coleta"},finalizada:{variant:"default",icon:ta,label:"Finalizada"},expirada:{variant:"destructive",icon:al,label:"Expirada"},cancelada:{variant:"outline",icon:al,label:"Cancelada"}},S=w[y]||w.ativa,E=S.icon;return a.jsxs(Bt,{variant:S.variant,className:"flex items-center gap-1 w-fit",children:[a.jsx(E,{className:"h-3 w-3"}),S.label]})},g=e.filter(y=>u==="todos"||y.status_promessa===u);return h?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ab,{}),a.jsx("div",{className:"container mx-auto p-6",children:a.jsx("p",{className:"text-center text-muted-foreground",children:"Carregando..."})})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ab,{}),a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Promessas de Entrega"}),a.jsx("p",{className:"text-muted-foreground",children:"Rastreamento completo de entregas via QR Code"})]})]}),a.jsx(Oe,{onClick:m,children:"Atualizar"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Entregas"}),a.jsx("p",{className:"text-2xl font-bold",children:s.total_entregas})]}),a.jsx(Yn,{className:"h-8 w-8 text-primary"})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Entregas Ativas"}),a.jsx("p",{className:"text-2xl font-bold",children:s.entregas_ativas})]}),a.jsx(Tg,{className:"h-8 w-8 text-primary"})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Finalizadas"}),a.jsx("p",{className:"text-2xl font-bold",children:s.entregas_finalizadas})]}),a.jsx(ta,{className:"h-8 w-8 text-primary"})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Peso Total Coletado"}),a.jsxs("p",{className:"text-2xl font-bold",children:[s.peso_total_coletado.toFixed(2)," kg"]})]}),a.jsx(Cs,{className:"h-8 w-8 text-primary"})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejeito Total"}),a.jsxs("p",{className:"text-2xl font-bold",children:[s.peso_rejeito_total.toFixed(2)," kg"]})]}),a.jsx(al,{className:"h-8 w-8 text-destructive"})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiradas"}),a.jsx("p",{className:"text-2xl font-bold",children:s.entregas_expiradas})]}),a.jsx(al,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),a.jsxs(yc,{defaultValue:"entregas",className:"space-y-4",children:[a.jsxs(Jl,{children:[a.jsx(ri,{value:"entregas",children:"Entregas"}),a.jsx(ri,{value:"materiais",children:"Materiais Coletados"})]}),a.jsx(Ti,{value:"entregas",className:"space-y-4",children:a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:"Histrico de Entregas"}),a.jsx(gr,{children:"Lista completa de todas as promessas de entrega"})]}),a.jsxs(wi,{value:u,onValueChange:d,children:[a.jsx(gi,{className:"w-[180px]",children:a.jsx(_i,{placeholder:"Filtrar por status"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:"Todos"}),a.jsx(or,{value:"ativa",children:"Ativas"}),a.jsx(or,{value:"em_coleta",children:"Em Coleta"}),a.jsx(or,{value:"finalizada",children:"Finalizadas"}),a.jsx(or,{value:"expirada",children:"Expiradas"})]})]})]})}),a.jsx(ht,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"ID"}),a.jsx(It,{children:"Usurio"}),a.jsx(It,{children:"Cooperativa"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Peso Est."}),a.jsx(It,{children:"Peso Valid."}),a.jsx(It,{children:"Rejeito"}),a.jsx(It,{children:"Data Gerao"})]})}),a.jsx(to,{children:g.map(y=>{var w,S;return a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-mono text-xs",children:y.id.substring(0,8)}),a.jsx(jt,{children:l[y.id_usuario]||"Usurio"}),a.jsx(jt,{children:(w=y.cooperativas)==null?void 0:w.nome_fantasia}),a.jsx(jt,{children:x(y.status_promessa)}),a.jsxs(jt,{children:[(S=y.peso_estimado)==null?void 0:S.toFixed(2)," kg"]}),a.jsx(jt,{children:y.peso_validado?`${y.peso_validado.toFixed(2)} kg`:"-"}),a.jsx(jt,{children:y.peso_rejeito_kg>0?`${y.peso_rejeito_kg.toFixed(2)} kg`:"-"}),a.jsx(jt,{children:new Date(y.data_geracao).toLocaleString("pt-BR")})]},y.id)})})]})})})]})}),a.jsx(Ti,{value:"materiais",className:"space-y-4",children:a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Materiais Coletados Detalhados"}),a.jsx(gr,{children:"Registro detalhado de todos os materiais e submateriais coletados"})]}),a.jsx(ht,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Data"}),a.jsx(It,{children:"Usurio"}),a.jsx(It,{children:"Cooperativa"}),a.jsx(It,{children:"Material"}),a.jsx(It,{children:"Submaterial"}),a.jsx(It,{children:"Peso (kg)"})]})}),a.jsx(to,{children:n.map(y=>{var w,S;return a.jsxs(Dn,{children:[a.jsx(jt,{children:new Date(y.registrado_em).toLocaleString("pt-BR")}),a.jsx(jt,{children:l[((w=y.entregas_reciclaveis)==null?void 0:w.id_usuario)||""]||"Usurio"}),a.jsx(jt,{children:(S=y.cooperativas)==null?void 0:S.nome_fantasia}),a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",children:y.tipo_material})}),a.jsx(jt,{children:a.jsx(Bt,{variant:y.subtipo_material==="REJEITO"?"destructive":"secondary",children:y.subtipo_material})}),a.jsxs(jt,{className:"font-bold",children:[y.peso_kg.toFixed(2)," kg"]})]},y.id)})})]})})})]})})]})]})]})},ABt=()=>{nn();const{user:t}=Si(),[e,r]=C.useState([]),[n,i]=C.useState(!0),[s,o]=C.useState(0),[l,c]=C.useState(0),[u,d]=C.useState(0),[h,f]=C.useState(void 0),[m,x]=C.useState(!1);C.useEffect(()=>{t&&g()},[t]);const g=async()=>{if(t)try{i(!0);const D=[],{data:z}=await Ee.from("configuracoes_sistema").select("chave, valor").like("chave","pontos_%"),F={};z==null||z.forEach(he=>{F[he.chave]=parseInt(he.valor)});const{data:q}=await Ee.from("missoes_usuarios").select("data_conclusao, missoes (titulo, pontos)").eq("id_usuario",t.id).order("data_conclusao",{ascending:!1});q==null||q.forEach(he=>{if(he.data_conclusao){const _e=he.missoes;D.push({date:he.data_conclusao,type:"missao",points:F.pontos_missao_completa??0,description:"Misso Concluda",details:(_e==null?void 0:_e.titulo)||"Misso"})}});const{data:Q}=await Ee.from("notas_fiscais").select("data_envio, numero_nota").eq("id_usuario",t.id).eq("status_validacao","validada").order("data_envio",{ascending:!1}),re=F.pontos_nota_fiscal_validada??0;Q==null||Q.forEach(he=>{he.data_envio&&D.push({date:he.data_envio,type:"nota_fiscal",points:re,description:"Nota Fiscal Validada",details:he.numero_nota?`NF ${he.numero_nota}`:void 0})});const{data:Z}=await Ee.from("materiais_reciclaveis_usuario").select("data_cadastro, descricao, origem_cadastro").eq("id_usuario",t.id).order("data_cadastro",{ascending:!1}),se=F.pontos_material_cadastro_nota??0,K=F.pontos_material_cadastro_manual??0;Z==null||Z.forEach(he=>{if(he.data_cadastro){const _e=he.origem_cadastro==="nota_fiscal"?se:K;D.push({date:he.data_cadastro,type:"material_cadastro",points:_e,description:he.origem_cadastro==="nota_fiscal"?"Material (NF)":"Material (Manual)",details:he.descricao})}});const{data:X}=await Ee.from("entregas_reciclaveis").select("data_validacao, peso_validado, tipo_material").eq("id_usuario",t.id).eq("status","validada").order("data_validacao",{ascending:!1}),Y=F.pontos_entrega_6kg??10;X==null||X.forEach(he=>{if(he.data_validacao&&he.peso_validado&&he.peso_validado>0){const _e=Math.floor(he.peso_validado/6)*Y;_e>0&&D.push({date:he.data_validacao,type:"entrega_validada",points:_e,description:"Entrega Validada",details:`${he.peso_validado.toFixed(2)}kg - ${he.tipo_material}`})}});const{data:oe}=await Ee.from("cupons_resgates").select("data_resgate, pontos_utilizados, cupons (marketplace, valor_reais)").eq("id_usuario",t.id).order("data_resgate",{ascending:!1});oe==null||oe.forEach(he=>{var _e;he.data_resgate&&D.push({date:he.data_resgate,type:"cupom_resgate",points:-he.pontos_utilizados,description:"Cupom Resgatado",details:`${(_e=he.cupons)==null?void 0:_e.marketplace}`})});const{data:xe}=await Ee.from("indicacoes").select("data_indicacao, pontos_cadastro_concedidos, pontos_primeira_missao_concedidos, profiles!indicacoes_id_indicado_fkey (nome)").eq("id_indicador",t.id).order("data_indicacao",{ascending:!1}),H=F.pontos_indicacao_cadastro??0,J=F.pontos_indicacao_primeira_missao??0;xe==null||xe.forEach(he=>{var _e,ue,je,ye;he.data_indicacao&&he.pontos_cadastro_concedidos&&D.push({date:he.data_indicacao,type:"indicacao_cadastro",points:H,description:"Indicao",details:`${(ue=(_e=he.profiles)==null?void 0:_e.nome)==null?void 0:ue.split(" ")[0]} se cadastrou`}),he.pontos_primeira_missao_concedidos&&D.push({date:he.data_indicacao,type:"indicacao_primeira_missao",points:J,description:"Bnus Indicao",details:`${(ye=(je=he.profiles)==null?void 0:je.nome)==null?void 0:ye.split(" ")[0]} completou misso`})}),D.sort((he,_e)=>new Date(_e.date).getTime()-new Date(he.date).getTime()),r(D);const ie=D.reduce((he,_e)=>he+_e.points,0),ce=D.filter(he=>he.points>0).reduce((he,_e)=>he+_e.points,0),me=D.filter(he=>he.points<0).reduce((he,_e)=>he+Math.abs(_e.points),0);o(ie),c(ce),d(me)}catch(D){console.error("Erro ao carregar extrato:",D),cr.error("Erro ao carregar extrato de pontos")}finally{i(!1)}},y=D=>{const z="h-4 w-4";switch(D){case"missao":return a.jsx(_m,{className:z});case"nota_fiscal":return a.jsx(Ql,{className:z});case"material_cadastro":return a.jsx(Yn,{className:z});case"entrega_validada":return a.jsx(Gp,{className:z});case"cupom_resgate":return a.jsx(Hu,{className:z});case"indicacao_cadastro":case"indicacao_primeira_missao":return a.jsx(pV,{className:z});default:return a.jsx($b,{className:z})}},w=(D,z)=>{if(z<0)return"bg-rose-500/15 text-rose-600 dark:text-rose-400";switch(D){case"missao":return"bg-amber-500/15 text-amber-600 dark:text-amber-400";case"nota_fiscal":return"bg-blue-500/15 text-blue-600 dark:text-blue-400";case"material_cadastro":return"bg-violet-500/15 text-violet-600 dark:text-violet-400";case"entrega_validada":return"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400";case"cupom_resgate":return"bg-rose-500/15 text-rose-600 dark:text-rose-400";case"indicacao_cadastro":case"indicacao_primeira_missao":return"bg-cyan-500/15 text-cyan-600 dark:text-cyan-400";default:return"bg-muted text-muted-foreground"}},S=D=>{const z=new Date(D);return Bbe(z)?"Hoje":$be(z)?"Ontem":Mi(z,"dd 'de' MMMM",{locale:Wi})},E=h!=null&&h.from?e.filter(D=>{const z=new Date(D.date),F=W_(h.from),q=h.to?$q(h.to):$q(h.from);return QXe(z,{start:F,end:q})}):e,j=E.filter(D=>D.points>0).reduce((D,z)=>D+z.points,0),T=E.filter(D=>D.points<0).reduce((D,z)=>D+Math.abs(z.points),0),I=(()=>{const D={};return E.forEach(z=>{const F=Mi(new Date(z.date),"yyyy-MM-dd");D[F]||(D[F]=[]),D[F].push(z)}),Object.entries(D).map(([z,F])=>({label:S(z),transactions:F}))})(),M=()=>{f(void 0),x(!1)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-muted/30 to-background",children:[a.jsx(Ab,{showBackButton:!0,backTo:"/user",title:"Extrato de Pontos"}),a.jsxs(Ke.div,{className:"relative overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary via-primary/90 to-emerald-600"}),a.jsxs("div",{className:"absolute inset-0 opacity-30",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-emerald-400/20 rounded-full blur-2xl transform -translate-x-1/2 translate-y-1/2"})]}),a.jsx("div",{className:"relative mx-auto max-w-lg px-4 pt-4 pb-6",children:a.jsxs(Ke.div,{className:"bg-white/10 backdrop-blur-md rounded-3xl p-5 border border-white/20",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,type:"spring",stiffness:200},children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 mb-3",children:[a.jsx(ps,{className:"h-4 w-4 text-emerald-300"}),a.jsx("span",{className:"text-xs font-medium text-white/90",children:"Saldo Disponvel"})]}),a.jsx(Ke.p,{className:"text-5xl font-bold text-white tracking-tight",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,type:"spring"},children:As(s,0)}),a.jsx("p",{className:"text-sm text-white/60 mt-1",children:"pontos verdes"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs(Ke.div,{className:"bg-emerald-400/20 rounded-2xl p-3",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400},children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-400/30 flex items-center justify-center",children:a.jsx(Hs,{className:"h-3.5 w-3.5 text-emerald-300"})}),a.jsx("span",{className:"text-[11px] font-medium text-white/80",children:"Ganhos"})]}),a.jsxs("p",{className:"text-xl font-bold text-white",children:["+",As(h!=null&&h.from?j:l,0)]})]}),a.jsxs(Ke.div,{className:"bg-rose-400/20 rounded-2xl p-3",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400},children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-rose-400/30 flex items-center justify-center",children:a.jsx(BX,{className:"h-3.5 w-3.5 text-rose-300"})}),a.jsx("span",{className:"text-[11px] font-medium text-white/80",children:"Resgatados"})]}),a.jsxs("p",{className:"text-xl font-bold text-white",children:["-",As(h!=null&&h.from?T:u,0)]})]})]})]})})]}),a.jsx("div",{className:"mx-auto max-w-lg px-4 -mt-2",children:a.jsxs("div",{className:"bg-card rounded-t-3xl shadow-xl border border-border/50 min-h-[50vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border/50",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gl,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"Histrico"}),a.jsxs(Bt,{variant:"secondary",className:"text-[10px] h-5",children:[E.length," ",E.length===1?"transao":"transaes"]})]}),a.jsxs(ng,{open:m,onOpenChange:x,children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:h!=null&&h.from?"default":"outline",size:"sm",className:Ut("h-8 gap-2 text-xs rounded-xl",(h==null?void 0:h.from)&&"bg-primary text-primary-foreground"),children:[a.jsx(LC,{className:"h-3.5 w-3.5"}),h!=null&&h.from?a.jsxs(a.Fragment,{children:[Mi(h.from,"dd/MM",{locale:Wi}),h.to&&` - ${Mi(h.to,"dd/MM",{locale:Wi})}`]}):"Filtrar"]})}),a.jsxs(Rp,{className:"w-auto p-0",align:"end",children:[a.jsx("div",{className:"p-3 border-b border-border",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Perodo"}),(h==null?void 0:h.from)&&a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:M,className:"h-7 text-xs text-muted-foreground hover:text-foreground",children:[a.jsx(Xa,{className:"h-3 w-3 mr-1"}),"Limpar"]})]})}),a.jsx(px,{initialFocus:!0,mode:"range",defaultMonth:h==null?void 0:h.from,selected:h,onSelect:f,numberOfMonths:1,locale:Wi,className:"pointer-events-auto"})]})]})]}),a.jsx(Cf,{children:(h==null?void 0:h.from)&&a.jsx(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-primary/10 rounded-xl text-xs",children:[a.jsx(Gl,{className:"h-3.5 w-3.5 text-primary"}),a.jsxs("span",{className:"text-foreground",children:["Exibindo: ",Mi(h.from,"dd 'de' MMMM",{locale:Wi}),h.to&&h.to!==h.from&&a.jsxs(a.Fragment,{children:[" at ",Mi(h.to,"dd 'de' MMMM",{locale:Wi})]})]}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:M,className:"h-5 w-5 p-0 ml-auto hover:bg-primary/20",children:a.jsx(Xa,{className:"h-3 w-3"})})]})})})]}),a.jsx("div",{className:"p-4",children:n?a.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(D=>a.jsx("div",{className:"h-16 bg-muted/50 rounded-2xl animate-pulse"},D))}):E.length===0?a.jsxs(Ke.div,{className:"text-center py-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-muted/50 flex items-center justify-center",children:a.jsx(ps,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("p",{className:"text-sm font-medium text-foreground",children:h!=null&&h.from?"Nenhuma transao no perodo":"Nenhuma transao"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h!=null&&h.from?"Tente selecionar outro perodo":"Complete misses e entregue reciclveis para ganhar pontos!"}),(h==null?void 0:h.from)&&a.jsx(Oe,{variant:"outline",size:"sm",onClick:M,className:"mt-4",children:"Limpar filtro"})]}):a.jsx(Cf,{children:I.map((D,z)=>a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:z*.05},className:"mb-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[a.jsx("span",{className:"text-[11px] font-semibold text-muted-foreground uppercase tracking-wider",children:D.label}),a.jsx("div",{className:"flex-1 h-px bg-border/50"})]}),a.jsx("div",{className:"space-y-2",children:D.transactions.map((F,q)=>a.jsxs(Ke.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:q*.02},className:"flex items-center gap-3 p-3 rounded-2xl bg-muted/30 hover:bg-muted/50 transition-all duration-200 border border-transparent hover:border-border/50",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${w(F.type,F.points)}`,children:y(F.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:F.description}),a.jsx("p",{className:"text-[11px] text-muted-foreground truncate",children:F.details||Mi(new Date(F.date),"HH:mm",{locale:Wi})})]}),a.jsxs("div",{className:`text-right flex-shrink-0 ${F.points>0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:[a.jsxs("p",{className:"text-sm font-bold",children:[F.points>0?"+":"",F.points]}),a.jsx("p",{className:"text-[10px] opacity-60",children:"pts"})]})]},`${F.date}-${q}`))})]},D.label))})})]})})]})},CBt={"Misses Educativas":{path:"/missions",label:"Iniciar Misso"},"Notas Fiscais":{path:"/upload-receipt",label:"Enviar Nota"},"Entregas de Reciclveis":{path:"/select-materials",label:"Agendar Entrega"},Indicaes:{path:"/profile",label:"Convidar Amigos"}};function TBt({icon:t}){return t===""?a.jsx(Ke.div,{className:"text-3xl",animate:{rotateY:[0,360]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:t}):t===""?a.jsx(Ke.div,{className:"text-3xl",animate:{scale:[1,1.2,1],rotate:[0,-10,10,0]},transition:{duration:1.5,repeat:1/0,repeatDelay:2},children:t}):t===""?a.jsx(Ke.div,{className:"text-3xl",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:t}):t===""?a.jsx(Ke.div,{className:"text-3xl",animate:{x:[0,-5,5,0],scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,repeatDelay:2},children:t}):a.jsx(Ke.div,{className:"text-3xl",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0,repeatDelay:2},children:t})}function c1({title:t,icon:e,color:r,semanal:n,mensal:i,delay:s=0,actionPath:o,actionLabel:l}){const c=nn(),u=n.progresso>=100,d=i.progresso>=100,h=u&&d,f=CBt[t]||{path:o||"/user",label:l||"Ir"};return a.jsxs(Ke.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:s*.1,type:"spring",stiffness:100},whileHover:{scale:1.02,y:-2},className:Ut("relative p-4 rounded-2xl border overflow-hidden",h?"bg-gradient-to-br from-success/10 via-success/5 to-card border-success/30":"bg-card border-border hover:border-primary/30 hover:shadow-md"),children:[a.jsx(Ke.div,{className:"absolute -right-8 -top-8 w-24 h-24 rounded-full opacity-10",style:{background:h?"hsl(var(--success))":"hsl(var(--primary))"},animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:10,repeat:1/0}}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(TBt,{icon:e}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-foreground",children:t}),h&&a.jsxs(Ke.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-1 mt-0.5",children:[a.jsx($b,{className:"h-3 w-3 text-success"}),a.jsx("span",{className:"text-[10px] text-success font-medium",children:"Metas concludas!"})]})]})]}),a.jsx(Ke.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:s*.1+.2},whileHover:{scale:1.1},whileTap:{scale:.95},children:a.jsxs(Oe,{size:"sm",variant:h?"outline":"default",className:Ut("rounded-full h-8 px-3 text-xs shadow-sm",h?"border-success text-success hover:bg-success/10":"bg-primary hover:bg-primary/90"),onClick:()=>c(f.path),children:[f.label,a.jsx(_f,{className:"h-3 w-3 ml-1"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground font-medium",children:"Meta Semanal"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ke.span,{className:"font-bold text-foreground",initial:{scale:1.5,color:"hsl(var(--primary))"},animate:{scale:1,color:"hsl(var(--foreground))"},children:[n.atual,"/",n.meta]},n.atual),u&&a.jsx(Ke.span,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500},className:"text-success text-sm",children:""})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(fc,{value:n.progresso,className:Ut("h-2.5 rounded-full",u&&"[&>div]:bg-success")}),n.progresso>=70&&n.progresso<100&&a.jsx(Ke.div,{className:"absolute right-1 top-1/2 -translate-y-1/2 text-sm",animate:{scale:[1,1.3,1],rotate:[0,-10,10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:1},children:""}),u&&a.jsx(Ke.div,{className:"absolute right-1 top-1/2 -translate-y-1/2",initial:{scale:0},animate:{scale:[0,1.5,1]},transition:{type:"spring"},children:""})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground font-medium",children:"Meta Mensal"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ke.span,{className:"font-bold text-foreground",initial:{scale:1.5,color:"hsl(var(--primary))"},animate:{scale:1,color:"hsl(var(--foreground))"},children:[i.atual,"/",i.meta]},i.atual),d&&a.jsx(Ke.span,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500},className:"text-success text-sm",children:""})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(fc,{value:i.progresso,className:Ut("h-2.5 rounded-full",d&&"[&>div]:bg-success")}),i.progresso>=70&&i.progresso<100&&a.jsx(Ke.div,{className:"absolute right-1 top-1/2 -translate-y-1/2 text-sm",animate:{y:[0,-3,0],scale:[1,1.2,1]},transition:{duration:.8,repeat:1/0},children:""}),d&&a.jsx(Ke.div,{className:"absolute right-1 top-1/2 -translate-y-1/2",initial:{scale:0},animate:{scale:[0,1.5,1]},transition:{type:"spring"},children:""})]})]})]}),h&&a.jsx(Ke.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},children:[...Array(5)].map((m,x)=>a.jsx(Ke.div,{className:"absolute w-2 h-2 rounded-full bg-success/30",style:{left:`${20+x*15}%`,top:`${30+x%3*20}%`},animate:{y:[0,-10,0],opacity:[.3,.6,.3],scale:[1,1.5,1]},transition:{duration:2,repeat:1/0,delay:x*.3}},x))})]})}const xfe=["hsl(var(--primary))","hsl(var(--success))","hsl(var(--warning))","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"];function PBt({trigger:t,onComplete:e}){const[r,n]=C.useState([]),[i,s]=C.useState(!1);return C.useEffect(()=>{if(t){const o=Array.from({length:50},(c,u)=>({id:u,x:Math.random()*100,delay:Math.random()*.5,duration:2+Math.random()*2,color:xfe[Math.floor(Math.random()*xfe.length)],rotation:Math.random()*360,size:8+Math.random()*8}));n(o),s(!0);const l=setTimeout(()=>{n([]),s(!1),e==null||e()},4e3);return()=>clearTimeout(l)}},[t,e]),a.jsx(Cf,{children:i&&a.jsxs(a.Fragment,{children:[a.jsx(Ke.div,{className:"fixed inset-0 flex items-center justify-center pointer-events-none z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(Ke.div,{className:"text-6xl",initial:{scale:0,rotate:-180},animate:{scale:[0,1.5,1],rotate:[180,0]},transition:{duration:.5,ease:"backOut"},children:""})}),a.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-50",children:r.map(o=>a.jsx(Ke.div,{className:"absolute top-0",style:{left:`${o.x}%`,width:o.size,height:o.size,backgroundColor:o.color,borderRadius:Math.random()>.5?"50%":"2px"},initial:{y:-20,x:0,rotate:0,opacity:1},animate:{y:window.innerHeight+100,x:(Math.random()-.5)*200,rotate:o.rotation+720,opacity:[1,1,0]},transition:{duration:o.duration,delay:o.delay,ease:"easeIn"}},o.id))}),a.jsx(Ke.div,{className:"fixed inset-0 pointer-events-none z-40",initial:{opacity:0},animate:{opacity:[0,.3,0]},transition:{duration:.8},style:{background:"radial-gradient(circle at center, hsl(var(--primary) / 0.2) 0%, transparent 70%)"}})]})})}const WD=[{emoji:"",text:"Complete misses educativas para aprender sobre reciclagem e ganhar pontos extras!"},{emoji:"",text:"Escaneie suas notas fiscais para catalogar embalagens e contribuir com o meio ambiente."},{emoji:"",text:"Separe seus reciclveis por tipo para facilitar a triagem nas cooperativas."},{emoji:"",text:"Indique amigos para o Ciclik! Vocs dois ganham pontos quando eles completam a primeira misso."},{emoji:"",text:"Acompanhe suas metas semanais e mensais para subir de nvel mais rpido!"},{emoji:"",text:"Cada kg de material reciclado evita emisso de CO na atmosfera."},{emoji:"",text:"Quanto mais alto seu nvel, mais benefcios e recompensas voc desbloqueia!"},{emoji:"",text:"Embalagens limpas e secas tm maior valor de reciclagem."},{emoji:"",text:"Sua contribuio ajuda a construir um futuro mais sustentvel para todos."},{emoji:"",text:"Troque seus pontos por cupons de desconto em lojas parceiras!"}];function kBt(){const[t,e]=C.useState(()=>new Date().getMonth()%WD.length);C.useEffect(()=>{const n=setInterval(()=>{e(i=>(i+1)%WD.length)},8e3);return()=>clearInterval(n)},[]);const r=WD[t];return a.jsx(it,{className:"rounded-2xl border-0 shadow-sm bg-gradient-to-br from-warning/5 to-card overflow-hidden",children:a.jsx(ht,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ke.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1,rotate:[0,10,-10,0]},transition:{duration:.5},className:"text-2xl flex-shrink-0",children:r.emoji},t),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Dica do Ciclo"}),a.jsx("div",{className:"flex gap-1",children:WD.map((n,i)=>a.jsx(Ke.div,{className:`w-1.5 h-1.5 rounded-full ${i===t?"bg-primary":"bg-muted"}`,animate:i===t?{scale:[1,1.3,1]}:{},transition:{duration:.5}},i))})]}),a.jsx(Cf,{mode:"wait",children:a.jsx(Ke.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"text-xs text-muted-foreground leading-relaxed",children:r.text},t)})]})]})})})}const ST={initial:{opacity:0,y:20},animate:{opacity:1,y:0}};function OBt(){const t=nn(),{profile:e}=Si(),r=INe(),[n,i]=C.useState(!1),[s,o]=C.useState(!1),l=h=>{switch(h){case"Iniciante":return"Embaixador Ciclik";case"Ativo":return"Protetor Ciclik";case"Guardiao Verde":return"Guardio Ciclik";default:return h}},c=h=>{switch(h){case"Iniciante":return"";case"Ativo":return"";case"Guardiao Verde":return"";default:return""}};C.useEffect(()=>{!s&&!r.loading&&r.missoes.progressoSemanal>=100&&r.notas.progressoSemanal>=100&&r.entregas.progressoSemanal>=100&&r.indicacoes.progressoSemanal>=100&&(i(!0),o(!0))},[r,s]);const u=[r.missoes.progressoSemanal>=100,r.notas.progressoSemanal>=100,r.entregas.progressoSemanal>=100,r.indicacoes.progressoSemanal>=100].filter(Boolean).length,d=[r.missoes.progressoMensal>=100,r.notas.progressoMensal>=100,r.entregas.progressoMensal>=100,r.indicacoes.progressoMensal>=100].filter(Boolean).length;return a.jsxs($v,{children:[a.jsx(PBt,{trigger:n,onComplete:()=>i(!1)}),a.jsxs("div",{className:"min-h-screen bg-background pb-6",children:[a.jsx("div",{className:"bg-white border-b border-border sticky top-0 z-40 shadow-sm",children:a.jsx("div",{className:"mx-auto max-w-lg px-4 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Oe,{variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>t("/user"),children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h1",{className:"text-lg font-bold text-foreground flex items-center gap-2",children:[a.jsx(Dm,{className:"h-5 w-5 text-primary"}),"Suas Metas"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Acompanhe seu progresso semanal e mensal"})]})]})})}),a.jsxs("div",{className:"mx-auto max-w-lg px-4 pt-4 space-y-4",children:[a.jsx(Ke.div,{...ST,transition:{delay:.1},children:a.jsx(it,{className:"rounded-2xl border-0 shadow-lg overflow-hidden bg-gradient-to-br from-card via-card to-primary/5",children:a.jsxs(ht,{className:"p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ke.div,{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-primary to-success flex items-center justify-center shadow-lg",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:a.jsx("span",{className:"text-3xl",children:c((e==null?void 0:e.nivel)||"Iniciante")})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seu nvel"}),a.jsx("p",{className:"font-bold text-lg text-foreground",children:l((e==null?void 0:e.nivel)||"Iniciante")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-2xl font-bold text-primary",children:r.pontosMes}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"pts este ms"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[a.jsx(Hs,{className:"h-3 w-3"}),"Prximo: ",r.proximoNivel]}),a.jsx("span",{className:"font-medium text-primary",children:r.pontosParaProximoNivel>0?`Faltam ${r.pontosParaProximoNivel} pts`:" Nvel mximo!"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(fc,{value:r.progressoNivel,className:"h-3 rounded-full"}),r.progressoNivel>=90&&r.pontosParaProximoNivel>0&&a.jsx(Ke.div,{className:"absolute right-1 top-1/2 -translate-y-1/2",animate:{scale:[1,1.3,1],rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},children:a.jsx(KO,{className:"h-4 w-4 text-warning"})})]})]})]})})}),a.jsx(Ke.div,{...ST,transition:{delay:.2},children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(it,{className:"rounded-2xl border-0 shadow-sm bg-gradient-to-br from-primary/5 to-card",children:a.jsxs(ht,{className:"p-4 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(Gl,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Esta Semana"})]}),a.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[u,"/4"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[r.diasRestantesSemana," dias restantes"]})]})}),a.jsx(it,{className:"rounded-2xl border-0 shadow-sm bg-gradient-to-br from-success/5 to-card",children:a.jsxs(ht,{className:"p-4 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(qu,{className:"h-4 w-4 text-success"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Este Ms"})]}),a.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[d,"/4"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[r.diasRestantesMes," dias restantes"]})]})})]})}),a.jsx(Ke.div,{...ST,transition:{delay:.3},children:a.jsxs(yc,{defaultValue:"semanal",className:"w-full",children:[a.jsxs(Jl,{className:"w-full rounded-2xl p-1 bg-muted/50",children:[a.jsx(ri,{value:"semanal",className:"flex-1 rounded-xl data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Semanal"}),a.jsx(ri,{value:"mensal",className:"flex-1 rounded-xl data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Mensal"})]}),a.jsxs(Ti,{value:"semanal",className:"mt-4 space-y-3",children:[a.jsx(c1,{title:"Misses Educativas",icon:"",color:"amber",semanal:{atual:Math.round(r.missoes.progressoSemanal*r.missoes.metaSemanal/100),meta:r.missoes.metaSemanal,progresso:r.missoes.progressoSemanal},mensal:{atual:r.missoes.atual,meta:r.missoes.metaMensal,progresso:r.missoes.progressoMensal},delay:0}),a.jsx(c1,{title:"Notas Fiscais",icon:"",color:"blue",semanal:{atual:Math.round(r.notas.progressoSemanal*r.notas.metaSemanal/100),meta:r.notas.metaSemanal,progresso:r.notas.progressoSemanal},mensal:{atual:r.notas.atual,meta:r.notas.metaMensal,progresso:r.notas.progressoMensal},delay:1}),a.jsx(c1,{title:"Entregas de Reciclveis",icon:"",color:"green",semanal:{atual:Math.round(r.entregas.progressoSemanal*r.entregas.metaSemanal/100),meta:r.entregas.metaSemanal,progresso:r.entregas.progressoSemanal},mensal:{atual:r.entregas.atual,meta:r.entregas.metaMensal,progresso:r.entregas.progressoMensal},delay:2}),a.jsx(c1,{title:"Indicaes",icon:"",color:"purple",semanal:{atual:Math.round(r.indicacoes.progressoSemanal*r.indicacoes.metaSemanal/100),meta:r.indicacoes.metaSemanal,progresso:r.indicacoes.progressoSemanal},mensal:{atual:r.indicacoes.atual,meta:r.indicacoes.metaMensal,progresso:r.indicacoes.progressoMensal},delay:3})]}),a.jsxs(Ti,{value:"mensal",className:"mt-4 space-y-3",children:[a.jsx(c1,{title:"Misses Educativas",icon:"",color:"amber",semanal:{atual:Math.round(r.missoes.progressoSemanal*r.missoes.metaSemanal/100),meta:r.missoes.metaSemanal,progresso:r.missoes.progressoSemanal},mensal:{atual:r.missoes.atual,meta:r.missoes.metaMensal,progresso:r.missoes.progressoMensal},delay:0}),a.jsx(c1,{title:"Notas Fiscais",icon:"",color:"blue",semanal:{atual:Math.round(r.notas.progressoSemanal*r.notas.metaSemanal/100),meta:r.notas.metaSemanal,progresso:r.notas.progressoSemanal},mensal:{atual:r.notas.atual,meta:r.notas.metaMensal,progresso:r.notas.progressoMensal},delay:1}),a.jsx(c1,{title:"Entregas de Reciclveis",icon:"",color:"green",semanal:{atual:Math.round(r.entregas.progressoSemanal*r.entregas.metaSemanal/100),meta:r.entregas.metaSemanal,progresso:r.entregas.progressoSemanal},mensal:{atual:r.entregas.atual,meta:r.entregas.metaMensal,progresso:r.entregas.progressoMensal},delay:2}),a.jsx(c1,{title:"Indicaes",icon:"",color:"purple",semanal:{atual:Math.round(r.indicacoes.progressoSemanal*r.indicacoes.metaSemanal/100),meta:r.indicacoes.metaSemanal,progresso:r.indicacoes.progressoSemanal},mensal:{atual:r.indicacoes.atual,meta:r.indicacoes.metaMensal,progresso:r.indicacoes.progressoMensal},delay:3})]})]})}),a.jsx(Ke.div,{...ST,transition:{delay:.4},children:a.jsx(kBt,{})}),r.metaEmRisco&&a.jsx(Ke.div,{...ST,transition:{delay:.5},children:a.jsxs(Oe,{className:"w-full rounded-2xl h-12 bg-gradient-to-r from-primary to-success hover:opacity-90",onClick:()=>{r.metaEmRisco==="misses"?t("/missions"):r.metaEmRisco==="notas fiscais"?t("/upload-receipt"):r.metaEmRisco==="entregas"?t("/select-materials"):t("/profile")},children:[a.jsx($b,{className:"h-4 w-4 mr-2"}),"Completar meta de ",r.metaEmRisco,a.jsx(_f,{className:"h-4 w-4 ml-2"})]})})]})]})]})}const IBt=()=>{const t=nn(),e=[{icon:a.jsx(ps,{className:"w-8 h-8 text-primary"}),title:"1.000 kg de Resduos",description:"Reciclagem certificada de materiais com rastreabilidade completa"},{icon:a.jsx(ah,{className:"w-8 h-8 text-secondary"}),title:"1.200 Horas de Educao",description:"Contedo ambiental distribudo para 30 pessoas (40h cada)"},{icon:a.jsx(Yn,{className:"w-8 h-8 text-accent"}),title:"18 Embalagens Catalogadas",description:"Anlise tcnica de reciclabilidade e impacto ambiental"}],r=[{step:"Adquira sua quota CDV por R$ 2.000",detail:"Investimento nico com retorno garantido em impacto ambiental"},{step:"Acompanhe mensalmente o progresso dos impactos",detail:"Dashboard exclusivo com mtricas em tempo real"},{step:"Aguarde o perodo de maturao de 12 meses",detail:"Enquanto isso, seu investimento gera impacto contnuo"},{step:"Receba certificado digital com QR code de validao",detail:"Certificao blockchain auditvel e transparente"}],n=[{icon:Wp,text:"100% Auditvel"},{icon:zu,text:"Blockchain Verificado"},{icon:Hs,text:"Impacto Mensurvel"},{icon:ev,text:"Certificao Digital"}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-primary/5 to-secondary/10 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(12)].map((i,s)=>a.jsx(Ke.div,{className:"absolute",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-20,0],rotate:[0,360],opacity:[.1,.3,.1]},transition:{duration:5+Math.random()*3,repeat:1/0,delay:Math.random()*2},children:a.jsx(ps,{className:"w-6 h-6 text-primary/20"})},s))}),a.jsxs("div",{className:"container mx-auto px-4 py-16 relative z-10",children:[a.jsxs(Ke.div,{className:"text-center max-w-4xl mx-auto mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsxs(Bt,{className:"mb-6 text-base px-4 py-2",children:[a.jsx(ps,{className:"w-4 h-4 mr-2"}),"Certificado Digital Verde"]}),a.jsx("h1",{className:"text-4xl md:text-6xl font-display font-bold mb-6 bg-gradient-to-r from-primary via-primary/80 to-accent bg-clip-text text-transparent",children:"Invista no Futuro Sustentvel"}),a.jsxs("p",{className:"text-xl md:text-2xl text-muted-foreground mb-8 leading-relaxed",children:["O CDV  um produto de investimento ambiental que garante a entrega de",a.jsx("span",{className:"font-bold text-foreground",children:" impactos concretos e mensurveis "}),"em 12 meses."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-8 p-6 bg-card/80 backdrop-blur rounded-2xl border-2 border-primary/20 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-5xl font-display font-bold text-primary mb-1",children:"R$ 2.000"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"por quota CDV"})]}),a.jsx("div",{className:"h-12 w-px bg-border hidden sm:block"}),a.jsx("div",{className:"h-px w-12 bg-border sm:hidden"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-5xl font-display font-bold text-primary mb-1",children:"12 meses"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"perodo de maturao"})]})]}),a.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:n.map((i,s)=>a.jsxs(Ke.div,{className:"flex items-center gap-2 px-4 py-2 bg-card/80 backdrop-blur rounded-full border shadow-sm",whileHover:{scale:1.05},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s},children:[a.jsx(i.icon,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"font-medium text-sm",children:i.text})]},s))}),a.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:a.jsxs(Oe,{size:"lg",onClick:()=>t("/auth"),className:"gap-2 text-lg px-8 shadow-lg",children:["Comear Agora ",a.jsx(Lu,{className:"w-5 h-5"})]})})]}),a.jsx(Ke.div,{className:"grid md:grid-cols-3 gap-8 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:e.map((i,s)=>a.jsx(Ke.div,{whileHover:{scale:1.03,y:-5},transition:{duration:.2},children:a.jsx(it,{className:"border-2 hover:border-primary/50 transition-all h-full shadow-lg",children:a.jsxs(ht,{className:"p-8 text-center",children:[a.jsx("div",{className:"flex justify-center mb-6",children:i.icon}),a.jsx("h3",{className:"text-xl font-display font-bold mb-3",children:i.title}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i.description})]})})},s))}),a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:a.jsx(it,{className:"max-w-4xl mx-auto mb-16 shadow-2xl border-2",children:a.jsxs(ht,{className:"p-8 md:p-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold text-center mb-10",children:"Como Funciona"}),a.jsx("div",{className:"space-y-6",children:r.map((i,s)=>a.jsxs(Ke.div,{className:"flex items-start gap-4 p-4 rounded-xl hover:bg-muted/50 transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+s*.1},children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-bold text-lg",children:s+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-lg font-semibold mb-1",children:i.step}),a.jsx("p",{className:"text-muted-foreground text-sm",children:i.detail})]}),a.jsx(au,{className:"w-6 h-6 text-primary flex-shrink-0 mt-1"})]},s))})]})})}),a.jsx(Ke.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:a.jsx(it,{className:"max-w-3xl mx-auto bg-gradient-to-br from-primary/10 via-primary/5 to-accent/10 border-2 border-primary/20 shadow-2xl",children:a.jsxs(ht,{className:"p-8 md:p-12",children:[a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{delay:1,type:"spring"},children:a.jsx(yl,{className:"w-20 h-20 text-primary mx-auto mb-6"})}),a.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-4",children:"Pronto para Investir?"}),a.jsx("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto leading-relaxed",children:"Junte-se s empresas que j esto transformando o impacto ambiental em valor mensurvel e certificado."}),a.jsxs(Oe,{size:"lg",onClick:()=>t("/auth"),className:"gap-2 text-lg px-8 shadow-lg",children:["Acessar Plataforma ",a.jsx(Lu,{className:"w-5 h-5"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-6",children:["Tem dvidas? "," ",a.jsx("button",{onClick:()=>t("/investidor"),className:"text-primary hover:underline font-semibold",children:"Veja a apresentao completa para investidores"})]})]})})})]})]})},RBt=({delay:t,duration:e,x:r,y:n,size:i})=>a.jsx(Ke.div,{className:"absolute rounded-full",style:{left:`${r}%`,top:`${n}%`,width:i,height:i,background:"linear-gradient(135deg, hsl(76, 72%, 44%, 0.15), hsl(76, 72%, 44%, 0.05))"},animate:{y:[0,-20,0],x:[0,10,0],opacity:[.3,.6,.3],scale:[1,1.1,1],rotate:[0,15,0]},transition:{duration:e,delay:t,repeat:1/0,ease:"easeInOut"}});function DBt({onCtaClick:t}){const e=Array.from({length:15},(r,n)=>({id:n,delay:Math.random()*3,duration:4+Math.random()*3,x:Math.random()*100,y:Math.random()*100,size:8+Math.random()*24}));return a.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-white",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("svg",{className:"absolute -top-20 -left-20 w-96 h-96 text-primary/5",viewBox:"0 0 200 200",children:a.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"currentColor"})}),a.jsx("svg",{className:"absolute -bottom-32 -right-32 w-[500px] h-[500px] text-accent/5",viewBox:"0 0 200 200",children:a.jsx("circle",{cx:"100",cy:"100",r:"90",fill:"currentColor"})}),e.map(r=>a.jsx(RBt,{...r},r.id))]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/[0.03] via-transparent to-accent/[0.02]"}),a.jsx("div",{className:"relative z-10 container mx-auto px-4 py-24 pt-32 text-center",children:a.jsxs(Ke.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[a.jsx(Ke.div,{className:"flex justify-center mb-6",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.8,delay:.2,type:"spring"},children:a.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-primary/80 flex items-center justify-center shadow-lg",children:a.jsx(Cs,{className:"w-10 h-10 text-white"})})}),a.jsx(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:a.jsxs(Bt,{className:"mb-6 bg-primary/10 text-primary border-primary/20 px-5 py-2.5 text-sm font-display rounded-full",children:[a.jsx(Wp,{className:"w-4 h-4 mr-2"}),"Impactos 100% Auditveis com QR Code"]})}),a.jsxs(Ke.h1,{className:"font-display text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6 leading-tight tracking-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},children:["Sua Marca Associada a",a.jsx("br",{}),a.jsx("span",{className:"text-primary",children:"Impactos Ambientais Reais"})]}),a.jsxs(Ke.p,{className:"font-body text-lg md:text-xl text-muted-foreground mb-10 max-w-2xl mx-auto leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:["Invista em Certificados ",a.jsx("strong",{className:"text-primary",children:"Ciclik - Digital Verde"})," e receba impactos ambientais rastreveis e auditveis. Cada quota gera impacto real."]})]})})]})}var p0="Accordion",MBt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[xee,LBt,FBt]=IC(p0),[XB,b$t]=qo(p0,[FBt,RNe]),vee=RNe(),U3e=be.forwardRef((t,e)=>{const{type:r,...n}=t,i=n,s=n;return a.jsx(xee.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?a.jsx(zBt,{...s,ref:e}):a.jsx(UBt,{...i,ref:e})})});U3e.displayName=p0;var[z3e,BBt]=XB(p0),[V3e,$Bt]=XB(p0,{collapsible:!1}),UBt=be.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[l,c]=Xu({prop:r,defaultProp:n??"",onChange:i,caller:p0});return a.jsx(z3e,{scope:t.__scopeAccordion,value:be.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:be.useCallback(()=>s&&c(""),[s,c]),children:a.jsx(V3e,{scope:t.__scopeAccordion,collapsible:s,children:a.jsx(q3e,{...o,ref:e})})})}),zBt=be.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...s}=t,[o,l]=Xu({prop:r,defaultProp:n??[],onChange:i,caller:p0}),c=be.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=be.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return a.jsx(z3e,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(V3e,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(q3e,{...s,ref:e})})})}),[VBt,YB]=XB(p0),q3e=be.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:i,orientation:s="vertical",...o}=t,l=be.useRef(null),c=An(l,e),u=LBt(r),h=Vb(i)==="ltr",f=wr(t.onKeyDown,m=>{var M;if(!MBt.includes(m.key))return;const x=m.target,g=u().filter(D=>{var z;return!((z=D.ref.current)!=null&&z.disabled)}),y=g.findIndex(D=>D.ref.current===x),w=g.length;if(y===-1)return;m.preventDefault();let S=y;const E=0,j=w-1,T=()=>{S=y+1,S>j&&(S=E)},O=()=>{S=y-1,S<E&&(S=j)};switch(m.key){case"Home":S=E;break;case"End":S=j;break;case"ArrowRight":s==="horizontal"&&(h?T():O());break;case"ArrowDown":s==="vertical"&&T();break;case"ArrowLeft":s==="horizontal"&&(h?O():T());break;case"ArrowUp":s==="vertical"&&O();break}const I=S%w;(M=g[I].ref.current)==null||M.focus()});return a.jsx(VBt,{scope:r,disabled:n,direction:i,orientation:s,children:a.jsx(xee.Slot,{scope:r,children:a.jsx(Dr.div,{...o,"data-orientation":s,ref:c,onKeyDown:n?void 0:f})})})}),rF="AccordionItem",[qBt,yee]=XB(rF),H3e=be.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...i}=t,s=YB(rF,r),o=BBt(rF,r),l=vee(r),c=bl(),u=n&&o.value.includes(n)||!1,d=s.disabled||t.disabled;return a.jsx(qBt,{scope:r,open:u,disabled:d,triggerId:c,children:a.jsx(LNe,{"data-orientation":s.orientation,"data-state":Z3e(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});H3e.displayName=rF;var W3e="AccordionHeader",G3e=be.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=YB(p0,r),s=yee(W3e,r);return a.jsx(Dr.h3,{"data-orientation":i.orientation,"data-state":Z3e(s.open),"data-disabled":s.disabled?"":void 0,...n,ref:e})});G3e.displayName=W3e;var jK="AccordionTrigger",K3e=be.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=YB(p0,r),s=yee(jK,r),o=$Bt(jK,r),l=vee(r);return a.jsx(xee.ItemSlot,{scope:r,children:a.jsx(G_t,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...l,...n,ref:e})})});K3e.displayName=jK;var X3e="AccordionContent",Y3e=be.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,i=YB(p0,r),s=yee(X3e,r),o=vee(r);return a.jsx(K_t,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Y3e.displayName=X3e;function Z3e(t){return t?"open":"closed"}var HBt=U3e,WBt=H3e,GBt=G3e,Q3e=K3e,J3e=Y3e;const KBt=HBt,ePe=C.forwardRef(({className:t,...e},r)=>a.jsx(WBt,{ref:r,className:Ut("border-b",t),...e}));ePe.displayName="AccordionItem";const tPe=C.forwardRef(({className:t,children:e,...r},n)=>a.jsx(GBt,{className:"flex",children:a.jsxs(Q3e,{ref:n,className:Ut("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,a.jsx(MC,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));tPe.displayName=Q3e.displayName;const rPe=C.forwardRef(({className:t,children:e,...r},n)=>a.jsx(J3e,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:a.jsx("div",{className:Ut("pb-4 pt-0",t),children:e})}));rPe.displayName=J3e.displayName;const XBt=[{question:"Quanto custa uma quota CDV?",answer:"Cada quota CDV custa R$ 2.000. Esse valor garante  sua marca o direito a 250kg de resduos reciclados, 5 minutos de educao ambiental e 1 produto catalogado, todos rastreveis e certificados."},{question:"Qual o prazo para receber os impactos?",answer:"O prazo varia de acordo com o projeto escolhido. A maioria dos projetos tem prazo de maturao de 12 a 24 meses. Durante esse perodo, voc acompanha o progresso em tempo real pelo dashboard exclusivo."},{question:"Como verifico a autenticidade do certificado?",answer:"Cada CDV possui um QR code nico que, ao ser escaneado, direciona para uma pgina pblica de validao. Qualquer pessoa pode verificar os impactos, datas e rastreabilidade completa do certificado."},{question:"Posso investir em mltiplos projetos?",answer:"Sim! Voc pode adquirir quotas em quantos projetos desejar. Isso permite diversificar seus impactos ambientais e apoiar diferentes pblicos-alvo e regies."},{question:"Como uso os impactos para relatrios ESG?",answer:"Oferecemos relatrios formatados especificamente para uso em documentao ESG. Voc pode exportar dados em PDF e Excel, incluindo certificados, rastreabilidade e mtricas detalhadas de impacto."},{question:"O que acontece se o projeto no atingir 100%?",answer:"Trabalhamos com projees baseadas no histrico do ecossistema Ciclik. Em caso de atrasos, voc  notificado e pode acompanhar o progresso em tempo real. Projetos com risco de atraso so sinalizados no dashboard."},{question:'Posso usar o selo "Investidor Ciclik"?',answer:'Sim! Ao adquirir quotas CDV, sua empresa recebe o direito de uso do selo "Investidor Ciclik" em materiais de comunicao, campanhas de marketing e relatrios de sustentabilidade.'},{question:"Como funciona a rastreabilidade?",answer:"Cada unidade de impacto (UIB)  rastrevel at a origem: voc pode ver qual cooperativa recebeu os resduos, qual usurio assistiu ao contedo educativo, e qual produto foi catalogado. Tudo com data, hora e localizao."}];function YBt(){const t=C.useRef(null),e=rZ(t,{once:!0,margin:"-100px"});return a.jsx("section",{className:"py-24 bg-muted/30",ref:t,children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs(Ke.div,{className:"text-center mb-16",initial:{opacity:0,y:20},animate:e?{opacity:1,y:0}:{},transition:{duration:.6},children:[a.jsx("span",{className:"text-primary font-semibold text-sm uppercase tracking-wider",children:"Perguntas Frequentes"}),a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-foreground mt-4 mb-6",children:"Tire Suas Dvidas"}),a.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Encontre respostas para as perguntas mais comuns sobre investimento em CDV e impactos ambientais certificados."})]}),a.jsx(Ke.div,{className:"max-w-3xl mx-auto",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{delay:.3,duration:.6},children:a.jsx(KBt,{type:"single",collapsible:!0,className:"space-y-4",children:XBt.map((r,n)=>a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:e?{opacity:1,y:0}:{},transition:{delay:.2+n*.05,duration:.5},children:a.jsxs(ePe,{value:`item-${n}`,className:"bg-card border border-border rounded-xl px-6 overflow-hidden hover:border-primary/30 transition-colors",children:[a.jsx(tPe,{className:"text-left font-semibold text-foreground hover:text-primary transition-colors py-5 [&[data-state=open]]:text-primary",children:r.question}),a.jsx(rPe,{className:"text-muted-foreground pb-5 leading-relaxed",children:r.answer})]})},n))})}),a.jsx(Ke.div,{className:"mt-16 text-center",initial:{opacity:0},animate:e?{opacity:1}:{},transition:{delay:.8,duration:.6},children:a.jsxs("p",{className:"text-muted-foreground",children:["No encontrou o que procurava?"," ",a.jsx("a",{href:"mailto:contato@ciclik.com.br",className:"text-primary hover:underline font-semibold",children:"Entre em contato conosco"})]})})]})})}function ZBt(){const t=C.useRef(null),e=rZ(t,{once:!0,margin:"-100px"}),[r,n]=C.useState(!1),[i,s]=C.useState(!1),[o,l]=C.useState({nome:"",email:"",empresa:"",telefone:""}),c=async u=>{u.preventDefault(),n(!0);try{const{error:d}=await Ee.from("cdv_leads").insert({nome:o.nome,email:o.email,empresa:o.empresa,telefone:o.telefone||null,origem:"landing_cdv"});if(d)throw d;s(!0),cr.success("Recebemos seu interesse! Entraremos em contato em breve.")}catch(d){console.error("Erro ao enviar lead:",d),cr.error("Erro ao enviar. Por favor, tente novamente.")}finally{n(!1)}};return a.jsxs("section",{className:"py-24 relative overflow-hidden",ref:t,children:[a.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-br from-primary via-primary/90 to-primary/80",animate:{background:["linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary)/0.9) 50%, hsl(var(--primary)/0.8) 100%)","linear-gradient(135deg, hsl(var(--primary)/0.8) 0%, hsl(var(--primary)) 50%, hsl(var(--primary)/0.9) 100%)","linear-gradient(135deg, hsl(var(--primary)/0.9) 0%, hsl(var(--primary)/0.8) 50%, hsl(var(--primary)) 100%)"]},transition:{duration:10,repeat:1/0,repeatType:"reverse"}}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[a.jsx(Ke.div,{className:"absolute -top-20 -left-20 w-80 h-80 rounded-full bg-white/10 blur-3xl",animate:{scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:8,repeat:1/0}}),a.jsx(Ke.div,{className:"absolute -bottom-20 -right-20 w-96 h-96 rounded-full bg-white/10 blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.1,.2]},transition:{duration:8,repeat:1/0}})]}),a.jsx("div",{className:"container mx-auto px-4 relative z-10",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs(Ke.div,{className:"text-center mb-12",initial:{opacity:0,y:20},animate:e?{opacity:1,y:0}:{},transition:{duration:.6},children:[a.jsxs(Ke.div,{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/20 rounded-full text-white/90 text-sm mb-6",animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0},children:[a.jsx(ps,{className:"w-4 h-4"}),"Comece a gerar impacto hoje"]}),a.jsxs("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6",children:["Transforme Investimento",a.jsx("br",{}),"em Impacto Real"]}),a.jsx("p",{className:"text-xl text-white/80 max-w-2xl mx-auto",children:"Preencha o formulrio e nossa equipe entrar em contato para apresentar os projetos disponveis e tirar suas dvidas."})]}),a.jsx(Ke.div,{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 md:p-12 border border-white/20",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{delay:.3,duration:.6},children:i?a.jsxs(Ke.div,{className:"text-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},children:[a.jsx(Ke.div,{className:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:3},children:a.jsx(au,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Obrigado pelo seu interesse!"}),a.jsx("p",{className:"text-white/80",children:"Nossa equipe entrar em contato em at 24 horas teis."})]}):a.jsxs("form",{onSubmit:c,className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"nome",className:"text-white",children:"Nome completo"}),a.jsxs("div",{className:"relative",children:[a.jsx(_v,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50"}),a.jsx(mt,{id:"nome",placeholder:"Seu nome",value:o.nome,onChange:u=>l({...o,nome:u.target.value}),required:!0,className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/50 focus:border-white/50"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"email",className:"text-white",children:"E-mail corporativo"}),a.jsxs("div",{className:"relative",children:[a.jsx(NA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50"}),a.jsx(mt,{id:"email",type:"email",placeholder:"seu@empresa.com",value:o.email,onChange:u=>l({...o,email:u.target.value}),required:!0,className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/50 focus:border-white/50"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"empresa",className:"text-white",children:"Empresa"}),a.jsxs("div",{className:"relative",children:[a.jsx(eu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50"}),a.jsx(mt,{id:"empresa",placeholder:"Nome da empresa",value:o.empresa,onChange:u=>l({...o,empresa:u.target.value}),required:!0,className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/50 focus:border-white/50"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"telefone",className:"text-white",children:"Telefone"}),a.jsxs("div",{className:"relative",children:[a.jsx(FX,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50"}),a.jsx(mt,{id:"telefone",type:"tel",placeholder:"(00) 00000-0000",value:o.telefone,onChange:u=>l({...o,telefone:u.target.value}),className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/50 focus:border-white/50"})]})]})]}),a.jsx(Oe,{type:"submit",size:"lg",disabled:r,className:"w-full bg-white text-primary hover:bg-white/90 text-lg py-6 rounded-xl group",children:r?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-5 h-5 mr-2 animate-spin"}),"Enviando..."]}):a.jsxs(a.Fragment,{children:["Quero Ser Investidor",a.jsx(Lu,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})}),a.jsx("p",{className:"text-center text-white/60 text-sm",children:"Ao enviar, voc concorda em receber comunicaes da Ciclik. No compartilhamos seus dados com terceiros."})]})}),a.jsx(Ke.div,{className:"mt-8 text-center",initial:{opacity:0},animate:e?{opacity:1}:{},transition:{delay:.6,duration:.6},children:a.jsxs("p",{className:"text-white/70",children:["Prefere conversar diretamente?"," ",a.jsx("a",{href:"mailto:investidores@ciclik.com.br",className:"text-white hover:underline font-semibold",children:"investidores@ciclik.com.br"})]})})]})})]})}function fz({position:t,size:e="md",opacity:r=.15,rotate:n=0,flip:i=!1,className:s=""}){const o={sm:"w-24 h-24 md:w-32 md:h-32",md:"w-32 h-32 md:w-48 md:h-48",lg:"w-48 h-48 md:w-64 md:h-64"},l={"top-left":"top-0 left-0 -translate-x-1/4 -translate-y-1/4","top-right":"top-0 right-0 translate-x-1/4 -translate-y-1/4","bottom-left":"bottom-0 left-0 -translate-x-1/4 translate-y-1/4","bottom-right":"bottom-0 right-0 translate-x-1/4 translate-y-1/4","center-left":"top-1/2 left-0 -translate-x-1/3 -translate-y-1/2","center-right":"top-1/2 right-0 translate-x-1/3 -translate-y-1/2"};return a.jsx(Ke.div,{className:`absolute pointer-events-none z-0 ${l[t]} ${s}`,initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0,margin:"-50px"},transition:{duration:.8,ease:"easeOut"},children:a.jsx("img",{src:"/Ciclik_validacoes/folhas-ciclik.png",alt:"","aria-hidden":"true",className:`${o[e]} object-contain`,style:{opacity:r,transform:`rotate(${n}deg) ${i?"scaleX(-1)":""}`,filter:"blur(0.5px)"}})})}function vfe(){const t=nn(),e=C.useRef(null),[r,n]=C.useState(!1),[i,s]=C.useState(!1);C.useEffect(()=>{window.scrollTo(0,0)},[]),C.useEffect(()=>{const c=()=>{n(window.scrollY>500),s(window.scrollY>50)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const o=()=>{var c;(c=e.current)==null||c.scrollIntoView({behavior:"smooth"})},l=()=>{window.scrollTo({top:0,behavior:"smooth"})};return a.jsxs("div",{className:"min-h-screen bg-white font-body overflow-x-hidden",children:[a.jsx(Ke.header,{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${i?"bg-white/95 backdrop-blur-md shadow-sm border-b border-border/30":"bg-transparent"}`,initial:{y:-100},animate:{y:0},transition:{duration:.5},children:a.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>t("/apresentacao"),className:"font-display font-medium bg-white/90 backdrop-blur-sm hover:bg-white shadow-md rounded-full gap-2",children:[a.jsx(Kn,{className:"w-4 h-4"}),"Voltar"]}),a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"/Ciclik_validacoes/logo-with-slogan.png",alt:"Ciclik - Recicle e Ganhe",className:"h-10 md:h-12 w-auto object-contain",style:{filter:"drop-shadow(0 0 0 transparent)",mixBlendMode:"normal"}})}),a.jsx("div",{className:"w-20"})]})}),a.jsxs("main",{children:[a.jsx(DBt,{onCtaClick:o}),a.jsxs("div",{ref:e,className:"relative",children:[a.jsx(fz,{position:"bottom-left",size:"lg",opacity:.12,rotate:15,flip:!0}),a.jsx(fz,{position:"top-right",size:"md",opacity:.1,rotate:-25}),a.jsx(ZBt,{})]}),a.jsxs("div",{id:"faq",className:"relative",children:[a.jsx(fz,{position:"top-right",size:"md",opacity:.08,rotate:-20}),a.jsx(YBt,{})]})]}),a.jsx("footer",{className:"bg-gradient-to-b from-muted/30 to-muted/50 border-t border-border/50 py-16",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-10",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("img",{src:"/Ciclik_validacoes/logo-with-slogan.png",alt:"Ciclik - Recicle e Ganhe",className:"h-14 w-auto object-contain mb-5"}),a.jsx("p",{className:"font-body text-muted-foreground text-sm max-w-md leading-relaxed",children:"Mais do que uma plataforma de benefcios, somos um movimento de transformao de comportamentos. Uma comunidade onde voc recicla e todos ganham."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-display font-semibold text-foreground mb-5",children:"Links"}),a.jsxs("ul",{className:"space-y-3 text-sm font-body text-muted-foreground",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-primary transition-colors inline-flex items-center gap-2",children:"Sobre a Ciclik"})}),a.jsx("li",{children:a.jsx("a",{href:"#projetos",className:"hover:text-primary transition-colors inline-flex items-center gap-2",children:"Projetos CDV"})}),a.jsx("li",{children:a.jsx("a",{href:"#faq",className:"hover:text-primary transition-colors inline-flex items-center gap-2",children:"Perguntas Frequentes"})}),a.jsx("li",{children:a.jsx("a",{href:"/cdv/investor",className:"hover:text-primary transition-colors inline-flex items-center gap-2",children:"rea do Investidor"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-display font-semibold text-foreground mb-5",children:"Contato"}),a.jsxs("ul",{className:"space-y-3 text-sm font-body text-muted-foreground",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:""}),"investidores@ciclik.com.br"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:""}),"(11) 99999-9999"]})]})]})]}),a.jsxs("div",{className:"mt-14 pt-8 border-t border-border/50 flex flex-col md:flex-row items-center justify-between gap-4",children:[a.jsxs("p",{className:"text-sm font-body text-muted-foreground",children:[" ",new Date().getFullYear()," Ciclik. Todos os direitos reservados."]}),a.jsxs("div",{className:"flex gap-6 text-sm font-body text-muted-foreground",children:[a.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Termos de Uso"}),a.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Poltica de Privacidade"})]})]})]})}),a.jsx(Ke.div,{className:"fixed bottom-8 right-8 z-50",initial:{opacity:0,scale:.8},animate:{opacity:r?1:0,scale:r?1:.8,pointerEvents:r?"auto":"none"},transition:{duration:.2},children:a.jsx(Oe,{size:"icon",className:"rounded-full w-14 h-14 bg-primary hover:brightness-105 shadow-lg hover:shadow-xl transition-all duration-300",onClick:l,children:a.jsx(uRe,{className:"w-6 h-6"})})})]})}const QBt=()=>{const[t,e]=C.useState([]),[r,n]=C.useState(!0),[i,s]=C.useState(""),{toast:o}=Qi(),l=nn();C.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:{user:f}}=await Ee.auth.getUser();if(!f)return;const{data:m}=await Ee.from("cdv_investidores").select("id, primeiro_acesso, razao_social").eq("id_user",f.id).single();if(!m){o({title:"Erro",description:"Investidor no encontrado",variant:"destructive"});return}s(m.razao_social||""),m.primeiro_acesso||await Ee.from("cdv_investidores").update({primeiro_acesso:!0,status:"ativo"}).eq("id",m.id);const{data:x,error:g}=await Ee.from("cdv_quotas").select("*").eq("id_investidor",m.id).order("data_compra",{ascending:!1});if(g)throw g;e(x||[])}catch(f){o({title:"Erro ao carregar quotas",description:f.message,variant:"destructive"})}finally{n(!1)}},u=async()=>{await Ee.auth.signOut(),l("/auth")},d=(f,m)=>Math.min(f/m*100,100),h=f=>{const m={em_geracao:{label:"Em Gerao",className:"bg-blue-500"},pronto:{label:"Pronto",className:"bg-green-500"},certificado_emitido:{label:"Certificado Emitido",className:"bg-purple-500"}},x=m[f]||m.em_geracao;return a.jsx(Bt,{className:x.className,children:x.label})};return r?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-primary/5",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("img",{src:Bp("ciclik-logo.png"),alt:"Ciclik",className:"h-12 animate-pulse"}),a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[a.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-border/50 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:Bp("ciclik-logo-full.png"),alt:"Ciclik",className:"h-10 object-contain"}),a.jsx("div",{className:"hidden md:block h-8 w-px bg-border/50"}),a.jsx(Bt,{variant:"outline",className:"hidden md:flex bg-primary/5 text-primary border-primary/20 font-display",children:"Digital Verde"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>l("/cdv"),className:"gap-2",children:[a.jsx(Kn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),a.jsxs(Oe,{variant:"outline",size:"sm",onClick:u,className:"gap-2",children:[a.jsx(wv,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Sair"})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-1.5 h-8 bg-gradient-to-b from-primary to-ciclik-orange rounded-full"}),a.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-foreground",children:"Meu Portflio CDV"})]}),a.jsxs("p",{className:"text-muted-foreground font-body ml-5",children:[i?`Ol, ${i}! `:"","Acompanhe seus investimentos e certificados verdes"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-8",children:[a.jsxs(it,{className:"border-primary/10 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium font-body",children:"Total de Quotas"}),a.jsx(qu,{className:"h-4 w-4 text-primary"})]}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-display font-bold text-foreground",children:t.length})})]}),a.jsxs(it,{className:"border-primary/10 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium font-body",children:"Investimento"}),a.jsx(Hs,{className:"h-4 w-4 text-primary"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-2xl font-display font-bold text-foreground",children:["R$ ",t.reduce((f,m)=>f+m.valor_pago,0).toLocaleString("pt-BR")]})})]}),a.jsxs(it,{className:"border-primary/10 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium font-body",children:"Prontos"}),a.jsx(qu,{className:"h-4 w-4 text-green-500"})]}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-display font-bold text-green-600",children:t.filter(f=>f.status==="pronto"||f.status==="certificado_emitido").length})})]}),a.jsxs(it,{className:"border-primary/10 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium font-body",children:"Em Gerao"}),a.jsx(ps,{className:"h-4 w-4 text-ciclik-orange"})]}),a.jsx(ht,{children:a.jsx("div",{className:"text-2xl font-display font-bold text-ciclik-orange",children:t.filter(f=>f.status==="em_geracao").length})})]})]}),a.jsxs("div",{className:"space-y-6",children:[t.map(f=>{const m=d(f.kg_conciliados,f.meta_kg_residuos),x=d(f.horas_conciliadas,f.meta_horas_educacao),g=d(f.embalagens_conciliadas,f.meta_embalagens),y=(m+x+g)/3;return a.jsxs(it,{className:"overflow-hidden border-primary/10 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx(At,{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-transparent",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(Ct,{className:"text-2xl font-display",children:["Quota #",f.numero_quota]}),a.jsxs(gr,{className:"flex items-center gap-2 mt-2 font-body",children:[a.jsx(Gl,{className:"w-4 h-4"}),"Maturao em ",$A(new Date(f.data_maturacao),{locale:Wi,addSuffix:!0})]})]}),h(f.status)]})}),a.jsxs(ht,{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium font-body",children:"Progresso Total"}),a.jsxs("span",{className:"text-sm font-display font-bold text-primary",children:[y.toFixed(1),"%"]})]}),a.jsx(fc,{value:y,className:"h-3"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"p-4 bg-primary/5 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(ps,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"font-display font-semibold",children:"Resduos"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm font-body",children:[a.jsx("span",{className:"text-muted-foreground",children:"Meta"}),a.jsxs("span",{className:"font-medium",children:[f.meta_kg_residuos," kg"]})]}),a.jsxs("div",{className:"flex justify-between text-sm font-body",children:[a.jsx("span",{className:"text-muted-foreground",children:"Conciliado"}),a.jsxs("span",{className:"font-medium text-primary",children:[f.kg_conciliados," kg"]})]}),a.jsx(fc,{value:m,className:"h-2"})]})]}),a.jsxs("div",{className:"p-4 bg-primary/5 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(ah,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"font-display font-semibold",children:"Educao"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm font-body",children:[a.jsx("span",{className:"text-muted-foreground",children:"Meta"}),a.jsxs("span",{className:"font-medium",children:[f.meta_horas_educacao," horas"]})]}),a.jsxs("div",{className:"flex justify-between text-sm font-body",children:[a.jsx("span",{className:"text-muted-foreground",children:"Conciliado"}),a.jsxs("span",{className:"font-medium text-primary",children:[f.horas_conciliadas," horas"]})]}),a.jsx(fc,{value:x,className:"h-2"})]})]}),a.jsxs("div",{className:"p-4 bg-primary/5 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Yn,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"font-display font-semibold",children:"Embalagens"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm font-body",children:[a.jsx("span",{className:"text-muted-foreground",children:"Meta"}),a.jsxs("span",{className:"font-medium",children:[f.meta_embalagens," itens"]})]}),a.jsxs("div",{className:"flex justify-between text-sm font-body",children:[a.jsx("span",{className:"text-muted-foreground",children:"Conciliado"}),a.jsxs("span",{className:"font-medium text-primary",children:[f.embalagens_conciliadas," itens"]})]}),a.jsx(fc,{value:g,className:"h-2"})]})]})]}),(f.status==="pronto"||f.status==="certificado_emitido")&&a.jsxs("div",{className:"flex gap-4 mt-6 pt-6 border-t",children:[a.jsxs(Oe,{className:"flex-1 gap-2 font-display",onClick:()=>l(`/cdv/certificate/${f.id}`),children:[a.jsx(ou,{className:"w-4 h-4"}),"Baixar Certificado"]}),a.jsxs(Oe,{variant:"outline",className:"flex-1 gap-2 font-display",onClick:()=>l(`/cdv/validate/${f.id}`),children:[a.jsx(zu,{className:"w-4 h-4"}),"Ver QR Code"]})]})]})]},f.id)}),t.length===0&&a.jsx(it,{className:"border-primary/10",children:a.jsxs(ht,{className:"p-12 text-center",children:[a.jsx("img",{src:Bp("ciclik-logo.png"),alt:"Ciclik",className:"h-16 mx-auto mb-6 opacity-50"}),a.jsx("h3",{className:"text-xl font-display font-bold mb-2",children:"Nenhuma quota adquirida"}),a.jsx("p",{className:"text-muted-foreground font-body mb-6",children:"Comece seu investimento ambiental adquirindo sua primeira quota CDV"}),a.jsx(Oe,{onClick:()=>l("/cdv"),className:"font-display",children:"Conhecer CDV"})]})})]}),a.jsxs("footer",{className:"mt-16 pt-8 border-t border-border/50 text-center",children:[a.jsx("img",{src:Bp("ciclik-logo.png"),alt:"Ciclik",className:"h-8 mx-auto mb-3 opacity-60"}),a.jsxs("p",{className:"text-xs text-muted-foreground font-body",children:[" ",new Date().getFullYear()," Ciclik - Digital Verde. Todos os direitos reservados."]})]})]})]})},nPe="/Ciclik_validacoes/assets/ods-08-BGlMgP0n.jpg",iPe="/Ciclik_validacoes/assets/ods-09-C2hQpqXf.jpg",sPe="/Ciclik_validacoes/assets/ods-10-BX6iEeQ4.jpg",aPe="/Ciclik_validacoes/assets/ods-11-D6lYXwtR.jpg",oPe="/Ciclik_validacoes/assets/ods-12-k0HXTbTv.jpg",lPe="/Ciclik_validacoes/assets/ods-13-BYnBSpAV.jpg",JBt=()=>{var T,O,I;const{id:t}=o0(),e=nn(),{toast:r}=Qi(),[n,i]=C.useState(null),[s,o]=C.useState(!0),[l,c]=C.useState(""),u=C.useRef(null);C.useEffect(()=>{d()},[t]);const d=async()=>{try{const{data:M,error:D}=await Ee.from("cdv_quotas").select(`
          *,
          investidor:cdv_investidores(razao_social, cnpj, nome_responsavel),
          projeto:cdv_projetos(titulo)
        `).eq("id",t).single();if(D)throw D;i(M);const z=Ng(`/cdv/validate/${t}`),F=await Dg.toDataURL(z,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}});c(F)}catch(M){r({title:"Erro ao carregar certificado",description:M.message,variant:"destructive"})}finally{o(!1)}},h=async()=>{if(!(!u.current||!n))try{const M=(await AE(async()=>{const{default:oe}=await import("./html2canvas.esm-CBrSDip1.js");return{default:oe}},[])).default,D=(await AE(async()=>{const{default:oe}=await Promise.resolve().then(()=>GMt);return{default:oe}},void 0)).default,z=210,F=297,q=u.current.querySelector("[data-qr-container]");q&&(q.style.visibility="hidden"),await new Promise(oe=>setTimeout(oe,100));const Q=await M(u.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",windowWidth:794,logging:!1});q&&(q.style.visibility="visible");const re=new D("p","mm","a4"),Z=Q.toDataURL("image/png"),se=z,K=Q.height*se/Q.width;let X=0,Y=1;if(K>F){Y=F/K;const oe=se*Y,xe=F,H=(z-oe)/2;re.addImage(Z,"PNG",H,0,oe,xe)}else X=(F-K)/2,re.addImage(Z,"PNG",0,X,se,K);if(l){const xe=z-55,H=K>F?F-65:X+K-65;re.addImage(l,"PNG",xe,H,25,25)}re.save(`Certificado_CDV_${n.numero_quota}.pdf`),r({title:"Certificado baixado!",description:"O PDF foi salvo com sucesso."})}catch(M){console.error("Erro ao gerar PDF:",M),r({title:"Erro ao gerar PDF",description:M.message,variant:"destructive"})}};if(s)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-primary/5",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("img",{src:getAssetPath("ciclik-logo.png"),alt:"Ciclik",className:"h-12 animate-pulse"}),a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})]})});if(!n)return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-background to-primary/5",children:a.jsxs(it,{className:"p-8 text-center border-primary/10",children:[a.jsx("img",{src:getAssetPath("ciclik-logo.png"),alt:"Ciclik",className:"h-12 mx-auto mb-4 opacity-50"}),a.jsx(qu,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-display font-bold mb-2",children:"Certificado no encontrado"}),a.jsx(Oe,{onClick:()=>e("/cdv/investor"),className:"font-display",children:"Voltar"})]})});const f=new Date,m=n!=null&&n.created_at?new Date(n.created_at):f,x=(n==null?void 0:n.kg_conciliados)||0,g=(n==null?void 0:n.horas_conciliadas)||0;n!=null&&n.embalagens_conciliadas;const y=(x*2.5).toFixed(0),w=Math.ceil(x/200),S=(x*4.5).toFixed(0),E=(x*90).toFixed(0),j=Math.ceil(x/3+g*10);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[a.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-border/50 shadow-sm",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:getAssetPath("ciclik-logo-full.png"),alt:"Ciclik",className:"h-9 object-contain"}),a.jsx("div",{className:"h-6 w-px bg-border/50"}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Wp,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"text-sm font-display font-medium text-primary",children:"Certificado"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>e("/cdv/investor"),className:"gap-2 font-display",children:[a.jsx(Kn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),a.jsxs(Oe,{size:"sm",onClick:h,className:"gap-2 font-display",children:[a.jsx(ou,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Baixar PDF"})]})]})]})})}),a.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:a.jsx("div",{ref:u,className:"bg-white rounded-2xl overflow-hidden shadow-lg",children:a.jsxs(it,{className:"border-0 overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary/85 text-white relative",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-6 -right-6 w-24 h-24 rounded-full bg-white/5"}),a.jsx("div",{className:"absolute top-1/2 right-[15%] w-32 h-32 rounded-full border border-white/10 -translate-y-1/2"})]}),a.jsxs("div",{className:"relative z-10 px-6 py-6 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[a.jsx("span",{className:"text-xl font-display font-bold tracking-wide text-white/95",children:"ciclik"}),a.jsx(ps,{className:"w-4 h-4 text-ciclik-orange"})]}),a.jsx("h1",{className:"text-2xl font-display font-bold mb-1 tracking-tight",children:"Certificado Digital Verde"}),a.jsx("p",{className:"text-sm opacity-80 font-body",children:"Impacto Ambiental Certificado"})]})]}),a.jsxs(ht,{className:"p-5",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs(Bt,{className:"bg-primary/10 text-primary text-sm px-4 py-1.5 mb-2 font-display",children:["CDV #",n.numero_quota]}),a.jsx("h2",{className:"text-xl font-display font-bold text-foreground mb-1",children:((T=n.investidor)==null?void 0:T.razao_social)||"Investidor"}),a.jsxs("p",{className:"text-sm text-muted-foreground font-body",children:["CNPJ: ",((O=n.investidor)==null?void 0:O.cnpj)||"N/A"]})]}),a.jsx("div",{className:"flex justify-center mb-4",children:a.jsxs("div",{className:"flex items-center gap-2 bg-green-50 border border-green-200 rounded-full px-4 py-1.5",children:[a.jsx(ta,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-700 font-display font-semibold",children:"Certificado Vlido e Verificvel"})]})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-sm font-display font-bold text-center mb-3 text-foreground",children:"Impactos Ambientais Certificados"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-1",children:a.jsx(ps,{className:"w-4 h-4 text-primary"})}),a.jsxs("p",{className:"text-lg font-display font-bold text-primary",children:[n.kg_conciliados," kg"]}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"Resduos Reciclados"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-1",children:a.jsx(ah,{className:"w-4 h-4 text-primary"})}),a.jsxs("p",{className:"text-lg font-display font-bold text-primary",children:[n.horas_conciliadas,"h"]}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"Educao Ambiental"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-1",children:a.jsx(Yn,{className:"w-4 h-4 text-primary"})}),a.jsx("p",{className:"text-lg font-display font-bold text-primary",children:n.embalagens_conciliadas}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"Embalagens Mapeadas"})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-sm font-display font-bold text-center mb-2 text-foreground",children:"Equivalncia Ambiental"}),a.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200/50 rounded-lg p-2 text-center",children:[a.jsx(j0e,{className:"w-4 h-4 text-blue-600 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-display font-bold text-blue-700",children:Number(y).toLocaleString("pt-BR")}),a.jsx("p",{className:"text-[10px] text-blue-600/80 font-body",children:"kg CO"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200/50 rounded-lg p-2 text-center",children:[a.jsx(RRe,{className:"w-4 h-4 text-green-600 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-display font-bold text-green-700",children:w.toLocaleString("pt-BR")}),a.jsx("p",{className:"text-[10px] text-green-600/80 font-body",children:"rvores"})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200/50 rounded-lg p-2 text-center",children:[a.jsx(KO,{className:"w-4 h-4 text-yellow-600 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-display font-bold text-yellow-700",children:Number(S).toLocaleString("pt-BR")}),a.jsx("p",{className:"text-[10px] text-yellow-600/80 font-body",children:"kWh"})]}),a.jsxs("div",{className:"bg-cyan-50 border border-cyan-200/50 rounded-lg p-2 text-center",children:[a.jsx(A0e,{className:"w-4 h-4 text-cyan-600 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-display font-bold text-cyan-700",children:Number(E).toLocaleString("pt-BR")}),a.jsx("p",{className:"text-[10px] text-cyan-600/80 font-body",children:"litros"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200/50 rounded-lg p-2 text-center",children:[a.jsx(yl,{className:"w-4 h-4 text-purple-600 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-display font-bold text-purple-700",children:j.toLocaleString("pt-BR")}),a.jsx("p",{className:"text-[10px] text-purple-600/80 font-body",children:"pessoas"})]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 text-xs text-muted-foreground font-body bg-muted/30 rounded py-1.5 px-3",children:[a.jsx(Hs,{className:"w-3 h-3 text-primary"}),a.jsxs("span",{children:["Tendncia: ",a.jsx("strong",{className:"text-foreground",children:j})," cidados em mudana de comportamento ambiental"]})]})]}),a.jsxs("div",{className:"mb-4 border-t pt-4",children:[a.jsxs("div",{className:"text-center mb-3",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[a.jsx(fV,{className:"w-4 h-4 text-primary"}),a.jsx("h3",{className:"text-sm font-display font-bold text-foreground",children:"Objetivos de Desenvolvimento Sustentvel"})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"Contribuio direta para as ODS da ONU:"})]}),a.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[a.jsx("img",{src:nPe,alt:"ODS 8",className:"w-full rounded shadow-sm"}),a.jsx("img",{src:iPe,alt:"ODS 9",className:"w-full rounded shadow-sm"}),a.jsx("img",{src:sPe,alt:"ODS 10",className:"w-full rounded shadow-sm"}),a.jsx("img",{src:aPe,alt:"ODS 11",className:"w-full rounded shadow-sm"}),a.jsx("img",{src:oPe,alt:"ODS 12",className:"w-full rounded shadow-sm"}),a.jsx("img",{src:lPe,alt:"ODS 13",className:"w-full rounded shadow-sm"})]}),a.jsx("p",{className:"mt-2 text-[10px] text-center text-muted-foreground font-body",children:"Agenda 2030: Investimento em impacto ambiental verificvel para a transformao sustentvel"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t pt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[a.jsx(Gl,{className:"w-4 h-4 text-primary"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] text-muted-foreground font-body block",children:"Data de Gerao"}),a.jsx("span",{className:"text-xs font-display font-medium",children:Mi(m,"dd/MM/yyyy",{locale:Wi})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[a.jsx(qu,{className:"w-4 h-4 text-primary"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] text-muted-foreground font-body block",children:"Projeto"}),a.jsx("span",{className:"text-xs font-display font-medium",children:((I=n.projeto)==null?void 0:I.titulo)||"CDV"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[a.jsx(ta,{className:"w-4 h-4 text-primary"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] text-muted-foreground font-body block",children:"Perodo"}),a.jsxs("span",{className:"text-xs font-display font-medium",children:[Mi(new Date(n.data_compra),"MMM/yy",{locale:Wi})," - ",Mi(new Date(n.data_maturacao),"MMM/yy",{locale:Wi})]})]})]})]}),a.jsx("div",{className:"flex flex-col items-center justify-center","data-qr-container":!0,children:l&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm border inline-block",children:a.jsx("img",{src:l,alt:"QR Code de Validao",className:"w-20 h-20"})}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-body mt-1",children:"Escaneie para validar"})]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t",children:a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground font-body",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:getAssetPath("ciclik-logo.png"),alt:"Ciclik",className:"h-4 opacity-60"}),a.jsx("span",{children:"Certificado de Impacto Ambiental"})]}),a.jsxs("span",{children:["ciclik.com.br/validate/",n.id.slice(0,8)]})]})})]})]})})})]})},e9t=()=>{var h,f,m;const{id:t}=o0(),e=nn(),[r,n]=C.useState(null),[i,s]=C.useState(!0),[o,l]=C.useState(!1),[c,u]=C.useState("");C.useEffect(()=>{d()},[t]);const d=async()=>{try{const{data:x,error:g}=await Ee.from("cdv_quotas").select(`
          *,
          investidor:cdv_investidores(razao_social, cnpj),
          projeto:cdv_projetos(titulo)
        `).eq("id",t).single();if(g||!x){l(!1),s(!1);return}n(x),l(x.status==="pronto"||x.status==="certificado_emitido");const y=Ng(`/cdv/validate/${t}`),w=await Dg.toDataURL(y,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}});u(w)}catch{l(!1)}finally{s(!1)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-primary/5",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("img",{src:getAssetPath("ciclik-logo.png"),alt:"Ciclik",className:"h-12 animate-pulse"}),a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})]})}):r?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[a.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-border/50 shadow-sm",children:a.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:getAssetPath("ciclik-logo-full.png"),alt:"Ciclik",className:"h-9 object-contain"}),a.jsx("div",{className:"h-6 w-px bg-border/50"}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Wp,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"text-sm font-display font-medium text-primary",children:"Validao"})]})]})})})}),a.jsxs("div",{className:"max-w-2xl mx-auto p-4 md:p-8",children:[a.jsx(it,{className:`mb-6 border-2 overflow-hidden ${o?"border-green-500":"border-yellow-500"}`,children:a.jsx("div",{className:`p-6 ${o?"bg-gradient-to-r from-green-50 to-green-100/50":"bg-gradient-to-r from-yellow-50 to-yellow-100/50"}`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[o?a.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:a.jsx(ta,{className:"w-10 h-10 text-green-600"})}):a.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:a.jsx(al,{className:"w-10 h-10 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:`text-2xl font-display font-bold ${o?"text-green-700":"text-yellow-700"}`,children:o?"Certificado Vlido":"Certificado em Gerao"}),a.jsx("p",{className:`font-body ${o?"text-green-600":"text-yellow-600"}`,children:o?"Este certificado foi verificado e  autntico.":"Este certificado ainda est em processo de gerao de impacto."})]})]})})}),a.jsxs(it,{className:"border-primary/10 shadow-sm overflow-hidden",children:[a.jsx(At,{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-transparent",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs(Ct,{className:"text-2xl font-display flex items-center gap-2",children:[a.jsx(qu,{className:"w-6 h-6 text-primary"}),"CDV #",r.numero_quota]})}),a.jsx(Bt,{className:`font-display ${o?"bg-green-500":"bg-yellow-500"}`,children:o?"Certificado":"Em Gerao"})]})}),a.jsxs(ht,{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-xl",children:[a.jsx(fRe,{className:"w-5 h-5 text-primary mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-display font-semibold text-foreground",children:(h=r.investidor)==null?void 0:h.razao_social}),a.jsxs("p",{className:"text-sm text-muted-foreground font-body",children:["CNPJ: ",(f=r.investidor)==null?void 0:f.cnpj]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-xl",children:[a.jsx(qu,{className:"w-5 h-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:"Projeto"}),a.jsx("p",{className:"font-display font-semibold",children:((m=r.projeto)==null?void 0:m.titulo)||"Ciclik Digital Verde"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-xl",children:[a.jsx(Gl,{className:"w-5 h-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:"Perodo de Maturao"}),a.jsxs("p",{className:"font-display font-semibold",children:[Mi(new Date(r.data_compra),"MMM/yyyy",{locale:Wi})," - ",Mi(new Date(r.data_maturacao),"MMM/yyyy",{locale:Wi})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-display font-semibold mb-4 text-foreground",children:"Impactos Ambientais"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl",children:[a.jsx(ps,{className:"w-7 h-7 text-primary mx-auto mb-2"}),a.jsx("p",{className:"text-xl font-display font-bold text-primary",children:r.kg_conciliados}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"kg reciclados"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl",children:[a.jsx(ah,{className:"w-7 h-7 text-primary mx-auto mb-2"}),a.jsx("p",{className:"text-xl font-display font-bold text-primary",children:r.horas_conciliadas}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"horas educao"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl",children:[a.jsx(Yn,{className:"w-7 h-7 text-primary mx-auto mb-2"}),a.jsx("p",{className:"text-xl font-display font-bold text-primary",children:r.embalagens_conciliadas}),a.jsx("p",{className:"text-xs text-muted-foreground font-body",children:"embalagens"})]})]})]}),a.jsxs("div",{className:"flex flex-col items-center pt-6 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(zu,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"text-sm font-display font-medium text-foreground",children:"QR Code de Validao"})]}),c&&a.jsx("div",{className:"p-3 bg-white rounded-xl shadow-sm border",children:a.jsx("img",{src:c,alt:"QR Code",className:"w-36 h-36"})}),a.jsxs("p",{className:"text-xs text-muted-foreground font-body mt-3 text-center",children:["ID: ",r.id]})]})]})]}),a.jsx("div",{className:"flex justify-center mt-6",children:a.jsxs(Oe,{variant:"outline",onClick:()=>e("/"),className:"font-display",children:[a.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Voltar ao Incio"]})}),a.jsxs("div",{className:"text-center mt-8 pt-6 border-t border-border/50",children:[a.jsx("img",{src:getAssetPath("ciclik-logo.png"),alt:"Ciclik",className:"h-7 mx-auto mb-3 opacity-60"}),a.jsxs("p",{className:"text-xs text-muted-foreground font-body",children:["Verificado em ",Mi(new Date,"dd/MM/yyyy 's' HH:mm",{locale:Wi})]}),a.jsxs("p",{className:"text-xs text-muted-foreground font-body mt-1",children:[" ",new Date().getFullYear()," Ciclik - Digital Verde"]})]})]})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-background to-destructive/5 p-4",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 p-4",children:a.jsx("div",{className:"max-w-2xl mx-auto flex justify-center",children:a.jsx("img",{src:getAssetPath("ciclik-logo-full.png"),alt:"Ciclik",className:"h-10 object-contain opacity-60"})})}),a.jsxs(it,{className:"max-w-md w-full text-center p-8 border-destructive/20",children:[a.jsx(al,{className:"w-20 h-20 text-destructive mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-display font-bold text-destructive mb-2",children:"Certificado Invlido"}),a.jsx("p",{className:"text-muted-foreground font-body mb-6",children:"Este cdigo de certificado no foi encontrado em nosso sistema."}),a.jsxs(Oe,{onClick:()=>e("/"),variant:"outline",className:"font-display",children:[a.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Voltar ao Incio"]})]})]})},t9t=()=>{const[t,e]=C.useState([]),[r,n]=C.useState(!0),[i,s]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(null),[d,h]=C.useState(!1),[f,m]=C.useState(null),{toast:x}=Qi(),[g,y]=C.useState({titulo:"",descricao:"",valor_total:"",publico_alvo:"",data_inicio:"",data_fim:"",prazo_maturacao_meses:"12",quotas_por_periodo:"",meta_1:"",meta_2:"",meta_3:"",meta_4:"",meta_5:""}),[w,S]=C.useState({titulo:"",descricao:"",publico_alvo:"",data_inicio:"",data_fim:"",status:"",meta_1:"",meta_2:"",meta_3:"",meta_4:"",meta_5:""});C.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:z,error:F}=await Ee.from("cdv_projetos").select("*").order("created_at",{ascending:!1});if(F)throw F;e(z||[])}catch(z){console.error("Erro ao buscar projetos:",z),x({title:"Erro ao carregar projetos",description:z.message,variant:"destructive"})}finally{n(!1)}},j=z=>{const F=Math.floor(z/2e3);return{total_quotas:F,meta_kg_residuos:F*250,meta_minutos_educacao:F*5,meta_produtos_catalogados:F*1,meta_co2_evitado_kg:F*225}},T=async z=>{z.preventDefault(),h(!0);try{const F=parseFloat(g.valor_total),q=j(F),Q=[g.meta_1,g.meta_2,g.meta_3,g.meta_4,g.meta_5].filter(Y=>Y.trim()!==""),{data:re,error:Z}=await Ee.from("cdv_projetos").insert({titulo:g.titulo,descricao:g.descricao,valor_total:F,metas_principais:Q,publico_alvo:g.publico_alvo,data_inicio:g.data_inicio,data_fim:g.data_fim,prazo_maturacao_meses:parseInt(g.prazo_maturacao_meses),quotas_por_periodo:g.quotas_por_periodo?parseInt(g.quotas_por_periodo):null,...q}).select().single();if(Z)throw Z;const se=parseInt(g.prazo_maturacao_meses),K=[];for(let Y=1;Y<=q.total_quotas;Y++){const oe=new Date(g.data_inicio);oe.setMonth(oe.getMonth()+se),K.push({id_projeto:re.id,numero_quota:`${re.id.substring(0,8).toUpperCase()}-${Y.toString().padStart(4,"0")}`,valor_pago:2e3,data_maturacao:oe.toISOString(),id_investidor:null,status_maturacao:null,meta_kg_residuos:250,meta_horas_educacao:5,meta_embalagens:1,meta_co2_evitado_kg:225})}const{error:X}=await Ee.from("cdv_quotas").insert(K);if(X)throw X;x({title:"Projeto criado com sucesso!",description:`${q.total_quotas} quotas geradas automaticamente.`}),s(!1),y({titulo:"",descricao:"",valor_total:"",publico_alvo:"",data_inicio:"",data_fim:"",prazo_maturacao_meses:"12",quotas_por_periodo:"",meta_1:"",meta_2:"",meta_3:"",meta_4:"",meta_5:""}),E()}catch(F){console.error("Erro ao criar projeto:",F),x({title:"Erro ao criar projeto",description:F.message,variant:"destructive"})}finally{h(!1)}},O=z=>{const F=z.meta_kg_residuos>0?z.kg_conciliados/z.meta_kg_residuos*100:0,q=z.meta_minutos_educacao>0?z.minutos_conciliados/z.meta_minutos_educacao*100:0,Q=z.meta_produtos_catalogados>0?z.produtos_conciliados/z.meta_produtos_catalogados*100:0;return Math.round((F+q+Q)/3)},I=async z=>{m(z);try{const{error:F}=await Ee.from("cdv_quotas").delete().eq("id_projeto",z);if(F)throw F;const{error:q}=await Ee.from("cdv_projetos").delete().eq("id",z);if(q)throw q;x({title:"Projeto excludo",description:"O projeto e suas quotas foram removidos com sucesso."}),E()}catch(F){console.error("Erro ao excluir projeto:",F),x({title:"Erro ao excluir projeto",description:F.message,variant:"destructive"})}finally{m(null)}},M=z=>{const F=z.metas_principais||[];u(z),S({titulo:z.titulo,descricao:z.descricao,publico_alvo:z.publico_alvo||"",data_inicio:z.data_inicio,data_fim:z.data_fim,status:z.status,meta_1:F[0]||"",meta_2:F[1]||"",meta_3:F[2]||"",meta_4:F[3]||"",meta_5:F[4]||""}),l(!0)},D=async z=>{if(z.preventDefault(),!!c){h(!0);try{const F=[w.meta_1,w.meta_2,w.meta_3,w.meta_4,w.meta_5].filter(Q=>Q.trim()!==""),{error:q}=await Ee.from("cdv_projetos").update({titulo:w.titulo,descricao:w.descricao,publico_alvo:w.publico_alvo,data_inicio:w.data_inicio,data_fim:w.data_fim,status:w.status,metas_principais:F}).eq("id",c.id);if(q)throw q;x({title:"Projeto atualizado",description:"As alteraes foram salvas com sucesso."}),l(!1),u(null),E()}catch(F){console.error("Erro ao atualizar projeto:",F),x({title:"Erro ao atualizar projeto",description:F.message,variant:"destructive"})}finally{h(!1)}}};return r?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando projetos..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Projetos CDV"}),a.jsx("p",{className:"text-muted-foreground",children:"Gerencie os projetos de Certificado Digital Verde e suas quotas"})]}),a.jsxs(hs,{open:i,onOpenChange:s,children:[a.jsx(X3,{asChild:!0,children:a.jsxs(Oe,{children:[a.jsx(ya,{className:"w-4 h-4 mr-2"}),"Criar Novo Projeto"]})}),a.jsxs(as,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Criar Novo Projeto CDV"}),a.jsx(Sl,{children:"As quotas sero geradas automaticamente com base no valor total (R$ 2.000,00 por quota)"})]}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"titulo",children:"Ttulo do Projeto *"}),a.jsx(mt,{id:"titulo",value:g.titulo,onChange:z=>y({...g,titulo:z.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"descricao",children:"Descrio *"}),a.jsx(Od,{id:"descricao",value:g.descricao,onChange:z=>y({...g,descricao:z.target.value}),rows:3,required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"valor_total",children:"Valor Total (R$) *"}),a.jsx(mt,{id:"valor_total",type:"number",step:"0.01",value:g.valor_total,onChange:z=>y({...g,valor_total:z.target.value}),required:!0}),g.valor_total&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.floor(parseFloat(g.valor_total)/2e3)," quotas sero geradas"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"publico_alvo",children:"Pblico Alvo"}),a.jsx(mt,{id:"publico_alvo",value:g.publico_alvo,onChange:z=>y({...g,publico_alvo:z.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"data_inicio",children:"Data Incio *"}),a.jsx(mt,{id:"data_inicio",type:"date",value:g.data_inicio,onChange:z=>y({...g,data_inicio:z.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"data_fim",children:"Data Trmino do Projeto *"}),a.jsx(mt,{id:"data_fim",type:"date",value:g.data_fim,onChange:z=>y({...g,data_fim:z.target.value}),required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"prazo_maturacao_meses",children:"Prazo de Maturao (meses) *"}),a.jsx(mt,{id:"prazo_maturacao_meses",type:"number",min:"1",value:g.prazo_maturacao_meses,onChange:z=>y({...g,prazo_maturacao_meses:z.target.value}),required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Tempo padro para execuo dos impactos de cada quota (padro: 12 meses)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"quotas_por_periodo",children:"Quotas por Perodo (opcional)"}),a.jsx(mt,{id:"quotas_por_periodo",type:"number",min:"1",value:g.quotas_por_periodo,onChange:z=>y({...g,quotas_por_periodo:z.target.value}),placeholder:"Ex: 50"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantas quotas disponibilizar a cada 12 meses (deixe em branco para liberar todas)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"5 Metas Principais do Projeto"}),[1,2,3,4,5].map(z=>a.jsx(mt,{placeholder:`Meta ${z}`,value:g[`meta_${z}`],onChange:F=>y({...g,[`meta_${z}`]:F.target.value})},z))]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(Oe,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(Oe,{type:"submit",disabled:d,children:d?"Criando...":"Criar Projeto"})]})]})]})]})]}),a.jsx("div",{className:"space-y-4",children:t.length===0?a.jsx(it,{children:a.jsx(ht,{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Nenhum projeto criado ainda."})})}):t.map(z=>{const F=O(z);return a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(Dm,{className:"w-5 h-5"}),z.titulo]}),a.jsx(gr,{children:z.descricao})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bt,{variant:z.status==="ativo"?"default":"secondary",children:z.status}),a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>M(z),children:a.jsx(P0e,{className:"w-4 h-4"})}),a.jsxs(S_,{children:[a.jsx(IEt,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",disabled:f===z.id,children:a.jsx(vl,{className:"w-4 h-4"})})}),a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsx(ob,{children:"Excluir Projeto CDV"}),a.jsxs(lb,{children:['Tem certeza que deseja excluir o projeto "',z.titulo,'"? Isso tambm remover todas as ',z.total_quotas," quotas associadas. Esta ao no pode ser desfeita."]})]}),a.jsxs(ab,{children:[a.jsx(ub,{children:"Cancelar"}),a.jsx(cb,{onClick:()=>I(z.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:f===z.id?"Excluindo...":"Excluir Projeto"})]})]})]})]})]})}),a.jsx(ht,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(MX,{className:"w-4 h-4"}),"Valor Total"]}),a.jsx("p",{className:"text-lg font-semibold",children:xY(z.valor_total)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Dm,{className:"w-4 h-4"}),"Quotas"]}),a.jsxs("p",{className:"text-lg font-semibold",children:[z.quotas_vendidas,"/",z.total_quotas]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Gl,{className:"w-4 h-4"}),"Vigncia"]}),a.jsxs("p",{className:"text-sm",children:[new Date(z.data_inicio).toLocaleDateString("pt-BR")," - ",new Date(z.data_fim).toLocaleDateString("pt-BR")]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Hs,{className:"w-4 h-4"}),"Progresso"]}),a.jsxs("p",{className:"text-lg font-semibold",children:[F,"%"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progresso Geral"}),a.jsxs("span",{className:"font-medium",children:[F,"%"]})]}),a.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:a.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${F}%`}})})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 pt-2 border-t",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"CO Evitado"}),a.jsxs("p",{className:"text-sm font-semibold",children:[As(z.co2_conciliado_kg,0),"/",As(z.meta_co2_evitado_kg,0)," kg"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Resduos"}),a.jsxs("p",{className:"text-sm font-semibold",children:[As(z.kg_conciliados,0),"/",As(z.meta_kg_residuos,0)," kg"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Educao"}),a.jsxs("p",{className:"text-sm font-semibold",children:[As(z.minutos_conciliados,0),"/",As(z.meta_minutos_educacao,0)," min"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Produtos"}),a.jsxs("p",{className:"text-sm font-semibold",children:[z.produtos_conciliados,"/",z.meta_produtos_catalogados]})]})]})]})})]},z.id)})}),a.jsx(hs,{open:o,onOpenChange:l,children:a.jsxs(as,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Editar Projeto CDV"}),a.jsx(Sl,{children:"Altere as informaes do projeto. O valor total e nmero de quotas no podem ser alterados."})]}),a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"edit_titulo",children:"Ttulo do Projeto *"}),a.jsx(mt,{id:"edit_titulo",value:w.titulo,onChange:z=>S({...w,titulo:z.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"edit_descricao",children:"Descrio *"}),a.jsx(Od,{id:"edit_descricao",value:w.descricao,onChange:z=>S({...w,descricao:z.target.value}),rows:3,required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"edit_publico_alvo",children:"Pblico Alvo"}),a.jsx(mt,{id:"edit_publico_alvo",value:w.publico_alvo,onChange:z=>S({...w,publico_alvo:z.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"edit_status",children:"Status"}),a.jsxs("select",{id:"edit_status",value:w.status,onChange:z=>S({...w,status:z.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[a.jsx("option",{value:"ativo",children:"Ativo"}),a.jsx("option",{value:"inativo",children:"Inativo"}),a.jsx("option",{value:"concluido",children:"Concludo"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"edit_data_inicio",children:"Data Incio *"}),a.jsx(mt,{id:"edit_data_inicio",type:"date",value:w.data_inicio,onChange:z=>S({...w,data_inicio:z.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"edit_data_fim",children:"Data Trmino do Projeto *"}),a.jsx(mt,{id:"edit_data_fim",type:"date",value:w.data_fim,onChange:z=>S({...w,data_fim:z.target.value}),required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{children:"5 Metas Principais do Projeto"}),[1,2,3,4,5].map(z=>a.jsx(mt,{placeholder:`Meta ${z}`,value:w[`meta_${z}`],onChange:F=>S({...w,[`meta_${z}`]:F.target.value})},z))]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(Oe,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),a.jsx(Oe,{type:"submit",disabled:d,children:d?"Salvando...":"Salvar Alteraes"})]})]})]})})]})};var yfe=1,r9t=.9,n9t=.8,i9t=.17,mz=.1,pz=.999,s9t=.9999,a9t=.99,o9t=/[\\\/_+.#"@\[\(\{&]/,l9t=/[\\\/_+.#"@\[\(\{&]/g,c9t=/[\s-]/,cPe=/[\s-]/g;function AK(t,e,r,n,i,s,o){if(s===e.length)return i===t.length?yfe:a9t;var l=`${i},${s}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(s),u=r.indexOf(c,i),d=0,h,f,m,x;u>=0;)h=AK(t,e,r,n,u+1,s+1,o),h>d&&(u===i?h*=yfe:o9t.test(t.charAt(u-1))?(h*=n9t,m=t.slice(i,u-1).match(l9t),m&&i>0&&(h*=Math.pow(pz,m.length))):c9t.test(t.charAt(u-1))?(h*=r9t,x=t.slice(i,u-1).match(cPe),x&&i>0&&(h*=Math.pow(pz,x.length))):(h*=i9t,i>0&&(h*=Math.pow(pz,u-i))),t.charAt(u)!==e.charAt(s)&&(h*=s9t)),(h<mz&&r.charAt(u-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(u-1)!==n.charAt(s))&&(f=AK(t,e,r,n,u+1,s+2,o),f*mz>h&&(h=f*mz)),h>d&&(d=h),u=r.indexOf(c,u+1);return o[l]=d,d}function bfe(t){return t.toLowerCase().replace(cPe," ")}function u9t(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,AK(t,e,bfe(t),bfe(e),0,0,{})}var ET='[cmdk-group=""]',gz='[cmdk-group-items=""]',d9t='[cmdk-group-heading=""]',uPe='[cmdk-item=""]',wfe=`${uPe}:not([aria-disabled="true"])`,CK="cmdk-item-select",jS="data-value",h9t=(t,e,r)=>u9t(t,e,r),dPe=C.createContext(void 0),YI=()=>C.useContext(dPe),hPe=C.createContext(void 0),bee=()=>C.useContext(hPe),fPe=C.createContext(void 0),mPe=C.forwardRef((t,e)=>{let r=AS(()=>{var H,J;return{search:"",value:(J=(H=t.value)!=null?H:t.defaultValue)!=null?J:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=AS(()=>new Set),i=AS(()=>new Map),s=AS(()=>new Map),o=AS(()=>new Set),l=pPe(t),{label:c,children:u,value:d,onValueChange:h,filter:f,shouldFilter:m,loop:x,disablePointerSelection:g=!1,vimBindings:y=!0,...w}=t,S=bl(),E=bl(),j=bl(),T=C.useRef(null),O=N9t();aN(()=>{if(d!==void 0){let H=d.trim();r.current.value=H,I.emit()}},[d]),aN(()=>{O(6,Q)},[]);let I=C.useMemo(()=>({subscribe:H=>(o.current.add(H),()=>o.current.delete(H)),snapshot:()=>r.current,setState:(H,J,ie)=>{var ce,me,he,_e;if(!Object.is(r.current[H],J)){if(r.current[H]=J,H==="search")q(),z(),O(1,F);else if(H==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ue=document.getElementById(j);ue?ue.focus():(ce=document.getElementById(S))==null||ce.focus()}if(O(7,()=>{var ue;r.current.selectedItemId=(ue=re())==null?void 0:ue.id,I.emit()}),ie||O(5,Q),((me=l.current)==null?void 0:me.value)!==void 0){let ue=J??"";(_e=(he=l.current).onValueChange)==null||_e.call(he,ue);return}}I.emit()}},emit:()=>{o.current.forEach(H=>H())}}),[]),M=C.useMemo(()=>({value:(H,J,ie)=>{var ce;J!==((ce=s.current.get(H))==null?void 0:ce.value)&&(s.current.set(H,{value:J,keywords:ie}),r.current.filtered.items.set(H,D(J,ie)),O(2,()=>{z(),I.emit()}))},item:(H,J)=>(n.current.add(H),J&&(i.current.has(J)?i.current.get(J).add(H):i.current.set(J,new Set([H]))),O(3,()=>{q(),z(),r.current.value||F(),I.emit()}),()=>{s.current.delete(H),n.current.delete(H),r.current.filtered.items.delete(H);let ie=re();O(4,()=>{q(),(ie==null?void 0:ie.getAttribute("id"))===H&&F(),I.emit()})}),group:H=>(i.current.has(H)||i.current.set(H,new Set),()=>{s.current.delete(H),i.current.delete(H)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:S,inputId:j,labelId:E,listInnerRef:T}),[]);function D(H,J){var ie,ce;let me=(ce=(ie=l.current)==null?void 0:ie.filter)!=null?ce:h9t;return H?me(H,r.current.search,J):0}function z(){if(!r.current.search||l.current.shouldFilter===!1)return;let H=r.current.filtered.items,J=[];r.current.filtered.groups.forEach(ce=>{let me=i.current.get(ce),he=0;me.forEach(_e=>{let ue=H.get(_e);he=Math.max(ue,he)}),J.push([ce,he])});let ie=T.current;Z().sort((ce,me)=>{var he,_e;let ue=ce.getAttribute("id"),je=me.getAttribute("id");return((he=H.get(je))!=null?he:0)-((_e=H.get(ue))!=null?_e:0)}).forEach(ce=>{let me=ce.closest(gz);me?me.appendChild(ce.parentElement===me?ce:ce.closest(`${gz} > *`)):ie.appendChild(ce.parentElement===ie?ce:ce.closest(`${gz} > *`))}),J.sort((ce,me)=>me[1]-ce[1]).forEach(ce=>{var me;let he=(me=T.current)==null?void 0:me.querySelector(`${ET}[${jS}="${encodeURIComponent(ce[0])}"]`);he==null||he.parentElement.appendChild(he)})}function F(){let H=Z().find(ie=>ie.getAttribute("aria-disabled")!=="true"),J=H==null?void 0:H.getAttribute(jS);I.setState("value",J||void 0)}function q(){var H,J,ie,ce;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let me=0;for(let he of n.current){let _e=(J=(H=s.current.get(he))==null?void 0:H.value)!=null?J:"",ue=(ce=(ie=s.current.get(he))==null?void 0:ie.keywords)!=null?ce:[],je=D(_e,ue);r.current.filtered.items.set(he,je),je>0&&me++}for(let[he,_e]of i.current)for(let ue of _e)if(r.current.filtered.items.get(ue)>0){r.current.filtered.groups.add(he);break}r.current.filtered.count=me}function Q(){var H,J,ie;let ce=re();ce&&(((H=ce.parentElement)==null?void 0:H.firstChild)===ce&&((ie=(J=ce.closest(ET))==null?void 0:J.querySelector(d9t))==null||ie.scrollIntoView({block:"nearest"})),ce.scrollIntoView({block:"nearest"}))}function re(){var H;return(H=T.current)==null?void 0:H.querySelector(`${uPe}[aria-selected="true"]`)}function Z(){var H;return Array.from(((H=T.current)==null?void 0:H.querySelectorAll(wfe))||[])}function se(H){let J=Z()[H];J&&I.setState("value",J.getAttribute(jS))}function K(H){var J;let ie=re(),ce=Z(),me=ce.findIndex(_e=>_e===ie),he=ce[me+H];(J=l.current)!=null&&J.loop&&(he=me+H<0?ce[ce.length-1]:me+H===ce.length?ce[0]:ce[me+H]),he&&I.setState("value",he.getAttribute(jS))}function X(H){let J=re(),ie=J==null?void 0:J.closest(ET),ce;for(;ie&&!ce;)ie=H>0?w9t(ie,ET):_9t(ie,ET),ce=ie==null?void 0:ie.querySelector(wfe);ce?I.setState("value",ce.getAttribute(jS)):K(H)}let Y=()=>se(Z().length-1),oe=H=>{H.preventDefault(),H.metaKey?Y():H.altKey?X(1):K(1)},xe=H=>{H.preventDefault(),H.metaKey?se(0):H.altKey?X(-1):K(-1)};return C.createElement(Dr.div,{ref:e,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:H=>{var J;(J=w.onKeyDown)==null||J.call(w,H);let ie=H.nativeEvent.isComposing||H.keyCode===229;if(!(H.defaultPrevented||ie))switch(H.key){case"n":case"j":{y&&H.ctrlKey&&oe(H);break}case"ArrowDown":{oe(H);break}case"p":case"k":{y&&H.ctrlKey&&xe(H);break}case"ArrowUp":{xe(H);break}case"Home":{H.preventDefault(),se(0);break}case"End":{H.preventDefault(),Y();break}case"Enter":{H.preventDefault();let ce=re();if(ce){let me=new Event(CK);ce.dispatchEvent(me)}}}}},C.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:E9t},c),ZB(t,H=>C.createElement(hPe.Provider,{value:I},C.createElement(dPe.Provider,{value:M},H))))}),f9t=C.forwardRef((t,e)=>{var r,n;let i=bl(),s=C.useRef(null),o=C.useContext(fPe),l=YI(),c=pPe(t),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;aN(()=>{if(!u)return l.item(i,o==null?void 0:o.id)},[u]);let d=gPe(i,s,[t.value,t.children,s],t.keywords),h=bee(),f=Rb(O=>O.value&&O.value===d.current),m=Rb(O=>u||l.filter()===!1?!0:O.search?O.filtered.items.get(i)>0:!0);C.useEffect(()=>{let O=s.current;if(!(!O||t.disabled))return O.addEventListener(CK,x),()=>O.removeEventListener(CK,x)},[m,t.onSelect,t.disabled]);function x(){var O,I;g(),(I=(O=c.current).onSelect)==null||I.call(O,d.current)}function g(){h.setState("value",d.current,!0)}if(!m)return null;let{disabled:y,value:w,onSelect:S,forceMount:E,keywords:j,...T}=t;return C.createElement(Dr.div,{ref:bv(s,e),...T,id:i,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!f,"data-disabled":!!y,"data-selected":!!f,onPointerMove:y||l.getDisablePointerSelection()?void 0:g,onClick:y?void 0:x},t.children)}),m9t=C.forwardRef((t,e)=>{let{heading:r,children:n,forceMount:i,...s}=t,o=bl(),l=C.useRef(null),c=C.useRef(null),u=bl(),d=YI(),h=Rb(m=>i||d.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);aN(()=>d.group(o),[]),gPe(o,l,[t.value,t.heading,c]);let f=C.useMemo(()=>({id:o,forceMount:i}),[i]);return C.createElement(Dr.div,{ref:bv(l,e),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&C.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),ZB(t,m=>C.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},C.createElement(fPe.Provider,{value:f},m))))}),p9t=C.forwardRef((t,e)=>{let{alwaysRender:r,...n}=t,i=C.useRef(null),s=Rb(o=>!o.search);return!r&&!s?null:C.createElement(Dr.div,{ref:bv(i,e),...n,"cmdk-separator":"",role:"separator"})}),g9t=C.forwardRef((t,e)=>{let{onValueChange:r,...n}=t,i=t.value!=null,s=bee(),o=Rb(u=>u.search),l=Rb(u=>u.selectedItemId),c=YI();return C.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),C.createElement(Dr.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:i?t.value:o,onChange:u=>{i||s.setState("search",u.target.value),r==null||r(u.target.value)}})}),x9t=C.forwardRef((t,e)=>{let{children:r,label:n="Suggestions",...i}=t,s=C.useRef(null),o=C.useRef(null),l=Rb(u=>u.selectedItemId),c=YI();return C.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=u.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return f.observe(u),()=>{cancelAnimationFrame(h),f.unobserve(u)}}},[]),C.createElement(Dr.div,{ref:bv(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},ZB(t,u=>C.createElement("div",{ref:bv(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),v9t=C.forwardRef((t,e)=>{let{open:r,onOpenChange:n,overlayClassName:i,contentClassName:s,container:o,...l}=t;return C.createElement(lI,{open:r,onOpenChange:n},C.createElement(cI,{container:o},C.createElement(uN,{"cmdk-overlay":"",className:i}),C.createElement(dN,{"aria-label":t.label,"cmdk-dialog":"",className:s},C.createElement(mPe,{ref:e,...l}))))}),y9t=C.forwardRef((t,e)=>Rb(r=>r.filtered.count===0)?C.createElement(Dr.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),b9t=C.forwardRef((t,e)=>{let{progress:r,children:n,label:i="Loading...",...s}=t;return C.createElement(Dr.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},ZB(t,o=>C.createElement("div",{"aria-hidden":!0},o)))}),yh=Object.assign(mPe,{List:x9t,Item:f9t,Input:g9t,Group:m9t,Separator:p9t,Dialog:v9t,Empty:y9t,Loading:b9t});function w9t(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function _9t(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function pPe(t){let e=C.useRef(t);return aN(()=>{e.current=t}),e}var aN=typeof window>"u"?C.useEffect:C.useLayoutEffect;function AS(t){let e=C.useRef();return e.current===void 0&&(e.current=t()),e}function Rb(t){let e=bee(),r=()=>t(e.snapshot());return C.useSyncExternalStore(e.subscribe,r,r)}function gPe(t,e,r,n=[]){let i=C.useRef(),s=YI();return aN(()=>{var o;let l=(()=>{var u;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=n.map(u=>u.trim());s.value(t,l,c),(o=e.current)==null||o.setAttribute(jS,l),i.current=l}),i}var N9t=()=>{let[t,e]=C.useState(),r=AS(()=>new Map);return aN(()=>{r.current.forEach(n=>n()),r.current=new Map},[t]),(n,i)=>{r.current.set(n,i),e({})}};function S9t(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function ZB({asChild:t,children:e},r){return t&&C.isValidElement(e)?C.cloneElement(S9t(e),{ref:e.ref},r(e.props.children)):r(e)}var E9t={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const TK=C.forwardRef(({className:t,...e},r)=>a.jsx(yh,{ref:r,className:Ut("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));TK.displayName=yh.displayName;const PK=C.forwardRef(({className:t,...e},r)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(Jp,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(yh.Input,{ref:r,className:Ut("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));PK.displayName=yh.Input.displayName;const kK=C.forwardRef(({className:t,...e},r)=>a.jsx(yh.List,{ref:r,className:Ut("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));kK.displayName=yh.List.displayName;const OK=C.forwardRef((t,e)=>a.jsx(yh.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));OK.displayName=yh.Empty.displayName;const IK=C.forwardRef(({className:t,...e},r)=>a.jsx(yh.Group,{ref:r,className:Ut("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));IK.displayName=yh.Group.displayName;const j9t=C.forwardRef(({className:t,...e},r)=>a.jsx(yh.Separator,{ref:r,className:Ut("-mx-1 h-px bg-border",t),...e}));j9t.displayName=yh.Separator.displayName;const RK=C.forwardRef(({className:t,...e},r)=>a.jsx(yh.Item,{ref:r,className:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));RK.displayName=yh.Item.displayName;const GD=t=>{const e=t.match(/\d+$/);return e?parseInt(e[0],10):0},_fe=t=>{if(!t)return"";const e=t.match(/\d+/);return e?String(parseInt(e[0],10)):""},A9t=()=>{var Xt,Jt,_r;const[t,e]=C.useState([]),[r,n]=C.useState([]),[i,s]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState(null),[d,h]=C.useState(!1),[f,m]=C.useState(!1),[x,g]=C.useState(null),[y,w]=C.useState(new Set),[S]=C.useState(50),[E,j]=C.useState({}),[T,O]=C.useState(!1),[I,M]=C.useState(null),[D,z]=C.useState(""),[F,q]=C.useState(""),[Q,re]=C.useState(null),[Z,se]=C.useState(!1),[K,X]=C.useState(!1),[Y,oe]=C.useState(!1),[xe,H]=C.useState(!1),{toast:J}=Qi(),ie=C.useMemo(()=>{if(!I)return[];const lt=t.find(pt=>pt.id===I);return lt?lt.quotas.filter(pt=>!pt.id_investidor).map(pt=>({id:pt.id,numero_quota:pt.numero_quota,num:GD(pt.numero_quota)})).sort((pt,er)=>pt.num-er.num):[]},[I,t]);C.useEffect(()=>{ce()},[]);const ce=async()=>{try{s(!0);const{data:lt,error:pt}=await Ee.from("cdv_investidores").select("*").order("razao_social");if(pt)throw pt;n(lt||[]);const{data:er,error:Vt}=await Ee.from("cdv_projetos").select("id, titulo, prazo_maturacao_meses, total_quotas").order("created_at",{ascending:!1});if(Vt)throw Vt;const Kt=await Promise.all((er||[]).map(async ur=>{let rt=[],Lt=0;const Dt=1e3;let Fe=!0;for(;Fe;){const{data:ut,error:Mt}=await Ee.from("cdv_quotas").select(`
                *,
                cdv_investidores (
                  razao_social,
                  cnpj
                )
              `).eq("id_projeto",ur.id).order("numero_quota").range(Lt,Lt+Dt-1);if(Mt)throw Mt;ut&&ut.length>0?(rt=[...rt,...ut],Lt+=Dt,Fe=ut.length===Dt):Fe=!1}return{...ur,quotas:rt}}));e(Kt)}catch(lt){J({title:"Erro ao carregar dados",description:lt.message,variant:"destructive"})}finally{s(!1)}},me=lt=>{const pt=lt.meta_kg_residuos||250,er=lt.meta_horas_educacao||5,Vt=lt.meta_embalagens||1,Kt=Math.min(lt.kg_conciliados/pt*100,100),ur=Math.min(lt.horas_conciliadas/er*100,100),rt=Math.min(lt.embalagens_conciliadas/Vt*100,100);return Math.min((Kt+ur+rt)/3,100)},he=(lt,pt)=>{if(!lt.data_maturacao||!pt.prazo_maturacao_meses)return"N/A";const er=Math.ceil(pt.prazo_maturacao_meses/12),Vt=Math.ceil(pt.total_quotas/er),Kt=parseInt(lt.numero_quota.split("-")[1]);return`${Math.ceil(Kt/Vt)} Ano`},_e=lt=>lt?new Date(lt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"No definido",ue=lt=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(lt),je=lt=>{const pt={em_geracao:{label:"Em Gerao",variant:"secondary"},pronto:{label:"Pronto",variant:"default"},certificado_emitido:{label:"Certificado Emitido",variant:"default"}},er=pt[lt]||pt.em_geracao;return a.jsx(Bt,{variant:er.variant,children:er.label})},ye=lt=>{if(!lt.status_maturacao)return a.jsx(Bt,{variant:"secondary",children:"No atribuda"});const pt={no_prazo:{icon:ta,label:"No Prazo",variant:"default"},em_maturacao:{icon:Tg,label:"Em Maturao",variant:"secondary"},atrasada:{icon:Pg,label:"Atrasada",variant:"destructive"}},er=pt[lt.status_maturacao]||pt.no_prazo,Vt=er.icon;return a.jsxs(Bt,{variant:er.variant,className:"flex items-center gap-1",children:[a.jsx(Vt,{className:"h-3 w-3"}),er.label]})},Le=lt=>{const pt=new Map,er=lt.filter(Vt=>!Vt.id_investidor);return er.length>0&&pt.set("disponivel",{investidor:null,quotas:er,progressoTotal:0,todasCompletas:!1}),lt.filter(Vt=>Vt.id_investidor).forEach(Vt=>{const Kt=Vt.id_investidor;pt.has(Kt)||pt.set(Kt,{investidor:Vt.cdv_investidores?{id:Vt.id_investidor,razao_social:Vt.cdv_investidores.razao_social,cnpj:Vt.cdv_investidores.cnpj}:null,quotas:[],progressoTotal:0,todasCompletas:!1}),pt.get(Kt).quotas.push(Vt)}),pt.forEach(Vt=>{if(Vt.investidor){const Kt=Vt.quotas.map(me);Vt.progressoTotal=Kt.reduce((ur,rt)=>ur+rt,0)/Kt.length,Vt.todasCompletas=Vt.quotas.every(ur=>me(ur)>=100)}}),Array.from(pt.values())},Ge=async lt=>{try{const{data:pt,error:er}=await Ee.from("cdv_investidores").select("*").eq("id",lt).single();if(er||!pt){console.error("Investidor no encontrado:",er);return}if(pt.convite_enviado)return;const Vt=Math.random().toString(36).slice(-12)+"A1!",{data:Kt,error:ur}=await Ee.auth.signUp({email:pt.email,password:Vt,options:{data:{nome:pt.nome_responsavel,tipo_pessoa:"PJ",cnpj:pt.cnpj,cep:"00000-000",role:"investidor"},emailRedirectTo:Ng("/cdv/investor")}});if(ur)throw console.error("Erro ao criar usurio auth:",ur),ur;if(!Kt.user)throw new Error("Falha ao criar usurio");await new Promise(ut=>setTimeout(ut,1e3));try{await Ee.rpc("confirmar_email_usuario",{usuario_id:Kt.user.id})}catch(ut){console.error("Erro ao confirmar email automaticamente:",ut)}await Ee.from("cdv_investidores").update({id_user:Kt.user.id}).eq("id",lt);const{error:rt}=await Ee.from("user_roles").insert({user_id:Kt.user.id,role:"investidor"}).select().single();rt&&!rt.message.includes("duplicate key")&&console.error("Erro ao atribuir role investidor:",rt);const{data:Lt,error:Dt}=await Ee.auth.resetPasswordForEmail(pt.email,{redirectTo:Ng("/reset-password")});Dt&&console.error("Erro ao gerar link de reset:",Dt);const{error:Fe}=await Ee.functions.invoke("enviar-convite-investidor",{body:{email:pt.email,razaoSocial:pt.razao_social,nomeResponsavel:pt.nome_responsavel,resetLink:Ng("/reset-password"),idInvestidor:lt}});if(Fe)throw console.error("Erro ao enviar email de convite:",Fe),Fe;J({title:"Convite enviado",description:`Email de acesso enviado para ${pt.email}`})}catch(pt){console.error("Erro ao enviar convite:",pt),J({title:"Aviso",description:"Quotas atribudas, mas houve um problema ao enviar o email de convite.",variant:"destructive"})}},Be=async()=>{if(!(!o||!c))try{const lt=t.find(rt=>rt.quotas.some(Lt=>Lt.id===o));if(!lt)return;const pt=r.find(rt=>rt.id===c),er=!(pt!=null&&pt.convite_enviado),Vt=new Date,Kt=new Date(Vt);Kt.setMonth(Kt.getMonth()+lt.prazo_maturacao_meses);const{error:ur}=await Ee.from("cdv_quotas").update({id_investidor:c,data_atribuicao:Vt.toISOString(),data_maturacao:Kt.toISOString(),status_maturacao:"no_prazo"}).eq("id",o);if(ur)throw ur;er&&await Ge(c),J({title:"Investidor atribudo",description:er?"Quota atribuda e convite de acesso enviado ao investidor.":"Quota atribuda com sucesso ao investidor."}),h(!1),l(null),u(null),ce()}catch(lt){J({title:"Erro ao atribuir investidor",description:lt.message,variant:"destructive"})}},Te=()=>{if(!I||!D||!F)return[];const lt=parseInt(D,10),pt=parseInt(F,10);if(isNaN(lt)||isNaN(pt)||lt<=0||pt<=0)return[];const[er,Vt]=lt<=pt?[lt,pt]:[pt,lt],Kt=t.find(ur=>ur.id===I);return Kt?Kt.quotas.filter(ur=>{if(ur.id_investidor)return!1;const rt=GD(ur.numero_quota);return rt>=er&&rt<=Vt}).sort((ur,rt)=>GD(ur.numero_quota)-GD(rt.numero_quota)):[]},ze=()=>{if(!I)return{total:0,available:0,inRange:0};const lt=t.find(Vt=>Vt.id===I);if(!lt)return{total:0,available:0,inRange:0};const pt=lt.quotas.filter(Vt=>!Vt.id_investidor).length,er=Te().length;return{total:lt.total_quotas||0,available:pt,inRange:er}},tt=async()=>{if(!Q||!I){J({title:"Campos obrigatrios",description:"Selecione o projeto e o investidor.",variant:"destructive"});return}const lt=Te();if(lt.length===0){J({title:"Nenhuma quota no range",description:"O range especificado no contm quotas disponveis para atribuio.",variant:"destructive"});return}try{X(!0);const pt=t.find(Dt=>Dt.id===I);if(!pt)throw new Error("Projeto no encontrado");const er=r.find(Dt=>Dt.id===Q),Vt=!(er!=null&&er.convite_enviado),Kt=new Date,ur=new Date(Kt);ur.setMonth(ur.getMonth()+(pt.prazo_maturacao_meses||12));const rt=lt.map(Dt=>Dt.id),{error:Lt}=await Ee.from("cdv_quotas").update({id_investidor:Q,data_atribuicao:Kt.toISOString(),data_maturacao:ur.toISOString(),status_maturacao:"no_prazo"}).in("id",rt);if(Lt)throw Lt;Vt&&await Ge(Q),J({title:"Quotas atribudas com sucesso!",description:Vt?`${lt.length} quota(s) atribuda(s) e convite enviado ao investidor.`:`${lt.length} quota(s) atribuda(s) ao investidor.`}),se(!1),M(null),z(""),q(""),re(null),ce()}catch(pt){console.error("Erro ao atribuir quotas:",pt),J({title:"Erro ao atribuir investidor",description:pt.message,variant:"destructive"})}finally{X(!1)}},Re=async()=>{if(!(!x||!x.investidor))try{const lt=x.quotas.map(Fe=>Fe.id),pt=t.find(Fe=>Fe.quotas.some(ut=>lt.includes(ut.id)));if(!pt)return;const er=x.quotas.reduce((Fe,ut)=>Fe+ut.kg_conciliados,0),Vt=x.quotas.reduce((Fe,ut)=>Fe+ut.horas_conciliadas,0),Kt=x.quotas.reduce((Fe,ut)=>Fe+ut.embalagens_conciliadas,0),ur=`CDV-${new Date().getFullYear()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,rt=Math.random().toString(36).substr(2,16).toUpperCase(),{error:Lt}=await Ee.from("cdv_certificados").insert({id_projeto:pt.id,id_investidor:x.investidor.id,quotas_incluidas:lt,total_quotas:lt.length,numero_certificado:ur,hash_validacao:rt,cnpj:x.investidor.cnpj,razao_social:x.investidor.razao_social,kg_certificados:er,horas_certificadas:Vt,embalagens_certificadas:Kt,periodo_inicio:x.quotas[0].data_compra,periodo_fim:x.quotas[0].data_maturacao});if(Lt)throw Lt;const{error:Dt}=await Ee.from("cdv_quotas").update({status:"certificado_emitido"}).in("id",lt);if(Dt)throw Dt;J({title:"Certificado emitido",description:`Certificado ${ur} emitido com sucesso para ${x.quotas.length} quota(s).`}),m(!1),g(null),ce()}catch(lt){J({title:"Erro ao emitir certificado",description:lt.message,variant:"destructive"})}},Ue=lt=>{w(pt=>{const er=new Set(pt);return er.has(lt)?er.delete(lt):(er.add(lt),E[lt]||j(Vt=>({...Vt,[lt]:1}))),er})},xt=lt=>{j(pt=>({...pt,[lt]:(pt[lt]||1)+1}))},st=async lt=>{try{O(!0);const{data:pt,error:er}=await Ee.rpc("distribuir_datas_maturacao_quotas",{p_id_projeto:lt});if(er)throw er;J({title:"Datas distribudas",description:`${pt} quotas tiveram suas datas de maturao distribudas automaticamente.`}),ce()}catch(pt){J({title:"Erro ao distribuir datas",description:pt.message,variant:"destructive"})}finally{O(!1)}};return i?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Quotas CDV por Projeto"}),a.jsx("p",{className:"text-muted-foreground",children:"Gesto de quotas agrupadas por projeto e investidor"})]})}),a.jsxs(it,{className:"border-primary/30 bg-primary/5",children:[a.jsxs(At,{className:"pb-4",children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"h-5 w-5"}),"Atribuio em Lote"]}),a.jsx(gr,{children:"Digite o range de nmeros de quota (ex: 1 at 100) para atribuir ao investidor"})]}),a.jsxs(ht,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Projeto"}),a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Nf,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),a.jsx(Gc,{side:"top",className:"max-w-xs",children:a.jsx("p",{children:"Selecione o projeto CDV que contm as quotas a serem atribudas. Apenas projetos com quotas disponveis so mostrados."})})]})]}),a.jsxs(wi,{value:I||"",onValueChange:lt=>{M(lt),z(""),q("")},children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o projeto"})}),a.jsx(xi,{children:t.map(lt=>{const pt=lt.quotas.filter(er=>!er.id_investidor).length;return a.jsxs(or,{value:lt.id,disabled:pt===0,children:[lt.titulo," (",pt," disponveis)"]},lt.id)})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Quota Inicial (n)"}),a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Nf,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),a.jsx(Gc,{side:"top",className:"max-w-xs",children:a.jsx("p",{children:"Digite ou selecione a primeira quota do range a ser atribudo."})})]})]}),a.jsxs(ng,{open:Y,onOpenChange:oe,children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",role:"combobox","aria-expanded":Y,disabled:!I,className:"w-full justify-between font-normal",children:[D?a.jsx("span",{children:((Xt=ie.find(lt=>String(lt.num)===D))==null?void 0:Xt.numero_quota)||`N ${D}`}):a.jsx("span",{className:"text-muted-foreground",children:"Ex: 1 ou CIC-0001"}),a.jsx(ire,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(Rp,{className:"w-[240px] p-0",align:"start",children:a.jsxs(TK,{shouldFilter:!1,children:[a.jsx(PK,{placeholder:"Digite n ou cdigo (ex: CIC-0001)...",onValueChange:lt=>{const pt=_fe(lt);(pt||lt==="")&&z(pt)}}),a.jsxs(kK,{children:[a.jsx(OK,{children:D?a.jsxs("div",{className:"w-full p-2 text-sm text-left hover:bg-accent rounded cursor-pointer",onClick:()=>{oe(!1)},children:["Usar: ",a.jsxs("span",{className:"font-medium",children:["Quota n ",D]})]}):"Digite um nmero ou cdigo de quota"}),a.jsx(IK,{heading:`Quotas disponveis (${ie.length})`,children:ie.filter(lt=>!D||String(lt.num).includes(D)||lt.numero_quota.toLowerCase().includes(D.toLowerCase())).map(lt=>a.jsxs(RK,{value:lt.numero_quota,onSelect:()=>{z(String(lt.num)),oe(!1)},children:[a.jsx(xl,{className:Ut("mr-2 h-4 w-4",D===String(lt.num)?"opacity-100":"opacity-0")}),lt.numero_quota," (n ",lt.num,")"]},lt.id))})]})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Quota Final (n)"}),a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Nf,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),a.jsx(Gc,{side:"top",className:"max-w-xs",children:a.jsx("p",{children:"Digite ou selecione a ltima quota do range. Todas as quotas disponveis entre a inicial e final sero atribudas."})})]})]}),a.jsxs(ng,{open:xe,onOpenChange:H,children:[a.jsx(ig,{asChild:!0,children:a.jsxs(Oe,{variant:"outline",role:"combobox","aria-expanded":xe,disabled:!I,className:"w-full justify-between font-normal",children:[F?a.jsx("span",{children:((Jt=ie.find(lt=>String(lt.num)===F))==null?void 0:Jt.numero_quota)||`N ${F}`}):a.jsx("span",{className:"text-muted-foreground",children:"Ex: 100 ou CIC-0100"}),a.jsx(ire,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(Rp,{className:"w-[240px] p-0",align:"start",children:a.jsxs(TK,{shouldFilter:!1,children:[a.jsx(PK,{placeholder:"Digite n ou cdigo (ex: CIC-0100)...",onValueChange:lt=>{const pt=_fe(lt);(pt||lt==="")&&q(pt)}}),a.jsxs(kK,{children:[a.jsx(OK,{children:F?a.jsxs("div",{className:"w-full p-2 text-sm text-left hover:bg-accent rounded cursor-pointer",onClick:()=>{H(!1)},children:["Usar: ",a.jsxs("span",{className:"font-medium",children:["Quota n ",F]})]}):"Digite um nmero ou cdigo de quota"}),a.jsx(IK,{heading:`Quotas disponveis (${ie.length})`,children:ie.filter(lt=>!F||String(lt.num).includes(F)||lt.numero_quota.toLowerCase().includes(F.toLowerCase())).map(lt=>a.jsxs(RK,{value:lt.numero_quota,onSelect:()=>{q(String(lt.num)),H(!1)},children:[a.jsx(xl,{className:Ut("mr-2 h-4 w-4",F===String(lt.num)?"opacity-100":"opacity-0")}),lt.numero_quota," (n ",lt.num,")"]},lt.id))})]})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Investidor"}),a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Nf,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),a.jsx(Gc,{side:"top",className:"max-w-xs",children:a.jsx("p",{children:"Investidor que receber as quotas. Se for a primeira atribuio deste investidor, um convite de acesso ser enviado automaticamente."})})]})]}),a.jsxs(wi,{value:Q||"",onValueChange:re,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o investidor"})}),a.jsx(xi,{children:r.map(lt=>a.jsx(or,{value:lt.id,children:lt.razao_social},lt.id))})]})]}),a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Oe,{onClick:()=>se(!0),disabled:!D||!F||!Q||!I||K,className:"w-full",children:K?"Atribuindo...":`Atribuir ${Te().length>0?`${Te().length} quota(s)`:""}`})}),a.jsx(Gc,{side:"bottom",className:"max-w-xs",children:a.jsx("p",{children:"Confirme e atribua todas as quotas do range selecionado ao investidor. As quotas j atribudas sero ignoradas."})})]})]}),I&&a.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg text-sm",children:a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("span",{children:["Total de quotas: ",a.jsx("strong",{children:ze().total})]}),a.jsxs("span",{children:["Disponveis: ",a.jsx("strong",{className:"text-primary",children:ze().available})]}),Te().length>0&&a.jsxs("span",{children:["No range selecionado: ",a.jsx("strong",{className:"text-green-600",children:ze().inRange})]})]})})]})]}),t.length===0?a.jsx(it,{children:a.jsx(ht,{className:"py-8 text-center text-muted-foreground",children:"Nenhum projeto com quotas encontrado."})}):a.jsx("div",{className:"space-y-4",children:t.map(lt=>{const pt=E[lt.id]||1,er=lt.quotas.slice(0,pt*S),Vt=Le(er),Kt=y.has(lt.id),ur=lt.total_quotas||0,rt=lt.quotas.filter(Fe=>Fe.id_investidor).length,Lt=ur-rt,Dt=er.length<lt.quotas.length;return a.jsx(it,{children:a.jsxs(w6,{open:Kt,onOpenChange:()=>Ue(lt.id),children:[a.jsxs(At,{className:"p-0",children:[a.jsx(_6,{className:"w-full",children:a.jsx("div",{className:"cursor-pointer hover:bg-accent/50 transition-colors p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(qu,{className:"h-6 w-6 text-primary"}),a.jsxs("div",{className:"text-left",children:[a.jsx(Ct,{children:lt.titulo}),a.jsxs(gr,{children:[ur," quotas totais  ",rt," atribudas  ",Lt," ","disponveis"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Bt,{variant:"outline",children:["Prazo: ",lt.prazo_maturacao_meses||12," meses"]}),a.jsx(Hs,{className:`h-5 w-5 transition-transform ${Kt?"rotate-180":""}`})]})]})})}),!Kt&&a.jsx("div",{className:"px-6 pb-4",children:a.jsxs(Oe,{variant:"outline",size:"sm",onClick:Fe=>{Fe.stopPropagation(),st(lt.id)},disabled:T,children:[a.jsx(Gl,{className:"h-4 w-4 mr-2"}),"Distribuir Datas de Maturao"]})})]}),a.jsx(N6,{children:a.jsxs(ht,{className:"space-y-6 pt-0",children:[a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-muted",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Quota"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Bloco"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Vencimento"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Investidor"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Maturao"}),a.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Progresso"}),a.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Valor"})]})}),a.jsx("tbody",{className:"divide-y",children:er.map(Fe=>{const ut=me(Fe),Mt=Fe.cdv_investidores;return a.jsxs("tr",{className:"hover:bg-muted/50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx(Bt,{variant:"outline",className:"font-mono",children:Fe.numero_quota})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(Bt,{variant:"secondary",children:he(Fe,lt)})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:_e(Fe.data_maturacao)}),a.jsx("td",{className:"px-4 py-3 text-sm",children:Mt?a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:Mt.razao_social}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Mt.cnpj})]}):a.jsx("span",{className:"text-muted-foreground",children:"Disponvel"})}),a.jsx("td",{className:"px-4 py-3",children:je(Fe.status)}),a.jsx("td",{className:"px-4 py-3",children:ye(Fe)}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(fc,{value:ut,className:"w-24 h-2"}),a.jsxs("span",{className:"text-sm font-medium w-12 text-right",children:[ut.toLocaleString("pt-BR",{maximumFractionDigits:0}),"%"]})]})}),a.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium",children:ue(Fe.valor_pago)})]},Fe.id)})})]})})}),Dt&&a.jsx("div",{className:"flex justify-center",children:a.jsxs(Oe,{variant:"outline",onClick:()=>xt(lt.id),children:["Carregar mais quotas (",er.length," de ",lt.quotas.length,")"]})}),a.jsx("div",{className:"space-y-4 mt-6",children:Vt.map((Fe,ut)=>Fe.investidor?a.jsx("div",{className:"border rounded-lg p-4 space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:Fe.investidor.razao_social}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["CNPJ: ",Fe.investidor.cnpj,"  ",Fe.quotas.length," quota",Fe.quotas.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Progresso Total"}),a.jsxs("p",{className:"text-xl font-bold",children:[Fe.progressoTotal.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1}),"%"]})]}),Fe.todasCompletas&&a.jsxs(Oe,{onClick:()=>{g(Fe),m(!0)},className:"gap-2",children:[a.jsx(qu,{className:"h-4 w-4"}),"Emitir Certificado"]})]})]})},ut):null)})]})})]})},lt.id)})}),a.jsx(S_,{open:d,onOpenChange:h,children:a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsx(ob,{children:"Atribuir Investidor  Quota"}),a.jsx(lb,{children:"Confirma a atribuio desta quota ao investidor selecionado? A data de maturao ser calculada automaticamente."})]}),a.jsxs(ab,{children:[a.jsx(ub,{children:"Cancelar"}),a.jsx(cb,{onClick:Be,children:"Confirmar Atribuio"})]})]})}),a.jsx(S_,{open:f,onOpenChange:m,children:a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsx(ob,{children:"Emitir Certificado Consolidado"}),a.jsx(lb,{children:x&&a.jsxs(a.Fragment,{children:["Ser emitido um certificado consolidado para ",a.jsx("strong",{children:(_r=x.investidor)==null?void 0:_r.razao_social})," ","incluindo ",a.jsx("strong",{children:x.quotas.length})," quota(s) com todos os impactos ambientais devidamente reconciliados e auditados."]})})]}),a.jsxs(ab,{children:[a.jsx(ub,{children:"Cancelar"}),a.jsx(cb,{onClick:Re,children:"Emitir Certificado"})]})]})}),a.jsx(S_,{open:Z,onOpenChange:se,children:a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsx(ob,{children:"Atribuir Quotas em Lote"}),a.jsx(lb,{children:(()=>{const lt=Te(),pt=r.find(er=>er.id===Q);return lt.length===0||!pt?null:a.jsxs(a.Fragment,{children:["Confirma a atribuio de ",a.jsxs("strong",{children:[lt.length," quota(s)"]})," (de ",lt[0].numero_quota," at ",lt[lt.length-1].numero_quota,") ao investidor ",a.jsx("strong",{children:pt.razao_social}),"? A data de maturao ser calculada automaticamente."]})})()})]}),a.jsxs(ab,{children:[a.jsx(ub,{disabled:K,children:"Cancelar"}),a.jsx(cb,{onClick:tt,disabled:K,children:K?"Atribuindo...":"Confirmar Atribuio"})]})]})})]})},C9t=({onNavigateToReconciliation:t})=>{const[e,r]=C.useState({residuos_disponiveis:0,residuos_atribuidos:0,educacao_disponivel:0,educacao_atribuida:0,embalagens_disponiveis:0,embalagens_atribuidas:0}),[n,i]=C.useState([]),[s,o]=C.useState([]),[l,c]=C.useState([]),[u,d]=C.useState(!0),[h,f]=C.useState(!1),{toast:m}=Qi();C.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:w}=await Ee.from("estoque_residuos").select("kg").eq("status","disponivel"),{data:S}=await Ee.from("estoque_residuos").select("kg").eq("status","atribuido"),{data:E}=await Ee.from("estoque_educacao").select("minutos_assistidos").eq("status","disponivel"),{data:j}=await Ee.from("estoque_educacao").select("minutos_assistidos").eq("status","atribuido"),{data:T}=await Ee.from("estoque_embalagens").select("*").eq("status","disponivel"),{data:O}=await Ee.from("estoque_embalagens").select("*").eq("status","atribuido"),{data:I}=await Ee.from("estoque_residuos").select("*, cooperativas(nome_fantasia), cdv_quotas(numero_quota, cdv_projetos(titulo))").order("data_entrega",{ascending:!1}).limit(100),{data:M}=await Ee.from("estoque_educacao").select("*, profiles(nome), cdv_quotas(numero_quota, cdv_projetos(titulo))").order("data",{ascending:!1}).limit(100),{data:D}=await Ee.from("estoque_embalagens").select("*, cdv_quotas(numero_quota, cdv_projetos(titulo))").order("data",{ascending:!1}).limit(100);r({residuos_disponiveis:(w==null?void 0:w.reduce((z,F)=>z+Number(F.kg),0))||0,residuos_atribuidos:(S==null?void 0:S.reduce((z,F)=>z+Number(F.kg),0))||0,educacao_disponivel:(E==null?void 0:E.reduce((z,F)=>z+Number(F.minutos_assistidos),0))/60||0,educacao_atribuida:(j==null?void 0:j.reduce((z,F)=>z+Number(F.minutos_assistidos),0))/60||0,embalagens_disponiveis:(T==null?void 0:T.length)||0,embalagens_atribuidas:(O==null?void 0:O.length)||0}),i(I||[]),o(M||[]),c(D||[])}catch(w){m({title:"Erro ao carregar estatsticas",description:w.message,variant:"destructive"})}finally{d(!1)}},g=w=>new Date(w).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=async()=>{f(!0);try{m({title:"Processando histrico...",description:"Isso pode levar alguns minutos. Aguarde."});const{data:w,error:S}=await Ee.functions.invoke("processar-historico-residuos",{body:{}});if(S)throw S;const{data:E,error:j}=await Ee.functions.invoke("processar-historico-educacao",{body:{}});if(j)throw j;const{data:T,error:O}=await Ee.functions.invoke("processar-historico-embalagens",{body:{}});if(O)throw O;m({title:"Processamento concludo!",description:`
          Resduos: ${w.residuos_registrados||0} registrados
          Educao: ${E.registradas||0} registradas
          Embalagens: ${T.embalagens_registradas||0} registradas
        `}),await x()}catch(w){console.error("Erro ao processar histrico:",w),m({title:"Erro no processamento",description:w.message,variant:"destructive"})}finally{f(!1)}};return u?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs(it,{className:"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:[a.jsx(At,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ps,{className:"h-8 w-8 text-primary"}),a.jsx(Bt,{variant:"outline",className:"text-xs",children:"Resduos Coletados"})]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"text-4xl font-bold text-primary mb-2",children:[As(e.residuos_disponiveis+e.residuos_atribuidos)," kg"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Disponvel"}),a.jsxs("p",{className:"font-semibold",children:[As(e.residuos_disponiveis)," kg"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Atribudo"}),a.jsxs("p",{className:"font-semibold",children:[As(e.residuos_atribuidos)," kg"]})]})]})]})]}),a.jsxs(it,{className:"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:[a.jsx(At,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ah,{className:"h-8 w-8 text-primary"}),a.jsx(Bt,{variant:"outline",className:"text-xs",children:"Educao Ambiental"})]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"text-4xl font-bold text-primary mb-2",children:[As(e.educacao_disponivel+e.educacao_atribuida,1)," h"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Disponvel"}),a.jsxs("p",{className:"font-semibold",children:[As(e.educacao_disponivel,1)," h"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Atribudo"}),a.jsxs("p",{className:"font-semibold",children:[As(e.educacao_atribuida,1)," h"]})]})]})]})]}),a.jsxs(it,{className:"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:[a.jsx(At,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Yn,{className:"h-8 w-8 text-primary"}),a.jsx(Bt,{variant:"outline",className:"text-xs",children:"Embalagens Catalogadas"})]})}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:e.embalagens_disponiveis+e.embalagens_atribuidas}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Disponvel"}),a.jsx("p",{className:"font-semibold",children:e.embalagens_disponiveis})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Atribudo"}),a.jsx("p",{className:"font-semibold",children:e.embalagens_atribuidas})]})]})]})]})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(PM,{className:"w-5 h-5"}),"Estoque Detalhado de Impactos CDV"]}),a.jsx(gr,{children:"Visualizao consolidada dos impactos acumulados no sistema"})]}),a.jsx(Oe,{onClick:y,disabled:h,variant:"outline",size:"sm",children:h?"Processando...":" Processar Histrico"})]})}),a.jsx(ht,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[a.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"text-primary",children:""}),"Como Funciona o Estoque de Impactos"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary font-bold mt-0.5",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Resduos:"})," Gerados automaticamente quando cooperativas finalizam entregas validadas"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary font-bold mt-0.5",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Educao:"})," Registrada quando usurios completam misses educacionais (vdeos + quiz)"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary font-bold mt-0.5",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Embalagens:"})," Catalogadas quando produtos com GTIN so cadastrados via notas fiscais"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary font-bold mt-0.5",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Status Disponvel:"})," Impactos prontos para serem atribudos a quotas CDV"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary font-bold mt-0.5",children:""}),a.jsxs("span",{children:[a.jsx("strong",{children:"Status Atribudo:"})," Impactos j reconciliados com quotas CDV especficas"]})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{className:"p-4 border rounded-lg bg-card",children:[a.jsx(ps,{className:"w-8 h-8 text-primary mx-auto mb-2"}),a.jsx("div",{className:"text-3xl font-bold text-primary",children:m$(e.residuos_disponiveis/(e.residuos_disponiveis+e.residuos_atribuidos||1)*100,0)}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Resduos Disponveis"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"para atribuio"})]}),a.jsxs("div",{className:"p-4 border rounded-lg bg-card",children:[a.jsx(ah,{className:"w-8 h-8 text-primary mx-auto mb-2"}),a.jsx("div",{className:"text-3xl font-bold text-primary",children:m$(e.educacao_disponivel/(e.educacao_disponivel+e.educacao_atribuida||1)*100,0)}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Educao Disponvel"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"para atribuio"})]}),a.jsxs("div",{className:"p-4 border rounded-lg bg-card",children:[a.jsx(Yn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),a.jsx("div",{className:"text-3xl font-bold text-primary",children:m$(e.embalagens_disponiveis/(e.embalagens_disponiveis+e.embalagens_atribuidas||1)*100,0)}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Embalagens Disponveis"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"para atribuio"})]})]}),a.jsx("div",{className:"p-4 border-2 border-primary/30 rounded-lg bg-primary/5",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-primary text-primary-foreground rounded-full p-2 mt-1",children:a.jsx(PM,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold mb-1",children:"Prximo Passo: Reconciliao"}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Para atribuir estes impactos disponveis s quotas CDV em gerao, acesse a aba ",a.jsx("strong",{children:"Reconciliao"})," e execute o processo de atribuio automtica."]}),a.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:" A reconciliao vincula automaticamente os impactos acumulados (resduos, educao e embalagens) s quotas que ainda no atingiram 100% das metas."}),a.jsxs(Oe,{variant:"default",size:"sm",onClick:t,className:"gap-2",children:["Ir para Reconciliao",a.jsx(Lu,{className:"w-4 h-4"})]})]})]})})]})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Registros Detalhados de Estoque"}),a.jsx(gr,{children:"Visualize cada registro individual de impacto capturado pelo sistema"})]}),a.jsx(ht,{children:a.jsxs(yc,{defaultValue:"residuos",className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-3",children:[a.jsxs(ri,{value:"residuos",className:"flex items-center gap-2",children:[a.jsx(ps,{className:"w-4 h-4"}),"Resduos"]}),a.jsxs(ri,{value:"educacao",className:"flex items-center gap-2",children:[a.jsx(ah,{className:"w-4 h-4"}),"Educao"]}),a.jsxs(ri,{value:"embalagens",className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"w-4 h-4"}),"Embalagens"]})]}),a.jsx(Ti,{value:"residuos",className:"mt-4",children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Data"}),a.jsx(It,{children:"Submaterial"}),a.jsx(It,{children:"Peso (kg)"}),a.jsx(It,{children:"Cooperativa"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Quota CDV"}),a.jsx(It,{children:"Projeto"})]})}),a.jsx(to,{children:n.length===0?a.jsx(Dn,{children:a.jsx(jt,{colSpan:7,className:"text-center text-muted-foreground",children:"Nenhum registro de resduo encontrado"})}):n.map(w=>{var S,E,j,T;return a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:g(w.data_entrega)}),a.jsx(jt,{children:w.submaterial}),a.jsxs(jt,{children:[As(Number(w.kg),3)," kg"]}),a.jsx(jt,{children:((S=w.cooperativas)==null?void 0:S.nome_fantasia)||"-"}),a.jsx(jt,{children:a.jsx(Bt,{variant:w.status==="disponivel"?"default":"secondary",children:w.status==="disponivel"?"Disponvel":"Atribudo"})}),a.jsx(jt,{children:(E=w.cdv_quotas)!=null&&E.numero_quota?a.jsx(Bt,{variant:"outline",className:"text-xs",children:w.cdv_quotas.numero_quota}):"-"}),a.jsx(jt,{className:"max-w-[150px] truncate",children:((T=(j=w.cdv_quotas)==null?void 0:j.cdv_projetos)==null?void 0:T.titulo)||"-"})]},w.id)})})]})})}),a.jsx(Ti,{value:"educacao",className:"mt-4",children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Data"}),a.jsx(It,{children:"Mdulo"}),a.jsx(It,{children:"Minutos"}),a.jsx(It,{children:"Usurio"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Quota CDV"}),a.jsx(It,{children:"Projeto"})]})}),a.jsx(to,{children:s.length===0?a.jsx(Dn,{children:a.jsx(jt,{colSpan:7,className:"text-center text-muted-foreground",children:"Nenhum registro de educao encontrado"})}):s.map(w=>{var S,E,j,T;return a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:g(w.data)}),a.jsx(jt,{children:w.modulo}),a.jsxs(jt,{children:[As(Number(w.minutos_assistidos),1)," min"]}),a.jsx(jt,{children:((S=w.profiles)==null?void 0:S.nome)||"-"}),a.jsx(jt,{children:a.jsx(Bt,{variant:w.status==="disponivel"?"default":"secondary",children:w.status==="disponivel"?"Disponvel":"Atribudo"})}),a.jsx(jt,{children:(E=w.cdv_quotas)!=null&&E.numero_quota?a.jsx(Bt,{variant:"outline",className:"text-xs",children:w.cdv_quotas.numero_quota}):"-"}),a.jsx(jt,{className:"max-w-[150px] truncate",children:((T=(j=w.cdv_quotas)==null?void 0:j.cdv_projetos)==null?void 0:T.titulo)||"-"})]},w.id)})})]})})}),a.jsx(Ti,{value:"embalagens",className:"mt-4",children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Data"}),a.jsx(It,{children:"GTIN"}),a.jsx(It,{children:"Produto"}),a.jsx(It,{children:"Tipo Embalagem"}),a.jsx(It,{children:"Reciclabilidade"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Quota CDV"}),a.jsx(It,{children:"Projeto"})]})}),a.jsx(to,{children:l.length===0?a.jsx(Dn,{children:a.jsx(jt,{colSpan:8,className:"text-center text-muted-foreground",children:"Nenhum registro de embalagem encontrado"})}):l.map(w=>{var S,E,j;return a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:g(w.data)}),a.jsx(jt,{children:w.gtin}),a.jsx(jt,{children:w.nome_produto}),a.jsx(jt,{children:w.tipo_embalagem||"-"}),a.jsx(jt,{children:w.reciclabilidade!==null?`${As(Number(w.reciclabilidade),0)}%`:"-"}),a.jsx(jt,{children:a.jsx(Bt,{variant:w.status==="disponivel"?"default":"secondary",children:w.status==="disponivel"?"Disponvel":"Atribudo"})}),a.jsx(jt,{children:(S=w.cdv_quotas)!=null&&S.numero_quota?a.jsx(Bt,{variant:"outline",className:"text-xs",children:w.cdv_quotas.numero_quota}):"-"}),a.jsx(jt,{className:"max-w-[150px] truncate",children:((j=(E=w.cdv_quotas)==null?void 0:E.cdv_projetos)==null?void 0:j.titulo)||"-"})]},w.id)})})]})})})]})})]})]})},jo={uib_residuos:250,uib_educacao:5,uib_produtos:1,total_uib:256},T9t=()=>{const[t,e]=C.useState({residuo:0,educacao:0,produto:0}),[r,n]=C.useState([]),[i,s]=C.useState(0),[o,l]=C.useState([]),[c,u]=C.useState([]),[d,h]=C.useState(""),[f,m]=C.useState(""),[x,g]=C.useState(!0),[y,w]=C.useState(!1),[S,E]=C.useState(!1),[j,T]=C.useState(null),[O,I]=C.useState(!1),[M,D]=C.useState(!1),[z,F]=C.useState([]),[q,Q]=C.useState([]),{toast:re}=Qi();C.useEffect(()=>{Z()},[]),C.useEffect(()=>{d?se(d):(u([]),m(""))},[d]);const Z=async()=>{g(!0);try{const[he,_e,ue,je,ye]=await Promise.all([Ee.from("uib").select("id",{count:"exact"}).eq("tipo","residuo").eq("status","disponivel"),Ee.from("uib").select("id",{count:"exact"}).eq("tipo","educacao").eq("status","disponivel"),Ee.from("uib").select("id",{count:"exact"}).eq("tipo","produto").eq("status","disponivel"),Ee.from("cdv_projetos").select("id, titulo").eq("status","ativo"),Ee.from("impacto_bruto").select("id",{count:"exact"}).eq("processado",!1)]);e({residuo:he.count||0,educacao:_e.count||0,produto:ue.count||0}),l(je.data||[]);const Le=await Ee.from("saldo_parcial").select("*");if(Le.error)n([]);else{const Ge=(Le.data||[]).map(Be=>({tipo:Be.tipo,saldo_decimal:Be.saldo_decimal||Be.saldo||Be.valor||0}));n(Ge)}s(ye.count||0)}catch(he){re({title:"Erro ao carregar dados",description:he.message,variant:"destructive"})}finally{g(!1)}},se=async he=>{try{const{data:_e,error:ue}=await Ee.from("cdv_quotas").select(`
          id,
          numero_quota,
          status,
          id_investidor,
          cdv_investidores (
            razao_social
          )
        `).eq("id_projeto",he).eq("status","em_geracao").order("numero_quota",{ascending:!0});if(ue)throw ue;const je=(_e||[]).map(ye=>({...ye,cdv_investidores:Array.isArray(ye.cdv_investidores)?ye.cdv_investidores[0]||null:ye.cdv_investidores}));u(je)}catch(_e){re({title:"Erro ao carregar quotas",description:_e.message,variant:"destructive"})}},K=async()=>{var he,_e;E(!0);try{const{data:ue,error:je}=await Ee.functions.invoke("motor-uib");if(je)throw je;re({title:" Motor UIB executado",description:`${((he=ue.totais)==null?void 0:he.uibs_geradas)||0} UIBs geradas a partir de ${((_e=ue.totais)==null?void 0:_e.impactos_processados)||0} impactos`}),await Z()}catch(ue){re({title:"Erro ao executar Motor UIB",description:ue.message,variant:"destructive"})}finally{E(!1)}},X=async he=>{T(he);try{const _e=`processar-historico-${he}`,{data:ue,error:je}=await Ee.functions.invoke(_e);if(je)throw je;const ye=ue.impactos_registrados||ue.registrados||0;re({title:` Migrao de ${he} concluda`,description:`${ye} impactos registrados em impacto_bruto`}),await Z()}catch(_e){re({title:`Erro na migrao de ${he}`,description:_e.message,variant:"destructive"})}finally{T(null)}},Y=async he=>{try{const{data:_e,error:ue}=await Ee.from("uib").select("id, tipo, numero_sequencial, status, ids_origem, data_geracao").eq("tipo",he).eq("status","disponivel").order("numero_sequencial",{ascending:!1}).limit(10);if(ue)throw ue;if(F(_e||[]),_e&&_e.length>0){const je=_e.flatMap(ye=>ye.ids_origem||[]).slice(0,20);if(je.length>0){const{data:ye}=await Ee.from("impacto_bruto").select("id, tipo, valor_bruto, submaterial, gtin, descricao_origem, data_hora, processado").in("id",je).limit(20);Q(ye||[])}}D(!0)}catch(_e){re({title:"Erro ao carregar rastreabilidade",description:_e.message,variant:"destructive"})}},oe=()=>t.residuo>=jo.uib_residuos&&t.educacao>=jo.uib_educacao&&t.produto>=jo.uib_produtos&&f!=="",xe=async()=>{I(!1),w(!0);try{const{data:he,error:_e}=await Ee.functions.invoke("gerar-cdv-manual",{body:{id_quota:f,id_projeto:d}});if(_e)throw _e;if(!he.success)throw new Error(he.error);re({title:" CDV Gerado com Sucesso!",description:`${he.cdv.numero_cdv} vinculado  quota selecionada`}),await Z(),d&&await se(d),m("")}catch(he){re({title:"Erro ao gerar CDV",description:he.message,variant:"destructive"})}finally{w(!1)}},H=(he,_e)=>{const ue=he/_e*100;return ue>=100?{color:"text-green-600",bg:"bg-green-50",status:"Disponvel"}:ue>=50?{color:"text-yellow-600",bg:"bg-yellow-50",status:"Parcial"}:{color:"text-red-600",bg:"bg-red-50",status:"Insuficiente"}},J=he=>{const _e=r.find(ue=>ue.tipo===he);return(_e==null?void 0:_e.saldo_decimal)||0};if(x)return a.jsx("div",{className:"flex justify-center p-8",children:a.jsx(jn,{className:"w-6 h-6 animate-spin"})});const ie=H(t.residuo,jo.uib_residuos),ce=H(t.educacao,jo.uib_educacao),me=H(t.produto,jo.uib_produtos);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(yc,{defaultValue:"reconciliation",className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-3",children:[a.jsx(ri,{value:"reconciliation",children:"Reconciliao"}),a.jsx(ri,{value:"migration",children:"Migrao Histrica"}),a.jsx(ri,{value:"monitoring",children:"Monitoramento"})]}),a.jsxs(Ti,{value:"reconciliation",className:"space-y-6 mt-6",children:[a.jsx(it,{className:"border-primary/20",children:a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(U9,{className:"w-5 h-5"}),"Reconciliao Manual de CDV"]}),a.jsx(gr,{children:"Selecione um projeto e quota para atribuir UIBs e gerar o CDV manualmente"})]}),a.jsx(Oe,{variant:"outline",onClick:K,disabled:S,className:"gap-2",children:S?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4 animate-spin"}),"Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(U9,{className:"w-4 h-4"}),"Executar Motor UIB"]})})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(it,{className:ie.bg,children:[a.jsx(At,{className:"pb-2",children:a.jsxs(Ct,{className:"text-lg flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Cs,{className:"w-5 h-5 text-green-600"}),"UIBs Resduo"]}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>Y("residuo"),children:a.jsx(Am,{className:"w-4 h-4"})})]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-3xl font-bold ${ie.color}`,children:t.residuo.toLocaleString("pt-BR")}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Necessrio: ",jo.uib_residuos," por CDV"]})]}),a.jsx(Bt,{variant:t.residuo>=jo.uib_residuos?"default":"destructive",children:ie.status})]}),a.jsx(fc,{value:Math.min(t.residuo/jo.uib_residuos*100,100),className:"mt-3 h-2"})]})]}),a.jsxs(it,{className:ce.bg,children:[a.jsx(At,{className:"pb-2",children:a.jsxs(Ct,{className:"text-lg flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(l6,{className:"w-5 h-5 text-blue-600"}),"UIBs Educao"]}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>Y("educacao"),children:a.jsx(Am,{className:"w-4 h-4"})})]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-3xl font-bold ${ce.color}`,children:t.educacao.toLocaleString("pt-BR")}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Necessrio: ",jo.uib_educacao," por CDV"]})]}),a.jsx(Bt,{variant:t.educacao>=jo.uib_educacao?"default":"destructive",children:ce.status})]}),a.jsx(fc,{value:Math.min(t.educacao/jo.uib_educacao*100,100),className:"mt-3 h-2"})]})]}),a.jsxs(it,{className:me.bg,children:[a.jsx(At,{className:"pb-2",children:a.jsxs(Ct,{className:"text-lg flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"w-5 h-5 text-purple-600"}),"UIBs Produto"]}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>Y("produto"),children:a.jsx(Am,{className:"w-4 h-4"})})]})}),a.jsxs(ht,{children:[a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-3xl font-bold ${me.color}`,children:t.produto.toLocaleString("pt-BR")}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Necessrio: ",jo.uib_produtos," por CDV"]})]}),a.jsx(Bt,{variant:t.produto>=jo.uib_produtos?"default":"destructive",children:me.status})]}),a.jsx(fc,{value:Math.min(t.produto/jo.uib_produtos*100,100),className:"mt-3 h-2"})]})]})]}),a.jsxs(it,{children:[a.jsx(At,{className:"pb-3",children:a.jsx(Ct,{className:"text-lg",children:"Frmula do CDV"})}),a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center gap-2 text-sm font-mono bg-muted p-3 rounded-lg flex-wrap",children:[a.jsxs("span",{className:"text-green-600 font-bold",children:[jo.uib_residuos," UIB(resduo)"]}),a.jsx("span",{children:"+"}),a.jsxs("span",{className:"text-blue-600 font-bold",children:[jo.uib_educacao," UIB(educao)"]}),a.jsx("span",{children:"+"}),a.jsxs("span",{className:"text-purple-600 font-bold",children:[jo.uib_produtos," UIB(produto)"]}),a.jsx("span",{children:"="}),a.jsxs("span",{className:"text-primary font-bold",children:[jo.total_uib," UIB = 1 CDV"]})]})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Atribuir CDV a Quota"}),a.jsx(gr,{children:"Selecione o projeto e a quota que receber o CDV"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Projeto"}),a.jsxs(wi,{value:d,onValueChange:h,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione um projeto"})}),a.jsx(xi,{children:o.map(he=>a.jsx(or,{value:he.id,children:he.titulo},he.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Quota Pendente"}),a.jsxs(wi,{value:f,onValueChange:m,disabled:!d||c.length===0,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:d?c.length===0?"Nenhuma quota pendente":"Selecione uma quota":"Selecione um projeto primeiro"})}),a.jsx(xi,{children:c.map(he=>{var _e;return a.jsxs(or,{value:he.id,children:["#",he.numero_quota," - ",((_e=he.cdv_investidores)==null?void 0:_e.razao_social)||"Sem investidor"]},he.id)})})]})]})]}),!oe()&&f&&a.jsxs("div",{className:"flex items-center gap-2 text-destructive text-sm",children:[a.jsx(Za,{className:"w-4 h-4"}),"UIBs insuficientes para gerar CDV"]}),a.jsx(Oe,{onClick:()=>I(!0),disabled:!oe()||y,className:"w-full gap-2",size:"lg",children:y?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4 animate-spin"}),"Gerando CDV..."]}):a.jsxs(a.Fragment,{children:[a.jsx(au,{className:"w-4 h-4"}),"Gerar CDV e Atribuir  Quota"]})})]})]})]}),a.jsx(Ti,{value:"migration",className:"space-y-6 mt-6",children:a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(mV,{className:"w-5 h-5"}),"Migrao de Dados Histricos"]}),a.jsx(gr,{children:"Processe dados histricos das tabelas legadas para impacto_bruto"})]}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(it,{children:[a.jsxs(At,{className:"pb-2",children:[a.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[a.jsx(Cs,{className:"w-4 h-4 text-green-600"}),"Resduos"]}),a.jsx(gr,{className:"text-xs",children:"Entregas finalizadas  impacto_bruto"})]}),a.jsx(ht,{children:a.jsx(Oe,{onClick:()=>X("residuos"),disabled:j!==null,className:"w-full gap-2",variant:"outline",children:j==="residuos"?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4 animate-spin"})," Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(z9,{className:"w-4 h-4"})," Executar"]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"pb-2",children:[a.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[a.jsx(l6,{className:"w-4 h-4 text-blue-600"}),"Educao"]}),a.jsx(gr,{className:"text-xs",children:"Misses concludas  impacto_bruto"})]}),a.jsx(ht,{children:a.jsx(Oe,{onClick:()=>X("educacao"),disabled:j!==null,className:"w-full gap-2",variant:"outline",children:j==="educacao"?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4 animate-spin"})," Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(z9,{className:"w-4 h-4"})," Executar"]})})})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"pb-2",children:[a.jsxs(Ct,{className:"text-base flex items-center gap-2",children:[a.jsx(Yn,{className:"w-4 h-4 text-purple-600"}),"Embalagens"]}),a.jsx(gr,{className:"text-xs",children:"Notas fiscais  impacto_bruto"})]}),a.jsx(ht,{children:a.jsx(Oe,{onClick:()=>X("embalagens"),disabled:j!==null,className:"w-full gap-2",variant:"outline",children:j==="embalagens"?a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4 animate-spin"})," Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(z9,{className:"w-4 h-4"})," Executar"]})})})]})]}),a.jsx(r0,{}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-medium mb-2",children:"Fluxo de migrao:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[a.jsx("li",{children:"Execute as migraes histricas para popular impacto_bruto"}),a.jsx("li",{children:"Execute o Motor UIB para gerar UIBs a partir dos impactos"}),a.jsx("li",{children:"Use a aba Reconciliao para atribuir UIBs e gerar CDVs"})]})]})]})]})}),a.jsx(Ti,{value:"monitoring",className:"space-y-6 mt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(PM,{className:"w-5 h-5"}),"Impactos Pendentes"]}),a.jsx(gr,{children:"Impactos brutos aguardando processamento pelo Motor UIB"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-4xl font-bold text-primary",children:i.toLocaleString("pt-BR")}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"impactos no processados"}),i>0&&a.jsxs(Oe,{onClick:K,disabled:S,className:"mt-4 gap-2",size:"sm",children:[S?a.jsx(jn,{className:"w-4 h-4 animate-spin"}):a.jsx(U9,{className:"w-4 h-4"}),"Processar Agora"]})]})})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[a.jsx(PM,{className:"w-5 h-5"}),"Saldo Parcial"]}),a.jsx(gr,{children:"Valores decimais acumulados aguardando completar 1 UIB"})]}),a.jsx(ht,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Cs,{className:"w-4 h-4 text-green-600"}),"Resduo"]}),a.jsxs("span",{className:"font-mono text-sm",children:[J("residuo").toFixed(3)," kg"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[a.jsx(l6,{className:"w-4 h-4 text-blue-600"}),"Educao"]}),a.jsxs("span",{className:"font-mono text-sm",children:[J("educacao").toFixed(3)," min"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Yn,{className:"w-4 h-4 text-purple-600"}),"Produto"]}),a.jsxs("span",{className:"font-mono text-sm",children:[J("produto").toFixed(3)," un"]})]})]})})]})]})})]}),a.jsx(S_,{open:O,onOpenChange:I,children:a.jsxs(ib,{children:[a.jsxs(sb,{children:[a.jsx(ob,{children:"Confirmar Gerao de CDV"}),a.jsxs(lb,{children:["Esta ao ir:",a.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[a.jsxs("li",{children:["Reservar ",jo.uib_residuos," UIBs de resduo"]}),a.jsxs("li",{children:["Reservar ",jo.uib_educacao," UIBs de educao"]}),a.jsxs("li",{children:["Reservar ",jo.uib_produtos," UIBs de produto"]}),a.jsx("li",{children:"Gerar um novo CDV"}),a.jsx("li",{children:"Vincular o CDV  quota selecionada"})]}),a.jsx("p",{className:"mt-3 font-medium",children:"Esta ao no pode ser desfeita."})]})]}),a.jsxs(ab,{children:[a.jsx(ub,{children:"Cancelar"}),a.jsx(cb,{onClick:xe,children:"Confirmar e Gerar CDV"})]})]})}),a.jsx(hs,{open:M,onOpenChange:D,children:a.jsxs(as,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Rastreabilidade UIB"}),a.jsx(Sl,{children:"Visualize a composio das UIBs e seus impactos originais"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"UIBs Recentes (ltimas 10)"}),a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Sequencial"}),a.jsx(It,{children:"Tipo"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Impactos"}),a.jsx(It,{children:"Data"})]})}),a.jsx(to,{children:z.map(he=>{var _e;return a.jsxs(Dn,{children:[a.jsxs(jt,{className:"font-mono",children:["#",he.numero_sequencial]}),a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",children:he.tipo})}),a.jsx(jt,{children:a.jsx(Bt,{variant:he.status==="disponivel"?"default":"secondary",children:he.status})}),a.jsx(jt,{children:((_e=he.ids_origem)==null?void 0:_e.length)||0}),a.jsx(jt,{className:"text-sm",children:new Date(he.data_geracao).toLocaleDateString("pt-BR")})]},he.id)})})]})]}),a.jsx(r0,{}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Impactos Originais (amostra)"}),a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Tipo"}),a.jsx(It,{children:"Valor"}),a.jsx(It,{children:"Detalhe"}),a.jsx(It,{children:"Data"})]})}),a.jsx(to,{children:q.map(he=>a.jsxs(Dn,{children:[a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",children:he.tipo})}),a.jsx(jt,{className:"font-mono",children:he.valor_bruto.toFixed(2)}),a.jsx(jt,{className:"text-sm max-w-[200px] truncate",children:he.submaterial||he.gtin||he.descricao_origem||"-"}),a.jsx(jt,{className:"text-sm",children:new Date(he.data_hora).toLocaleDateString("pt-BR")})]},he.id))})]})]})]})]})})]})},P9t=()=>{const[t,e]=C.useState([]),[r,n]=C.useState({totalActiveInvestors:0,totalQuotasAssigned:0,totalValueInvested:0}),[i,s]=C.useState(!0),[o,l]=C.useState(""),[c,u]=C.useState(!1),[d,h]=C.useState({razao_social:"",cnpj:"",email:"",nome_responsavel:"",telefone:""}),[f,m]=C.useState(!1),[x,g]=C.useState(!1),[y,w]=C.useState(null),[S,E]=C.useState([]),[j,T]=C.useState(!1),[O,I]=C.useState(!1),{toast:M}=Qi();C.useEffect(()=>{D(),z()},[]);const D=async()=>{try{const{data:K,error:X}=await Ee.from("cdv_investidores").select("*").order("data_cadastro",{ascending:!1});if(X)throw X;const Y=await Promise.all((K||[]).map(async oe=>{const{count:xe}=await Ee.from("cdv_quotas").select("*",{count:"exact",head:!0}).eq("id_investidor",oe.id);return{...oe,quotas_count:xe||0}}));e(Y)}catch(K){M({title:"Erro ao carregar investidores",description:K.message,variant:"destructive"})}finally{s(!1)}},z=async()=>{try{const{count:K,error:X}=await Ee.from("cdv_investidores").select("*",{count:"exact",head:!0}).eq("status","ativo");if(X)throw X;const{data:Y,error:oe}=await Ee.from("cdv_quotas").select("valor_pago").not("id_investidor","is",null);if(oe)throw oe;const xe=(Y==null?void 0:Y.length)||0,H=(Y==null?void 0:Y.reduce((J,ie)=>J+(ie.valor_pago||0),0))||0;n({totalActiveInvestors:K||0,totalQuotasAssigned:xe,totalValueInvested:H})}catch(K){console.error("Erro ao carregar estatsticas:",K)}},F=async()=>{if(!d.razao_social||!d.cnpj||!d.email||!d.nome_responsavel){M({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios",variant:"destructive"});return}try{m(!0);const{error:K}=await Ee.from("cdv_investidores").insert({id_user:crypto.randomUUID(),razao_social:d.razao_social,cnpj:d.cnpj,email:d.email,nome_responsavel:d.nome_responsavel,telefone:d.telefone||null,status:"aguardando_quotas",convite_enviado:!1});if(K)throw K;M({title:"Investidor cadastrado",description:"O investidor receber um email de acesso quando quotas forem atribudas."}),u(!1),h({razao_social:"",cnpj:"",email:"",nome_responsavel:"",telefone:""}),D(),z()}catch(K){M({title:"Erro ao criar investidor",description:K.message,variant:"destructive"})}finally{m(!1)}},q=async K=>{w(K),g(!0),T(!0);try{const{data:X,error:Y}=await Ee.from("emails_investidores").select("*").eq("id_investidor",K.id).order("created_at",{ascending:!1});if(Y)throw Y;E(X||[])}catch(X){M({title:"Erro ao carregar histrico",description:X.message,variant:"destructive"})}finally{T(!1)}},Q=async(K,X=!1)=>{if(!X&&(K.quotas_count||0)===0){M({title:"Ao no permitida",description:"Este investidor ainda no possui quotas atribudas. Atribua quotas primeiro.",variant:"destructive"});return}I(!0);try{const{data:Y,error:oe}=await Ee.functions.invoke("enviar-convite-investidor",{body:{email:K.email,razaoSocial:K.razao_social,nomeResponsavel:K.nome_responsavel,cnpj:K.cnpj,idInvestidor:K.id,reenvio:X,originUrl:window.location.origin}});if(oe)throw oe;if(Y!=null&&Y.error)throw new Error(Y.error);Y!=null&&Y.accessLink?(await navigator.clipboard.writeText(Y.accessLink),M({title:"Link de acesso gerado!",description:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{children:"O link foi copiado para sua rea de transferncia."}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Envie este link para ",K.email," via WhatsApp ou email."]})]}),duration:1e4})):M({title:X?"Convite reenviado":"Convite enviado",description:`Convite processado para ${K.email}`}),D(),x&&(y==null?void 0:y.id)===K.id&&await q(K)}catch(Y){M({title:`Erro ao ${X?"re":""}enviar convite`,description:Y.message,variant:"destructive"})}finally{I(!1)}},re=K=>{const X=(K.quotas_count||0)>0;if(X&&!K.convite_enviado)return a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsxs(Bt,{variant:"outline",className:"flex items-center gap-1 border-orange-500 text-orange-600 cursor-help",children:[a.jsx(Za,{className:"h-3 w-3"}),"Enviar Convite"]})}),a.jsxs(Gc,{children:[a.jsxs("p",{children:["Possui ",K.quotas_count," quota(s) mas convite no foi enviado"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Clique no cone de enviar para convidar"})]})]})});if(!X&&!K.convite_enviado)return a.jsxs(Bt,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Tg,{className:"h-3 w-3"}),"Aguardando Quotas"]});if(K.convite_enviado&&!K.primeiro_acesso){const Y=K.data_convite?Math.floor((Date.now()-new Date(K.data_convite).getTime())/864e5):0;return a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsxs(Bt,{variant:"outline",className:"flex items-center gap-1 border-amber-500 text-amber-600 cursor-help",children:[a.jsx(Za,{className:"h-3 w-3"}),"Convite Pendente"]})}),a.jsxs(Gc,{children:[a.jsxs("p",{children:["Convite enviado h ",Y," dia(s)"]}),K.data_convite&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(K.data_convite).toLocaleString("pt-BR")})]})]})})}return a.jsxs(Bt,{variant:"default",className:"flex items-center gap-1",children:[a.jsx(ta,{className:"h-3 w-3"}),"Ativo"]})},Z=K=>{switch(K){case"enviado":return a.jsx(Bt,{variant:"default",className:"bg-green-600",children:"Enviado"});case"pendente":return a.jsx(Bt,{variant:"secondary",children:"Pendente"});case"erro":return a.jsx(Bt,{variant:"destructive",children:"Erro"});default:return a.jsx(Bt,{variant:"outline",children:K})}},se=t.filter(K=>K.razao_social.toLowerCase().includes(o.toLowerCase())||K.cnpj.includes(o)||K.email.toLowerCase().includes(o.toLowerCase()));return i?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Investidores Ativos"}),a.jsx(yl,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.totalActiveInvestors}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empresas investidoras cadastradas"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Quotas Atribudas"}),a.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.totalQuotasAssigned}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total de quotas vendidas"})]})]}),a.jsxs(it,{children:[a.jsxs(At,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ct,{className:"text-sm font-medium",children:"Valor Total Investido"}),a.jsx(MX,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(ht,{children:[a.jsx("div",{className:"text-2xl font-bold",children:xY(r.totalValueInvested)}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Investimento acumulado em CDV"})]})]})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:"Investidores CDV"}),a.jsx(gr,{children:"Gerenciar empresas investidoras. O convite de acesso  enviado automaticamente quando quotas so atribudas."})]}),a.jsxs(hs,{open:c,onOpenChange:u,children:[a.jsx(X3,{asChild:!0,children:a.jsxs(Oe,{className:"gap-2",children:[a.jsx(ya,{className:"w-4 h-4"}),"Novo Investidor"]})}),a.jsxs(as,{className:"max-w-2xl",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Cadastrar Novo Investidor"}),a.jsx(Sl,{children:"Preencha os dados da empresa investidora. O convite de acesso ser enviado automaticamente quando voc atribuir quotas."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(nt,{htmlFor:"razao_social",children:"Razo Social *"}),a.jsx(mt,{id:"razao_social",value:d.razao_social,onChange:K=>h({...d,razao_social:K.target.value}),placeholder:"Nome da empresa"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(nt,{htmlFor:"cnpj",children:"CNPJ *"}),a.jsx(mt,{id:"cnpj",value:d.cnpj,onChange:K=>h({...d,cnpj:K.target.value}),placeholder:"00.000.000/0001-00"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(nt,{htmlFor:"nome_responsavel",children:"Nome do Responsvel *"}),a.jsx(mt,{id:"nome_responsavel",value:d.nome_responsavel,onChange:K=>h({...d,nome_responsavel:K.target.value}),placeholder:"Nome completo"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(nt,{htmlFor:"email",children:"Email *"}),a.jsx(mt,{id:"email",type:"email",value:d.email,onChange:K=>h({...d,email:K.target.value}),placeholder:"contato@empresa.com"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(nt,{htmlFor:"telefone",children:"Telefone (opcional)"}),a.jsx(mt,{id:"telefone",value:d.telefone,onChange:K=>h({...d,telefone:K.target.value}),placeholder:"(00) 00000-0000"})]})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:F,disabled:f,children:f?"Cadastrando...":"Cadastrar Investidor"})]})]})]})]})}),a.jsxs(ht,{children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(Jp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(mt,{placeholder:"Buscar por razo social, CNPJ ou email...",value:o,onChange:K=>l(K.target.value),className:"pl-10"})]})}),a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Empresa"}),a.jsx(It,{children:"CNPJ"}),a.jsx(It,{children:"Responsvel"}),a.jsx(It,{children:"Contato"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Data Cadastro"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:se.map(K=>a.jsxs(Dn,{children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(eu,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:K.razao_social})]})}),a.jsx(jt,{children:K.cnpj}),a.jsx(jt,{children:K.nome_responsavel}),a.jsx(jt,{children:a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(NA,{className:"w-3 h-3 text-muted-foreground"}),K.email]}),K.telefone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(FX,{className:"w-3 h-3 text-muted-foreground"}),K.telefone]})]})}),a.jsx(jt,{children:re(K)}),a.jsx(jt,{children:new Date(K.data_cadastro).toLocaleDateString("pt-BR")}),a.jsx(jt,{children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>q(K),children:a.jsx(mV,{className:"h-4 w-4"})})}),a.jsx(Gc,{children:a.jsx("p",{children:"Ver histrico de emails"})})]})}),!K.convite_enviado&&(K.quotas_count||0)>0&&a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>Q(K,!1),disabled:O,className:"text-primary",children:O?a.jsx(gm,{className:"h-4 w-4 animate-spin"}):a.jsx(kR,{className:"h-4 w-4"})})}),a.jsx(Gc,{children:a.jsxs("p",{children:["Enviar convite (possui ",K.quotas_count," quota(s))"]})})]})}),K.convite_enviado&&!K.primeiro_acesso&&a.jsx(Dp,{children:a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>Q(K,!0),disabled:O,children:O?a.jsx(gm,{className:"h-4 w-4 animate-spin"}):a.jsx(kR,{className:"h-4 w-4"})})}),a.jsx(Gc,{children:a.jsx("p",{children:"Reenviar convite"})})]})})]})})]},K.id))})]}),se.length===0&&a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Nenhum investidor encontrado"})]})]}),a.jsx(hs,{open:x,onOpenChange:g,children:a.jsxs(as,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsxs(ms,{className:"flex items-center gap-2",children:[a.jsx(mV,{className:"h-5 w-5"}),"Histrico de Emails"]}),a.jsx(Sl,{children:y&&a.jsxs("span",{children:["Emails enviados para ",a.jsx("strong",{children:y.razao_social})," (",y.email,")"]})})]}),j?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(gm,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):S.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(NA,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Nenhum email enviado para este investidor"}),a.jsx("p",{className:"text-sm mt-2",children:y&&(y.quotas_count||0)>0?`Este investidor possui ${y.quotas_count} quota(s) atribuda(s). Clique em "Enviar Convite" abaixo para enviar o email de acesso.`:"O primeiro email ser enviado automaticamente quando quotas forem atribudas."})]}):a.jsx("div",{className:"space-y-4",children:S.map(K=>a.jsx("div",{className:"p-4 border rounded-lg bg-muted/30",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium",children:K.assunto}),Z(K.status_envio)]}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("p",{children:["Tipo: ",K.tipo_email]}),a.jsxs("p",{children:["Destinatrio: ",K.email_destino]}),a.jsxs("p",{children:["Enviado: ",new Date(K.created_at).toLocaleString("pt-BR"),a.jsxs("span",{className:"ml-1",children:["(",$A(new Date(K.created_at),{addSuffix:!0,locale:Wi}),")"]})]})]}),K.mensagem_erro&&a.jsxs("div",{className:"mt-2 p-2 bg-destructive/10 border border-destructive/20 rounded text-sm text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 font-medium",children:[a.jsx(al,{className:"h-3 w-3"}),"Erro:"]}),a.jsx("p",{className:"mt-1",children:K.mensagem_erro})]})]})})},K.id))}),a.jsxs(If,{children:[y&&!y.convite_enviado&&(y.quotas_count||0)>0&&a.jsxs(Oe,{variant:"default",onClick:()=>y&&Q(y,!1),disabled:O,className:"gap-2",children:[O?a.jsx(gm,{className:"h-4 w-4 animate-spin"}):a.jsx(kR,{className:"h-4 w-4"}),"Enviar Convite"]}),(y==null?void 0:y.convite_enviado)&&!(y!=null&&y.primeiro_acesso)&&a.jsxs(Oe,{variant:"outline",onClick:()=>y&&Q(y,!0),disabled:O,className:"gap-2",children:[O?a.jsx(gm,{className:"h-4 w-4 animate-spin"}):a.jsx(kR,{className:"h-4 w-4"}),"Reenviar Convite"]}),a.jsx(Oe,{onClick:()=>g(!1),children:"Fechar"})]})]})})]})},k9t={novo:"bg-blue-500/10 text-blue-600 border-blue-500/20",em_contato:"bg-yellow-500/10 text-yellow-600 border-yellow-500/20",convertido:"bg-green-500/10 text-green-600 border-green-500/20",descartado:"bg-red-500/10 text-red-600 border-red-500/20"},O9t={novo:"Novo",em_contato:"Em Contato",convertido:"Convertido",descartado:"Descartado"},I9t=()=>{const t=tY(),[e,r]=C.useState("todos"),[n,i]=C.useState(null),[s,o]=C.useState(""),[l,c]=C.useState(!1),{data:u=[],isLoading:d,refetch:h}=h8e({queryKey:["cdv-leads",e],queryFn:async()=>{let w=Ee.from("cdv_leads").select("*").order("data_cadastro",{ascending:!1});e!=="todos"&&(w=w.eq("status",e));const{data:S,error:E}=await w;if(E)throw E;return S}}),f=G9({mutationFn:async({id:w,status:S})=>{const E={status:S};S==="em_contato"&&(E.data_contato=new Date().toISOString());const{error:j}=await Ee.from("cdv_leads").update(E).eq("id",w);if(j)throw j},onSuccess:()=>{t.invalidateQueries({queryKey:["cdv-leads"]}),cr.success("Status atualizado")},onError:()=>{cr.error("Erro ao atualizar status")}}),m=G9({mutationFn:async({id:w,notas:S})=>{const{error:E}=await Ee.from("cdv_leads").update({notas:S}).eq("id",w);if(E)throw E},onSuccess:()=>{t.invalidateQueries({queryKey:["cdv-leads"]}),cr.success("Notas salvas"),c(!1)},onError:()=>{cr.error("Erro ao salvar notas")}}),x=G9({mutationFn:async w=>{var T;const{data:S,error:E}=await Ee.from("cdv_investidores").insert({razao_social:w.empresa,cnpj:"00.000.000/0000-00",nome_responsavel:w.nome,email:w.email,telefone:w.telefone,id_user:(T=(await Ee.auth.getUser()).data.user)==null?void 0:T.id,status:"ativo"}).select().single();if(E)throw E;const{error:j}=await Ee.from("cdv_leads").update({status:"convertido",id_investidor:S.id}).eq("id",w.id);if(j)throw j;return S},onSuccess:()=>{t.invalidateQueries({queryKey:["cdv-leads"]}),t.invalidateQueries({queryKey:["cdv-investidores"]}),cr.success("Lead convertido para investidor!")},onError:()=>{cr.error("Erro ao converter lead")}}),g={total:u.length,novos:u.filter(w=>w.status==="novo").length,emContato:u.filter(w=>w.status==="em_contato").length,convertidos:u.filter(w=>w.status==="convertido").length},y=w=>{i(w),o(w.notas||""),c(!0)};return d?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(gm,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:a.jsx(yl,{className:"w-5 h-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Leads"}),a.jsx("p",{className:"text-2xl font-bold",children:g.total})]})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:a.jsx(pV,{className:"w-5 h-5 text-blue-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Novos"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.novos})]})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-yellow-500/10",children:a.jsx(are,{className:"w-5 h-5 text-yellow-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Em Contato"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:g.emContato})]})]})})}),a.jsx(it,{children:a.jsx(ht,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:a.jsx(yl,{className:"w-5 h-5 text-green-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Convertidos"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.convertidos})]})]})})})]}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ct,{children:"Leads de Investidores"}),a.jsx(gr,{children:"Interessados que preencheram o formulrio da landing page"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(LC,{className:"w-4 h-4 text-muted-foreground"}),a.jsxs(wi,{value:e,onValueChange:r,children:[a.jsx(gi,{className:"w-40",children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todos",children:"Todos"}),a.jsx(or,{value:"novo",children:"Novos"}),a.jsx(or,{value:"em_contato",children:"Em Contato"}),a.jsx(or,{value:"convertido",children:"Convertidos"}),a.jsx(or,{value:"descartado",children:"Descartados"})]})]}),a.jsx(Oe,{variant:"outline",size:"icon",onClick:()=>h(),children:a.jsx(gm,{className:"w-4 h-4"})})]})]})}),a.jsx(ht,{children:u.length===0?a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(yl,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Nenhum lead encontrado"})]}):a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Nome"}),a.jsx(It,{children:"Empresa"}),a.jsx(It,{children:"Contato"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Data"}),a.jsx(It,{className:"text-right",children:"Aes"})]})}),a.jsx(to,{children:u.map(w=>a.jsxs(Dn,{children:[a.jsx(jt,{className:"font-medium",children:w.nome}),a.jsx(jt,{children:w.empresa}),a.jsx(jt,{children:a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{children:w.email}),w.telefone&&a.jsx("p",{className:"text-muted-foreground",children:w.telefone})]})}),a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",className:k9t[w.status],children:O9t[w.status]})}),a.jsx(jt,{children:Mi(new Date(w.data_cadastro),"dd/MM/yyyy HH:mm",{locale:Wi})}),a.jsx(jt,{children:a.jsxs("div",{className:"flex items-center justify-end gap-1",children:[w.status==="novo"&&a.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>f.mutate({id:w.id,status:"em_contato"}),children:[a.jsx(are,{className:"w-3 h-3 mr-1"}),"Contatar"]}),(w.status==="novo"||w.status==="em_contato")&&a.jsxs(a.Fragment,{children:[a.jsxs(Oe,{size:"sm",variant:"default",onClick:()=>x.mutate(w),disabled:x.isPending,children:[a.jsx(pV,{className:"w-3 h-3 mr-1"}),"Converter"]}),a.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>f.mutate({id:w.id,status:"descartado"}),children:a.jsx(al,{className:"w-3 h-3"})})]}),a.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>y(w),children:a.jsx(jRe,{className:"w-3 h-3"})})]})})]},w.id))})]})})]}),a.jsx(hs,{open:l,onOpenChange:c,children:a.jsxs(as,{children:[a.jsxs(fs,{children:[a.jsxs(ms,{children:["Notas - ",n==null?void 0:n.nome]}),a.jsx(Sl,{children:"Adicione observaes sobre este lead"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Od,{value:s,onChange:w=>o(w.target.value),placeholder:"Digite suas notas aqui...",rows:5}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(Oe,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),a.jsx(Oe,{onClick:()=>n&&m.mutate({id:n.id,notas:s}),disabled:m.isPending,children:"Salvar"})]})]})]})})]})},R9t={leads:"Gerencie leads interessados em investir. Acompanhe o funil de captao e converta leads em investidores.",projetos:"Crie e gerencie projetos CDV. Defina metas de impacto, prazo de maturao e valor total do projeto.",investidores:"Visualize investidores cadastrados, envie convites e acompanhe o portflio de cada um.",quotas:"Gerencie quotas por projeto. Atribua quotas a investidores e acompanhe o progresso de maturao.",stock:"Visualize o estoque de impactos disponveis (resduos, educao, embalagens) para atribuio s quotas.",reconciliation:"Atribua manualmente UIBs do estoque s quotas de projetos para gerar CDVs completos."},D9t=()=>{const t=nn(),[e,r]=C.useState("leads");return a.jsx("div",{className:"min-h-screen bg-background p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Gesto CDV"}),a.jsx("p",{className:"text-muted-foreground",children:"Gerenciar investidores, quotas e estoque de impactos"})]}),a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]})]}),a.jsxs(yc,{value:e,onValueChange:r,className:"space-y-6",children:[a.jsx(Jl,{className:"grid w-full grid-cols-6 bg-muted/50 p-1.5 rounded-xl",children:[{value:"leads",label:"Leads"},{value:"projetos",label:"Projetos"},{value:"investidores",label:"Investidores"},{value:"quotas",label:"Quotas"},{value:"stock",label:"Estoque"},{value:"reconciliation",label:"Reconciliao"}].map(n=>a.jsxs(Bu,{children:[a.jsx($u,{asChild:!0,children:a.jsxs("button",{onClick:()=>r(n.value),className:`
                      relative px-4 py-2.5 rounded-lg font-display text-sm font-medium
                      transition-all duration-200 ease-out
                      ${e===n.value?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted"}
                    `,children:[n.label,e===n.value&&a.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-foreground/30 rounded-full"})]})}),a.jsx(Gc,{side:"bottom",className:"max-w-xs",children:a.jsx("p",{children:R9t[n.value]})})]},n.value))}),a.jsx(Ti,{value:"leads",children:a.jsx(I9t,{})}),a.jsx(Ti,{value:"projetos",children:a.jsx(t9t,{})}),a.jsx(Ti,{value:"investidores",children:a.jsx(P9t,{})}),a.jsx(Ti,{value:"quotas",children:a.jsx(A9t,{})}),a.jsx(Ti,{value:"stock",children:a.jsx(C9t,{onNavigateToReconciliation:()=>r("reconciliation")})}),a.jsx(Ti,{value:"reconciliation",children:a.jsx(T9t,{})})]})]})})},M9t=[{uf:"AC",nome:"Acre"},{uf:"AL",nome:"Alagoas"},{uf:"AP",nome:"Amap"},{uf:"AM",nome:"Amazonas"},{uf:"BA",nome:"Bahia"},{uf:"CE",nome:"Cear"},{uf:"DF",nome:"Distrito Federal"},{uf:"ES",nome:"Esprito Santo"},{uf:"GO",nome:"Gois"},{uf:"MA",nome:"Maranho"},{uf:"MT",nome:"Mato Grosso"},{uf:"MS",nome:"Mato Grosso do Sul"},{uf:"MG",nome:"Minas Gerais"},{uf:"PA",nome:"Par"},{uf:"PB",nome:"Paraba"},{uf:"PR",nome:"Paran"},{uf:"PE",nome:"Pernambuco"},{uf:"PI",nome:"Piau"},{uf:"RJ",nome:"Rio de Janeiro"},{uf:"RN",nome:"Rio Grande do Norte"},{uf:"RS",nome:"Rio Grande do Sul"},{uf:"RO",nome:"Rondnia"},{uf:"RR",nome:"Roraima"},{uf:"SC",nome:"Santa Catarina"},{uf:"SP",nome:"So Paulo"},{uf:"SE",nome:"Sergipe"},{uf:"TO",nome:"Tocantins"}],Nfe=[{value:0,label:"Domingo"},{value:1,label:"Segunda-feira"},{value:2,label:"Tera-feira"},{value:3,label:"Quarta-feira"},{value:4,label:"Quinta-feira"},{value:5,label:"Sexta-feira"},{value:6,label:"Sbado"}];function L9t(){const t=nn(),[e,r]=C.useState(!0),[n,i]=C.useState([]),[s,o]=C.useState([]),[l,c]=C.useState([]),[u,d]=C.useState("rotas"),[h,f]=C.useState(!1),[m,x]=C.useState(!1),[g,y]=C.useState(null),[w,S]=C.useState(null),[E,j]=C.useState(!1),[T,O]=C.useState(""),[I,M]=C.useState(""),[D,z]=C.useState(""),[F,q]=C.useState("ativa"),[Q,re]=C.useState([]),[Z,se]=C.useState([""]),[K,X]=C.useState([""]),[Y,oe]=C.useState([""]),[xe,H]=C.useState(""),[J,ie]=C.useState(""),[ce,me]=C.useState("");C.useEffect(()=>{he()},[]);const he=async()=>{r(!0),await Promise.all([_e(),ue(),je()]),r(!1)},_e=async()=>{try{const{data:rt,error:Lt}=await Ee.from("rotas_coleta").select(`
          *,
          operador:cooperativas(nome_fantasia)
        `).order("nome");if(Lt)throw Lt;const Dt=await Promise.all((rt||[]).map(async Fe=>{const[ut,Mt,Ht]=await Promise.all([Ee.from("rotas_dias_coleta").select("*").eq("id_rota",Fe.id),Ee.from("rotas_areas_cobertura").select("*").eq("id_rota",Fe.id),Ee.from("usuarios_rotas").select("id",{count:"exact",head:!0}).eq("id_rota",Fe.id)]);return{...Fe,dias:ut.data||[],areas:Mt.data||[],_count:{adesoes:Ht.count||0}}}));i(Dt)}catch(rt){cr.error("Erro ao carregar rotas",{description:rt.message})}},ue=async()=>{try{const{data:rt,error:Lt}=await Ee.from("cooperativas").select("id, nome_fantasia").eq("status","aprovada").order("nome_fantasia");if(Lt)throw Lt;o(rt||[])}catch(rt){cr.error("Erro ao carregar operadores",{description:rt.message})}},je=async()=>{try{const{data:rt,error:Lt}=await Ee.from("usuarios_rotas").select(`
          *,
          usuario:profiles(nome, email),
          rota:rotas_coleta(nome)
        `).order("data_adesao",{ascending:!1});if(Lt)throw Lt;c(rt||[])}catch(rt){cr.error("Erro ao carregar adeses",{description:rt.message})}},ye=rt=>{rt?(y(rt),O(rt.nome),M(rt.descricao||""),z(rt.id_operador||""),q(rt.status),re((rt.dias||[]).map(Lt=>({dia:Lt.dia_semana,inicio:Lt.horario_inicio||"",fim:Lt.horario_fim||""})))):(y(null),O(""),M(""),z(""),q("ativa"),re([])),f(!0)},Le=rt=>{S(rt),se([""]),X([""]),oe([""]),H(""),ie(""),me(""),x(!0)},Ge=()=>se([...Z,""]),Be=rt=>se(Z.filter((Lt,Dt)=>Dt!==rt)),Te=(rt,Lt)=>{const Dt=[...Z];Dt[rt]=Lt,se(Dt)},ze=()=>X([...K,""]),tt=rt=>X(K.filter((Lt,Dt)=>Dt!==rt)),Re=(rt,Lt)=>{const Dt=[...K];Dt[rt]=Lt,X(Dt)},Ue=()=>oe([...Y,""]),xt=rt=>oe(Y.filter((Lt,Dt)=>Dt!==rt)),st=(rt,Lt)=>{const Dt=[...Y];Dt[rt]=Lt,oe(Dt)},Xt=rt=>{const Lt=Q.find(Dt=>Dt.dia===rt);re(Lt?Q.filter(Dt=>Dt.dia!==rt):[...Q,{dia:rt,inicio:"08:00",fim:"17:00"}])},Jt=(rt,Lt,Dt)=>{re(Q.map(Fe=>Fe.dia===rt?{...Fe,[Lt]:Dt}:Fe))},_r=async()=>{if(!T.trim()){cr.error("Nome da rota  obrigatrio");return}j(!0);try{let rt;if(g){const{error:Lt}=await Ee.from("rotas_coleta").update({nome:T,descricao:I||null,id_operador:D||null,status:F}).eq("id",g.id);if(Lt)throw Lt;rt=g.id,await Ee.from("rotas_dias_coleta").delete().eq("id_rota",rt)}else{const{data:Lt,error:Dt}=await Ee.from("rotas_coleta").insert({nome:T,descricao:I||null,id_operador:D||null,status:F}).select().single();if(Dt)throw Dt;rt=Lt.id}if(Q.length>0){const Lt=Q.map(Fe=>({id_rota:rt,dia_semana:Fe.dia,horario_inicio:Fe.inicio||null,horario_fim:Fe.fim||null})),{error:Dt}=await Ee.from("rotas_dias_coleta").insert(Lt);if(Dt)throw Dt}cr.success(g?"Rota atualizada!":"Rota criada!"),f(!1),_e()}catch(rt){cr.error("Erro ao salvar rota",{description:rt.message})}finally{j(!1)}},lt=async()=>{if(!w)return;const rt=J.trim(),Lt=xe.trim();if(!Lt||!rt){cr.error("Cidade e UF so obrigatrios.");return}const Dt=Z.filter(Mt=>Mt.trim()),Fe=K.filter(Mt=>Mt.trim()),ut=Y.filter(Mt=>Mt.trim());if(Dt.length===0&&Fe.length===0){cr.error("Informe pelo menos um bairro ou logradouro");return}j(!0);try{const Mt=[];if(Dt.length>0)for(const Wt of Dt)if(Fe.length>0)for(let zt=0;zt<Fe.length;zt++)Mt.push({id_rota:w.id,bairro:Wt,logradouro:Fe[zt],cep:ut[zt]||null,cidade:Lt,uf:rt.toUpperCase(),complemento_endereco:ce||null});else Mt.push({id_rota:w.id,bairro:Wt,logradouro:null,cep:ut[0]||null,cidade:Lt,uf:rt.toUpperCase(),complemento_endereco:ce||null});else for(let Wt=0;Wt<Fe.length;Wt++)Mt.push({id_rota:w.id,bairro:null,logradouro:Fe[Wt],cep:ut[Wt]||null,cidade:Lt,uf:rt.toUpperCase(),complemento_endereco:ce||null});const{error:Ht}=await Ee.from("rotas_areas_cobertura").insert(Mt);if(Ht)throw Ht;cr.success(`${Mt.length} rea(s) adicionada(s)!`),x(!1),_e()}catch(Mt){cr.error("Erro ao salvar rea",{description:Mt.message})}finally{j(!1)}},pt=async rt=>{if(confirm("Deseja realmente excluir esta rota? Todas as reas e adeses sero removidas."))try{const{error:Lt}=await Ee.from("rotas_coleta").delete().eq("id",rt);if(Lt)throw Lt;cr.success("Rota excluda!"),_e()}catch(Lt){cr.error("Erro ao excluir rota",{description:Lt.message})}},er=async rt=>{if(confirm("Deseja realmente excluir esta rea?"))try{const{error:Lt}=await Ee.from("rotas_areas_cobertura").delete().eq("id",rt);if(Lt)throw Lt;cr.success("rea excluda!"),_e()}catch(Lt){cr.error("Erro ao excluir rea",{description:Lt.message})}},Vt=async rt=>{const Lt=rt.status==="ativa"?"bloqueada":"ativa";try{const{error:Dt}=await Ee.from("rotas_coleta").update({status:Lt}).eq("id",rt.id);if(Dt)throw Dt;cr.success(`Rota ${Lt==="ativa"?"ativada":"bloqueada"}!`),_e()}catch(Dt){cr.error("Erro ao alterar status",{description:Dt.message})}},Kt=rt=>{var Lt;return((Lt=Nfe.find(Dt=>Dt.value===rt))==null?void 0:Lt.label)||""},ur=rt=>{switch(rt){case"ativa":return a.jsx(Bt,{className:"bg-success/20 text-success",children:"Ativa"});case"bloqueada":return a.jsx(Bt,{className:"bg-destructive/20 text-destructive",children:"Bloqueada"});case"inativa":return a.jsx(Bt,{variant:"secondary",children:"Inativa"});default:return a.jsx(Bt,{variant:"outline",children:rt})}};return a.jsx($v,{children:a.jsxs("div",{className:"min-h-screen bg-background p-4 md:p-8",children:[a.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[a.jsxs(Oe,{onClick:()=>t("/admin"),variant:"ghost",size:"sm",className:"gap-2 mb-4",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"rounded-full bg-primary p-2",children:a.jsx(Fp,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Gesto de Rotas de Coleta"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie rotas, reas de cobertura e adeses"})]})]}),a.jsxs(Oe,{onClick:()=>ye(),children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Nova Rota"]})]}),a.jsxs(yc,{value:u,onValueChange:d,children:[a.jsxs(Jl,{children:[a.jsxs(ri,{value:"rotas",className:"gap-2",children:[a.jsx(Fp,{className:"h-4 w-4"}),"Rotas (",n.length,")"]}),a.jsxs(ri,{value:"adesoes",className:"gap-2",children:[a.jsx(yl,{className:"h-4 w-4"}),"Adeses (",l.length,")"]})]}),a.jsx(Ti,{value:"rotas",className:"space-y-4",children:e?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(jn,{className:"h-8 w-8 animate-spin text-primary"})}):n.length===0?a.jsx(it,{children:a.jsxs(ht,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(Fp,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma rota cadastrada"}),a.jsxs(Oe,{onClick:()=>ye(),className:"mt-4",children:[a.jsx(ya,{className:"mr-2 h-4 w-4"}),"Criar Primeira Rota"]})]})}):a.jsx("div",{className:"grid gap-4",children:n.map(rt=>{var Lt,Dt,Fe;return a.jsxs(it,{children:[a.jsx(At,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ct,{children:rt.nome}),ur(rt.status)]}),a.jsx(gr,{className:"mt-1",children:rt.descricao||"Sem descrio"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>Le(rt),children:[a.jsx(Rm,{className:"mr-2 h-4 w-4"}),"reas"]}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>ye(rt),children:a.jsx(P0e,{className:"h-4 w-4"})}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>Vt(rt),children:rt.status==="ativa"?a.jsx(hRe,{className:"h-4 w-4 text-destructive"}):a.jsx(au,{className:"h-4 w-4 text-success"})}),a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>pt(rt.id),children:a.jsx(vl,{className:"h-4 w-4 text-destructive"})})]})]})}),a.jsxs(ht,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Operador"}),a.jsx("p",{className:"font-medium",children:((Lt=rt.operador)==null?void 0:Lt.nome_fantasia)||"No definido"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Adeses"}),a.jsx("p",{className:"font-medium",children:((Dt=rt._count)==null?void 0:Dt.adesoes)||0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"reas de Cobertura"}),a.jsx("p",{className:"font-medium",children:((Fe=rt.areas)==null?void 0:Fe.length)||0})]})]}),rt.areas&&rt.areas.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-1",children:[a.jsx(Rm,{className:"h-3 w-3"})," Bairros"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:[...new Set(rt.areas.filter(ut=>ut.bairro).map(ut=>ut.bairro))].length>0?[...new Set(rt.areas.filter(ut=>ut.bairro).map(ut=>ut.bairro))].map((ut,Mt)=>a.jsx(Bt,{variant:"secondary",className:"text-xs",children:ut},Mt)):a.jsx("span",{className:"text-xs text-muted-foreground",children:"Nenhum bairro definido"})})]}),a.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-1",children:[a.jsx(Fp,{className:"h-3 w-3"})," Ruas"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:[...new Set(rt.areas.filter(ut=>ut.logradouro).map(ut=>ut.logradouro))].length>0?[...new Set(rt.areas.filter(ut=>ut.logradouro).map(ut=>ut.logradouro))].map((ut,Mt)=>a.jsx(Bt,{variant:"outline",className:"text-xs",children:ut},Mt)):a.jsx("span",{className:"text-xs text-muted-foreground",children:"Nenhuma rua definida"})})]})]}),rt.dias&&rt.dias.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Dias de Coleta"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:rt.dias.map(ut=>a.jsxs(Bt,{variant:"outline",children:[a.jsx(Gl,{className:"mr-1 h-3 w-3"}),Kt(ut.dia_semana),ut.horario_inicio&&` ${ut.horario_inicio.slice(0,5)}`,ut.horario_fim&&`-${ut.horario_fim.slice(0,5)}`]},ut.id))})]}),rt.areas&&rt.areas.length>0&&a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"text-sm text-muted-foreground cursor-pointer hover:text-foreground transition-colors",children:["Ver todas as ",rt.areas.length," reas de cobertura"]}),a.jsx("div",{className:"border rounded-lg overflow-hidden mt-2",children:a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Logradouro"}),a.jsx(It,{children:"Bairro"}),a.jsx(It,{children:"Cidade/UF"}),a.jsx(It,{children:"CEP"}),a.jsx(It,{className:"w-10"})]})}),a.jsx(to,{children:rt.areas.map(ut=>a.jsxs(Dn,{children:[a.jsx(jt,{children:ut.logradouro||"-"}),a.jsx(jt,{children:ut.bairro||"-"}),a.jsxs(jt,{children:[ut.cidade,"/",ut.uf]}),a.jsx(jt,{children:ut.cep||"-"}),a.jsx(jt,{children:a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>er(ut.id),children:a.jsx(vl,{className:"h-4 w-4 text-destructive"})})})]},ut.id))})]})})]})]})]},rt.id)})})}),a.jsx(Ti,{value:"adesoes",children:a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:"Adeses de Usurios"}),a.jsx(gr,{children:"Usurios que aderiram a rotas de coleta"})]}),a.jsx(ht,{children:l.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhuma adeso registrada"}):a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Usurio"}),a.jsx(It,{children:"Rota"}),a.jsx(It,{children:"QR Code"}),a.jsx(It,{children:"Endereo"}),a.jsx(It,{children:"Status"}),a.jsx(It,{children:"Data"})]})}),a.jsx(to,{children:l.map(rt=>{var Lt,Dt,Fe;return a.jsxs(Dn,{children:[a.jsx(jt,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:((Lt=rt.usuario)==null?void 0:Lt.nome)||"-"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:(Dt=rt.usuario)==null?void 0:Dt.email})]})}),a.jsx(jt,{children:((Fe=rt.rota)==null?void 0:Fe.nome)||"-"}),a.jsx(jt,{children:a.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:rt.qrcode_adesao})}),a.jsx(jt,{className:"max-w-[200px] truncate",children:rt.endereco_coleta}),a.jsx(jt,{children:rt.status==="ativa"?a.jsx(Bt,{className:"bg-success/20 text-success",children:"Ativa"}):rt.status==="pausada"?a.jsx(Bt,{variant:"secondary",children:"Pausada"}):a.jsx(Bt,{variant:"destructive",children:"Cancelada"})}),a.jsx(jt,{children:new Date(rt.data_adesao).toLocaleDateString("pt-BR")})]},rt.id)})})]})})]})})]})]}),a.jsx(hs,{open:h,onOpenChange:f,children:a.jsxs(as,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:g?"Editar Rota":"Nova Rota"}),a.jsx(Sl,{children:"Configure os detalhes da rota de coleta"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"nome",children:"Nome da Rota *"}),a.jsx(mt,{id:"nome",value:T,onChange:rt=>O(rt.target.value),placeholder:"Ex: Rota Centro"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"operador",children:"Operador"}),a.jsxs(wi,{value:D,onValueChange:z,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione o operador"})}),a.jsx(xi,{children:s.map(rt=>a.jsx(or,{value:rt.id,children:rt.nome_fantasia},rt.id))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"descricao",children:"Descrio"}),a.jsx(Od,{id:"descricao",value:I,onChange:rt=>M(rt.target.value),placeholder:"Descrio da rota...",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"status",children:"Status"}),a.jsxs(wi,{value:F,onValueChange:q,children:[a.jsx(gi,{children:a.jsx(_i,{})}),a.jsxs(xi,{children:[a.jsx(or,{value:"ativa",children:"Ativa"}),a.jsx(or,{value:"bloqueada",children:"Bloqueada"}),a.jsx(or,{value:"inativa",children:"Inativa"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(nt,{children:"Dias de Coleta"}),a.jsx("div",{className:"grid gap-3",children:Nfe.map(rt=>{const Lt=Q.find(Dt=>Dt.dia===rt.value);return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 w-40",children:[a.jsx(MB,{checked:!!Lt,onCheckedChange:()=>Xt(rt.value)}),a.jsx("span",{className:"text-sm",children:rt.label})]}),Lt&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mt,{type:"time",value:Lt.inicio,onChange:Dt=>Jt(rt.value,"inicio",Dt.target.value),className:"w-28"}),a.jsx("span",{children:"at"}),a.jsx(mt,{type:"time",value:Lt.fim,onChange:Dt=>Jt(rt.value,"fim",Dt.target.value),className:"w-28"})]})]},rt.value)})})]})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(Oe,{onClick:_r,disabled:E,children:[E&&a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),g?"Salvar":"Criar Rota"]})]})]})}),a.jsx(hs,{open:m,onOpenChange:x,children:a.jsxs(as,{className:"max-w-xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(fs,{children:[a.jsx(ms,{children:"Adicionar rea de Cobertura"}),a.jsxs(Sl,{children:["Rota: ",w==null?void 0:w.nome]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4 bg-muted/30",children:[a.jsx(nt,{className:"text-sm font-medium mb-3 block",children:" Localizao"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"areaUf",children:"Estado *"}),a.jsxs(wi,{value:J,onValueChange:ie,children:[a.jsx(gi,{children:a.jsx(_i,{placeholder:"Selecione"})}),a.jsx(xi,{children:M9t.map(rt=>a.jsxs(or,{value:rt.uf,children:[rt.uf," - ",rt.nome]},rt.uf))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"areaCidade",children:"Cidade *"}),a.jsx(mt,{id:"areaCidade",value:xe,onChange:rt=>H(rt.target.value),placeholder:"Ex: Salvador"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{children:"Bairros *"}),a.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:Ge,children:[a.jsx(ya,{className:"h-3 w-3 mr-1"}),"Adicionar"]})]}),a.jsx("div",{className:"space-y-2",children:Z.map((rt,Lt)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{value:rt,onChange:Dt=>Te(Lt,Dt.target.value),placeholder:"Ex: Piat, Itapu, Centro"}),Z.length>1&&a.jsx(Oe,{type:"button",variant:"ghost",size:"icon",onClick:()=>Be(Lt),className:"shrink-0 text-destructive hover:text-destructive",children:a.jsx(vl,{className:"h-4 w-4"})})]},Lt))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{children:"Logradouros (opcional)"}),a.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:ze,children:[a.jsx(ya,{className:"h-3 w-3 mr-1"}),"Adicionar"]})]}),a.jsx("div",{className:"space-y-2",children:K.map((rt,Lt)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{value:rt,onChange:Dt=>Re(Lt,Dt.target.value),placeholder:"Ex: Rua das Flores, Av. Principal"}),K.length>1&&a.jsx(Oe,{type:"button",variant:"ghost",size:"icon",onClick:()=>tt(Lt),className:"shrink-0 text-destructive hover:text-destructive",children:a.jsx(vl,{className:"h-4 w-4"})})]},Lt))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{children:"CEPs (opcional)"}),a.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:Ue,children:[a.jsx(ya,{className:"h-3 w-3 mr-1"}),"Adicionar"]})]}),a.jsx("div",{className:"space-y-2",children:Y.map((rt,Lt)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(mt,{value:rt,onChange:Dt=>st(Lt,Dt.target.value),placeholder:"00000-000",className:"w-40"}),Y.length>1&&a.jsx(Oe,{type:"button",variant:"ghost",size:"icon",onClick:()=>xt(Lt),className:"shrink-0 text-destructive hover:text-destructive",children:a.jsx(vl,{className:"h-4 w-4"})})]},Lt))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(nt,{htmlFor:"complemento",children:"Complemento (opcional)"}),a.jsx(mt,{id:"complemento",value:ce,onChange:rt=>me(rt.target.value),placeholder:"Ex: Nmeros pares, prximo  praa"})]})]}),a.jsxs(If,{children:[a.jsx(Oe,{variant:"outline",onClick:()=>x(!1),children:"Cancelar"}),a.jsxs(Oe,{onClick:lt,disabled:E,children:[E&&a.jsx(jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Adicionar reas"]})]})]})})]})})}const F9t={nota_fiscal:"Nota Fiscal (SEFAZ)"};function B9t(){var h;const t=nn(),[e,r]=C.useState([]),[n,i]=C.useState(!0),[s,o]=C.useState("todas");C.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:f,error:m}=await Ee.from("interesses_funcionalidades").select("estado, cidade, funcionalidade");if(m)throw m;const x={};f==null||f.forEach(y=>{const w=`${y.estado||"N/A"}-${y.cidade||"N/A"}-${y.funcionalidade}`;x[w]||(x[w]={estado:y.estado,cidade:y.cidade,funcionalidade:y.funcionalidade,total:0}),x[w].total++});const g=Object.values(x).sort((y,w)=>w.total-y.total);r(g)}catch(f){console.error("Erro ao carregar interesses:",f)}finally{i(!1)}},c=s==="todas"?e:e.filter(f=>f.funcionalidade===s),u=c.reduce((f,m)=>f+m.total,0),d=new Set(c.map(f=>f.estado)).size;return a.jsx($v,{children:a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Interesses por Funcionalidade"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Demanda de usurios por estado e cidade"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx(it,{children:a.jsxs(ht,{className:"p-4 flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(yl,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Interesses"}),a.jsx("p",{className:"text-2xl font-bold",children:u})]})]})}),a.jsx(it,{children:a.jsxs(ht,{className:"p-4 flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-500/10 flex items-center justify-center",children:a.jsx(Rm,{className:"h-6 w-6 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Estados com Demanda"}),a.jsx("p",{className:"text-2xl font-bold",children:d})]})]})}),a.jsx(it,{children:a.jsxs(ht,{className:"p-4 flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/10 flex items-center justify-center",children:a.jsx(Hs,{className:"h-6 w-6 text-blue-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Maior Demanda"}),a.jsx("p",{className:"text-lg font-bold truncate",children:((h=c[0])==null?void 0:h.estado)||"-"})]})]})})]}),a.jsx(it,{className:"mb-6",children:a.jsx(ht,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtrar por:"}),a.jsxs(wi,{value:s,onValueChange:o,children:[a.jsx(gi,{className:"w-[200px]",children:a.jsx(_i,{placeholder:"Funcionalidade"})}),a.jsxs(xi,{children:[a.jsx(or,{value:"todas",children:"Todas"}),a.jsx(or,{value:"nota_fiscal",children:"Nota Fiscal (SEFAZ)"})]})]})]})})}),a.jsxs(it,{children:[a.jsx(At,{children:a.jsx(Ct,{className:"text-lg",children:"Demanda por Localidade"})}),a.jsx(ht,{children:n?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando..."}):c.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum interesse registrado ainda."}):a.jsxs(Ja,{children:[a.jsx(eo,{children:a.jsxs(Dn,{children:[a.jsx(It,{children:"Estado"}),a.jsx(It,{children:"Cidade"}),a.jsx(It,{children:"Funcionalidade"}),a.jsx(It,{className:"text-right",children:"Interessados"})]})}),a.jsx(to,{children:c.map((f,m)=>a.jsxs(Dn,{children:[a.jsx(jt,{children:a.jsx(Bt,{variant:"outline",className:"font-mono",children:f.estado||"N/A"})}),a.jsx(jt,{className:"font-medium",children:f.cidade||"No informada"}),a.jsx(jt,{children:F9t[f.funcionalidade]||f.funcionalidade}),a.jsx(jt,{className:"text-right",children:a.jsx(Bt,{className:"bg-primary/10 text-primary border-0",children:f.total})})]},m))})]})})]})]})})})}const DK=()=>{const t=nn();return C.useEffect(()=>{window.scrollTo(0,1),setTimeout(()=>{window.scrollTo(0,0)},0)},[]),a.jsxs("div",{className:"bg-background text-foreground overflow-x-hidden",children:[a.jsx(Ke.div,{className:"fixed top-4 right-4 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:a.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>t("/auth"),className:"font-display font-medium bg-white/90 backdrop-blur-sm hover:bg-white shadow-md rounded-full gap-2",children:"Entrar"})}),a.jsxs("section",{className:"relative py-20 px-4 md:px-8 overflow-hidden bg-gradient-to-b from-primary/5 to-background",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx(Ke.div,{className:"absolute -top-20 -right-20 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0}}),a.jsx(Ke.div,{className:"absolute -bottom-20 -left-20 w-80 h-80 bg-accent/10 rounded-full blur-3xl",animate:{scale:[1,1.15,1],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,delay:1}})]}),a.jsxs("div",{className:"max-w-5xl mx-auto text-center relative z-10",children:[a.jsx(Ke.img,{src:"/Ciclik_validacoes/logo-with-slogan.png",alt:"Ciclik",className:"h-24 mx-auto mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0}}),a.jsxs(Ke.h1,{className:"font-display text-3xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:["A reciclagem no Brasil"," ",a.jsx("span",{className:"text-destructive",children:"no funciona."}),a.jsx("br",{}),a.jsx("span",{className:"text-primary",children:"Ns criamos o mtodo definitivo que vai fazer funcionar."})]}),a.jsxs(Ke.p,{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto mb-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Um programa de fidelidade ambiental que transforma cidados em agentes de mudana e empresas em patrocinadoras de impacto real."," ",a.jsx("span",{className:"font-display italic text-accent",children:"Assim ajudamos todo mundo a ajudar o mundo!"})]}),a.jsx(Ke.div,{className:"flex flex-wrap justify-center gap-4 mb-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[{icon:Wp,text:"100% Auditvel"},{icon:Cs,text:"3 Mdulos Integrados"},{icon:qu,text:"nico no Brasil"}].map((e,r)=>a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-card rounded-full border border-border shadow-sm",children:[a.jsx(e.icon,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"font-medium text-sm",children:e.text})]},r))}),a.jsx(Ke.p,{className:"text-muted-foreground text-lg mb-6 max-w-lg mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:"Faa parte do movimento que est reinventando a economia circular no Brasil."}),a.jsxs(Ke.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[a.jsxs(Oe,{size:"lg",className:"text-lg px-8",onClick:()=>t("/auth"),children:[a.jsx(ps,{className:"w-5 h-5 mr-2"}),"Participar e Ganhar Pontos"]}),a.jsxs(Oe,{variant:"outline",size:"lg",className:"text-lg px-8 border-accent text-accent hover:bg-accent hover:text-accent-foreground",onClick:()=>{window.scrollTo(0,0),t("/apresentacao-investidor")},children:[a.jsx(eu,{className:"w-5 h-5 mr-2"}),"Patrocinar Impacto Real",a.jsx(Lu,{className:"w-5 h-5 ml-2"})]})]})]})]}),a.jsx("section",{className:"py-20 px-4 md:px-8 bg-card",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs(Ke.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("h2",{className:"font-display text-2xl md:text-4xl font-bold mb-4",children:["Por que a reciclagem ",a.jsx("span",{className:"text-destructive",children:"no funciona"})," no Brasil?"]}),a.jsx("p",{className:"text-muted-foreground text-lg",children:"Menos de 4% dos resduos reciclveis so efetivamente reciclados."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[a.jsx(Ke.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},children:a.jsxs(it,{className:"p-6 border-destructive/30 bg-destructive/5",children:[a.jsxs("h3",{className:"font-display text-xl font-semibold mb-4 flex items-center gap-2 text-destructive",children:[a.jsx(al,{className:"w-6 h-6"}),"O Problema"]}),a.jsx("ul",{className:"space-y-4",children:["Falta educao ambiental acessvel","Ningum sabe o que  reciclvel de verdade","No h incentivo real para reciclar","Impactos ambientais so impossveis de rastrear"].map((e,r)=>a.jsxs("li",{className:"flex items-start gap-3 text-muted-foreground",children:[a.jsx(al,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),e]},r))})]})}),a.jsx(Ke.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},children:a.jsxs(it,{className:"p-6 border-primary/30 bg-primary/5",children:[a.jsxs("h3",{className:"font-display text-xl font-semibold mb-4 flex items-center gap-2 text-primary",children:[a.jsx(au,{className:"w-6 h-6"}),"A Soluo Ciclik"]}),a.jsx("ul",{className:"space-y-4",children:["Misses educativas que ensinam na prtica","Anlise de reciclabilidade via nota fiscal","Pontos que viram benefcios reais","Cada ao gera um UIB (Unidade de Impacto) rastrevel"].map((e,r)=>a.jsxs("li",{className:"flex items-start gap-3 text-foreground",children:[a.jsx(au,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e]},r))})]})})]})]})}),a.jsx("section",{className:"py-20 px-4 md:px-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs(Ke.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("h2",{className:"font-display text-2xl md:text-4xl font-bold mb-4",children:["O Ciclo ",a.jsx("span",{className:"text-primary",children:"Completo"})]}),a.jsx("p",{className:"text-muted-foreground text-lg",children:"Um ecossistema que conecta empresas, pessoas e cooperativas."})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:eu,title:"Empresas",subtitle:"Investem",desc:"Financiam aes reais de sustentabilidade",color:"bg-accent"},{icon:yl,title:"Usurios",subtitle:"Agem",desc:"Aprendem, consomem consciente e entregam reciclveis",color:"bg-primary"},{icon:wRe,title:"Cooperativas",subtitle:"Transformam",desc:"Recebem materiais e geram renda para catadores",color:"bg-green-600"}].map((e,r)=>a.jsxs(Ke.div,{className:"text-center",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.15},children:[a.jsx("div",{className:`w-20 h-20 ${e.color} rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg`,children:a.jsx(e.icon,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"font-display text-xl font-bold",children:e.title}),a.jsx("p",{className:"text-primary font-medium text-sm mb-2",children:e.subtitle}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.desc})]},r))}),a.jsxs("div",{className:"hidden md:flex absolute top-10 left-1/2 transform -translate-x-1/2 w-2/3 justify-around",children:[a.jsx(Ke.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.5},children:a.jsx(Lu,{className:"w-8 h-8 text-primary/50"})}),a.jsx(Ke.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.7},children:a.jsx(Lu,{className:"w-8 h-8 text-primary/50"})})]})]}),a.jsxs(Ke.div,{className:"mt-12 text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-primary/10 rounded-full border border-primary/20",children:[a.jsx(Cs,{className:"w-6 h-6 text-primary"}),a.jsxs("span",{className:"font-medium text-foreground",children:["= ",a.jsx("span",{className:"text-primary font-bold",children:"Impacto Real Certificado"})," (CDV)"]})]}),a.jsxs("p",{className:"mt-6 text-muted-foreground max-w-xl mx-auto",children:["100% dos resduos vo para cooperativas de catadores. Sua ao no apenas recicla  ",a.jsx("span",{className:"text-primary font-medium",children:"ela transforma vidas."})]})]})]})}),a.jsx("section",{className:"py-20 px-4 md:px-8 bg-card",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-stretch",children:[a.jsxs(Ke.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"flex flex-col h-full",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-primary/20 rounded-full text-primary text-sm font-medium mb-4",children:[a.jsx(yl,{className:"w-4 h-4"}),"Para Voc"]}),a.jsxs("h2",{className:"font-display text-2xl md:text-3xl font-bold mb-3",children:["Como Voc ",a.jsx("span",{className:"text-primary",children:"Participa"})]}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"Recicle, aprenda e ganhe. Simples assim."}),a.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[{icon:l6,step:"1",title:"Aprenda",desc:"Misses de educao ambiental",color:"bg-blue-500"},{icon:ORe,step:"2",title:"Registre",desc:"Escaneie notas fiscais",color:"bg-purple-500"},{icon:Gp,step:"3",title:"Entregue",desc:"Leve s cooperativas",color:"bg-primary"},{icon:Hu,step:"4",title:"Ganhe",desc:"Troque por descontos",color:"bg-accent"}].map((e,r)=>a.jsx(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},children:a.jsxs(it,{className:"p-4 h-full text-center hover:shadow-md transition-shadow",children:[a.jsx("div",{className:`w-10 h-10 ${e.color} rounded-xl flex items-center justify-center mx-auto mb-2`,children:a.jsx(e.icon,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{className:"text-[10px] font-semibold text-muted-foreground mb-0.5",children:["PASSO ",e.step]}),a.jsx("h3",{className:"font-display text-sm font-semibold mb-1",children:e.title}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:e.desc})]})},r))}),a.jsx("div",{className:"p-4 bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl border border-primary/20 mb-6",children:a.jsxs("p",{className:"text-sm font-medium text-foreground text-center",children:[a.jsx("span",{className:"text-primary font-semibold",children:"Quanto mais voc recicla,"})," ","mais voc ganha."]})}),a.jsx("div",{className:"flex-grow"}),a.jsxs(Oe,{className:"w-full bg-primary hover:bg-primary/90 text-white font-display mt-auto",onClick:()=>t("/auth"),children:["Cadastre Grtis",a.jsx(Lu,{className:"w-4 h-4 ml-2"})]})]}),a.jsxs(Ke.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"flex flex-col h-full",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-accent/20 rounded-full text-accent text-sm font-medium mb-4",children:[a.jsx(eu,{className:"w-4 h-4"}),"Para Empresas"]}),a.jsxs("h2",{className:"font-display text-2xl md:text-3xl font-bold mb-3",children:["Por Que ",a.jsx("span",{className:"text-primary",children:"Investir"})]}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"Patrocine impacto real e comprove resultados."}),a.jsx("div",{className:"space-y-3 mb-6",children:[{icon:qu,title:"Certificado Digital Verde (CDV)",desc:"QR Code pblico e verificvel"},{icon:D_,title:"Dashboard em Tempo Real",desc:"Acompanhe kg, horas e famlias"},{icon:ERe,title:"Marketing Verde Autntico",desc:"Comunicao baseada em dados"},{icon:ev,title:"Compliance ESG",desc:"Relatrios auditveis"}].map((e,r)=>a.jsxs(Ke.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:r*.1},className:"flex items-center gap-3 p-3 bg-background rounded-lg border hover:border-primary/30 transition-colors",children:[a.jsx("div",{className:"w-9 h-9 bg-primary/10 rounded-lg flex items-center justify-center shrink-0",children:a.jsx(e.icon,{className:"w-5 h-5 text-primary"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-display text-sm font-semibold truncate",children:e.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.desc})]})]},r))}),a.jsxs("div",{className:"p-4 bg-accent/5 rounded-xl border border-accent/20 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Hs,{className:"w-4 h-4 text-accent"}),a.jsx("span",{className:"text-sm font-semibold",children:"Projetos Disponveis via LIR"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["Invista at ",a.jsx("span",{className:"font-semibold text-primary",children:"1% do seu Imposto de Renda"})," em projetos aprovados pelo MMA."]})]}),a.jsxs(Oe,{className:"w-full bg-accent hover:bg-accent/90 text-white font-display",onClick:()=>t("/cdv-investidor"),children:["Consulte Condies",a.jsx(Lu,{className:"w-4 h-4 ml-2"})]})]})]}),a.jsxs(Ke.div,{className:"mt-12 pt-8 border-t flex flex-wrap justify-center gap-6 items-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(zu,{className:"w-5 h-5 text-primary"}),"Validao pblica por QR Code"]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Wp,{className:"w-5 h-5 text-primary"}),"Auditoria independente"]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(ev,{className:"w-5 h-5 text-primary"}),"Projetos aprovados pelo MMA"]})]})]})}),a.jsx("section",{className:"py-20 px-4 md:px-8 bg-gradient-to-b from-card to-background",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx(Ke.div,{className:"text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:a.jsxs(it,{className:"p-8 md:p-12 bg-gradient-to-br from-primary/5 to-accent/5 border-primary/20",children:[a.jsx("h3",{className:"font-display text-2xl md:text-3xl font-bold mb-4",children:"Faa Parte da Revoluo"}),a.jsx("p",{className:"text-muted-foreground mb-8 max-w-lg mx-auto",children:"Faa parte do movimento que est reinventando a economia circular no Brasil."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(Oe,{size:"lg",className:"text-lg px-8",onClick:()=>t("/auth"),children:[a.jsx(ps,{className:"w-5 h-5 mr-2"}),"Participar e Ganhar Pontos"]}),a.jsxs(Oe,{variant:"outline",size:"lg",className:"text-lg px-8 border-accent text-accent hover:bg-accent hover:text-accent-foreground",onClick:()=>{window.scrollTo(0,0),t("/apresentacao-investidor")},children:[a.jsx(eu,{className:"w-5 h-5 mr-2"}),"Patrocinar Impacto Real",a.jsx(Lu,{className:"w-5 h-5 ml-2"})]})]})]})}),a.jsx("div",{className:"mt-12 text-center text-sm text-muted-foreground",children:a.jsx("p",{children:"contato@ciclik.com.br  ciclik.com.br"})})]})})]})},$9t={8:nPe,9:iPe,10:sPe,11:aPe,12:oPe,13:lPe},u1=({children:t,className:e="",id:r})=>{const n=C.useRef(null),i=rZ(n,{once:!0,margin:"-100px"});return a.jsx(Ke.section,{ref:n,id:r,initial:{opacity:0,y:50},animate:i?{opacity:1,y:0}:{},transition:{duration:.8,ease:"easeOut"},className:`min-h-screen flex items-center justify-center py-16 px-4 md:px-8 ${e}`,children:t})},U9t=()=>{const t=nn(),e=r=>{var n;(n=document.getElementById(r))==null||n.scrollIntoView({behavior:"smooth"})};return a.jsxs("div",{className:"bg-background text-foreground overflow-x-hidden",children:[a.jsx(Ke.div,{className:"fixed top-4 left-4 z-50",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:a.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>t("/apresentacao"),className:"font-display font-medium bg-white/90 backdrop-blur-sm hover:bg-white shadow-md rounded-full gap-2",children:[a.jsx(Kn,{className:"w-4 h-4"}),"Voltar"]})}),a.jsxs(u1,{id:"hero",className:"bg-gradient-to-br from-primary/10 via-background to-secondary/10 relative",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(15)].map((r,n)=>a.jsx(Ke.div,{className:"absolute",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-20,0],rotate:[0,360],opacity:[.2,.4,.2]},transition:{duration:4+Math.random()*3,repeat:1/0,delay:Math.random()*2},children:a.jsx(ps,{className:"w-6 h-6 text-primary/30"})},n))}),a.jsxs("div",{className:"max-w-6xl mx-auto text-center relative z-10",children:[a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.8,type:"spring"},className:"mb-6",children:a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full mb-4",children:[a.jsx(eu,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"font-display text-primary font-medium",children:"Para Empresas Investidoras"})]})}),a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:a.jsx("img",{src:"/Ciclik_validacoes/logo-with-slogan.png",alt:"Ciclik",className:"h-20 md:h-24 mx-auto"})}),a.jsxs(Ke.h1,{className:"text-3xl md:text-5xl lg:text-6xl font-display font-bold text-foreground mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3},children:["Certificado Digital",a.jsx("br",{}),a.jsx("span",{className:"text-primary",children:"Verde (CDV)"})]}),a.jsxs(Ke.p,{className:"text-lg md:text-xl text-muted-foreground font-body max-w-3xl mx-auto mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:["Invista em impacto ambiental ",a.jsx("strong",{children:"real, mensurvel e auditvel"}),". Associe sua marca a aes concretas de reciclagem e educao ambiental."]}),a.jsx(Ke.div,{className:"grid grid-cols-3 gap-4 max-w-2xl mx-auto mb-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[{value:"256",label:"UIBs por CDV"},{value:"100%",label:"Rastrevel"},{value:"QR Code",label:"Validao Pblica"}].map((r,n)=>a.jsxs("div",{className:"bg-card/80 backdrop-blur p-4 rounded-xl border",children:[a.jsx("div",{className:"text-2xl font-display font-bold text-primary",children:r.value}),a.jsx("div",{className:"text-xs text-muted-foreground",children:r.label})]},n))}),a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(Oe,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-display text-lg px-8",onClick:()=>t("/investidor"),children:[a.jsx(c6,{className:"w-5 h-5 mr-2"}),"Quero Investir"]}),a.jsxs(Oe,{size:"lg",variant:"outline",className:"font-display text-lg px-8",onClick:()=>e("oque"),children:["Saiba Mais",a.jsx(Lu,{className:"w-5 h-5 ml-2"})]})]}),a.jsx(Ke.div,{className:"absolute bottom-8 left-1/2 -translate-x-1/2 cursor-pointer",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},onClick:()=>e("oque"),children:a.jsx(MC,{className:"w-8 h-8 text-muted-foreground"})})]})]}),a.jsx(u1,{id:"oque",className:"bg-card",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx(Ke.span,{className:"inline-block px-4 py-2 bg-primary/10 text-primary rounded-full font-display text-sm mb-4",whileInView:{scale:[.8,1]},children:"O Produto"}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["Como funciona o ",a.jsx("span",{className:"text-primary",children:"CDV"}),"?"]}),a.jsxs("p",{className:"text-lg text-muted-foreground font-body max-w-3xl mx-auto",children:["A Ciclik desenvolve ",a.jsx("strong",{children:"projetos de sustentabilidade"})," que geram impacto ambiental real, rastrevel e auditvel. Cada projeto  dividido em ",a.jsx("strong",{children:"quotas"})," que podem ser adquiridas por investidores."]})]}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-12",children:[a.jsxs(Ke.div,{className:"bg-gradient-to-br from-primary/10 to-primary/5 p-8 rounded-3xl border",whileInView:{opacity:1,x:0},initial:{opacity:0,x:-30},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:a.jsx(c6,{className:"w-6 h-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-display font-bold text-xl",children:"Cada Quota = R$ 2.000"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Investimento mnimo por quota"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-muted-foreground font-body",children:["Cada quota adquirida d direito a ",a.jsx("strong",{children:"1 CDV"})," que ser emitido quando o projeto gerar o impacto correspondente:"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{icon:Cs,value:"250 kg",label:"Resduos Reciclados"},{icon:ah,value:"5 horas",label:"Educao Ambiental"},{icon:ore,value:"1 estudo",label:"Reciclabilidade"},{icon:yl,value:"~134",label:"Pessoas Impactadas"}].map((r,n)=>a.jsxs(Ke.div,{className:"text-center p-4 bg-background/80 rounded-xl",whileInView:{opacity:1,y:0},initial:{opacity:0,y:20},transition:{delay:n*.1},children:[a.jsx(r.icon,{className:"w-6 h-6 text-primary mx-auto mb-2"}),a.jsx("div",{className:"text-lg font-display font-bold",children:r.value}),a.jsx("div",{className:"text-xs text-muted-foreground hyphens-auto",lang:"pt-BR",children:r.label})]},n))})]})]}),a.jsxs(Ke.div,{className:"bg-card p-8 rounded-3xl border shadow-lg",whileInView:{opacity:1,x:0},initial:{opacity:0,x:30},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-secondary rounded-xl flex items-center justify-center",children:a.jsx(Hs,{className:"w-6 h-6 text-secondary-foreground"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-display font-bold text-xl",children:"Exemplo: Projeto 1.000 Quotas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor total: R$ 2.000.000"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsx("span",{className:"font-body",children:"Resduos Reciclados"}),a.jsx("span",{className:"font-display font-bold text-primary",children:"250 toneladas"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsx("span",{className:"font-body",children:"Educao Ambiental"}),a.jsx("span",{className:"font-display font-bold text-primary",children:"5.000 horas"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsx("span",{className:"font-body",children:"Estudos de Reciclabilidade"}),a.jsx("span",{className:"font-display font-bold text-primary",children:"1.000 produtos"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary/10 rounded-lg border border-primary/20",children:[a.jsx("span",{className:"font-display font-semibold",children:"CDVs Emitidos"}),a.jsx("span",{className:"font-display font-bold text-2xl text-primary",children:"1.000"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-ciclik-orange/10 rounded-lg border border-ciclik-orange/30",children:[a.jsx("span",{className:"font-display font-semibold",children:"Pessoas Impactadas"}),a.jsx("span",{className:"font-display font-bold text-2xl text-ciclik-orange",children:"~134 mil"})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-primary/5 to-ciclik-orange/5 rounded-xl border border-primary/10",children:[a.jsx("p",{className:"text-xs text-muted-foreground text-center mb-3 font-body",children:" Ecossistema Ciclik Atual"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-display font-bold text-primary",children:"+4 mil"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"CDVs Ativos"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-display font-bold text-primary",children:"382 ton"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Reciclado"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-display font-bold text-primary",children:"800h"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Educao"})]})]})]})]})]}),a.jsxs("div",{className:"bg-muted/30 p-8 rounded-3xl",children:[a.jsx("h3",{className:"text-xl font-display font-bold text-center mb-8",children:"Jornada do Investidor"}),a.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:[{step:1,icon:Am,title:"Escolha o Projeto",desc:"Analise os projetos Ciclik disponveis e seus impactos"},{step:2,icon:c6,title:"Adquira Quotas",desc:"Invista R$ 2.000 por quota no projeto escolhido"},{step:3,icon:Tg,title:"Acompanhe",desc:"Monitore o progresso do impacto em tempo real no dashboard"},{step:4,icon:qu,title:"Receba seu CDV",desc:"Certificado emitido quando o impacto for gerado e auditado"}].map((r,n)=>a.jsxs(Ke.div,{className:"relative text-center",whileInView:{opacity:1,y:0},initial:{opacity:0,y:20},transition:{delay:n*.1},children:[a.jsx("div",{className:"w-10 h-10 bg-primary text-primary-foreground rounded-full flex items-center justify-center mx-auto mb-3 font-display font-bold",children:r.step}),a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),a.jsx("h4",{className:"font-display font-semibold mb-2",children:r.title}),a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:r.desc}),n<3&&a.jsx("div",{className:"hidden md:block absolute top-8 -right-3",children:a.jsx(Lu,{className:"w-6 h-6 text-primary/30"})})]},n))})]}),a.jsx(Ke.div,{className:"mt-12 p-6 bg-gradient-to-br from-ciclik-green/10 to-ciclik-green/5 rounded-2xl border border-ciclik-green/30",whileInView:{opacity:1,y:0},initial:{opacity:0,y:20},children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[a.jsx("div",{className:"p-4 bg-ciclik-green rounded-2xl shrink-0",children:a.jsx(ev,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h4",{className:"font-display font-bold text-xl text-ciclik-green mb-2",children:" Incentivo Fiscal via LIR"}),a.jsxs("p",{className:"text-muted-foreground font-body",children:["CDVs podem ser adquiridos por meio da ",a.jsx("strong",{className:"text-foreground",children:"Lei de Incentivo  Reciclagem (LIR)"}),", utilizando um percentual do ",a.jsx("strong",{className:"text-foreground",children:"Imposto de Renda devido"}),". Consulte a disponibilidade de projetos aprovados pelo ",a.jsx("strong",{className:"text-foreground",children:"Ministrio do Meio Ambiente"}),"."]})]})]})}),a.jsxs(Ke.div,{className:"mt-12 p-8 bg-gradient-to-br from-ciclik-green/5 to-transparent rounded-2xl border",whileInView:{opacity:1,y:0},initial:{opacity:0,y:20},children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h4",{className:"font-display font-bold text-2xl mb-3",children:" Alinhamento com a Agenda 2030"}),a.jsx("p",{className:"text-muted-foreground font-body max-w-2xl mx-auto",children:"Os CDVs Ciclik contribuem diretamente para 6 Objetivos de Desenvolvimento Sustentvel da ONU."})]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-4",children:[{num:8,name:"Trabalho Decente e Crescimento Econmico"},{num:9,name:"Indstria, Inovao e Infraestrutura"},{num:10,name:"Reduo das Desigualdades"},{num:11,name:"Cidades e Comunidades Sustentveis"},{num:12,name:"Consumo e Produo Responsveis"},{num:13,name:"Ao Contra a Mudana Global do Clima"}].map((r,n)=>a.jsxs(Ke.div,{className:"group relative",whileInView:{opacity:1,scale:1},initial:{opacity:0,scale:.8},transition:{delay:n*.1},whileHover:{scale:1.1,zIndex:10},children:[a.jsx("img",{src:$9t[r.num],alt:`ODS ${r.num}: ${r.name}`,className:"w-full rounded-lg shadow-md"}),a.jsx("div",{className:"absolute inset-0 bg-black/80 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:a.jsx("p",{className:"text-white text-xs font-body text-center",children:r.name})})]},r.num))})]}),a.jsx(Ke.div,{className:"mt-8 p-6 bg-gradient-to-r from-primary to-primary/80 rounded-2xl text-primary-foreground text-center",whileInView:{opacity:1,scale:1},initial:{opacity:0,scale:.95},children:a.jsxs("p",{className:"text-lg font-display font-semibold",children:[" O CDV  emitido apenas quando o impacto ambiental  ",a.jsx("strong",{children:"efetivamente gerado"}),",",a.jsx("strong",{children:" rastreado"})," e ",a.jsx("strong",{children:"auditado"}),"  garantindo total transparncia e credibilidade."]})})]})}),a.jsx(u1,{id:"como",className:"bg-muted/30",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx(Ke.span,{className:"inline-block px-4 py-2 bg-secondary/10 text-secondary-foreground rounded-full font-display text-sm mb-4",whileInView:{scale:[.8,1]},children:"O Processo"}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["Como o ",a.jsx("span",{className:"text-primary",children:"Impacto"}),"  Gerado?"]}),a.jsx("p",{className:"text-lg text-muted-foreground font-body max-w-2xl mx-auto",children:"Cada ao de um cidado no ecossistema Ciclik gera UIBs rastreveis que so atribudas ao seu CDV."})]}),a.jsx("div",{className:"grid md:grid-cols-4 gap-6 mb-12",children:[{step:1,icon:yl,title:"Usurio Age",desc:"Recicla, estuda ou registra compras no app Ciclik"},{step:2,icon:D_,title:"UIB Gerada",desc:"Sistema registra a Unidade de Impacto Base"},{step:3,icon:Dm,title:"Atribuio",desc:"UIB  vinculada ao seu CDV em maturao"},{step:4,icon:ev,title:"Certificado",desc:"Ao completar 256 UIBs, certificado  emitido"}].map((r,n)=>a.jsxs(Ke.div,{className:"relative",whileInView:{opacity:1,y:0},initial:{opacity:0,y:30},transition:{delay:n*.15},children:[a.jsxs("div",{className:"bg-card p-6 rounded-2xl border shadow-lg h-full text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center mx-auto mb-4 font-display font-bold",children:r.step}),a.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(r.icon,{className:"w-7 h-7 text-primary"})}),a.jsx("h3",{className:"text-lg font-display font-semibold mb-2",children:r.title}),a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:r.desc})]}),n<3&&a.jsx("div",{className:"hidden md:block absolute top-1/2 -right-3 w-6",children:a.jsx(Lu,{className:"w-6 h-6 text-primary/30"})})]},n))}),a.jsxs(Ke.div,{className:"bg-card p-8 rounded-2xl border shadow-lg max-w-3xl mx-auto",whileInView:{opacity:1,scale:1},initial:{opacity:0,scale:.95},children:[a.jsx("h3",{className:"text-center font-display font-bold mb-6",children:"Frmula do CDV"}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[a.jsxs("div",{className:"bg-primary/10 p-4 rounded-xl text-center",children:[a.jsx(Cs,{className:"w-8 h-8 text-primary mx-auto mb-2"}),a.jsx("div",{className:"font-display font-bold",children:"250 kg"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Resduos"})]}),a.jsx("span",{className:"text-2xl font-bold text-muted-foreground",children:"+"}),a.jsxs("div",{className:"bg-blue-500/10 p-4 rounded-xl text-center",children:[a.jsx(ah,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),a.jsx("div",{className:"font-display font-bold",children:"5 horas"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Educao"})]}),a.jsx("span",{className:"text-2xl font-bold text-muted-foreground",children:"+"}),a.jsxs("div",{className:"bg-secondary/10 p-4 rounded-xl text-center",children:[a.jsx(ore,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),a.jsx("div",{className:"font-display font-bold",children:"1 produto"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Mapeado"})]}),a.jsx("span",{className:"text-2xl font-bold text-muted-foreground",children:"="}),a.jsxs("div",{className:"bg-gradient-to-br from-primary to-primary/80 p-4 rounded-xl text-center text-primary-foreground",children:[a.jsx(qu,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-display font-bold",children:"1 CDV"}),a.jsx("div",{className:"text-xs opacity-80",children:"256 UIBs"})]})]})]})]})}),a.jsx(u1,{id:"beneficios",className:"bg-gradient-to-br from-primary/5 to-secondary/5",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx(Ke.span,{className:"inline-block px-4 py-2 bg-primary/10 text-primary rounded-full font-display text-sm mb-4",whileInView:{scale:[.8,1]},children:"Vantagens"}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["Por que investir em ",a.jsx("span",{className:"text-primary",children:"CDV"}),"?"]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:Wp,title:"Compliance ESG",desc:"Atenda requisitos regulatrios e de investidores com impacto comprovado",color:"primary"},{icon:dRe,title:"Marketing Autntico",desc:"Comunique sustentabilidade com dados reais, no promessas vazias",color:"secondary"},{icon:zu,title:"Validao Pblica",desc:"Qualquer pessoa pode verificar seu impacto via QR Code",color:"primary"},{icon:pRe,title:"Dashboard em Tempo Real",desc:"Acompanhe o progresso do seu CDV a qualquer momento",color:"blue-500"},{icon:fV,title:"Impacto Local",desc:"Apoie cooperativas e comunidades brasileiras diretamente",color:"primary"},{icon:Hs,title:"Valorizao de Marca",desc:"Diferenciao competitiva com selo Ciclik - Digital Verde",color:"secondary"}].map((r,n)=>a.jsxs(Ke.div,{className:"bg-card p-6 rounded-2xl border shadow-lg",whileInView:{opacity:1,y:0},initial:{opacity:0,y:30},transition:{delay:n*.1},whileHover:{y:-5,transition:{duration:.2}},children:[a.jsx("div",{className:`w-14 h-14 bg-${r.color}/10 rounded-xl flex items-center justify-center mb-4`,children:a.jsx(r.icon,{className:`w-7 h-7 text-${r.color}`})}),a.jsx("h3",{className:"text-lg font-display font-semibold mb-2",children:r.title}),a.jsx("p",{className:"text-muted-foreground font-body text-sm",children:r.desc})]},n))})]})}),a.jsx(u1,{id:"dashboard",className:"bg-card",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs(Ke.div,{whileInView:{opacity:1,x:0},initial:{opacity:0,x:-30},children:[a.jsx(Ke.span,{className:"inline-block px-4 py-2 bg-primary/10 text-primary rounded-full font-display text-sm mb-4",whileInView:{scale:[.8,1]},children:"Sua Experincia"}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["Dashboard do ",a.jsx("span",{className:"text-primary",children:"Investidor"})]}),a.jsx("p",{className:"text-lg text-muted-foreground font-body mb-8",children:"Acompanhe em tempo real o progresso dos seus CDVs, visualize mtricas de impacto e emita certificados quando estiverem completos."}),a.jsx("div",{className:"space-y-4",children:[{icon:gRe,text:"Progresso detalhado por tipo de impacto"},{icon:Am,text:"Visibilidade total das UIBs atribudas"},{icon:Gl,text:"Acompanhamento do perodo de maturao"},{icon:ev,text:"Emisso automtica de certificados"},{icon:zu,text:"QR Codes para validao pblica"}].map((r,n)=>a.jsxs(Ke.div,{className:"flex items-center gap-4",whileInView:{opacity:1,x:0},initial:{opacity:0,x:-20},transition:{delay:n*.1},children:[a.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:a.jsx(r.icon,{className:"w-5 h-5 text-primary"})}),a.jsx("span",{className:"font-body",children:r.text})]},n))})]}),a.jsxs(Ke.div,{className:"relative",whileInView:{opacity:1,scale:1},initial:{opacity:0,scale:.9},transition:{delay:.3},children:[a.jsxs("div",{className:"bg-muted/50 p-6 rounded-3xl border shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/Ciclik_validacoes/ciclik-logo.png",alt:"Ciclik",className:"h-6"}),a.jsx("span",{className:"font-display font-semibold",children:"Meu Portflio"})]}),a.jsx("div",{className:"px-3 py-1 bg-primary/10 rounded-full text-sm text-primary font-medium",children:"3 CDVs Ativos"})]}),a.jsx("div",{className:"space-y-4 mb-6",children:[{label:"Resduos",progress:78,color:"bg-primary",value:"585 kg"},{label:"Educao",progress:92,color:"bg-blue-500",value:"13,8 h"},{label:"Produtos",progress:100,color:"bg-[#FBBB1A]",value:"3"}].map((r,n)=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"font-medium font-body",children:r.label}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-display font-semibold text-foreground",children:r.value}),a.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${r.progress===100?"bg-primary/20 text-primary font-semibold":"text-muted-foreground bg-muted"}`,children:[r.progress,"%"]})]})]}),a.jsx("div",{className:"h-3 bg-muted rounded-full overflow-hidden shadow-inner",children:a.jsx(Ke.div,{className:`h-full ${r.color} rounded-full shadow-sm`,initial:{width:0},whileInView:{width:`${r.progress}%`},transition:{duration:1.2,delay:n*.15,ease:"easeOut"}})})]},n))}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 p-4 rounded-xl text-center border border-primary/20",children:[a.jsx("div",{className:"text-xl font-display font-bold text-primary",children:"585 kg"}),a.jsx("div",{className:"text-xs text-muted-foreground font-body",children:"Total Reciclado"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-500/5 p-4 rounded-xl text-center border border-blue-500/20",children:[a.jsx("div",{className:"text-xl font-display font-bold text-blue-600",children:"13,8 h"}),a.jsx("div",{className:"text-xs text-muted-foreground font-body",children:"Educao"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-ciclik-orange/10 to-ciclik-orange/5 p-4 rounded-xl text-center border border-ciclik-orange/20",children:[a.jsx("div",{className:"text-xl font-display font-bold text-ciclik-orange",children:"3"}),a.jsx("div",{className:"text-xs text-muted-foreground font-body",children:"Produtos"})]})]})]}),a.jsx("div",{className:"absolute -z-10 -top-4 -left-4 w-full h-full bg-primary/10 rounded-3xl"})]})]})})}),a.jsx(u1,{id:"certificado",className:"bg-muted/30",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx(Ke.span,{className:"inline-block px-4 py-2 bg-primary/10 text-primary rounded-full font-display text-sm mb-4",whileInView:{scale:[.8,1]},children:"O Resultado"}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["Seu ",a.jsx("span",{className:"text-primary",children:"Certificado"})," Digital"]}),a.jsx("p",{className:"text-lg text-muted-foreground font-body max-w-2xl mx-auto",children:"Ao completar 100% das metas, seu certificado  emitido automaticamente com validao pblica via QR Code."})]}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs(Ke.div,{className:"bg-card p-8 rounded-3xl border shadow-2xl",whileInView:{opacity:1,rotateY:0},initial:{opacity:0,rotateY:-15},transition:{duration:.8},children:[a.jsx("div",{className:"border-b pb-6 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("img",{src:"/Ciclik_validacoes/ciclik-logo.png",alt:"Ciclik",className:"h-10"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Certificado N"}),a.jsx("div",{className:"font-mono text-sm",children:"CDV-2025-00142"})]})]})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-display font-bold mb-2",children:"Certificado Digital Verde"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ciclik - Digital Verde"})]}),a.jsx("div",{className:"bg-muted/50 p-4 rounded-xl mb-6",children:a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Empresa Certificada"}),a.jsx("div",{className:"font-display font-bold text-lg",children:"Sua Empresa LTDA"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"CNPJ: 00.000.000/0001-00"})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-3 bg-primary/5 rounded-lg",children:[a.jsx(Cs,{className:"w-6 h-6 text-primary mx-auto mb-1"}),a.jsx("div",{className:"font-bold",children:"250 kg"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Reciclados"})]}),a.jsxs("div",{className:"text-center p-3 bg-blue-500/5 rounded-lg",children:[a.jsx(ah,{className:"w-6 h-6 text-blue-500 mx-auto mb-1"}),a.jsx("div",{className:"font-bold",children:"5 horas"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Educao"})]}),a.jsxs("div",{className:"text-center p-3 bg-secondary/5 rounded-lg",children:[a.jsx(k0e,{className:"w-6 h-6 text-secondary mx-auto mb-1"}),a.jsx("div",{className:"font-bold",children:"425 kg"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"CO Evitado"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.jsx("div",{children:"Emitido em: 05/01/2026"}),a.jsx("div",{children:"Vlido permanentemente"})]}),a.jsx("div",{className:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center",children:a.jsx(zu,{className:"w-12 h-12 text-muted-foreground"})})]})]}),a.jsx("div",{className:"space-y-6",children:[{icon:SRe,title:"Imutvel e Permanente",desc:"Uma vez emitido, o certificado  permanente e no pode ser alterado"},{icon:zu,title:"Validao Pblica",desc:"Qualquer pessoa pode escanear o QR Code e verificar a autenticidade"},{icon:fV,title:"Compartilhvel",desc:"Link pblico para incluir em relatrios, sites e materiais de marketing"},{icon:ev,title:"Download em PDF",desc:"Baixe o certificado em alta resoluo para impresso ou arquivo"}].map((r,n)=>a.jsxs(Ke.div,{className:"flex gap-4",whileInView:{opacity:1,x:0},initial:{opacity:0,x:20},transition:{delay:n*.15},children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-display font-semibold mb-1",children:r.title}),a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:r.desc})]})]},n))})]})]})}),a.jsx(u1,{id:"projetos-lir",className:"bg-background",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx(Ke.span,{className:"inline-block px-4 py-2 bg-primary/10 text-primary rounded-full font-display text-sm mb-4",whileInView:{scale:[.8,1]},children:"Aprovados pelo MMA"}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-4",children:["Projetos ",a.jsx("span",{className:"text-primary",children:"LIR"})," Disponveis"]}),a.jsx("p",{className:"text-lg text-muted-foreground font-body max-w-3xl mx-auto",children:"Projetos aprovados pelo Ministrio do Meio Ambiente elegveis para captao via Lei de Incentivo  Reciclagem (Lei n 14.260/2021)"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[a.jsxs(Ke.div,{className:"bg-card p-8 rounded-3xl border shadow-lg",whileInView:{opacity:1,y:0},initial:{opacity:0,y:30},transition:{delay:.1},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:a.jsx(Cs,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx(Bt,{variant:"outline",className:"bg-primary/5 text-primary border-primary/20 mb-1",children:"MMA e ILZB"}),a.jsx("h3",{className:"font-display font-bold text-xl",children:"Ciclik Gamificao"})]})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Valor Total"}),a.jsx("span",{className:"font-display font-bold text-lg",children:"R$ 1.200.000,00"})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Quotas"}),a.jsx("span",{className:"font-display font-bold text-primary",children:"600"})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Vigncia"}),a.jsx("span",{className:"font-display font-semibold",children:"10/02/2026 - 10/02/2027"})]}),a.jsxs("div",{className:"flex justify-between items-center py-2",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Valor por Quota"}),a.jsx("span",{className:"font-display font-semibold",children:"R$ 2.000,00"})]})]}),a.jsx("div",{className:"p-4 bg-muted/50 rounded-xl mb-4 min-h-[88px] flex items-center",children:a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:"Soluo que combina tecnologia, economia circular, educao ambiental e justia social  com impacto direto na valorizao dos catadores, no fortalecimento das cadeias de reciclagem e na regenerao dos territrios."})}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-4",children:[a.jsxs("div",{className:"p-2 bg-primary/5 rounded-lg text-center",children:[a.jsx("div",{className:"font-semibold",children:"150.000 kg"}),a.jsx("div",{className:"text-muted-foreground",children:"Resduos"})]}),a.jsxs("div",{className:"p-2 bg-primary/5 rounded-lg text-center",children:[a.jsx("div",{className:"font-semibold",children:"3.000 min"}),a.jsx("div",{className:"text-muted-foreground",children:"Educao"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Wp,{className:"w-4 h-4 text-primary"}),a.jsx("span",{children:"Aprovado pelo Ministrio do Meio Ambiente"})]})]}),a.jsxs(Ke.div,{className:"bg-card p-8 rounded-3xl border shadow-lg",whileInView:{opacity:1,y:0},initial:{opacity:0,y:30},transition:{delay:.2},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-[#FBBB1A]/10 rounded-xl flex items-center justify-center",children:a.jsx(ah,{className:"w-6 h-6 text-[#FBBB1A]"})}),a.jsxs("div",{children:[a.jsx(Bt,{variant:"outline",className:"bg-[#FBBB1A]/5 text-[#FBBB1A] border-[#FBBB1A]/20 mb-1",children:"MMA e ILZB"}),a.jsx("h3",{className:"font-display font-bold text-xl",children:"Ciclik Conecta"})]})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Valor Total"}),a.jsx("span",{className:"font-display font-bold text-lg",children:"R$ 3.000.000,00"})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Quotas"}),a.jsx("span",{className:"font-display font-bold text-[#FBBB1A]",children:"1.500"})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Vigncia"}),a.jsx("span",{className:"font-display font-semibold",children:"31/12/2025 - 31/12/2027"})]}),a.jsxs("div",{className:"flex justify-between items-center py-2",children:[a.jsx("span",{className:"text-muted-foreground font-body",children:"Valor por Quota"}),a.jsx("span",{className:"font-display font-semibold",children:"R$ 2.000,00"})]})]}),a.jsx("div",{className:"p-4 bg-muted/50 rounded-xl mb-4 min-h-[88px] flex items-center",children:a.jsx("p",{className:"text-sm text-muted-foreground font-body",children:"Implantao de rotas inteligentes de coletas seletivas por meio do programa de fidelidade ambiental da Ciclik em parceria com cooperativas selecionadas."})}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-4",children:[a.jsxs("div",{className:"p-2 bg-[#FBBB1A]/10 rounded-lg text-center",children:[a.jsx("div",{className:"font-semibold",children:"375.000 kg"}),a.jsx("div",{className:"text-muted-foreground",children:"Resduos"})]}),a.jsxs("div",{className:"p-2 bg-[#FBBB1A]/10 rounded-lg text-center",children:[a.jsx("div",{className:"font-semibold",children:"7.500 min"}),a.jsx("div",{className:"text-muted-foreground",children:"Educao"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Wp,{className:"w-4 h-4 text-[#FBBB1A]"}),a.jsx("span",{children:"Aprovado pelo Ministrio do Meio Ambiente"})]})]})]}),a.jsx(Ke.div,{className:"mt-12 p-6 bg-gradient-to-r from-primary/5 via-primary/10 to-ciclik-orange/5 rounded-2xl border border-primary/10",whileInView:{opacity:1,y:0},initial:{opacity:0,y:20},children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[a.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:a.jsx(ev,{className:"w-8 h-8 text-primary"})}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h4",{className:"font-display font-bold text-lg mb-2",children:"Lei de Incentivo  Reciclagem (LIR)"}),a.jsxs("p",{className:"text-sm text-muted-foreground font-body",children:["Empresas podem deduzir at ",a.jsx("strong",{children:"1% do IRPJ"})," ao investir em projetos aprovados pelo MMA, transformando tributos em impacto ambiental real e certificado."]})]})]})})]})}),a.jsx(u1,{id:"cta",className:"bg-gradient-to-br from-primary via-primary/90 to-primary/80 text-primary-foreground",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx(Ke.div,{whileInView:{scale:[.8,1]},className:"mb-8",children:a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx(qu,{className:"w-12 h-12"})})}),a.jsxs("h2",{className:"text-3xl md:text-5xl font-display font-bold mb-6",children:["Pronto para Certificar",a.jsx("br",{}),"o Impacto da sua Empresa?"]}),a.jsx("p",{className:"text-xl text-primary-foreground/80 font-body mb-8 max-w-2xl mx-auto",children:"Junte-se s empresas que j esto comprovando seu compromisso ambiental com o Certificado Digital Verde."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(Oe,{size:"lg",className:"bg-white text-primary hover:bg-white/90 font-display text-lg px-8",onClick:()=>t("/investidor"),children:[a.jsx(KO,{className:"w-5 h-5 mr-2"}),"Investir Agora"]}),a.jsxs(Oe,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10 font-display text-lg px-8",onClick:()=>t("/investidor#projetos"),children:[a.jsx(Am,{className:"w-5 h-5 mr-2"}),"Ver Projetos Disponveis"]})]}),a.jsxs(Ke.div,{className:"mt-16 pt-8 border-t border-white/20",whileInView:{opacity:1},initial:{opacity:0},children:[a.jsx("p",{className:"text-primary-foreground/60 font-body text-sm mb-4",children:"Dvidas? Fale com nossa equipe comercial"}),a.jsx("p",{className:"font-display text-lg",children:"comercial@ciclik.com.br"})]})]})}),a.jsx("footer",{className:"bg-card py-8 px-4 border-t",children:a.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[a.jsx("img",{src:"/Ciclik_validacoes/ciclik-logo.png",alt:"Ciclik",className:"h-8"}),a.jsxs("p",{className:"text-sm text-muted-foreground font-body",children:[" ",new Date().getFullYear()," Ciclik. Todos os direitos reservados."]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/apresentacao"),children:"Apresentao Geral"}),a.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/"),children:"Voltar ao App"})]})]})})]})};function z9t(){const{notifications:t,unreadCount:e,loading:r,preferences:n,markAsRead:i,markAllAsRead:s,deleteNotification:o,updatePreferences:l,requestPushPermission:c}=Z7e(),u=nn(),d=async x=>{x.read||await i(x.id),x.action_url&&u(x.action_url)},h=async()=>{n!=null&&n.enable_push?(await l({enable_push:!1}),cr.info("Notificaes push desativadas")):await c()?cr.success("Notificaes push ativadas!"):cr.error("Permisso de notificao negada")},f=x=>{switch(x){case"success":return"";case"warning":return"";case"error":return"";case"info":return"";default:return""}},m=t.filter(x=>!x.read);return t.filter(x=>x.read),a.jsxs("div",{className:"container max-w-4xl py-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>{window.scrollTo(0,1),setTimeout(()=>window.scrollTo(0,0),10),u(-1)},children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Notificaes"}),a.jsx("p",{className:"text-muted-foreground",children:"Gerencie suas notificaes e preferncias"})]})]}),a.jsxs(yc,{defaultValue:"all",className:"w-full",children:[a.jsxs(Jl,{className:"grid w-full grid-cols-3",children:[a.jsxs(ri,{value:"all",children:["Todas (",t.length,")"]}),a.jsxs(ri,{value:"unread",children:["No lidas (",e,")"]}),a.jsxs(ri,{value:"settings",children:[a.jsx(OM,{className:"h-4 w-4 mr-2"}),"Configuraes"]})]}),a.jsxs(Ti,{value:"all",className:"space-y-4",children:[e>0&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(Oe,{variant:"outline",size:"sm",onClick:s,children:[a.jsx(xl,{className:"h-4 w-4 mr-2"}),"Marcar todas como lidas"]})}),r?a.jsx(it,{className:"p-8",children:a.jsx("div",{className:"flex items-center justify-center text-muted-foreground",children:"Carregando notificaes..."})}):t.length===0?a.jsx(it,{className:"p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-muted-foreground space-y-2",children:[a.jsx(DX,{className:"h-12 w-12 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:"Nenhuma notificao"}),a.jsx("p",{className:"text-sm",children:"Voc est em dia! "})]})}):a.jsx("div",{className:"space-y-2",children:t.map(x=>a.jsx(it,{className:Ut("p-4 cursor-pointer transition-all hover:shadow-md",!x.read&&"border-l-4 border-l-blue-600 bg-accent/50"),onClick:()=>d(x),children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-shrink-0 text-3xl",children:f(x.type)}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:Ut("font-medium",!x.read&&"font-semibold"),children:x.title}),a.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:g=>{g.stopPropagation(),o(x.id)},children:a.jsx(vl,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:x.message}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:$A(new Date(x.created_at),{addSuffix:!0,locale:Wi})}),x.action_label&&a.jsxs("span",{className:"text-sm font-medium text-primary",children:[x.action_label," "]})]})]})]})},x.id))})]}),a.jsx(Ti,{value:"unread",className:"space-y-4",children:m.length===0?a.jsx(it,{className:"p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-muted-foreground space-y-2",children:[a.jsx(xl,{className:"h-12 w-12 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:"Tudo lido!"}),a.jsx("p",{className:"text-sm",children:"Voc no tem notificaes pendentes"})]})}):a.jsx("div",{className:"space-y-2",children:m.map(x=>a.jsx(it,{className:"p-4 cursor-pointer transition-all hover:shadow-md border-l-4 border-l-blue-600 bg-accent/50",onClick:()=>d(x),children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-shrink-0 text-3xl",children:f(x.type)}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-semibold",children:x.title}),a.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:g=>{g.stopPropagation(),o(x.id)},children:a.jsx(vl,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:x.message}),a.jsx("p",{className:"text-xs text-muted-foreground",children:$A(new Date(x.created_at),{addSuffix:!0,locale:Wi})})]})]})},x.id))})}),a.jsx(Ti,{value:"settings",children:a.jsxs(it,{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Canais de Notificao"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Escolha como voc deseja receber notificaes"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(nt,{htmlFor:"in-app",children:"Notificaes no App"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receba notificaes dentro da aplicao"})]}),a.jsx(nh,{id:"in-app",checked:(n==null?void 0:n.enable_in_app)??!0,onCheckedChange:x=>l({enable_in_app:x})})]}),a.jsx(r0,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(nt,{htmlFor:"push",children:"Push Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receba notificaes mesmo quando no estiver usando o app"})]}),a.jsx(nh,{id:"push",checked:(n==null?void 0:n.enable_push)??!1,onCheckedChange:h})]})]})]}),a.jsx(r0,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tipos de Notificao"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Escolha quais notificaes voc deseja receber"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{htmlFor:"new-coleta",children:"Novas Coletas"}),a.jsx(nh,{id:"new-coleta",checked:(n==null?void 0:n.notify_new_coleta)??!0,onCheckedChange:x=>l({notify_new_coleta:x})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{htmlFor:"status-change",children:"Mudanas de Status"}),a.jsx(nh,{id:"status-change",checked:(n==null?void 0:n.notify_status_change)??!0,onCheckedChange:x=>l({notify_status_change:x})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{htmlFor:"messages",children:"Novas Mensagens"}),a.jsx(nh,{id:"messages",checked:(n==null?void 0:n.notify_new_message)??!0,onCheckedChange:x=>l({notify_new_message:x})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{htmlFor:"system",children:"Atualizaes do Sistema"}),a.jsx(nh,{id:"system",checked:(n==null?void 0:n.notify_system_updates)??!0,onCheckedChange:x=>l({notify_system_updates:x})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{htmlFor:"achievements",children:"Conquistas e Marcos"}),a.jsx(nh,{id:"achievements",checked:(n==null?void 0:n.notify_achievements)??!0,onCheckedChange:x=>l({notify_achievements:x})})]})]})]})]})})]})]})}const V9t=()=>{const t=Bg(),e=nn();return C.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/10 flex items-center justify-center p-4 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(8)].map((r,n)=>a.jsx(Ke.div,{className:"absolute",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],rotate:[0,180,360],opacity:[.1,.3,.1]},transition:{duration:8+Math.random()*4,repeat:1/0,delay:Math.random()*2},children:a.jsx(ps,{className:"w-12 h-12 text-primary/20"})},n))}),a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl w-full relative z-10",children:a.jsxs(it,{className:"p-8 md:p-12 border-2 shadow-2xl bg-card/95 backdrop-blur",children:[a.jsx(Ke.div,{className:"flex justify-center mb-6",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:a.jsxs("div",{className:"relative",children:[a.jsx(Ke.div,{className:"absolute inset-0 rounded-full bg-destructive/20",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),a.jsx("div",{className:"relative w-24 h-24 rounded-full bg-destructive/10 flex items-center justify-center",children:a.jsx(Za,{className:"w-12 h-12 text-destructive"})})]})}),a.jsxs(Ke.div,{className:"text-center mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[a.jsx("h1",{className:"text-8xl md:text-9xl font-display font-bold text-primary mb-2",children:"404"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground mb-2",children:[a.jsx(Jp,{className:"w-4 h-4"}),a.jsx("p",{className:"text-sm font-mono",children:t.pathname})]})]}),a.jsxs(Ke.div,{className:"text-center mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-display font-bold mb-3",children:"Pgina no encontrada"}),a.jsx("p",{className:"text-muted-foreground text-lg mb-2",children:"Ops! Parece que voc se perdeu na reciclagem..."}),a.jsx("p",{className:"text-muted-foreground",children:"A pgina que voc est procurando no existe ou foi movida."})]}),a.jsxs(Ke.div,{className:"bg-muted/50 rounded-lg p-6 mb-8",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[a.jsxs("p",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx(ps,{className:"w-4 h-4 text-primary"}),"Sugestes:"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Verifique se digitou o endereo corretamente"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Tente voltar  pgina anterior"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Ou retorne  pgina inicial"]})]})]}),a.jsxs(Ke.div,{className:"flex flex-col sm:flex-row gap-3 justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[a.jsxs(Oe,{size:"lg",onClick:()=>e("/"),className:"gap-2",children:[a.jsx(T0e,{className:"w-5 h-5"}),"Ir para Incio"]}),a.jsxs(Oe,{size:"lg",variant:"outline",onClick:()=>{window.scrollTo(0,1),setTimeout(()=>window.scrollTo(0,0),10),e(-1)},className:"gap-2",children:[a.jsx(Kn,{className:"w-5 h-5"}),"Voltar"]})]}),a.jsx(Ke.div,{className:"mt-8 pt-6 border-t text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:a.jsx("img",{src:"/Ciclik_validacoes/ciclik-logo.png",alt:"Ciclik",className:"h-8 mx-auto opacity-50 hover:opacity-100 transition-opacity"})})]})})]})};function q9t(){const[t,e]=C.useState(!0),[r,n]=C.useState([]),[i,s]=C.useState(""),[o,l]=C.useState(""),[c,u]=C.useState(!1);C.useEffect(()=>{d()},[]);const d=async()=>{e(!0);const x=[],g=["ajustes_pontos_manuais","alertas_estoque","cache_notas_fiscais","cdv_certificados","cdv_conciliacoes","cdv_config","cdv_investidores","cdv_leads","cdv_novo","cdv_projetos","cdv_quotas","chatbot_conversas","configuracoes_sistema","cooperativas","cupons","cupons_resgates","emails_cooperativas","emails_investidores","empresas","entregas_reciclaveis","estoque_educacao","estoque_embalagens","estoque_residuos","impacto_bruto","indicacoes","kpis","materiais_coletados_detalhado","materiais_pontuacao","materiais_reciclaveis_usuario","metricas_empresas","missoes","missoes_usuarios","notas_fiscais","notas_fiscais_cooperativa","notificacoes","pontos_mensais_usuarios","produto_embalagens","produtos_ciclik","profiles","questoes_missao","respostas_quiz","saldo_parcial","uib","user_roles","variacoes_peso_entrega"];for(const y of g)try{const{data:w,error:S,count:E}=await Ee.from(y).select("*",{count:"exact",head:!1}).limit(1);S?S.code==="PGRST116"?x.push({table:y,status:"notFound",message:"Tabela no existe"}):S.code==="42501"?x.push({table:y,status:"noPermission",message:"Sem permisso RLS"}):S.code==="PGRST301"?x.push({table:y,status:"noPermission",message:"JWT expirado ou invlido"}):x.push({table:y,status:"error",message:`[${S.code}] ${S.message.substring(0,50)}`}):(x.push({table:y,status:"success",message:"Acessvel",count:E||0}),u(!0))}catch(w){x.push({table:y,status:"error",message:w.message.substring(0,50)})}n(x);try{const{data:{session:y}}=await Ee.auth.getSession();s(y?` Autenticado como: ${y.user.email}`:" Nenhum usurio autenticado")}catch(y){s(` Erro: ${y.message}`)}try{const{data:y,error:w}=await Ee.storage.listBuckets();w?l(` Erro ao acessar storage: ${w.message}`):y&&y.length>0?l(` ${y.length} bucket(s) configurado(s): ${y.map(S=>S.name).join(", ")}`):l(" Nenhum bucket configurado")}catch(y){l(` Erro: ${y.message}`)}e(!1)},h=x=>{switch(x){case"success":return a.jsx(au,{className:"w-5 h-5 text-green-500"});case"notFound":return a.jsx(Za,{className:"w-5 h-5 text-gray-400"});case"noPermission":return a.jsx(Za,{className:"w-5 h-5 text-orange-500"});case"error":return a.jsx(al,{className:"w-5 h-5 text-red-500"})}},f=x=>({success:{variant:"default",label:"Acessvel"},notFound:{variant:"secondary",label:"No existe"},noPermission:{variant:"destructive",label:"Sem permisso"},error:{variant:"destructive",label:"Erro"}})[x],m=r.filter(x=>x.status==="success").length;return a.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold mb-2",children:" Teste de Conexo Supabase"}),a.jsx("p",{className:"text-muted-foreground",children:"Verificando conectividade e acessibilidade das tabelas do banco de dados"})]}),t?a.jsx(it,{children:a.jsx(ht,{className:"flex items-center justify-center p-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(jn,{className:"w-12 h-12 animate-spin mx-auto mb-4 text-primary"}),a.jsx("p",{className:"text-lg",children:"Testando conexo com Supabase..."})]})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(it,{className:c?"border-green-500":"border-red-500",children:[a.jsxs(At,{children:[a.jsx(Ct,{className:"flex items-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx(au,{className:"w-6 h-6 text-green-500"}),"Conexo Estabelecida"]}):a.jsxs(a.Fragment,{children:[a.jsx(al,{className:"w-6 h-6 text-red-500"}),"Problemas na Conexo"]})}),a.jsxs(gr,{children:[m," de ",r.length," tabelas acessveis"]})]}),a.jsxs(ht,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("strong",{children:"URL:"}),a.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:"https://yfoqehkemzxbwzrbfubq.supabase.co"})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Autenticao:"})," ",i]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Storage:"})," ",o]})]})]}),a.jsxs(it,{children:[a.jsxs(At,{children:[a.jsx(Ct,{children:" Tabelas do Banco de Dados"}),a.jsx(gr,{children:"Status de acesso s tabelas do projeto"})]}),a.jsx(ht,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(x=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[h(x.status),a.jsxs("div",{children:[a.jsx("div",{className:"font-mono font-semibold",children:x.table}),x.count!==void 0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[x.count," registro(s)"]})]})]}),a.jsx(Bt,{variant:f(x.status).variant,children:f(x.status).label})]},x.table))})})]})]})]})}function H9t(){const[t]=$ge(),e=nn(),[r,n]=C.useState("loading"),[i,s]=C.useState("");C.useEffect(()=>{(async()=>{let c;if(window.location.hash){const f=window.location.hash.substring(1);c=new URLSearchParams(f)}else c=t;const u=c.get("access_token"),d=c.get("refresh_token"),h=c.get("type");if(!u||!d||h!=="signup"){n("pending"),s("Verifique seu email para confirmar seu cadastro.");return}try{const{data:f,error:m}=await Ee.auth.setSession({access_token:u,refresh_token:d});if(m){console.error(" [EMAIL-CONFIRM] Erro na confirmao:",m),n("error"),s("Erro ao confirmar email. O link pode ter expirado.");return}f.user&&(n("success"),s("Email confirmado com sucesso! Voc j pode fazer login."))}catch(f){console.error(" [EMAIL-CONFIRM] Erro inesperado:",f),n("error"),s("Erro ao confirmar email. Por favor, tente novamente.")}})()},[t,e]);const o=()=>{switch(r){case"loading":return a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-16 w-16 text-primary animate-spin mx-auto mb-4"}),a.jsx(Ct,{className:"text-2xl text-center mb-2",children:"Confirmando email..."}),a.jsx(gr,{className:"text-center",children:"Aguarde enquanto confirmamos seu cadastro."})]});case"success":return a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),a.jsx(Ct,{className:"text-2xl text-center mb-2",children:" Email Confirmado!"}),a.jsx(gr,{className:"text-center mb-4",children:i}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:a.jsxs("p",{className:"text-sm text-green-800 text-center",children:[a.jsx("strong",{children:"Parabns!"})," Sua conta foi ativada com sucesso. Agora voc pode fazer login e comear a usar a plataforma."]})}),a.jsx(Oe,{onClick:()=>e("/auth"),className:"w-full",children:"Ir para o Login"})]});case"error":return a.jsxs(a.Fragment,{children:[a.jsx(al,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx(Ct,{className:"text-2xl text-center mb-2",children:"Erro na Confirmao"}),a.jsx(gr,{className:"text-center mb-4",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Oe,{onClick:()=>e("/auth"),className:"w-full",children:"Voltar para Login"}),a.jsx(Oe,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Tentar Novamente"})]})]});case"pending":return a.jsxs(a.Fragment,{children:[a.jsx(NA,{className:"h-16 w-16 text-primary mx-auto mb-4"}),a.jsx(Ct,{className:"text-2xl text-center mb-2",children:"Verifique seu Email"}),a.jsx(gr,{className:"text-center mb-4",children:"Enviamos um link de confirmao para seu email. Clique no link para ativar sua conta."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Dica:"})," Verifique tambm sua caixa de spam ou lixo eletrnico."]})}),a.jsx(Oe,{onClick:()=>e("/auth"),variant:"outline",className:"w-full",children:"Voltar para Login"})]})}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-secondary/20 p-4",children:a.jsxs(it,{className:"w-full max-w-md shadow-lg",children:[a.jsx(At,{children:a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:Bp("ciclik-logo-full.png"),alt:"Ciclik - Recicle e Ganhe",className:"h-20 w-auto object-contain"})})}),a.jsx(ht,{className:"space-y-4",children:o()})]})})}const W9t=new XMe({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:5*60*1e3}}});function G9t(){const{userRole:t,loading:e,user:r}=Si(),n=Bg();return e?null:r?n.pathname==="/termos-pendentes"?null:t==="admin"?a.jsx(mx,{to:"/admin",replace:!0}):t==="cooperativa"?a.jsx(mx,{to:"/cooperative",replace:!0}):t==="empresa"?a.jsx(mx,{to:"/company",replace:!0}):t==="investidor"?a.jsx(mx,{to:"/cdv/investor",replace:!0}):t==="vendedor"||t==="usuario"?a.jsx(mx,{to:"/user",replace:!0}):a.jsx(mx,{to:"/auth",replace:!0}):a.jsx(DK,{})}function K9t(){return a.jsxs(tLe,{children:[a.jsx(un,{path:"/auth",element:a.jsx(w$e,{})}),a.jsx(un,{path:"/auth/confirm",element:a.jsx(H9t,{})}),a.jsx(un,{path:"/forgot-password",element:a.jsx(_$e,{})}),a.jsx(un,{path:"/reset-password",element:a.jsx(N$e,{})}),a.jsx(un,{path:"/",element:a.jsx(G9t,{})}),a.jsx(un,{path:"/institucional",element:a.jsx(DK,{})}),a.jsx(un,{path:"/user",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(Z_t,{})})}),a.jsx(un,{path:"/missions",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(eNt,{})})}),a.jsx(un,{path:"/mission/content/:id",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(_Nt,{})})}),a.jsx(un,{path:"/mission/study/:id",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(tNt,{})})}),a.jsx(un,{path:"/mission/quiz/:id",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(hNt,{})})}),a.jsx(un,{path:"/upload-receipt",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(nSt,{})})}),a.jsx(un,{path:"/select-materials",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(EBt,{})})}),a.jsx(un,{path:"/deliver-recyclables",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(HSt,{})})}),a.jsx(un,{path:"/delivery-history",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(WSt,{})})}),a.jsx(un,{path:"/materials-history",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(KSt,{})})}),a.jsx(un,{path:"/coupons",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(XSt,{})})}),a.jsx(un,{path:"/redeem-coupons",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(B7t,{})})}),a.jsx(un,{path:"/points-statement",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(ABt,{})})}),a.jsx(un,{path:"/goals",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(OBt,{})})}),a.jsx(un,{path:"/profile",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor"],children:a.jsx(pEt,{})})}),a.jsx(un,{path:"/termos-pendentes",element:a.jsx(Vn,{allowedRoles:["admin","usuario","vendedor","cooperativa","investidor"],skipTermosCheck:!0,children:a.jsx(l7t,{})})}),a.jsx(un,{path:"/notifications",element:a.jsx(Vn,{allowedRoles:["usuario","vendedor","cooperativa","empresa","admin","investidor"],children:a.jsx(z9t,{})})}),a.jsx(un,{path:"/cooperative",element:a.jsx(Vn,{allowedRoles:["cooperativa"],children:a.jsx(xEt,{})})}),a.jsx(un,{path:"/cooperative/scan-qrcode",element:a.jsx(Vn,{allowedRoles:["cooperativa"],children:a.jsx(vEt,{})})}),a.jsx(un,{path:"/cooperative/register-materials/:entregaId",element:a.jsx(Vn,{allowedRoles:["cooperativa"],children:a.jsx(DEt,{})})}),a.jsx(un,{path:"/cooperative/validate",element:a.jsx(Vn,{allowedRoles:["cooperativa"],children:a.jsx(MEt,{})})}),a.jsx(un,{path:"/cooperative/deliveries",element:a.jsx(Vn,{allowedRoles:["cooperativa"],children:a.jsx(LEt,{})})}),a.jsx(un,{path:"/company",element:a.jsx(Vn,{allowedRoles:["empresa"],children:a.jsx(AIt,{})})}),a.jsx(un,{path:"/company/metrics",element:a.jsx(Vn,{allowedRoles:["empresa"],children:a.jsx(CIt,{})})}),a.jsx(un,{path:"/admin",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(FEt,{})})}),a.jsx(un,{path:"/admin/missions",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(BEt,{})})}),a.jsx(un,{path:"/admin/missions/edit/:id",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx($Et,{})})}),a.jsx(un,{path:"/admin/coupons",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(UEt,{})})}),a.jsx(un,{path:"/admin/operadores-logisticos",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(Wkt,{})})}),a.jsx(un,{path:"/admin/companies",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(Gkt,{})})}),a.jsx(un,{path:"/admin/companies/:id/metrics",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(jIt,{})})}),a.jsx(un,{path:"/admin/users",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(TIt,{})})}),a.jsx(un,{path:"/admin/kpis",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(VIt,{})})}),a.jsx(un,{path:"/admin/documentation",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(KMt,{})})}),a.jsx(un,{path:"/admin/termos",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(i8t,{})})}),a.jsx(un,{path:"/admin/termos/novo",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(Che,{})})}),a.jsx(un,{path:"/admin/termos/:id",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(c8t,{})})}),a.jsx(un,{path:"/admin/termos/:id/editar",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(Che,{})})}),a.jsx(un,{path:"/admin/termos/:id/relatorio",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(u8t,{})})}),a.jsx(un,{path:"/admin/products",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(k7t,{})})}),a.jsx(un,{path:"/admin/products/report",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(O7t,{})})}),a.jsx(un,{path:"/admin/settings",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(I7t,{})})}),a.jsx(un,{path:"/admin/gamification",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(R7t,{})})}),a.jsx(un,{path:"/admin/points-audit",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(D7t,{})})}),a.jsx(un,{path:"/admin/delivery-promises",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(jBt,{})})}),a.jsx(un,{path:"/admin/cdv",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(D9t,{})})}),a.jsx(un,{path:"/admin/rotas",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(L9t,{})})}),a.jsx(un,{path:"/admin/interesses",element:a.jsx(Vn,{allowedRoles:["admin"],children:a.jsx(B9t,{})})}),a.jsx(un,{path:"/cdv",element:a.jsx(IBt,{})}),a.jsx(un,{path:"/investidor",element:a.jsx(vfe,{})}),a.jsx(un,{path:"/cdv-investidor",element:a.jsx(vfe,{})}),a.jsx(un,{path:"/apresentacao",element:a.jsx(DK,{})}),a.jsx(un,{path:"/apresentacao-investidor",element:a.jsx(U9t,{})}),a.jsx(un,{path:"/cdv/investor",element:a.jsx(Vn,{allowedRoles:["investidor"],children:a.jsx(QBt,{})})}),a.jsx(un,{path:"/cdv/certificate/:id",element:a.jsx(Vn,{allowedRoles:["investidor"],children:a.jsx(JBt,{})})}),a.jsx(un,{path:"/cdv/validate/:id",element:a.jsx(e9t,{})}),a.jsx(un,{path:"/test/supabase",element:a.jsx(q9t,{})}),a.jsx(un,{path:"*",element:a.jsx(V9t,{})})]})}const X9t=()=>a.jsx(e8e,{client:W9t,children:a.jsxs(Dp,{children:[a.jsx(gDe,{}),a.jsx(KDe,{}),a.jsx(cBe,{}),a.jsx(cLe,{basename:"/Ciclik_validacoes",children:a.jsx(X7e,{children:a.jsx(Y7e,{children:a.jsx(K9t,{})})})})]})});Xpe(document.getElementById("root")).render(a.jsx(X9t,{}));export{Us as _,pm as c,Vi as g};
